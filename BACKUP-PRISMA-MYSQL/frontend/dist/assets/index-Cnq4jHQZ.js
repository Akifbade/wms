var eL=Object.defineProperty;var tL=(e,t,r)=>t in e?eL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ir=(e,t,r)=>tL(e,typeof t!="symbol"?t+"":t,r);function wE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NE={exports:{}},n1={},jE={exports:{}},hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=Symbol.for("react.element"),rL=Symbol.for("react.portal"),nL=Symbol.for("react.fragment"),aL=Symbol.for("react.strict_mode"),sL=Symbol.for("react.profiler"),iL=Symbol.for("react.provider"),oL=Symbol.for("react.context"),lL=Symbol.for("react.forward_ref"),cL=Symbol.for("react.suspense"),uL=Symbol.for("react.memo"),dL=Symbol.for("react.lazy"),s4=Symbol.iterator;function fL(e){return e===null||typeof e!="object"?null:(e=s4&&e[s4]||e["@@iterator"],typeof e=="function"?e:null)}var AE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CE=Object.assign,SE={};function xf(e,t,r){this.props=e,this.context=t,this.refs=SE,this.updater=r||AE}xf.prototype.isReactComponent={};xf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function EE(){}EE.prototype=xf.prototype;function aw(e,t,r){this.props=e,this.context=t,this.refs=SE,this.updater=r||AE}var sw=aw.prototype=new EE;sw.constructor=aw;CE(sw,xf.prototype);sw.isPureReactComponent=!0;var i4=Array.isArray,kE=Object.prototype.hasOwnProperty,iw={current:null},PE={key:!0,ref:!0,__self:!0,__source:!0};function IE(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)kE.call(t,n)&&!PE.hasOwnProperty(n)&&(s[n]=t[n]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:x0,type:e,key:i,ref:o,props:s,_owner:iw.current}}function hL(e,t){return{$$typeof:x0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ow(e){return typeof e=="object"&&e!==null&&e.$$typeof===x0}function mL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var o4=/\/+/g;function Qx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mL(""+e.key):t.toString(36)}function np(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case x0:case rL:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Qx(o,0):n,i4(s)?(r="",e!=null&&(r=e.replace(o4,"$&/")+"/"),np(s,t,r,"",function(d){return d})):s!=null&&(ow(s)&&(s=hL(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(o4,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",i4(e))for(var c=0;c<e.length;c++){i=e[c];var u=n+Qx(i,c);o+=np(i,t,r,u,s)}else if(u=fL(e),typeof u=="function")for(e=u.call(e),c=0;!(i=e.next()).done;)i=i.value,u=n+Qx(i,c++),o+=np(i,t,r,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function dm(e,t,r){if(e==null)return e;var n=[],s=0;return np(e,n,"","",function(i){return t.call(r,i,s++)}),n}function pL(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bs={current:null},ap={transition:null},gL={ReactCurrentDispatcher:bs,ReactCurrentBatchConfig:ap,ReactCurrentOwner:iw};function TE(){throw Error("act(...) is not supported in production builds of React.")}hr.Children={map:dm,forEach:function(e,t,r){dm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return dm(e,function(){t++}),t},toArray:function(e){return dm(e,function(t){return t})||[]},only:function(e){if(!ow(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};hr.Component=xf;hr.Fragment=nL;hr.Profiler=sL;hr.PureComponent=aw;hr.StrictMode=aL;hr.Suspense=cL;hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gL;hr.act=TE;hr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=CE({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=iw.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)kE.call(t,u)&&!PE.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:x0,type:e.type,key:s,ref:i,props:n,_owner:o}};hr.createContext=function(e){return e={$$typeof:oL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iL,_context:e},e.Consumer=e};hr.createElement=IE;hr.createFactory=function(e){var t=IE.bind(null,e);return t.type=e,t};hr.createRef=function(){return{current:null}};hr.forwardRef=function(e){return{$$typeof:lL,render:e}};hr.isValidElement=ow;hr.lazy=function(e){return{$$typeof:dL,_payload:{_status:-1,_result:e},_init:pL}};hr.memo=function(e,t){return{$$typeof:uL,type:e,compare:t===void 0?null:t}};hr.startTransition=function(e){var t=ap.transition;ap.transition={};try{e()}finally{ap.transition=t}};hr.unstable_act=TE;hr.useCallback=function(e,t){return bs.current.useCallback(e,t)};hr.useContext=function(e){return bs.current.useContext(e)};hr.useDebugValue=function(){};hr.useDeferredValue=function(e){return bs.current.useDeferredValue(e)};hr.useEffect=function(e,t){return bs.current.useEffect(e,t)};hr.useId=function(){return bs.current.useId()};hr.useImperativeHandle=function(e,t,r){return bs.current.useImperativeHandle(e,t,r)};hr.useInsertionEffect=function(e,t){return bs.current.useInsertionEffect(e,t)};hr.useLayoutEffect=function(e,t){return bs.current.useLayoutEffect(e,t)};hr.useMemo=function(e,t){return bs.current.useMemo(e,t)};hr.useReducer=function(e,t,r){return bs.current.useReducer(e,t,r)};hr.useRef=function(e){return bs.current.useRef(e)};hr.useState=function(e){return bs.current.useState(e)};hr.useSyncExternalStore=function(e,t,r){return bs.current.useSyncExternalStore(e,t,r)};hr.useTransition=function(){return bs.current.useTransition()};hr.version="18.3.1";jE.exports=hr;var P=jE.exports;const Un=Wo(P),_E=wE({__proto__:null,default:Un},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL=P,yL=Symbol.for("react.element"),vL=Symbol.for("react.fragment"),bL=Object.prototype.hasOwnProperty,wL=xL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NL={key:!0,ref:!0,__self:!0,__source:!0};function OE(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)bL.call(t,n)&&!NL.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:yL,type:e,key:i,ref:o,props:s,_owner:wL.current}}n1.Fragment=vL;n1.jsx=OE;n1.jsxs=OE;NE.exports=n1;var a=NE.exports,_y={},RE={exports:{}},fi={},DE={exports:{}},LE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(de,we){var Ee=de.length;de.push(we);e:for(;0<Ee;){var ie=Ee-1>>>1,V=de[ie];if(0<s(V,we))de[ie]=we,de[Ee]=V,Ee=ie;else break e}}function r(de){return de.length===0?null:de[0]}function n(de){if(de.length===0)return null;var we=de[0],Ee=de.pop();if(Ee!==we){de[0]=Ee;e:for(var ie=0,V=de.length,se=V>>>1;ie<se;){var ne=2*(ie+1)-1,ve=de[ne],be=ne+1,Te=de[be];if(0>s(ve,Ee))be<V&&0>s(Te,ve)?(de[ie]=Te,de[be]=Ee,ie=be):(de[ie]=ve,de[ne]=Ee,ie=ne);else if(be<V&&0>s(Te,Ee))de[ie]=Te,de[be]=Ee,ie=be;else break e}}return we}function s(de,we){var Ee=de.sortIndex-we.sortIndex;return Ee!==0?Ee:de.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,p=null,v=3,x=!1,w=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(de){for(var we=r(d);we!==null;){if(we.callback===null)n(d);else if(we.startTime<=de)n(d),we.sortIndex=we.expirationTime,t(u,we);else break;we=r(d)}}function _(de){if(j=!1,E(de),!w)if(r(u)!==null)w=!0,ue(O);else{var we=r(d);we!==null&&ye(_,we.startTime-de)}}function O(de,we){w=!1,j&&(j=!1,A(U),U=-1),x=!0;var Ee=v;try{for(E(we),p=r(u);p!==null&&(!(p.expirationTime>we)||de&&!z());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,v=p.priorityLevel;var V=ie(p.expirationTime<=we);we=e.unstable_now(),typeof V=="function"?p.callback=V:p===r(u)&&n(u),E(we)}else n(u);p=r(u)}if(p!==null)var se=!0;else{var ne=r(d);ne!==null&&ye(_,ne.startTime-we),se=!1}return se}finally{p=null,v=Ee,x=!1}}var B=!1,F=null,U=-1,L=5,K=-1;function z(){return!(e.unstable_now()-K<L)}function q(){if(F!==null){var de=e.unstable_now();K=de;var we=!0;try{we=F(!0,de)}finally{we?Q():(B=!1,F=null)}}else B=!1}var Q;if(typeof k=="function")Q=function(){k(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,H=G.port2;G.port1.onmessage=q,Q=function(){H.postMessage(null)}}else Q=function(){N(q,0)};function ue(de){F=de,B||(B=!0,Q())}function ye(de,we){U=N(function(){de(e.unstable_now())},we)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(de){de.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,ue(O))},e.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<de?Math.floor(1e3/de):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(de){switch(v){case 1:case 2:case 3:var we=3;break;default:we=v}var Ee=v;v=we;try{return de()}finally{v=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(de,we){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Ee=v;v=de;try{return we()}finally{v=Ee}},e.unstable_scheduleCallback=function(de,we,Ee){var ie=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ie+Ee:ie):Ee=ie,de){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Ee+V,de={id:h++,callback:we,priorityLevel:de,startTime:Ee,expirationTime:V,sortIndex:-1},Ee>ie?(de.sortIndex=Ee,t(d,de),r(u)===null&&de===r(d)&&(j?(A(U),U=-1):j=!0,ye(_,Ee-ie))):(de.sortIndex=V,t(u,de),w||x||(w=!0,ue(O))),de},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(de){var we=v;return function(){var Ee=v;v=we;try{return de.apply(this,arguments)}finally{v=Ee}}}})(LE);DE.exports=LE;var jL=DE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AL=P,ui=jL;function st(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ME=new Set,Oh={};function Gu(e,t){Vd(e,t),Vd(e+"Capture",t)}function Vd(e,t){for(Oh[e]=t,e=0;e<t.length;e++)ME.add(t[e])}var Il=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oy=Object.prototype.hasOwnProperty,CL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l4={},c4={};function SL(e){return Oy.call(c4,e)?!0:Oy.call(l4,e)?!1:CL.test(e)?c4[e]=!0:(l4[e]=!0,!1)}function EL(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kL(e,t,r,n){if(t===null||typeof t>"u"||EL(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ws(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var $a={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$a[e]=new ws(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$a[t]=new ws(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$a[e]=new ws(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$a[e]=new ws(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$a[e]=new ws(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$a[e]=new ws(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$a[e]=new ws(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$a[e]=new ws(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$a[e]=new ws(e,5,!1,e.toLowerCase(),null,!1,!1)});var lw=/[\-:]([a-z])/g;function cw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lw,cw);$a[t]=new ws(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lw,cw);$a[t]=new ws(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lw,cw);$a[t]=new ws(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$a[e]=new ws(e,1,!1,e.toLowerCase(),null,!1,!1)});$a.xlinkHref=new ws("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$a[e]=new ws(e,1,!1,e.toLowerCase(),null,!0,!0)});function uw(e,t,r,n){var s=$a.hasOwnProperty(t)?$a[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kL(t,r,s,n)&&(r=null),n||s===null?SL(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var zl=AL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fm=Symbol.for("react.element"),md=Symbol.for("react.portal"),pd=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),Ry=Symbol.for("react.profiler"),BE=Symbol.for("react.provider"),FE=Symbol.for("react.context"),fw=Symbol.for("react.forward_ref"),Dy=Symbol.for("react.suspense"),Ly=Symbol.for("react.suspense_list"),hw=Symbol.for("react.memo"),cc=Symbol.for("react.lazy"),UE=Symbol.for("react.offscreen"),u4=Symbol.iterator;function Vf(e){return e===null||typeof e!="object"?null:(e=u4&&e[u4]||e["@@iterator"],typeof e=="function"?e:null)}var Sn=Object.assign,e2;function dh(e){if(e2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);e2=t&&t[1]||""}return`
`+e2+e}var t2=!1;function r2(e,t){if(!e||t2)return"";t2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=c);break}}}finally{t2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?dh(e):""}function PL(e){switch(e.tag){case 5:return dh(e.type);case 16:return dh("Lazy");case 13:return dh("Suspense");case 19:return dh("SuspenseList");case 0:case 2:case 15:return e=r2(e.type,!1),e;case 11:return e=r2(e.type.render,!1),e;case 1:return e=r2(e.type,!0),e;default:return""}}function My(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pd:return"Fragment";case md:return"Portal";case Ry:return"Profiler";case dw:return"StrictMode";case Dy:return"Suspense";case Ly:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case FE:return(e.displayName||"Context")+".Consumer";case BE:return(e._context.displayName||"Context")+".Provider";case fw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hw:return t=e.displayName||null,t!==null?t:My(e.type)||"Memo";case cc:t=e._payload,e=e._init;try{return My(e(t))}catch{}}return null}function IL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return My(t);case 8:return t===dw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TL(e){var t=zE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function hm(e){e._valueTracker||(e._valueTracker=TL(e))}function $E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=zE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Pp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function By(e,t){var r=t.checked;return Sn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function d4(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Oc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function WE(e,t){t=t.checked,t!=null&&uw(e,"checked",t,!1)}function Fy(e,t){WE(e,t);var r=Oc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uy(e,t.type,r):t.hasOwnProperty("defaultValue")&&Uy(e,t.type,Oc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function f4(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Uy(e,t,r){(t!=="number"||Pp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var fh=Array.isArray;function Td(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Oc(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function zy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(st(91));return Sn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function h4(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(st(92));if(fh(r)){if(1<r.length)throw Error(st(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Oc(r)}}function qE(e,t){var r=Oc(t.value),n=Oc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function m4(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function HE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $y(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?HE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mm,VE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mm=mm||document.createElement("div"),mm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_L=["Webkit","ms","Moz","O"];Object.keys(yh).forEach(function(e){_L.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yh[t]=yh[e]})});function GE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||yh.hasOwnProperty(e)&&yh[e]?(""+t).trim():t+"px"}function KE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=GE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var OL=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wy(e,t){if(t){if(OL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(st(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(st(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(st(61))}if(t.style!=null&&typeof t.style!="object")throw Error(st(62))}}function qy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=null;function mw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vy=null,_d=null,Od=null;function p4(e){if(e=b0(e)){if(typeof Vy!="function")throw Error(st(280));var t=e.stateNode;t&&(t=l1(t),Vy(e.stateNode,e.type,t))}}function XE(e){_d?Od?Od.push(e):Od=[e]:_d=e}function YE(){if(_d){var e=_d,t=Od;if(Od=_d=null,p4(e),t)for(e=0;e<t.length;e++)p4(t[e])}}function ZE(e,t){return e(t)}function JE(){}var n2=!1;function QE(e,t,r){if(n2)return e(t,r);n2=!0;try{return ZE(e,t,r)}finally{n2=!1,(_d!==null||Od!==null)&&(JE(),YE())}}function Dh(e,t){var r=e.stateNode;if(r===null)return null;var n=l1(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(st(231,t,typeof r));return r}var Gy=!1;if(Il)try{var Gf={};Object.defineProperty(Gf,"passive",{get:function(){Gy=!0}}),window.addEventListener("test",Gf,Gf),window.removeEventListener("test",Gf,Gf)}catch{Gy=!1}function RL(e,t,r,n,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var vh=!1,Ip=null,Tp=!1,Ky=null,DL={onError:function(e){vh=!0,Ip=e}};function LL(e,t,r,n,s,i,o,c,u){vh=!1,Ip=null,RL.apply(DL,arguments)}function ML(e,t,r,n,s,i,o,c,u){if(LL.apply(this,arguments),vh){if(vh){var d=Ip;vh=!1,Ip=null}else throw Error(st(198));Tp||(Tp=!0,Ky=d)}}function Ku(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function e8(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g4(e){if(Ku(e)!==e)throw Error(st(188))}function BL(e){var t=e.alternate;if(!t){if(t=Ku(e),t===null)throw Error(st(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return g4(s),e;if(i===n)return g4(s),t;i=i.sibling}throw Error(st(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,c=s.child;c;){if(c===r){o=!0,r=s,n=i;break}if(c===n){o=!0,n=s,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=s;break}if(c===n){o=!0,n=i,r=s;break}c=c.sibling}if(!o)throw Error(st(189))}}if(r.alternate!==n)throw Error(st(190))}if(r.tag!==3)throw Error(st(188));return r.stateNode.current===r?e:t}function t8(e){return e=BL(e),e!==null?r8(e):null}function r8(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=r8(e);if(t!==null)return t;e=e.sibling}return null}var n8=ui.unstable_scheduleCallback,x4=ui.unstable_cancelCallback,FL=ui.unstable_shouldYield,UL=ui.unstable_requestPaint,zn=ui.unstable_now,zL=ui.unstable_getCurrentPriorityLevel,pw=ui.unstable_ImmediatePriority,a8=ui.unstable_UserBlockingPriority,_p=ui.unstable_NormalPriority,$L=ui.unstable_LowPriority,s8=ui.unstable_IdlePriority,a1=null,Ro=null;function WL(e){if(Ro&&typeof Ro.onCommitFiberRoot=="function")try{Ro.onCommitFiberRoot(a1,e,void 0,(e.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:VL,qL=Math.log,HL=Math.LN2;function VL(e){return e>>>=0,e===0?32:31-(qL(e)/HL|0)|0}var pm=64,gm=4194304;function hh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Op(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~s;c!==0?n=hh(c):(i&=o,i!==0&&(n=hh(i)))}else o=r&~s,o!==0?n=hh(o):i!==0&&(n=hh(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-co(t),s=1<<r,n|=e[r],t&=~s;return n}function GL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KL(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-co(i),c=1<<o,u=s[o];u===-1?(!(c&r)||c&n)&&(s[o]=GL(c,t)):u<=t&&(e.expiredLanes|=c),i&=~c}}function Xy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function i8(){var e=pm;return pm<<=1,!(pm&4194240)&&(pm=64),e}function a2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function y0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-co(t),e[t]=r}function XL(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-co(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function gw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-co(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Fr=0;function o8(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var l8,xw,c8,u8,d8,Yy=!1,xm=[],wc=null,Nc=null,jc=null,Lh=new Map,Mh=new Map,hc=[],YL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y4(e,t){switch(e){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":Nc=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":Lh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Kf(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=b0(t),t!==null&&xw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function ZL(e,t,r,n,s){switch(t){case"focusin":return wc=Kf(wc,e,t,r,n,s),!0;case"dragenter":return Nc=Kf(Nc,e,t,r,n,s),!0;case"mouseover":return jc=Kf(jc,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Lh.set(i,Kf(Lh.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Mh.set(i,Kf(Mh.get(i)||null,e,t,r,n,s)),!0}return!1}function f8(e){var t=cu(e.target);if(t!==null){var r=Ku(t);if(r!==null){if(t=r.tag,t===13){if(t=e8(r),t!==null){e.blockedOn=t,d8(e.priority,function(){c8(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Hy=n,r.target.dispatchEvent(n),Hy=null}else return t=b0(r),t!==null&&xw(t),e.blockedOn=r,!1;t.shift()}return!0}function v4(e,t,r){sp(e)&&r.delete(t)}function JL(){Yy=!1,wc!==null&&sp(wc)&&(wc=null),Nc!==null&&sp(Nc)&&(Nc=null),jc!==null&&sp(jc)&&(jc=null),Lh.forEach(v4),Mh.forEach(v4)}function Xf(e,t){e.blockedOn===t&&(e.blockedOn=null,Yy||(Yy=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,JL)))}function Bh(e){function t(s){return Xf(s,e)}if(0<xm.length){Xf(xm[0],e);for(var r=1;r<xm.length;r++){var n=xm[r];n.blockedOn===e&&(n.blockedOn=null)}}for(wc!==null&&Xf(wc,e),Nc!==null&&Xf(Nc,e),jc!==null&&Xf(jc,e),Lh.forEach(t),Mh.forEach(t),r=0;r<hc.length;r++)n=hc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<hc.length&&(r=hc[0],r.blockedOn===null);)f8(r),r.blockedOn===null&&hc.shift()}var Rd=zl.ReactCurrentBatchConfig,Rp=!0;function QL(e,t,r,n){var s=Fr,i=Rd.transition;Rd.transition=null;try{Fr=1,yw(e,t,r,n)}finally{Fr=s,Rd.transition=i}}function e9(e,t,r,n){var s=Fr,i=Rd.transition;Rd.transition=null;try{Fr=4,yw(e,t,r,n)}finally{Fr=s,Rd.transition=i}}function yw(e,t,r,n){if(Rp){var s=Zy(e,t,r,n);if(s===null)m2(e,t,n,Dp,r),y4(e,n);else if(ZL(s,e,t,r,n))n.stopPropagation();else if(y4(e,n),t&4&&-1<YL.indexOf(e)){for(;s!==null;){var i=b0(s);if(i!==null&&l8(i),i=Zy(e,t,r,n),i===null&&m2(e,t,n,Dp,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else m2(e,t,n,null,r)}}var Dp=null;function Zy(e,t,r,n){if(Dp=null,e=mw(n),e=cu(e),e!==null)if(t=Ku(e),t===null)e=null;else if(r=t.tag,r===13){if(e=e8(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dp=e,null}function h8(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zL()){case pw:return 1;case a8:return 4;case _p:case $L:return 16;case s8:return 536870912;default:return 16}default:return 16}}var gc=null,vw=null,ip=null;function m8(){if(ip)return ip;var e,t=vw,r=t.length,n,s="value"in gc?gc.value:gc.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return ip=s.slice(e,1<n?1-n:void 0)}function op(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ym(){return!0}function b4(){return!1}function hi(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ym:b4,this.isPropagationStopped=b4,this}return Sn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ym)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ym)},persist:function(){},isPersistent:ym}),t}var yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bw=hi(yf),v0=Sn({},yf,{view:0,detail:0}),t9=hi(v0),s2,i2,Yf,s1=Sn({},v0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ww,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yf&&(Yf&&e.type==="mousemove"?(s2=e.screenX-Yf.screenX,i2=e.screenY-Yf.screenY):i2=s2=0,Yf=e),s2)},movementY:function(e){return"movementY"in e?e.movementY:i2}}),w4=hi(s1),r9=Sn({},s1,{dataTransfer:0}),n9=hi(r9),a9=Sn({},v0,{relatedTarget:0}),o2=hi(a9),s9=Sn({},yf,{animationName:0,elapsedTime:0,pseudoElement:0}),i9=hi(s9),o9=Sn({},yf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),l9=hi(o9),c9=Sn({},yf,{data:0}),N4=hi(c9),u9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=f9[e])?!!t[e]:!1}function ww(){return h9}var m9=Sn({},v0,{key:function(e){if(e.key){var t=u9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=op(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?d9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ww,charCode:function(e){return e.type==="keypress"?op(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?op(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p9=hi(m9),g9=Sn({},s1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j4=hi(g9),x9=Sn({},v0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ww}),y9=hi(x9),v9=Sn({},yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),b9=hi(v9),w9=Sn({},s1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),N9=hi(w9),j9=[9,13,27,32],Nw=Il&&"CompositionEvent"in window,bh=null;Il&&"documentMode"in document&&(bh=document.documentMode);var A9=Il&&"TextEvent"in window&&!bh,p8=Il&&(!Nw||bh&&8<bh&&11>=bh),A4=" ",C4=!1;function g8(e,t){switch(e){case"keyup":return j9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gd=!1;function C9(e,t){switch(e){case"compositionend":return x8(t);case"keypress":return t.which!==32?null:(C4=!0,A4);case"textInput":return e=t.data,e===A4&&C4?null:e;default:return null}}function S9(e,t){if(gd)return e==="compositionend"||!Nw&&g8(e,t)?(e=m8(),ip=vw=gc=null,gd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return p8&&t.locale!=="ko"?null:t.data;default:return null}}var E9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E9[e.type]:t==="textarea"}function y8(e,t,r,n){XE(n),t=Lp(t,"onChange"),0<t.length&&(r=new bw("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var wh=null,Fh=null;function k9(e){P8(e,0)}function i1(e){var t=vd(e);if($E(t))return e}function P9(e,t){if(e==="change")return t}var v8=!1;if(Il){var l2;if(Il){var c2="oninput"in document;if(!c2){var E4=document.createElement("div");E4.setAttribute("oninput","return;"),c2=typeof E4.oninput=="function"}l2=c2}else l2=!1;v8=l2&&(!document.documentMode||9<document.documentMode)}function k4(){wh&&(wh.detachEvent("onpropertychange",b8),Fh=wh=null)}function b8(e){if(e.propertyName==="value"&&i1(Fh)){var t=[];y8(t,Fh,e,mw(e)),QE(k9,t)}}function I9(e,t,r){e==="focusin"?(k4(),wh=t,Fh=r,wh.attachEvent("onpropertychange",b8)):e==="focusout"&&k4()}function T9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return i1(Fh)}function _9(e,t){if(e==="click")return i1(t)}function O9(e,t){if(e==="input"||e==="change")return i1(t)}function R9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fo=typeof Object.is=="function"?Object.is:R9;function Uh(e,t){if(fo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Oy.call(t,s)||!fo(e[s],t[s]))return!1}return!0}function P4(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function I4(e,t){var r=P4(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=P4(r)}}function w8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function N8(){for(var e=window,t=Pp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Pp(e.document)}return t}function jw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D9(e){var t=N8(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&w8(r.ownerDocument.documentElement,r)){if(n!==null&&jw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=I4(r,i);var o=I4(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var L9=Il&&"documentMode"in document&&11>=document.documentMode,xd=null,Jy=null,Nh=null,Qy=!1;function T4(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qy||xd==null||xd!==Pp(n)||(n=xd,"selectionStart"in n&&jw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Nh&&Uh(Nh,n)||(Nh=n,n=Lp(Jy,"onSelect"),0<n.length&&(t=new bw("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xd)))}function vm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yd={animationend:vm("Animation","AnimationEnd"),animationiteration:vm("Animation","AnimationIteration"),animationstart:vm("Animation","AnimationStart"),transitionend:vm("Transition","TransitionEnd")},u2={},j8={};Il&&(j8=document.createElement("div").style,"AnimationEvent"in window||(delete yd.animationend.animation,delete yd.animationiteration.animation,delete yd.animationstart.animation),"TransitionEvent"in window||delete yd.transitionend.transition);function o1(e){if(u2[e])return u2[e];if(!yd[e])return e;var t=yd[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in j8)return u2[e]=t[r];return e}var A8=o1("animationend"),C8=o1("animationiteration"),S8=o1("animationstart"),E8=o1("transitionend"),k8=new Map,_4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bc(e,t){k8.set(e,t),Gu(t,[e])}for(var d2=0;d2<_4.length;d2++){var f2=_4[d2],M9=f2.toLowerCase(),B9=f2[0].toUpperCase()+f2.slice(1);Bc(M9,"on"+B9)}Bc(A8,"onAnimationEnd");Bc(C8,"onAnimationIteration");Bc(S8,"onAnimationStart");Bc("dblclick","onDoubleClick");Bc("focusin","onFocus");Bc("focusout","onBlur");Bc(E8,"onTransitionEnd");Vd("onMouseEnter",["mouseout","mouseover"]);Vd("onMouseLeave",["mouseout","mouseover"]);Vd("onPointerEnter",["pointerout","pointerover"]);Vd("onPointerLeave",["pointerout","pointerover"]);Gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F9=new Set("cancel close invalid load scroll toggle".split(" ").concat(mh));function O4(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ML(n,t,void 0,e),e.currentTarget=null}function P8(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;O4(s,c,d),i=u}else for(o=0;o<n.length;o++){if(c=n[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;O4(s,c,d),i=u}}}if(Tp)throw e=Ky,Tp=!1,Ky=null,e}function sn(e,t){var r=t[av];r===void 0&&(r=t[av]=new Set);var n=e+"__bubble";r.has(n)||(I8(t,e,2,!1),r.add(n))}function h2(e,t,r){var n=0;t&&(n|=4),I8(r,e,n,t)}var bm="_reactListening"+Math.random().toString(36).slice(2);function zh(e){if(!e[bm]){e[bm]=!0,ME.forEach(function(r){r!=="selectionchange"&&(F9.has(r)||h2(r,!1,e),h2(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bm]||(t[bm]=!0,h2("selectionchange",!1,t))}}function I8(e,t,r,n){switch(h8(t)){case 1:var s=QL;break;case 4:s=e9;break;default:s=yw}r=s.bind(null,t,r,e),s=void 0,!Gy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function m2(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=cu(c),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}c=c.parentNode}}n=n.return}QE(function(){var d=i,h=mw(r),p=[];e:{var v=k8.get(e);if(v!==void 0){var x=bw,w=e;switch(e){case"keypress":if(op(r)===0)break e;case"keydown":case"keyup":x=p9;break;case"focusin":w="focus",x=o2;break;case"focusout":w="blur",x=o2;break;case"beforeblur":case"afterblur":x=o2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=w4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=n9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=y9;break;case A8:case C8:case S8:x=i9;break;case E8:x=b9;break;case"scroll":x=t9;break;case"wheel":x=N9;break;case"copy":case"cut":case"paste":x=l9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=j4}var j=(t&4)!==0,N=!j&&e==="scroll",A=j?v!==null?v+"Capture":null:v;j=[];for(var k=d,E;k!==null;){E=k;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,A!==null&&(_=Dh(k,A),_!=null&&j.push($h(k,_,E)))),N)break;k=k.return}0<j.length&&(v=new x(v,w,null,r,h),p.push({event:v,listeners:j}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",v&&r!==Hy&&(w=r.relatedTarget||r.fromElement)&&(cu(w)||w[Tl]))break e;if((x||v)&&(v=h.window===h?h:(v=h.ownerDocument)?v.defaultView||v.parentWindow:window,x?(w=r.relatedTarget||r.toElement,x=d,w=w?cu(w):null,w!==null&&(N=Ku(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(j=w4,_="onMouseLeave",A="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(j=j4,_="onPointerLeave",A="onPointerEnter",k="pointer"),N=x==null?v:vd(x),E=w==null?v:vd(w),v=new j(_,k+"leave",x,r,h),v.target=N,v.relatedTarget=E,_=null,cu(h)===d&&(j=new j(A,k+"enter",w,r,h),j.target=E,j.relatedTarget=N,_=j),N=_,x&&w)t:{for(j=x,A=w,k=0,E=j;E;E=id(E))k++;for(E=0,_=A;_;_=id(_))E++;for(;0<k-E;)j=id(j),k--;for(;0<E-k;)A=id(A),E--;for(;k--;){if(j===A||A!==null&&j===A.alternate)break t;j=id(j),A=id(A)}j=null}else j=null;x!==null&&R4(p,v,x,j,!1),w!==null&&N!==null&&R4(p,N,w,j,!0)}}e:{if(v=d?vd(d):window,x=v.nodeName&&v.nodeName.toLowerCase(),x==="select"||x==="input"&&v.type==="file")var O=P9;else if(S4(v))if(v8)O=O9;else{O=T9;var B=I9}else(x=v.nodeName)&&x.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=_9);if(O&&(O=O(e,d))){y8(p,O,r,h);break e}B&&B(e,v,d),e==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&Uy(v,"number",v.value)}switch(B=d?vd(d):window,e){case"focusin":(S4(B)||B.contentEditable==="true")&&(xd=B,Jy=d,Nh=null);break;case"focusout":Nh=Jy=xd=null;break;case"mousedown":Qy=!0;break;case"contextmenu":case"mouseup":case"dragend":Qy=!1,T4(p,r,h);break;case"selectionchange":if(L9)break;case"keydown":case"keyup":T4(p,r,h)}var F;if(Nw)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else gd?g8(e,r)&&(U="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(p8&&r.locale!=="ko"&&(gd||U!=="onCompositionStart"?U==="onCompositionEnd"&&gd&&(F=m8()):(gc=h,vw="value"in gc?gc.value:gc.textContent,gd=!0)),B=Lp(d,U),0<B.length&&(U=new N4(U,e,null,r,h),p.push({event:U,listeners:B}),F?U.data=F:(F=x8(r),F!==null&&(U.data=F)))),(F=A9?C9(e,r):S9(e,r))&&(d=Lp(d,"onBeforeInput"),0<d.length&&(h=new N4("onBeforeInput","beforeinput",null,r,h),p.push({event:h,listeners:d}),h.data=F))}P8(p,t)})}function $h(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Lp(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Dh(e,r),i!=null&&n.unshift($h(e,i,s)),i=Dh(e,t),i!=null&&n.push($h(e,i,s))),e=e.return}return n}function id(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function R4(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var c=r,u=c.alternate,d=c.stateNode;if(u!==null&&u===n)break;c.tag===5&&d!==null&&(c=d,s?(u=Dh(r,i),u!=null&&o.unshift($h(r,u,c))):s||(u=Dh(r,i),u!=null&&o.push($h(r,u,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var U9=/\r\n?/g,z9=/\u0000|\uFFFD/g;function D4(e){return(typeof e=="string"?e:""+e).replace(U9,`
`).replace(z9,"")}function wm(e,t,r){if(t=D4(t),D4(e)!==t&&r)throw Error(st(425))}function Mp(){}var ev=null,tv=null;function rv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nv=typeof setTimeout=="function"?setTimeout:void 0,$9=typeof clearTimeout=="function"?clearTimeout:void 0,L4=typeof Promise=="function"?Promise:void 0,W9=typeof queueMicrotask=="function"?queueMicrotask:typeof L4<"u"?function(e){return L4.resolve(null).then(e).catch(q9)}:nv;function q9(e){setTimeout(function(){throw e})}function p2(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Bh(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Bh(t)}function Ac(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function M4(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vf=Math.random().toString(36).slice(2),To="__reactFiber$"+vf,Wh="__reactProps$"+vf,Tl="__reactContainer$"+vf,av="__reactEvents$"+vf,H9="__reactListeners$"+vf,V9="__reactHandles$"+vf;function cu(e){var t=e[To];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Tl]||r[To]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=M4(e);e!==null;){if(r=e[To])return r;e=M4(e)}return t}e=r,r=e.parentNode}return null}function b0(e){return e=e[To]||e[Tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(st(33))}function l1(e){return e[Wh]||null}var sv=[],bd=-1;function Fc(e){return{current:e}}function un(e){0>bd||(e.current=sv[bd],sv[bd]=null,bd--)}function tn(e,t){bd++,sv[bd]=e.current,e.current=t}var Rc={},is=Fc(Rc),Rs=Fc(!1),Su=Rc;function Gd(e,t){var r=e.type.contextTypes;if(!r)return Rc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ds(e){return e=e.childContextTypes,e!=null}function Bp(){un(Rs),un(is)}function B4(e,t,r){if(is.current!==Rc)throw Error(st(168));tn(is,t),tn(Rs,r)}function T8(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(st(108,IL(e)||"Unknown",s));return Sn({},r,n)}function Fp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rc,Su=is.current,tn(is,e),tn(Rs,Rs.current),!0}function F4(e,t,r){var n=e.stateNode;if(!n)throw Error(st(169));r?(e=T8(e,t,Su),n.__reactInternalMemoizedMergedChildContext=e,un(Rs),un(is),tn(is,e)):un(Rs),tn(Rs,r)}var yl=null,c1=!1,g2=!1;function _8(e){yl===null?yl=[e]:yl.push(e)}function G9(e){c1=!0,_8(e)}function Uc(){if(!g2&&yl!==null){g2=!0;var e=0,t=Fr;try{var r=yl;for(Fr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}yl=null,c1=!1}catch(s){throw yl!==null&&(yl=yl.slice(e+1)),n8(pw,Uc),s}finally{Fr=t,g2=!1}}return null}var wd=[],Nd=0,Up=null,zp=0,Ii=[],Ti=0,Eu=null,Nl=1,jl="";function ru(e,t){wd[Nd++]=zp,wd[Nd++]=Up,Up=e,zp=t}function O8(e,t,r){Ii[Ti++]=Nl,Ii[Ti++]=jl,Ii[Ti++]=Eu,Eu=e;var n=Nl;e=jl;var s=32-co(n)-1;n&=~(1<<s),r+=1;var i=32-co(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Nl=1<<32-co(t)+s|r<<s|n,jl=i+e}else Nl=1<<i|r<<s|n,jl=e}function Aw(e){e.return!==null&&(ru(e,1),O8(e,1,0))}function Cw(e){for(;e===Up;)Up=wd[--Nd],wd[Nd]=null,zp=wd[--Nd],wd[Nd]=null;for(;e===Eu;)Eu=Ii[--Ti],Ii[Ti]=null,jl=Ii[--Ti],Ii[Ti]=null,Nl=Ii[--Ti],Ii[Ti]=null}var oi=null,si=null,gn=!1,io=null;function R8(e,t){var r=Oi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function U4(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,oi=e,si=Ac(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,oi=e,si=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Eu!==null?{id:Nl,overflow:jl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Oi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,oi=e,si=null,!0):!1;default:return!1}}function iv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ov(e){if(gn){var t=si;if(t){var r=t;if(!U4(e,t)){if(iv(e))throw Error(st(418));t=Ac(r.nextSibling);var n=oi;t&&U4(e,t)?R8(n,r):(e.flags=e.flags&-4097|2,gn=!1,oi=e)}}else{if(iv(e))throw Error(st(418));e.flags=e.flags&-4097|2,gn=!1,oi=e}}}function z4(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;oi=e}function Nm(e){if(e!==oi)return!1;if(!gn)return z4(e),gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rv(e.type,e.memoizedProps)),t&&(t=si)){if(iv(e))throw D8(),Error(st(418));for(;t;)R8(e,t),t=Ac(t.nextSibling)}if(z4(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(st(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){si=Ac(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}si=null}}else si=oi?Ac(e.stateNode.nextSibling):null;return!0}function D8(){for(var e=si;e;)e=Ac(e.nextSibling)}function Kd(){si=oi=null,gn=!1}function Sw(e){io===null?io=[e]:io.push(e)}var K9=zl.ReactCurrentBatchConfig;function Zf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(st(309));var n=r.stateNode}if(!n)throw Error(st(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(st(284));if(!r._owner)throw Error(st(290,e))}return e}function jm(e,t){throw e=Object.prototype.toString.call(t),Error(st(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $4(e){var t=e._init;return t(e._payload)}function L8(e){function t(A,k){if(e){var E=A.deletions;E===null?(A.deletions=[k],A.flags|=16):E.push(k)}}function r(A,k){if(!e)return null;for(;k!==null;)t(A,k),k=k.sibling;return null}function n(A,k){for(A=new Map;k!==null;)k.key!==null?A.set(k.key,k):A.set(k.index,k),k=k.sibling;return A}function s(A,k){return A=kc(A,k),A.index=0,A.sibling=null,A}function i(A,k,E){return A.index=E,e?(E=A.alternate,E!==null?(E=E.index,E<k?(A.flags|=2,k):E):(A.flags|=2,k)):(A.flags|=1048576,k)}function o(A){return e&&A.alternate===null&&(A.flags|=2),A}function c(A,k,E,_){return k===null||k.tag!==6?(k=j2(E,A.mode,_),k.return=A,k):(k=s(k,E),k.return=A,k)}function u(A,k,E,_){var O=E.type;return O===pd?h(A,k,E.props.children,_,E.key):k!==null&&(k.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===cc&&$4(O)===k.type)?(_=s(k,E.props),_.ref=Zf(A,k,E),_.return=A,_):(_=mp(E.type,E.key,E.props,null,A.mode,_),_.ref=Zf(A,k,E),_.return=A,_)}function d(A,k,E,_){return k===null||k.tag!==4||k.stateNode.containerInfo!==E.containerInfo||k.stateNode.implementation!==E.implementation?(k=A2(E,A.mode,_),k.return=A,k):(k=s(k,E.children||[]),k.return=A,k)}function h(A,k,E,_,O){return k===null||k.tag!==7?(k=xu(E,A.mode,_,O),k.return=A,k):(k=s(k,E),k.return=A,k)}function p(A,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return k=j2(""+k,A.mode,E),k.return=A,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case fm:return E=mp(k.type,k.key,k.props,null,A.mode,E),E.ref=Zf(A,null,k),E.return=A,E;case md:return k=A2(k,A.mode,E),k.return=A,k;case cc:var _=k._init;return p(A,_(k._payload),E)}if(fh(k)||Vf(k))return k=xu(k,A.mode,E,null),k.return=A,k;jm(A,k)}return null}function v(A,k,E,_){var O=k!==null?k.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:c(A,k,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case fm:return E.key===O?u(A,k,E,_):null;case md:return E.key===O?d(A,k,E,_):null;case cc:return O=E._init,v(A,k,O(E._payload),_)}if(fh(E)||Vf(E))return O!==null?null:h(A,k,E,_,null);jm(A,E)}return null}function x(A,k,E,_,O){if(typeof _=="string"&&_!==""||typeof _=="number")return A=A.get(E)||null,c(k,A,""+_,O);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fm:return A=A.get(_.key===null?E:_.key)||null,u(k,A,_,O);case md:return A=A.get(_.key===null?E:_.key)||null,d(k,A,_,O);case cc:var B=_._init;return x(A,k,E,B(_._payload),O)}if(fh(_)||Vf(_))return A=A.get(E)||null,h(k,A,_,O,null);jm(k,_)}return null}function w(A,k,E,_){for(var O=null,B=null,F=k,U=k=0,L=null;F!==null&&U<E.length;U++){F.index>U?(L=F,F=null):L=F.sibling;var K=v(A,F,E[U],_);if(K===null){F===null&&(F=L);break}e&&F&&K.alternate===null&&t(A,F),k=i(K,k,U),B===null?O=K:B.sibling=K,B=K,F=L}if(U===E.length)return r(A,F),gn&&ru(A,U),O;if(F===null){for(;U<E.length;U++)F=p(A,E[U],_),F!==null&&(k=i(F,k,U),B===null?O=F:B.sibling=F,B=F);return gn&&ru(A,U),O}for(F=n(A,F);U<E.length;U++)L=x(F,A,U,E[U],_),L!==null&&(e&&L.alternate!==null&&F.delete(L.key===null?U:L.key),k=i(L,k,U),B===null?O=L:B.sibling=L,B=L);return e&&F.forEach(function(z){return t(A,z)}),gn&&ru(A,U),O}function j(A,k,E,_){var O=Vf(E);if(typeof O!="function")throw Error(st(150));if(E=O.call(E),E==null)throw Error(st(151));for(var B=O=null,F=k,U=k=0,L=null,K=E.next();F!==null&&!K.done;U++,K=E.next()){F.index>U?(L=F,F=null):L=F.sibling;var z=v(A,F,K.value,_);if(z===null){F===null&&(F=L);break}e&&F&&z.alternate===null&&t(A,F),k=i(z,k,U),B===null?O=z:B.sibling=z,B=z,F=L}if(K.done)return r(A,F),gn&&ru(A,U),O;if(F===null){for(;!K.done;U++,K=E.next())K=p(A,K.value,_),K!==null&&(k=i(K,k,U),B===null?O=K:B.sibling=K,B=K);return gn&&ru(A,U),O}for(F=n(A,F);!K.done;U++,K=E.next())K=x(F,A,U,K.value,_),K!==null&&(e&&K.alternate!==null&&F.delete(K.key===null?U:K.key),k=i(K,k,U),B===null?O=K:B.sibling=K,B=K);return e&&F.forEach(function(q){return t(A,q)}),gn&&ru(A,U),O}function N(A,k,E,_){if(typeof E=="object"&&E!==null&&E.type===pd&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case fm:e:{for(var O=E.key,B=k;B!==null;){if(B.key===O){if(O=E.type,O===pd){if(B.tag===7){r(A,B.sibling),k=s(B,E.props.children),k.return=A,A=k;break e}}else if(B.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===cc&&$4(O)===B.type){r(A,B.sibling),k=s(B,E.props),k.ref=Zf(A,B,E),k.return=A,A=k;break e}r(A,B);break}else t(A,B);B=B.sibling}E.type===pd?(k=xu(E.props.children,A.mode,_,E.key),k.return=A,A=k):(_=mp(E.type,E.key,E.props,null,A.mode,_),_.ref=Zf(A,k,E),_.return=A,A=_)}return o(A);case md:e:{for(B=E.key;k!==null;){if(k.key===B)if(k.tag===4&&k.stateNode.containerInfo===E.containerInfo&&k.stateNode.implementation===E.implementation){r(A,k.sibling),k=s(k,E.children||[]),k.return=A,A=k;break e}else{r(A,k);break}else t(A,k);k=k.sibling}k=A2(E,A.mode,_),k.return=A,A=k}return o(A);case cc:return B=E._init,N(A,k,B(E._payload),_)}if(fh(E))return w(A,k,E,_);if(Vf(E))return j(A,k,E,_);jm(A,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,k!==null&&k.tag===6?(r(A,k.sibling),k=s(k,E),k.return=A,A=k):(r(A,k),k=j2(E,A.mode,_),k.return=A,A=k),o(A)):r(A,k)}return N}var Xd=L8(!0),M8=L8(!1),$p=Fc(null),Wp=null,jd=null,Ew=null;function kw(){Ew=jd=Wp=null}function Pw(e){var t=$p.current;un($p),e._currentValue=t}function lv(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dd(e,t){Wp=e,Ew=jd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ts=!0),e.firstContext=null)}function Li(e){var t=e._currentValue;if(Ew!==e)if(e={context:e,memoizedValue:t,next:null},jd===null){if(Wp===null)throw Error(st(308));jd=e,Wp.dependencies={lanes:0,firstContext:e}}else jd=jd.next=e;return t}var uu=null;function Iw(e){uu===null?uu=[e]:uu.push(e)}function B8(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Iw(t)):(r.next=s.next,s.next=r),t.interleaved=r,_l(e,n)}function _l(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var uc=!1;function Tw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function El(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Nr&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,_l(e,r)}return s=n.interleaved,s===null?(t.next=t,Iw(n)):(t.next=s.next,s.next=t),n.interleaved=t,_l(e,r)}function lp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gw(e,r)}}function W4(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qp(e,t,r,n){var s=e.updateQueue;uc=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,h=d=u=null,c=i;do{var v=c.lane,x=c.eventTime;if((n&v)===v){h!==null&&(h=h.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=e,j=c;switch(v=t,x=r,j.tag){case 1:if(w=j.payload,typeof w=="function"){p=w.call(x,p,v);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,v=typeof w=="function"?w.call(x,p,v):w,v==null)break e;p=Sn({},p,v);break e;case 2:uc=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[c]:v.push(c))}else x={eventTime:x,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=x,u=p):h=h.next=x,o|=v;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;v=c,c=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Pu|=o,e.lanes=o,e.memoizedState=p}}function q4(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(st(191,s));s.call(n)}}}var w0={},Do=Fc(w0),qh=Fc(w0),Hh=Fc(w0);function du(e){if(e===w0)throw Error(st(174));return e}function _w(e,t){switch(tn(Hh,t),tn(qh,e),tn(Do,w0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$y(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$y(t,e)}un(Do),tn(Do,t)}function Yd(){un(Do),un(qh),un(Hh)}function U8(e){du(Hh.current);var t=du(Do.current),r=$y(t,e.type);t!==r&&(tn(qh,e),tn(Do,r))}function Ow(e){qh.current===e&&(un(Do),un(qh))}var jn=Fc(0);function Hp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var x2=[];function Rw(){for(var e=0;e<x2.length;e++)x2[e]._workInProgressVersionPrimary=null;x2.length=0}var cp=zl.ReactCurrentDispatcher,y2=zl.ReactCurrentBatchConfig,ku=0,Cn=null,ua=null,Na=null,Vp=!1,jh=!1,Vh=0,X9=0;function Xa(){throw Error(st(321))}function Dw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fo(e[r],t[r]))return!1;return!0}function Lw(e,t,r,n,s,i){if(ku=i,Cn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cp.current=e===null||e.memoizedState===null?Q9:eM,e=r(n,s),jh){i=0;do{if(jh=!1,Vh=0,25<=i)throw Error(st(301));i+=1,Na=ua=null,t.updateQueue=null,cp.current=tM,e=r(n,s)}while(jh)}if(cp.current=Gp,t=ua!==null&&ua.next!==null,ku=0,Na=ua=Cn=null,Vp=!1,t)throw Error(st(300));return e}function Mw(){var e=Vh!==0;return Vh=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Na===null?Cn.memoizedState=Na=e:Na=Na.next=e,Na}function Mi(){if(ua===null){var e=Cn.alternate;e=e!==null?e.memoizedState:null}else e=ua.next;var t=Na===null?Cn.memoizedState:Na.next;if(t!==null)Na=t,ua=e;else{if(e===null)throw Error(st(310));ua=e,e={memoizedState:ua.memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},Na===null?Cn.memoizedState=Na=e:Na=Na.next=e}return Na}function Gh(e,t){return typeof t=="function"?t(e):t}function v2(e){var t=Mi(),r=t.queue;if(r===null)throw Error(st(311));r.lastRenderedReducer=e;var n=ua,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var c=o=null,u=null,d=i;do{var h=d.lane;if((ku&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=n):u=u.next=p,Cn.lanes|=h,Pu|=h}d=d.next}while(d!==null&&d!==i);u===null?o=n:u.next=c,fo(n,t.memoizedState)||(Ts=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Cn.lanes|=i,Pu|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function b2(e){var t=Mi(),r=t.queue;if(r===null)throw Error(st(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);fo(i,t.memoizedState)||(Ts=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function z8(){}function $8(e,t){var r=Cn,n=Mi(),s=t(),i=!fo(n.memoizedState,s);if(i&&(n.memoizedState=s,Ts=!0),n=n.queue,Bw(H8.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Na!==null&&Na.memoizedState.tag&1){if(r.flags|=2048,Kh(9,q8.bind(null,r,n,s,t),void 0,null),Ca===null)throw Error(st(349));ku&30||W8(r,t,s)}return s}function W8(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Cn.updateQueue,t===null?(t={lastEffect:null,stores:null},Cn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function q8(e,t,r,n){t.value=r,t.getSnapshot=n,V8(t)&&G8(e)}function H8(e,t,r){return r(function(){V8(t)&&G8(e)})}function V8(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fo(e,r)}catch{return!0}}function G8(e){var t=_l(e,1);t!==null&&uo(t,e,1,-1)}function H4(e){var t=Io();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gh,lastRenderedState:e},t.queue=e,e=e.dispatch=J9.bind(null,Cn,e),[t.memoizedState,e]}function Kh(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Cn.updateQueue,t===null?(t={lastEffect:null,stores:null},Cn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function K8(){return Mi().memoizedState}function up(e,t,r,n){var s=Io();Cn.flags|=e,s.memoizedState=Kh(1|t,r,void 0,n===void 0?null:n)}function u1(e,t,r,n){var s=Mi();n=n===void 0?null:n;var i=void 0;if(ua!==null){var o=ua.memoizedState;if(i=o.destroy,n!==null&&Dw(n,o.deps)){s.memoizedState=Kh(t,r,i,n);return}}Cn.flags|=e,s.memoizedState=Kh(1|t,r,i,n)}function V4(e,t){return up(8390656,8,e,t)}function Bw(e,t){return u1(2048,8,e,t)}function X8(e,t){return u1(4,2,e,t)}function Y8(e,t){return u1(4,4,e,t)}function Z8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function J8(e,t,r){return r=r!=null?r.concat([e]):null,u1(4,4,Z8.bind(null,t,e),r)}function Fw(){}function Q8(e,t){var r=Mi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function e7(e,t){var r=Mi();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Dw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function t7(e,t,r){return ku&21?(fo(r,t)||(r=i8(),Cn.lanes|=r,Pu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ts=!0),e.memoizedState=r)}function Y9(e,t){var r=Fr;Fr=r!==0&&4>r?r:4,e(!0);var n=y2.transition;y2.transition={};try{e(!1),t()}finally{Fr=r,y2.transition=n}}function r7(){return Mi().memoizedState}function Z9(e,t,r){var n=Ec(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},n7(e))a7(t,r);else if(r=B8(e,t,r,n),r!==null){var s=vs();uo(r,e,n,s),s7(r,t,n)}}function J9(e,t,r){var n=Ec(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(n7(e))a7(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,r);if(s.hasEagerState=!0,s.eagerState=c,fo(c,o)){var u=t.interleaved;u===null?(s.next=s,Iw(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}r=B8(e,t,s,n),r!==null&&(s=vs(),uo(r,e,n,s),s7(r,t,n))}}function n7(e){var t=e.alternate;return e===Cn||t!==null&&t===Cn}function a7(e,t){jh=Vp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function s7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gw(e,r)}}var Gp={readContext:Li,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useInsertionEffect:Xa,useLayoutEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useMutableSource:Xa,useSyncExternalStore:Xa,useId:Xa,unstable_isNewReconciler:!1},Q9={readContext:Li,useCallback:function(e,t){return Io().memoizedState=[e,t===void 0?null:t],e},useContext:Li,useEffect:V4,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,up(4194308,4,Z8.bind(null,t,e),r)},useLayoutEffect:function(e,t){return up(4194308,4,e,t)},useInsertionEffect:function(e,t){return up(4,2,e,t)},useMemo:function(e,t){var r=Io();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Io();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Z9.bind(null,Cn,e),[n.memoizedState,e]},useRef:function(e){var t=Io();return e={current:e},t.memoizedState=e},useState:H4,useDebugValue:Fw,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=H4(!1),t=e[0];return e=Y9.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Cn,s=Io();if(gn){if(r===void 0)throw Error(st(407));r=r()}else{if(r=t(),Ca===null)throw Error(st(349));ku&30||W8(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,V4(H8.bind(null,n,i,e),[e]),n.flags|=2048,Kh(9,q8.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Io(),t=Ca.identifierPrefix;if(gn){var r=jl,n=Nl;r=(n&~(1<<32-co(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Vh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=X9++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eM={readContext:Li,useCallback:Q8,useContext:Li,useEffect:Bw,useImperativeHandle:J8,useInsertionEffect:X8,useLayoutEffect:Y8,useMemo:e7,useReducer:v2,useRef:K8,useState:function(){return v2(Gh)},useDebugValue:Fw,useDeferredValue:function(e){var t=Mi();return t7(t,ua.memoizedState,e)},useTransition:function(){var e=v2(Gh)[0],t=Mi().memoizedState;return[e,t]},useMutableSource:z8,useSyncExternalStore:$8,useId:r7,unstable_isNewReconciler:!1},tM={readContext:Li,useCallback:Q8,useContext:Li,useEffect:Bw,useImperativeHandle:J8,useInsertionEffect:X8,useLayoutEffect:Y8,useMemo:e7,useReducer:b2,useRef:K8,useState:function(){return b2(Gh)},useDebugValue:Fw,useDeferredValue:function(e){var t=Mi();return ua===null?t.memoizedState=e:t7(t,ua.memoizedState,e)},useTransition:function(){var e=b2(Gh)[0],t=Mi().memoizedState;return[e,t]},useMutableSource:z8,useSyncExternalStore:$8,useId:r7,unstable_isNewReconciler:!1};function ao(e,t){if(e&&e.defaultProps){t=Sn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function cv(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Sn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var d1={isMounted:function(e){return(e=e._reactInternals)?Ku(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=vs(),s=Ec(e),i=El(n,s);i.payload=t,r!=null&&(i.callback=r),t=Cc(e,i,s),t!==null&&(uo(t,e,s,n),lp(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=vs(),s=Ec(e),i=El(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Cc(e,i,s),t!==null&&(uo(t,e,s,n),lp(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=vs(),n=Ec(e),s=El(r,n);s.tag=2,t!=null&&(s.callback=t),t=Cc(e,s,n),t!==null&&(uo(t,e,n,r),lp(t,e,n))}};function G4(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Uh(r,n)||!Uh(s,i):!0}function i7(e,t,r){var n=!1,s=Rc,i=t.contextType;return typeof i=="object"&&i!==null?i=Li(i):(s=Ds(t)?Su:is.current,n=t.contextTypes,i=(n=n!=null)?Gd(e,s):Rc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=d1,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function K4(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&d1.enqueueReplaceState(t,t.state,null)}function uv(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Tw(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Li(i):(i=Ds(t)?Su:is.current,s.context=Gd(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(cv(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&d1.enqueueReplaceState(s,s.state,null),qp(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zd(e,t){try{var r="",n=t;do r+=PL(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function w2(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function dv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var rM=typeof WeakMap=="function"?WeakMap:Map;function o7(e,t,r){r=El(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xp||(Xp=!0,wv=n),dv(e,t)},r}function l7(e,t,r){r=El(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){dv(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){dv(e,t),typeof n!="function"&&(Sc===null?Sc=new Set([this]):Sc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function X4(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new rM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=gM.bind(null,e,t,r),t.then(e,e))}function Y4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Z4(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=El(-1,1),t.tag=2,Cc(r,t,1))),r.lanes|=1),e)}var nM=zl.ReactCurrentOwner,Ts=!1;function ps(e,t,r,n){t.child=e===null?M8(t,null,r,n):Xd(t,e.child,r,n)}function J4(e,t,r,n,s){r=r.render;var i=t.ref;return Dd(t,s),n=Lw(e,t,r,n,i,s),r=Mw(),e!==null&&!Ts?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ol(e,t,s)):(gn&&r&&Aw(t),t.flags|=1,ps(e,t,n,s),t.child)}function Q4(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Gw(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,c7(e,t,i,n,s)):(e=mp(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Uh,r(o,n)&&e.ref===t.ref)return Ol(e,t,s)}return t.flags|=1,e=kc(i,n),e.ref=t.ref,e.return=t,t.child=e}function c7(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Uh(i,n)&&e.ref===t.ref)if(Ts=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ts=!0);else return t.lanes=e.lanes,Ol(e,t,s)}return fv(e,t,r,n,s)}function u7(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tn(Cd,ri),ri|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tn(Cd,ri),ri|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,tn(Cd,ri),ri|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,tn(Cd,ri),ri|=n;return ps(e,t,s,r),t.child}function d7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fv(e,t,r,n,s){var i=Ds(r)?Su:is.current;return i=Gd(t,i),Dd(t,s),r=Lw(e,t,r,n,i,s),n=Mw(),e!==null&&!Ts?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ol(e,t,s)):(gn&&n&&Aw(t),t.flags|=1,ps(e,t,r,s),t.child)}function ej(e,t,r,n,s){if(Ds(r)){var i=!0;Fp(t)}else i=!1;if(Dd(t,s),t.stateNode===null)dp(e,t),i7(t,r,n),uv(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Li(d):(d=Ds(r)?Su:is.current,d=Gd(t,d));var h=r.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||u!==d)&&K4(t,o,n,d),uc=!1;var v=t.memoizedState;o.state=v,qp(t,n,o,s),u=t.memoizedState,c!==n||v!==u||Rs.current||uc?(typeof h=="function"&&(cv(t,r,h,n),u=t.memoizedState),(c=uc||G4(t,r,c,n,v,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=d,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,F8(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:ao(t.type,c),o.props=d,p=t.pendingProps,v=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Li(u):(u=Ds(r)?Su:is.current,u=Gd(t,u));var x=r.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||v!==u)&&K4(t,o,n,u),uc=!1,v=t.memoizedState,o.state=v,qp(t,n,o,s);var w=t.memoizedState;c!==p||v!==w||Rs.current||uc?(typeof x=="function"&&(cv(t,r,x,n),w=t.memoizedState),(d=uc||G4(t,r,d,n,v,w,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),n=!1)}return hv(e,t,r,n,i,s)}function hv(e,t,r,n,s,i){d7(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&F4(t,r,!1),Ol(e,t,i);n=t.stateNode,nM.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xd(t,e.child,null,i),t.child=Xd(t,null,c,i)):ps(e,t,c,i),t.memoizedState=n.state,s&&F4(t,r,!0),t.child}function f7(e){var t=e.stateNode;t.pendingContext?B4(e,t.pendingContext,t.pendingContext!==t.context):t.context&&B4(e,t.context,!1),_w(e,t.containerInfo)}function tj(e,t,r,n,s){return Kd(),Sw(s),t.flags|=256,ps(e,t,r,n),t.child}var mv={dehydrated:null,treeContext:null,retryLane:0};function pv(e){return{baseLanes:e,cachePool:null,transitions:null}}function h7(e,t,r){var n=t.pendingProps,s=jn.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),tn(jn,s&1),e===null)return ov(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=m1(o,n,0,null),e=xu(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pv(r),t.memoizedState=mv,e):Uw(t,o));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return aM(e,t,o,n,c,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,c=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=kc(s,u),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=kc(c,i):(i=xu(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?pv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=mv,n}return i=e.child,e=i.sibling,n=kc(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Uw(e,t){return t=m1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Am(e,t,r,n){return n!==null&&Sw(n),Xd(t,e.child,null,r),e=Uw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aM(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=w2(Error(st(422))),Am(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=m1({mode:"visible",children:n.children},s,0,null),i=xu(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xd(t,e.child,null,o),t.child.memoizedState=pv(o),t.memoizedState=mv,i);if(!(t.mode&1))return Am(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(st(419)),n=w2(i,n,void 0),Am(e,t,o,n)}if(c=(o&e.childLanes)!==0,Ts||c){if(n=Ca,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_l(e,s),uo(n,e,s,-1))}return Vw(),n=w2(Error(st(421))),Am(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xM.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,si=Ac(s.nextSibling),oi=t,gn=!0,io=null,e!==null&&(Ii[Ti++]=Nl,Ii[Ti++]=jl,Ii[Ti++]=Eu,Nl=e.id,jl=e.overflow,Eu=t),t=Uw(t,n.children),t.flags|=4096,t)}function rj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),lv(e.return,t,r)}function N2(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function m7(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(ps(e,t,n.children,r),n=jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rj(e,r,t);else if(e.tag===19)rj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(tn(jn,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Hp(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),N2(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Hp(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}N2(t,!0,r,null,i);break;case"together":N2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ol(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Pu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(st(153));if(t.child!==null){for(e=t.child,r=kc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=kc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sM(e,t,r){switch(t.tag){case 3:f7(t),Kd();break;case 5:U8(t);break;case 1:Ds(t.type)&&Fp(t);break;case 4:_w(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;tn($p,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(tn(jn,jn.current&1),t.flags|=128,null):r&t.child.childLanes?h7(e,t,r):(tn(jn,jn.current&1),e=Ol(e,t,r),e!==null?e.sibling:null);tn(jn,jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return m7(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tn(jn,jn.current),n)break;return null;case 22:case 23:return t.lanes=0,u7(e,t,r)}return Ol(e,t,r)}var p7,gv,g7,x7;p7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gv=function(){};g7=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,du(Do.current);var i=null;switch(r){case"input":s=By(e,s),n=By(e,n),i=[];break;case"select":s=Sn({},s,{value:void 0}),n=Sn({},n,{value:void 0}),i=[];break;case"textarea":s=zy(e,s),n=zy(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Mp)}Wy(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Oh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var u=n[d];if(c=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Oh.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&sn("scroll",e),i||c===u||(i=[])):(i=i||[]).push(d,u))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};x7=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jf(e,t){if(!gn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ya(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function iM(e,t,r){var n=t.pendingProps;switch(Cw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:return Ds(t.type)&&Bp(),Ya(t),null;case 3:return n=t.stateNode,Yd(),un(Rs),un(is),Rw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Nm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,io!==null&&(Av(io),io=null))),gv(e,t),Ya(t),null;case 5:Ow(t);var s=du(Hh.current);if(r=t.type,e!==null&&t.stateNode!=null)g7(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(st(166));return Ya(t),null}if(e=du(Do.current),Nm(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[To]=t,n[Wh]=i,e=(t.mode&1)!==0,r){case"dialog":sn("cancel",n),sn("close",n);break;case"iframe":case"object":case"embed":sn("load",n);break;case"video":case"audio":for(s=0;s<mh.length;s++)sn(mh[s],n);break;case"source":sn("error",n);break;case"img":case"image":case"link":sn("error",n),sn("load",n);break;case"details":sn("toggle",n);break;case"input":d4(n,i),sn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},sn("invalid",n);break;case"textarea":h4(n,i),sn("invalid",n)}Wy(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&wm(n.textContent,c,e),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&wm(n.textContent,c,e),s=["children",""+c]):Oh.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&sn("scroll",n)}switch(r){case"input":hm(n),f4(n,i,!0);break;case"textarea":hm(n),m4(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Mp)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=HE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[To]=t,e[Wh]=n,p7(e,t,!1,!1),t.stateNode=e;e:{switch(o=qy(r,n),r){case"dialog":sn("cancel",e),sn("close",e),s=n;break;case"iframe":case"object":case"embed":sn("load",e),s=n;break;case"video":case"audio":for(s=0;s<mh.length;s++)sn(mh[s],e);s=n;break;case"source":sn("error",e),s=n;break;case"img":case"image":case"link":sn("error",e),sn("load",e),s=n;break;case"details":sn("toggle",e),s=n;break;case"input":d4(e,n),s=By(e,n),sn("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Sn({},n,{value:void 0}),sn("invalid",e);break;case"textarea":h4(e,n),s=zy(e,n),sn("invalid",e);break;default:s=n}Wy(r,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?KE(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&VE(e,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Rh(e,u):typeof u=="number"&&Rh(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Oh.hasOwnProperty(i)?u!=null&&i==="onScroll"&&sn("scroll",e):u!=null&&uw(e,i,u,o))}switch(r){case"input":hm(e),f4(e,n,!1);break;case"textarea":hm(e),m4(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Oc(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Td(e,!!n.multiple,i,!1):n.defaultValue!=null&&Td(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Mp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&t.stateNode!=null)x7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(st(166));if(r=du(Hh.current),du(Do.current),Nm(t)){if(n=t.stateNode,r=t.memoizedProps,n[To]=t,(i=n.nodeValue!==r)&&(e=oi,e!==null))switch(e.tag){case 3:wm(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wm(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[To]=t,t.stateNode=n}return Ya(t),null;case 13:if(un(jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gn&&si!==null&&t.mode&1&&!(t.flags&128))D8(),Kd(),t.flags|=98560,i=!1;else if(i=Nm(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(st(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(st(317));i[To]=t}else Kd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ya(t),i=!1}else io!==null&&(Av(io),io=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?fa===0&&(fa=3):Vw())),t.updateQueue!==null&&(t.flags|=4),Ya(t),null);case 4:return Yd(),gv(e,t),e===null&&zh(t.stateNode.containerInfo),Ya(t),null;case 10:return Pw(t.type._context),Ya(t),null;case 17:return Ds(t.type)&&Bp(),Ya(t),null;case 19:if(un(jn),i=t.memoizedState,i===null)return Ya(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Jf(i,!1);else{if(fa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Hp(e),o!==null){for(t.flags|=128,Jf(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return tn(jn,jn.current&1|2),t.child}e=e.sibling}i.tail!==null&&zn()>Jd&&(t.flags|=128,n=!0,Jf(i,!1),t.lanes=4194304)}else{if(!n)if(e=Hp(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gn)return Ya(t),null}else 2*zn()-i.renderingStartTime>Jd&&r!==1073741824&&(t.flags|=128,n=!0,Jf(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=zn(),t.sibling=null,r=jn.current,tn(jn,n?r&1|2:r&1),t):(Ya(t),null);case 22:case 23:return Hw(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ri&1073741824&&(Ya(t),t.subtreeFlags&6&&(t.flags|=8192)):Ya(t),null;case 24:return null;case 25:return null}throw Error(st(156,t.tag))}function oM(e,t){switch(Cw(t),t.tag){case 1:return Ds(t.type)&&Bp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yd(),un(Rs),un(is),Rw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ow(t),null;case 13:if(un(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(st(340));Kd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return un(jn),null;case 4:return Yd(),null;case 10:return Pw(t.type._context),null;case 22:case 23:return Hw(),null;case 24:return null;default:return null}}var Cm=!1,rs=!1,lM=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Ad(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Dn(e,t,n)}else r.current=null}function xv(e,t,r){try{r()}catch(n){Dn(e,t,n)}}var nj=!1;function cM(e,t){if(ev=Rp,e=N8(),jw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,u=-1,d=0,h=0,p=e,v=null;t:for(;;){for(var x;p!==r||s!==0&&p.nodeType!==3||(c=o+s),p!==i||n!==0&&p.nodeType!==3||(u=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)v=p,p=x;for(;;){if(p===e)break t;if(v===r&&++d===s&&(c=o),v===i&&++h===n&&(u=o),(x=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=x}r=c===-1||u===-1?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(tv={focusedElem:e,selectionRange:r},Rp=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){t=yt;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var j=w.memoizedProps,N=w.memoizedState,A=t.stateNode,k=A.getSnapshotBeforeUpdate(t.elementType===t.type?j:ao(t.type,j),N);A.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(_){Dn(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return w=nj,nj=!1,w}function Ah(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&xv(t,r,i)}s=s.next}while(s!==n)}}function f1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function yv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function y7(e){var t=e.alternate;t!==null&&(e.alternate=null,y7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[To],delete t[Wh],delete t[av],delete t[H9],delete t[V9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function v7(e){return e.tag===5||e.tag===3||e.tag===4}function aj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||v7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Mp));else if(n!==4&&(e=e.child,e!==null))for(vv(e,t,r),e=e.sibling;e!==null;)vv(e,t,r),e=e.sibling}function bv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(bv(e,t,r),e=e.sibling;e!==null;)bv(e,t,r),e=e.sibling}var Ba=null,so=!1;function ic(e,t,r){for(r=r.child;r!==null;)b7(e,t,r),r=r.sibling}function b7(e,t,r){if(Ro&&typeof Ro.onCommitFiberUnmount=="function")try{Ro.onCommitFiberUnmount(a1,r)}catch{}switch(r.tag){case 5:rs||Ad(r,t);case 6:var n=Ba,s=so;Ba=null,ic(e,t,r),Ba=n,so=s,Ba!==null&&(so?(e=Ba,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ba.removeChild(r.stateNode));break;case 18:Ba!==null&&(so?(e=Ba,r=r.stateNode,e.nodeType===8?p2(e.parentNode,r):e.nodeType===1&&p2(e,r),Bh(e)):p2(Ba,r.stateNode));break;case 4:n=Ba,s=so,Ba=r.stateNode.containerInfo,so=!0,ic(e,t,r),Ba=n,so=s;break;case 0:case 11:case 14:case 15:if(!rs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xv(r,t,o),s=s.next}while(s!==n)}ic(e,t,r);break;case 1:if(!rs&&(Ad(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){Dn(r,t,c)}ic(e,t,r);break;case 21:ic(e,t,r);break;case 22:r.mode&1?(rs=(n=rs)||r.memoizedState!==null,ic(e,t,r),rs=n):ic(e,t,r);break;default:ic(e,t,r)}}function sj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new lM),t.forEach(function(n){var s=yM.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ro(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Ba=c.stateNode,so=!1;break e;case 3:Ba=c.stateNode.containerInfo,so=!0;break e;case 4:Ba=c.stateNode.containerInfo,so=!0;break e}c=c.return}if(Ba===null)throw Error(st(160));b7(i,o,s),Ba=null,so=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Dn(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)w7(t,e),t=t.sibling}function w7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ro(t,e),So(e),n&4){try{Ah(3,e,e.return),f1(3,e)}catch(j){Dn(e,e.return,j)}try{Ah(5,e,e.return)}catch(j){Dn(e,e.return,j)}}break;case 1:ro(t,e),So(e),n&512&&r!==null&&Ad(r,r.return);break;case 5:if(ro(t,e),So(e),n&512&&r!==null&&Ad(r,r.return),e.flags&32){var s=e.stateNode;try{Rh(s,"")}catch(j){Dn(e,e.return,j)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&WE(s,i),qy(c,o);var d=qy(c,i);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?KE(s,p):h==="dangerouslySetInnerHTML"?VE(s,p):h==="children"?Rh(s,p):uw(s,h,p,d)}switch(c){case"input":Fy(s,i);break;case"textarea":qE(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Td(s,!!i.multiple,x,!1):v!==!!i.multiple&&(i.defaultValue!=null?Td(s,!!i.multiple,i.defaultValue,!0):Td(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wh]=i}catch(j){Dn(e,e.return,j)}}break;case 6:if(ro(t,e),So(e),n&4){if(e.stateNode===null)throw Error(st(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(j){Dn(e,e.return,j)}}break;case 3:if(ro(t,e),So(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Bh(t.containerInfo)}catch(j){Dn(e,e.return,j)}break;case 4:ro(t,e),So(e);break;case 13:ro(t,e),So(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ww=zn())),n&4&&sj(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(rs=(d=rs)||h,ro(t,e),rs=d):ro(t,e),So(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(yt=e,h=e.child;h!==null;){for(p=yt=h;yt!==null;){switch(v=yt,x=v.child,v.tag){case 0:case 11:case 14:case 15:Ah(4,v,v.return);break;case 1:Ad(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){n=v,r=v.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(j){Dn(n,r,j)}}break;case 5:Ad(v,v.return);break;case 22:if(v.memoizedState!==null){oj(p);continue}}x!==null?(x.return=v,yt=x):oj(p)}h=h.sibling}e:for(h=null,p=e;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=GE("display",o))}catch(j){Dn(e,e.return,j)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(j){Dn(e,e.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ro(t,e),So(e),n&4&&sj(e);break;case 21:break;default:ro(t,e),So(e)}}function So(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(v7(r)){var n=r;break e}r=r.return}throw Error(st(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Rh(s,""),n.flags&=-33);var i=aj(e);bv(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,c=aj(e);vv(e,c,o);break;default:throw Error(st(161))}}catch(u){Dn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uM(e,t,r){yt=e,N7(e)}function N7(e,t,r){for(var n=(e.mode&1)!==0;yt!==null;){var s=yt,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Cm;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||rs;c=Cm;var d=rs;if(Cm=o,(rs=u)&&!d)for(yt=s;yt!==null;)o=yt,u=o.child,o.tag===22&&o.memoizedState!==null?lj(s):u!==null?(u.return=o,yt=u):lj(s);for(;i!==null;)yt=i,N7(i),i=i.sibling;yt=s,Cm=c,rs=d}ij(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,yt=i):ij(e)}}function ij(e){for(;yt!==null;){var t=yt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rs||f1(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!rs)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ao(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&q4(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}q4(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Bh(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}rs||t.flags&512&&yv(t)}catch(v){Dn(t,t.return,v)}}if(t===e){yt=null;break}if(r=t.sibling,r!==null){r.return=t.return,yt=r;break}yt=t.return}}function oj(e){for(;yt!==null;){var t=yt;if(t===e){yt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,yt=r;break}yt=t.return}}function lj(e){for(;yt!==null;){var t=yt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{f1(4,t)}catch(u){Dn(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(u){Dn(t,s,u)}}var i=t.return;try{yv(t)}catch(u){Dn(t,i,u)}break;case 5:var o=t.return;try{yv(t)}catch(u){Dn(t,o,u)}}}catch(u){Dn(t,t.return,u)}if(t===e){yt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,yt=c;break}yt=t.return}}var dM=Math.ceil,Kp=zl.ReactCurrentDispatcher,zw=zl.ReactCurrentOwner,Di=zl.ReactCurrentBatchConfig,Nr=0,Ca=null,Qn=null,za=0,ri=0,Cd=Fc(0),fa=0,Xh=null,Pu=0,h1=0,$w=0,Ch=null,Is=null,Ww=0,Jd=1/0,xl=null,Xp=!1,wv=null,Sc=null,Sm=!1,xc=null,Yp=0,Sh=0,Nv=null,fp=-1,hp=0;function vs(){return Nr&6?zn():fp!==-1?fp:fp=zn()}function Ec(e){return e.mode&1?Nr&2&&za!==0?za&-za:K9.transition!==null?(hp===0&&(hp=i8()),hp):(e=Fr,e!==0||(e=window.event,e=e===void 0?16:h8(e.type)),e):1}function uo(e,t,r,n){if(50<Sh)throw Sh=0,Nv=null,Error(st(185));y0(e,r,n),(!(Nr&2)||e!==Ca)&&(e===Ca&&(!(Nr&2)&&(h1|=r),fa===4&&mc(e,za)),Ls(e,n),r===1&&Nr===0&&!(t.mode&1)&&(Jd=zn()+500,c1&&Uc()))}function Ls(e,t){var r=e.callbackNode;KL(e,t);var n=Op(e,e===Ca?za:0);if(n===0)r!==null&&x4(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&x4(r),t===1)e.tag===0?G9(cj.bind(null,e)):_8(cj.bind(null,e)),W9(function(){!(Nr&6)&&Uc()}),r=null;else{switch(o8(n)){case 1:r=pw;break;case 4:r=a8;break;case 16:r=_p;break;case 536870912:r=s8;break;default:r=_p}r=I7(r,j7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function j7(e,t){if(fp=-1,hp=0,Nr&6)throw Error(st(327));var r=e.callbackNode;if(Ld()&&e.callbackNode!==r)return null;var n=Op(e,e===Ca?za:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zp(e,n);else{t=n;var s=Nr;Nr|=2;var i=C7();(Ca!==e||za!==t)&&(xl=null,Jd=zn()+500,gu(e,t));do try{mM();break}catch(c){A7(e,c)}while(!0);kw(),Kp.current=i,Nr=s,Qn!==null?t=0:(Ca=null,za=0,t=fa)}if(t!==0){if(t===2&&(s=Xy(e),s!==0&&(n=s,t=jv(e,s))),t===1)throw r=Xh,gu(e,0),mc(e,n),Ls(e,zn()),r;if(t===6)mc(e,n);else{if(s=e.current.alternate,!(n&30)&&!fM(s)&&(t=Zp(e,n),t===2&&(i=Xy(e),i!==0&&(n=i,t=jv(e,i))),t===1))throw r=Xh,gu(e,0),mc(e,n),Ls(e,zn()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(st(345));case 2:nu(e,Is,xl);break;case 3:if(mc(e,n),(n&130023424)===n&&(t=Ww+500-zn(),10<t)){if(Op(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){vs(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=nv(nu.bind(null,e,Is,xl),t);break}nu(e,Is,xl);break;case 4:if(mc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-co(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=zn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dM(n/1960))-n,10<n){e.timeoutHandle=nv(nu.bind(null,e,Is,xl),n);break}nu(e,Is,xl);break;case 5:nu(e,Is,xl);break;default:throw Error(st(329))}}}return Ls(e,zn()),e.callbackNode===r?j7.bind(null,e):null}function jv(e,t){var r=Ch;return e.current.memoizedState.isDehydrated&&(gu(e,t).flags|=256),e=Zp(e,t),e!==2&&(t=Is,Is=r,t!==null&&Av(t)),e}function Av(e){Is===null?Is=e:Is.push.apply(Is,e)}function fM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!fo(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mc(e,t){for(t&=~$w,t&=~h1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-co(t),n=1<<r;e[r]=-1,t&=~n}}function cj(e){if(Nr&6)throw Error(st(327));Ld();var t=Op(e,0);if(!(t&1))return Ls(e,zn()),null;var r=Zp(e,t);if(e.tag!==0&&r===2){var n=Xy(e);n!==0&&(t=n,r=jv(e,n))}if(r===1)throw r=Xh,gu(e,0),mc(e,t),Ls(e,zn()),r;if(r===6)throw Error(st(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nu(e,Is,xl),Ls(e,zn()),null}function qw(e,t){var r=Nr;Nr|=1;try{return e(t)}finally{Nr=r,Nr===0&&(Jd=zn()+500,c1&&Uc())}}function Iu(e){xc!==null&&xc.tag===0&&!(Nr&6)&&Ld();var t=Nr;Nr|=1;var r=Di.transition,n=Fr;try{if(Di.transition=null,Fr=1,e)return e()}finally{Fr=n,Di.transition=r,Nr=t,!(Nr&6)&&Uc()}}function Hw(){ri=Cd.current,un(Cd)}function gu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$9(r)),Qn!==null)for(r=Qn.return;r!==null;){var n=r;switch(Cw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bp();break;case 3:Yd(),un(Rs),un(is),Rw();break;case 5:Ow(n);break;case 4:Yd();break;case 13:un(jn);break;case 19:un(jn);break;case 10:Pw(n.type._context);break;case 22:case 23:Hw()}r=r.return}if(Ca=e,Qn=e=kc(e.current,null),za=ri=t,fa=0,Xh=null,$w=h1=Pu=0,Is=Ch=null,uu!==null){for(t=0;t<uu.length;t++)if(r=uu[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}uu=null}return e}function A7(e,t){do{var r=Qn;try{if(kw(),cp.current=Gp,Vp){for(var n=Cn.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Vp=!1}if(ku=0,Na=ua=Cn=null,jh=!1,Vh=0,zw.current=null,r===null||r.return===null){fa=1,Xh=t,Qn=null;break}e:{var i=e,o=r.return,c=r,u=t;if(t=za,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var v=h.alternate;v?(h.updateQueue=v.updateQueue,h.memoizedState=v.memoizedState,h.lanes=v.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Y4(o);if(x!==null){x.flags&=-257,Z4(x,o,c,i,t),x.mode&1&&X4(i,d,t),t=x,u=d;var w=t.updateQueue;if(w===null){var j=new Set;j.add(u),t.updateQueue=j}else w.add(u);break e}else{if(!(t&1)){X4(i,d,t),Vw();break e}u=Error(st(426))}}else if(gn&&c.mode&1){var N=Y4(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Z4(N,o,c,i,t),Sw(Zd(u,c));break e}}i=u=Zd(u,c),fa!==4&&(fa=2),Ch===null?Ch=[i]:Ch.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var A=o7(i,u,t);W4(i,A);break e;case 1:c=u;var k=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Sc===null||!Sc.has(E)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=l7(i,c,t);W4(i,_);break e}}i=i.return}while(i!==null)}E7(r)}catch(O){t=O,Qn===r&&r!==null&&(Qn=r=r.return);continue}break}while(!0)}function C7(){var e=Kp.current;return Kp.current=Gp,e===null?Gp:e}function Vw(){(fa===0||fa===3||fa===2)&&(fa=4),Ca===null||!(Pu&268435455)&&!(h1&268435455)||mc(Ca,za)}function Zp(e,t){var r=Nr;Nr|=2;var n=C7();(Ca!==e||za!==t)&&(xl=null,gu(e,t));do try{hM();break}catch(s){A7(e,s)}while(!0);if(kw(),Nr=r,Kp.current=n,Qn!==null)throw Error(st(261));return Ca=null,za=0,fa}function hM(){for(;Qn!==null;)S7(Qn)}function mM(){for(;Qn!==null&&!FL();)S7(Qn)}function S7(e){var t=P7(e.alternate,e,ri);e.memoizedProps=e.pendingProps,t===null?E7(e):Qn=t,zw.current=null}function E7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=oM(r,t),r!==null){r.flags&=32767,Qn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fa=6,Qn=null;return}}else if(r=iM(r,t,ri),r!==null){Qn=r;return}if(t=t.sibling,t!==null){Qn=t;return}Qn=t=e}while(t!==null);fa===0&&(fa=5)}function nu(e,t,r){var n=Fr,s=Di.transition;try{Di.transition=null,Fr=1,pM(e,t,r,n)}finally{Di.transition=s,Fr=n}return null}function pM(e,t,r,n){do Ld();while(xc!==null);if(Nr&6)throw Error(st(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(st(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(XL(e,i),e===Ca&&(Qn=Ca=null,za=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sm||(Sm=!0,I7(_p,function(){return Ld(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Di.transition,Di.transition=null;var o=Fr;Fr=1;var c=Nr;Nr|=4,zw.current=null,cM(e,r),w7(r,e),D9(tv),Rp=!!ev,tv=ev=null,e.current=r,uM(r),UL(),Nr=c,Fr=o,Di.transition=i}else e.current=r;if(Sm&&(Sm=!1,xc=e,Yp=s),i=e.pendingLanes,i===0&&(Sc=null),WL(r.stateNode),Ls(e,zn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Xp)throw Xp=!1,e=wv,wv=null,e;return Yp&1&&e.tag!==0&&Ld(),i=e.pendingLanes,i&1?e===Nv?Sh++:(Sh=0,Nv=e):Sh=0,Uc(),null}function Ld(){if(xc!==null){var e=o8(Yp),t=Di.transition,r=Fr;try{if(Di.transition=null,Fr=16>e?16:e,xc===null)var n=!1;else{if(e=xc,xc=null,Yp=0,Nr&6)throw Error(st(331));var s=Nr;for(Nr|=4,yt=e.current;yt!==null;){var i=yt,o=i.child;if(yt.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(yt=d;yt!==null;){var h=yt;switch(h.tag){case 0:case 11:case 15:Ah(8,h,i)}var p=h.child;if(p!==null)p.return=h,yt=p;else for(;yt!==null;){h=yt;var v=h.sibling,x=h.return;if(y7(h),h===d){yt=null;break}if(v!==null){v.return=x,yt=v;break}yt=x}}}var w=i.alternate;if(w!==null){var j=w.child;if(j!==null){w.child=null;do{var N=j.sibling;j.sibling=null,j=N}while(j!==null)}}yt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,yt=o;else e:for(;yt!==null;){if(i=yt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ah(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,yt=A;break e}yt=i.return}}var k=e.current;for(yt=k;yt!==null;){o=yt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,yt=E;else e:for(o=k;yt!==null;){if(c=yt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:f1(9,c)}}catch(O){Dn(c,c.return,O)}if(c===o){yt=null;break e}var _=c.sibling;if(_!==null){_.return=c.return,yt=_;break e}yt=c.return}}if(Nr=s,Uc(),Ro&&typeof Ro.onPostCommitFiberRoot=="function")try{Ro.onPostCommitFiberRoot(a1,e)}catch{}n=!0}return n}finally{Fr=r,Di.transition=t}}return!1}function uj(e,t,r){t=Zd(r,t),t=o7(e,t,1),e=Cc(e,t,1),t=vs(),e!==null&&(y0(e,1,t),Ls(e,t))}function Dn(e,t,r){if(e.tag===3)uj(e,e,r);else for(;t!==null;){if(t.tag===3){uj(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Sc===null||!Sc.has(n))){e=Zd(r,e),e=l7(t,e,1),t=Cc(t,e,1),e=vs(),t!==null&&(y0(t,1,e),Ls(t,e));break}}t=t.return}}function gM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=vs(),e.pingedLanes|=e.suspendedLanes&r,Ca===e&&(za&r)===r&&(fa===4||fa===3&&(za&130023424)===za&&500>zn()-Ww?gu(e,0):$w|=r),Ls(e,t)}function k7(e,t){t===0&&(e.mode&1?(t=gm,gm<<=1,!(gm&130023424)&&(gm=4194304)):t=1);var r=vs();e=_l(e,t),e!==null&&(y0(e,t,r),Ls(e,r))}function xM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),k7(e,r)}function yM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(st(314))}n!==null&&n.delete(t),k7(e,r)}var P7;P7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rs.current)Ts=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ts=!1,sM(e,t,r);Ts=!!(e.flags&131072)}else Ts=!1,gn&&t.flags&1048576&&O8(t,zp,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;dp(e,t),e=t.pendingProps;var s=Gd(t,is.current);Dd(t,r),s=Lw(null,t,n,e,s,r);var i=Mw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(n)?(i=!0,Fp(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tw(t),s.updater=d1,t.stateNode=s,s._reactInternals=t,uv(t,n,e,r),t=hv(null,t,n,!0,i,r)):(t.tag=0,gn&&i&&Aw(t),ps(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(dp(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=bM(n),e=ao(n,e),s){case 0:t=fv(null,t,n,e,r);break e;case 1:t=ej(null,t,n,e,r);break e;case 11:t=J4(null,t,n,e,r);break e;case 14:t=Q4(null,t,n,ao(n.type,e),r);break e}throw Error(st(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ao(n,s),fv(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ao(n,s),ej(e,t,n,s,r);case 3:e:{if(f7(t),e===null)throw Error(st(387));n=t.pendingProps,i=t.memoizedState,s=i.element,F8(e,t),qp(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zd(Error(st(423)),t),t=tj(e,t,n,r,s);break e}else if(n!==s){s=Zd(Error(st(424)),t),t=tj(e,t,n,r,s);break e}else for(si=Ac(t.stateNode.containerInfo.firstChild),oi=t,gn=!0,io=null,r=M8(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kd(),n===s){t=Ol(e,t,r);break e}ps(e,t,n,r)}t=t.child}return t;case 5:return U8(t),e===null&&ov(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,rv(n,s)?o=null:i!==null&&rv(n,i)&&(t.flags|=32),d7(e,t),ps(e,t,o,r),t.child;case 6:return e===null&&ov(t),null;case 13:return h7(e,t,r);case 4:return _w(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xd(t,null,n,r):ps(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ao(n,s),J4(e,t,n,s,r);case 7:return ps(e,t,t.pendingProps,r),t.child;case 8:return ps(e,t,t.pendingProps.children,r),t.child;case 12:return ps(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,tn($p,n._currentValue),n._currentValue=o,i!==null)if(fo(i.value,o)){if(i.children===s.children&&!Rs.current){t=Ol(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=El(-1,r&-r),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),lv(i.return,r,t),c.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(st(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),lv(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ps(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Dd(t,r),s=Li(s),n=n(s),t.flags|=1,ps(e,t,n,r),t.child;case 14:return n=t.type,s=ao(n,t.pendingProps),s=ao(n.type,s),Q4(e,t,n,s,r);case 15:return c7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ao(n,s),dp(e,t),t.tag=1,Ds(n)?(e=!0,Fp(t)):e=!1,Dd(t,r),i7(t,n,s),uv(t,n,s,r),hv(null,t,n,!0,e,r);case 19:return m7(e,t,r);case 22:return u7(e,t,r)}throw Error(st(156,t.tag))};function I7(e,t){return n8(e,t)}function vM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(e,t,r,n){return new vM(e,t,r,n)}function Gw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bM(e){if(typeof e=="function")return Gw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fw)return 11;if(e===hw)return 14}return 2}function kc(e,t){var r=e.alternate;return r===null?(r=Oi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mp(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Gw(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case pd:return xu(r.children,s,i,t);case dw:o=8,s|=8;break;case Ry:return e=Oi(12,r,t,s|2),e.elementType=Ry,e.lanes=i,e;case Dy:return e=Oi(13,r,t,s),e.elementType=Dy,e.lanes=i,e;case Ly:return e=Oi(19,r,t,s),e.elementType=Ly,e.lanes=i,e;case UE:return m1(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BE:o=10;break e;case FE:o=9;break e;case fw:o=11;break e;case hw:o=14;break e;case cc:o=16,n=null;break e}throw Error(st(130,e==null?e:typeof e,""))}return t=Oi(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function xu(e,t,r,n){return e=Oi(7,e,n,t),e.lanes=r,e}function m1(e,t,r,n){return e=Oi(22,e,n,t),e.elementType=UE,e.lanes=r,e.stateNode={isHidden:!1},e}function j2(e,t,r){return e=Oi(6,e,null,t),e.lanes=r,e}function A2(e,t,r){return t=Oi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wM(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a2(0),this.expirationTimes=a2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a2(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kw(e,t,r,n,s,i,o,c,u){return e=new wM(e,t,r,c,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Oi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tw(i),e}function NM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:md,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function T7(e){if(!e)return Rc;e=e._reactInternals;e:{if(Ku(e)!==e||e.tag!==1)throw Error(st(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(st(171))}if(e.tag===1){var r=e.type;if(Ds(r))return T8(e,r,t)}return t}function _7(e,t,r,n,s,i,o,c,u){return e=Kw(r,n,!0,e,s,i,o,c,u),e.context=T7(null),r=e.current,n=vs(),s=Ec(r),i=El(n,s),i.callback=t??null,Cc(r,i,s),e.current.lanes=s,y0(e,s,n),Ls(e,n),e}function p1(e,t,r,n){var s=t.current,i=vs(),o=Ec(s);return r=T7(r),t.context===null?t.context=r:t.pendingContext=r,t=El(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cc(s,t,o),e!==null&&(uo(e,s,o,i),lp(e,s,o)),o}function Jp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xw(e,t){dj(e,t),(e=e.alternate)&&dj(e,t)}function jM(){return null}var O7=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yw(e){this._internalRoot=e}g1.prototype.render=Yw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(st(409));p1(e,t,null,null)};g1.prototype.unmount=Yw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Iu(function(){p1(null,e,null,null)}),t[Tl]=null}};function g1(e){this._internalRoot=e}g1.prototype.unstable_scheduleHydration=function(e){if(e){var t=u8();e={blockedOn:null,target:e,priority:t};for(var r=0;r<hc.length&&t!==0&&t<hc[r].priority;r++);hc.splice(r,0,e),r===0&&f8(e)}};function Zw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function x1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fj(){}function AM(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=Jp(o);i.call(d)}}var o=_7(t,n,e,0,null,!1,!1,"",fj);return e._reactRootContainer=o,e[Tl]=o.current,zh(e.nodeType===8?e.parentNode:e),Iu(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var d=Jp(u);c.call(d)}}var u=Kw(e,0,!1,null,null,!1,!1,"",fj);return e._reactRootContainer=u,e[Tl]=u.current,zh(e.nodeType===8?e.parentNode:e),Iu(function(){p1(t,u,r,n)}),u}function y1(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Jp(o);c.call(u)}}p1(t,o,e,s)}else o=AM(r,t,e,s,n);return Jp(o)}l8=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hh(t.pendingLanes);r!==0&&(gw(t,r|1),Ls(t,zn()),!(Nr&6)&&(Jd=zn()+500,Uc()))}break;case 13:Iu(function(){var n=_l(e,1);if(n!==null){var s=vs();uo(n,e,1,s)}}),Xw(e,1)}};xw=function(e){if(e.tag===13){var t=_l(e,134217728);if(t!==null){var r=vs();uo(t,e,134217728,r)}Xw(e,134217728)}};c8=function(e){if(e.tag===13){var t=Ec(e),r=_l(e,t);if(r!==null){var n=vs();uo(r,e,t,n)}Xw(e,t)}};u8=function(){return Fr};d8=function(e,t){var r=Fr;try{return Fr=e,t()}finally{Fr=r}};Vy=function(e,t,r){switch(t){case"input":if(Fy(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=l1(n);if(!s)throw Error(st(90));$E(n),Fy(n,s)}}}break;case"textarea":qE(e,r);break;case"select":t=r.value,t!=null&&Td(e,!!r.multiple,t,!1)}};ZE=qw;JE=Iu;var CM={usingClientEntryPoint:!1,Events:[b0,vd,l1,XE,YE,qw]},Qf={findFiberByHostInstance:cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SM={bundleType:Qf.bundleType,version:Qf.version,rendererPackageName:Qf.rendererPackageName,rendererConfig:Qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=t8(e),e===null?null:e.stateNode},findFiberByHostInstance:Qf.findFiberByHostInstance||jM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Em.isDisabled&&Em.supportsFiber)try{a1=Em.inject(SM),Ro=Em}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CM;fi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zw(t))throw Error(st(200));return NM(e,t,null,r)};fi.createRoot=function(e,t){if(!Zw(e))throw Error(st(299));var r=!1,n="",s=O7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kw(e,1,!1,null,null,r,!1,n,s),e[Tl]=t.current,zh(e.nodeType===8?e.parentNode:e),new Yw(t)};fi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(st(188)):(e=Object.keys(e).join(","),Error(st(268,e)));return e=t8(t),e=e===null?null:e.stateNode,e};fi.flushSync=function(e){return Iu(e)};fi.hydrate=function(e,t,r){if(!x1(t))throw Error(st(200));return y1(null,e,t,!0,r)};fi.hydrateRoot=function(e,t,r){if(!Zw(e))throw Error(st(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=O7;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=_7(t,null,e,1,r??null,s,!1,i,o),e[Tl]=t.current,zh(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new g1(t)};fi.render=function(e,t,r){if(!x1(t))throw Error(st(200));return y1(null,e,t,!1,r)};fi.unmountComponentAtNode=function(e){if(!x1(e))throw Error(st(40));return e._reactRootContainer?(Iu(function(){y1(null,null,e,!1,function(){e._reactRootContainer=null,e[Tl]=null})}),!0):!1};fi.unstable_batchedUpdates=qw;fi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!x1(r))throw Error(st(200));if(e==null||e._reactInternals===void 0)throw Error(st(38));return y1(e,t,r,!1,n)};fi.version="18.3.1-next-f1338f8080-20240426";function R7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R7)}catch(e){console.error(e)}}R7(),RE.exports=fi;var Jw=RE.exports,hj=Jw;_y.createRoot=hj.createRoot,_y.hydrateRoot=hj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yh.apply(this,arguments)}var yc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(yc||(yc={}));const mj="popstate";function EM(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:c}=n.location;return Cv("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Qp(s)}return PM(t,r,null,e)}function Hn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function D7(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kM(){return Math.random().toString(36).substr(2,8)}function pj(e,t){return{usr:e.state,key:e.key,idx:t}}function Cv(e,t,r,n){return r===void 0&&(r=null),Yh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?bf(t):t,{state:r,key:t&&t.key||n||kM()})}function Qp(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function PM(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,c=yc.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Yh({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){c=yc.Pop;let N=h(),A=N==null?null:N-d;d=N,u&&u({action:c,location:j.location,delta:A})}function v(N,A){c=yc.Push;let k=Cv(j.location,N,A);d=h()+1;let E=pj(k,d),_=j.createHref(k);try{o.pushState(E,"",_)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(_)}i&&u&&u({action:c,location:j.location,delta:1})}function x(N,A){c=yc.Replace;let k=Cv(j.location,N,A);d=h();let E=pj(k,d),_=j.createHref(k);o.replaceState(E,"",_),i&&u&&u({action:c,location:j.location,delta:0})}function w(N){let A=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof N=="string"?N:Qp(N);return k=k.replace(/ $/,"%20"),Hn(A,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,A)}let j={get action(){return c},get location(){return e(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(mj,p),u=N,()=>{s.removeEventListener(mj,p),u=null}},createHref(N){return t(s,N)},createURL:w,encodeLocation(N){let A=w(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:x,go(N){return o.go(N)}};return j}var gj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gj||(gj={}));function IM(e,t,r){return r===void 0&&(r="/"),TM(e,t,r)}function TM(e,t,r,n){let s=typeof t=="string"?bf(t):t,i=Qw(s.pathname||"/",r);if(i==null)return null;let o=L7(e);_M(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=qM(i);c=zM(o[u],d)}return c}function L7(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Hn(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=Pc([n,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(Hn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),L7(i.children,t,h,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:FM(d,i.index),routesMeta:h})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of M7(i.path))s(i,o,u)}),t}function M7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=M7(n.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function _M(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:UM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const OM=/^:[\w-]+$/,RM=3,DM=2,LM=1,MM=10,BM=-2,xj=e=>e==="*";function FM(e,t){let r=e.split("/"),n=r.length;return r.some(xj)&&(n+=BM),t&&(n+=DM),r.filter(s=>!xj(s)).reduce((s,i)=>s+(OM.test(i)?RM:i===""?LM:MM),n)}function UM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function zM(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",p=$M({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),v=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Pc([i,p.pathname]),pathnameBase:KM(Pc([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Pc([i,p.pathnameBase]))}return o}function $M(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=WM(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((d,h,p)=>{let{paramName:v,isOptional:x}=h;if(v==="*"){let j=c[p]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const w=c[p];return x&&!w?d[v]=void 0:d[v]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function WM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),D7(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function qM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return D7(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Qw(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function HM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?bf(e):e;return{pathname:r?r.startsWith("/")?r:VM(r,t):t,search:XM(n),hash:YM(s)}}function VM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function C2(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function e5(e,t){let r=GM(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function t5(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=bf(e):(s=Yh({},e),Hn(!s.pathname||!s.pathname.includes("?"),C2("?","pathname","search",s)),Hn(!s.pathname||!s.pathname.includes("#"),C2("#","pathname","hash",s)),Hn(!s.search||!s.search.includes("#"),C2("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=r;else{let p=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;s.pathname=v.join("/")}c=p>=0?t[p]:"/"}let u=HM(s,c),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Pc=e=>e.join("/").replace(/\/\/+/g,"/"),KM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ZM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const B7=["post","put","patch","delete"];new Set(B7);const JM=["get",...B7];new Set(JM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(this,arguments)}const r5=P.createContext(null),QM=P.createContext(null),zc=P.createContext(null),v1=P.createContext(null),qo=P.createContext({outlet:null,matches:[],isDataRoute:!1}),F7=P.createContext(null);function eB(e,t){let{relative:r}=t===void 0?{}:t;wf()||Hn(!1);let{basename:n,navigator:s}=P.useContext(zc),{hash:i,pathname:o,search:c}=z7(e,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:Pc([n,o])),s.createHref({pathname:u,search:c,hash:i})}function wf(){return P.useContext(v1)!=null}function Nf(){return wf()||Hn(!1),P.useContext(v1).location}function U7(e){P.useContext(zc).static||P.useLayoutEffect(e)}function N0(){let{isDataRoute:e}=P.useContext(qo);return e?gB():tB()}function tB(){wf()||Hn(!1);let e=P.useContext(r5),{basename:t,future:r,navigator:n}=P.useContext(zc),{matches:s}=P.useContext(qo),{pathname:i}=Nf(),o=JSON.stringify(e5(s,r.v7_relativeSplatPath)),c=P.useRef(!1);return U7(()=>{c.current=!0}),P.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let p=t5(d,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Pc([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,o,i,e])}const rB=P.createContext(null);function nB(e){let t=P.useContext(qo).outlet;return t&&P.createElement(rB.Provider,{value:e},t)}function aB(){let{matches:e}=P.useContext(qo),t=e[e.length-1];return t?t.params:{}}function z7(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=P.useContext(zc),{matches:s}=P.useContext(qo),{pathname:i}=Nf(),o=JSON.stringify(e5(s,n.v7_relativeSplatPath));return P.useMemo(()=>t5(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function sB(e,t){return iB(e,t)}function iB(e,t,r,n){wf()||Hn(!1);let{navigator:s}=P.useContext(zc),{matches:i}=P.useContext(qo),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Nf(),h;if(t){var p;let N=typeof t=="string"?bf(t):t;u==="/"||(p=N.pathname)!=null&&p.startsWith(u)||Hn(!1),h=N}else h=d;let v=h.pathname||"/",x=v;if(u!=="/"){let N=u.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(N.length).join("/")}let w=IM(e,{pathname:x}),j=dB(w&&w.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Pc([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Pc([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,r,n);return t&&j?P.createElement(v1.Provider,{value:{location:Zh({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:yc.Pop}},j):j}function oB(){let e=pB(),t=ZM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),r?P.createElement("pre",{style:s},r):null,null)}const lB=P.createElement(oB,null);class cB extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?P.createElement(qo.Provider,{value:this.props.routeContext},P.createElement(F7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uB(e){let{routeContext:t,match:r,children:n}=e,s=P.useContext(r5);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(qo.Provider,{value:t},n)}function dB(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,c=(s=r)==null?void 0:s.errors;if(c!=null){let h=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);h>=0||Hn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:v,errors:x}=r,w=p.route.loader&&v[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,v)=>{let x,w=!1,j=null,N=null;r&&(x=c&&p.route.id?c[p.route.id]:void 0,j=p.route.errorElement||lB,u&&(d<0&&v===0?(xB("route-fallback"),w=!0,N=null):d===v&&(w=!0,N=p.route.hydrateFallbackElement||null)));let A=t.concat(o.slice(0,v+1)),k=()=>{let E;return x?E=j:w?E=N:p.route.Component?E=P.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,P.createElement(uB,{match:p,routeContext:{outlet:h,matches:A,isDataRoute:r!=null},children:E})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?P.createElement(cB,{location:r.location,revalidation:r.revalidation,component:j,error:x,children:k(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):k()},null)}var $7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($7||{}),W7=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(W7||{});function fB(e){let t=P.useContext(r5);return t||Hn(!1),t}function hB(e){let t=P.useContext(QM);return t||Hn(!1),t}function mB(e){let t=P.useContext(qo);return t||Hn(!1),t}function q7(e){let t=mB(),r=t.matches[t.matches.length-1];return r.route.id||Hn(!1),r.route.id}function pB(){var e;let t=P.useContext(F7),r=hB(),n=q7();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function gB(){let{router:e}=fB($7.UseNavigateStable),t=q7(W7.UseNavigateStable),r=P.useRef(!1);return U7(()=>{r.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Zh({fromRouteId:t},i)))},[e,t])}const yj={};function xB(e,t,r){yj[e]||(yj[e]=!0)}function yB(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Md(e){let{to:t,replace:r,state:n,relative:s}=e;wf()||Hn(!1);let{future:i,static:o}=P.useContext(zc),{matches:c}=P.useContext(qo),{pathname:u}=Nf(),d=N0(),h=t5(t,e5(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(h);return P.useEffect(()=>d(JSON.parse(p),{replace:r,state:n,relative:s}),[d,p,s,r,n]),null}function vB(e){return nB(e.context)}function Kr(e){Hn(!1)}function bB(e){let{basename:t="/",children:r=null,location:n,navigationType:s=yc.Pop,navigator:i,static:o=!1,future:c}=e;wf()&&Hn(!1);let u=t.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:i,static:o,future:Zh({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof n=="string"&&(n=bf(n));let{pathname:h="/",search:p="",hash:v="",state:x=null,key:w="default"}=n,j=P.useMemo(()=>{let N=Qw(h,u);return N==null?null:{location:{pathname:N,search:p,hash:v,state:x,key:w},navigationType:s}},[u,h,p,v,x,w,s]);return j==null?null:P.createElement(zc.Provider,{value:d},P.createElement(v1.Provider,{children:r,value:j}))}function wB(e){let{children:t,location:r}=e;return sB(Sv(t),r)}new Promise(()=>{});function Sv(e,t){t===void 0&&(t=[]);let r=[];return P.Children.forEach(e,(n,s)=>{if(!P.isValidElement(n))return;let i=[...t,s];if(n.type===P.Fragment){r.push.apply(r,Sv(n.props.children,i));return}n.type!==Kr&&Hn(!1),!n.props.index||!n.props.children||Hn(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Sv(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ev.apply(this,arguments)}function NB(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function jB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function AB(e,t){return e.button===0&&(!t||t==="_self")&&!jB(e)}const CB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SB="6";try{window.__reactRouterVersion=SB}catch{}const EB="startTransition",vj=_E[EB];function kB(e){let{basename:t,children:r,future:n,window:s}=e,i=P.useRef();i.current==null&&(i.current=EM({window:s,v5Compat:!0}));let o=i.current,[c,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=P.useCallback(p=>{d&&vj?vj(()=>u(p)):u(p)},[u,d]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.useEffect(()=>yB(n),[n]),P.createElement(bB,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:n})}const PB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ph=P.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:p}=t,v=NB(t,CB),{basename:x}=P.useContext(zc),w,j=!1;if(typeof d=="string"&&IB.test(d)&&(w=d,PB))try{let E=new URL(window.location.href),_=d.startsWith("//")?new URL(E.protocol+d):new URL(d),O=Qw(_.pathname,x);_.origin===E.origin&&O!=null?d=O+_.search+_.hash:j=!0}catch{}let N=eB(d,{relative:s}),A=TB(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:p});function k(E){n&&n(E),E.defaultPrevented||A(E)}return P.createElement("a",Ev({},v,{href:w||N,onClick:j||i?n:k,ref:r,target:u}))});var bj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bj||(bj={}));var wj;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wj||(wj={}));function TB(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:c}=t===void 0?{}:t,u=N0(),d=Nf(),h=z7(e,{relative:o});return P.useCallback(p=>{if(AB(p,r)){p.preventDefault();let v=n!==void 0?n:Qp(d)===Qp(h);u(e,{replace:v,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,h,n,s,r,e,i,o,c])}function _B({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Bd=P.forwardRef(_B);function OB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const RB=P.forwardRef(OB);function DB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const LB=P.forwardRef(DB);function MB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Jh=P.forwardRef(MB);function BB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const kv=P.forwardRef(BB);function FB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const UB=P.forwardRef(FB);function zB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const $B=P.forwardRef(zB);function WB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const Qh=P.forwardRef(WB);function qB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const HB=P.forwardRef(qB);function VB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const n5=P.forwardRef(VB);function GB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const pp=P.forwardRef(GB);function KB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const Pv=P.forwardRef(KB);function XB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const YB=P.forwardRef(XB);function ZB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const H7=P.forwardRef(ZB);function JB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const e0=P.forwardRef(JB);function QB({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const eF=P.forwardRef(QB);function tF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const Nj=P.forwardRef(tF);function rF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Sa=P.forwardRef(rF);function nF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const yu=P.forwardRef(nF);function aF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Iv=P.forwardRef(aF);function sF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const V7=P.forwardRef(sF);function iF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Rl=P.forwardRef(iF);function oF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Lo=P.forwardRef(oF);function lF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const G7=P.forwardRef(lF);function cF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const jj=P.forwardRef(cF);function uF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const dF=P.forwardRef(uF);function fF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const _s=P.forwardRef(fF);function hF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const b1=P.forwardRef(hF);function mF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Tv=P.forwardRef(mF);function pF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const gF=P.forwardRef(pF);function xF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const j0=P.forwardRef(xF);function yF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const t0=P.forwardRef(yF);function vF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const bF=P.forwardRef(vF);function wF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const eg=P.forwardRef(wF);function NF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const jF=P.forwardRef(NF);function AF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const w1=P.forwardRef(AF);function CF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const K7=P.forwardRef(CF);function SF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const EF=P.forwardRef(SF);function kF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const N1=P.forwardRef(kF);function PF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const jf=P.forwardRef(PF);function IF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const TF=P.forwardRef(IF);function _F({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const _v=P.forwardRef(_F);function OF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Tu=P.forwardRef(OF);function RF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const _u=P.forwardRef(RF);function DF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Mo=P.forwardRef(DF);function LF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const tg=P.forwardRef(LF);function MF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const BF=P.forwardRef(MF);function FF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ou=P.forwardRef(FF);function UF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const Ic=P.forwardRef(UF);function zF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $F=P.forwardRef(zF);function WF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const r0=P.forwardRef(WF);function qF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Aj=P.forwardRef(qF);function HF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const VF=P.forwardRef(HF);function GF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ho=P.forwardRef(GF);function KF({title:e,titleId:t,...r},n){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const $c=P.forwardRef(KF),XF={ADMIN:[{name:"Dashboard",href:"/dashboard",icon:eg},{name:"Shipments",href:"/shipments",icon:Bd},{name:"Racks",href:"/racks",icon:Rl},{name:"Materials",href:"/materials",icon:_s},{name:"Material Reports",href:"/material-reports",icon:e0},{name:"Damage Report",href:"/damage-report",icon:Tv},{name:"Moving Jobs",href:"/moving-jobs",icon:Ic},{name:"Invoices",href:"/invoices",icon:_s},{name:"Expenses",href:"/expenses",icon:Qh},{name:"Scanner",href:"/scanner",icon:Mo},{name:"Settings",href:"/settings",icon:Iv}],MANAGER:[{name:"Dashboard",href:"/dashboard",icon:eg},{name:"Shipments",href:"/shipments",icon:Bd},{name:"Racks",href:"/racks",icon:Rl},{name:"Materials",href:"/materials",icon:_s},{name:"Material Reports",href:"/material-reports",icon:e0},{name:"Damage Report",href:"/damage-report",icon:Tv},{name:"Moving Jobs",href:"/moving-jobs",icon:Ic},{name:"Invoices",href:"/invoices",icon:_s},{name:"Expenses",href:"/expenses",icon:Qh},{name:"Scanner",href:"/scanner",icon:Mo}],WORKER:[{name:"My Jobs",href:"/my-jobs",icon:Ic},{name:"QR Scanner",href:"/scanner",icon:Mo},{name:"My Tasks",href:"/my-tasks",icon:Bd}]},YF=[{name:"Role Management",href:"/admin/roles",icon:tg}],ZF=()=>{var u,d,h;const[e,t]=P.useState(!1),[r,n]=P.useState(null),s=Nf(),i=N0();P.useEffect(()=>{const p=localStorage.getItem("user");if(p)try{const v=JSON.parse(p);n(v),v.role==="WORKER"&&s.pathname==="/dashboard"&&i("/scanner",{replace:!0})}catch{console.error("Failed to parse user data")}},[s.pathname,i]);const o=p=>s.pathname.startsWith(p),c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i("/login")};return a.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>t(!1)}),a.jsxs("div",{className:`
          fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
          ${e?"translate-x-0":"-translate-x-full"}
        `,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:a.jsx(Rl,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"WMS"})]}),a.jsx("button",{onClick:()=>t(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:a.jsx($c,{className:"h-6 w-6"})})]}),a.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:[(r==null?void 0:r.role)&&((u=XF[r.role])==null?void 0:u.map(p=>{const v=p.icon,x=o(p.href);return a.jsxs(ph,{to:p.href,className:`
                  flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors
                  ${x?"bg-primary-50 text-primary-700 border-l-4 border-primary-600":"text-gray-700 hover:bg-gray-100"}
                `,onClick:()=>t(!1),children:[a.jsx(v,{className:`mr-3 h-5 w-5 ${x?"text-primary-600":"text-gray-400"}`}),p.name]},p.name)})),(r==null?void 0:r.role)==="ADMIN"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"pt-4 pb-2",children:a.jsx("p",{className:"px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Admin"})}),YF.map(p=>{const v=p.icon,x=o(p.href),w=p.href==="/admin/ai-testing";return a.jsxs(ph,{to:p.href,className:`
                      flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors
                      ${x?w?"bg-purple-50 text-purple-700 border-l-4 border-purple-600":"bg-red-50 text-red-700 border-l-4 border-red-600":"text-gray-700 hover:bg-gray-100"}
                    `,onClick:()=>t(!1),children:[a.jsx(v,{className:`mr-3 h-5 w-5 ${x?w?"text-purple-600":"text-red-600":"text-gray-400"}`}),p.name]},p.name)})]})]}),a.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-3",children:[a.jsxs(ph,{to:"/profile",className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:[a.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-primary-600 font-medium",children:((h=(d=r==null?void 0:r.name)==null?void 0:d.charAt(0))==null?void 0:h.toUpperCase())||"U"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(r==null?void 0:r.name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:(r==null?void 0:r.email)||"user@demo.com"}),a.jsx("p",{className:"text-xs text-primary-600 font-medium",children:"View Profile →"})]})]}),a.jsxs("button",{onClick:c,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[a.jsx(kv,{className:"mr-3 h-5 w-5"}),"Logout"]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx("header",{className:"bg-white shadow-sm z-30",children:a.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[a.jsx("button",{onClick:()=>t(!0),className:"lg:hidden text-gray-500 hover:text-gray-700",children:a.jsx(HB,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 flex items-center justify-end space-x-4",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),a.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600",children:[a.jsx(n5,{className:"h-6 w-6"}),a.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),a.jsxs(ph,{to:"/profile",className:"flex items-center space-x-2 px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"View Profile",children:[a.jsx($F,{className:"h-8 w-8"}),a.jsx("span",{className:"hidden md:inline text-sm font-medium",children:(r==null?void 0:r.name)||"Profile"})]}),a.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",title:"Logout",children:[a.jsx(kv,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsx(vB,{})})]})]})};function X7(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=X7(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ur(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=X7(e))&&(n&&(n+=" "),n+=t);return n}var JF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function a5(e){if(typeof e!="string")return!1;var t=JF;return t.includes(e)}var QF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Y7(e){if(typeof e!="string")return!1;var t=QF;return t.includes(e)}function Z7(e){return typeof e=="string"&&e.startsWith("data-")}function mo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Y7(n)||Z7(n)});return Object.fromEntries(t)}function n0(e){if(e==null)return null;if(P.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return mo(t)}return typeof e=="object"&&!Array.isArray(e)?mo(e):null}function Bi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Y7(n)||Z7(n)||a5(n)});return Object.fromEntries(t)}var eU=["children","width","height","viewBox","className","style","title","desc"];function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ov.apply(null,arguments)}function tU(e,t){if(e==null)return{};var r,n,s=rU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var s5=P.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:c,title:u,desc:d}=e,h=tU(e,eU),p=i||{width:n,height:s,x:0,y:0},v=Ur("recharts-surface",o);return P.createElement("svg",Ov({},Bi(h),{className:v,width:n,height:s,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),P.createElement("title",null,u),P.createElement("desc",null,d),r)}),nU=["children","className"];function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rv.apply(null,arguments)}function aU(e,t){if(e==null)return{};var r,n,s=sU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Fs=P.forwardRef((e,t)=>{var{children:r,className:n}=e,s=aU(e,nU),i=Ur("recharts-layer",n);return P.createElement("g",Rv({className:i},Bi(s),{ref:t}),r)}),J7=P.createContext(null),iU=()=>P.useContext(J7);function en(e){return function(){return e}}const Q7=Math.cos,rg=Math.sin,go=Math.sqrt,ng=Math.PI,j1=2*ng,Dv=Math.PI,Lv=2*Dv,au=1e-6,oU=Lv-au;function ek(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function lU(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ek;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class cU{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ek:lU(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,u=n-t,d=s-r,h=o-t,p=c-r,v=h*h+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>au)if(!(Math.abs(p*u-d*h)>au)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,w=s-c,j=u*u+d*d,N=x*x+w*w,A=Math.sqrt(j),k=Math.sqrt(v),E=i*Math.tan((Dv-Math.acos((j+v-N)/(2*A*k)))/2),_=E/k,O=E/A;Math.abs(_-1)>au&&this._append`L${t+_*h},${r+_*p}`,this._append`A${i},${i},0,0,${+(p*x>h*w)},${this._x1=t+O*u},${this._y1=r+O*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(s),u=n*Math.sin(s),d=t+c,h=r+u,p=1^o,v=o?s-i:i-s;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>au||Math.abs(this._y1-h)>au)&&this._append`L${d},${h}`,n&&(v<0&&(v=v%Lv+Lv),v>oU?this._append`A${n},${n},0,1,${p},${t-c},${r-u}A${n},${n},0,1,${p},${this._x1=d},${this._y1=h}`:v>au&&this._append`A${n},${n},0,${+(v>=Dv)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function i5(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new cU(t)}function o5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tk(e){this._context=e}tk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function A1(e){return new tk(e)}function rk(e){return e[0]}function nk(e){return e[1]}function ak(e,t){var r=en(!0),n=null,s=A1,i=null,o=i5(c);e=typeof e=="function"?e:e===void 0?rk:en(e),t=typeof t=="function"?t:t===void 0?nk:en(t);function c(u){var d,h=(u=o5(u)).length,p,v=!1,x;for(n==null&&(i=s(x=o())),d=0;d<=h;++d)!(d<h&&r(p=u[d],d,u))===v&&((v=!v)?i.lineStart():i.lineEnd()),v&&i.point(+e(p,d,u),+t(p,d,u));if(x)return i=null,x+""||null}return c.x=function(u){return arguments.length?(e=typeof u=="function"?u:en(+u),c):e},c.y=function(u){return arguments.length?(t=typeof u=="function"?u:en(+u),c):t},c.defined=function(u){return arguments.length?(r=typeof u=="function"?u:en(!!u),c):r},c.curve=function(u){return arguments.length?(s=u,n!=null&&(i=s(n)),c):s},c.context=function(u){return arguments.length?(u==null?n=i=null:i=s(n=u),c):n},c}function km(e,t,r){var n=null,s=en(!0),i=null,o=A1,c=null,u=i5(d);e=typeof e=="function"?e:e===void 0?rk:en(+e),t=typeof t=="function"?t:en(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?nk:en(+r);function d(p){var v,x,w,j=(p=o5(p)).length,N,A=!1,k,E=new Array(j),_=new Array(j);for(i==null&&(c=o(k=u())),v=0;v<=j;++v){if(!(v<j&&s(N=p[v],v,p))===A)if(A=!A)x=v,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),w=v-1;w>=x;--w)c.point(E[w],_[w]);c.lineEnd(),c.areaEnd()}A&&(E[v]=+e(N,v,p),_[v]=+t(N,v,p),c.point(n?+n(N,v,p):E[v],r?+r(N,v,p):_[v]))}if(k)return c=null,k+""||null}function h(){return ak().defined(s).curve(o).context(i)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:en(+p),n=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:en(+p),d):e},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:en(+p),d):n},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:en(+p),r=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:en(+p),d):t},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:en(+p),d):r},d.lineX0=d.lineY0=function(){return h().x(e).y(t)},d.lineY1=function(){return h().x(e).y(r)},d.lineX1=function(){return h().x(n).y(t)},d.defined=function(p){return arguments.length?(s=typeof p=="function"?p:en(!!p),d):s},d.curve=function(p){return arguments.length?(o=p,i!=null&&(c=o(i)),d):o},d.context=function(p){return arguments.length?(p==null?i=c=null:c=o(i=p),d):i},d}class sk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function uU(e){return new sk(e,!0)}function dU(e){return new sk(e,!1)}const l5={draw(e,t){const r=go(t/ng);e.moveTo(r,0),e.arc(0,0,r,0,j1)}},fU={draw(e,t){const r=go(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ik=go(1/3),hU=ik*2,mU={draw(e,t){const r=go(t/hU),n=r*ik;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},pU={draw(e,t){const r=go(t),n=-r/2;e.rect(n,n,r,r)}},gU=.8908130915292852,ok=rg(ng/10)/rg(7*ng/10),xU=rg(j1/10)*ok,yU=-Q7(j1/10)*ok,vU={draw(e,t){const r=go(t*gU),n=xU*r,s=yU*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=j1*i/5,c=Q7(o),u=rg(o);e.lineTo(u*r,-c*r),e.lineTo(c*n-u*s,u*n+c*s)}e.closePath()}},S2=go(3),bU={draw(e,t){const r=-go(t/(S2*3));e.moveTo(0,r*2),e.lineTo(-S2*r,-r),e.lineTo(S2*r,-r),e.closePath()}},Si=-.5,Ei=go(3)/2,Mv=1/go(12),wU=(Mv/2+1)*3,NU={draw(e,t){const r=go(t/wU),n=r/2,s=r*Mv,i=n,o=r*Mv+r,c=-i,u=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(c,u),e.lineTo(Si*n-Ei*s,Ei*n+Si*s),e.lineTo(Si*i-Ei*o,Ei*i+Si*o),e.lineTo(Si*c-Ei*u,Ei*c+Si*u),e.lineTo(Si*n+Ei*s,Si*s-Ei*n),e.lineTo(Si*i+Ei*o,Si*o-Ei*i),e.lineTo(Si*c+Ei*u,Si*u-Ei*c),e.closePath()}};function jU(e,t){let r=null,n=i5(s);e=typeof e=="function"?e:en(e||l5),t=typeof t=="function"?t:en(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:en(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:en(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function ag(){}function sg(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function lk(e){this._context=e}lk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AU(e){return new lk(e)}function ck(e){this._context=e}ck.prototype={areaStart:ag,areaEnd:ag,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:sg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CU(e){return new ck(e)}function uk(e){this._context=e}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:sg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SU(e){return new uk(e)}function dk(e){this._context=e}dk.prototype={areaStart:ag,areaEnd:ag,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function EU(e){return new dk(e)}function Cj(e){return e<0?-1:1}function Sj(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),c=(i*s+o*n)/(n+s);return(Cj(i)+Cj(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function Ej(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function E2(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,c=(i-n)/3;e._context.bezierCurveTo(n+c,s+c*t,i-c,o-c*r,i,o)}function ig(e){this._context=e}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E2(this,this._t0,Ej(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,E2(this,Ej(this,r=Sj(this,e,t)),r);break;default:E2(this,this._t0,r=Sj(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function fk(e){this._context=new hk(e)}(fk.prototype=Object.create(ig.prototype)).point=function(e,t){ig.prototype.point.call(this,t,e)};function hk(e){this._context=e}hk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function kU(e){return new ig(e)}function PU(e){return new fk(e)}function mk(e){this._context=e}mk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=kj(e),s=kj(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function kj(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function IU(e){return new mk(e)}function C1(e,t){this._context=e,this._t=t}C1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function TU(e){return new C1(e,.5)}function _U(e){return new C1(e,0)}function OU(e){return new C1(e,1)}function Qd(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,c=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Bv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function RU(e,t){return e[t]}function DU(e){const t=[];return t.key=e,t}function LU(){var e=en([]),t=Bv,r=Qd,n=RU;function s(i){var o=Array.from(e.apply(this,arguments),DU),c,u=o.length,d=-1,h;for(const p of i)for(c=0,++d;c<u;++c)(o[c][d]=[0,+n(p,o[c].key,d,i)]).data=p;for(c=0,h=o5(t(o));c<u;++c)o[h[c]].index=c;return r(o,h),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:en(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:en(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Bv:typeof i=="function"?i:en(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Qd,s):r},s}function MU(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Qd(e,t)}}function BU(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,c=0;o<s;++o)c+=e[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}Qd(e,t)}}function FU(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var c=0,u=0,d=0;c<o;++c){for(var h=e[t[c]],p=h[n][1]||0,v=h[n-1][1]||0,x=(p-v)/2,w=0;w<c;++w){var j=e[t[w]],N=j[n][1]||0,A=j[n-1][1]||0;x+=N-A}u+=p,d+=x*p}s[n-1][1]+=s[n-1][0]=r,u&&(r-=d/u)}s[n-1][1]+=s[n-1][0]=r,Qd(e,t)}}var S1={},pk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(pk);var c5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(c5);var E1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(E1);var k1={},gk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(gk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk,r=E1;function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],o=s.length;if(o===0)return i;let c=0,u="",d="",h=!1;for(s.charCodeAt(0)===46&&(i.push(""),c++);c<o;){const p=s[c];d?p==="\\"&&c+1<o?(c++,u+=s[c]):p===d?d="":u+=p:h?p==='"'||p==="'"?d=p:p==="]"?(h=!1,i.push(u),u=""):u+=p:p==="["?(h=!0,u&&(i.push(u),u="")):p==="."?u&&(i.push(u),u=""):u+=p,c++}return u&&i.push(u),i}e.toPath=n})(k1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pk,r=c5,n=E1,s=k1;function i(c,u,d){if(c==null)return d;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return d;const h=c[u];return h===void 0?r.isDeepKey(u)?i(c,s.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=n.toKey(u));const h=c[u];return h===void 0?d:h}default:{if(Array.isArray(u))return o(c,u,d);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return d;const h=c[u];return h===void 0?d:h}}}function o(c,u,d){if(u.length===0)return d;let h=c;for(let p=0;p<u.length;p++){if(h==null||t.isUnsafeProperty(u[p]))return d;h=h[u[p]]}return h===void 0?d:h}e.get=i})(S1);var UU=S1.get;const Ru=Wo(UU);var Aa=e=>e===0?0:e>0?1:-1,Fi=e=>typeof e=="number"&&e!=+e,Dl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,_t=e=>(typeof e=="number"||e instanceof Number)&&!Fi(e),zo=e=>_t(e)||typeof e=="string",zU=0,a0=e=>{var t=++zU;return"".concat(e||"").concat(t)},ss=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_t(t)&&typeof t!="string")return n;var i;if(Dl(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Fi(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},xk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Ua(e,t,r){return _t(e)&&_t(t)?e+r*(t-e):t}function $U(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ru(n,t))===r)}var Ea=e=>e===null||typeof e>"u",A0=e=>Ea(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),WU=["type","size","sizeType"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(null,arguments)}function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ij(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){qU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qU(e,t,r){return(t=HU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HU(e){var t=VU(e,"string");return typeof t=="symbol"?t:t+""}function VU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GU(e,t){if(e==null)return{};var r,n,s=KU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yk={symbolCircle:l5,symbolCross:fU,symbolDiamond:mU,symbolSquare:pU,symbolStar:vU,symbolTriangle:bU,symbolWye:NU},XU=Math.PI/180,YU=e=>{var t="symbol".concat(A0(e));return yk[t]||l5},ZU=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*XU;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},JU=(e,t)=>{yk["symbol".concat(A0(e))]=t},u5=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=GU(e,WU),i=Ij(Ij({},s),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var c=()=>{var v=YU(o),x=jU().type(v).size(ZU(r,n,o)),w=x();if(w!==null)return w},{className:u,cx:d,cy:h}=i,p=Bi(i);return d===+d&&h===+h&&r===+r?P.createElement("path",Fv({},p,{className:Ur("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:c()})):null};u5.registerSymbol=JU;var QU=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(P.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{a5(s)&&(n[s]=i=>r[s](r,i))}),n},ez=(e,t,r)=>n=>(e(t,r,n),null),C0=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];a5(s)&&typeof i=="function"&&(n||(n={}),n[s]=ez(i,t,r))}),n};function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uv.apply(null,arguments)}function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){d5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d5(e,t,r){return(t=rz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rz(e){var t=nz(e,"string");return typeof t=="symbol"?t:t+""}function nz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ki=32;class f5 extends P.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=ki/2,i=ki/6,o=ki/3,c=t.inactive?n:t.color,u=r??t.type;if(u==="none")return null;if(u==="plainline")return P.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:ki,y2:s,className:"recharts-legend-icon"});if(u==="line")return P.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(ki,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(u==="rect")return P.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ki/8,"h").concat(ki,"v").concat(ki*3/4,"h").concat(-ki,"z"),className:"recharts-legend-icon"});if(P.isValidElement(t.legendIcon)){var d=tz({},t);return delete d.legendIcon,P.cloneElement(t.legendIcon,d)}return P.createElement(u5,{fill:c,cx:s,cy:s,size:ki,sizeType:"diameter",type:u})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,c={x:0,y:0,width:ki,height:ki},u={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((h,p)=>{var v=h.formatter||s,x=Ur({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:h.inactive});if(h.type==="none")return null;var w=h.inactive?i:h.color,j=v?v(h.value,h,p):h.value;return P.createElement("li",Uv({className:x,style:u,key:"legend-item-".concat(p)},C0(this.props,h,p)),P.createElement(s5,{width:r,height:r,viewBox:c,style:d,"aria-label":"".concat(j," legend icon")},this.renderIcon(h,o)),P.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},j))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return P.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}d5(f5,"displayName","Legend");d5(f5,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vk={},bk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],c=n(o);s.has(c)||s.set(c,o)}return Array.from(s.values())}e.uniqBy=t})(bk);var h5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(h5);var wk={},P1={},Nk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Nk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(P1);var jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P1,r=jk;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(wk);var Ak={},Ck={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S1;function r(n){return function(s){return t.get(s,n)}}e.property=r})(Ck);var Sk={},k2={},P2={},m5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(m5);var p5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(p5);var g5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(g5);var _j;function az(){return _j||(_j=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x5(),r=m5,n=p5,s=g5;function i(p,v,x){return typeof x!="function"?t.isMatch(p,v):o(p,v,function w(j,N,A,k,E,_){const O=x(j,N,A,k,E,_);return O!==void 0?!!O:o(j,N,w,_)},new Map)}function o(p,v,x,w){if(v===p)return!0;switch(typeof v){case"object":return c(p,v,x,w);case"function":return Object.keys(v).length>0?o(p,{...v},x,w):s.eq(p,v);default:return r.isObject(p)?typeof v=="string"?v==="":!0:s.eq(p,v)}}function c(p,v,x,w){if(v==null)return!0;if(Array.isArray(v))return d(p,v,x,w);if(v instanceof Map)return u(p,v,x,w);if(v instanceof Set)return h(p,v,x,w);const j=Object.keys(v);if(p==null)return j.length===0;if(j.length===0)return!0;if(w&&w.has(v))return w.get(v)===p;w&&w.set(v,p);try{for(let N=0;N<j.length;N++){const A=j[N];if(!n.isPrimitive(p)&&!(A in p)||v[A]===void 0&&p[A]!==void 0||v[A]===null&&p[A]!==null||!x(p[A],v[A],A,p,v,w))return!1}return!0}finally{w&&w.delete(v)}}function u(p,v,x,w){if(v.size===0)return!0;if(!(p instanceof Map))return!1;for(const[j,N]of v.entries()){const A=p.get(j);if(x(A,N,j,p,v,w)===!1)return!1}return!0}function d(p,v,x,w){if(v.length===0)return!0;if(!Array.isArray(p))return!1;const j=new Set;for(let N=0;N<v.length;N++){const A=v[N];let k=!1;for(let E=0;E<p.length;E++){if(j.has(E))continue;const _=p[E];let O=!1;if(x(_,A,N,p,v,w)&&(O=!0),O){j.add(E),k=!0;break}}if(!k)return!1}return!0}function h(p,v,x,w){return v.size===0?!0:p instanceof Set?d([...p],[...v],x,w):!1}e.isMatchWith=i,e.isSetMatch=h}(P2)),P2}var Oj;function x5(){return Oj||(Oj=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=az();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(k2)),k2}var Ek={},y5={},kk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(kk);var v5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(v5);var b5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",v="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",E="[object Uint32Array]",_="[object BigUint64Array]",O="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",U="[object BigInt64Array]",L="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=v,e.arrayTag=h,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=j,e.dateTag=c,e.errorTag=w,e.float32ArrayTag=L,e.float64ArrayTag=K,e.functionTag=p,e.int16ArrayTag=B,e.int32ArrayTag=F,e.int8ArrayTag=O,e.mapTag=u,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=k,e.uint32ArrayTag=E,e.uint8ArrayTag=N,e.uint8ClampedArrayTag=A})(b5);var Pk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Pk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kk,r=v5,n=b5,s=p5,i=Pk;function o(h,p){return c(h,void 0,h,new Map,p)}function c(h,p,v,x=new Map,w=void 0){const j=w==null?void 0:w(h,p,v,x);if(j!==void 0)return j;if(s.isPrimitive(h))return h;if(x.has(h))return x.get(h);if(Array.isArray(h)){const N=new Array(h.length);x.set(h,N);for(let A=0;A<h.length;A++)N[A]=c(h[A],A,v,x,w);return Object.hasOwn(h,"index")&&(N.index=h.index),Object.hasOwn(h,"input")&&(N.input=h.input),N}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const N=new RegExp(h.source,h.flags);return N.lastIndex=h.lastIndex,N}if(h instanceof Map){const N=new Map;x.set(h,N);for(const[A,k]of h)N.set(A,c(k,A,v,x,w));return N}if(h instanceof Set){const N=new Set;x.set(h,N);for(const A of h)N.add(c(A,void 0,v,x,w));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(i.isTypedArray(h)){const N=new(Object.getPrototypeOf(h)).constructor(h.length);x.set(h,N);for(let A=0;A<h.length;A++)N[A]=c(h[A],A,v,x,w);return N}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const N=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return x.set(h,N),u(N,h,v,x,w),N}if(typeof File<"u"&&h instanceof File){const N=new File([h],h.name,{type:h.type});return x.set(h,N),u(N,h,v,x,w),N}if(typeof Blob<"u"&&h instanceof Blob){const N=new Blob([h],{type:h.type});return x.set(h,N),u(N,h,v,x,w),N}if(h instanceof Error){const N=new h.constructor;return x.set(h,N),N.message=h.message,N.name=h.name,N.stack=h.stack,N.cause=h.cause,u(N,h,v,x,w),N}if(h instanceof Boolean){const N=new Boolean(h.valueOf());return x.set(h,N),u(N,h,v,x,w),N}if(h instanceof Number){const N=new Number(h.valueOf());return x.set(h,N),u(N,h,v,x,w),N}if(h instanceof String){const N=new String(h.valueOf());return x.set(h,N),u(N,h,v,x,w),N}if(typeof h=="object"&&d(h)){const N=Object.create(Object.getPrototypeOf(h));return x.set(h,N),u(N,h,v,x,w),N}return h}function u(h,p,v=h,x,w){const j=[...Object.keys(p),...t.getSymbols(p)];for(let N=0;N<j.length;N++){const A=j[N],k=Object.getOwnPropertyDescriptor(h,A);(k==null||k.writable)&&(h[A]=c(p[A],A,v,x,w))}}function d(h){switch(r.getTag(h)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=c,e.copyProperties=u})(y5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y5;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Ek);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x5(),r=Ek;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(Sk);var Ik={},Tk={},_k={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y5,r=b5;function n(s,i){return t.cloneDeepWith(s,(o,c,u,d)=>{const h=i==null?void 0:i(o,c,u,d);if(h!==void 0)return h;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(_k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_k;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Tk);var Ok={},w5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(w5);var Rk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v5;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Rk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c5,r=w5,n=Rk,s=k1;function i(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&t.isDeepKey(c)&&(o==null?void 0:o[c])==null?u=s.toPath(c):u=[c],u.length===0)return!1;let d=o;for(let h=0;h<u.length;h++){const p=u[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}e.has=i})(Ok);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x5(),r=E1,n=Tk,s=S1,i=Ok;function o(c,u){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return u=n.cloneDeep(u),function(d){const h=s.get(d,c);return h===void 0?i.has(d,c):u===void 0?h===void 0:t.isMatch(h,u)}}e.matchesProperty=o})(Ik);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h5,r=Ck,n=Sk,s=Ik;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(Ak);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bk,r=h5,n=wk,s=Ak;function i(o,c=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(c)):[]}e.uniqBy=i})(vk);var sz=vk.uniqBy;const Rj=Wo(sz);function Dk(e,t,r){return t===!0?Rj(e,r):typeof t=="function"?Rj(e,t):e}var Lk={exports:{}},Mk={},Bk={exports:{}},Fk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef=P;function iz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oz=typeof Object.is=="function"?Object.is:iz,lz=ef.useState,cz=ef.useEffect,uz=ef.useLayoutEffect,dz=ef.useDebugValue;function fz(e,t){var r=t(),n=lz({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return uz(function(){s.value=r,s.getSnapshot=t,I2(s)&&i({inst:s})},[e,r,t]),cz(function(){return I2(s)&&i({inst:s}),e(function(){I2(s)&&i({inst:s})})},[e]),dz(r),r}function I2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!oz(e,r)}catch{return!0}}function hz(e,t){return t()}var mz=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hz:fz;Fk.useSyncExternalStore=ef.useSyncExternalStore!==void 0?ef.useSyncExternalStore:mz;Bk.exports=Fk;var pz=Bk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=P,gz=pz;function xz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yz=typeof Object.is=="function"?Object.is:xz,vz=gz.useSyncExternalStore,bz=I1.useRef,wz=I1.useEffect,Nz=I1.useMemo,jz=I1.useDebugValue;Mk.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=bz(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Nz(function(){function u(x){if(!d){if(d=!0,h=x,x=n(x),s!==void 0&&o.hasValue){var w=o.value;if(s(w,x))return p=w}return p=x}if(w=p,yz(h,x))return w;var j=n(x);return s!==void 0&&s(w,j)?(h=x,w):(h=x,p=j)}var d=!1,h,p,v=r===void 0?null:r;return[function(){return u(t())},v===null?void 0:function(){return u(v())}]},[t,r,n,s]);var c=vz(e,i[0],i[1]);return wz(function(){o.hasValue=!0,o.value=c},[c]),jz(c),c};Lk.exports=Mk;var Az=Lk.exports,N5=P.createContext(null),Cz=e=>e,yn=()=>{var e=P.useContext(N5);return e?e.store.dispatch:Cz},gp=()=>{},Sz=()=>gp,Ez=(e,t)=>e===t;function Pt(e){var t=P.useContext(N5);return Az.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Sz,t?t.store.getState:gp,t?t.store.getState:gp,t?e:gp,Ez)}function kz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Pz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Iz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Dj=e=>Array.isArray(e)?e:[e];function Tz(e){const t=Array.isArray(e[0])?e[0]:e;return Iz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function _z(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Oz=class{constructor(e){this.value=e}deref(){return this.value}},Rz=typeof WeakRef<"u"?WeakRef:Oz,Dz=0,Lj=1;function Pm(){return{s:Dz,v:void 0,o:null,p:null}}function Uk(e,t={}){let r=Pm();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var p;let c=r;const{length:u}=arguments;for(let v=0,x=u;v<x;v++){const w=arguments[v];if(typeof w=="function"||typeof w=="object"&&w!==null){let j=c.o;j===null&&(c.o=j=new WeakMap);const N=j.get(w);N===void 0?(c=Pm(),j.set(w,c)):c=N}else{let j=c.p;j===null&&(c.p=j=new Map);const N=j.get(w);N===void 0?(c=Pm(),j.set(w,c)):c=N}}const d=c;let h;if(c.s===Lj)h=c.v;else if(h=e.apply(null,arguments),i++,n){const v=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;v!=null&&n(v,h)&&(h=v,i!==0&&i--),s=typeof h=="object"&&h!==null||typeof h=="function"?new Rz(h):h}return d.s=Lj,d.v=h,h}return o.clearCache=()=>{r=Pm(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Lz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,c,u={},d=s.pop();typeof d=="object"&&(u=d,d=s.pop()),kz(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...r,...u},{memoize:p,memoizeOptions:v=[],argsMemoize:x=Uk,argsMemoizeOptions:w=[]}=h,j=Dj(v),N=Dj(w),A=Tz(s),k=p(function(){return i++,d.apply(null,arguments)},...j),E=x(function(){o++;const O=_z(A,arguments);return c=k.apply(null,O),c},...N);return Object.assign(E,{resultFunc:d,memoizedResultFunc:k,dependencies:A,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var Ue=Lz(Uk),Mz=Object.assign((e,t=Ue)=>{Pz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,c,u)=>(o[r[u]]=c,o),{}))},{withTypes:()=>Mz}),zk={},$k={},Wk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),c=t(s);if(o===c&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?c-o:o-c}return 0};e.compareValues=r})(Wk);var qk={},j5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(j5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j5,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(qk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wk,r=qk,n=k1;function s(i,o,c,u){if(i==null)return[];c=u?void 0:c,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(x=>String(x));const d=(x,w)=>{let j=x;for(let N=0;N<w.length&&j!=null;++N)j=j[w[N]];return j},h=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:d(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?d(w,x):typeof w=="object"?w[x]:w,p=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(w=>h(w,x))})).slice().sort((x,w)=>{for(let j=0;j<p.length;j++){const N=t.compareValues(x.criteria[j],w.criteria[j],c[j]);if(N!==0)return N}return 0}).map(x=>x.original)}e.orderBy=s})($k);var Hk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(c,u)=>{for(let d=0;d<c.length;d++){const h=c[d];Array.isArray(h)&&u<i?o(h,u+1):s.push(h)}};return o(r,0),s}e.flatten=t})(Hk);var A5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w5,r=P1,n=m5,s=g5;function i(o,c,u){return n.isObject(u)&&(typeof c=="number"&&r.isArrayLike(u)&&t.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?s.eq(u[c],o):!1}e.isIterateeCall=i})(A5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$k,r=Hk,n=A5;function s(i,...o){const c=o.length;return c>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(zk);var Bz=zk.sortBy;const T1=Wo(Bz);var Vk=e=>e.legend.settings,Fz=e=>e.legend.size,Uz=e=>e.legend.payload,zz=Ue([Uz,Vk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?T1(n,r):n});function $z(){return Pt(zz)}var Im=1;function Gk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=P.useState({height:0,left:0,top:0,width:0}),n=P.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Im||Math.abs(o.left-t.left)>Im||Math.abs(o.top-t.top)>Im||Math.abs(o.width-t.width)>Im)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ma(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wz=typeof Symbol=="function"&&Symbol.observable||"@@observable",Mj=Wz,T2=()=>Math.random().toString(36).substring(7).split("").join("."),qz={INIT:`@@redux/INIT${T2()}`,REPLACE:`@@redux/REPLACE${T2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${T2()}`},og=qz;function C5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Kk(e,t,r){if(typeof e!="function")throw new Error(Ma(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ma(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ma(1));return r(Kk)(e,t)}let n=e,s=t,i=new Map,o=i,c=0,u=!1;function d(){o===i&&(o=new Map,i.forEach((N,A)=>{o.set(A,N)}))}function h(){if(u)throw new Error(Ma(3));return s}function p(N){if(typeof N!="function")throw new Error(Ma(4));if(u)throw new Error(Ma(5));let A=!0;d();const k=c++;return o.set(k,N),function(){if(A){if(u)throw new Error(Ma(6));A=!1,d(),o.delete(k),i=null}}}function v(N){if(!C5(N))throw new Error(Ma(7));if(typeof N.type>"u")throw new Error(Ma(8));if(typeof N.type!="string")throw new Error(Ma(17));if(u)throw new Error(Ma(9));try{u=!0,s=n(s,N)}finally{u=!1}return(i=o).forEach(k=>{k()}),N}function x(N){if(typeof N!="function")throw new Error(Ma(10));n=N,v({type:og.REPLACE})}function w(){const N=p;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(Ma(11));function k(){const _=A;_.next&&_.next(h())}return k(),{unsubscribe:N(k)}},[Mj](){return this}}}return v({type:og.INIT}),{dispatch:v,subscribe:p,getState:h,replaceReducer:x,[Mj]:w}}function Hz(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:og.INIT})>"u")throw new Error(Ma(12));if(typeof r(void 0,{type:og.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ma(13))})}function Xk(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{Hz(r)}catch(i){s=i}return function(o={},c){if(s)throw s;let u=!1;const d={};for(let h=0;h<n.length;h++){const p=n[h],v=r[p],x=o[p],w=v(x,c);if(typeof w>"u")throw c&&c.type,new Error(Ma(14));d[p]=w,u=u||w!==x}return u=u||n.length!==Object.keys(o).length,u?d:o}}function lg(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Vz(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Ma(15))};const o={getState:s.getState,dispatch:(u,...d)=>i(u,...d)},c=e.map(u=>u(o));return i=lg(...c)(s.dispatch),{...s,dispatch:i}}}function Yk(e){return C5(e)&&"type"in e&&typeof e.type=="string"}var Zk=Symbol.for("immer-nothing"),Bj=Symbol.for("immer-draftable"),di=Symbol.for("immer-state");function oo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var tf=Object.getPrototypeOf;function Du(e){return!!e&&!!e[di]}function Ll(e){var t;return e?Jk(e)||Array.isArray(e)||!!e[Bj]||!!((t=e.constructor)!=null&&t[Bj])||S0(e)||O1(e):!1}var Gz=Object.prototype.constructor.toString();function Jk(e){if(!e||typeof e!="object")return!1;const t=tf(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Gz}function cg(e,t){_1(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function _1(e){const t=e[di];return t?t.type_:Array.isArray(e)?1:S0(e)?2:O1(e)?3:0}function zv(e,t){return _1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Qk(e,t,r){const n=_1(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Kz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function S0(e){return e instanceof Map}function O1(e){return e instanceof Set}function su(e){return e.copy_||e.base_}function $v(e,t){if(S0(e))return new Map(e);if(O1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Jk(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[di];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(tf(e),n)}else{const n=tf(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function S5(e,t=!1){return R1(e)||Du(e)||!Ll(e)||(_1(e)>1&&Object.defineProperties(e,{set:{value:Tm},add:{value:Tm},clear:{value:Tm},delete:{value:Tm}}),Object.freeze(e),t&&Object.values(e).forEach(r=>S5(r,!0))),e}function Tm(){oo(2)}function R1(e){return Object.isFrozen(e)}var Xz={};function Lu(e){const t=Xz[e];return t||oo(0,e),t}var s0;function eP(){return s0}function Yz(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fj(e,t){t&&(Lu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Wv(e){qv(e),e.drafts_.forEach(Zz),e.drafts_=null}function qv(e){e===s0&&(s0=e.parent_)}function Uj(e){return s0=Yz(s0,e)}function Zz(e){const t=e[di];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[di].modified_&&(Wv(t),oo(4)),Ll(e)&&(e=ug(t,e),t.parent_||dg(t,e)),t.patches_&&Lu("Patches").generateReplacementPatches_(r[di].base_,e,t.patches_,t.inversePatches_)):e=ug(t,r,[]),Wv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Zk?e:void 0}function ug(e,t,r){if(R1(t))return t;const n=t[di];if(!n)return cg(t,(s,i)=>$j(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return dg(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),cg(i,(c,u)=>$j(e,n,s,c,u,r,o)),dg(e,s,!1),r&&e.patches_&&Lu("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function $j(e,t,r,n,s,i,o){if(Du(s)){const c=i&&t&&t.type_!==3&&!zv(t.assigned_,n)?i.concat(n):void 0,u=ug(e,s,c);if(Qk(r,n,u),Du(u))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Ll(s)&&!R1(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ug(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(S0(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&dg(e,s)}}function dg(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&S5(t,r)}function Jz(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:eP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=E5;r&&(s=[n],i=i0);const{revoke:o,proxy:c}=Proxy.revocable(s,i);return n.draft_=c,n.revoke_=o,c}var E5={get(e,t){if(t===di)return e;const r=su(e);if(!zv(r,t))return Qz(e,r,t);const n=r[t];return e.finalized_||!Ll(n)?n:n===_2(e.base_,t)?(O2(e),e.copy_[t]=Vv(n,e)):n},has(e,t){return t in su(e)},ownKeys(e){return Reflect.ownKeys(su(e))},set(e,t,r){const n=tP(su(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=_2(su(e),t),i=s==null?void 0:s[di];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Kz(r,s)&&(r!==void 0||zv(e.base_,t)))return!0;O2(e),Hv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,O2(e),Hv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=su(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){oo(11)},getPrototypeOf(e){return tf(e.base_)},setPrototypeOf(){oo(12)}},i0={};cg(E5,(e,t)=>{i0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});i0.deleteProperty=function(e,t){return i0.set.call(this,e,t,void 0)};i0.set=function(e,t,r){return E5.set.call(this,e[0],t,r,e[0])};function _2(e,t){const r=e[di];return(r?su(r):e)[t]}function Qz(e,t,r){var s;const n=tP(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function tP(e,t){if(!(t in e))return;let r=tf(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=tf(r)}}function Hv(e){e.modified_||(e.modified_=!0,e.parent_&&Hv(e.parent_))}function O2(e){e.copy_||(e.copy_=$v(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var e$=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(u=i,...d){return o.produce(u,h=>r.call(this,h,...d))}}typeof r!="function"&&oo(6),n!==void 0&&typeof n!="function"&&oo(7);let s;if(Ll(t)){const i=Uj(this),o=Vv(t,void 0);let c=!0;try{s=r(o),c=!1}finally{c?Wv(i):qv(i)}return Fj(i,n),zj(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Zk&&(s=void 0),this.autoFreeze_&&S5(s,!0),n){const i=[],o=[];Lu("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else oo(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,u=>t(u,...c));let n,s;return[this.produce(t,r,(o,c)=>{n=o,s=c}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ll(e)||oo(8),Du(e)&&(e=kl(e));const t=Uj(this),r=Vv(e,void 0);return r[di].isManual_=!0,qv(t),r}finishDraft(e,t){const r=e&&e[di];(!r||!r.isManual_)&&oo(9);const{scope_:n}=r;return Fj(n,t),zj(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Lu("Patches").applyPatches_;return Du(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Vv(e,t){const r=S0(e)?Lu("MapSet").proxyMap_(e,t):O1(e)?Lu("MapSet").proxySet_(e,t):Jz(e,t);return(t?t.scope_:eP()).drafts_.push(r),r}function kl(e){return Du(e)||oo(10,e),rP(e)}function rP(e){if(!Ll(e)||R1(e))return e;const t=e[di];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$v(e,t.scope_.immer_.useStrictShallowCopy_)}else r=$v(e,!0);return cg(r,(n,s)=>{Qk(r,n,rP(s))}),t&&(t.finalized_=!1),r}var t$=new e$,nP=t$.produce;function aP(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var r$=aP(),n$=aP,a$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lg:lg.apply(null,arguments)};function Ui(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(li(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Yk(n)&&n.type===e,r}var sP=class gh extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,gh.prototype)}static get[Symbol.species](){return gh}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new gh(...t[0].concat(this)):new gh(...t.concat(this))}};function Wj(e){return Ll(e)?nP(e,()=>{}):e}function _m(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function s$(e){return typeof e=="boolean"}var i$=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new sP;return r&&(s$(r)?o.push(r$):o.push(n$(r.extraArgument))),o},iP="RTK_autoBatch",gs=()=>e=>({payload:e,meta:{[iP]:!0}}),qj=e=>t=>{setTimeout(t,e)},oP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const c=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qj(10):e.type==="callback"?e.queueNotification:qj(e.timeout),d=()=>{o=!1,i&&(i=!1,c.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const p=()=>s&&h(),v=n.subscribe(p);return c.add(h),()=>{v(),c.delete(h)}},dispatch(h){var p;try{return s=!((p=h==null?void 0:h.meta)!=null&&p[iP]),i=!s,i&&(o||(o=!0,u(d))),n.dispatch(h)}finally{s=!0}}})},o$=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new sP(e);return n&&s.push(oP(typeof n=="object"?n:void 0)),s};function l$(e){const t=i$(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(C5(r))c=Xk(r);else throw new Error(li(1));let u;typeof n=="function"?u=n(t):u=t();let d=lg;s&&(d=a$({trace:!1,...typeof s=="object"&&s}));const h=Vz(...u),p=o$(h);let v=typeof o=="function"?o(p):p();const x=d(...v);return Kk(c,i,x)}function lP(e){const t={},r=[];let n;const s={addCase(i,o){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(li(28));if(c in t)throw new Error(li(29));return t[c]=o,s},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function c$(e){return typeof e=="function"}function u$(e,t){let[r,n,s]=lP(t),i;if(c$(e))i=()=>Wj(e());else{const c=Wj(e);i=()=>c}function o(c=i(),u){let d=[r[u.type],...n.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[s]),d.reduce((h,p)=>{if(p)if(Du(h)){const x=p(h,u);return x===void 0?h:x}else{if(Ll(h))return nP(h,v=>p(v,u));{const v=p(h,u);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},c)}return o.getInitialState=i,o}var d$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",f$=(e=21)=>{let t="",r=e;for(;r--;)t+=d$[Math.random()*64|0];return t},h$=Symbol.for("rtk-slice-createasyncthunk");function m$(e,t){return`${e}/${t}`}function p$({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[h$];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(li(11));const c=(typeof s.reducers=="function"?s.reducers(x$()):s.reducers)||{},u=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(_,O){const B=typeof _=="string"?_:_.type;if(!B)throw new Error(li(12));if(B in d.sliceCaseReducersByType)throw new Error(li(13));return d.sliceCaseReducersByType[B]=O,h},addMatcher(_,O){return d.sliceMatchers.push({matcher:_,reducer:O}),h},exposeAction(_,O){return d.actionCreators[_]=O,h},exposeCaseReducer(_,O){return d.sliceCaseReducersByName[_]=O,h}};u.forEach(_=>{const O=c[_],B={reducerName:_,type:m$(i,_),createNotation:typeof s.reducers=="function"};v$(O)?w$(B,O,h,t):y$(B,O,h)});function p(){const[_={},O=[],B=void 0]=typeof s.extraReducers=="function"?lP(s.extraReducers):[s.extraReducers],F={..._,...d.sliceCaseReducersByType};return u$(s.initialState,U=>{for(let L in F)U.addCase(L,F[L]);for(let L of d.sliceMatchers)U.addMatcher(L.matcher,L.reducer);for(let L of O)U.addMatcher(L.matcher,L.reducer);B&&U.addDefaultCase(B)})}const v=_=>_,x=new Map,w=new WeakMap;let j;function N(_,O){return j||(j=p()),j(_,O)}function A(){return j||(j=p()),j.getInitialState()}function k(_,O=!1){function B(U){let L=U[_];return typeof L>"u"&&O&&(L=_m(w,B,A)),L}function F(U=v){const L=_m(x,O,()=>new WeakMap);return _m(L,U,()=>{const K={};for(const[z,q]of Object.entries(s.selectors??{}))K[z]=g$(q,U,()=>_m(w,U,A),O);return K})}return{reducerPath:_,getSelectors:F,get selectors(){return F(B)},selectSlice:B}}const E={name:i,reducer:N,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:A,...k(o),injectInto(_,{reducerPath:O,...B}={}){const F=O??o;return _.inject({reducerPath:F,reducer:N},B),{...E,...k(F,!0)}}};return E}}function g$(e,t,r,n){function s(i,...o){let c=t(i);return typeof c>"u"&&n&&(c=r()),e(c,...o)}return s.unwrapped=e,s}var mi=p$();function x$(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function y$({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!b$(n))throw new Error(li(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ui(e,o):Ui(e))}function v$(e){return e._reducerDefinitionType==="asyncThunk"}function b$(e){return e._reducerDefinitionType==="reducerWithPrepare"}function w$({type:e,reducerName:t},r,n,s){if(!s)throw new Error(li(18));const{payloadCreator:i,fulfilled:o,pending:c,rejected:u,settled:d,options:h}=r,p=s(e,i,h);n.exposeAction(t,p),o&&n.addCase(p.fulfilled,o),c&&n.addCase(p.pending,c),u&&n.addCase(p.rejected,u),d&&n.addMatcher(p.settled,d),n.exposeCaseReducer(t,{fulfilled:o||Om,pending:c||Om,rejected:u||Om,settled:d||Om})}function Om(){}var N$="task",cP="listener",uP="completed",k5="cancelled",j$=`task-${k5}`,A$=`task-${uP}`,Gv=`${cP}-${k5}`,C$=`${cP}-${uP}`,D1=class{constructor(e){Ir(this,"name","TaskAbortError");Ir(this,"message");this.code=e,this.message=`${N$} ${k5} (reason: ${e})`}},P5=(e,t)=>{if(typeof e!="function")throw new TypeError(li(32))},fg=()=>{},dP=(e,t=fg)=>(e.catch(t),e),fP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),vu=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},bu=e=>{if(e.aborted){const{reason:t}=e;throw new D1(t)}};function hP(e,t){let r=fg;return new Promise((n,s)=>{const i=()=>s(new D1(e.reason));if(e.aborted){i();return}r=fP(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=fg})}var S$=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof D1?"cancelled":"rejected",error:r}}finally{t==null||t()}},hg=e=>t=>dP(hP(e,t).then(r=>(bu(e),r))),mP=e=>{const t=hg(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Fd}=Object,Hj={},L1="listenerMiddleware",E$=(e,t)=>{const r=n=>fP(e,()=>vu(n,e.reason));return(n,s)=>{P5(n);const i=new AbortController;r(i);const o=S$(async()=>{bu(e),bu(i.signal);const c=await n({pause:hg(i.signal),delay:mP(i.signal),signal:i.signal});return bu(i.signal),c},()=>vu(i,A$));return s!=null&&s.autoJoin&&t.push(o.catch(fg)),{result:hg(e)(o),cancel(){vu(i,j$)}}}},k$=(e,t)=>{const r=async(n,s)=>{bu(t);let i=()=>{};const c=[new Promise((u,d)=>{let h=e({predicate:n,effect:(p,v)=>{v.unsubscribe(),u([p,v.getState(),v.getOriginalState()])}});i=()=>{h(),d()}})];s!=null&&c.push(new Promise(u=>setTimeout(u,s,null)));try{const u=await hP(t,Promise.race(c));return bu(t),u}finally{i()}};return(n,s)=>dP(r(n,s))},pP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Ui(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(li(21));return P5(i),{predicate:s,type:t,effect:i}},gP=Fd(e=>{const{type:t,predicate:r,effect:n}=pP(e);return{id:f$(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(li(22))}}},{withTypes:()=>gP}),Vj=(e,t)=>{const{type:r,effect:n,predicate:s}=pP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},Kv=e=>{e.pending.forEach(t=>{vu(t,Gv)})},P$=e=>()=>{e.forEach(Kv),e.clear()},Gj=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},xP=Fd(Ui(`${L1}/add`),{withTypes:()=>xP}),I$=Ui(`${L1}/removeAll`),yP=Fd(Ui(`${L1}/remove`),{withTypes:()=>yP}),T$=(...e)=>{console.error(`${L1}/error`,...e)},E0=(e={})=>{const t=new Map,{extra:r,onError:n=T$}=e;P5(n);const s=h=>(h.unsubscribe=()=>t.delete(h.id),t.set(h.id,h),p=>{h.unsubscribe(),p!=null&&p.cancelActive&&Kv(h)}),i=h=>{const p=Vj(t,h)??gP(h);return s(p)};Fd(i,{withTypes:()=>i});const o=h=>{const p=Vj(t,h);return p&&(p.unsubscribe(),h.cancelActive&&Kv(p)),!!p};Fd(o,{withTypes:()=>o});const c=async(h,p,v,x)=>{const w=new AbortController,j=k$(i,w.signal),N=[];try{h.pending.add(w),await Promise.resolve(h.effect(p,Fd({},v,{getOriginalState:x,condition:(A,k)=>j(A,k).then(Boolean),take:j,delay:mP(w.signal),pause:hg(w.signal),extra:r,signal:w.signal,fork:E$(w.signal,N),unsubscribe:h.unsubscribe,subscribe:()=>{t.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((A,k,E)=>{A!==w&&(vu(A,Gv),E.delete(A))})},cancel:()=>{vu(w,Gv),h.pending.delete(w)},throwIfCancelled:()=>{bu(w.signal)}})))}catch(A){A instanceof D1||Gj(n,A,{raisedBy:"effect"})}finally{await Promise.all(N),vu(w,C$),h.pending.delete(w)}},u=P$(t);return{middleware:h=>p=>v=>{if(!Yk(v))return p(v);if(xP.match(v))return i(v.payload);if(I$.match(v)){u();return}if(yP.match(v))return o(v.payload);let x=h.getState();const w=()=>{if(x===Hj)throw new Error(li(23));return x};let j;try{if(j=p(v),t.size>0){const N=h.getState(),A=Array.from(t.values());for(const k of A){let E=!1;try{E=k.predicate(v,N,x)}catch(_){E=!1,Gj(n,_,{raisedBy:"predicate"})}E&&c(k,v,h,w)}}}finally{x=Hj}return j},startListening:i,stopListening:o,clearListeners:u}};function li(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _$={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},vP=mi({name:"chartLayout",initialState:_$,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:O$,setLayout:R$,setChartSize:D$,setScale:L$}=vP.actions,M$=vP.reducer;function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kj(Object(r),!0).forEach(function(n){B$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B$(e,t,r){return(t=F$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F$(e){var t=U$(e,"string");return typeof t=="symbol"?t:t+""}function U$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mg=Math.PI/180,z$=e=>e*180/Math.PI,ea=(e,t,r,n)=>({x:e+Math.cos(-mg*n)*r,y:t+Math.sin(-mg*n)*r}),bP=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},$$=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},W$=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=$$({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var c=(r-s)/o,u=Math.acos(c);return n>i&&(u=2*Math.PI-u),{radius:o,angle:z$(u),angleInRadian:u}},q$=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},H$=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},V$=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=W$({x:r,y:n},t),{innerRadius:o,outerRadius:c}=t;if(s<o||s>c||s===0)return null;var{startAngle:u,endAngle:d}=q$(t),h=i,p;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;p=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=u}return p?Xj(Xj({},t),{},{radius:s,angle:H$(h,t)}):null};function wP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yj(Object(r),!0).forEach(function(n){G$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G$(e,t,r){return(t=K$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K$(e){var t=X$(e,"string");return typeof t=="symbol"?t:t+""}function X$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function An(e,t,r){return Ea(e)||Ea(t)?r:zo(t)?Ru(e,t,r):typeof t=="function"?t(e):r}var Y$=(e,t,r,n,s)=>{var i,o=-1,c=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var u=0;u<c;u++){var d=u>0?r[u-1].coordinate:r[c-1].coordinate,h=r[u].coordinate,p=u>=c-1?r[0].coordinate:r[u+1].coordinate,v=void 0;if(Aa(h-d)!==Aa(p-h)){var x=[];if(Aa(p-h)===Aa(s[1]-s[0])){v=p;var w=h+s[1]-s[0];x[0]=Math.min(w,(w+d)/2),x[1]=Math.max(w,(w+d)/2)}else{v=d;var j=p+s[1]-s[0];x[0]=Math.min(h,(j+h)/2),x[1]=Math.max(h,(j+h)/2)}var N=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(e>N[0]&&e<=N[1]||e>=x[0]&&e<=x[1]){({index:o}=r[u]);break}}else{var A=Math.min(d,p),k=Math.max(d,p);if(e>(A+h)/2&&e<=(k+h)/2){({index:o}=r[u]);break}}}else if(t){for(var E=0;E<c;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<c-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===c-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:o}=t[E]);break}}return o},Z$=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:c}=t;if((c==="vertical"||c==="horizontal"&&o==="middle")&&i!=="center"&&_t(e[i]))return _i(_i({},e),{},{[i]:e[i]+(n||0)});if((c==="horizontal"||c==="vertical"&&i==="center")&&o!=="middle"&&_t(e[o]))return _i(_i({},e),{},{[o]:e[o]+(s||0)})}return e},Xu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",NP=(e,t,r,n)=>{if(n)return e.map(c=>c.coordinate);var s,i,o=e.map(c=>(c.coordinate===t&&(s=!0),c.coordinate===r&&(i=!0),c.coordinate));return s||o.push(t),i||o.push(r),o},jP=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:v,axisType:x}=e;if(!o)return null;var w=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,j=s==="category"&&o.bandwidth?o.bandwidth()/w:0;if(j=x==="angleAxis"&&i&&i.length>=2?Aa(i[0]-i[1])*2*j:j,p||v){var N=(p||v||[]).map((A,k)=>{var E=n?n.indexOf(A):A;return{coordinate:o(E)+j,value:A,offset:j,index:k}});return N.filter(A=>!Fi(A.coordinate))}return u&&d?d.map((A,k)=>({coordinate:o(A)+j,value:A,index:k,offset:j})):o.ticks&&h!=null?o.ticks(h).map((A,k)=>({coordinate:o(A)+j,value:A,offset:j,index:k})):o.domain().map((A,k)=>({coordinate:o(A)+j,value:n?n[A]:A,index:k,offset:j}))},Zj=1e-4,J$=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-Zj,i=Math.max(n[0],n[1])+Zj,o=e(t[0]),c=e(t[r-1]);(o<s||o>i||c<s||c>i)&&e.domain([t[0],t[r-1]])}},Q$=(e,t)=>{if(!t||t.length!==2||!_t(t[0])||!_t(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!_t(e[0])||e[0]<r)&&(s[0]=r),(!_t(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},eW=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var c=Fi(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+c,i=e[o][r][1])}},tW=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Fi(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},rW={sign:eW,expand:MU,none:Qd,silhouette:BU,wiggle:FU,positive:tW},nW=(e,t,r)=>{var n=rW[r],s=LU().keys(t).value((i,o)=>+An(i,o,0)).order(Bv).offset(n);return s(e)};function aW(e){return e==null?void 0:String(e)}var Jj=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var c=An(i,t.dataKey,t.scale.domain()[o]);return Ea(c)?null:t.scale(c)-s/2+n},sW=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},iW=e=>{var t=e.flat(2).filter(_t);return[Math.min(...t),Math.max(...t)]},oW=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],lW=(e,t,r)=>{if(e!=null)return oW(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,c=o.reduce((u,d)=>{var h=wP(d,t,r),p=iW(h);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},Qj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,e6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I5=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=T1(t,h=>h.coordinate),i=1/0,o=1,c=s.length;o<c;o++){var u=s[o],d=s[o-1];i=Math.min((u.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function t6(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return _i(_i({},t),{},{dataKey:r,payload:n,value:s,name:i})}function M1(e,t){if(e)return String(e);if(typeof t=="string")return t}function cW(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?V$({x:e,y:t},n):null}var uW=(e,t,r,n)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return _i(_i(_i({},n),ea(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var c=s.coordinate,{angle:u}=n;return _i(_i(_i({},n),ea(n.cx,n.cy,c,u)),{},{angle:u,radius:c})}return{x:0,y:0}},dW=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,$l=e=>e.layout.width,Wl=e=>e.layout.height,fW=e=>e.layout.scale,AP=e=>e.layout.margin,B1=Ue(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),F1=Ue(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),CP="data-recharts-item-index",SP="data-recharts-item-data-key",k0=60;function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(n){hW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hW(e,t,r){return(t=mW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mW(e){var t=pW(e,"string");return typeof t=="symbol"?t:t+""}function pW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gW=e=>e.brush.height;function xW(e){var t=F1(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:k0;return r+s}return r},0)}function yW(e){var t=F1(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:k0;return r+s}return r},0)}function vW(e){var t=B1(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function bW(e){var t=B1(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ha=Ue([$l,Wl,AP,gW,xW,yW,vW,bW,Vk,Fz],(e,t,r,n,s,i,o,c,u,d)=>{var h={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+o,bottom:(r.bottom||0)+c},v=Rm(Rm({},p),h),x=v.bottom;v.bottom+=n,v=Z$(v,u,d);var w=e-v.left-v.right,j=t-v.top-v.bottom;return Rm(Rm({brushBottom:x},v),{},{width:Math.max(w,0),height:Math.max(j,0)})}),wW=Ue(ha,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),T5=Ue($l,Wl,(e,t)=>({x:0,y:0,width:e,height:t})),NW=P.createContext(null),pi=()=>P.useContext(NW)!=null,U1=e=>e.brush,z1=Ue([U1,ha,AP],(e,t,r)=>({height:e.height,x:_t(e.x)?e.x:t.left,y:_t(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:_t(e.width)?e.width:t.width})),EP={},kP={},PP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,c=null;const u=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),h=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},p=()=>{d&&h(),j()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},n)},w=()=>{v!==null&&(clearTimeout(v),v=null)},j=()=>{w(),o=void 0,c=null},N=()=>{h()},A=function(...k){if(s!=null&&s.aborted)return;o=this,c=k;const E=v==null;x(),u&&E&&h()};return A.schedule=x,A.cancel=j,A.flush=N,s==null||s.addEventListener("abort",j,{once:!0}),A}e.debounce=t})(PP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PP;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:c=!0,maxWait:u}=i,d=Array(2);o&&(d[0]="leading"),c&&(d[1]="trailing");let h,p=null;const v=t.debounce(function(...j){h=n.apply(this,j),p=null},s,{edges:d}),x=function(...j){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(h=n.apply(this,j),p=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,j),h)},w=()=>(v.flush(),h);return x.cancel=v.cancel,x.flush=w,x}e.debounce=r})(kP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kP;function r(n,s=0,i={}){const{leading:o=!0,trailing:c=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:c})}e.throttle=r})(EP);var jW=EP.throttle;const AW=Wo(jW);var pg=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},IP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:o}=r,c=Dl(n)?e:Number(n),u=Dl(s)?t:Number(s);return i&&i>0&&(c?u=c/i:u&&(c=u*i),o&&u>o&&(u=o)),{calculatedWidth:c,calculatedHeight:u}},CW={width:0,height:0,overflow:"visible"},SW={width:0,overflowX:"visible"},EW={height:0,overflowY:"visible"},kW={},PW=e=>{var{width:t,height:r}=e,n=Dl(t),s=Dl(r);return n&&s?CW:n?SW:s?EW:kW};function IW(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function os(e){return Number.isFinite(e)}function rf(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(null,arguments)}function n6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n6(Object(r),!0).forEach(function(n){TW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TW(e,t,r){return(t=_W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _W(e){var t=OW(e,"string");return typeof t=="symbol"?t:t+""}function OW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TP=P.createContext({width:-1,height:-1});function _P(e){var{children:t,width:r,height:n}=e,s=P.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:P.createElement(TP.Provider,{value:s},t)}var _5=()=>P.useContext(TP),RW=P.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:o=0,minHeight:c,maxHeight:u,children:d,debounce:h=0,id:p,className:v,onResize:x,style:w={}}=e,j=P.useRef(null),N=P.useRef();N.current=x,P.useImperativeHandle(t,()=>j.current);var[A,k]=P.useState({containerWidth:n.width,containerHeight:n.height}),E=P.useCallback((U,L)=>{k(K=>{var z=Math.round(U),q=Math.round(L);return K.containerWidth===z&&K.containerHeight===q?K:{containerWidth:z,containerHeight:q}})},[]);P.useEffect(()=>{var U=q=>{var Q,{width:G,height:H}=q[0].contentRect;E(G,H),(Q=N.current)===null||Q===void 0||Q.call(N,G,H)};h>0&&(U=AW(U,h,{trailing:!0,leading:!1}));var L=new ResizeObserver(U),{width:K,height:z}=j.current.getBoundingClientRect();return E(K,z),L.observe(j.current),()=>{L.disconnect()}},[E,h]);var{containerWidth:_,containerHeight:O}=A;pg(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:B,calculatedHeight:F}=IP(_,O,{width:s,height:i,aspect:r,maxHeight:u});return pg(B>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,F,s,i,o,c,r),P.createElement("div",{id:p?"".concat(p):void 0,className:Ur("recharts-responsive-container",v),style:a6(a6({},w),{},{width:s,height:i,minWidth:o,minHeight:c,maxHeight:u}),ref:j},P.createElement("div",{style:PW({width:s,height:i})},P.createElement(_P,{width:B,height:F},d)))}),Yv=P.forwardRef((e,t)=>{var r=_5();if(rf(r.width)&&rf(r.height))return e.children;var{width:n,height:s}=IW({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=IP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return _t(i)&&_t(o)?P.createElement(_P,{width:i,height:o},e.children):P.createElement(RW,Xv({},e,{width:n,height:s,ref:t}))}),$1=()=>{var e,t=pi(),r=Pt(wW),n=Pt(z1),s=(e=Pt(U1))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},DW={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},OP=()=>{var e;return(e=Pt(ha))!==null&&e!==void 0?e:DW},O5=()=>Pt($l),R5=()=>Pt(Wl),LW=()=>Pt(e=>e.layout.margin),Cr=e=>e.layout.layoutType,D5=()=>Pt(Cr),W1=e=>{var t=yn(),r=pi(),{width:n,height:s}=e,i=_5(),o=n,c=s;return i&&(o=i.width>0?i.width:n,c=i.height>0?i.height:s),P.useEffect(()=>{!r&&rf(o)&&rf(c)&&t(D$({width:o,height:c}))},[t,r,o,c]),null},MW={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},RP=mi({name:"legend",initialState:MW,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:gs()},removeLegendPayload:{reducer(e,t){var r=kl(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:gs()}}}),{setLegendSize:s6,setLegendSettings:BW,addLegendPayload:DP,removeLegendPayload:LP}=RP.actions,FW=RP.reducer,UW=["contextPayload"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(null,arguments)}function i6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i6(Object(r),!0).forEach(function(n){L5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L5(e,t,r){return(t=zW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e){var t=$W(e,"string");return typeof t=="symbol"?t:t+""}function $W(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WW(e,t){if(e==null)return{};var r,n,s=qW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function HW(e){return e.value}function VW(e){var{contextPayload:t}=e,r=WW(e,UW),n=Dk(t,e.payloadUniqBy,HW),s=nf(nf({},r),{},{payload:n});return P.isValidElement(e.content)?P.cloneElement(e.content,s):typeof e.content=="function"?P.createElement(e.content,s):P.createElement(f5,s)}function GW(e,t,r,n,s,i){var{layout:o,align:c,verticalAlign:u}=t,d,h;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&o==="vertical"?d={left:((n||0)-i.width)/2}:d=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?h={top:((s||0)-i.height)/2}:h=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),nf(nf({},d),h)}function KW(e){var t=yn();return P.useEffect(()=>{t(BW(e))},[t,e]),null}function XW(e){var t=yn();return P.useEffect(()=>(t(s6(e)),()=>{t(s6({width:0,height:0}))}),[t,e]),null}function YW(e){var t=$z(),r=iU(),n=LW(),{width:s,height:i,wrapperStyle:o,portal:c}=e,[u,d]=Gk([t]),h=O5(),p=R5();if(h==null||p==null)return null;var v=h-(n.left||0)-(n.right||0),x=af.getWidthOrHeight(e.layout,i,s,v),w=c?o:nf(nf({position:"absolute",width:(x==null?void 0:x.width)||s||"auto",height:(x==null?void 0:x.height)||i||"auto"},GW(o,e,n,h,p,u)),o),j=c??r;if(j==null)return null;var N=P.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:d},P.createElement(KW,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),P.createElement(XW,{width:u.width,height:u.height}),P.createElement(VW,Zv({},e,x,{margin:n,chartWidth:h,chartHeight:p,contextPayload:t})));return Jw.createPortal(N,j)}class af extends P.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&_t(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return P.createElement(YW,this.props)}}L5(af,"displayName","Legend");L5(af,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jv.apply(null,arguments)}function o6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o6(Object(r),!0).forEach(function(n){ZW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZW(e,t,r){return(t=JW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JW(e){var t=QW(e,"string");return typeof t=="symbol"?t:t+""}function QW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eq(e){return Array.isArray(e)&&zo(e[0])&&zo(e[1])?e.join(" ~ "):e}var tq=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:v=!1}=e,x=()=>{if(i&&i.length){var O={padding:0,margin:0},B=(c?T1(i,c):i).map((F,U)=>{if(F.type==="none")return null;var L=F.formatter||o||eq,{value:K,name:z}=F,q=K,Q=z;if(L){var G=L(K,z,F,U,i);if(Array.isArray(G))[q,Q]=G;else if(G!=null)q=G;else return null}var H=R2({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},n);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:H},zo(Q)?P.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,zo(Q)?P.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,P.createElement("span",{className:"recharts-tooltip-item-value"},q),P.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:O},B)}return null},w=R2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=R2({margin:0},s),N=!Ea(h),A=N?h:"",k=Ur("recharts-default-tooltip",u),E=Ur("recharts-tooltip-label",d);N&&p&&i!==void 0&&i!==null&&(A=p(h,i));var _=v?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",Jv({className:k,style:w},_),P.createElement("p",{className:E,style:j},P.isValidElement(A)?A:"".concat(A)),x())},eh="recharts-tooltip-wrapper",rq={visibility:"hidden"};function nq(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ur(eh,{["".concat(eh,"-right")]:_t(r)&&t&&_t(t.x)&&r>=t.x,["".concat(eh,"-left")]:_t(r)&&t&&_t(t.x)&&r<t.x,["".concat(eh,"-bottom")]:_t(n)&&t&&_t(t.y)&&n>=t.y,["".concat(eh,"-top")]:_t(n)&&t&&_t(t.y)&&n<t.y})}function l6(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:d}=e;if(i&&_t(i[n]))return i[n];var h=r[n]-c-(s>0?s:0),p=r[n]+s;if(t[n])return o[n]?h:p;var v=u[n];if(v==null)return 0;if(o[n]){var x=h,w=v;return x<w?Math.max(p,v):Math.max(h,v)}if(d==null)return 0;var j=p+c,N=v+d;return j>N?Math.max(h,v):Math.max(p,v)}function aq(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function sq(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:c,viewBox:u}=e,d,h,p;return o.height>0&&o.width>0&&r?(h=l6({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=l6({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=aq({translateX:h,translateY:p,useTranslate3d:c})):d=rq,{cssProperties:d,cssClasses:nq({translateX:h,translateY:p,coordinate:r})}}function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(n){Qv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qv(e,t,r){return(t=iq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iq(e){var t=oq(e,"string");return typeof t=="symbol"?t:t+""}function oq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lq extends P.PureComponent{constructor(){super(...arguments),Qv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Qv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:c,isAnimationActive:u,offset:d,position:h,reverseDirection:p,useTranslate3d:v,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:N,hasPortalFromProps:A}=this.props,{cssClasses:k,cssProperties:E}=sq({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:v,viewBox:x}),_=A?{}:Dm(Dm({transition:u&&t?"transform ".concat(n,"ms ").concat(s):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),O=Dm(Dm({},_),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},w);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:O,ref:N},i)}}var cq=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Yu={devToolsEnabled:!1,isSsr:cq()},MP=()=>Pt(e=>e.rootProps.accessibilityLayer);function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eb.apply(null,arguments)}function u6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u6(Object(r),!0).forEach(function(n){uq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uq(e,t,r){return(t=dq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dq(e){var t=fq(e,"string");return typeof t=="symbol"?t:t+""}function fq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f6={curveBasisClosed:CU,curveBasisOpen:SU,curveBasis:AU,curveBumpX:uU,curveBumpY:dU,curveLinearClosed:EU,curveLinear:A1,curveMonotoneX:kU,curveMonotoneY:PU,curveNatural:IU,curveStep:TU,curveStepAfter:OU,curveStepBefore:_U},Lm=e=>os(e.x)&&os(e.y),th=e=>e.x,rh=e=>e.y,hq=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(A0(e));return(r==="curveMonotone"||r==="curveBump")&&t?f6["".concat(r).concat(t==="vertical"?"Y":"X")]:f6[r]||A1},mq=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=hq(t,s),c=i?r.filter(Lm):r,u;if(Array.isArray(n)){var d=i?n.filter(p=>Lm(p)):n,h=c.map((p,v)=>d6(d6({},p),{},{base:d[v]}));return s==="vertical"?u=km().y(rh).x1(th).x0(p=>p.base.x):u=km().x(th).y1(rh).y0(p=>p.base.y),u.defined(Lm).curve(o),u(h)}return s==="vertical"&&_t(n)?u=km().y(rh).x1(th).x0(n):_t(n)?u=km().x(th).y1(rh).y0(n):u=ak().x(th).y(rh),u.defined(Lm).curve(o),u(c)},BP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?mq(e):n;return P.createElement("path",eb({},mo(e),QU(e),{className:Ur("recharts-curve",t),d:i===null?void 0:i,ref:s}))},pq=["x","y","top","left","width","height","className"];function tb(){return tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tb.apply(null,arguments)}function h6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(r),!0).forEach(function(n){xq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xq(e,t,r){return(t=yq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yq(e){var t=vq(e,"string");return typeof t=="symbol"?t:t+""}function vq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bq(e,t){if(e==null)return{};var r,n,s=wq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Nq=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),jq=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:c}=e,u=bq(e,pq),d=gq({x:t,y:r,top:n,left:s,width:i,height:o},u);return!_t(t)||!_t(r)||!_t(i)||!_t(o)||!_t(n)||!_t(s)?null:P.createElement("path",tb({},Bi(d),{className:Ur("recharts-cross",c),d:Nq(t,r,i,o,n,s)}))};function Aq(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function m6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m6(Object(r),!0).forEach(function(n){Sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sq(e,t,r){return(t=Eq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eq(e){var t=kq(e,"string");return typeof t=="symbol"?t:t+""}function kq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ns(e,t){var r=Cq({},e),n=t,s=Object.keys(t),i=s.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return i}function Pq(){}function Iq(e){return e!=null}function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(n){Tq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tq(e,t,r){return(t=_q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _q(e){var t=Oq(e,"string");return typeof t=="symbol"?t:t+""}function Oq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rq=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),FP=(e,t,r)=>e.map(n=>"".concat(Rq(n)," ").concat(t,"ms ").concat(r)).join(","),Dq=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),o0=(e,t)=>Object.keys(t).reduce((r,n)=>g6(g6({},r),{},{[n]:e(n,t[n])}),{});function x6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x6(Object(r),!0).forEach(function(n){Lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lq(e,t,r){return(t=Mq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gg=(e,t,r)=>e+(t-e)*r,rb=e=>{var{from:t,to:r}=e;return t!==r},UP=(e,t,r)=>{var n=o0((s,i)=>{if(rb(i)){var[o,c]=e(i.from,i.to,i.velocity);return Fa(Fa({},i),{},{from:o,velocity:c})}return i},t);return r<1?o0((s,i)=>rb(i)?Fa(Fa({},i),{},{velocity:gg(i.velocity,n[s].velocity,r),from:gg(i.from,n[s].from,r)}):i,t):UP(e,n,r-1)};function Fq(e,t,r,n,s,i){var o,c=n.reduce((v,x)=>Fa(Fa({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),u=()=>o0((v,x)=>x.from,c),d=()=>!Object.values(c).filter(rb).length,h=null,p=v=>{o||(o=v);var x=v-o,w=x/r.dt;c=UP(r,c,w),s(Fa(Fa(Fa({},e),t),u())),o=v,d()||(h=i.setTimeout(p))};return()=>(h=i.setTimeout(p),()=>{h()})}function Uq(e,t,r,n,s,i,o){var c=null,u=s.reduce((p,v)=>Fa(Fa({},p),{},{[v]:[e[v],t[v]]}),{}),d,h=p=>{d||(d=p);var v=(p-d)/n,x=o0((j,N)=>gg(...N,r(v)),u);if(i(Fa(Fa(Fa({},e),t),x)),v<1)c=o.setTimeout(h);else{var w=o0((j,N)=>gg(...N,r(1)),u);i(Fa(Fa(Fa({},e),t),w))}};return()=>(c=o.setTimeout(h),()=>{c()})}const zq=(e,t,r,n,s,i)=>{var o=Dq(e,t);return r.isStepper===!0?Fq(e,t,r,o,s,i):Uq(e,t,r,n,o,s,i)};var xg=1e-4,zP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],$P=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),y6=(e,t)=>r=>{var n=zP(e,t);return $P(n,r)},$q=(e,t)=>r=>{var n=zP(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return $P(s,r)},v6=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([t,n,r,s]=u[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else o.length===4&&([t,n,r,s]=o);var d=y6(t,r),h=y6(n,s),p=$q(t,r),v=w=>w>1?1:w<0?0:w,x=w=>{for(var j=w>1?1:w,N=j,A=0;A<8;++A){var k=d(N)-j,E=p(N);if(Math.abs(k-j)<xg||E<xg)return h(N);N=v(N-k/E)}return h(N)};return x.isStepper=!1,x},Wq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,c,u)=>{var d=-(o-c)*r,h=u*n,p=u+(d-h)*s/1e3,v=u*s/1e3+o;return Math.abs(v-c)<xg&&Math.abs(p)<xg?[c,0]:[v,p]};return i.isStepper=!0,i.dt=s,i},qq=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return v6(e);case"spring":return Wq();default:if(e.split("(")[0]==="cubic-bezier")return v6(e)}return typeof e=="function"?e:null};function Hq(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...d]=c;if(typeof u=="number"){s=e.setTimeout(i.bind(null,d),u);return}i(u),s=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class Vq{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function Gq(){return Hq(new Vq)}var Kq=P.createContext(Gq);function Xq(e,t){var r=P.useContext(Kq);return P.useMemo(()=>t??r(e),[e,t,r])}var Yq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},b6={t:0},D2={t:1};function q1(e){var t=Ns(e,Yq),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:c,onAnimationStart:u,children:d}=t,h=Xq(t.animationId,t.animationManager),[p,v]=P.useState(r?b6:D2),x=P.useRef(null);return P.useEffect(()=>{r||v(D2)},[r]),P.useEffect(()=>{if(!r||!n)return Pq;var w=zq(b6,D2,qq(i),s,v,h.getTimeoutController()),j=()=>{x.current=w()};return h.start([u,o,j,s,c]),()=>{h.stop(),x.current&&x.current(),c()}},[r,n,s,i,o,u,c,h]),d(p.t)}function H1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=P.useRef(a0(t)),n=P.useRef(e);return n.current!==e&&(r.current=a0(t),n.current=e),r.current}var Zq=["radius"],Jq=["radius"];function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function N6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(n){Qq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qq(e,t,r){return(t=eH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eH(e){var t=tH(e,"string");return typeof t=="symbol"?t:t+""}function tH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yg(){return yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yg.apply(null,arguments)}function j6(e,t){if(e==null)return{};var r,n,s=rH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var A6=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,c=r>=0?1:-1,u=n>=0&&r>=0||n<0&&r<0?1:0,d;if(i>0&&s instanceof Array){for(var h=[0,0,0,0],p=0,v=4;p<v;p++)h[p]=s[p]>i?i:s[p];d="M".concat(e,",").concat(t+o*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(t)),d+="L ".concat(e+r-c*h[1],",").concat(t),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(t+o*h[1])),d+="L ".concat(e+r,",").concat(t+n-o*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(t+n)),d+="L ".concat(e+c*h[3],",").concat(t+n),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+n-o*h[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);d="M ".concat(e,",").concat(t+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+c*x,",").concat(t,`
            L `).concat(e+r-c*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+r,",").concat(t+o*x,`
            L `).concat(e+r,",").concat(t+n-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e+r-c*x,",").concat(t+n,`
            L `).concat(e+c*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(e,",").concat(t+n-o*x," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},nH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WP=e=>{var t=Ns(e,nH),r=P.useRef(null),[n,s]=P.useState(-1);P.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ye=r.current.getTotalLength();ye&&s(ye)}catch{}},[]);var{x:i,y:o,width:c,height:u,radius:d,className:h}=t,{animationEasing:p,animationDuration:v,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,N=P.useRef(c),A=P.useRef(u),k=P.useRef(i),E=P.useRef(o),_=P.useMemo(()=>({x:i,y:o,width:c,height:u,radius:d}),[i,o,c,u,d]),O=H1(_,"rectangle-");if(i!==+i||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var B=Ur("recharts-rectangle",h);if(!j){var F=Bi(t),{radius:U}=F,L=j6(F,Zq);return P.createElement("path",yg({},L,{radius:typeof d=="number"?d:void 0,className:B,d:A6(i,o,c,u,d)}))}var K=N.current,z=A.current,q=k.current,Q=E.current,G="0px ".concat(n===-1?1:n,"px"),H="".concat(n,"px 0px"),ue=FP(["strokeDasharray"],v,typeof p=="string"?p:void 0);return P.createElement(q1,{animationId:O,key:O,canBegin:n>0,duration:v,easing:p,isActive:j,begin:x},ye=>{var de=Ua(K,c,ye),we=Ua(z,u,ye),Ee=Ua(q,i,ye),ie=Ua(Q,o,ye);r.current&&(N.current=de,A.current=we,k.current=Ee,E.current=ie);var V;w?ye>0?V={transition:ue,strokeDasharray:H}:V={strokeDasharray:G}:V={strokeDasharray:H};var se=Bi(t),{radius:ne}=se,ve=j6(se,Jq);return P.createElement("path",yg({},ve,{radius:typeof d=="number"?d:void 0,className:B,d:A6(Ee,ie,de,we,d),ref:r,style:N6(N6({},V),t.style)}))})};function qP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=ea(t,r,n,s),c=ea(t,r,n,i);return{points:[o,c],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function nb(){return nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nb.apply(null,arguments)}var aH=(e,t)=>{var r=Aa(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Mm=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:c,cornerIsExternal:u}=e,d=c*(o?1:-1)+n,h=Math.asin(c/d)/mg,p=u?s:s+i*h,v=ea(t,r,d,p),x=ea(t,r,n,p),w=u?s-i*h:s,j=ea(t,r,d*Math.cos(h*mg),w);return{center:v,circleTangency:x,lineTangency:j,theta:h}},HP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,c=aH(i,o),u=i+c,d=ea(t,r,s,i),h=ea(t,r,s,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(n>0){var v=ea(t,r,n,i),x=ea(t,r,n,u);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=u),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},sH=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}=e,h=Aa(d-u),{circleTangency:p,lineTangency:v,theta:x}=Mm({cx:t,cy:r,radius:s,angle:u,sign:h,cornerRadius:i,cornerIsExternal:c}),{circleTangency:w,lineTangency:j,theta:N}=Mm({cx:t,cy:r,radius:s,angle:d,sign:-h,cornerRadius:i,cornerIsExternal:c}),A=c?Math.abs(u-d):Math.abs(u-d)-x-N;if(A<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):HP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:u,endAngle:d});var k="M ".concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
  `);if(n>0){var{circleTangency:E,lineTangency:_,theta:O}=Mm({cx:t,cy:r,radius:n,angle:u,sign:h,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),{circleTangency:B,lineTangency:F,theta:U}=Mm({cx:t,cy:r,radius:n,angle:d,sign:-h,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),L=c?Math.abs(u-d):Math.abs(u-d)-O-U;if(L<0&&i===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},iH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VP=e=>{var t=Ns(e,iH),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h,className:p}=t;if(i<s||d===h)return null;var v=Ur("recharts-sector",p),x=i-s,w=ss(o,x,0,!0),j;return w>0&&Math.abs(d-h)<360?j=sH({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(w,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):j=HP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:h}),P.createElement("path",nb({},Bi(t),{className:v,d:j}))};function oH(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:c,cy:u,innerRadius:d,outerRadius:h,angle:p}=t,v=ea(c,u,d,p),x=ea(c,u,h,p);n=v.x,s=v.y,i=x.x,o=x.y}else return qP(t);return[{x:n,y:s},{x:i,y:o}]}var GP={},KP={},XP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j5;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(XP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XP;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(KP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5,r=KP;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((i-s)/(o||1)),0),u=new Array(c);for(let d=0;d<c;d++)u[d]=s,s+=o;return u}e.range=n})(GP);var lH=GP.range;const YP=Wo(lH);function Tc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function M5(e){let t,r,n;e.length!==2?(t=Tc,r=(c,u)=>Tc(e(c),u),n=(c,u)=>e(c)-u):(t=e===Tc||e===cH?e:uH,r=e,n=e);function s(c,u,d=0,h=c.length){if(d<h){if(t(u,u)!==0)return h;do{const p=d+h>>>1;r(c[p],u)<0?d=p+1:h=p}while(d<h)}return d}function i(c,u,d=0,h=c.length){if(d<h){if(t(u,u)!==0)return h;do{const p=d+h>>>1;r(c[p],u)<=0?d=p+1:h=p}while(d<h)}return d}function o(c,u,d=0,h=c.length){const p=s(c,u,d,h-1);return p>d&&n(c[p-1],u)>-n(c[p],u)?p-1:p}return{left:s,center:o,right:i}}function uH(){return 0}function ZP(e){return e===null?NaN:+e}function*dH(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const fH=M5(Tc),P0=fH.right;M5(ZP).center;class C6 extends Map{constructor(t,r=pH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(S6(this,t))}has(t){return super.has(S6(this,t))}set(t,r){return super.set(hH(this,t),r)}delete(t){return super.delete(mH(this,t))}}function S6({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function hH({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function mH({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function pH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gH(e=Tc){if(e===Tc)return JP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function JP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const xH=Math.sqrt(50),yH=Math.sqrt(10),vH=Math.sqrt(2);function vg(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=xH?10:i>=yH?5:i>=vH?2:1;let c,u,d;return s<0?(d=Math.pow(10,-s)/o,c=Math.round(e*d),u=Math.round(t*d),c/d<e&&++c,u/d>t&&--u,d=-d):(d=Math.pow(10,s)*o,c=Math.round(e/d),u=Math.round(t/d),c*d<e&&++c,u*d>t&&--u),u<c&&.5<=r&&r<2?vg(e,t,r*2):[c,u,d]}function ab(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?vg(t,e,r):vg(e,t,r);if(!(i>=s))return[];const c=i-s+1,u=new Array(c);if(n)if(o<0)for(let d=0;d<c;++d)u[d]=(i-d)/-o;else for(let d=0;d<c;++d)u[d]=(i-d)*o;else if(o<0)for(let d=0;d<c;++d)u[d]=(s+d)/-o;else for(let d=0;d<c;++d)u[d]=(s+d)*o;return u}function sb(e,t,r){return t=+t,e=+e,r=+r,vg(e,t,r)[2]}function ib(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?sb(t,e,r):sb(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function E6(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function k6(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function QP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?JP:gH(s);n>r;){if(n-r>600){const u=n-r+1,d=t-r+1,h=Math.log(u),p=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*p*(u-p)/u)*(d-u/2<0?-1:1),x=Math.max(r,Math.floor(t-d*p/u+v)),w=Math.min(n,Math.floor(t+(u-d)*p/u+v));QP(e,t,x,w,s)}const i=e[t];let o=r,c=n;for(nh(e,r,t),s(e[n],i)>0&&nh(e,r,n);o<c;){for(nh(e,o,c),++o,--c;s(e[o],i)<0;)++o;for(;s(e[c],i)>0;)--c}s(e[r],i)===0?nh(e,r,c):(++c,nh(e,c,n)),c<=t&&(r=c+1),t<=c&&(n=c-1)}return e}function nh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bH(e,t,r){if(e=Float64Array.from(dH(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return k6(e);if(t>=1)return E6(e);var n,s=(n-1)*t,i=Math.floor(s),o=E6(QP(e,i).subarray(0,i+1)),c=k6(e.subarray(i+1));return o+(c-o)*(s-i)}}function wH(e,t,r=ZP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),c=+r(e[i+1],i+1,e);return o+(c-o)*(s-i)}}function NH(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Wi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ql(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ob=Symbol("implicit");function B5(){var e=new C6,t=[],r=[],n=ob;function s(i){let o=e.get(i);if(o===void 0){if(n!==ob)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new C6;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return B5(t,r).unknown(n)},Wi.apply(s,arguments),s}function F5(){var e=B5().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,c=!1,u=0,d=0,h=.5;delete e.unknown;function p(){var v=t().length,x=s<n,w=x?s:n,j=x?n:s;i=(j-w)/Math.max(1,v-u+d*2),c&&(i=Math.floor(i)),w+=(j-w-i*(v-u))*h,o=i*(1-u),c&&(w=Math.round(w),o=Math.round(o));var N=NH(v).map(function(A){return w+i*A});return r(x?N.reverse():N)}return e.domain=function(v){return arguments.length?(t(v),p()):t()},e.range=function(v){return arguments.length?([n,s]=v,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(v){return[n,s]=v,n=+n,s=+s,c=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(v){return arguments.length?(c=!!v,p()):c},e.padding=function(v){return arguments.length?(u=Math.min(1,d=+v),p()):u},e.paddingInner=function(v){return arguments.length?(u=Math.min(1,v),p()):u},e.paddingOuter=function(v){return arguments.length?(d=+v,p()):d},e.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),p()):h},e.copy=function(){return F5(t(),[n,s]).round(c).paddingInner(u).paddingOuter(d).align(h)},Wi.apply(p(),arguments)}function eI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eI(t())},e}function jH(){return eI(F5.apply(null,arguments).paddingInner(1))}function U5(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tI(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function I0(){}var l0=.7,bg=1/l0,Ud="\\s*([+-]?\\d+)\\s*",c0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AH=/^#([0-9a-f]{3,8})$/,CH=new RegExp(`^rgb\\(${Ud},${Ud},${Ud}\\)$`),SH=new RegExp(`^rgb\\(${Bo},${Bo},${Bo}\\)$`),EH=new RegExp(`^rgba\\(${Ud},${Ud},${Ud},${c0}\\)$`),kH=new RegExp(`^rgba\\(${Bo},${Bo},${Bo},${c0}\\)$`),PH=new RegExp(`^hsl\\(${c0},${Bo},${Bo}\\)$`),IH=new RegExp(`^hsla\\(${c0},${Bo},${Bo},${c0}\\)$`),P6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U5(I0,u0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:I6,formatHex:I6,formatHex8:TH,formatHsl:_H,formatRgb:T6,toString:T6});function I6(){return this.rgb().formatHex()}function TH(){return this.rgb().formatHex8()}function _H(){return rI(this).formatHsl()}function T6(){return this.rgb().formatRgb()}function u0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=AH.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_6(t):r===3?new Os(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Bm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Bm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=CH.exec(e))?new Os(t[1],t[2],t[3],1):(t=SH.exec(e))?new Os(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=EH.exec(e))?Bm(t[1],t[2],t[3],t[4]):(t=kH.exec(e))?Bm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=PH.exec(e))?D6(t[1],t[2]/100,t[3]/100,1):(t=IH.exec(e))?D6(t[1],t[2]/100,t[3]/100,t[4]):P6.hasOwnProperty(e)?_6(P6[e]):e==="transparent"?new Os(NaN,NaN,NaN,0):null}function _6(e){return new Os(e>>16&255,e>>8&255,e&255,1)}function Bm(e,t,r,n){return n<=0&&(e=t=r=NaN),new Os(e,t,r,n)}function OH(e){return e instanceof I0||(e=u0(e)),e?(e=e.rgb(),new Os(e.r,e.g,e.b,e.opacity)):new Os}function lb(e,t,r,n){return arguments.length===1?OH(e):new Os(e,t,r,n??1)}function Os(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}U5(Os,lb,tI(I0,{brighter(e){return e=e==null?bg:Math.pow(bg,e),new Os(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?l0:Math.pow(l0,e),new Os(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Os(wu(this.r),wu(this.g),wu(this.b),wg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:O6,formatHex:O6,formatHex8:RH,formatRgb:R6,toString:R6}));function O6(){return`#${fu(this.r)}${fu(this.g)}${fu(this.b)}`}function RH(){return`#${fu(this.r)}${fu(this.g)}${fu(this.b)}${fu((isNaN(this.opacity)?1:this.opacity)*255)}`}function R6(){const e=wg(this.opacity);return`${e===1?"rgb(":"rgba("}${wu(this.r)}, ${wu(this.g)}, ${wu(this.b)}${e===1?")":`, ${e})`}`}function wg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fu(e){return e=wu(e),(e<16?"0":"")+e.toString(16)}function D6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new lo(e,t,r,n)}function rI(e){if(e instanceof lo)return new lo(e.h,e.s,e.l,e.opacity);if(e instanceof I0||(e=u0(e)),!e)return new lo;if(e instanceof lo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,c=i-s,u=(i+s)/2;return c?(t===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-t)/c+2:o=(t-r)/c+4,c/=u<.5?i+s:2-i-s,o*=60):c=u>0&&u<1?0:o,new lo(o,c,u,e.opacity)}function DH(e,t,r,n){return arguments.length===1?rI(e):new lo(e,t,r,n??1)}function lo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}U5(lo,DH,tI(I0,{brighter(e){return e=e==null?bg:Math.pow(bg,e),new lo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?l0:Math.pow(l0,e),new lo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Os(L2(e>=240?e-240:e+120,s,n),L2(e,s,n),L2(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new lo(L6(this.h),Fm(this.s),Fm(this.l),wg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wg(this.opacity);return`${e===1?"hsl(":"hsla("}${L6(this.h)}, ${Fm(this.s)*100}%, ${Fm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function L6(e){return e=(e||0)%360,e<0?e+360:e}function Fm(e){return Math.max(0,Math.min(1,e||0))}function L2(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const z5=e=>()=>e;function LH(e,t){return function(r){return e+r*t}}function MH(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function BH(e){return(e=+e)==1?nI:function(t,r){return r-t?MH(t,r,e):z5(isNaN(t)?r:t)}}function nI(e,t){var r=t-e;return r?LH(e,r):z5(isNaN(e)?t:e)}const M6=function e(t){var r=BH(t);function n(s,i){var o=r((s=lb(s)).r,(i=lb(i)).r),c=r(s.g,i.g),u=r(s.b,i.b),d=nI(s.opacity,i.opacity);return function(h){return s.r=o(h),s.g=c(h),s.b=u(h),s.opacity=d(h),s+""}}return n.gamma=e,n}(1);function FH(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function UH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function zH(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Af(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(c){for(o=0;o<n;++o)i[o]=s[o](c);return i}}function $H(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ng(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function WH(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Af(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var cb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M2=new RegExp(cb.source,"g");function qH(e){return function(){return e}}function HH(e){return function(t){return e(t)+""}}function VH(e,t){var r=cb.lastIndex=M2.lastIndex=0,n,s,i,o=-1,c=[],u=[];for(e=e+"",t=t+"";(n=cb.exec(e))&&(s=M2.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(s=s[0])?c[o]?c[o]+=s:c[++o]=s:(c[++o]=null,u.push({i:o,x:Ng(n,s)})),r=M2.lastIndex;return r<t.length&&(i=t.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?u[0]?HH(u[0].x):qH(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)c[(p=u[h]).i]=p.x(d);return c.join("")})}function Af(e,t){var r=typeof t,n;return t==null||r==="boolean"?z5(t):(r==="number"?Ng:r==="string"?(n=u0(t))?(t=n,M6):VH:t instanceof u0?M6:t instanceof Date?$H:UH(t)?FH:Array.isArray(t)?zH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?WH:Ng)(e,t)}function $5(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function GH(e,t){t===void 0&&(t=e,e=Af);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function KH(e){return function(){return e}}function jg(e){return+e}var B6=[0,1];function ys(e){return e}function ub(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:KH(isNaN(t)?NaN:.5)}function XH(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function YH(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=ub(s,n),i=r(o,i)):(n=ub(n,s),i=r(i,o)),function(c){return i(n(c))}}function ZH(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=ub(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(c){var u=P0(e,c,1,n)-1;return i[u](s[u](c))}}function T0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function V1(){var e=B6,t=B6,r=Af,n,s,i,o=ys,c,u,d;function h(){var v=Math.min(e.length,t.length);return o!==ys&&(o=XH(e[0],e[v-1])),c=v>2?ZH:YH,u=d=null,p}function p(v){return v==null||isNaN(v=+v)?i:(u||(u=c(e.map(n),t,r)))(n(o(v)))}return p.invert=function(v){return o(s((d||(d=c(t,e.map(n),Ng)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,jg),h()):e.slice()},p.range=function(v){return arguments.length?(t=Array.from(v),h()):t.slice()},p.rangeRound=function(v){return t=Array.from(v),r=$5,h()},p.clamp=function(v){return arguments.length?(o=v?!0:ys,h()):o!==ys},p.interpolate=function(v){return arguments.length?(r=v,h()):r},p.unknown=function(v){return arguments.length?(i=v,p):i},function(v,x){return n=v,s=x,h()}}function W5(){return V1()(ys,ys)}function JH(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ag(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function sf(e){return e=Ag(Math.abs(e)),e?e[1]:NaN}function QH(e,t){return function(r,n){for(var s=r.length,i=[],o=0,c=e[0],u=0;s>0&&c>0&&(u+c+1>n&&(c=Math.max(1,n-u)),i.push(r.substring(s-=c,s+c)),!((u+=c+1)>n));)c=e[o=(o+1)%e.length];return i.reverse().join(t)}}function eV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var tV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d0(e){if(!(t=tV.exec(e)))throw new Error("invalid format: "+e);var t;return new q5({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}d0.prototype=q5.prototype;function q5(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}q5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rV(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var aI;function nV(e,t){var r=Ag(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(aI=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ag(e,Math.max(0,t+i-1))[0]}function F6(e,t){var r=Ag(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const U6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:JH,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F6(e*100,t),r:F6,s:nV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function z6(e){return e}var $6=Array.prototype.map,W6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aV(e){var t=e.grouping===void 0||e.thousands===void 0?z6:QH($6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?z6:eV($6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function d(p){p=d0(p);var v=p.fill,x=p.align,w=p.sign,j=p.symbol,N=p.zero,A=p.width,k=p.comma,E=p.precision,_=p.trim,O=p.type;O==="n"?(k=!0,O="g"):U6[O]||(E===void 0&&(E=12),_=!0,O="g"),(N||v==="0"&&x==="=")&&(N=!0,v="0",x="=");var B=j==="$"?r:j==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",F=j==="$"?n:/[%p]/.test(O)?o:"",U=U6[O],L=/[defgprs%]/.test(O);E=E===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function K(z){var q=B,Q=F,G,H,ue;if(O==="c")Q=U(z)+Q,z="";else{z=+z;var ye=z<0||1/z<0;if(z=isNaN(z)?u:U(Math.abs(z),E),_&&(z=rV(z)),ye&&+z==0&&w!=="+"&&(ye=!1),q=(ye?w==="("?w:c:w==="-"||w==="("?"":w)+q,Q=(O==="s"?W6[8+aI/3]:"")+Q+(ye&&w==="("?")":""),L){for(G=-1,H=z.length;++G<H;)if(ue=z.charCodeAt(G),48>ue||ue>57){Q=(ue===46?s+z.slice(G+1):z.slice(G))+Q,z=z.slice(0,G);break}}}k&&!N&&(z=t(z,1/0));var de=q.length+z.length+Q.length,we=de<A?new Array(A-de+1).join(v):"";switch(k&&N&&(z=t(we+z,we.length?A-Q.length:1/0),we=""),x){case"<":z=q+z+Q+we;break;case"=":z=q+we+z+Q;break;case"^":z=we.slice(0,de=we.length>>1)+q+z+Q+we.slice(de);break;default:z=we+q+z+Q;break}return i(z)}return K.toString=function(){return p+""},K}function h(p,v){var x=d((p=d0(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(sf(v)/3)))*3,j=Math.pow(10,-w),N=W6[8+w/3];return function(A){return x(j*A)+N}}return{format:d,formatPrefix:h}}var Um,H5,sI;sV({thousands:",",grouping:[3],currency:["$",""]});function sV(e){return Um=aV(e),H5=Um.format,sI=Um.formatPrefix,Um}function iV(e){return Math.max(0,-sf(Math.abs(e)))}function oV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sf(t)/3)))*3-sf(Math.abs(e)))}function lV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sf(t)-sf(e))+1}function iI(e,t,r,n){var s=ib(e,t,r),i;switch(n=d0(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=oV(s,o))&&(n.precision=i),sI(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=lV(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=iV(s))&&(n.precision=i-(n.type==="%")*2);break}}return H5(n)}function Wc(e){var t=e.domain;return e.ticks=function(r){var n=t();return ab(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return iI(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],c=n[i],u,d,h=10;for(c<o&&(d=o,o=c,c=d,d=s,s=i,i=d);h-- >0;){if(d=sb(o,c,r),d===u)return n[s]=o,n[i]=c,t(n);if(d>0)o=Math.floor(o/d)*d,c=Math.ceil(c/d)*d;else if(d<0)o=Math.ceil(o*d)/d,c=Math.floor(c*d)/d;else break;u=d}return e},e}function oI(){var e=W5();return e.copy=function(){return T0(e,oI())},Wi.apply(e,arguments),Wc(e)}function lI(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,jg),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return lI(e).unknown(t)},e=arguments.length?Array.from(e,jg):[0,1],Wc(r)}function cI(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function q6(e){return Math.log(e)}function H6(e){return Math.exp(e)}function cV(e){return-Math.log(-e)}function uV(e){return-Math.exp(-e)}function dV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fV(e){return e===10?dV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function hV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function V6(e){return(t,r)=>-e(-t,r)}function V5(e){const t=e(q6,H6),r=t.domain;let n=10,s,i;function o(){return s=hV(n),i=fV(n),r()[0]<0?(s=V6(s),i=V6(i),e(cV,uV)):e(q6,H6),t}return t.base=function(c){return arguments.length?(n=+c,o()):n},t.domain=function(c){return arguments.length?(r(c),o()):r()},t.ticks=c=>{const u=r();let d=u[0],h=u[u.length-1];const p=h<d;p&&([d,h]=[h,d]);let v=s(d),x=s(h),w,j;const N=c==null?10:+c;let A=[];if(!(n%1)&&x-v<N){if(v=Math.floor(v),x=Math.ceil(x),d>0){for(;v<=x;++v)for(w=1;w<n;++w)if(j=v<0?w/i(-v):w*i(v),!(j<d)){if(j>h)break;A.push(j)}}else for(;v<=x;++v)for(w=n-1;w>=1;--w)if(j=v>0?w/i(-v):w*i(v),!(j<d)){if(j>h)break;A.push(j)}A.length*2<N&&(A=ab(d,h,N))}else A=ab(v,x,Math.min(x-v,N)).map(i);return p?A.reverse():A},t.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=d0(u)).precision==null&&(u.trim=!0),u=H5(u)),c===1/0)return u;const d=Math.max(1,n*c/t.ticks().length);return h=>{let p=h/i(Math.round(s(h)));return p*n<n-.5&&(p*=n),p<=d?u(h):""}},t.nice=()=>r(cI(r(),{floor:c=>i(Math.floor(s(c))),ceil:c=>i(Math.ceil(s(c)))})),t}function uI(){const e=V5(V1()).domain([1,10]);return e.copy=()=>T0(e,uI()).base(e.base()),Wi.apply(e,arguments),e}function G6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function K6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function G5(e){var t=1,r=e(G6(t),K6(t));return r.constant=function(n){return arguments.length?e(G6(t=+n),K6(t)):t},Wc(r)}function dI(){var e=G5(V1());return e.copy=function(){return T0(e,dI()).constant(e.constant())},Wi.apply(e,arguments)}function X6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pV(e){return e<0?-e*e:e*e}function K5(e){var t=e(ys,ys),r=1;function n(){return r===1?e(ys,ys):r===.5?e(mV,pV):e(X6(r),X6(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Wc(t)}function X5(){var e=K5(V1());return e.copy=function(){return T0(e,X5()).exponent(e.exponent())},Wi.apply(e,arguments),e}function gV(){return X5.apply(null,arguments).exponent(.5)}function Y6(e){return Math.sign(e)*e*e}function xV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function fI(){var e=W5(),t=[0,1],r=!1,n;function s(i){var o=xV(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(Y6(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,jg)).map(Y6)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return fI(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Wi.apply(s,arguments),Wc(s)}function hI(){var e=[],t=[],r=[],n;function s(){var o=0,c=Math.max(1,t.length);for(r=new Array(c-1);++o<c;)r[o-1]=wH(e,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:t[P0(r,o)]}return i.invertExtent=function(o){var c=t.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(Tc),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return hI().domain(e).range(t).unknown(n)},Wi.apply(i,arguments)}function mI(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(u){return u!=null&&u<=u?s[P0(n,u,0,r)]:i}function c(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*t-(u-r)*e)/(r+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,c()):[e,t]},o.range=function(u){return arguments.length?(r=(s=Array.from(u)).length-1,c()):s.slice()},o.invertExtent=function(u){var d=s.indexOf(u);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(u){return arguments.length&&(i=u),o},o.thresholds=function(){return n.slice()},o.copy=function(){return mI().domain([e,t]).range(s).unknown(i)},Wi.apply(Wc(o),arguments)}function pI(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[P0(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return pI().domain(e).range(t).unknown(r)},Wi.apply(s,arguments)}const B2=new Date,F2=new Date;function ma(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),c=s.ceil(i);return i-o<c-i?o:c},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,c)=>{const u=[];if(i=s.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return u;let d;do u.push(d=new Date(+i)),t(i,c),e(i);while(d<i&&i<o);return u},s.filter=i=>ma(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;t(o,-1),!i(o););else for(;--c>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(B2.setTime(+i),F2.setTime(+o),e(B2),e(F2),Math.floor(r(B2,F2))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Cg=ma(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Cg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ma(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Cg);Cg.range;const Al=1e3,Ri=Al*60,Cl=Ri*60,Ml=Cl*24,Y5=Ml*7,Z6=Ml*30,U2=Ml*365,hu=ma(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Al)},(e,t)=>(t-e)/Al,e=>e.getUTCSeconds());hu.range;const Z5=ma(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Al)},(e,t)=>{e.setTime(+e+t*Ri)},(e,t)=>(t-e)/Ri,e=>e.getMinutes());Z5.range;const J5=ma(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ri)},(e,t)=>(t-e)/Ri,e=>e.getUTCMinutes());J5.range;const Q5=ma(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Al-e.getMinutes()*Ri)},(e,t)=>{e.setTime(+e+t*Cl)},(e,t)=>(t-e)/Cl,e=>e.getHours());Q5.range;const eN=ma(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Cl)},(e,t)=>(t-e)/Cl,e=>e.getUTCHours());eN.range;const _0=ma(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ri)/Ml,e=>e.getDate()-1);_0.range;const G1=ma(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ml,e=>e.getUTCDate()-1);G1.range;const gI=ma(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ml,e=>Math.floor(e/Ml));gI.range;function Zu(e){return ma(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ri)/Y5)}const K1=Zu(0),Sg=Zu(1),yV=Zu(2),vV=Zu(3),of=Zu(4),bV=Zu(5),wV=Zu(6);K1.range;Sg.range;yV.range;vV.range;of.range;bV.range;wV.range;function Ju(e){return ma(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Y5)}const X1=Ju(0),Eg=Ju(1),NV=Ju(2),jV=Ju(3),lf=Ju(4),AV=Ju(5),CV=Ju(6);X1.range;Eg.range;NV.range;jV.range;lf.range;AV.range;CV.range;const tN=ma(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tN.range;const rN=ma(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());rN.range;const Bl=ma(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ma(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Bl.range;const Fl=ma(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Fl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ma(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Fl.range;function xI(e,t,r,n,s,i){const o=[[hu,1,Al],[hu,5,5*Al],[hu,15,15*Al],[hu,30,30*Al],[i,1,Ri],[i,5,5*Ri],[i,15,15*Ri],[i,30,30*Ri],[s,1,Cl],[s,3,3*Cl],[s,6,6*Cl],[s,12,12*Cl],[n,1,Ml],[n,2,2*Ml],[r,1,Y5],[t,1,Z6],[t,3,3*Z6],[e,1,U2]];function c(d,h,p){const v=h<d;v&&([d,h]=[h,d]);const x=p&&typeof p.range=="function"?p:u(d,h,p),w=x?x.range(d,+h+1):[];return v?w.reverse():w}function u(d,h,p){const v=Math.abs(h-d)/p,x=M5(([,,N])=>N).right(o,v);if(x===o.length)return e.every(ib(d/U2,h/U2,p));if(x===0)return Cg.every(Math.max(ib(d,h,p),1));const[w,j]=o[v/o[x-1][2]<o[x][2]/v?x-1:x];return w.every(j)}return[c,u]}const[SV,EV]=xI(Fl,rN,X1,gI,eN,J5),[kV,PV]=xI(Bl,tN,K1,_0,Q5,Z5);function z2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ah(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function IV(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,c=e.months,u=e.shortMonths,d=sh(s),h=ih(s),p=sh(i),v=ih(i),x=sh(o),w=ih(o),j=sh(c),N=ih(c),A=sh(u),k=ih(u),E={a:ye,A:de,b:we,B:Ee,c:null,d:nA,e:nA,f:QV,g:cG,G:dG,H:YV,I:ZV,j:JV,L:yI,m:eG,M:tG,p:ie,q:V,Q:iA,s:oA,S:rG,u:nG,U:aG,V:sG,w:iG,W:oG,x:null,X:null,y:lG,Y:uG,Z:fG,"%":sA},_={a:se,A:ne,b:ve,B:be,c:null,d:aA,e:aA,f:gG,g:SG,G:kG,H:hG,I:mG,j:pG,L:bI,m:xG,M:yG,p:Te,q:xe,Q:iA,s:oA,S:vG,u:bG,U:wG,V:NG,w:jG,W:AG,x:null,X:null,y:CG,Y:EG,Z:PG,"%":sA},O={a:K,A:z,b:q,B:Q,c:G,d:tA,e:tA,f:VV,g:eA,G:Q6,H:rA,I:rA,j:$V,L:HV,m:zV,M:WV,p:L,q:UV,Q:KV,s:XV,S:qV,u:DV,U:LV,V:MV,w:RV,W:BV,x:H,X:ue,y:eA,Y:Q6,Z:FV,"%":GV};E.x=B(r,E),E.X=B(n,E),E.c=B(t,E),_.x=B(r,_),_.X=B(n,_),_.c=B(t,_);function B(le,Ce){return function(ke){var Ie=[],We=-1,Re=0,he=le.length,Ze,ot,it;for(ke instanceof Date||(ke=new Date(+ke));++We<he;)le.charCodeAt(We)===37&&(Ie.push(le.slice(Re,We)),(ot=J6[Ze=le.charAt(++We)])!=null?Ze=le.charAt(++We):ot=Ze==="e"?" ":"0",(it=Ce[Ze])&&(Ze=it(ke,ot)),Ie.push(Ze),Re=We+1);return Ie.push(le.slice(Re,We)),Ie.join("")}}function F(le,Ce){return function(ke){var Ie=ah(1900,void 0,1),We=U(Ie,le,ke+="",0),Re,he;if(We!=ke.length)return null;if("Q"in Ie)return new Date(Ie.Q);if("s"in Ie)return new Date(Ie.s*1e3+("L"in Ie?Ie.L:0));if(Ce&&!("Z"in Ie)&&(Ie.Z=0),"p"in Ie&&(Ie.H=Ie.H%12+Ie.p*12),Ie.m===void 0&&(Ie.m="q"in Ie?Ie.q:0),"V"in Ie){if(Ie.V<1||Ie.V>53)return null;"w"in Ie||(Ie.w=1),"Z"in Ie?(Re=$2(ah(Ie.y,0,1)),he=Re.getUTCDay(),Re=he>4||he===0?Eg.ceil(Re):Eg(Re),Re=G1.offset(Re,(Ie.V-1)*7),Ie.y=Re.getUTCFullYear(),Ie.m=Re.getUTCMonth(),Ie.d=Re.getUTCDate()+(Ie.w+6)%7):(Re=z2(ah(Ie.y,0,1)),he=Re.getDay(),Re=he>4||he===0?Sg.ceil(Re):Sg(Re),Re=_0.offset(Re,(Ie.V-1)*7),Ie.y=Re.getFullYear(),Ie.m=Re.getMonth(),Ie.d=Re.getDate()+(Ie.w+6)%7)}else("W"in Ie||"U"in Ie)&&("w"in Ie||(Ie.w="u"in Ie?Ie.u%7:"W"in Ie?1:0),he="Z"in Ie?$2(ah(Ie.y,0,1)).getUTCDay():z2(ah(Ie.y,0,1)).getDay(),Ie.m=0,Ie.d="W"in Ie?(Ie.w+6)%7+Ie.W*7-(he+5)%7:Ie.w+Ie.U*7-(he+6)%7);return"Z"in Ie?(Ie.H+=Ie.Z/100|0,Ie.M+=Ie.Z%100,$2(Ie)):z2(Ie)}}function U(le,Ce,ke,Ie){for(var We=0,Re=Ce.length,he=ke.length,Ze,ot;We<Re;){if(Ie>=he)return-1;if(Ze=Ce.charCodeAt(We++),Ze===37){if(Ze=Ce.charAt(We++),ot=O[Ze in J6?Ce.charAt(We++):Ze],!ot||(Ie=ot(le,ke,Ie))<0)return-1}else if(Ze!=ke.charCodeAt(Ie++))return-1}return Ie}function L(le,Ce,ke){var Ie=d.exec(Ce.slice(ke));return Ie?(le.p=h.get(Ie[0].toLowerCase()),ke+Ie[0].length):-1}function K(le,Ce,ke){var Ie=x.exec(Ce.slice(ke));return Ie?(le.w=w.get(Ie[0].toLowerCase()),ke+Ie[0].length):-1}function z(le,Ce,ke){var Ie=p.exec(Ce.slice(ke));return Ie?(le.w=v.get(Ie[0].toLowerCase()),ke+Ie[0].length):-1}function q(le,Ce,ke){var Ie=A.exec(Ce.slice(ke));return Ie?(le.m=k.get(Ie[0].toLowerCase()),ke+Ie[0].length):-1}function Q(le,Ce,ke){var Ie=j.exec(Ce.slice(ke));return Ie?(le.m=N.get(Ie[0].toLowerCase()),ke+Ie[0].length):-1}function G(le,Ce,ke){return U(le,t,Ce,ke)}function H(le,Ce,ke){return U(le,r,Ce,ke)}function ue(le,Ce,ke){return U(le,n,Ce,ke)}function ye(le){return o[le.getDay()]}function de(le){return i[le.getDay()]}function we(le){return u[le.getMonth()]}function Ee(le){return c[le.getMonth()]}function ie(le){return s[+(le.getHours()>=12)]}function V(le){return 1+~~(le.getMonth()/3)}function se(le){return o[le.getUTCDay()]}function ne(le){return i[le.getUTCDay()]}function ve(le){return u[le.getUTCMonth()]}function be(le){return c[le.getUTCMonth()]}function Te(le){return s[+(le.getUTCHours()>=12)]}function xe(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var Ce=B(le+="",E);return Ce.toString=function(){return le},Ce},parse:function(le){var Ce=F(le+="",!1);return Ce.toString=function(){return le},Ce},utcFormat:function(le){var Ce=B(le+="",_);return Ce.toString=function(){return le},Ce},utcParse:function(le){var Ce=F(le+="",!0);return Ce.toString=function(){return le},Ce}}}var J6={"-":"",_:" ",0:"0"},ka=/^\s*\d+/,TV=/^%/,_V=/[\\^$*+?|[\]().{}]/g;function Ar(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function OV(e){return e.replace(_V,"\\$&")}function sh(e){return new RegExp("^(?:"+e.map(OV).join("|")+")","i")}function ih(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function RV(e,t,r){var n=ka.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function DV(e,t,r){var n=ka.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function LV(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function MV(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function BV(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Q6(e,t,r){var n=ka.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function eA(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function FV(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function UV(e,t,r){var n=ka.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function zV(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function tA(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function $V(e,t,r){var n=ka.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function rA(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function WV(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function qV(e,t,r){var n=ka.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function HV(e,t,r){var n=ka.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function VV(e,t,r){var n=ka.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function GV(e,t,r){var n=TV.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function KV(e,t,r){var n=ka.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function XV(e,t,r){var n=ka.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function nA(e,t){return Ar(e.getDate(),t,2)}function YV(e,t){return Ar(e.getHours(),t,2)}function ZV(e,t){return Ar(e.getHours()%12||12,t,2)}function JV(e,t){return Ar(1+_0.count(Bl(e),e),t,3)}function yI(e,t){return Ar(e.getMilliseconds(),t,3)}function QV(e,t){return yI(e,t)+"000"}function eG(e,t){return Ar(e.getMonth()+1,t,2)}function tG(e,t){return Ar(e.getMinutes(),t,2)}function rG(e,t){return Ar(e.getSeconds(),t,2)}function nG(e){var t=e.getDay();return t===0?7:t}function aG(e,t){return Ar(K1.count(Bl(e)-1,e),t,2)}function vI(e){var t=e.getDay();return t>=4||t===0?of(e):of.ceil(e)}function sG(e,t){return e=vI(e),Ar(of.count(Bl(e),e)+(Bl(e).getDay()===4),t,2)}function iG(e){return e.getDay()}function oG(e,t){return Ar(Sg.count(Bl(e)-1,e),t,2)}function lG(e,t){return Ar(e.getFullYear()%100,t,2)}function cG(e,t){return e=vI(e),Ar(e.getFullYear()%100,t,2)}function uG(e,t){return Ar(e.getFullYear()%1e4,t,4)}function dG(e,t){var r=e.getDay();return e=r>=4||r===0?of(e):of.ceil(e),Ar(e.getFullYear()%1e4,t,4)}function fG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ar(t/60|0,"0",2)+Ar(t%60,"0",2)}function aA(e,t){return Ar(e.getUTCDate(),t,2)}function hG(e,t){return Ar(e.getUTCHours(),t,2)}function mG(e,t){return Ar(e.getUTCHours()%12||12,t,2)}function pG(e,t){return Ar(1+G1.count(Fl(e),e),t,3)}function bI(e,t){return Ar(e.getUTCMilliseconds(),t,3)}function gG(e,t){return bI(e,t)+"000"}function xG(e,t){return Ar(e.getUTCMonth()+1,t,2)}function yG(e,t){return Ar(e.getUTCMinutes(),t,2)}function vG(e,t){return Ar(e.getUTCSeconds(),t,2)}function bG(e){var t=e.getUTCDay();return t===0?7:t}function wG(e,t){return Ar(X1.count(Fl(e)-1,e),t,2)}function wI(e){var t=e.getUTCDay();return t>=4||t===0?lf(e):lf.ceil(e)}function NG(e,t){return e=wI(e),Ar(lf.count(Fl(e),e)+(Fl(e).getUTCDay()===4),t,2)}function jG(e){return e.getUTCDay()}function AG(e,t){return Ar(Eg.count(Fl(e)-1,e),t,2)}function CG(e,t){return Ar(e.getUTCFullYear()%100,t,2)}function SG(e,t){return e=wI(e),Ar(e.getUTCFullYear()%100,t,2)}function EG(e,t){return Ar(e.getUTCFullYear()%1e4,t,4)}function kG(e,t){var r=e.getUTCDay();return e=r>=4||r===0?lf(e):lf.ceil(e),Ar(e.getUTCFullYear()%1e4,t,4)}function PG(){return"+0000"}function sA(){return"%"}function iA(e){return+e}function oA(e){return Math.floor(+e/1e3)}var od,NI,jI;IG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function IG(e){return od=IV(e),NI=od.format,od.parse,jI=od.utcFormat,od.utcParse,od}function TG(e){return new Date(e)}function _G(e){return e instanceof Date?+e:+new Date(+e)}function nN(e,t,r,n,s,i,o,c,u,d){var h=W5(),p=h.invert,v=h.domain,x=d(".%L"),w=d(":%S"),j=d("%I:%M"),N=d("%I %p"),A=d("%a %d"),k=d("%b %d"),E=d("%B"),_=d("%Y");function O(B){return(u(B)<B?x:c(B)<B?w:o(B)<B?j:i(B)<B?N:n(B)<B?s(B)<B?A:k:r(B)<B?E:_)(B)}return h.invert=function(B){return new Date(p(B))},h.domain=function(B){return arguments.length?v(Array.from(B,_G)):v().map(TG)},h.ticks=function(B){var F=v();return e(F[0],F[F.length-1],B??10)},h.tickFormat=function(B,F){return F==null?O:d(F)},h.nice=function(B){var F=v();return(!B||typeof B.range!="function")&&(B=t(F[0],F[F.length-1],B??10)),B?v(cI(F,B)):h},h.copy=function(){return T0(h,nN(e,t,r,n,s,i,o,c,u,d))},h}function OG(){return Wi.apply(nN(kV,PV,Bl,tN,K1,_0,Q5,Z5,hu,NI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RG(){return Wi.apply(nN(SV,EV,Fl,rN,X1,G1,eN,J5,hu,jI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Y1(){var e=0,t=1,r,n,s,i,o=ys,c=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(s===0?.5:(p=(i(p)-r)*s,c?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(o=p,d):o};function h(p){return function(v){var x,w;return arguments.length?([x,w]=v,o=p(x,w),d):[o(0),o(1)]}}return d.range=h(Af),d.rangeRound=h($5),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),d}}function qc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AI(){var e=Wc(Y1()(ys));return e.copy=function(){return qc(e,AI())},ql.apply(e,arguments)}function CI(){var e=V5(Y1()).domain([1,10]);return e.copy=function(){return qc(e,CI()).base(e.base())},ql.apply(e,arguments)}function SI(){var e=G5(Y1());return e.copy=function(){return qc(e,SI()).constant(e.constant())},ql.apply(e,arguments)}function aN(){var e=K5(Y1());return e.copy=function(){return qc(e,aN()).exponent(e.exponent())},ql.apply(e,arguments)}function DG(){return aN.apply(null,arguments).exponent(.5)}function EI(){var e=[],t=ys;function r(n){if(n!=null&&!isNaN(n=+n))return t((P0(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Tc),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>bH(e,i/n))},r.copy=function(){return EI(t).domain(e)},ql.apply(r,arguments)}function Z1(){var e=0,t=.5,r=1,n=1,s,i,o,c,u,d=ys,h,p=!1,v;function x(j){return isNaN(j=+j)?v:(j=.5+((j=+h(j))-i)*(n*j<n*i?c:u),d(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,s=h(e=+e),i=h(t=+t),o=h(r=+r),c=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(d=j,x):d};function w(j){return function(N){var A,k,E;return arguments.length?([A,k,E]=N,d=GH(j,[A,k,E]),x):[d(0),d(.5),d(1)]}}return x.range=w(Af),x.rangeRound=w($5),x.unknown=function(j){return arguments.length?(v=j,x):v},function(j){return h=j,s=j(e),i=j(t),o=j(r),c=s===i?0:.5/(i-s),u=i===o?0:.5/(o-i),n=i<s?-1:1,x}}function kI(){var e=Wc(Z1()(ys));return e.copy=function(){return qc(e,kI())},ql.apply(e,arguments)}function PI(){var e=V5(Z1()).domain([.1,1,10]);return e.copy=function(){return qc(e,PI()).base(e.base())},ql.apply(e,arguments)}function II(){var e=G5(Z1());return e.copy=function(){return qc(e,II()).constant(e.constant())},ql.apply(e,arguments)}function sN(){var e=K5(Z1());return e.copy=function(){return qc(e,sN()).exponent(e.exponent())},ql.apply(e,arguments)}function LG(){return sN.apply(null,arguments).exponent(.5)}const xh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:F5,scaleDiverging:kI,scaleDivergingLog:PI,scaleDivergingPow:sN,scaleDivergingSqrt:LG,scaleDivergingSymlog:II,scaleIdentity:lI,scaleImplicit:ob,scaleLinear:oI,scaleLog:uI,scaleOrdinal:B5,scalePoint:jH,scalePow:X5,scaleQuantile:hI,scaleQuantize:mI,scaleRadial:fI,scaleSequential:AI,scaleSequentialLog:CI,scaleSequentialPow:aN,scaleSequentialQuantile:EI,scaleSequentialSqrt:DG,scaleSequentialSymlog:SI,scaleSqrt:gV,scaleSymlog:dI,scaleThreshold:pI,scaleTime:OG,scaleUtc:RG,tickFormat:iI},Symbol.toStringTag,{value:"Module"}));var Hc=e=>e.chartData,iN=Ue([Hc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),oN=(e,t,r,n)=>n?iN(e):Hc(e);function Mu(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(os(t)&&os(r))return!0}return!1}function lA(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function TI(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(os(r))s=r;else if(typeof r=="function")return;if(os(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(Mu(o))return o}}function MG(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Mu(n))return lA(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,c;if(s==="auto")t!=null&&(o=Math.min(...t));else if(_t(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&Qj.test(s)){var u=Qj.exec(s);if(u==null||t==null)o=void 0;else{var d=+u[1];o=t[0]-d}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(c=Math.max(...t));else if(_t(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&e6.test(i)){var h=e6.exec(i);if(h==null||t==null)c=void 0;else{var p=+h[1];c=t[1]+p}}else c=t==null?void 0:t[1];var v=[o,c];if(Mu(v))return t==null?v:lA(v,t,r)}}}var Cf=1e9,BG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cN,xn=!0,zi="[DecimalError] ",Nu=zi+"Invalid argument: ",lN=zi+"Exponent out of range: ",Sf=Math.floor,iu=Math.pow,FG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ai,wa=1e7,ln=7,_I=9007199254740991,kg=Sf(_I/ln),vt={};vt.absoluteValue=vt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};vt.comparedTo=vt.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};vt.decimalPlaces=vt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ln;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};vt.dividedBy=vt.div=function(e){return Pl(this,new this.constructor(e))};vt.dividedToIntegerBy=vt.idiv=function(e){var t=this,r=t.constructor;return Yr(Pl(t,new r(e),0,1),r.precision)};vt.equals=vt.eq=function(e){return!this.cmp(e)};vt.exponent=function(){return ta(this)};vt.greaterThan=vt.gt=function(e){return this.cmp(e)>0};vt.greaterThanOrEqualTo=vt.gte=function(e){return this.cmp(e)>=0};vt.isInteger=vt.isint=function(){return this.e>this.d.length-2};vt.isNegative=vt.isneg=function(){return this.s<0};vt.isPositive=vt.ispos=function(){return this.s>0};vt.isZero=function(){return this.s===0};vt.lessThan=vt.lt=function(e){return this.cmp(e)<0};vt.lessThanOrEqualTo=vt.lte=function(e){return this.cmp(e)<1};vt.logarithm=vt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ai))throw Error(zi+"NaN");if(r.s<1)throw Error(zi+(r.s?"NaN":"-Infinity"));return r.eq(ai)?new n(0):(xn=!1,t=Pl(f0(r,i),f0(e,i),i),xn=!0,Yr(t,s))};vt.minus=vt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DI(t,e):OI(t,(e.s=-e.s,e))};vt.modulo=vt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(zi+"NaN");return r.s?(xn=!1,t=Pl(r,e,0,1).times(e),xn=!0,r.minus(t)):Yr(new n(r),s)};vt.naturalExponential=vt.exp=function(){return RI(this)};vt.naturalLogarithm=vt.ln=function(){return f0(this)};vt.negated=vt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};vt.plus=vt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OI(t,e):DI(t,(e.s=-e.s,e))};vt.precision=vt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Nu+e);if(t=ta(s)+1,n=s.d.length-1,r=n*ln+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};vt.squareRoot=vt.sqrt=function(){var e,t,r,n,s,i,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(zi+"NaN")}for(e=ta(c),xn=!1,s=Math.sqrt(+c),s==0||s==1/0?(t=_o(c.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Sf((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new u(t)):n=new u(s.toString()),r=u.precision,s=o=r+3;;)if(i=n,n=i.plus(Pl(c,i,o+2)).times(.5),_o(i.d).slice(0,o)===(t=_o(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Yr(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(t!="9999")break;o+=4}return xn=!0,Yr(n,r)};vt.times=vt.mul=function(e){var t,r,n,s,i,o,c,u,d,h=this,p=h.constructor,v=h.d,x=(e=new p(e)).d;if(!h.s||!e.s)return new p(0);for(e.s*=h.s,r=h.e+e.e,u=v.length,d=x.length,u<d&&(i=v,v=x,x=i,o=u,u=d,d=o),i=[],o=u+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=u+n;s>n;)c=i[s]+x[n]*v[s-n-1]+t,i[s--]=c%wa|0,t=c/wa|0;i[s]=(i[s]+t)%wa|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,xn?Yr(e,p.precision):e};vt.toDecimalPlaces=vt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:($o(e,0,Cf),t===void 0?t=n.rounding:$o(t,0,8),Yr(r,e+ta(r)+1,t))};vt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Bu(n,!0):($o(e,0,Cf),t===void 0?t=s.rounding:$o(t,0,8),n=Yr(new s(n),e+1,t),r=Bu(n,!0,e+1)),r};vt.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Bu(s):($o(e,0,Cf),t===void 0?t=i.rounding:$o(t,0,8),n=Yr(new i(s),e+ta(s)+1,t),r=Bu(n.abs(),!1,e+ta(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};vt.toInteger=vt.toint=function(){var e=this,t=e.constructor;return Yr(new t(e),ta(e)+1,t.rounding)};vt.toNumber=function(){return+this};vt.toPower=vt.pow=function(e){var t,r,n,s,i,o,c=this,u=c.constructor,d=12,h=+(e=new u(e));if(!e.s)return new u(ai);if(c=new u(c),!c.s){if(e.s<1)throw Error(zi+"Infinity");return c}if(c.eq(ai))return c;if(n=u.precision,e.eq(ai))return Yr(c,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=c.s,o){if((r=h<0?-h:h)<=_I){for(s=new u(ai),t=Math.ceil(n/ln+4),xn=!1;r%2&&(s=s.times(c),uA(s.d,t)),r=Sf(r/2),r!==0;)c=c.times(c),uA(c.d,t);return xn=!0,e.s<0?new u(ai).div(s):Yr(s,n)}}else if(i<0)throw Error(zi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,c.s=1,xn=!1,s=e.times(f0(c,n+d)),xn=!0,s=RI(s),s.s=i,s};vt.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ta(s),n=Bu(s,r<=i.toExpNeg||r>=i.toExpPos)):($o(e,1,Cf),t===void 0?t=i.rounding:$o(t,0,8),s=Yr(new i(s),e,t),r=ta(s),n=Bu(s,e<=r||r<=i.toExpNeg,e)),n};vt.toSignificantDigits=vt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):($o(e,1,Cf),t===void 0?t=n.rounding:$o(t,0,8)),Yr(new n(r),e,t)};vt.toString=vt.valueOf=vt.val=vt.toJSON=vt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ta(e),r=e.constructor;return Bu(e,t<=r.toExpNeg||t>=r.toExpPos)};function OI(e,t){var r,n,s,i,o,c,u,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),xn?Yr(t,p):t;if(u=e.d,d=t.d,o=e.e,s=t.e,u=u.slice(),i=o-s,i){for(i<0?(n=u,i=-i,c=d.length):(n=d,s=o,c=u.length),o=Math.ceil(p/ln),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=u.length,i=d.length,c-i<0&&(i=c,n=d,d=u,u=n),r=0;i;)r=(u[--i]=u[i]+d[i]+r)/wa|0,u[i]%=wa;for(r&&(u.unshift(r),++s),c=u.length;u[--c]==0;)u.pop();return t.d=u,t.e=s,xn?Yr(t,p):t}function $o(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Nu+e)}function _o(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=ln-n.length,r&&(i+=dc(r)),i+=n;o=e[t],n=o+"",r=ln-n.length,r&&(i+=dc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Pl=function(){function e(n,s){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*s+o,n[c]=i%wa|0,o=i/wa|0;return o&&n.unshift(o),n}function t(n,s,i,o){var c,u;if(i!=o)u=i>o?1:-1;else for(c=u=0;c<i;c++)if(n[c]!=s[c]){u=n[c]>s[c]?1:-1;break}return u}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*wa+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var c,u,d,h,p,v,x,w,j,N,A,k,E,_,O,B,F,U,L=n.constructor,K=n.s==s.s?1:-1,z=n.d,q=s.d;if(!n.s)return new L(n);if(!s.s)throw Error(zi+"Division by zero");for(u=n.e-s.e,F=q.length,O=z.length,x=new L(K),w=x.d=[],d=0;q[d]==(z[d]||0);)++d;if(q[d]>(z[d]||0)&&--u,i==null?k=i=L.precision:o?k=i+(ta(n)-ta(s))+1:k=i,k<0)return new L(0);if(k=k/ln+2|0,d=0,F==1)for(h=0,q=q[0],k++;(d<O||h)&&k--;d++)E=h*wa+(z[d]||0),w[d]=E/q|0,h=E%q|0;else{for(h=wa/(q[0]+1)|0,h>1&&(q=e(q,h),z=e(z,h),F=q.length,O=z.length),_=F,j=z.slice(0,F),N=j.length;N<F;)j[N++]=0;U=q.slice(),U.unshift(0),B=q[0],q[1]>=wa/2&&++B;do h=0,c=t(q,j,F,N),c<0?(A=j[0],F!=N&&(A=A*wa+(j[1]||0)),h=A/B|0,h>1?(h>=wa&&(h=wa-1),p=e(q,h),v=p.length,N=j.length,c=t(p,j,v,N),c==1&&(h--,r(p,F<v?U:q,v))):(h==0&&(c=h=1),p=q.slice()),v=p.length,v<N&&p.unshift(0),r(j,p,N),c==-1&&(N=j.length,c=t(q,j,F,N),c<1&&(h++,r(j,F<N?U:q,N))),N=j.length):c===0&&(h++,j=[0]),w[d++]=h,c&&j[0]?j[N++]=z[_]||0:(j=[z[_]],N=1);while((_++<O||j[0]!==void 0)&&k--)}return w[0]||w.shift(),x.e=u,Yr(x,o?i+ta(x)+1:i)}}();function RI(e,t){var r,n,s,i,o,c,u=0,d=0,h=e.constructor,p=h.precision;if(ta(e)>16)throw Error(lN+ta(e));if(!e.s)return new h(ai);for(xn=!1,c=p,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(iu(2,d))/Math.LN10*2+5|0,c+=n,r=s=i=new h(ai),h.precision=c;;){if(s=Yr(s.times(e),c),r=r.times(++u),o=i.plus(Pl(s,r,c)),_o(o.d).slice(0,c)===_o(i.d).slice(0,c)){for(;d--;)i=Yr(i.times(i),c);return h.precision=p,t==null?(xn=!0,Yr(i,p)):i}i=o}}function ta(e){for(var t=e.e*ln,r=e.d[0];r>=10;r/=10)t++;return t}function W2(e,t,r){if(t>e.LN10.sd())throw xn=!0,r&&(e.precision=r),Error(zi+"LN10 precision limit exceeded");return Yr(new e(e.LN10),t)}function dc(e){for(var t="";e--;)t+="0";return t}function f0(e,t){var r,n,s,i,o,c,u,d,h,p=1,v=10,x=e,w=x.d,j=x.constructor,N=j.precision;if(x.s<1)throw Error(zi+(x.s?"NaN":"-Infinity"));if(x.eq(ai))return new j(0);if(t==null?(xn=!1,d=N):d=t,x.eq(10))return t==null&&(xn=!0),W2(j,d);if(d+=v,j.precision=d,r=_o(w),n=r.charAt(0),i=ta(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=_o(x.d),n=r.charAt(0),p++;i=ta(x),n>1?(x=new j("0."+r),i++):x=new j(n+"."+r.slice(1))}else return u=W2(j,d+2,N).times(i+""),x=f0(new j(n+"."+r.slice(1)),d-v).plus(u),j.precision=N,t==null?(xn=!0,Yr(x,N)):x;for(c=o=x=Pl(x.minus(ai),x.plus(ai),d),h=Yr(x.times(x),d),s=3;;){if(o=Yr(o.times(h),d),u=c.plus(Pl(o,new j(s),d)),_o(u.d).slice(0,d)===_o(c.d).slice(0,d))return c=c.times(2),i!==0&&(c=c.plus(W2(j,d+2,N).times(i+""))),c=Pl(c,new j(p),d),j.precision=N,t==null?(xn=!0,Yr(c,N)):c;c=u,s+=2}}function cA(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Sf(r/ln),e.d=[],n=(r+1)%ln,r<0&&(n+=ln),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ln;n<s;)e.d.push(+t.slice(n,n+=ln));t=t.slice(n),n=ln-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),xn&&(e.e>kg||e.e<-kg))throw Error(lN+r)}else e.s=0,e.e=0,e.d=[0];return e}function Yr(e,t,r){var n,s,i,o,c,u,d,h,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ln,s=t,d=p[h=0];else{if(h=Math.ceil((n+1)/ln),i=p.length,h>=i)return e;for(d=i=p[h],o=1;i>=10;i/=10)o++;n%=ln,s=n-ln+o}if(r!==void 0&&(i=iu(10,o-s-1),c=d/i%10|0,u=t<0||p[h+1]!==void 0||d%i,u=r<4?(c||u)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||u||r==6&&(n>0?s>0?d/iu(10,o-s):0:p[h-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return u?(i=ta(e),p.length=1,t=t-i-1,p[0]=iu(10,(ln-t%ln)%ln),e.e=Sf(-t/ln)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=h,i=1,h--):(p.length=h+1,i=iu(10,ln-n),p[h]=s>0?(d/iu(10,o-s)%iu(10,s)|0)*i:0),u)for(;;)if(h==0){(p[0]+=i)==wa&&(p[0]=1,++e.e);break}else{if(p[h]+=i,p[h]!=wa)break;p[h--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(xn&&(e.e>kg||e.e<-kg))throw Error(lN+ta(e));return e}function DI(e,t){var r,n,s,i,o,c,u,d,h,p,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),xn?Yr(t,x):t;if(u=e.d,p=t.d,n=t.e,d=e.e,u=u.slice(),o=d-n,o){for(h=o<0,h?(r=u,o=-o,c=p.length):(r=p,n=d,c=u.length),s=Math.max(Math.ceil(x/ln),c)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=u.length,c=p.length,h=s<c,h&&(c=s),s=0;s<c;s++)if(u[s]!=p[s]){h=u[s]<p[s];break}o=0}for(h&&(r=u,u=p,p=r,t.s=-t.s),c=u.length,s=p.length-c;s>0;--s)u[c++]=0;for(s=p.length;s>o;){if(u[--s]<p[s]){for(i=s;i&&u[--i]===0;)u[i]=wa-1;--u[i],u[s]+=wa}u[s]-=p[s]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=n,xn?Yr(t,x):t):new v(0)}function Bu(e,t,r){var n,s=ta(e),i=_o(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+dc(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+dc(-s-1)+i,r&&(n=r-o)>0&&(i+=dc(n))):s>=o?(i+=dc(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+dc(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=dc(n))),e.s<0?"-"+i:i}function uA(e,t){if(e.length>t)return e.length=t,!0}function LI(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Nu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return cA(o,i.toString())}else if(typeof i!="string")throw Error(Nu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,FG.test(i))cA(o,i);else throw Error(Nu+i)}if(s.prototype=vt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=LI,s.config=s.set=UG,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function UG(e){if(!e||typeof e!="object")throw Error(zi+"Object expected");var t,r,n,s=["precision",1,Cf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Sf(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Nu+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Nu+r+": "+n);return this}var cN=LI(BG);ai=new cN(1);const Lr=cN;var zG=e=>e,MI={},BI=e=>e===MI,dA=e=>function t(){return arguments.length===0||arguments.length===1&&BI(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},FI=(e,t)=>e===1?t:dA(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==MI).length;return i>=e?t(...n):FI(e-i,dA(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=n.map(h=>BI(h)?c.shift():h);return t(...d,...c)}))}),J1=e=>FI(e.length,e),db=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},$G=J1((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),WG=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return zG;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((c,u)=>u(c),i(...arguments))}},fb=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),UI=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,c)=>{var u;return o===((u=t)===null||u===void 0?void 0:u[c])})||(t=s,r=e(...s)),r}};function zI(e){var t;return e===0?t=1:t=Math.floor(new Lr(e).abs().log(10).toNumber())+1,t}function $I(e,t,r){for(var n=new Lr(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}J1((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});J1((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});J1((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var WI=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},qI=(e,t,r)=>{if(e.lte(0))return new Lr(0);var n=zI(e.toNumber()),s=new Lr(10).pow(n),i=e.div(s),o=n!==1?.05:.1,c=new Lr(Math.ceil(i.div(o).toNumber())).add(r).mul(o),u=c.mul(s);return t?new Lr(u.toNumber()):new Lr(Math.ceil(u.toNumber()))},qG=(e,t,r)=>{var n=new Lr(1),s=new Lr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Lr(10).pow(zI(e)-1),s=new Lr(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Lr(Math.floor(e)))}else e===0?s=new Lr(Math.floor((t-1)/2)):r||(s=new Lr(Math.floor(e)));var o=Math.floor((t-1)/2),c=WG($G(u=>s.add(new Lr(u-o).mul(n)).toNumber()),db);return c(0,t)},HI=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Lr(0),tickMin:new Lr(0),tickMax:new Lr(0)};var o=qI(new Lr(r).sub(t).div(n-1),s,i),c;t<=0&&r>=0?c=new Lr(0):(c=new Lr(t).add(r).div(2),c=c.sub(new Lr(c).mod(o)));var u=Math.ceil(c.sub(t).div(o).toNumber()),d=Math.ceil(new Lr(r).sub(c).div(o).toNumber()),h=u+d+1;return h>n?HI(t,r,n,s,i+1):(h<n&&(d=r>0?d+(n-h):d,u=r>0?u:u+(n-h)),{step:o,tickMin:c.sub(new Lr(u).mul(o)),tickMax:c.add(new Lr(d).mul(o))})};function HG(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,c]=WI([t,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...db(0,n-1).map(()=>1/0)]:[...db(0,n-1).map(()=>-1/0),c];return t>r?fb(u):u}if(o===c)return qG(o,n,s);var{step:d,tickMin:h,tickMax:p}=HI(o,c,i,s,0),v=$I(h,p.add(new Lr(.1).mul(d)),d);return t>r?fb(v):v}function VG(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=WI([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var c=Math.max(t,2),u=qI(new Lr(o).sub(i).div(c-1),s,0),d=[...$I(new Lr(i),new Lr(o),u),o];return s===!1&&(d=d.map(h=>Math.round(h))),r>n?fb(d):d}var GG=UI(HG),KG=UI(VG),VI=e=>e.rootProps.maxBarSize,XG=e=>e.rootProps.barGap,GI=e=>e.rootProps.barCategoryGap,YG=e=>e.rootProps.barSize,O0=e=>e.rootProps.stackOffset,uN=e=>e.options.chartName,dN=e=>e.rootProps.syncId,KI=e=>e.rootProps.syncMethod,fN=e=>e.options.eventEmitter,bl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ni={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Q1=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},ZG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:bl.angleAxisId,includeHidden:!1,name:void 0,reversed:bl.reversed,scale:bl.scale,tick:bl.tick,tickCount:void 0,ticks:void 0,type:bl.type,unit:void 0},JG={allowDataOverflow:ni.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ni.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ni.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ni.scale,tick:ni.tick,tickCount:ni.tickCount,ticks:void 0,type:ni.type,unit:void 0},QG={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bl.scale,tick:bl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},eK={allowDataOverflow:ni.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ni.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ni.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ni.scale,tick:ni.tick,tickCount:ni.tickCount,ticks:void 0,type:"category",unit:void 0},hN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?QG:ZG,mN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?eK:JG,ex=e=>e.polarOptions,pN=Ue([$l,Wl,ha],bP),XI=Ue([ex,pN],(e,t)=>{if(e!=null)return ss(e.innerRadius,t,0)}),YI=Ue([ex,pN],(e,t)=>{if(e!=null)return ss(e.outerRadius,t,t*.8)}),tK=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},ZI=Ue([ex],tK);Ue([hN,ZI],Q1);var JI=Ue([pN,XI,YI],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Ue([mN,JI],Q1);var QI=Ue([Cr,ex,XI,YI,$l,Wl],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:c,startAngle:u,endAngle:d}=t;return{cx:ss(o,s,s/2),cy:ss(c,i,i/2),innerRadius:r,outerRadius:n,startAngle:u,endAngle:d,clockWise:!1}}}),vn=(e,t)=>t,R0=(e,t,r)=>r;function gN(e){return e==null?void 0:e.id}var pa=e=>{var t=Cr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ef=e=>e.tooltip.settings.axisId,ga=e=>{var t=pa(e),r=Ef(e);return D0(e,t,r)},eT=Ue([ga],e=>e==null?void 0:e.dataKey);function tT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,o=new Map;return e.forEach(c=>{var u,d=(u=c.data)!==null&&u!==void 0?u:n;if(!(d==null||d.length===0)){var h=gN(c);d.forEach((p,v)=>{var x=i==null||s?v:String(An(p,i,null)),w=An(p,c.dataKey,0),j;o.has(x)?j=o.get(x):j={},Object.assign(j,{[h]:w}),o.set(x,j)})}}),Array.from(o.values())}function tx(e){return e.stackId!=null&&e.dataKey!=null}var rx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function nx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){rK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rK(e,t,r){return(t=nK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nK(e){var t=aK(e,"string");return typeof t=="symbol"?t:t+""}function aK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hb=[0,"auto"],Qs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},rT=(e,t)=>e.cartesianAxis.xAxis[t],Hl=(e,t)=>{var r=rT(e,t);return r??Qs},ei={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:hb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:k0},nT=(e,t)=>e.cartesianAxis.yAxis[t],Vl=(e,t)=>{var r=nT(e,t);return r??ei},sK={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},xN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??sK},En=(e,t,r)=>{switch(t){case"xAxis":return Hl(e,r);case"yAxis":return Vl(e,r);case"zAxis":return xN(e,r);case"angleAxis":return hN(e,r);case"radiusAxis":return mN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iK=(e,t,r)=>{switch(t){case"xAxis":return Hl(e,r);case"yAxis":return Vl(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},D0=(e,t,r)=>{switch(t){case"xAxis":return Hl(e,r);case"yAxis":return Vl(e,r);case"angleAxis":return hN(e,r);case"radiusAxis":return mN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},aT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function yN(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var vN=e=>e.graphicalItems.cartesianItems,oK=Ue([vn,R0],yN),bN=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),L0=Ue([vN,En,oK],bN,{memoizeOptions:{resultEqualityCheck:nx}}),sT=Ue([L0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(tx)),iT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),lK=Ue([L0],iT),wN=e=>e.map(t=>t.data).filter(Boolean).flat(1),cK=Ue([L0],wN,{memoizeOptions:{resultEqualityCheck:nx}}),NN=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},jN=Ue([cK,oN],NN),AN=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:An(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:An(s,n)}))):e.map(n=>({value:n})),ax=Ue([jN,En,L0],AN);function oT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function xp(e){if(zo(e)||e instanceof Date){var t=Number(e);if(os(t))return t}}function hA(e){if(Array.isArray(e)){var t=[xp(e[0]),xp(e[1])];return Mu(t)?t:void 0}var r=xp(e);if(r!=null)return[r,r]}function kf(e){return e.map(xp).filter(Iq)}function uK(e,t,r){return!r||typeof t!="number"||Fi(t)?[]:r.length?kf(r.flatMap(n=>{var s=An(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!os(i)||!os(o)))return[t-i,t+o]})):[]}var dK=Ue([sT,oN,ga],tT),lT=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,c]=i,u=c.map(gN);return[o,{stackedData:nW(e,u,r),graphicalItems:c}]}))},mb=Ue([dK,sT,O0],lT),cT=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=lW(e,s,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},fK=Ue([En],e=>e.allowDataOverflow),CN=e=>{var t;if(e==null||!("domain"in e))return hb;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=kf(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:hb},SN=Ue([En],CN),EN=Ue([SN,fK],TI),hK=Ue([mb,Hc,vn,EN],cT,{memoizeOptions:{resultEqualityCheck:rx}}),sx=e=>e.errorBars,mK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>oT(r,n)),Ig=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),c=Math.max(...i);return[o,c]}},kN=(e,t,r,n,s)=>{var i,o;if(r.length>0&&e.forEach(c=>{r.forEach(u=>{var d,h,p=(d=n[u.id])===null||d===void 0?void 0:d.filter(A=>oT(s,A)),v=An(c,(h=t.dataKey)!==null&&h!==void 0?h:u.dataKey),x=uK(c,v,p);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(i==null||w<i)&&(i=w),(o==null||j>o)&&(o=j)}var N=hA(v);N!=null&&(i=i==null?N[0]:Math.min(i,N[0]),o=o==null?N[1]:Math.max(o,N[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(c=>{var u=hA(An(c,t.dataKey));u!=null&&(i=i==null?u[0]:Math.min(i,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),os(i)&&os(o))return[i,o]},pK=Ue([jN,En,lK,sx,vn],kN,{memoizeOptions:{resultEqualityCheck:rx}});function gK(e){var{value:t}=e;if(zo(t)||t instanceof Date)return t}var xK=(e,t,r)=>{var n=e.map(gK).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&xk(n))?YP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},uT=e=>e.referenceElements.dots,Pf=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),yK=Ue([uT,vn,R0],Pf),dT=e=>e.referenceElements.areas,vK=Ue([dT,vn,R0],Pf),fT=e=>e.referenceElements.lines,bK=Ue([fT,vn,R0],Pf),hT=(e,t)=>{var r=kf(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wK=Ue(yK,vn,hT),mT=(e,t)=>{var r=kf(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},NK=Ue([vK,vn],mT),pT=(e,t)=>{var r=kf(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},jK=Ue(bK,vn,pT),AK=Ue(wK,jK,NK,(e,t,r)=>Ig(e,r,t)),PN=(e,t,r,n,s,i,o,c)=>{if(r!=null)return r;var u=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",d=u?Ig(n,i,s):Ig(i,s);return MG(t,d,e.allowDataOverflow)},CK=Ue([En,SN,EN,hK,pK,AK,Cr,vn],PN,{memoizeOptions:{resultEqualityCheck:rx}}),SK=[0,1],IN=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:u}=e,d=Xu(t,i);return d&&c==null?YP(0,r.length):u==="category"?xK(n,e,d):s==="expand"?SK:o}},TN=Ue([En,Cr,jN,ax,O0,vn,CK],IN),gT=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var c="scale".concat(A0(i));return c in xh?c:"point"}}},If=Ue([En,Cr,aT,uN,vn],gT);function EK(e){if(e!=null){if(e in xh)return xh[e]();var t="scale".concat(A0(e));if(t in xh)return xh[t]()}}function _N(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=EK(t);if(s!=null){var i=s.domain(r).range(n);return J$(i),i}}}var ON=(e,t,r)=>{var n=CN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Mu(e))return GG(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Mu(e))return KG(e,t.tickCount,t.allowDecimals)}},RN=Ue([TN,D0,If],ON),DN=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Mu(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],c=r[r.length-1];return[Math.min(s,i),Math.max(o,c)]}return t},kK=Ue([En,TN,RN,vn],DN),PK=Ue(ax,En,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(kf(e.map(c=>c.value))).sort((c,u)=>c-u);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),xT=Ue(PK,Cr,GI,ha,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!os(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=ss(r,e*i),c=e*i/2;return c-o-(c-o)/i*o}return 0}),IK=(e,t)=>{var r=Hl(e,t);return r==null||typeof r.padding!="string"?0:xT(e,"xAxis",t,r.padding)},TK=(e,t)=>{var r=Vl(e,t);return r==null||typeof r.padding!="string"?0:xT(e,"yAxis",t,r.padding)},_K=Ue(Hl,IK,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),OK=Ue(Vl,TK,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),RK=Ue([ha,_K,z1,U1,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),DK=Ue([ha,Cr,OK,z1,U1,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),M0=(e,t,r,n)=>{var s;switch(t){case"xAxis":return RK(e,r,n);case"yAxis":return DK(e,r,n);case"zAxis":return(s=xN(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return ZI(e);case"radiusAxis":return JI(e,r);default:return}},yT=Ue([En,M0],Q1),Tf=Ue([En,If,kK,yT],_N);Ue([L0,sx,vn],mK);function vT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ix=(e,t)=>t,ox=(e,t,r)=>r,LK=Ue(B1,ix,ox,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(vT)),MK=Ue(F1,ix,ox,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(vT)),bT=(e,t)=>({width:e.width,height:t.height}),BK=(e,t)=>{var r=typeof t.width=="number"?t.width:k0;return{width:r,height:e.height}},wT=Ue(ha,Hl,bT),FK=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},UK=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},zK=Ue(Wl,ha,LK,ix,ox,(e,t,r,n,s)=>{var i={},o;return r.forEach(c=>{var u=bT(t,c);o==null&&(o=FK(t,n,e));var d=n==="top"&&!s||n==="bottom"&&s;i[c.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),i}),$K=Ue($l,ha,MK,ix,ox,(e,t,r,n,s)=>{var i={},o;return r.forEach(c=>{var u=BK(t,c);o==null&&(o=UK(t,n,e));var d=n==="left"&&!s||n==="right"&&s;i[c.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),i}),WK=(e,t)=>{var r=Hl(e,t);if(r!=null)return zK(e,r.orientation,r.mirror)},qK=Ue([ha,Hl,WK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),HK=(e,t)=>{var r=Vl(e,t);if(r!=null)return $K(e,r.orientation,r.mirror)},VK=Ue([ha,Vl,HK,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),NT=Ue(ha,Vl,(e,t)=>{var r=typeof t.width=="number"?t.width:k0;return{width:r,height:e.height}}),mA=(e,t,r)=>{switch(t){case"xAxis":return wT(e,r).width;case"yAxis":return NT(e,r).height;default:return}},jT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,c=Xu(e,n),u=t.map(d=>d.value);if(o&&c&&i==="category"&&s&&xk(u))return u}},LN=Ue([Cr,ax,En,vn],jT),AT=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=Xu(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(c=>c.value)}},MN=Ue([Cr,ax,D0,vn],AT),pA=Ue([Cr,iK,If,Tf,LN,MN,M0,RN,vn],(e,t,r,n,s,i,o,c,u)=>{if(t==null)return null;var d=Xu(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:c,range:o,realScaleType:r,scale:n}}),GK=(e,t,r,n,s,i,o,c,u)=>{if(!(t==null||n==null)){var d=Xu(e,u),{type:h,ticks:p,tickCount:v}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=h==="category"&&n.bandwidth?n.bandwidth()/x:0;w=u==="angleAxis"&&i!=null&&i.length>=2?Aa(i[0]-i[1])*2*w:w;var j=p||s;if(j){var N=j.map((A,k)=>{var E=o?o.indexOf(A):A;return{index:k,coordinate:n(E)+w,value:A,offset:w}});return N.filter(A=>!Fi(A.coordinate))}return d&&c?c.map((A,k)=>({coordinate:n(A)+w,value:A,index:k,offset:w})):n.ticks?n.ticks(v).map(A=>({coordinate:n(A)+w,value:A,offset:w})):n.domain().map((A,k)=>({coordinate:n(A)+w,value:o?o[A]:A,index:k,offset:w}))}},CT=Ue([Cr,D0,If,Tf,RN,M0,LN,MN,vn],GK),KK=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var c=Xu(e,o),{tickCount:u}=t,d=0;return d=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Aa(n[0]-n[1])*2*d:d,c&&i?i.map((h,p)=>({coordinate:r(h)+d,value:h,index:p,offset:d})):r.ticks?r.ticks(u).map(h=>({coordinate:r(h)+d,value:h,offset:d})):r.domain().map((h,p)=>({coordinate:r(h)+d,value:s?s[h]:h,index:p,offset:d}))}},cf=Ue([Cr,D0,Tf,M0,LN,MN,vn],KK),uf=Ue(En,Tf,(e,t)=>{if(!(e==null||t==null))return Pg(Pg({},e),{},{scale:t})}),XK=Ue([En,If,TN,yT],_N);Ue((e,t,r)=>xN(e,r),XK,(e,t)=>{if(!(e==null||t==null))return Pg(Pg({},e),{},{scale:t})});var YK=Ue([Cr,B1,F1],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),ST=e=>e.options.defaultTooltipEventType,ET=e=>e.options.validateTooltipEventTypes;function kT(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function BN(e,t){var r=ST(e),n=ET(e);return kT(t,r,n)}function ZK(e){return Pt(t=>BN(t,e))}var PT=(e,t)=>{var r,n=Number(t);if(!(Fi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},JK=e=>e.tooltip.settings,pc={active:!1,index:null,dataKey:void 0,coordinate:void 0},QK={itemInteraction:{click:pc,hover:pc},axisInteraction:{click:pc,hover:pc},keyboardInteraction:pc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},IT=mi({name:"tooltip",initialState:QK,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:gs()},removeTooltipEntrySettings:{reducer(e,t){var r=kl(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:gs()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:eX,removeTooltipEntrySettings:tX,setTooltipSettingsState:rX,setActiveMouseOverItemIndex:TT,mouseLeaveItem:nX,mouseLeaveChart:_T,setActiveClickItemIndex:aX,setMouseOverAxisIndex:OT,setMouseClickAxisIndex:sX,setSyncInteraction:pb,setKeyboardInteraction:gb}=IT.actions,iX=IT.reducer;function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(n){oX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oX(e,t,r){return(t=lX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uX(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function dX(e){return e.index!=null}var RT=(e,t,r,n)=>{if(t==null)return pc;var s=uX(e,t,r);if(s==null)return pc;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(dX(s)){if(i)return zm(zm({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return zm(zm({},pc),{},{coordinate:s.coordinate})},FN=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!os(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},DT=(e,t,r,n,s,i,o,c)=>{if(!(i==null||c==null)){var u=o[0],d=u==null?void 0:c(u.positions,i);if(d!=null)return d;var h=s==null?void 0:s[Number(i)];if(h)switch(r){case"horizontal":return{x:h.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:h.coordinate}}}},LT=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},B0=e=>e.options.tooltipPayloadSearcher,_f=e=>e.tooltip;function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){fX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fX(e,t,r){return(t=hX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hX(e){var t=mX(e,"string");return typeof t=="symbol"?t:t+""}function mX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pX(e,t){return e??t}var MT=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:c,computedData:u,dataStartIndex:d,dataEndIndex:h}=r,p=[];return e.reduce((v,x)=>{var w,{dataDefinedOnItem:j,settings:N}=x,A=pX(j,c),k=Array.isArray(A)?wP(A,d,h):A,E=(w=N==null?void 0:N.dataKey)!==null&&w!==void 0?w:n,_=N==null?void 0:N.nameKey,O;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&o==="axis"?O=$U(k,n,s):O=i(k,t,u,_),Array.isArray(O))O.forEach(F=>{var U=yA(yA({},N),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});v.push(t6({tooltipEntrySettings:U,dataKey:F.dataKey,payload:F.payload,value:An(F.payload,F.dataKey),name:F.name}))});else{var B;v.push(t6({tooltipEntrySettings:N,dataKey:E,payload:O,value:An(O,E),name:(B=An(O,_))!==null&&B!==void 0?B:N==null?void 0:N.name}))}return v},p)}},UN=Ue([ga,Cr,aT,uN,pa],gT),gX=Ue([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),xX=Ue([pa,Ef],yN),F0=Ue([gX,ga,xX],bN,{memoizeOptions:{resultEqualityCheck:nx}}),yX=Ue([F0],e=>e.filter(tx)),vX=Ue([F0],wN,{memoizeOptions:{resultEqualityCheck:nx}}),Of=Ue([vX,Hc],NN),bX=Ue([yX,Hc,ga],tT),zN=Ue([Of,ga,F0],AN),BT=Ue([ga],CN),wX=Ue([ga],e=>e.allowDataOverflow),FT=Ue([BT,wX],TI),NX=Ue([F0],e=>e.filter(tx)),jX=Ue([bX,NX,O0],lT),AX=Ue([jX,Hc,pa,FT],cT),CX=Ue([F0],iT),SX=Ue([Of,ga,CX,sx,pa],kN,{memoizeOptions:{resultEqualityCheck:rx}}),EX=Ue([uT,pa,Ef],Pf),kX=Ue([EX,pa],hT),PX=Ue([dT,pa,Ef],Pf),IX=Ue([PX,pa],mT),TX=Ue([fT,pa,Ef],Pf),_X=Ue([TX,pa],pT),OX=Ue([kX,_X,IX],Ig),RX=Ue([ga,BT,FT,AX,SX,OX,Cr,pa],PN),UT=Ue([ga,Cr,Of,zN,O0,pa,RX],IN),DX=Ue([UT,ga,UN],ON),LX=Ue([ga,UT,DX,pa],DN),zT=e=>{var t=pa(e),r=Ef(e),n=!1;return M0(e,t,r,n)},$T=Ue([ga,zT],Q1),WT=Ue([ga,UN,LX,$T],_N),MX=Ue([Cr,zN,ga,pa],jT),BX=Ue([Cr,zN,ga,pa],AT),FX=(e,t,r,n,s,i,o,c)=>{if(t){var{type:u}=t,d=Xu(e,c);if(n){var h=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=u==="category"&&n.bandwidth?n.bandwidth()/h:0;return p=c==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Aa(s[0]-s[1])*2*p:p,d&&o?o.map((v,x)=>({coordinate:n(v)+p,value:v,index:x,offset:p})):n.domain().map((v,x)=>({coordinate:n(v)+p,value:i?i[v]:v,index:x,offset:p}))}}},Gl=Ue([Cr,ga,UN,WT,zT,MX,BX,pa],FX),$N=Ue([ST,ET,JK],(e,t,r)=>kT(r.shared,e,t)),qT=e=>e.tooltip.settings.trigger,WN=e=>e.tooltip.settings.defaultIndex,lx=Ue([_f,$N,qT,WN],RT),Fu=Ue([lx,Of],FN),HT=Ue([Gl,Fu],PT),VT=Ue([lx],e=>{if(e)return e.dataKey}),GT=Ue([_f,$N,qT,WN],LT),UX=Ue([$l,Wl,Cr,ha,Gl,WN,GT,B0],DT),zX=Ue([lx,UX],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),$X=Ue([lx],e=>e.active),WX=Ue([GT,Fu,Hc,eT,HT,B0,$N],MT);Ue([WX],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(r),!0).forEach(function(n){qX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qX(e,t,r){return(t=HX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HX(e){var t=VX(e,"string");return typeof t=="symbol"?t:t+""}function VX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GX=()=>Pt(ga),KX=()=>{var e=GX(),t=Pt(Gl),r=Pt(WT);return I5(bA(bA({},e),{},{scale:r}),t)},XX=()=>Pt(uN),qN=(e,t)=>t,KT=(e,t,r)=>r,HN=(e,t,r,n)=>n,YX=Ue(Gl,e=>T1(e,t=>t.coordinate)),VN=Ue([_f,qN,KT,HN],RT),XT=Ue([VN,Of],FN),ZX=(e,t,r)=>{if(t!=null){var n=_f(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},YT=Ue([_f,qN,KT,HN],LT),Tg=Ue([$l,Wl,Cr,ha,Gl,HN,YT,B0],DT),JX=Ue([VN,Tg],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ZT=Ue(Gl,XT,PT),QX=Ue([YT,XT,Hc,eT,ZT,B0,qN],MT),eY=Ue([VN],e=>({isActive:e.active,activeIndex:e.index})),tY=(e,t,r,n,s,i,o,c)=>{if(!(!e||!t||!n||!s||!i)){var u=cW(e.chartX,e.chartY,t,r,c);if(u){var d=dW(u,t),h=Y$(d,o,i,n,s),p=uW(t,i,h,u);return{activeIndex:String(h),activeCoordinate:p}}}};function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xb.apply(null,arguments)}function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){rY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rY(e,t,r){return(t=nY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sY(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:c,tooltipEventType:u,chartName:d}=e,h=t,p=r,v=n;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var x,w;if(d==="ScatterChart")x=h,w=jq;else if(d==="BarChart")x=Aq(o,h,s,i),w=WP;else if(o==="radial"){var{cx:j,cy:N,radius:A,startAngle:k,endAngle:E}=qP(h);x={cx:j,cy:N,startAngle:k,endAngle:E,innerRadius:A,outerRadius:A},w=VP}else x={points:oH(o,h,s)},w=BP;var _=typeof c=="object"&&"className"in c?c.className:void 0,O=$m($m($m($m({stroke:"#ccc",pointerEvents:"none"},s),x),n0(c)),{},{payload:p,payloadIndex:v,className:Ur("recharts-tooltip-cursor",_)});return P.isValidElement(c)?P.cloneElement(c,O):P.createElement(w,O)}function iY(e){var t=KX(),r=OP(),n=D5(),s=XX();return P.createElement(sY,xb({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var JT=P.createContext(null),oY=()=>P.useContext(JT),QT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function i(u,d,h,p,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new s(h,p||u,v),w=r?r+d:d;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],x]:u._events[w].push(x):(u._events[w]=x,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)t.call(h,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},c.prototype.listeners=function(d){var h=r?r+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,x=p.length,w=new Array(x);v<x;v++)w[v]=p[v].fn;return w},c.prototype.listenerCount=function(d){var h=r?r+d:d,p=this._events[h];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,h,p,v,x,w){var j=r?r+d:d;if(!this._events[j])return!1;var N=this._events[j],A=arguments.length,k,E;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),A){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,h),!0;case 3:return N.fn.call(N.context,h,p),!0;case 4:return N.fn.call(N.context,h,p,v),!0;case 5:return N.fn.call(N.context,h,p,v,x),!0;case 6:return N.fn.call(N.context,h,p,v,x,w),!0}for(E=1,k=new Array(A-1);E<A;E++)k[E-1]=arguments[E];N.fn.apply(N.context,k)}else{var _=N.length,O;for(E=0;E<_;E++)switch(N[E].once&&this.removeListener(d,N[E].fn,void 0,!0),A){case 1:N[E].fn.call(N[E].context);break;case 2:N[E].fn.call(N[E].context,h);break;case 3:N[E].fn.call(N[E].context,h,p);break;case 4:N[E].fn.call(N[E].context,h,p,v);break;default:if(!k)for(O=1,k=new Array(A-1);O<A;O++)k[O-1]=arguments[O];N[E].fn.apply(N[E].context,k)}}return!0},c.prototype.on=function(d,h,p){return i(this,d,h,p,!1)},c.prototype.once=function(d,h,p){return i(this,d,h,p,!0)},c.prototype.removeListener=function(d,h,p,v){var x=r?r+d:d;if(!this._events[x])return this;if(!h)return o(this,x),this;var w=this._events[x];if(w.fn)w.fn===h&&(!v||w.once)&&(!p||w.context===p)&&o(this,x);else{for(var j=0,N=[],A=w.length;j<A;j++)(w[j].fn!==h||v&&!w[j].once||p&&w[j].context!==p)&&N.push(w[j]);N.length?this._events[x]=N.length===1?N[0]:N:o(this,x)}return this},c.prototype.removeAllListeners=function(d){var h;return d?(h=r?r+d:d,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(QT);var lY=QT.exports;const cY=Wo(lY);var h0=new cY,yb="recharts.syncEvent.tooltip",NA="recharts.syncEvent.brush";function e_(e,t){if(t){var r=Number.parseInt(t,10);if(!Fi(r))return e==null?void 0:e[r]}}var uY={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},t_=mi({name:"options",initialState:uY,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dY=t_.reducer,{createEventEmitter:fY}=t_.actions;function hY(e){return e.tooltip.syncInteraction}var mY={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},r_=mi({name:"chartData",initialState:mY,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:jA,setDataStartEndIndexes:pY,setComputedData:Ude}=r_.actions,gY=r_.reducer,xY=["x","y"];function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(n){yY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yY(e,t,r){return(t=vY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vY(e){var t=bY(e,"string");return typeof t=="symbol"?t:t+""}function bY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wY(e,t){if(e==null)return{};var r,n,s=NY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var n_=()=>{};function jY(){var e=Pt(dN),t=Pt(fN),r=yn(),n=Pt(KI),s=Pt(Gl),i=D5(),o=$1(),c=Pt(u=>u.rootProps.className);P.useEffect(()=>{if(e==null)return n_;var u=(d,h,p)=>{if(t!==p&&e===d){if(n==="index"){var v;if(o&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate&&h.payload.sourceViewBox){var x=h.payload.coordinate,{x:w,y:j}=x,N=wY(x,xY),{x:A,y:k,width:E,height:_}=h.payload.sourceViewBox,O=ld(ld({},N),{},{x:o.x+(E?(w-A)/E:0)*o.width,y:o.y+(_?(j-k)/_:0)*o.height});r(ld(ld({},h),{},{payload:ld(ld({},h.payload),{},{coordinate:O})}))}else r(h);return}if(s!=null){var B;if(typeof n=="function"){var F={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},U=n(s,F);B=s[U]}else n==="value"&&(B=s.find(ue=>String(ue.value)===h.payload.label));var{coordinate:L}=h.payload;if(B==null||h.payload.active===!1||L==null||o==null){r(pb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:K,y:z}=L,q=Math.min(K,o.x+o.width),Q=Math.min(z,o.y+o.height),G={x:i==="horizontal"?B.coordinate:q,y:i==="horizontal"?Q:B.coordinate},H=pb({active:h.payload.active,coordinate:G,dataKey:h.payload.dataKey,index:String(B.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox});r(H)}}};return h0.on(yb,u),()=>{h0.off(yb,u)}},[c,r,t,e,n,s,i,o])}function AY(){var e=Pt(dN),t=Pt(fN),r=yn();P.useEffect(()=>{if(e==null)return n_;var n=(s,i,o)=>{t!==o&&e===s&&r(pY(i))};return h0.on(NA,n),()=>{h0.off(NA,n)}},[r,t,e])}function CY(){var e=yn();P.useEffect(()=>{e(fY())},[e]),jY(),AY()}function SY(e,t,r,n,s,i){var o=Pt(x=>ZX(x,e,t)),c=Pt(fN),u=Pt(dN),d=Pt(KI),h=Pt(hY),p=h==null?void 0:h.active,v=$1();P.useEffect(()=>{if(!p&&u!=null&&c!=null){var x=pb({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:v});h0.emit(yb,u,x,c)}},[p,r,o,s,n,c,u,d,i,v])}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(n){EY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EY(e,t,r){return(t=kY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kY(e){var t=PY(e,"string");return typeof t=="symbol"?t:t+""}function PY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IY(e){return e.dataKey}function TY(e,t){return P.isValidElement(e)?P.cloneElement(e,t):typeof e=="function"?P.createElement(e,t):P.createElement(tq,t)}var EA=[],_Y={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Yu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vb(e){var t=Ns(e,_Y),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:h,position:p,reverseDirection:v,useTranslate3d:x,wrapperStyle:w,cursor:j,shared:N,trigger:A,defaultIndex:k,portal:E,axisId:_}=t,O=yn(),B=typeof k=="number"?String(k):k;P.useEffect(()=>{O(rX({shared:N,trigger:A,axisId:_,active:r,defaultIndex:B}))},[O,N,A,_,r,B]);var F=$1(),U=MP(),L=ZK(N),{activeIndex:K,isActive:z}=Pt(ve=>eY(ve,L,A,B)),q=Pt(ve=>QX(ve,L,A,B)),Q=Pt(ve=>ZT(ve,L,A,B)),G=Pt(ve=>JX(ve,L,A,B)),H=q,ue=oY(),ye=r??z,[de,we]=Gk([H,ye]),Ee=L==="axis"?Q:void 0;SY(L,A,G,Ee,K,ye);var ie=E??ue;if(ie==null)return null;var V=H??EA;ye||(V=EA),c&&V.length&&(V=Dk(H.filter(ve=>ve.value!=null&&(ve.hide!==!0||t.includeHidden)),h,IY));var se=V.length>0,ne=P.createElement(lq,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:u,active:ye,coordinate:G,hasPayload:se,offset:d,position:p,reverseDirection:v,useTranslate3d:x,viewBox:F,wrapperStyle:w,lastBoundingBox:de,innerRef:we,hasPortalFromProps:!!E},TY(o,SA(SA({},t),{},{payload:V,label:Ee,active:ye,coordinate:G,accessibilityLayer:U})));return P.createElement(P.Fragment,null,Jw.createPortal(ne,ie),ye&&P.createElement(iY,{cursor:j,tooltipEventType:L,coordinate:G,payload:H,index:K}))}var Rf=e=>null;Rf.displayName="Cell";function OY(e,t,r){return(t=RY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RY(e){var t=DY(e,"string");return typeof t=="symbol"?t:t+""}function DY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class LY{constructor(t){OY(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(n){BY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BY(e,t,r){return(t=FY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zY={cacheSize:2e3,enableCache:!0},a_=MY({},zY),PA=new LY(a_.cacheSize),$Y={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},IA="recharts_measurement_span";function WY(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(c)}var TA=(e,t)=>{try{var r=document.getElementById(IA);r||(r=document.createElement("span"),r.setAttribute("id",IA),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,$Y,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Eh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Yu.isSsr)return{width:0,height:0};if(!a_.enableCache)return TA(t,r);var n=WY(t,r),s=PA.get(n);if(s)return s;var i=TA(t,r);return PA.set(n,i),i},_A=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,OA=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qY=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HY=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,s_={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},VY=Object.keys(s_),Sd="NaN";function GY(e,t){return e*s_[t]}class Ps{static parse(t){var r,[,n,s]=(r=HY.exec(t))!==null&&r!==void 0?r:[];return new Ps(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Fi(t)&&(this.unit=""),r!==""&&!qY.test(r)&&(this.num=NaN,this.unit=""),VY.includes(r)&&(this.num=GY(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fi(this.num)}}function i_(e){if(e.includes(Sd))return Sd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=_A.exec(t))!==null&&r!==void 0?r:[],o=Ps.parse(n??""),c=Ps.parse(i??""),u=s==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return Sd;t=t.replace(_A,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,h,p,v]=(d=OA.exec(t))!==null&&d!==void 0?d:[],x=Ps.parse(h??""),w=Ps.parse(v??""),j=p==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Sd;t=t.replace(OA,j.toString())}return t}var RA=/\(([^()]*)\)/;function KY(e){for(var t=e,r;(r=RA.exec(t))!=null;){var[,n]=r;t=t.replace(RA,i_(n))}return t}function XY(e){var t=e.replace(/\s+/g,"");return t=KY(t),t=i_(t),t}function YY(e){try{return XY(e)}catch{return Sd}}function q2(e){var t=YY(e.slice(5,-1));return t===Sd?"":t}var ZY=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JY=["dx","dy","angle","className","breakAll"];function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(null,arguments)}function DA(e,t){if(e==null)return{};var r,n,s=QY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var o_=/[ \f\n\r\t\v\u2028\u2029]+/,l_=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Ea(t)||(r?s=t.toString().split(""):s=t.toString().split(o_));var i=s.map(c=>({word:c,width:Eh(c,n).width})),o=r?0:Eh(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},eZ=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:c,breakAll:u}=e,d=_t(i),h=o,p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce((q,Q)=>{var{word:G,width:H}=Q,ue=q[q.length-1];if(ue&&(n==null||s||ue.width+H+r<Number(n)))ue.words.push(G),ue.width+=H+r;else{var ye={words:[G],width:H};q.push(ye)}return q},[])},v=p(t),x=K=>K.reduce((z,q)=>z.width>q.width?z:q);if(!d||s)return v;var w=v.length>i||x(v).width>Number(n);if(!w)return v;for(var j="…",N=K=>{var z=h.slice(0,K),q=l_({breakAll:u,style:c,children:z+j}).wordsWithComputedWidth,Q=p(q),G=Q.length>i||x(Q).width>Number(n);return[G,Q]},A=0,k=h.length-1,E=0,_;A<=k&&E<=h.length-1;){var O=Math.floor((A+k)/2),B=O-1,[F,U]=N(B),[L]=N(O);if(!F&&!L&&(A=O+1),F&&L&&(k=O-1),!F&&L){_=U;break}E++}return _||v},LA=e=>{var t=Ea(e)?[]:e.toString().split(o_);return[{words:t}]},tZ=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Yu.isSsr){var c,u,d=l_({breakAll:i,children:n,style:s});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;c=h,u=p}else return LA(n);return eZ({breakAll:i,children:n,maxLines:o,style:s},c,u,t,r)}return LA(n)},MA="#808080",cx=P.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:u="end",fill:d=MA}=e,h=DA(e,ZY),p=P.useMemo(()=>tZ({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:o,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,o,h.style,h.width]),{dx:v,dy:x,angle:w,className:j,breakAll:N}=h,A=DA(h,JY);if(!zo(r)||!zo(n)||p.length===0)return null;var k=r+(_t(v)?v:0),E=n+(_t(x)?x:0),_;switch(u){case"start":_=q2("calc(".concat(i,")"));break;case"middle":_=q2("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:_=q2("calc(".concat(p.length-1," * -").concat(s,")"));break}var O=[];if(o){var B=p[0].width,{width:F}=h;O.push("scale(".concat(_t(F)?F/B:1,")"))}return w&&O.push("rotate(".concat(w,", ").concat(k,", ").concat(E,")")),O.length&&(A.transform=O.join(" ")),P.createElement("text",bb({},Bi(A),{ref:t,x:k,y:E,className:Ur("recharts-text",j),textAnchor:c,fill:d.includes("url")?MA:d}),p.map((U,L)=>{var K=U.words.join(N?"":" ");return P.createElement("tspan",{x:k,dy:L===0?_:s,key:"".concat(K,"-").concat(L)},K)}))});cx.displayName="Text";var rZ=["labelRef"];function nZ(e,t){if(e==null)return{};var r,n,s=aZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function aZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(n){sZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sZ(e,t,r){return(t=iZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iZ(e){var t=oZ(e,"string");return typeof t=="symbol"?t:t+""}function oZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wl.apply(null,arguments)}var c_=P.createContext(null),lZ=e=>{var{x:t,y:r,width:n,height:s,children:i}=e,o=P.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return P.createElement(c_.Provider,{value:o},i)},u_=()=>{var e=P.useContext(c_),t=$1();return e||t},cZ=P.createContext(null),uZ=()=>{var e=P.useContext(cZ),t=Pt(QI);return e||t},dZ=e=>{var{value:t,formatter:r}=e,n=Ea(e.children)?t:e.children;return typeof r=="function"?r(n):n},GN=e=>e!=null&&typeof e=="function",fZ=(e,t)=>{var r=Aa(t-e),n=Math.min(Math.abs(t-e),360);return r*n},hZ=(e,t,r,n,s)=>{var{offset:i,className:o}=e,{cx:c,cy:u,innerRadius:d,outerRadius:h,startAngle:p,endAngle:v,clockWise:x}=s,w=(d+h)/2,j=fZ(p,v),N=j>=0?1:-1,A,k;switch(t){case"insideStart":A=p+N*i,k=x;break;case"insideEnd":A=v-N*i,k=!x;break;case"end":A=v+N*i,k=x;break;default:throw new Error("Unsupported position ".concat(t))}k=j<=0?k:!k;var E=ea(c,u,w,A),_=ea(c,u,w,A+(k?1:-1)*359),O="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(k?0:1,`,
    `).concat(_.x,",").concat(_.y),B=Ea(e.id)?a0("recharts-radial-line-"):e.id;return P.createElement("text",wl({},n,{dominantBaseline:"central",className:Ur("recharts-radial-bar-label",o)}),P.createElement("defs",null,P.createElement("path",{id:B,d:O})),P.createElement("textPath",{xlinkHref:"#".concat(B)},r))},mZ=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:c,endAngle:u}=e,d=(c+u)/2;if(r==="outside"){var{x:h,y:p}=ea(n,s,o+t,d);return{x:h,y:p,textAnchor:h>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(i+o)/2,{x,y:w}=ea(n,s,v,d);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},d_=e=>"cx"in e&&_t(e.cx),pZ=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!d_(r)&&(i=r);var{x:o,y:c,width:u,height:d}=t,h=d>=0?1:-1,p=h*n,v=h>0?"end":"start",x=h>0?"start":"end",w=u>=0?1:-1,j=w*n,N=w>0?"end":"start",A=w>0?"start":"end";if(s==="top"){var k={x:o+u/2,y:c-h*n,textAnchor:"middle",verticalAnchor:v};return Fn(Fn({},k),i?{height:Math.max(c-i.y,0),width:u}:{})}if(s==="bottom"){var E={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:x};return Fn(Fn({},E),i?{height:Math.max(i.y+i.height-(c+d),0),width:u}:{})}if(s==="left"){var _={x:o-j,y:c+d/2,textAnchor:N,verticalAnchor:"middle"};return Fn(Fn({},_),i?{width:Math.max(_.x-i.x,0),height:d}:{})}if(s==="right"){var O={x:o+u+j,y:c+d/2,textAnchor:A,verticalAnchor:"middle"};return Fn(Fn({},O),i?{width:Math.max(i.x+i.width-O.x,0),height:d}:{})}var B=i?{width:u,height:d}:{};return s==="insideLeft"?Fn({x:o+j,y:c+d/2,textAnchor:A,verticalAnchor:"middle"},B):s==="insideRight"?Fn({x:o+u-j,y:c+d/2,textAnchor:N,verticalAnchor:"middle"},B):s==="insideTop"?Fn({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:x},B):s==="insideBottom"?Fn({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:v},B):s==="insideTopLeft"?Fn({x:o+j,y:c+p,textAnchor:A,verticalAnchor:x},B):s==="insideTopRight"?Fn({x:o+u-j,y:c+p,textAnchor:N,verticalAnchor:x},B):s==="insideBottomLeft"?Fn({x:o+j,y:c+d-p,textAnchor:A,verticalAnchor:v},B):s==="insideBottomRight"?Fn({x:o+u-j,y:c+d-p,textAnchor:N,verticalAnchor:v},B):s&&typeof s=="object"&&(_t(s.x)||Dl(s.x))&&(_t(s.y)||Dl(s.y))?Fn({x:o+ss(s.x,u),y:c+ss(s.y,d),textAnchor:"end",verticalAnchor:"end"},B):Fn({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},B)},gZ={offset:5};function fc(e){var t=Ns(e,gZ),{viewBox:r,position:n,value:s,children:i,content:o,className:c="",textBreakAll:u,labelRef:d}=t,h=uZ(),p=u_(),v=n==="center"?p:h??p,x=r||v;if(!x||Ea(s)&&Ea(i)&&!P.isValidElement(o)&&typeof o!="function")return null;var w=Fn(Fn({},t),{},{viewBox:x});if(P.isValidElement(o)){var{labelRef:j}=w,N=nZ(w,rZ);return P.cloneElement(o,N)}var A;if(typeof o=="function"){if(A=P.createElement(o,w),P.isValidElement(A))return A}else A=dZ(t);var k=d_(x),E=Bi(t);if(k&&(n==="insideStart"||n==="insideEnd"||n==="end"))return hZ(t,n,A,E,x);var _=k?mZ(x,t.offset,t.position):pZ(t,x);return P.createElement(cx,wl({ref:d,className:Ur("recharts-label",c)},E,_,{breakAll:u}),A)}fc.displayName="Label";var xZ=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?P.createElement(fc,wl({key:"label-implicit"},n)):zo(e)?P.createElement(fc,wl({key:"label-implicit",value:e},n)):P.isValidElement(e)?e.type===fc?P.cloneElement(e,Fn({key:"label-implicit"},n)):P.createElement(fc,wl({key:"label-implicit",content:e},n)):GN(e)?P.createElement(fc,wl({key:"label-implicit",content:e},n)):e&&typeof e=="object"?P.createElement(fc,wl({},e,{key:"label-implicit"},n)):null};function yZ(e){var{label:t,labelRef:r}=e,n=u_();return xZ(t,n,r)||null}var f_={},h_={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(h_);var m_={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(m_);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h_,r=m_,n=P1;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(f_);var vZ=f_.last;const bZ=Wo(vZ);var wZ=["valueAccessor"],NZ=["dataKey","clockWise","id","textBreakAll"];function _g(){return _g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_g.apply(null,arguments)}function FA(e,t){if(e==null)return{};var r,n,s=jZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AZ=e=>Array.isArray(e.value)?bZ(e.value):e.value,p_=P.createContext(void 0),CZ=p_.Provider,g_=P.createContext(void 0),SZ=g_.Provider;function EZ(){return P.useContext(p_)}function kZ(){return P.useContext(g_)}function yp(e){var{valueAccessor:t=AZ}=e,r=FA(e,wZ),{dataKey:n,clockWise:s,id:i,textBreakAll:o}=r,c=FA(r,NZ),u=EZ(),d=kZ(),h=u||d;return!h||!h.length?null:P.createElement(Fs,{className:"recharts-label-list"},h.map((p,v)=>{var x,w=Ea(n)?t(p,v):An(p&&p.payload,n),j=Ea(i)?{}:{id:"".concat(i,"-").concat(v)};return P.createElement(fc,_g({key:"label-".concat(v)},Bi(p),c,j,{fill:(x=r.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:o,viewBox:p.viewBox,index:v}))}))}yp.displayName="LabelList";function x_(e){var{label:t}=e;return t?t===!0?P.createElement(yp,{key:"labelList-implicit"}):P.isValidElement(t)||GN(t)?P.createElement(yp,{key:"labelList-implicit",content:t}):typeof t=="object"?P.createElement(yp,_g({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var y_=e=>e.graphicalItems.polarItems,PZ=Ue([vn,R0],yN),ux=Ue([y_,En,PZ],bN),IZ=Ue([ux],wN),dx=Ue([IZ,iN],NN),TZ=Ue([dx,En,ux],AN);Ue([dx,En,ux],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(s=>{var i,o=An(n,(i=t.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:An(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var UA=()=>{},_Z=Ue([dx,En,ux,sx,vn],kN),OZ=Ue([En,SN,EN,UA,_Z,UA,Cr,vn],PN),v_=Ue([En,Cr,dx,TZ,O0,vn,OZ],IN),RZ=Ue([v_,En,If],ON);Ue([En,v_,RZ,vn],DN);var DZ={radiusAxis:{},angleAxis:{}},b_=mi({name:"polarAxis",initialState:DZ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zde,removeRadiusAxis:$de,addAngleAxis:Wde,removeAngleAxis:qde}=b_.actions,LZ=b_.reducer;function zA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(r),!0).forEach(function(n){MZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MZ(e,t,r){return(t=BZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BZ(e){var t=FZ(e,"string");return typeof t=="symbol"?t:t+""}function FZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UZ=(e,t)=>t,KN=Ue([y_,UZ],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),zZ=[],XN=(e,t,r)=>(r==null?void 0:r.length)===0?zZ:r,w_=Ue([iN,KN,XN],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var s;if((t==null?void 0:t.data)!=null&&t.data.length>0?s=t.data:s=n,(!s||!s.length)&&r!=null&&(s=r.map(i=>$A($A({},t.presentationProps),i.props))),s!=null)return s}}),$Z=Ue([w_,KN,XN],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,s)=>{var i,o=An(n,t.nameKey,t.name),c;return r!=null&&(i=r[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[s].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=t.fill,{value:M1(o,t.dataKey),color:c,payload:n,type:t.legendType}})}),WZ=Ue([w_,KN,XN,ha],(e,t,r,n)=>{if(!(t==null||e==null))return WJ({offset:n,pieSettings:t,displayedData:e,cells:r})}),N_={exports:{}},zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=Symbol.for("react.element"),ZN=Symbol.for("react.portal"),fx=Symbol.for("react.fragment"),hx=Symbol.for("react.strict_mode"),mx=Symbol.for("react.profiler"),px=Symbol.for("react.provider"),gx=Symbol.for("react.context"),qZ=Symbol.for("react.server_context"),xx=Symbol.for("react.forward_ref"),yx=Symbol.for("react.suspense"),vx=Symbol.for("react.suspense_list"),bx=Symbol.for("react.memo"),wx=Symbol.for("react.lazy"),HZ=Symbol.for("react.offscreen"),j_;j_=Symbol.for("react.module.reference");function qi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case YN:switch(e=e.type,e){case fx:case mx:case hx:case yx:case vx:return e;default:switch(e=e&&e.$$typeof,e){case qZ:case gx:case xx:case wx:case bx:case px:return e;default:return t}}case ZN:return t}}}zr.ContextConsumer=gx;zr.ContextProvider=px;zr.Element=YN;zr.ForwardRef=xx;zr.Fragment=fx;zr.Lazy=wx;zr.Memo=bx;zr.Portal=ZN;zr.Profiler=mx;zr.StrictMode=hx;zr.Suspense=yx;zr.SuspenseList=vx;zr.isAsyncMode=function(){return!1};zr.isConcurrentMode=function(){return!1};zr.isContextConsumer=function(e){return qi(e)===gx};zr.isContextProvider=function(e){return qi(e)===px};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===YN};zr.isForwardRef=function(e){return qi(e)===xx};zr.isFragment=function(e){return qi(e)===fx};zr.isLazy=function(e){return qi(e)===wx};zr.isMemo=function(e){return qi(e)===bx};zr.isPortal=function(e){return qi(e)===ZN};zr.isProfiler=function(e){return qi(e)===mx};zr.isStrictMode=function(e){return qi(e)===hx};zr.isSuspense=function(e){return qi(e)===yx};zr.isSuspenseList=function(e){return qi(e)===vx};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fx||e===mx||e===hx||e===yx||e===vx||e===HZ||typeof e=="object"&&e!==null&&(e.$$typeof===wx||e.$$typeof===bx||e.$$typeof===px||e.$$typeof===gx||e.$$typeof===xx||e.$$typeof===j_||e.getModuleId!==void 0)};zr.typeOf=qi;N_.exports=zr;var VZ=N_.exports,WA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",qA=null,H2=null,A_=e=>{if(e===qA&&Array.isArray(H2))return H2;var t=[];return P.Children.forEach(e,r=>{Ea(r)||(VZ.isFragment(r)?t=t.concat(A_(r.props.children)):t.push(r))}),H2=t,qA=e,t};function JN(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>WA(s)):n=[WA(t)],A_(e).forEach(s=>{var i=Ru(s,"type.displayName")||Ru(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var C_={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(C_);var GZ=C_.isPlainObject;const KZ=Wo(GZ);function HA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function VA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(r),!0).forEach(function(n){XZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XZ(e,t,r){return(t=YZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YZ(e){var t=ZZ(e,"string");return typeof t=="symbol"?t:t+""}function ZZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Og.apply(null,arguments)}var GA=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},JZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QZ=e=>{var t=Ns(e,JZ),{x:r,y:n,upperWidth:s,lowerWidth:i,height:o,className:c}=t,{animationEasing:u,animationDuration:d,animationBegin:h,isUpdateAnimationActive:p}=t,v=P.useRef(null),[x,w]=P.useState(-1),j=P.useRef(s),N=P.useRef(i),A=P.useRef(o),k=P.useRef(r),E=P.useRef(n),_=H1(e,"trapezoid-");if(P.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var G=v.current.getTotalLength();G&&w(G)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||o!==+o||s===0&&i===0||o===0)return null;var O=Ur("recharts-trapezoid",c);if(!p)return P.createElement("g",null,P.createElement("path",Og({},Bi(t),{className:O,d:GA(r,n,s,i,o)})));var B=j.current,F=N.current,U=A.current,L=k.current,K=E.current,z="0px ".concat(x===-1?1:x,"px"),q="".concat(x,"px 0px"),Q=FP(["strokeDasharray"],d,u);return P.createElement(q1,{animationId:_,key:_,canBegin:x>0,duration:d,easing:u,isActive:p,begin:h},G=>{var H=Ua(B,s,G),ue=Ua(F,i,G),ye=Ua(U,o,G),de=Ua(L,r,G),we=Ua(K,n,G);v.current&&(j.current=H,N.current=ue,A.current=ye,k.current=de,E.current=we);var Ee=G>0?{transition:Q,strokeDasharray:q}:{strokeDasharray:z};return P.createElement("path",Og({},Bi(t),{className:O,d:GA(de,we,H,ue,ye),ref:v,style:VA(VA({},Ee),t.style)}))})},eJ=["option","shapeType","propTransformer","activeClassName","isActive"];function tJ(e,t){if(e==null)return{};var r,n,s=rJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(r),!0).forEach(function(n){nJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nJ(e,t,r){return(t=aJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aJ(e){var t=sJ(e,"string");return typeof t=="symbol"?t:t+""}function sJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iJ(e,t){return Rg(Rg({},t),e)}function oJ(e,t){return e==="symbols"}function XA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return P.createElement(WP,r);case"trapezoid":return P.createElement(QZ,r);case"sector":return P.createElement(VP,r);case"symbols":if(oJ(t))return P.createElement(u5,r);break;default:return null}}function lJ(e){return P.isValidElement(e)?e.props:e}function S_(e){var{option:t,shapeType:r,propTransformer:n=iJ,activeClassName:s="recharts-active-shape",isActive:i}=e,o=tJ(e,eJ),c;if(P.isValidElement(t))c=P.cloneElement(t,Rg(Rg({},o),lJ(t)));else if(typeof t=="function")c=t(o);else if(KZ(t)&&typeof t!="boolean"){var u=n(t,o);c=P.createElement(XA,{shapeType:r,elementProps:u})}else{var d=o;c=P.createElement(XA,{shapeType:r,elementProps:d})}return i?P.createElement(Fs,{className:s},c):c}var QN=(e,t)=>{var r=yn();return(n,s)=>i=>{e==null||e(n,s,i),r(TT({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},e3=e=>{var t=yn();return(r,n)=>s=>{e==null||e(r,n,s),t(nX())}},t3=(e,t)=>{var r=yn();return(n,s)=>i=>{e==null||e(n,s,i),r(aX({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function E_(e){var{fn:t,args:r}=e,n=yn(),s=pi();return P.useLayoutEffect(()=>{if(!s){var i=t(r);return n(eX(i)),()=>{n(tX(i))}}},[t,r,n,s]),null}var k_=()=>{};function cJ(e){var{legendPayload:t}=e,r=yn(),n=pi();return P.useLayoutEffect(()=>n?k_:(r(DP(t)),()=>{r(LP(t))}),[r,n,t]),null}function uJ(e){var{legendPayload:t}=e,r=yn(),n=Pt(Cr);return P.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?k_:(r(DP(t)),()=>{r(LP(t))}),[r,n,t]),null}var V2,dJ=()=>{var[e]=P.useState(()=>a0("uid-"));return e},fJ=(V2=_E.useId)!==null&&V2!==void 0?V2:dJ;function hJ(e,t){var r=fJ();return t||(e?"".concat(e,"-").concat(r):r)}var mJ=P.createContext(void 0),P_=e=>{var{id:t,type:r,children:n}=e,s=hJ("recharts-".concat(r),t);return P.createElement(mJ.Provider,{value:s},n(s))},pJ={cartesianItems:[],polarItems:[]},I_=mi({name:"graphicalItems",initialState:pJ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:gs()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=kl(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:gs()},removeCartesianGraphicalItem:{reducer(e,t){var r=kl(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:gs()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:gs()},removePolarGraphicalItem:{reducer(e,t){var r=kl(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:gs()}}}),{addCartesianGraphicalItem:gJ,replaceCartesianGraphicalItem:xJ,removeCartesianGraphicalItem:yJ,addPolarGraphicalItem:vJ,removePolarGraphicalItem:bJ}=I_.actions,wJ=I_.reducer;function NJ(e){var t=yn(),r=P.useRef(null);return P.useLayoutEffect(()=>{r.current===null?t(gJ(e)):r.current!==e&&t(xJ({prev:r.current,next:e})),r.current=e},[t,e]),P.useLayoutEffect(()=>()=>{r.current&&(t(yJ(r.current)),r.current=null)},[t]),null}function jJ(e){var t=yn();return P.useLayoutEffect(()=>(t(vJ(e)),()=>{t(bJ(e))}),[t,e]),null}var AJ=["onMouseEnter","onClick","onMouseLeave"],CJ=["id"],SJ=["id"];function r3(e,t){if(e==null)return{};var r,n,s=EJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function YA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(r),!0).forEach(function(n){kJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kJ(e,t,r){return(t=PJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PJ(e){var t=IJ(e,"string");return typeof t=="symbol"?t:t+""}function IJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dc.apply(null,arguments)}function TJ(e){var t=P.useMemo(()=>JN(e.children,Rf),[e.children]),r=Pt(n=>$Z(n,e.id,t));return r==null?null:P.createElement(uJ,{legendPayload:r})}function _J(e){var{dataKey:t,nameKey:r,sectors:n,stroke:s,strokeWidth:i,fill:o,name:c,hide:u,tooltipType:d}=e;return{dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:M1(c,t),hide:u,type:d,color:o,unit:""}}}var OJ=(e,t)=>e>t?"start":e<t?"end":"middle",RJ=(e,t,r)=>ss(typeof t=="function"?t(e):t,r,r*.8),DJ=(e,t,r)=>{var{top:n,left:s,width:i,height:o}=t,c=bP(i,o),u=s+ss(e.cx,i,i/2),d=n+ss(e.cy,o,o/2),h=ss(e.innerRadius,c,0),p=RJ(r,e.outerRadius,c),v=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:u,cy:d,innerRadius:h,outerRadius:p,maxRadius:v}},LJ=(e,t)=>{var r=Aa(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function MJ(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var BJ=(e,t)=>{if(P.isValidElement(e))return P.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Ur("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return P.createElement(BP,Dc({},t,{type:"linear",className:r}))},FJ=(e,t,r)=>{if(P.isValidElement(e))return P.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),P.isValidElement(n)))return n;var s=Ur("recharts-pie-label-text",MJ(e));return P.createElement(cx,Dc({},t,{alignmentBaseline:"middle",className:s}),n)};function UJ(e){var{sectors:t,props:r,showLabels:n}=e,{label:s,labelLine:i,dataKey:o}=r;if(!n||!s||!t)return null;var c=mo(r),u=n0(s),d=n0(i),h=typeof s=="object"&&"offsetRadius"in s&&typeof s.offsetRadius=="number"&&s.offsetRadius||20,p=t.map((v,x)=>{var w=(v.startAngle+v.endAngle)/2,j=ea(v.cx,v.cy,v.outerRadius+h,w),N=pn(pn(pn(pn({},c),v),{},{stroke:"none"},u),{},{index:x,textAnchor:OJ(j.x,v.cx)},j),A=pn(pn(pn(pn({},c),v),{},{fill:"none",stroke:v.fill},d),{},{index:x,points:[ea(v.cx,v.cy,v.outerRadius,w),j],key:"line"});return P.createElement(Fs,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(x)},i&&BJ(i,A),FJ(s,N,An(v,o)))});return P.createElement(Fs,{className:"recharts-pie-labels"},p)}function zJ(e){var{sectors:t,props:r,showLabels:n}=e,{label:s}=r;return typeof s=="object"&&s!=null&&"position"in s?P.createElement(x_,{label:s}):P.createElement(UJ,{sectors:t,props:r,showLabels:n})}function $J(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:s}=e,i=Pt(Fu),{onMouseEnter:o,onClick:c,onMouseLeave:u}=s,d=r3(s,AJ),h=QN(o,s.dataKey),p=e3(u),v=t3(c,s.dataKey);return t==null||t.length===0?null:P.createElement(P.Fragment,null,t.map((x,w)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var j=r&&String(w)===i,N=i?n:null,A=j?r:N,k=pn(pn({},x),{},{stroke:x.stroke,tabIndex:-1,[CP]:w,[SP]:s.dataKey});return P.createElement(Fs,Dc({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},C0(d,x,w),{onMouseEnter:h(x,w),onMouseLeave:p(x,w),onClick:v(x,w)}),P.createElement(S_,Dc({option:A,isActive:j,shapeType:"sector"},k)))}))}function WJ(e){var t,{pieSettings:r,displayedData:n,cells:s,offset:i}=e,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:d,nameKey:h,tooltipType:p}=r,v=Math.abs(r.minAngle),x=LJ(c,u),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,N=n.filter(B=>An(B,d,0)!==0).length,A=(w>=360?N:N-1)*j,k=w-N*v-A,E=n.reduce((B,F)=>{var U=An(F,d,0);return B+(_t(U)?U:0)},0),_;if(E>0){var O;_=n.map((B,F)=>{var U=An(B,d,0),L=An(B,h,F),K=DJ(r,i,B),z=(_t(U)?U:0)/E,q,Q=pn(pn({},B),s&&s[F]&&s[F].props);F?q=O.endAngle+Aa(x)*j*(U!==0?1:0):q=c;var G=q+Aa(x)*((U!==0?v:0)+z*k),H=(q+G)/2,ue=(K.innerRadius+K.outerRadius)/2,ye=[{name:L,value:U,payload:Q,dataKey:d,type:p}],de=ea(K.cx,K.cy,ue,H);return O=pn(pn(pn(pn({},r.presentationProps),{},{percent:z,cornerRadius:o,name:L,tooltipPayload:ye,midAngle:H,middleRadius:ue,tooltipPosition:de},Q),K),{},{value:U,startAngle:q,endAngle:G,payload:Q,paddingAngle:Aa(x)*j}),O})}return _}function qJ(e){var{showLabels:t,sectors:r,children:n}=e,s=P.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return P.createElement(SZ,{value:t?s:void 0},n)}function HJ(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=t,v=H1(t,"recharts-pie-"),x=r.current,[w,j]=P.useState(!1),N=P.useCallback(()=>{typeof p=="function"&&p(),j(!1)},[p]),A=P.useCallback(()=>{typeof h=="function"&&h(),j(!0)},[h]);return P.createElement(qJ,{showLabels:!w,sectors:n},P.createElement(q1,{animationId:v,begin:i,duration:o,isActive:s,easing:c,onAnimationStart:A,onAnimationEnd:N,key:v},k=>{var E=[],_=n&&n[0],O=_==null?void 0:_.startAngle;return n==null||n.forEach((B,F)=>{var U=x&&x[F],L=F>0?Ru(B,"paddingAngle",0):0;if(U){var K=Ua(U.endAngle-U.startAngle,B.endAngle-B.startAngle,k),z=pn(pn({},B),{},{startAngle:O+L,endAngle:O+K+L});E.push(z),O=z.endAngle}else{var{endAngle:q,startAngle:Q}=B,G=Ua(0,q-Q,k),H=pn(pn({},B),{},{startAngle:O+L,endAngle:O+G+L});E.push(H),O=H.endAngle}}),r.current=E,P.createElement(Fs,null,P.createElement($J,{sectors:E,activeShape:u,inactiveShape:d,allOtherPieProps:t}))}),P.createElement(zJ,{showLabels:!w,sectors:n,props:t}),t.children)}var VJ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Yu.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function GJ(e){var{id:t}=e,r=r3(e,CJ),{hide:n,className:s,rootTabIndex:i}=e,o=P.useMemo(()=>JN(e.children,Rf),[e.children]),c=Pt(h=>WZ(h,t,o)),u=P.useRef(null),d=Ur("recharts-pie",s);return n||c==null?(u.current=null,P.createElement(Fs,{tabIndex:i,className:d})):P.createElement(P.Fragment,null,P.createElement(E_,{fn:_J,args:pn(pn({},e),{},{sectors:c})}),P.createElement(Fs,{tabIndex:i,className:d},P.createElement(HJ,{props:pn(pn({},r),{},{sectors:c}),previousSectorsRef:u})))}function n3(e){var t=Ns(e,VJ),{id:r}=t,n=r3(t,SJ),s=mo(n);return P.createElement(P_,{id:r,type:"pie"},i=>P.createElement(P.Fragment,null,P.createElement(jJ,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:s,maxRadius:t.maxRadius}),P.createElement(TJ,Dc({},n,{id:i})),P.createElement(GJ,Dc({},n,{id:i}))))}n3.displayName="Pie";function ZA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(r),!0).forEach(function(n){KJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KJ(e,t,r){return(t=XJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XJ(e){var t=YJ(e,"string");return typeof t=="symbol"?t:t+""}function YJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZJ={xAxis:{},yAxis:{},zAxis:{}},T_=mi({name:"cartesianAxis",initialState:ZJ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:gs()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:gs()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:gs()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:gs()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:gs()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:gs()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=JA(JA({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:JJ,removeXAxis:QJ,addYAxis:eQ,removeYAxis:tQ,addZAxis:Hde,removeZAxis:Vde,updateYAxisWidth:rQ}=T_.actions,nQ=T_.reducer,aQ=Ue([ha],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),sQ=Ue([aQ,$l,Wl],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),__=()=>Pt(sQ),iQ="Invariant failed";function oQ(e,t){throw new Error(iQ)}var lQ=["x","y"];function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wb.apply(null,arguments)}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){cQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cQ(e,t,r){return(t=uQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uQ(e){var t=dQ(e,"string");return typeof t=="symbol"?t:t+""}function dQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fQ(e,t){if(e==null)return{};var r,n,s=hQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mQ(e,t){var{x:r,y:n}=e,s=fQ(e,lQ),i="".concat(r),o=parseInt(i,10),c="".concat(n),u=parseInt(c,10),d="".concat(t.height||s.height),h=parseInt(d,10),p="".concat(t.width||s.width),v=parseInt(p,10);return oh(oh(oh(oh(oh({},t),s),o?{x:o}:{}),u?{y:u}:{}),{},{height:h,width:v,name:t.name,radius:t.radius})}function a3(e){return P.createElement(S_,wb({shapeType:"rectangle",propTransformer:mQ,activeClassName:"recharts-active-bar"},e))}var pQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(_t(t))return t;var i=_t(n)||Ea(n);return i?t(n,s):(i||oQ(),r)}},gQ={},O_=mi({name:"errorBars",initialState:gQ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Gde,replaceErrorBar:Kde,removeErrorBar:Xde}=O_.actions,xQ=O_.reducer,yQ=["children"];function vQ(e,t){if(e==null)return{};var r,n,s=bQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},NQ=P.createContext(wQ);function jQ(e){var{children:t}=e,r=vQ(e,yQ);return P.createElement(NQ.Provider,{value:r},t)}function R_(e,t){var r,n,s=Pt(d=>Hl(d,e)),i=Pt(d=>Vl(d,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Qs.allowDataOverflow,c=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ei.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function AQ(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=__(),{needClipX:i,needClipY:o,needClip:c}=R_(t,r);if(!c)return null;var{x:u,y:d,width:h,height:p}=s;return P.createElement("clipPath",{id:"clipPath-".concat(n)},P.createElement("rect",{x:i?u:u-h/2,y:o?d:d-p/2,width:i?h:h*2,height:o?p:p*2}))}var CQ=["onMouseEnter","onMouseLeave","onClick"],SQ=["value","background","tooltipPosition"],EQ=["id"],kQ=["onMouseEnter","onClick","onMouseLeave"];function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lc.apply(null,arguments)}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(n){PQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=TQ(e,"string");return typeof t=="symbol"?t:t+""}function TQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dg(e,t){if(e==null)return{};var r,n,s=_Q(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _Q(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OQ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:M1(r,t),payload:e}]};function RQ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:c}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:M1(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:c}}}function DQ(e){var t=Pt(Fu),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:c,onClick:u}=i,d=Dg(i,CQ),h=QN(o,n),p=e3(c),v=t3(u,n);if(!s||r==null)return null;var x=n0(s);return P.createElement(P.Fragment,null,r.map((w,j)=>{var{value:N,background:A,tooltipPosition:k}=w,E=Dg(w,SQ);if(!A)return null;var _=h(w,j),O=p(w,j),B=v(w,j),F=xs(xs(xs(xs(xs({option:s,isActive:String(j)===t},E),{},{fill:"#eee"},A),x),C0(d,w,j)),{},{onMouseEnter:_,onMouseLeave:O,onClick:B,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return P.createElement(a3,Lc({key:"background-bar-".concat(j)},F))}))}function LQ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,height:i.height};return xs(xs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return P.createElement(CZ,{value:t?s:void 0},r)}function MQ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:o}=e,c=Pt(Fu),u=Pt(VT),d=r&&String(i)===c&&(u==null||o===u),h=d?r:t;return P.createElement(a3,Lc({},n,{name:String(n.name)},s,{isActive:d,option:h,index:i,dataKey:o}))}function BQ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return P.createElement(a3,Lc({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function FQ(e){var{data:t,props:r}=e,n=mo(r),{id:s}=n,i=Dg(n,EQ),{shape:o,dataKey:c,activeBar:u}=r,{onMouseEnter:d,onClick:h,onMouseLeave:p}=r,v=Dg(r,kQ),x=QN(d,c),w=e3(p),j=t3(h,c);return t?P.createElement(P.Fragment,null,t.map((N,A)=>P.createElement(Fs,Lc({key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(A),className:"recharts-bar-rectangle"},C0(v,N,A),{onMouseEnter:x(N,A),onMouseLeave:w(N,A),onClick:j(N,A)}),u?P.createElement(MQ,{shape:o,activeBar:u,baseProps:i,entry:N,index:A,dataKey:c}):P.createElement(BQ,{shape:o,baseProps:i,entry:N,index:A,dataKey:c})))):null}function UQ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:d,onAnimationStart:h}=t,p=r.current,v=H1(t,"recharts-bar-"),[x,w]=P.useState(!1),j=!x,N=P.useCallback(()=>{typeof d=="function"&&d(),w(!1)},[d]),A=P.useCallback(()=>{typeof h=="function"&&h(),w(!0)},[h]);return P.createElement(LQ,{showLabels:j,rects:n},P.createElement(q1,{animationId:v,begin:o,duration:c,isActive:i,easing:u,onAnimationEnd:N,onAnimationStart:A,key:v},k=>{var E=k===1?n:n==null?void 0:n.map((_,O)=>{var B=p&&p[O];if(B)return xs(xs({},_),{},{x:Ua(B.x,_.x,k),y:Ua(B.y,_.y,k),width:Ua(B.width,_.width,k),height:Ua(B.height,_.height,k)});if(s==="horizontal"){var F=Ua(0,_.height,k);return xs(xs({},_),{},{y:_.y+_.height-F,height:F})}var U=Ua(0,_.width,k);return xs(xs({},_),{},{width:U})});return k>0&&(r.current=E??null),E==null?null:P.createElement(Fs,null,P.createElement(FQ,{props:t,data:E}))}),P.createElement(x_,{label:t.label}),t.children)}function zQ(e){var t=P.useRef(null);return P.createElement(UQ,{previousRectanglesRef:t,props:e})}var D_=0,$Q=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:An(e,t)}};class WQ extends P.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:c,background:u,id:d}=this.props;if(t||r==null)return null;var h=Ur("recharts-bar",s),p=d;return P.createElement(Fs,{className:h,id:d},c&&P.createElement("defs",null,P.createElement(AQ,{clipPathId:p,xAxisId:i,yAxisId:o})),P.createElement(Fs,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(p,")"):void 0},P.createElement(DQ,{data:r,dataKey:n,background:u,allOtherBarProps:this.props}),P.createElement(zQ,this.props)))}}var qQ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Yu.isSsr,legendType:"rect",minPointSize:D_,xAxisId:0,yAxisId:0};function HQ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=e,{needClip:p}=R_(t,r),v=D5(),x=pi(),w=JN(e.children,Rf),j=Pt(k=>vee(k,t,r,x,e.id,w));if(v!=="vertical"&&v!=="horizontal")return null;var N,A=j==null?void 0:j[0];return A==null||A.height==null||A.width==null?N=0:N=v==="vertical"?A.height/2:A.width/2,P.createElement(jQ,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:$Q,errorBarOffset:N},P.createElement(WQ,Lc({},e,{layout:v,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function VQ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:d,stackedData:h,displayedData:p,offset:v,cells:x,parentViewBox:w}=e,j=t==="horizontal"?c:o,N=h?j.scale.domain():null,A=sW({numericAxis:j});return p.map((k,E)=>{var _,O,B,F,U,L;h?_=Q$(h[E],N):(_=An(k,r),Array.isArray(_)||(_=[A,_]));var K=pQ(n,D_)(_[1],E);if(t==="horizontal"){var z,[q,Q]=[c.scale(_[0]),c.scale(_[1])];O=Jj({axis:o,ticks:u,bandSize:i,offset:s.offset,entry:k,index:E}),B=(z=Q??q)!==null&&z!==void 0?z:void 0,F=s.size;var G=q-Q;if(U=Fi(G)?0:G,L={x:O,y:v.top,width:F,height:v.height},Math.abs(K)>0&&Math.abs(U)<Math.abs(K)){var H=Aa(U||K)*(Math.abs(K)-Math.abs(U));B-=H,U+=H}}else{var[ue,ye]=[o.scale(_[0]),o.scale(_[1])];if(O=ue,B=Jj({axis:c,ticks:d,bandSize:i,offset:s.offset,entry:k,index:E}),F=ye-ue,U=s.size,L={x:v.left,y:B,width:v.width,height:U},Math.abs(K)>0&&Math.abs(F)<Math.abs(K)){var de=Aa(F||K)*(Math.abs(K)-Math.abs(F));F+=de}}if(O==null||B==null||F==null||U==null)return null;var we=xs(xs({},k),{},{x:O,y:B,width:F,height:U,value:h?_:_[1],payload:k,background:L,tooltipPosition:{x:O+F/2,y:B+U/2},parentViewBox:w},x&&x[E]&&x[E].props);return we}).filter(Boolean)}function GQ(e){var t=Ns(e,qQ),r=pi();return P.createElement(P_,{id:t.id,type:"bar"},n=>P.createElement(P.Fragment,null,P.createElement(cJ,{legendPayload:OQ(t)}),P.createElement(E_,{fn:RQ,args:t}),P.createElement(NJ,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:aW(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),P.createElement(HQ,Lc({},t,{id:n}))))}var L_=P.memo(GQ);L_.displayName="Bar";function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){KQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KQ(e,t,r){return(t=XQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XQ(e){var t=YQ(e,"string");return typeof t=="symbol"?t:t+""}function YQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZQ=(e,t)=>t,JQ=(e,t,r)=>r,QQ=(e,t,r,n)=>n,eee=(e,t,r,n,s)=>s,U0=Ue([vN,eee],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),tee=Ue([U0],e=>e==null?void 0:e.maxBarSize),ree=(e,t,r,n,s,i)=>i,rC=(e,t,r)=>{var n=r??e;if(!Ea(n))return ss(n,t,0)},nee=Ue([Cr,vN,ZQ,JQ,QQ],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),aee=(e,t,r,n)=>{var s=Cr(e);return s==="horizontal"?mb(e,"yAxis",r,n):mb(e,"xAxis",t,n)},see=(e,t,r)=>{var n=Cr(e);return n==="horizontal"?mA(e,"xAxis",t):mA(e,"yAxis",r)},iee=(e,t,r)=>{var n={},s=e.filter(tx),i=e.filter(d=>d.stackId==null),o=s.reduce((d,h)=>(d[h.stackId]||(d[h.stackId]=[]),d[h.stackId].push(h),d),n),c=Object.entries(o).map(d=>{var[h,p]=d,v=p.map(w=>w.dataKey),x=rC(t,r,p[0].barSize);return{stackId:h,dataKeys:v,barSize:x}}),u=i.map(d=>{var h=[d.dataKey].filter(v=>v!=null),p=rC(t,r,d.barSize);return{stackId:void 0,dataKeys:h,barSize:p}});return[...c,...u]},oee=Ue([nee,YG,see],iee),lee=(e,t,r,n,s)=>{var i,o,c=U0(e,t,r,n,s);if(c!=null){var u=Cr(e),d=VI(e),{maxBarSize:h}=c,p=Ea(h)?d:h,v,x;return u==="horizontal"?(v=uf(e,"xAxis",t,n),x=cf(e,"xAxis",t,n)):(v=uf(e,"yAxis",r,n),x=cf(e,"yAxis",r,n)),(i=(o=I5(v,x,!0))!==null&&o!==void 0?o:p)!==null&&i!==void 0?i:0}},M_=(e,t,r,n)=>{var s=Cr(e),i,o;return s==="horizontal"?(i=uf(e,"xAxis",t,n),o=cf(e,"xAxis",t,n)):(i=uf(e,"yAxis",r,n),o=cf(e,"yAxis",r,n)),I5(i,o)};function cee(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=ss(e,r,0,!0),c,u=[];if(os(n[0].barSize)){var d=!1,h=r/i,p=n.reduce((A,k)=>A+(k.barSize||0),0);p+=(i-1)*o,p>=r&&(p-=(i-1)*o,o=0),p>=r&&h>0&&(d=!0,h*=.9,p=i*h);var v=(r-p)/2>>0,x={offset:v-o,size:0};c=n.reduce((A,k)=>{var E,_={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:x.offset+x.size+o,size:d?h:(E=k.barSize)!==null&&E!==void 0?E:0}},O=[...A,_];return x=O[O.length-1].position,O},u)}else{var w=ss(t,r,0,!0);r-2*w-(i-1)*o<=0&&(o=0);var j=(r-2*w-(i-1)*o)/i;j>1&&(j>>=0);var N=os(s)?Math.min(j,s):j;c=n.reduce((A,k,E)=>[...A,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:w+(j+o)*E+(j-N)/2,size:N}}],u)}return c}}var uee=(e,t,r,n,s,i,o)=>{var c=Ea(o)?t:o,u=cee(r,n,s!==i?s:i,e,c);return s!==i&&u!=null&&(u=u.map(d=>Wm(Wm({},d),{},{position:Wm(Wm({},d.position),{},{offset:d.position.offset-s/2})}))),u},dee=Ue([oee,VI,XG,GI,lee,M_,tee],uee),fee=(e,t,r,n)=>uf(e,"xAxis",t,n),hee=(e,t,r,n)=>uf(e,"yAxis",r,n),mee=(e,t,r,n)=>cf(e,"xAxis",t,n),pee=(e,t,r,n)=>cf(e,"yAxis",r,n),gee=Ue([dee,U0],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),xee=(e,t)=>{var r=gN(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===r)}}}},yee=Ue([aee,U0],xee),vee=Ue([ha,T5,fee,hee,mee,pee,gee,Cr,oN,M_,yee,U0,ree],(e,t,r,n,s,i,o,c,u,d,h,p,v)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=u;if(!(p==null||o==null||t==null||c!=="horizontal"&&c!=="vertical"||r==null||n==null||s==null||i==null||d==null)){var{data:N}=p,A;if(N!=null&&N.length>0?A=N:A=x==null?void 0:x.slice(w,j+1),A!=null)return VQ({layout:c,barSettings:p,pos:o,parentViewBox:t,bandSize:d,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:h,displayedData:A,offset:e,cells:v})}}),B_=e=>{var{chartData:t}=e,r=yn(),n=pi();return P.useEffect(()=>n?()=>{}:(r(jA(t)),()=>{r(jA(void 0))}),[t,r,n]),null},nC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},F_=mi({name:"brush",initialState:nC,reducers:{setBrushSettings(e,t){return t.payload==null?nC:t.payload}}}),{setBrushSettings:Yde}=F_.actions,bee=F_.reducer;function wee(e,t,r){return(t=Nee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nee(e){var t=jee(e,"string");return typeof t=="symbol"?t:t+""}function jee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class s3{static create(t){return new s3(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}wee(s3,"EPS",1e-4);function Aee(e){return(e%180+180)%180}var Cee=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Aee(s),o=i*Math.PI/180,c=Math.atan(n/r),u=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(u)},See={dots:[],areas:[],lines:[]},U_=mi({name:"referenceElements",initialState:See,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=kl(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=kl(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=kl(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Zde,removeDot:Jde,addArea:Qde,removeArea:efe,addLine:tfe,removeLine:rfe}=U_.actions,Eee=U_.reducer,kee=P.createContext(void 0),Pee=e=>{var{children:t}=e,[r]=P.useState("".concat(a0("recharts"),"-clip")),n=__();if(n==null)return null;var{x:s,y:i,width:o,height:c}=n;return P.createElement(kee.Provider,{value:r},P.createElement("defs",null,P.createElement("clipPath",{id:r},P.createElement("rect",{x:s,y:i,height:c,width:o}))),t)};function df(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function z_(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Iee(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Cee(n,r)}function Tee(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:c}=e;return t===1?{start:n?s:i,end:n?s+o:i+c}:{start:n?s+o:i+c,end:n?s:i}}function Lg(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function _ee(e,t){return z_(e,t+1)}function Oee(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:c}=t,u=0,d=1,h=o,p=function(){var w=n==null?void 0:n[u];if(w===void 0)return{v:z_(n,d)};var j=u,N,A=()=>(N===void 0&&(N=r(w,j)),N),k=w.coordinate,E=u===0||Lg(e,k,A,h,c);E||(u=0,h=o,d+=1),E&&(h=k+e*(A()/2+s),u+=d)},v;d<=i.length;)if(v=p(),v)return v.v;return[]}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){Ree(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ree(e,t,r){return(t=Dee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dee(e){var t=Lee(e,"string");return typeof t=="symbol"?t:t+""}function Lee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mee(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:c}=t,{end:u}=t,d=function(v){var x=i[v],w,j=()=>(w===void 0&&(w=r(x,v)),w);if(v===o-1){var N=e*(x.coordinate+e*j()/2-u);i[v]=x=ts(ts({},x),{},{tickCoord:N>0?x.coordinate-N*e:x.coordinate})}else i[v]=x=ts(ts({},x),{},{tickCoord:x.coordinate});var A=Lg(e,x.tickCoord,j,c,u);A&&(u=x.tickCoord-e*(j()/2+s),i[v]=ts(ts({},x),{},{isShow:!0}))},h=o-1;h>=0;h--)d(h);return i}function Bee(e,t,r,n,s,i){var o=(n||[]).slice(),c=o.length,{start:u,end:d}=t;if(i){var h=n[c-1],p=r(h,c-1),v=e*(h.coordinate+e*p/2-d);o[c-1]=h=ts(ts({},h),{},{tickCoord:v>0?h.coordinate-v*e:h.coordinate});var x=Lg(e,h.tickCoord,()=>p,u,d);x&&(d=h.tickCoord-e*(p/2+s),o[c-1]=ts(ts({},h),{},{isShow:!0}))}for(var w=i?c-1:c,j=function(k){var E=o[k],_,O=()=>(_===void 0&&(_=r(E,k)),_);if(k===0){var B=e*(E.coordinate-e*O()/2-u);o[k]=E=ts(ts({},E),{},{tickCoord:B<0?E.coordinate-B*e:E.coordinate})}else o[k]=E=ts(ts({},E),{},{tickCoord:E.coordinate});var F=Lg(e,E.tickCoord,O,u,d);F&&(u=E.tickCoord+e*(O()/2+s),o[k]=ts(ts({},E),{},{isShow:!0}))},N=0;N<w;N++)j(N);return o}function i3(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:c,interval:u,tickFormatter:d,unit:h,angle:p}=e;if(!s||!s.length||!n)return[];if(_t(u)||Yu.isSsr){var v;return(v=_ee(s,_t(u)?u:0))!==null&&v!==void 0?v:[]}var x=[],w=c==="top"||c==="bottom"?"width":"height",j=h&&w==="width"?Eh(h,{fontSize:t,letterSpacing:r}):{width:0,height:0},N=(E,_)=>{var O=typeof d=="function"?d(E.value,_):E.value;return w==="width"?Iee(Eh(O,{fontSize:t,letterSpacing:r}),j,p):Eh(O,{fontSize:t,letterSpacing:r})[w]},A=s.length>=2?Aa(s[1].coordinate-s[0].coordinate):1,k=Tee(i,A,w);return u==="equidistantPreserveStart"?Oee(A,k,N,s,o):(u==="preserveStart"||u==="preserveStartEnd"?x=Bee(A,k,N,s,o,u==="preserveStartEnd"):x=Mee(A,k,N,s,o),x.filter(E=>E.isShow))}var Fee=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>o&&(o=p.width)}});var c=r?r.getBoundingClientRect().width:0,u=s+i,d=o+u+c+(r?n:0);return Math.round(d)}return 0},Uee=["axisLine","width","height","className","hide","ticks"],zee=["viewBox"],$ee=["viewBox"];function Nb(e,t){if(e==null)return{};var r,n,s=Wee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Wee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uu.apply(null,arguments)}function sC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function da(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(r),!0).forEach(function(n){qee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qee(e,t,r){return(t=Hee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hee(e){var t=Vee(e,"string");return typeof t=="symbol"?t:t+""}function Vee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o3={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Gee(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:c,otherSvgProps:u}=e;if(!c)return null;var d=da(da(da({},u),mo(c)),{},{fill:"none"});if(i==="top"||i==="bottom"){var h=+(i==="top"&&!o||i==="bottom"&&o);d=da(da({},d),{},{x1:t,y1:r+h*s,x2:t+n,y2:r+h*s})}else{var p=+(i==="left"&&!o||i==="right"&&o);d=da(da({},d),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return P.createElement("line",Uu({},d,{className:Ur("recharts-cartesian-axis-line",Ru(c,"className"))}))}function Kee(e,t,r,n,s,i,o,c,u){var d,h,p,v,x,w,j=c?-1:1,N=e.tickSize||o,A=_t(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=h=e.coordinate,v=r+ +!c*s,p=v-j*N,w=p-j*u,x=A;break;case"left":p=v=e.coordinate,h=t+ +!c*n,d=h-j*N,x=d-j*u,w=A;break;case"right":p=v=e.coordinate,h=t+ +c*n,d=h+j*N,x=d+j*u,w=A;break;default:d=h=e.coordinate,v=r+ +c*s,p=v+j*N,w=p+j*u,x=A;break}return{line:{x1:d,y1:p,x2:h,y2:v},tick:{x,y:w}}}function Xee(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Yee(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Zee(e){var{option:t,tickProps:r,value:n}=e,s,i=Ur(r.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(t))s=P.cloneElement(t,da(da({},r),{},{className:i}));else if(typeof t=="function")s=t(da(da({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Ur(o,t==null?void 0:t.className)),s=P.createElement(cx,Uu({},r,{className:o}),n)}return s}function Jee(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:i,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:h,x:p,y:v,width:x,height:w,tickSize:j,tickMargin:N,fontSize:A,letterSpacing:k,getTicksConfig:E,events:_}=e,O=i3(da(da({},E),{},{ticks:t}),A,k),B=Xee(d,h),F=Yee(d,h),U=mo(E),L=n0(r),K={};typeof n=="object"&&(K=n);var z=da(da({},U),{},{fill:"none"},K),q=O.map((Q,G)=>{var{line:H,tick:ue}=Kee(Q,p,v,x,w,d,j,h,N),ye=da(da(da(da({textAnchor:B,verticalAnchor:F},U),{},{stroke:"none",fill:s},L),ue),{},{index:G,payload:Q,visibleTicksCount:O.length,tickFormatter:i,padding:c},u);return P.createElement(Fs,Uu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},C0(_,Q,G)),n&&P.createElement("line",Uu({},z,H,{className:Ur("recharts-cartesian-axis-tick-line",Ru(n,"className"))})),r&&P.createElement(Zee,{option:r,tickProps:ye,value:"".concat(typeof i=="function"?i(Q.value,G):Q.value).concat(o||"")}))});return q.length>0?P.createElement("g",{className:"recharts-cartesian-axis-ticks"},q):null}var Qee=P.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:o,ticks:c}=e,u=Nb(e,Uee),[d,h]=P.useState(""),[p,v]=P.useState(""),x=P.useRef(null);P.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var j;return Fee({ticks:x.current,label:(j=e.labelRef)===null||j===void 0?void 0:j.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=P.useCallback(j=>{if(j){var N=j.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=N;var A=N[0];if(A){var k=window.getComputedStyle(A),E=k.fontSize,_=k.letterSpacing;(E!==d||_!==p)&&(h(E),v(_))}}},[d,p]);return o||n!=null&&n<=0||s!=null&&s<=0?null:P.createElement(Fs,{className:Ur("recharts-cartesian-axis",i),ref:w},P.createElement(Gee,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:mo(e)}),P.createElement(Jee,{ticks:c,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:d,letterSpacing:p,getTicksConfig:e,events:u}),P.createElement(lZ,{x:e.x,y:e.y,width:e.width,height:e.height},P.createElement(yZ,{label:e.label,labelRef:e.labelRef}),e.children))}),ete=P.memo(Qee,(e,t)=>{var{viewBox:r}=e,n=Nb(e,zee),{viewBox:s}=t,i=Nb(t,$ee);return df(r,s)&&df(n,i)}),l3=P.forwardRef((e,t)=>{var r=Ns(e,o3);return P.createElement(ete,Uu({},r,{ref:t}))});l3.displayName="CartesianAxis";var tte=["x1","y1","x2","y2","key"],rte=["offset"],nte=["xAxisId","yAxisId"],ate=["xAxisId","yAxisId"];function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(n){ste(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ste(e,t,r){return(t=ite(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ite(e){var t=ote(e,"string");return typeof t=="symbol"?t:t+""}function ote(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mu.apply(null,arguments)}function Mg(e,t){if(e==null)return{};var r,n,s=lte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cte=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:c}=e;return P.createElement("rect",{x:n,y:s,ry:c,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function $_(e,t){var r;if(P.isValidElement(e))r=P.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:c}=t,u=Mg(t,tte),d=mo(u),{offset:h}=d,p=Mg(d,rte);r=P.createElement("line",mu({},p,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:c}))}return r}function ute(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,c=Mg(e,nte),u=s.map((d,h)=>{var p=ns(ns({},c),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(h),index:h});return $_(n,p)});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function dte(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,c=Mg(e,ate),u=s.map((d,h)=>{var p=ns(ns({},c),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(h),index:h});return $_(n,p)});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function fte(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:c,horizontal:u=!0}=e;if(!u||!t||!t.length)return null;var d=c.map(p=>Math.round(p+s-s)).sort((p,v)=>p-v);s!==d[0]&&d.unshift(0);var h=d.map((p,v)=>{var x=!d[v+1],w=x?s+o-p:d[v+1]-p;if(w<=0)return null;var j=v%t.length;return P.createElement("rect",{key:"react-".concat(v),y:p,x:n,height:w,width:i,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function hte(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:c,verticalPoints:u}=e;if(!t||!r||!r.length)return null;var d=u.map(p=>Math.round(p+s-s)).sort((p,v)=>p-v);s!==d[0]&&d.unshift(0);var h=d.map((p,v)=>{var x=!d[v+1],w=x?s+o-p:d[v+1]-p;if(w<=0)return null;var j=v%r.length;return P.createElement("rect",{key:"react-".concat(v),x:p,y:i,width:w,height:c,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var mte=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return NP(i3(ns(ns(ns({},o3),r),{},{ticks:jP(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},pte=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return NP(i3(ns(ns(ns({},o3),r),{},{ticks:jP(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},gte={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function W_(e){var t=O5(),r=R5(),n=OP(),s=ns(ns({},Ns(e,gte)),{},{x:_t(e.x)?e.x:n.left,y:_t(e.y)?e.y:n.top,width:_t(e.width)?e.width:n.width,height:_t(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:c,y:u,width:d,height:h,syncWithTicks:p,horizontalValues:v,verticalValues:x}=s,w=pi(),j=Pt(L=>pA(L,"xAxis",i,w)),N=Pt(L=>pA(L,"yAxis",o,w));if(!_t(d)||d<=0||!_t(h)||h<=0||!_t(c)||c!==+c||!_t(u)||u!==+u)return null;var A=s.verticalCoordinatesGenerator||mte,k=s.horizontalCoordinatesGenerator||pte,{horizontalPoints:E,verticalPoints:_}=s;if((!E||!E.length)&&typeof k=="function"){var O=v&&v.length,B=k({yAxis:N?ns(ns({},N),{},{ticks:O?v:N.ticks}):void 0,width:t,height:r,offset:n},O?!0:p);pg(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(E=B)}if((!_||!_.length)&&typeof A=="function"){var F=x&&x.length,U=A({xAxis:j?ns(ns({},j),{},{ticks:F?x:j.ticks}):void 0,width:t,height:r,offset:n},F?!0:p);pg(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(_=U)}return P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(cte,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),P.createElement(fte,mu({},s,{horizontalPoints:E})),P.createElement(hte,mu({},s,{verticalPoints:_})),P.createElement(ute,mu({},s,{offset:n,horizontalPoints:E,xAxis:j,yAxis:N})),P.createElement(dte,mu({},s,{offset:n,verticalPoints:_,xAxis:j,yAxis:N})))}W_.displayName="CartesianGrid";var xte=["dangerouslySetInnerHTML","ticks"],yte=["id"],vte=["domain"],bte=["domain"];function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jb.apply(null,arguments)}function Bg(e,t){if(e==null)return{};var r,n,s=wte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Nte(e){var t=yn();return P.useLayoutEffect(()=>(t(JJ(e)),()=>{t(QJ(e))}),[e,t]),null}var jte=e=>{var{xAxisId:t,className:r}=e,n=Pt(T5),s=pi(),i="xAxis",o=Pt(N=>Tf(N,i,t,s)),c=Pt(N=>CT(N,i,t,s)),u=Pt(N=>wT(N,t)),d=Pt(N=>qK(N,t)),h=Pt(N=>rT(N,t));if(u==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=e,x=Bg(e,xte),{id:w}=h,j=Bg(h,yte);return P.createElement(l3,jb({},x,j,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:Ur("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:c}))},Ate={allowDataOverflow:Qs.allowDataOverflow,allowDecimals:Qs.allowDecimals,allowDuplicatedCategory:Qs.allowDuplicatedCategory,height:Qs.height,hide:!1,mirror:Qs.mirror,orientation:Qs.orientation,padding:Qs.padding,reversed:Qs.reversed,scale:Qs.scale,tickCount:Qs.tickCount,type:Qs.type,xAxisId:0},Cte=e=>{var t,r,n,s,i,o=Ns(e,Ate);return P.createElement(P.Fragment,null,P.createElement(Nte,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(s=o.minTickGap)!==null&&s!==void 0?s:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),P.createElement(jte,o))},Ste=(e,t)=>{var{domain:r}=e,n=Bg(e,vte),{domain:s}=t,i=Bg(t,bte);return df(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:df({domain:r},{domain:s}):!1},q_=P.memo(Cte,Ste);q_.displayName="XAxis";var Ete=["dangerouslySetInnerHTML","ticks"],kte=["id"],Pte=["domain"],Ite=["domain"];function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ab.apply(null,arguments)}function Fg(e,t){if(e==null)return{};var r,n,s=Tte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _te(e){var t=yn();return P.useLayoutEffect(()=>(t(eQ(e)),()=>{t(tQ(e))}),[e,t]),null}var Ote=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=P.useRef(null),o=P.useRef(null),c=Pt(T5),u=pi(),d=yn(),h="yAxis",p=Pt(O=>Tf(O,h,t,u)),v=Pt(O=>NT(O,t)),x=Pt(O=>VK(O,t)),w=Pt(O=>CT(O,h,t,u)),j=Pt(O=>nT(O,t));if(P.useLayoutEffect(()=>{if(!(n!=="auto"||!v||GN(s)||P.isValidElement(s)||j==null)){var O=i.current;if(O){var B=O.getCalculatedWidth();Math.round(v.width)!==Math.round(B)&&d(rQ({id:t,width:B}))}}},[w,v,d,s,t,n,j]),v==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:N,ticks:A}=e,k=Fg(e,Ete),{id:E}=j,_=Fg(j,kte);return P.createElement(l3,Ab({},k,_,{ref:i,labelRef:o,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:Ur("recharts-".concat(h," ").concat(h),r),viewBox:c,ticks:w}))},Rte={allowDataOverflow:ei.allowDataOverflow,allowDecimals:ei.allowDecimals,allowDuplicatedCategory:ei.allowDuplicatedCategory,hide:!1,mirror:ei.mirror,orientation:ei.orientation,padding:ei.padding,reversed:ei.reversed,scale:ei.scale,tickCount:ei.tickCount,type:ei.type,width:ei.width,yAxisId:0},Dte=e=>{var t,r,n,s,i,o=Ns(e,Rte);return P.createElement(P.Fragment,null,P.createElement(_te,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(s=o.minTickGap)!==null&&s!==void 0?s:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),P.createElement(Ote,o))},Lte=(e,t)=>{var{domain:r}=e,n=Fg(e,Pte),{domain:s}=t,i=Fg(t,Ite);return df(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:df({domain:r},{domain:s}):!1},H_=P.memo(Dte,Lte);H_.displayName="YAxis";var Mte={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=P;function Bte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fte=typeof Object.is=="function"?Object.is:Bte,Ute=z0.useSyncExternalStore,zte=z0.useRef,$te=z0.useEffect,Wte=z0.useMemo,qte=z0.useDebugValue;Mte.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=zte(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Wte(function(){function u(x){if(!d){if(d=!0,h=x,x=n(x),s!==void 0&&o.hasValue){var w=o.value;if(s(w,x))return p=w}return p=x}if(w=p,Fte(h,x))return w;var j=n(x);return s!==void 0&&s(w,j)?(h=x,w):(h=x,p=j)}var d=!1,h,p,v=r===void 0?null:r;return[function(){return u(t())},v===null?void 0:function(){return u(v())}]},[t,r,n,s]);var c=Ute(e,i[0],i[1]);return $te(function(){o.hasValue=!0,o.value=c},[c]),qte(c),c};function Hte(e){e()}function Vte(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Hte(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var oC={notify(){},get:()=>[]};function Gte(e,t){let r,n=oC,s=0,i=!1;function o(j){h();const N=n.subscribe(j);let A=!1;return()=>{A||(A=!0,N(),p())}}function c(){n.notify()}function u(){w.onStateChange&&w.onStateChange()}function d(){return i}function h(){s++,r||(r=e.subscribe(u),n=Vte())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=oC)}function v(){i||(i=!0,h())}function x(){i&&(i=!1,p())}const w={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:d,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>n};return w}var Kte=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xte=Kte(),Yte=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Zte=Yte(),Jte=()=>Xte||Zte?P.useLayoutEffect:P.useEffect,Qte=Jte(),G2=Symbol.for("react-redux-context"),K2=typeof globalThis<"u"?globalThis:{};function ere(){if(!P.createContext)return{};const e=K2[G2]??(K2[G2]=new Map);let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var tre=ere();function rre(e){const{children:t,context:r,serverState:n,store:s}=e,i=P.useMemo(()=>{const u=Gte(s);return{store:s,subscription:u,getServerState:n?()=>n:void 0}},[s,n]),o=P.useMemo(()=>s.getState(),[s]);Qte(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==s.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,o]);const c=r||tre;return P.createElement(c.Provider,{value:i},t)}var nre=rre,are=(e,t)=>t,c3=Ue([are,Cr,QI,pa,$T,Gl,YX,ha],tY),u3=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},V_=Ui("mouseClick"),G_=E0();G_.startListening({actionCreator:V_,effect:(e,t)=>{var r=e.payload,n=c3(t.getState(),u3(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(sX({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Cb=Ui("mouseMove"),K_=E0();K_.startListening({actionCreator:Cb,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=BN(n,n.tooltip.settings.shared),i=c3(n,u3(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(OT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(_T()))}});var lC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},X_=mi({name:"rootProps",initialState:lC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:lC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),sre=X_.reducer,{updateOptions:ire}=X_.actions,Y_=mi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:ore}=Y_.actions,lre=Y_.reducer,Z_=Ui("keyDown"),J_=Ui("focus"),d3=E0();d3.startListening({actionCreator:Z_,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(FN(s,Of(r))),c=Gl(r);if(i==="Enter"){var u=Tg(r,"axis","hover",String(s.index));t.dispatch(gb({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:u}));return}var d=YK(r),h=d==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,v=o+p*h;if(!(c==null||v>=c.length||v<0)){var x=Tg(r,"axis","hover",String(v));t.dispatch(gb({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});d3.startListening({actionCreator:J_,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=Tg(r,"axis","hover",String(i));t.dispatch(gb({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Pi=Ui("externalEvent"),Q_=E0();Q_.startListening({actionCreator:Pi,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:zX(r),activeDataKey:VT(r),activeIndex:Fu(r),activeLabel:HT(r),activeTooltipIndex:Fu(r),isTooltipActive:$X(r)};e.payload.handler(n,e.payload.reactEvent)}}});var cre=Ue([_f],e=>e.tooltipItemPayloads),ure=Ue([cre,B0,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(c=>c.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),eO=Ui("touchMove"),tO=E0();tO.startListening({actionCreator:eO,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=BN(n,n.tooltip.settings.shared);if(s==="axis"){var i=c3(n,u3({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(OT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,c=r.touches[0],u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(CP),h=(o=u.getAttribute(SP))!==null&&o!==void 0?o:void 0,p=ure(t.getState(),d,h);t.dispatch(TT({activeDataKey:h,activeIndex:d,activeCoordinate:p}))}}});var dre=Xk({brush:bee,cartesianAxis:nQ,chartData:gY,errorBars:xQ,graphicalItems:wJ,layout:M$,legend:FW,options:dY,polarAxis:LZ,polarOptions:lre,referenceElements:Eee,rootProps:sre,tooltip:iX}),fre=function(t){return l$({reducer:dre,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([G_.middleware,K_.middleware,d3.middleware,Q_.middleware,tO.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(oP({type:"raf"}))},devTools:Yu.devToolsEnabled})};function rO(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=pi(),i=P.useRef(null);if(s)return r;i.current==null&&(i.current=fre(t));var o=N5;return P.createElement(nre,{context:o,store:i.current},r)}function nO(e){var{layout:t,margin:r}=e,n=yn(),s=pi();return P.useEffect(()=>{s||(n(R$(t)),n(O$(r)))},[n,s,t,r]),null}function aO(e){var t=yn();return P.useEffect(()=>{t(ire(e))},[t,e]),null}var hre=["children"];function mre(e,t){if(e==null)return{};var r,n,s=pre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug.apply(null,arguments)}var gre={width:"100%",height:"100%",display:"block"},xre=P.forwardRef((e,t)=>{var r=O5(),n=R5(),s=MP();if(!rf(r)||!rf(n))return null;var{children:i,otherAttributes:o,title:c,desc:u}=e,d,h;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?h=o.role:h=s?"application":void 0,P.createElement(s5,Ug({},o,{title:c,desc:u,role:h,tabIndex:d,width:r,height:n,style:gre,ref:t}),i)}),yre=e=>{var{children:t}=e,r=Pt(z1);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return P.createElement(s5,{width:n,height:s,x:o,y:i},t)},cC=P.forwardRef((e,t)=>{var{children:r}=e,n=mre(e,hre),s=pi();return s?P.createElement(yre,null,r):P.createElement(xre,Ug({ref:t},n),r)});function vre(){var e=yn(),[t,r]=P.useState(null),n=Pt(fW);return P.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;os(i)&&i!==n&&e(L$(i))}},[t,e,n]),r}function uC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bre(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(r),!0).forEach(function(n){wre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wre(e,t,r){return(t=Nre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nre(e){var t=jre(e,"string");return typeof t=="symbol"?t:t+""}function jre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zu.apply(null,arguments)}var Are=()=>(CY(),null);function zg(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Cre=P.forwardRef((e,t)=>{var r,n,s=P.useRef(null),[i,o]=P.useState({containerWidth:zg((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:zg((n=e.style)===null||n===void 0?void 0:n.height)}),c=P.useCallback((d,h)=>{o(p=>{var v=Math.round(d),x=Math.round(h);return p.containerWidth===v&&p.containerHeight===x?p:{containerWidth:v,containerHeight:x}})},[]),u=P.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:h,height:p}=d.getBoundingClientRect();c(h,p);var v=w=>{var{width:j,height:N}=w[0].contentRect;c(j,N)},x=new ResizeObserver(v);x.observe(d),s.current=x}},[t,c]);return P.useEffect(()=>()=>{var d=s.current;d!=null&&d.disconnect()},[c]),P.createElement(P.Fragment,null,P.createElement(W1,{width:i.containerWidth,height:i.containerHeight}),P.createElement("div",zu({ref:u},e)))}),Sre=P.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=P.useState({containerWidth:zg(r),containerHeight:zg(n)}),o=P.useCallback((u,d)=>{i(h=>{var p=Math.round(u),v=Math.round(d);return h.containerWidth===p&&h.containerHeight===v?h:{containerWidth:p,containerHeight:v}})},[]),c=P.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();o(d,h)}},[t,o]);return P.createElement(P.Fragment,null,P.createElement(W1,{width:s.containerWidth,height:s.containerHeight}),P.createElement("div",zu({ref:c},e)))}),Ere=P.forwardRef((e,t)=>{var{width:r,height:n}=e;return P.createElement(P.Fragment,null,P.createElement(W1,{width:r,height:n}),P.createElement("div",zu({ref:t},e)))}),kre=P.forwardRef((e,t)=>{var{width:r,height:n}=e;return Dl(r)||Dl(n)?P.createElement(Sre,zu({},e,{ref:t})):P.createElement(Ere,zu({},e,{ref:t}))});function Pre(e){return e===!0?Cre:kre}var Ire=P.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:v,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:N,width:A,responsive:k,dispatchTouchEvents:E=!0}=e,_=P.useRef(null),O=yn(),[B,F]=P.useState(null),[U,L]=P.useState(null),K=vre(),z=_5(),q=(z==null?void 0:z.width)>0?z.width:A,Q=(z==null?void 0:z.height)>0?z.height:s,G=P.useCallback(le=>{K(le),typeof t=="function"&&t(le),F(le),L(le),le!=null&&(_.current=le)},[K,t,F,L]),H=P.useCallback(le=>{O(V_(le)),O(Pi({handler:i,reactEvent:le}))},[O,i]),ue=P.useCallback(le=>{O(Cb(le)),O(Pi({handler:d,reactEvent:le}))},[O,d]),ye=P.useCallback(le=>{O(_T()),O(Pi({handler:h,reactEvent:le}))},[O,h]),de=P.useCallback(le=>{O(Cb(le)),O(Pi({handler:p,reactEvent:le}))},[O,p]),we=P.useCallback(()=>{O(J_())},[O]),Ee=P.useCallback(le=>{O(Z_(le.key))},[O]),ie=P.useCallback(le=>{O(Pi({handler:o,reactEvent:le}))},[O,o]),V=P.useCallback(le=>{O(Pi({handler:c,reactEvent:le}))},[O,c]),se=P.useCallback(le=>{O(Pi({handler:u,reactEvent:le}))},[O,u]),ne=P.useCallback(le=>{O(Pi({handler:v,reactEvent:le}))},[O,v]),ve=P.useCallback(le=>{O(Pi({handler:j,reactEvent:le}))},[O,j]),be=P.useCallback(le=>{E&&O(eO(le)),O(Pi({handler:w,reactEvent:le}))},[O,E,w]),Te=P.useCallback(le=>{O(Pi({handler:x,reactEvent:le}))},[O,x]),xe=Pre(k);return P.createElement(JT.Provider,{value:B},P.createElement(J7.Provider,{value:U},P.createElement(xe,{width:q??(N==null?void 0:N.width),height:Q??(N==null?void 0:N.height),className:Ur("recharts-wrapper",n),style:bre({position:"relative",cursor:"default",width:q,height:Q},N),onClick:H,onContextMenu:ie,onDoubleClick:V,onFocus:we,onKeyDown:Ee,onMouseDown:se,onMouseEnter:ue,onMouseLeave:ye,onMouseMove:de,onMouseUp:ne,onTouchEnd:Te,onTouchMove:be,onTouchStart:ve,ref:G},P.createElement(Are,null),r)))}),Tre=["width","height","responsive","children","className","style","compact","title","desc"];function _re(e,t){if(e==null)return{};var r,n,s=Ore(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ore(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sO=P.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:o,style:c,compact:u,title:d,desc:h}=e,p=_re(e,Tre),v=mo(p);return u?P.createElement(P.Fragment,null,P.createElement(W1,{width:r,height:n}),P.createElement(cC,{otherAttributes:v,title:d,desc:h},i)):P.createElement(Ire,{className:o,style:c,width:r,height:n,responsive:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},P.createElement(cC,{otherAttributes:v,title:d,desc:h,ref:t},P.createElement(Pee,null,i)))});function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}var Rre={top:5,right:5,bottom:5,left:5},Dre={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Rre,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Lre=P.forwardRef(function(t,r){var n,s=Ns(t.categoricalChartProps,Dre),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:d}=t,h={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return P.createElement(rO,{preloadedState:{options:h},reduxStoreName:(n=d.id)!==null&&n!==void 0?n:i},P.createElement(B_,{chartData:d.data}),P.createElement(nO,{layout:s.layout,margin:s.margin}),P.createElement(aO,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),P.createElement(sO,Sb({},s,{ref:r})))}),Mre=["axis","item"],Bre=P.forwardRef((e,t)=>P.createElement(Lre,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Mre,tooltipPayloadSearcher:e_,categoricalChartProps:e,ref:t}));function Fre(e){var t=yn();return P.useEffect(()=>{t(ore(e))},[t,e]),null}var Ure=["layout"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eb.apply(null,arguments)}function zre(e,t){if(e==null)return{};var r,n,s=$re(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $re(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wre={top:5,right:5,bottom:5,left:5},qre={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Wre,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Hre=P.forwardRef(function(t,r){var n,s=Ns(t.categoricalChartProps,qre),{layout:i}=s,o=zre(s,Ure),{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return P.createElement(rO,{preloadedState:{options:p},reduxStoreName:(n=s.id)!==null&&n!==void 0?n:c},P.createElement(B_,{chartData:s.data}),P.createElement(nO,{layout:i,margin:s.margin}),P.createElement(aO,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),P.createElement(Fre,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),P.createElement(sO,Eb({},o,{ref:r})))}),Vre=["item"],Gre={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},iO=P.forwardRef((e,t)=>{var r=Ns(e,Gre);return P.createElement(Hre,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Vre,tooltipPayloadSearcher:e_,categoricalChartProps:r,ref:t})});const Kre="/api",oO=()=>localStorage.getItem("authToken"),dC=e=>{localStorage.setItem("authToken",e)},Xre=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user")},Yre=()=>{const e=oO();return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}};async function kt(e,t={}){const r=`${Kre}${e}`,n={...t,headers:{...Yre(),...t.headers}};try{const s=await fetch(r,n);if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||`HTTP ${s.status}: ${s.statusText}`)}return await s.json()}catch(s){throw console.error("API Error:",s),s}}const Zre={login:async(e,t)=>{const r=await kt("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return dC(r.token),localStorage.setItem("user",JSON.stringify(r.user)),r},register:async e=>{const t=await kt("/auth/register",{method:"POST",body:JSON.stringify(e)});return dC(t.token),localStorage.setItem("user",JSON.stringify(t.user)),t},me:async()=>kt("/auth/me"),logout:()=>{Xre()}},Jre={getStats:async()=>kt("/dashboard/stats")},_c={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString());const r=t.toString();return kt(`/shipments${r?`?${r}`:""}`)},getById:async e=>kt(`/shipments/${e}`),create:async e=>kt("/shipments",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>kt(`/shipments/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>kt(`/shipments/${e}`,{method:"DELETE"})},Fo={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search);const r=t.toString();return kt(`/racks${r?`?${r}`:""}`)},getById:async e=>kt(`/racks/${e}`),create:async e=>kt("/racks",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>kt(`/racks/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>kt(`/racks/${e}`,{method:"DELETE"})},kh={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.startDate&&t.append("startDate",e.startDate),e!=null&&e.endDate&&t.append("endDate",e.endDate);const r=t.toString();return{jobs:await kt(`/moving-jobs${r?`?${r}`:""}`)}},getById:async e=>kt(`/moving-jobs/${e}`),create:async e=>kt("/moving-jobs",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>kt(`/moving-jobs/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:async e=>kt(`/moving-jobs/${e}`,{method:"DELETE"})},Uo={getSettings:async()=>kt("/billing/settings"),updateSettings:async e=>kt("/billing/settings",{method:"PUT",body:JSON.stringify(e)}),getChargeTypes:async e=>{const t=new URLSearchParams;return e!=null&&e.category&&t.append("category",e.category),(e==null?void 0:e.active)!==void 0&&t.append("active",String(e.active)),kt(`/billing/charge-types${t.toString()?"?"+t.toString():""}`)},getChargeType:async e=>kt(`/billing/charge-types/${e}`),createChargeType:async e=>kt("/billing/charge-types",{method:"POST",body:JSON.stringify(e)}),updateChargeType:async(e,t)=>kt(`/billing/charge-types/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteChargeType:async e=>kt(`/billing/charge-types/${e}`,{method:"DELETE"}),getInvoices:async e=>{const t=new URLSearchParams(e).toString();return kt(`/billing/invoices${t?"?"+t:""}`)},getInvoice:async e=>kt(`/billing/invoices/${e}`),createInvoice:async e=>kt("/billing/invoices",{method:"POST",body:JSON.stringify(e)}),recordPayment:async(e,t)=>kt(`/billing/invoices/${e}/payments`,{method:"POST",body:JSON.stringify(t)})},Qre={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.startDate&&t.append("startDate",e.startDate),e!=null&&e.endDate&&t.append("endDate",e.endDate),e!=null&&e.shipmentId&&t.append("shipmentId",e.shipmentId);const r=t.toString();return kt(`/withdrawals${r?`?${r}`:""}`)},getById:async e=>kt(`/withdrawals/${e}`),create:async e=>kt("/withdrawals",{method:"POST",body:JSON.stringify(e)}),updateStatus:async(e,t)=>kt(`/withdrawals/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})}),delete:async e=>kt(`/withdrawals/${e}`,{method:"DELETE"})},Ed={getAll:async e=>{const t=new URLSearchParams(e).toString();return kt(`/expenses?${t}`,{method:"GET"})},getById:async e=>kt(`/expenses/${e}`,{method:"GET"}),create:async e=>kt("/expenses",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>kt(`/expenses/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>kt(`/expenses/${e}`,{method:"DELETE"}),updateStatus:async(e,t)=>kt(`/expenses/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),getStats:async e=>{const t=new URLSearchParams(e).toString();return kt(`/expenses/stats/summary?${t}`,{method:"GET"})}},fC={getInfo:()=>kt("/company",{method:"GET"}),updateInfo:e=>kt("/company",{method:"PUT",body:JSON.stringify(e)})},ene={getAll:()=>kt("/users",{method:"GET"}),getById:e=>kt(`/users/${e}`,{method:"GET"}),create:e=>kt("/users",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>kt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>kt(`/users/${e}`,{method:"DELETE"}),toggleStatus:e=>kt(`/users/${e}/toggle`,{method:"PATCH"})},hC={get:()=>kt("/invoice-settings",{method:"GET"}),update:e=>kt("/invoice-settings",{method:"PUT",body:JSON.stringify(e)})},mC={get:()=>kt("/notification-preferences",{method:"GET"}),update:e=>kt("/notification-preferences",{method:"PUT",body:JSON.stringify(e)}),sendTest:e=>kt("/notification-preferences/test",{method:"POST",body:JSON.stringify({type:e})})},qm={getAll:e=>{const t=e?`?section=${e}`:"";return kt(`/custom-fields${t}`,{method:"GET"})},getById:e=>kt(`/custom-fields/${e}`,{method:"GET"}),create:e=>kt("/custom-fields",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>kt(`/custom-fields/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>kt(`/custom-fields/${e}`,{method:"DELETE"})},lO=()=>{const[e,t]=P.useState([]),[r,n]=P.useState(!1),[s,i]=P.useState(!1),[o,c]=P.useState({jobCode:"",jobTitle:"",clientName:"",clientPhone:"",clientEmail:"",jobDate:"",jobAddress:"",dropoffAddress:"",notes:""});P.useEffect(()=>{u()},[]);const u=async()=>{n(!0);try{const p=await fetch("/api/moving-jobs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(p.ok){const v=await p.json();t(v)}}catch(p){console.error("Failed to fetch jobs:",p)}finally{n(!1)}},d=async p=>{p.preventDefault();try{(await fetch("/api/moving-jobs",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(o)})).ok&&(i(!1),c({jobCode:"",jobTitle:"",clientName:"",clientPhone:"",clientEmail:"",jobDate:"",jobAddress:"",dropoffAddress:"",notes:""}),u())}catch(v){console.error("Failed to create job:",v)}},h=p=>({PLANNED:"#17a2b8",DISPATCHED:"#ffc107",IN_PROGRESS:"#007bff",COMPLETED:"#28a745",CLOSED:"#6c757d",CANCELLED:"#dc3545"})[p]||"#6c757d";return a.jsxs("div",{style:{padding:"20px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h2",{children:"Moving Jobs Management"}),a.jsx("button",{onClick:()=>i(!s),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:s?"Cancel":"Create New Job"})]}),s&&a.jsx("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Code *"}),a.jsx("input",{type:"text",required:!0,value:o.jobCode,onChange:p=>c({...o,jobCode:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Title *"}),a.jsx("input",{type:"text",required:!0,value:o.jobTitle,onChange:p=>c({...o,jobTitle:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Client Name *"}),a.jsx("input",{type:"text",required:!0,value:o.clientName,onChange:p=>c({...o,clientName:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Client Phone *"}),a.jsx("input",{type:"tel",required:!0,value:o.clientPhone,onChange:p=>c({...o,clientPhone:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Date *"}),a.jsx("input",{type:"datetime-local",required:!0,value:o.jobDate,onChange:p=>c({...o,jobDate:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Address *"}),a.jsx("input",{type:"text",required:!0,value:o.jobAddress,onChange:p=>c({...o,jobAddress:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),a.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Create Job"})]})}),a.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[r?a.jsx("p",{children:"Loading..."}):a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job Code"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job Title"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Client"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Date"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Status"})]})}),a.jsx("tbody",{children:e.map(p=>a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:p.jobCode}),a.jsx("td",{style:{padding:"12px"},children:p.jobTitle}),a.jsx("td",{style:{padding:"12px"},children:p.clientName}),a.jsx("td",{style:{padding:"12px"},children:new Date(p.jobDate).toLocaleDateString()}),a.jsx("td",{style:{padding:"12px"},children:a.jsx("span",{style:{backgroundColor:h(p.status),color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:p.status})})]},p.id))})]}),e.length===0&&!r&&a.jsx("p",{style:{textAlign:"center",color:"#6c757d"},children:"No jobs found. Create one to get started!"})]})]})},tne=()=>{var O,B,F,U,L,K,z,q,Q,G,H,ue,ye,de,we,Ee,ie,V,se,ne,ve,be,Te,xe,le,Ce,ke,Ie,We,Re,he;const[e,t]=P.useState(null),[r,n]=P.useState([]),[s,i]=P.useState([]),[o,c]=P.useState([]),[u,d]=P.useState([]),[h,p]=P.useState([]),[v,x]=P.useState(!0),[w,j]=P.useState("");P.useEffect(()=>{N()},[]);const N=async()=>{try{x(!0);const Ze=await Jre.getStats();t(Ze.stats),n(Ze.topClients||[]),i(Ze.storageBySection||[]),c(Ze.recentShipments||[]),d(Ze.recentJobs||[]),p(Ze.recentActivities||[])}catch(Ze){j(Ze.message),console.error("Dashboard error:",Ze)}finally{x(!1)}};if(v)return a.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})});if(w)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Error loading dashboard: ",w]})});const A=[{name:"Total Revenue",value:`${((B=(O=e==null?void 0:e.invoiceRevenue)==null?void 0:O.total)==null?void 0:B.toFixed(2))||"0.00"} KWD`,subtitle:`${((F=e==null?void 0:e.invoiceRevenue)==null?void 0:F.count)||0} invoices`,icon:Lo,color:"bg-blue-500"},{name:"Paid Amount",value:`${((L=(U=e==null?void 0:e.invoiceRevenue)==null?void 0:U.paid)==null?void 0:L.toFixed(2))||"0.00"} KWD`,subtitle:`${((K=e==null?void 0:e.invoiceRevenue)==null?void 0:K.paidCount)||0} paid invoices`,icon:Qh,color:"bg-green-500"},{name:"Outstanding",value:`${((q=(z=e==null?void 0:e.invoiceRevenue)==null?void 0:z.outstanding)==null?void 0:q.toFixed(2))||"0.00"} KWD`,subtitle:"Pending payments",icon:$B,color:"bg-yellow-500"},{name:"This Month",value:`${((G=(Q=e==null?void 0:e.thisMonthRevenue)==null?void 0:Q.amount)==null?void 0:G.toFixed(2))||"0.00"} KWD`,subtitle:"Current month revenue",icon:e0,color:"bg-purple-500"}],k=[{name:"Active Shipments",value:((H=e==null?void 0:e.shipments)==null?void 0:H.active)||0,total:((ue=e==null?void 0:e.shipments)==null?void 0:ue.total)||0,icon:Rl,color:"text-blue-600"},{name:"Rack Utilization",value:`${((ye=e==null?void 0:e.racks)==null?void 0:ye.utilization)||0}%`,total:`${((de=e==null?void 0:e.racks)==null?void 0:de.active)||0} active`,icon:r0,color:"text-green-600"},{name:"Jobs In Progress",value:((we=e==null?void 0:e.jobs)==null?void 0:we.inProgress)||0,total:`${((Ee=e==null?void 0:e.jobs)==null?void 0:Ee.scheduled)||0} scheduled`,icon:Ic,color:"text-yellow-600"},{name:"Withdrawals (Month)",value:((ie=e==null?void 0:e.withdrawals)==null?void 0:ie.thisMonth)||0,total:`${((V=e==null?void 0:e.withdrawals)==null?void 0:V.total)||0} total`,icon:Jh,color:"text-purple-600"}],E=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ef4444","#06b6d4"],_=s.map((Ze,ot)=>({name:Ze.section||"Unknown",value:Ze.capacityUsed||0,total:Ze.capacityTotal||0,utilization:Ze.utilization||0,fill:E[ot%E.length]}));return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening today."})]}),a.jsx("div",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:A.map(Ze=>{const ot=Ze.icon;return a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:Ze.name}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Ze.value}),a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:Ze.subtitle})]}),a.jsx("div",{className:`${Ze.color} p-3 rounded-lg`,children:a.jsx(ot,{className:"h-6 w-6 text-white"})})]})},Ze.name)})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(Ze=>{const ot=Ze.icon;return a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ot,{className:`h-8 w-8 ${Ze.color}`}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:Ze.name}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:Ze.value}),a.jsx("p",{className:"text-xs text-gray-500",children:Ze.total})]})]})},Ze.name)})}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Rl,{className:"h-6 w-6 mr-2 text-blue-600"}),"📊 Shipment Status Breakdown"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-gray-400",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Shipments"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:((se=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:se.total)||0})]}),a.jsx("div",{className:"text-4xl",children:"📦"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-yellow-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),a.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:((ne=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:ne.pending)||0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((ve=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:ve.total)>0?Math.round(((be=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:be.pending)/((Te=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Te.total)*100):0,"% of total"]})]}),a.jsx("div",{className:"text-4xl",children:"🟡"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"In Storage"}),a.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:((xe=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:xe.inStorage)||0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((le=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:le.total)>0?Math.round(((Ce=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Ce.inStorage)/((ke=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:ke.total)*100):0,"% of total"]})]}),a.jsx("div",{className:"text-4xl",children:"🟢"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Released"}),a.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:((Ie=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Ie.released)||0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((We=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:We.total)>0?Math.round(((Re=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Re.released)/((he=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:he.total)*100):0,"% of total"]})]}),a.jsx("div",{className:"text-4xl",children:"🔵"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Storage Utilization by Section"}),_.length>0?a.jsx(Yv,{width:"100%",height:250,children:a.jsxs(iO,{children:[a.jsx(n3,{data:_,cx:"50%",cy:"50%",labelLine:!1,label:({name:Ze,utilization:ot})=>`${Ze} (${ot}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:_.map((Ze,ot)=>a.jsx(Rf,{fill:Ze.fill},`cell-${ot}`))}),a.jsx(vb,{formatter:(Ze,ot,it)=>[`${Ze} / ${it.payload.total} (${it.payload.utilization}%)`,"Capacity Used"]}),a.jsx(af,{})]})}):a.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:a.jsx("p",{className:"text-gray-400",children:"No storage data available"})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Clients"}),a.jsx("div",{className:"space-y-3",children:r.length>0?r.map((Ze,ot)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:ot+1}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:Ze.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:[Ze.totalInvoices," invoices"]})]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"font-semibold text-gray-900",children:[Ze.totalAmount.toFixed(2)," KWD"]})})]},ot)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No client data available"})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),a.jsxs("button",{onClick:N,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center space-x-1",children:[a.jsx(Jh,{className:"h-4 w-4"}),a.jsx("span",{children:"Refresh"})]})]}),a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:h.length>0?h.map((Ze,ot)=>{var it,Ve;return a.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:((it=Ze.user)==null?void 0:it.name)||"System"})," ",a.jsxs("span",{className:"text-gray-600",children:[Ze.activityType==="ITEM_ADDED"&&"added item to",Ze.activityType==="ITEM_REMOVED"&&"removed item from",Ze.activityType==="STATUS_CHANGE"&&"changed status of",Ze.activityType==="CAPACITY_UPDATE"&&"updated capacity of"," "]}),a.jsx("span",{className:"font-medium",children:(Ve=Ze.rack)==null?void 0:Ve.code})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Ze.description}),a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(Ze.timestamp).toLocaleString()})]})]},ot)}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activities"})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Shipments"}),a.jsx("div",{className:"space-y-3",children:o.length>0?o.map(Ze=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:Ze.referenceId}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Ze.clientName," • ",Ze.currentBoxCount," boxes"]})]}),a.jsx("div",{className:"text-right",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ze.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Ze.status})})]},Ze.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent shipments"})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Jobs"}),a.jsx("div",{className:"space-y-3",children:u.length>0?u.map(Ze=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:Ze.title}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Ze.clientName," • ",Ze.jobType]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-gray-500",children:new Date(Ze.scheduledDate).toLocaleDateString()}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ze.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:Ze.status.replace("_"," ")})]})]},Ze.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Ic,{className:"h-6 w-6 mr-2 text-orange-600"}),"🚚 Moving Jobs Management"]}),a.jsx(lO,{})]})]})};var rne=Object.defineProperty,$g=Object.getOwnPropertySymbols,cO=Object.prototype.hasOwnProperty,uO=Object.prototype.propertyIsEnumerable,pC=(e,t,r)=>t in e?rne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kb=(e,t)=>{for(var r in t||(t={}))cO.call(t,r)&&pC(e,r,t[r]);if($g)for(var r of $g(t))uO.call(t,r)&&pC(e,r,t[r]);return e},Pb=(e,t)=>{var r={};for(var n in e)cO.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&$g)for(var n of $g(e))t.indexOf(n)<0&&uO.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var $u;(e=>{const t=class fr{constructor(u,d,h,p){if(this.version=u,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],u<fr.MIN_VERSION||u>fr.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let v=[];for(let w=0;w<this.size;w++)v.push(!1);for(let w=0;w<this.size;w++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(h);if(this.drawCodewords(x),p==-1){let w=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const N=this.getPenaltyScore();N<w&&(p=j,w=N),this.applyMask(j)}}s(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(u,d){const h=e.QrSegment.makeSegments(u);return fr.encodeSegments(h,d)}static encodeBinary(u,d){const h=e.QrSegment.makeBytes(u);return fr.encodeSegments([h],d)}static encodeSegments(u,d,h=1,p=40,v=-1,x=!0){if(!(fr.MIN_VERSION<=h&&h<=p&&p<=fr.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");let w,j;for(w=h;;w++){const E=fr.getNumDataCodewords(w,d)*8,_=o.getTotalBits(u,w);if(_<=E){j=_;break}if(w>=p)throw new RangeError("Data too long")}for(const E of[fr.Ecc.MEDIUM,fr.Ecc.QUARTILE,fr.Ecc.HIGH])x&&j<=fr.getNumDataCodewords(w,E)*8&&(d=E);let N=[];for(const E of u){r(E.mode.modeBits,4,N),r(E.numChars,E.mode.numCharCountBits(w),N);for(const _ of E.getData())N.push(_)}s(N.length==j);const A=fr.getNumDataCodewords(w,d)*8;s(N.length<=A),r(0,Math.min(4,A-N.length),N),r(0,(8-N.length%8)%8,N),s(N.length%8==0);for(let E=236;N.length<A;E^=253)r(E,8,N);let k=[];for(;k.length*8<N.length;)k.push(0);return N.forEach((E,_)=>k[_>>>3]|=E<<7-(_&7)),new fr(w,d,k,v)}getModule(u,d){return 0<=u&&u<this.size&&0<=d&&d<this.size&&this.modules[d][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),d=u.length;for(let h=0;h<d;h++)for(let p=0;p<d;p++)h==0&&p==0||h==0&&p==d-1||h==d-1&&p==0||this.drawAlignmentPattern(u[h],u[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const d=this.errorCorrectionLevel.formatBits<<3|u;let h=d;for(let v=0;v<10;v++)h=h<<1^(h>>>9)*1335;const p=(d<<10|h)^21522;s(p>>>15==0);for(let v=0;v<=5;v++)this.setFunctionModule(8,v,n(p,v));this.setFunctionModule(8,7,n(p,6)),this.setFunctionModule(8,8,n(p,7)),this.setFunctionModule(7,8,n(p,8));for(let v=9;v<15;v++)this.setFunctionModule(14-v,8,n(p,v));for(let v=0;v<8;v++)this.setFunctionModule(this.size-1-v,8,n(p,v));for(let v=8;v<15;v++)this.setFunctionModule(8,this.size-15+v,n(p,v));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let h=0;h<12;h++)u=u<<1^(u>>>11)*7973;const d=this.version<<12|u;s(d>>>18==0);for(let h=0;h<18;h++){const p=n(d,h),v=this.size-11+h%3,x=Math.floor(h/3);this.setFunctionModule(v,x,p),this.setFunctionModule(x,v,p)}}drawFinderPattern(u,d){for(let h=-4;h<=4;h++)for(let p=-4;p<=4;p++){const v=Math.max(Math.abs(p),Math.abs(h)),x=u+p,w=d+h;0<=x&&x<this.size&&0<=w&&w<this.size&&this.setFunctionModule(x,w,v!=2&&v!=4)}}drawAlignmentPattern(u,d){for(let h=-2;h<=2;h++)for(let p=-2;p<=2;p++)this.setFunctionModule(u+p,d+h,Math.max(Math.abs(p),Math.abs(h))!=1)}setFunctionModule(u,d,h){this.modules[d][u]=h,this.isFunction[d][u]=!0}addEccAndInterleave(u){const d=this.version,h=this.errorCorrectionLevel;if(u.length!=fr.getNumDataCodewords(d,h))throw new RangeError("Invalid argument");const p=fr.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d],v=fr.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d],x=Math.floor(fr.getNumRawDataModules(d)/8),w=p-x%p,j=Math.floor(x/p);let N=[];const A=fr.reedSolomonComputeDivisor(v);for(let E=0,_=0;E<p;E++){let O=u.slice(_,_+j-v+(E<w?0:1));_+=O.length;const B=fr.reedSolomonComputeRemainder(O,A);E<w&&O.push(0),N.push(O.concat(B))}let k=[];for(let E=0;E<N[0].length;E++)N.forEach((_,O)=>{(E!=j-v||O>=w)&&k.push(_[E])});return s(k.length==x),k}drawCodewords(u){if(u.length!=Math.floor(fr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let p=0;p<this.size;p++)for(let v=0;v<2;v++){const x=h-v,j=(h+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&d<u.length*8&&(this.modules[j][x]=n(u[d>>>3],7-(d&7)),d++)}}s(d==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let h=0;h<this.size;h++){let p;switch(u){case 0:p=(h+d)%2==0;break;case 1:p=d%2==0;break;case 2:p=h%3==0;break;case 3:p=(h+d)%3==0;break;case 4:p=(Math.floor(h/3)+Math.floor(d/2))%2==0;break;case 5:p=h*d%2+h*d%3==0;break;case 6:p=(h*d%2+h*d%3)%2==0;break;case 7:p=((h+d)%2+h*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][h]&&p&&(this.modules[d][h]=!this.modules[d][h])}}getPenaltyScore(){let u=0;for(let v=0;v<this.size;v++){let x=!1,w=0,j=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[v][N]==x?(w++,w==5?u+=fr.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,j),x||(u+=this.finderPenaltyCountPatterns(j)*fr.PENALTY_N3),x=this.modules[v][N],w=1);u+=this.finderPenaltyTerminateAndCount(x,w,j)*fr.PENALTY_N3}for(let v=0;v<this.size;v++){let x=!1,w=0,j=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][v]==x?(w++,w==5?u+=fr.PENALTY_N1:w>5&&u++):(this.finderPenaltyAddHistory(w,j),x||(u+=this.finderPenaltyCountPatterns(j)*fr.PENALTY_N3),x=this.modules[N][v],w=1);u+=this.finderPenaltyTerminateAndCount(x,w,j)*fr.PENALTY_N3}for(let v=0;v<this.size-1;v++)for(let x=0;x<this.size-1;x++){const w=this.modules[v][x];w==this.modules[v][x+1]&&w==this.modules[v+1][x]&&w==this.modules[v+1][x+1]&&(u+=fr.PENALTY_N2)}let d=0;for(const v of this.modules)d=v.reduce((x,w)=>x+(w?1:0),d);const h=this.size*this.size,p=Math.ceil(Math.abs(d*20-h*10)/h)-1;return s(0<=p&&p<=9),u+=p*fr.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let h=[6];for(let p=this.size-7;h.length<u;p-=d)h.splice(1,0,p);return h}}static getNumRawDataModules(u){if(u<fr.MIN_VERSION||u>fr.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*u+128)*u+64;if(u>=2){const h=Math.floor(u/7)+2;d-=(25*h-10)*h-55,u>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(u,d){return Math.floor(fr.getNumRawDataModules(u)/8)-fr.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u]*fr.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let d=[];for(let p=0;p<u-1;p++)d.push(0);d.push(1);let h=1;for(let p=0;p<u;p++){for(let v=0;v<d.length;v++)d[v]=fr.reedSolomonMultiply(d[v],h),v+1<d.length&&(d[v]^=d[v+1]);h=fr.reedSolomonMultiply(h,2)}return d}static reedSolomonComputeRemainder(u,d){let h=d.map(p=>0);for(const p of u){const v=p^h.shift();h.push(0),d.forEach((x,w)=>h[w]^=fr.reedSolomonMultiply(x,v))}return h}static reedSolomonMultiply(u,d){if(u>>>8||d>>>8)throw new RangeError("Byte out of range");let h=0;for(let p=7;p>=0;p--)h=h<<1^(h>>>7)*285,h^=(d>>>p&1)*u;return s(h>>>8==0),h}finderPenaltyCountPatterns(u){const d=u[1];s(d<=this.size*3);const h=d>0&&u[2]==d&&u[3]==d*3&&u[4]==d&&u[5]==d;return(h&&u[0]>=d*4&&u[6]>=d?1:0)+(h&&u[6]>=d*4&&u[0]>=d?1:0)}finderPenaltyTerminateAndCount(u,d,h){return u&&(this.finderPenaltyAddHistory(d,h),d=0),d+=this.size,this.finderPenaltyAddHistory(d,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(u,d){d[0]==0&&(u+=this.size),d.pop(),d.unshift(u)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(c,u,d){if(u<0||u>31||c>>>u)throw new RangeError("Value out of range");for(let h=u-1;h>=0;h--)d.push(c>>>h&1)}function n(c,u){return(c>>>u&1)!=0}function s(c){if(!c)throw new Error("Assertion error")}const i=class _n{constructor(u,d,h){if(this.mode=u,this.numChars=d,this.bitData=h,d<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(u){let d=[];for(const h of u)r(h,8,d);return new _n(_n.Mode.BYTE,u.length,d)}static makeNumeric(u){if(!_n.isNumeric(u))throw new RangeError("String contains non-numeric characters");let d=[];for(let h=0;h<u.length;){const p=Math.min(u.length-h,3);r(parseInt(u.substring(h,h+p),10),p*3+1,d),h+=p}return new _n(_n.Mode.NUMERIC,u.length,d)}static makeAlphanumeric(u){if(!_n.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],h;for(h=0;h+2<=u.length;h+=2){let p=_n.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h))*45;p+=_n.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h+1)),r(p,11,d)}return h<u.length&&r(_n.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h)),6,d),new _n(_n.Mode.ALPHANUMERIC,u.length,d)}static makeSegments(u){return u==""?[]:_n.isNumeric(u)?[_n.makeNumeric(u)]:_n.isAlphanumeric(u)?[_n.makeAlphanumeric(u)]:[_n.makeBytes(_n.toUtf8ByteArray(u))]}static makeEci(u){let d=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,d);else if(u<16384)r(2,2,d),r(u,14,d);else if(u<1e6)r(6,3,d),r(u,21,d);else throw new RangeError("ECI assignment value out of range");return new _n(_n.Mode.ECI,0,d)}static isNumeric(u){return _n.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return _n.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,d){let h=0;for(const p of u){const v=p.mode.numCharCountBits(d);if(p.numChars>=1<<v)return 1/0;h+=4+v+p.bitData.length}return h}static toUtf8ByteArray(u){u=encodeURI(u);let d=[];for(let h=0;h<u.length;h++)u.charAt(h)!="%"?d.push(u.charCodeAt(h)):(d.push(parseInt(u.substring(h+1,h+3),16)),h+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})($u||($u={}));(e=>{(t=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})($u||($u={}));(e=>{(t=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})($u||($u={}));var kd=$u;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var nne={L:kd.QrCode.Ecc.LOW,M:kd.QrCode.Ecc.MEDIUM,Q:kd.QrCode.Ecc.QUARTILE,H:kd.QrCode.Ecc.HIGH},dO=128,fO="L",hO="#FFFFFF",mO="#000000",pO=!1,gO=1,ane=4,sne=0,ine=.1;function xO(e,t=0){const r=[];return e.forEach(function(n,s){let i=null;n.forEach(function(o,c){if(!o&&i!==null){r.push(`M${i+t} ${s+t}h${c-i}v1H${i+t}z`),i=null;return}if(c===n.length-1){if(!o)return;i===null?r.push(`M${c+t},${s+t} h1v1H${c+t}z`):r.push(`M${i+t},${s+t} h${c+1-i}v1H${i+t}z`);return}o&&i===null&&(i=c)})}),r.join("")}function yO(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((s,i)=>i<t.x||i>=t.x+t.w?s:!1))}function one(e,t,r,n){if(n==null)return null;const s=e.length+r*2,i=Math.floor(t*ine),o=s/t,c=(n.width||i)*o,u=(n.height||i)*o,d=n.x==null?e.length/2-c/2:n.x*o,h=n.y==null?e.length/2-u/2:n.y*o,p=n.opacity==null?1:n.opacity;let v=null;if(n.excavate){let w=Math.floor(d),j=Math.floor(h),N=Math.ceil(c+d-w),A=Math.ceil(u+h-j);v={x:w,y:j,w:N,h:A}}const x=n.crossOrigin;return{x:d,y:h,h:u,w:c,excavation:v,opacity:p,crossOrigin:x}}function lne(e,t){return t!=null?Math.max(Math.floor(t),0):e?ane:sne}function vO({value:e,level:t,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:o,boostLevel:c}){let u=Un.useMemo(()=>{const w=(Array.isArray(e)?e:[e]).reduce((j,N)=>(j.push(...kd.QrSegment.makeSegments(N)),j),[]);return kd.QrCode.encodeSegments(w,nne[t],r,void 0,void 0,c)},[e,t,r,c]);const{cells:d,margin:h,numCells:p,calculatedImageSettings:v}=Un.useMemo(()=>{let x=u.getModules();const w=lne(n,s),j=x.length+w*2,N=one(x,o,w,i);return{cells:x,margin:w,numCells:j,calculatedImageSettings:N}},[u,o,i,n,s]);return{qrcode:u,margin:h,cells:d,numCells:p,calculatedImageSettings:v}}var cne=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),une=Un.forwardRef(function(t,r){const n=t,{value:s,size:i=dO,level:o=fO,bgColor:c=hO,fgColor:u=mO,includeMargin:d=pO,minVersion:h=gO,boostLevel:p,marginSize:v,imageSettings:x}=n,j=Pb(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:N}=j,A=Pb(j,["style"]),k=x==null?void 0:x.src,E=Un.useRef(null),_=Un.useRef(null),O=Un.useCallback(G=>{E.current=G,typeof r=="function"?r(G):r&&(r.current=G)},[r]),[B,F]=Un.useState(!1),{margin:U,cells:L,numCells:K,calculatedImageSettings:z}=vO({value:s,level:o,minVersion:h,boostLevel:p,includeMargin:d,marginSize:v,imageSettings:x,size:i});Un.useEffect(()=>{if(E.current!=null){const G=E.current,H=G.getContext("2d");if(!H)return;let ue=L;const ye=_.current,de=z!=null&&ye!==null&&ye.complete&&ye.naturalHeight!==0&&ye.naturalWidth!==0;de&&z.excavation!=null&&(ue=yO(L,z.excavation));const we=window.devicePixelRatio||1;G.height=G.width=i*we;const Ee=i/K*we;H.scale(Ee,Ee),H.fillStyle=c,H.fillRect(0,0,K,K),H.fillStyle=u,cne?H.fill(new Path2D(xO(ue,U))):L.forEach(function(ie,V){ie.forEach(function(se,ne){se&&H.fillRect(ne+U,V+U,1,1)})}),z&&(H.globalAlpha=z.opacity),de&&H.drawImage(ye,z.x+U,z.y+U,z.w,z.h)}}),Un.useEffect(()=>{F(!1)},[k]);const q=kb({height:i,width:i},N);let Q=null;return k!=null&&(Q=Un.createElement("img",{src:k,key:k,style:{display:"none"},onLoad:()=>{F(!0)},ref:_,crossOrigin:z==null?void 0:z.crossOrigin})),Un.createElement(Un.Fragment,null,Un.createElement("canvas",kb({style:q,height:i,width:i,ref:O,role:"img"},A)),Q)});une.displayName="QRCodeCanvas";var f3=Un.forwardRef(function(t,r){const n=t,{value:s,size:i=dO,level:o=fO,bgColor:c=hO,fgColor:u=mO,includeMargin:d=pO,minVersion:h=gO,boostLevel:p,title:v,marginSize:x,imageSettings:w}=n,j=Pb(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:N,cells:A,numCells:k,calculatedImageSettings:E}=vO({value:s,level:o,minVersion:h,boostLevel:p,includeMargin:d,marginSize:x,imageSettings:w,size:i});let _=A,O=null;w!=null&&E!=null&&(E.excavation!=null&&(_=yO(A,E.excavation)),O=Un.createElement("image",{href:w.src,height:E.h,width:E.w,x:E.x+N,y:E.y+N,preserveAspectRatio:"none",opacity:E.opacity,crossOrigin:E.crossOrigin}));const B=xO(_,N);return Un.createElement("svg",kb({height:i,width:i,viewBox:`0 0 ${k} ${k}`,ref:r,role:"img"},j),!!v&&Un.createElement("title",null,v),Un.createElement("path",{fill:c,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),Un.createElement("path",{fill:u,d:B,shapeRendering:"crispEdges"}),O)});f3.displayName="QRCodeSVG";const dne=({isOpen:e,onClose:t,releaseData:r,companyInfo:n})=>{var L,K;const{shipment:s,invoice:i,releaseDate:o,releasedBy:c,collectorID:u,collectorName:d,releaseType:h,boxesReleased:p,boxNumbers:v}=r,[x,w]=P.useState(null);P.useEffect(()=>{e&&(async()=>{try{const Q=await(await fetch("/api/template-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();Q.success&&w(Q.settings)}catch(q){console.error("Failed to load template settings:",q)}})()},[e]);const j=()=>{window.print()};if(!e)return null;const N=x||{},A=N.releasePrimaryColor||"#1e40af",k=N.releaseNoteHeaderBg||A,E=N.currencySymbol||"KD",_=N.dateFormat||"MMM dd, yyyy";N.timeFormat;const O=(z,q)=>{const Q=z instanceof Date?z:new Date(z),G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return q==="MMM dd, yyyy"?`${G[Q.getMonth()]} ${Q.getDate().toString().padStart(2,"0")}, ${Q.getFullYear()}`:q==="yyyyMMdd-HHmmss"?`${Q.getFullYear()}${(Q.getMonth()+1).toString().padStart(2,"0")}${Q.getDate().toString().padStart(2,"0")}-${Q.getHours().toString().padStart(2,"0")}${Q.getMinutes().toString().padStart(2,"0")}${Q.getSeconds().toString().padStart(2,"0")}`:Q.toLocaleDateString()},B=o instanceof Date?o:new Date(o),F=s.arrivalDate instanceof Date?s.arrivalDate:new Date(s.arrivalDate),U=Math.ceil((B.getTime()-F.getTime())/(1e3*60*60*24));return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"no-print sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Release Note Generated"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[a.jsx(_u,{className:"h-5 w-5"}),"Print Release Note"]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx($c,{className:"h-6 w-6"})})]})]}),a.jsxs("div",{className:"release-note-content p-8 relative",children:[N.showQRCode&&s&&a.jsx("div",{className:`absolute ${(()=>{const z=N.qrCodePosition||"TOP_RIGHT",q={TOP_RIGHT:"top-4 right-4",TOP_LEFT:"top-4 left-4",BOTTOM_RIGHT:"bottom-4 right-4",BOTTOM_LEFT:"bottom-4 left-4"};return q[z]||q.TOP_RIGHT})()} z-10 bg-white p-2 rounded-lg shadow-md print:block`,children:a.jsx(f3,{value:`SHIPMENT-${s.shipmentNumber||s.id}`,size:N.qrCodeSize||100,level:"M",includeMargin:!0})}),a.jsxs("div",{className:"text-center mb-6 pb-4 border-b-2",style:{borderColor:k},children:[N.releaseNoteShowLogo!==!1&&(N.companyLogo||(n==null?void 0:n.logo))&&a.jsx("img",{src:N.companyLogo||(n==null?void 0:n.logo),alt:"Logo",className:"h-16 mx-auto mb-2"}),a.jsx("h1",{className:"text-2xl font-bold",style:{color:A},children:N.companyName||(n==null?void 0:n.name)||"QGO Cargo"}),a.jsx("h2",{className:"text-xl text-gray-600 mt-2",children:N.releaseNoteTitle||"SHIPMENT RELEASE NOTE"}),N.companyAddress&&a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:N.companyAddress}),(N.companyPhone||N.companyEmail)&&a.jsxs("p",{className:"text-sm text-gray-600",children:[N.companyPhone&&a.jsx("span",{children:N.companyPhone}),N.companyPhone&&N.companyEmail&&a.jsx("span",{children:" | "}),N.companyEmail&&a.jsx("span",{children:N.companyEmail})]})]}),a.jsx("div",{className:"bg-gray-50 p-4 rounded mb-6",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"Release Note #:"}),a.jsxs("span",{className:"ml-2",children:["RN-",O(B,"yyyyMMdd-HHmmss")]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"Date & Time:"}),a.jsxs("span",{className:"ml-2",children:[O(B,_)," - ",B.toLocaleTimeString()]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:"Released By:"}),a.jsx("span",{className:"ml-2",children:c})]})]})}),N.releaseShowShipment!==!1&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"SHIPMENT DETAILS"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Shipment ID:"})," ",s.qrCode]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Reference:"})," ",s.referenceId||"N/A"]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",s.clientName]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Client Phone:"})," ",s.clientPhone]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Client Email:"})," ",s.clientEmail||"N/A"]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Storage Type:"})," ",s.type]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Rack Locations:"})," ",s.rackLocations||((L=s.rack)==null?void 0:L.code)||"N/A"]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Status:"})," ",a.jsx("span",{className:"text-green-600 font-semibold",children:"RELEASED"})]})]})]})]}),N.releaseShowStorage!==!1&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"STORAGE INFORMATION"}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Received Date"}),a.jsx("p",{className:"text-gray-800",children:s.receivedDate?O(s.receivedDate,"MMM dd, yyyy"):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Arrival Date"}),a.jsx("p",{className:"text-gray-800",children:s.arrivalDate?O(s.arrivalDate,"MMM dd, yyyy"):O(F,"MMM dd, yyyy")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Release Date"}),a.jsx("p",{className:"text-gray-800",children:O(B,"MMM dd, yyyy")})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Storage Duration"}),a.jsxs("p",{className:"text-gray-800 text-lg font-bold",style:{color:A},children:[U," days"]})]})]})]}),N.releaseShowItems!==!1&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"ITEMS RELEASED"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Total Boxes"}),a.jsxs("p",{className:"text-gray-800 text-lg",children:[s.originalBoxCount," boxes"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Release Type"}),a.jsx("p",{className:"text-gray-800 text-lg",children:h==="FULL"?"FULL RELEASE":"PARTIAL RELEASE"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600",children:"Boxes Released"}),a.jsxs("p",{className:"text-gray-800 text-lg font-bold text-green-600",children:[p," boxes"]})]})]}),v&&v.length>0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-semibold text-gray-600 mb-1",children:"Box Numbers Released:"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-2 rounded font-mono",children:v.join(", ")})]})]}),N.releaseShowItems!==!1&&s.boxes&&s.boxes.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"ًں“¦ BOX DISTRIBUTION BY RACK"}),a.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Storage location details for each box before release"}),(()=>{const z={};return s.boxes.forEach(q=>{if(q.rackId&&q.rack){const Q=q.rack.code;z[Q]||(z[Q]=[]),z[Q].push(q)}else z.Unassigned||(z.Unassigned=[]),z.Unassigned.push(q)}),a.jsx("div",{className:"space-y-3",children:Object.entries(z).map(([q,Q])=>{var ue;const G=q==="Unassigned",H=(ue=Q[0])==null?void 0:ue.rack;return a.jsxs("div",{className:`border-2 rounded-lg p-3 ${G?"border-yellow-300 bg-yellow-50":"border-green-300 bg-green-50"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-base font-bold text-gray-800",children:G?"âڈ³ Unassigned":`ًں—„ï¸ڈ Rack ${q}`}),a.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${G?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:[Q.length," box",Q.length!==1?"es":""]})]}),!G&&(H==null?void 0:H.location)&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["ًں“چ ",H.location]})]})}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Q.map(ye=>a.jsxs("div",{className:`px-2 py-1 rounded text-xs font-bold font-mono ${ye.status==="IN_STORAGE"||ye.status==="RELEASED"?"bg-white border-2 border-gray-400 text-gray-800":"bg-yellow-200 text-yellow-900"}`,title:`Box #${ye.boxNumber} - ${ye.status}`,children:["#",ye.boxNumber]},ye.id))})]},q)})})})(),a.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-xs",children:[a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Total Racks Used"}),a.jsx("p",{className:"text-lg font-bold text-gray-800",children:Object.keys(s.boxes.reduce((z,q)=>(q.rackId&&(z[q.rackId]=!0),z),{})).length})]}),a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Assigned Boxes"}),a.jsx("p",{className:"text-lg font-bold text-green-600",children:s.boxes.filter(z=>z.rackId).length})]}),a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[a.jsx("p",{className:"text-gray-600",children:"Unassigned Boxes"}),a.jsx("p",{className:"text-lg font-bold text-yellow-600",children:s.boxes.filter(z=>!z.rackId).length})]})]})]}),N.releaseShowCollector!==!1&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"COLLECTOR INFORMATION"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 text-sm mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600 mb-1",children:"Collector Name:"}),a.jsx("p",{className:"border-b-2 border-gray-400 pb-1 min-h-[28px]",children:d||"_________________________"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-600 mb-1",children:"ID Number:"}),a.jsx("p",{className:"text-gray-800 font-mono font-semibold",children:u})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Collector Signature:"}),a.jsx("div",{className:"border-b-2 border-gray-800 h-20"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Date:"}),a.jsx("p",{className:"border-b border-gray-400 pb-1",children:O(B,"MMM dd, yyyy")})]})]})]}),N.releaseShowCharges!==!1&&i&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"CHARGES & PAYMENT"}),a.jsx("table",{className:"w-full text-sm",children:a.jsxs("tbody",{children:[(K=i.lineItems)==null?void 0:K.map((z,q)=>a.jsxs("tr",{children:[a.jsx("td",{className:"py-1.5 text-gray-700",children:z.description}),a.jsxs("td",{className:"text-right font-mono",children:[z.amount.toFixed(3)," ",E]})]},q)),a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"py-1.5 font-semibold",children:"Subtotal"}),a.jsxs("td",{className:"text-right font-semibold font-mono",children:[i.subtotal.toFixed(3)," ",E]})]}),a.jsxs("tr",{children:[a.jsxs("td",{className:"py-1.5",children:["Tax (",(i.taxAmount/i.subtotal*100).toFixed(1),"%)"]}),a.jsxs("td",{className:"text-right font-mono",children:[i.taxAmount.toFixed(3)," ",E]})]}),a.jsxs("tr",{className:"border-t-2 border-gray-800",children:[a.jsx("td",{className:"py-2 text-lg font-bold",children:"TOTAL AMOUNT"}),a.jsxs("td",{className:"text-right text-lg font-bold font-mono",children:[i.totalAmount.toFixed(3)," ",E]})]})]})}),a.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded text-sm",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"font-semibold",children:"Invoice Number:"})," ",a.jsx("span",{className:"font-mono",children:i.invoiceNumber})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Payment Status:"}),a.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs font-semibold ${i.paymentStatus==="PAID"?"bg-green-100 text-green-800":i.paymentStatus==="PENDING"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:i.paymentStatus})]})]})]}),N.releaseShowTerms!==!1&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"TERMS & CONDITIONS"}),N.releaseTerms?a.jsx("div",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:N.releaseTerms}):a.jsxs("ul",{className:"text-xs space-y-1 text-gray-700 ml-4",children:[a.jsx("li",{children:"â€¢ All items have been inspected and released in good condition"}),a.jsx("li",{children:"â€¢ The company shall not be held liable for any items after the release date and time"}),a.jsx("li",{children:"â€¢ Payment must be completed within the specified due date on the invoice"}),a.jsx("li",{children:"â€¢ This document serves as official proof of shipment release and receipt"}),a.jsx("li",{children:"â€¢ Any disputes must be raised within 24 hours of release"})]})]}),N.releaseShowSignatures!==!1&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:A},children:"AUTHORIZATION SIGNATURES"}),a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm font-semibold mb-6 text-gray-700",children:"Released By (Company Staff)"}),a.jsx("div",{className:"border-b-2 border-gray-800 mb-2 h-16"}),a.jsx("p",{className:"text-sm font-semibold",children:c}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Date: ",O(B,"MMM dd, yyyy")]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm font-semibold mb-6 text-gray-700",children:"Received By (Collector)"}),a.jsx("div",{className:"border-b-2 border-gray-800 mb-2 h-16"}),a.jsx("p",{className:"text-sm",children:d||"_________________________"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Date: _________________"})]})]})]}),a.jsxs("div",{className:"text-center mt-8 pt-6 border-t-2",style:{borderColor:k},children:[a.jsx("p",{className:"text-lg font-semibold mb-2",style:{color:A},children:N.releaseFooterText||"Thank you for your business!"}),a.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[a.jsx("p",{children:N.companyAddress||(n==null?void 0:n.address)||"Kuwait"}),a.jsxs("p",{children:[N.companyPhone&&a.jsxs(a.Fragment,{children:["Phone: ",N.companyPhone]}),N.companyPhone&&N.companyEmail&&a.jsx(a.Fragment,{children:" | "}),N.companyEmail&&a.jsxs(a.Fragment,{children:["Email: ",N.companyEmail]})]}),N.companyWebsite&&a.jsxs("p",{children:["Website: ",N.companyWebsite]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Generated on ",new Date().toLocaleString()]})]})]}),a.jsxs("div",{className:"no-print sticky bottom-0 bg-gray-50 border-t px-6 py-4 flex gap-3 justify-center",children:[a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:[a.jsx(_u,{className:"h-5 w-5"}),"Print Release Note"]}),a.jsx("button",{onClick:t,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-semibold",children:"Close"})]})]}),a.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .release-note-content,
          .release-note-content * {
            visibility: visible;
          }
          .release-note-content {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            padding: 20px;
          }
          .no-print {
            display: none !important;
          }
          @page {
            margin: 1cm;
            size: A4;
          }
        }
      `})]})},fne=({isOpen:e,onClose:t,shipment:r,withdrawalData:n,onSuccess:s})=>{var U;const[i,o]=P.useState("invoice"),[c,u]=P.useState(null),[d,h]=P.useState(!1),[p,v]=P.useState(""),[x,w]=P.useState(!1),[j,N]=P.useState({paymentMethod:"CASH",amount:0,transactionRef:"",receiptNumber:"",notes:""}),[A,k]=P.useState("full");P.useEffect(()=>{e&&r&&!c&&E()},[e,r]);const E=async()=>{try{w(!0),v("");const L=new Date(r.arrivalDate||r.receivedDate),z=Math.max(1,Math.ceil((new Date().getTime()-L.getTime())/(1e3*60*60*24))),q=await Uo.getSettings(),Q=parseFloat(q.storageRatePerBox)||.5,G=r.originalBoxCount||r.currentBoxCount||n.withdrawnBoxCount,H=z*G,ue=H*Q,ye=parseFloat(q.taxRate)||5,de=ue*ye/100,we=[{description:`Storage Charges - ${z} days × ${G} boxes @ ${Q.toFixed(3)} KWD/day/box`,category:"STORAGE",quantity:H,unitPrice:Q,amount:ue,taxRate:ye,taxAmount:de}],Ee=await Uo.createInvoice({shipmentId:r.id,clientName:r.clientName,clientPhone:r.clientPhone,clientAddress:r.clientAddress||"",lineItems:we,notes:`Auto-generated for release - ${n.withdrawnBoxCount} boxes withdrawn`,isWarehouseInvoice:!1});u(Ee),N(ie=>({...ie,amount:Ee.totalAmount,receiptNumber:`PMT-${Date.now()}`}))}catch(L){console.error("Invoice creation error:",L),v(L.message||"Failed to create invoice")}finally{w(!1)}},_=()=>{if(!c)return;const L=window.open(`/invoices/${c.id}/print`,"_blank");L&&L.focus()},O=async()=>{try{if(h(!0),v(""),A==="debt"){const L=await F();alert("✅ Withdrawal approved on DEBT. Customer must pay invoice later."),B(L)}else{if(A==="full"&&j.amount!==c.totalAmount){v("Full payment amount must match invoice total");return}if(A==="partial"&&j.amount>=c.totalAmount){v("Partial payment must be less than total amount");return}if(j.amount<=0){v("Payment amount must be greater than 0");return}if(j.paymentMethod==="KNET"&&!j.transactionRef.trim()){v("Transaction reference is required for KNET payments");return}await Uo.recordPayment(c.id,{amount:j.amount,paymentMethod:j.paymentMethod,transactionRef:j.transactionRef,receiptNumber:j.receiptNumber,notes:j.notes});const L=await F();alert(A==="full"?"✅ Payment recorded successfully! Invoice PAID. Release completed.":`✅ Partial payment of ${j.amount.toFixed(3)} KWD recorded. Balance: ${(c.totalAmount-j.amount).toFixed(3)} KWD. Release completed.`),B(L)}s(),t()}catch(L){v(L.message||"Failed to process payment and release")}finally{h(!1)}},B=L=>{var q,Q;const K={withdrawal:L.withdrawal||L,shipment:r,invoice:c,payment:A!=="debt"?{amount:j.amount,method:j.paymentMethod,transactionRef:j.transactionRef,receiptNumber:j.receiptNumber}:null,releaseDate:new Date,releaseType:((q=L.withdrawal)==null?void 0:q.remainingBoxCount)===0?"FULL":"PARTIAL",boxesReleased:n.withdrawnBoxCount,boxesRemaining:((Q=L.withdrawal)==null?void 0:Q.remainingBoxCount)||0};sessionStorage.setItem("releaseReceipt",JSON.stringify(K));const z=window.open("/release-receipt.html","_blank","width=800,height=600");z&&z.focus()},F=async()=>await Qre.create({shipmentId:r.id,...n});return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"💰 Payment Required Before Release"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Invoice must be paid or marked as debt | يجب دفع الفاتورة"})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx($c,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 border-b",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:`flex items-center gap-2 ${i==="invoice"?"text-primary-600":"text-green-600"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="invoice"?"bg-primary-600 text-white":"bg-green-600 text-white"}`,children:i==="payment"?a.jsx(Sa,{className:"h-5 w-5"}):"1"}),a.jsx("span",{className:"font-semibold",children:"Invoice Created"})]}),a.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),a.jsxs("div",{className:`flex items-center gap-2 ${i==="payment"?"text-primary-600":"text-gray-400"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="payment"?"bg-primary-600 text-white":"bg-gray-300 text-white"}`,children:"2"}),a.jsx("span",{className:"font-semibold",children:"Payment & Release"})]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[p&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),x?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Creating invoice..."})]}):c&&i==="invoice"?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Invoice #",c.invoiceNumber]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Generated: ",new Date().toLocaleDateString()]})]}),a.jsx(_s,{className:"h-12 w-12 text-blue-600"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Client"}),a.jsx("p",{className:"font-bold text-gray-900",children:r.clientName}),a.jsx("p",{className:"text-sm text-gray-600",children:r.clientPhone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Shipment"}),a.jsx("p",{className:"font-bold text-gray-900",children:r.referenceId}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Releasing: ",n.withdrawnBoxCount," boxes"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(U=c.lineItems)==null?void 0:U.map((L,K)=>a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900",children:L.description}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",L.quantity," × ",L.unitPrice.toFixed(3)," KWD"]})]}),a.jsxs("p",{className:"font-bold text-gray-900",children:[L.amount.toFixed(3)," KWD"]})]},K)),a.jsxs("div",{className:"border-t pt-3 mt-3 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"text-gray-900",children:[c.subtotal.toFixed(3)," KWD"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Tax (5%)"}),a.jsxs("span",{className:"text-gray-900",children:[c.taxAmount.toFixed(3)," KWD"]})]}),a.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-2",children:[a.jsx("span",{className:"text-gray-900",children:"TOTAL"}),a.jsxs("span",{className:"text-primary-600",children:[c.totalAmount.toFixed(3)," KWD"]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{type:"button",onClick:_,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:[a.jsx(_u,{className:"h-5 w-5"}),"Print Invoice"]}),a.jsxs("button",{type:"button",onClick:()=>o("payment"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-primary-600 to-purple-600 text-white rounded-lg hover:from-primary-700 hover:to-purple-700 transition-colors font-semibold",children:["Proceed to Payment",a.jsx(Lo,{className:"h-5 w-5"})]})]})]})}):i==="payment"&&c?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Option"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>{k("full"),N(L=>({...L,amount:c.totalAmount}))},className:`p-4 border-2 rounded-xl text-center transition-all ${A==="full"?"border-green-600 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("p",{className:"font-bold text-lg mb-1",children:"✅ Full Payment"}),a.jsxs("p",{className:"text-sm",children:[c.totalAmount.toFixed(3)," KWD"]})]}),a.jsxs("button",{type:"button",onClick:()=>{k("partial"),N(L=>({...L,amount:0}))},className:`p-4 border-2 rounded-xl text-center transition-all ${A==="partial"?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("p",{className:"font-bold text-lg mb-1",children:"💵 Partial Payment"}),a.jsx("p",{className:"text-sm",children:"Pay some now"})]}),a.jsxs("button",{type:"button",onClick:()=>k("debt"),className:`p-4 border-2 rounded-xl text-center transition-all ${A==="debt"?"border-orange-600 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("p",{className:"font-bold text-lg mb-1",children:"📝 On Debt"}),a.jsx("p",{className:"text-sm",children:"Pay later"})]})]})]}),A!=="debt"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount (KWD)"}),a.jsx("input",{type:"number",step:"0.001",value:j.amount,onChange:L=>N(K=>({...K,amount:parseFloat(L.target.value)||0})),disabled:A==="full",className:"w-full px-4 py-3 text-xl font-bold border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100",placeholder:"Enter amount"}),A==="partial"&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Remaining: ",(c.totalAmount-j.amount).toFixed(3)," KWD"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),a.jsx("div",{className:"grid grid-cols-4 gap-3",children:["CASH","KNET","BANK_TRANSFER","CHEQUE"].map(L=>a.jsx("button",{type:"button",onClick:()=>N(K=>({...K,paymentMethod:L})),className:`px-4 py-3 border-2 rounded-lg font-semibold transition-all ${j.paymentMethod===L?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:L.replace("_"," ")},L))})]}),j.paymentMethod==="KNET"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transaction Reference * ",a.jsx("span",{className:"text-red-500",children:"(Required)"})]}),a.jsx("input",{type:"text",value:j.transactionRef,onChange:L=>N(K=>({...K,transactionRef:L.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter KNET transaction reference"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),a.jsx("input",{type:"text",value:j.receiptNumber,onChange:L=>N(K=>({...K,receiptNumber:L.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Receipt number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Notes (Optional)"}),a.jsx("textarea",{value:j.notes,onChange:L=>N(K=>({...K,notes:L.target.value})),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any additional notes..."})]})]}),A==="debt"&&a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-orange-800 font-semibold",children:"⚠️ Releasing on DEBT"}),a.jsxs("p",{className:"text-sm text-orange-700 mt-2",children:["Customer can collect items without payment. Invoice #",c.invoiceNumber," will remain UNPAID and customer must pay later."]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>o("invoice"),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:"← Back to Invoice"}),a.jsx("button",{type:"button",onClick:O,disabled:d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing..."]}):a.jsx(a.Fragment,{children:A==="debt"?"✅ Approve Debt & Release":"💰 Record Payment & Release"})})]})]}):null]})]})}):null},hne=({isOpen:e,onClose:t,shipment:r,onSuccess:n})=>{var x;const[s,i]=P.useState({withdrawnBoxCount:(r==null?void 0:r.currentBoxCount)||0,withdrawnBy:"",reason:"",notes:"",receiptNumber:`WD-${Date.now()}`}),[o,c]=P.useState(""),[u,d]=P.useState(!1);P.useEffect(()=>{e&&r&&(i({withdrawnBoxCount:r.currentBoxCount||0,withdrawnBy:"",reason:"",notes:"",receiptNumber:`WD-${Date.now()}`}),c(""))},[e,r]);const h=r?r.currentBoxCount-s.withdrawnBoxCount:0,p=s.withdrawnBoxCount===(r==null?void 0:r.currentBoxCount),v=async w=>{if(w.preventDefault(),!s.withdrawnBy.trim()){c("Please enter the name of person collecting items");return}if(s.withdrawnBoxCount<=0){c("Please enter a valid number of boxes");return}if(s.withdrawnBoxCount>(r==null?void 0:r.currentBoxCount)){c(`Cannot withdraw ${s.withdrawnBoxCount} boxes. Only ${r.currentBoxCount} available.`);return}const N=`🚨 CONFIRM ${p?"FULL RELEASE":"PARTIAL RELEASE"}

📦 Boxes: ${s.withdrawnBoxCount} out of ${r.currentBoxCount}
👤 Collected By: ${s.withdrawnBy}
📄 Reason: ${s.reason||"N/A"}

⚠️ This will trigger payment/invoice process.

Are you sure you want to proceed?`;confirm(N)&&d(!0)};return e?a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"📦 Withdraw Items"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Release items from storage | سحب العناصر من المخزن"})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx($c,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6 bg-blue-50 border-b",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Shipment ID"}),a.jsx("p",{className:"font-bold text-gray-900",children:r==null?void 0:r.referenceId})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Client"}),a.jsx("p",{className:"font-bold text-gray-900",children:r==null?void 0:r.clientName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Available Boxes"}),a.jsx("p",{className:"font-bold text-green-600 text-xl",children:r==null?void 0:r.currentBoxCount})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Rack Location"}),a.jsx("p",{className:"font-bold text-gray-900",children:((x=r==null?void 0:r.rack)==null?void 0:x.code)||"N/A"})]})]})}),a.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Release Type"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>{i(w=>({...w,withdrawnBoxCount:r.currentBoxCount}))},className:`p-4 border-2 rounded-xl text-center transition-all ${p?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("p",{className:"font-bold text-lg mb-1",children:"Full Release"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["All ",r==null?void 0:r.currentBoxCount," boxes"]})]}),a.jsxs("button",{type:"button",onClick:()=>{p&&i(w=>({...w,withdrawnBoxCount:Math.floor(r.currentBoxCount/2)}))},className:`p-4 border-2 rounded-xl text-center transition-all ${p?"border-gray-200 hover:border-gray-300":"border-purple-600 bg-purple-50 text-purple-700"}`,children:[a.jsx("p",{className:"font-bold text-lg mb-1",children:"Partial Release"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Some boxes only"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Number of Boxes to Withdraw ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:s.withdrawnBoxCount||"",onChange:w=>{const j=w.target.value===""?0:parseInt(w.target.value);i({...s,withdrawnBoxCount:j})},onFocus:w=>w.target.select(),min:"1",max:(r==null?void 0:r.currentBoxCount)||0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-lg font-semibold",placeholder:"Enter number of boxes",required:!0}),a.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"boxes"})]}),a.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Remaining after withdrawal:"}),a.jsxs("span",{className:"font-bold text-gray-900",children:[h," boxes"]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Collected By (Person Name) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(VF,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",value:s.withdrawnBy,onChange:w=>i({...s,withdrawnBy:w.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter full name",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",value:s.receiptNumber,onChange:w=>i({...s,receiptNumber:w.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"WD-001"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Withdrawal"}),a.jsxs("select",{value:s.reason,onChange:w=>i({...s,reason:w.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select reason..."}),a.jsx("option",{value:"Customer Collection",children:"Customer Collection"}),a.jsx("option",{value:"Delivery",children:"Delivery"}),a.jsx("option",{value:"Transfer",children:"Transfer to Another Location"}),a.jsx("option",{value:"Return to Owner",children:"Return to Owner"}),a.jsx("option",{value:"Disposal",children:"Disposal"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),a.jsx("textarea",{value:s.notes,onChange:w=>i({...s,notes:w.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any additional details..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos (Optional)"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-400 transition-colors cursor-pointer",children:[a.jsx(H7,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Click to upload photos"}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Photo upload feature coming soon"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-200",children:[a.jsx("h4",{className:"font-bold text-gray-900 mb-4 text-lg",children:"Withdrawal Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Total boxes in storage:"}),a.jsx("span",{className:"font-semibold",children:r==null?void 0:r.currentBoxCount})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Boxes to withdraw:"}),a.jsx("span",{className:"font-bold text-red-600 text-lg",children:s.withdrawnBoxCount})]}),a.jsxs("div",{className:"flex justify-between pt-3 border-t border-purple-200",children:[a.jsx("span",{className:"text-gray-900 font-semibold",children:"Remaining boxes:"}),a.jsx("span",{className:"font-bold text-green-600 text-xl",children:h})]}),p&&a.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"⚠️ This will fully release the shipment and mark it as RELEASED"})})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 font-bold transition-all shadow-lg",children:"💰 Continue to Payment"})]})]})]}),a.jsx(fne,{isOpen:u,onClose:()=>d(!1),shipment:r,withdrawalData:s,onSuccess:()=>{d(!1),n(),t()}})]}):null},bO=(e,t=!1)=>{if(e===""||e.trim()==="")return"";const r=t?parseFloat(e):parseInt(e);return isNaN(r)?"":r},X2=(e,t=0)=>{if(e===""||e===void 0||e===null)return t;const r=typeof e=="string"?parseFloat(e):e;return isNaN(r)?t:r};function mne({isOpen:e,onClose:t,onSuccess:r}){const[n,s]=P.useState(!1),[i,o]=P.useState(""),[c,u]=P.useState(""),[d,h]=P.useState({barcode:"",clientName:"",clientPhone:"",clientEmail:"",clientAddress:"",arrivalDate:new Date().toISOString().split("T")[0],pieces:0,weight:0,dimensions:"",description:"",value:0,isWarehouseShipment:!1,shipper:"",consignee:"",shipperAddress:"",consigneeAddress:"",shipperPhone:"",consigneePhone:"",rackId:"",storageType:"STANDARD",specialInstructions:"",estimatedDays:30,notes:""}),[p,v]=P.useState([]),[x,w]=P.useState({}),[j,N]=P.useState([]),[A,k]=P.useState({storageRate:.5,minimumCharge:5,currency:"KWD",taxRate:0}),[E,_]=P.useState({requireClientEmail:!1,requireClientPhone:!0,requireEstimatedValue:!1,requireRackAssignment:!1,autoGenerateQR:!0,qrCodePrefix:"SHP",defaultStorageType:"PERSONAL",formSectionOrder:null}),[O,B]=P.useState(["basic","client","warehouse","storage","custom","pricing"]),[F,U]=P.useState(null);P.useEffect(()=>{e&&(L(),K(),H())},[e]);const L=async()=>{try{await Promise.all([z(),q(),Q(),G()])}catch(xe){o("Failed to load data: "+xe.message)}},K=()=>{const xe=Date.now(),le=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),Ce=`WHM${xe.toString().slice(-6)}${le}`;h(ke=>({...ke,barcode:Ce}))},z=async()=>{try{const xe=await fetch("/api/custom-fields?section=SHIPMENT",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(xe.ok){const le=await xe.json(),Ce=le.customFields||le,ke=Array.isArray(Ce)?Ce.filter(We=>We.isActive):[];v(ke);const Ie={};ke.forEach(We=>{Ie[We.id]=""}),w(Ie)}}catch(xe){console.error("Failed to load custom fields:",xe)}},q=async()=>{try{const le=(await Fo.getAll()).racks.filter(Ce=>Ce.status==="ACTIVE"&&Ce.capacityUsed<Ce.capacityTotal);N(le)}catch(xe){console.error("Failed to load racks:",xe)}},Q=async()=>{try{const xe=await fetch("/api/billing/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(xe.ok){const le=await xe.json();k({storageRate:le.storageRatePerBox||le.storageRate||.5,minimumCharge:le.minimumCharge||5,currency:le.currency||"KWD",taxRate:le.taxRate||0})}else console.error("Failed to load pricing settings:",xe.status)}catch(xe){console.error("Failed to load pricing:",xe)}},G=async()=>{try{const xe=await fetch("/api/shipment-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(xe.ok){const le=await xe.json(),Ce=le.settings||le;if(_(Ce),Ce.formSectionOrder)try{const ke=JSON.parse(Ce.formSectionOrder);B(ke),console.log("✅ Section order loaded:",ke)}catch{console.log("Using default section order")}console.log("✅ Shipment settings loaded:",Ce)}}catch(xe){console.error("Failed to load shipment settings:",xe)}},H=()=>{h({barcode:"",clientName:"",clientPhone:"",clientEmail:"",clientAddress:"",arrivalDate:new Date().toISOString().split("T")[0],pieces:0,weight:0,dimensions:"",description:"",value:0,isWarehouseShipment:!1,shipper:"",consignee:"",shipperAddress:"",consigneeAddress:"",shipperPhone:"",consigneePhone:"",rackId:"",storageType:"STANDARD",specialInstructions:"",estimatedDays:30,notes:""}),w({}),o(""),u(""),K()},ue=xe=>{const{name:le,value:Ce,type:ke}=xe.target;h(Ie=>({...Ie,[le]:ke==="number"?bO(Ce,!0):ke==="checkbox"?xe.target.checked:Ce}))},ye=xe=>{const le=x[xe.id]||"";switch(xe.fieldType){case"TEXT":return a.jsx("input",{type:"text",id:xe.id,value:le,onChange:Ce=>w(ke=>({...ke,[xe.id]:Ce.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${xe.fieldName.toLowerCase()}`,required:xe.isRequired});case"NUMBER":return a.jsx("input",{type:"number",id:xe.id,value:le,onChange:Ce=>w(ke=>({...ke,[xe.id]:Ce.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${xe.fieldName.toLowerCase()}`,required:xe.isRequired});case"DATE":return a.jsx("input",{type:"date",id:xe.id,value:le,onChange:Ce=>w(ke=>({...ke,[xe.id]:Ce.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:xe.isRequired});case"DROPDOWN":return a.jsxs("select",{id:xe.id,value:le,onChange:Ce=>w(ke=>({...ke,[xe.id]:Ce.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:xe.isRequired,children:[a.jsxs("option",{value:"",children:["Select ",xe.fieldName.toLowerCase()]}),xe.fieldOptions&&xe.fieldOptions.map((Ce,ke)=>a.jsx("option",{value:Ce,children:Ce},ke))]});case"CHECKBOX":return a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:xe.id,checked:le==="true",onChange:Ce=>w(ke=>({...ke,[xe.id]:Ce.target.checked.toString()})),className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("label",{htmlFor:xe.id,className:"text-sm font-medium text-gray-700",children:xe.fieldName})]});default:return null}},de=()=>{const xe=Math.max(d.pieces*A.storageRate*d.estimatedDays,A.minimumCharge),le=xe*(A.taxRate/100);return{baseCost:xe,tax:le,total:xe+le}},we=async xe=>{var le;xe.preventDefault(),s(!0),o(""),u("");try{if(!d.clientName)throw new Error("Client name is required");if(E.requireClientPhone&&!d.clientPhone)throw new Error("Client phone is required by company settings");if(E.requireClientEmail&&!d.clientEmail)throw new Error("Client email is required by company settings");if(E.requireEstimatedValue&&!d.value)throw new Error("Estimated value is required by company settings");if(E.requireRackAssignment&&!d.rackId)throw new Error("Rack assignment is required by company settings");if(E.requireClientAddress&&!d.clientAddress)throw new Error("Client address is required by company settings");if(E.requireDescription&&!d.description)throw new Error("Description is required by company settings");if(E.requireNotes&&!d.notes)throw new Error("Notes are required by company settings");if(E.requireEstimatedDays&&!d.estimatedDays)throw new Error("Estimated storage days are required by company settings");if(d.pieces<=0)throw new Error("Number of pieces must be greater than 0");if(d.isWarehouseShipment&&(!d.shipper||!d.consignee))throw new Error("Shipper and consignee are required for warehouse shipments");for(const We of p)if(We.isRequired&&!x[We.id])throw new Error(`${We.fieldName} is required`);const Ce={referenceId:d.barcode,clientName:d.clientName,clientPhone:d.clientPhone,clientEmail:d.clientEmail,clientAddress:d.clientAddress,description:d.description,originalBoxCount:d.pieces,currentBoxCount:d.pieces,estimatedValue:d.value,notes:d.notes,rackId:d.rackId||void 0,isWarehouseShipment:d.isWarehouseShipment,warehouseData:d.isWarehouseShipment?JSON.stringify({shipper:d.shipper,consignee:d.consignee,shipperAddress:d.shipperAddress,consigneeAddress:d.consigneeAddress,shipperPhone:d.shipperPhone,consigneePhone:d.consigneePhone,weight:d.weight,dimensions:d.dimensions,storageType:d.storageType,specialInstructions:d.specialInstructions,estimatedDays:d.estimatedDays}):null,customFieldValues:JSON.stringify(x)},ke=await _c.create(Ce),Ie=((le=ke.shipment)==null?void 0:le.id)||ke.id;if(d.rackId&&d.pieces>0){const We=Array.from({length:d.pieces},(Re,he)=>he+1);await fetch(`/api/shipments/${Ie}/assign-boxes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rackId:d.rackId,boxNumbers:We})})}alert(`✅ SUCCESS!

Shipment ${d.barcode} has been created successfully!

📦 Boxes: ${d.pieces}
👤 Client: ${d.clientName}${d.rackId?`
📍 Assigned to Rack`:""}`),r(),t()}catch(Ce){o(Ce.message||"Failed to create shipment")}finally{s(!1)}};if(!e)return null;const Ee=de(),Te={basic:()=>a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-800 flex items-center",children:"📦 Basic Shipment Info"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode ID"}),a.jsx("input",{type:"text",name:"barcode",value:d.barcode,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 font-mono text-lg",readOnly:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Number of Pieces ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"pieces",value:d.pieces,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["📅 Arrival Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"arrivalDate",value:d.arrivalDate,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})]}),client:()=>a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"👤 Client Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientName",value:d.clientName,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",E.requireClientPhone&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"clientPhone",value:d.clientPhone,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+965 1234 5678",required:E.requireClientPhone})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",E.requireClientEmail&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",name:"clientEmail",value:d.clientEmail,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),E.showClientAddress!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",E.requireClientAddress&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientAddress",value:d.clientAddress,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street address, city",required:E.requireClientAddress})]})]})]}),warehouse:()=>E.showWarehouseMode===!1?null:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"isWarehouseShipment",name:"isWarehouseShipment",checked:d.isWarehouseShipment,onChange:ue,className:"w-5 h-5 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"}),a.jsx("label",{htmlFor:"isWarehouseShipment",className:"text-sm font-semibold text-orange-800",children:"🏭 This is a warehouse shipment (import/export with shipper/consignee details)"})]})}),d.isWarehouseShipment&&a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-800 flex items-center",children:"🏭 Warehouse Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Shipper Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"shipper",value:d.shipper,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"ABC Trading Company",required:d.isWarehouseShipment})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Consignee Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"consignee",value:d.consignee,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"XYZ Imports LLC",required:d.isWarehouseShipment})]}),E.showWeight!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Weight (kg) ",E.requireWeight&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"weight",value:d.weight,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",required:E.requireWeight})]}),E.showDimensions!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dimensions (L×W×H) ",E.requireDimensions&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"dimensions",value:d.dimensions,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100×50×30 cm",required:E.requireDimensions})]}),E.showDescription!==!1&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",E.requireDescription&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"description",value:d.description,onChange:ue,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the shipment contents...",required:E.requireDescription})]})]})]})]}),storage:()=>a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-800 flex items-center",children:"🏪 Storage Assignment"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assign to Rack ",E.requireRackAssignment&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"rackId",value:d.rackId,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:E.requireRackAssignment,children:[a.jsx("option",{value:"",children:E.requireRackAssignment?"Select a rack (required)":"Select a rack (optional)"}),j.map(xe=>a.jsxs("option",{value:xe.id,children:[xe.code," - ",xe.location," (",xe.capacityUsed,"/",xe.capacityTotal,")"]},xe.id))]})]}),E.showEstimatedDays!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Storage Days ",E.requireEstimatedDays&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"estimatedDays",value:d.estimatedDays,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",required:E.requireEstimatedDays})]}),E.showSpecialInstructions!==!1&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),a.jsx("textarea",{name:"specialInstructions",value:d.specialInstructions,onChange:ue,rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Any special handling or storage requirements..."})]})]})]}),custom:()=>p.length===0?null:a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-800 flex items-center",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(xe=>a.jsxs("div",{className:xe.fieldType==="TEXTAREA"?"md:col-span-2":"",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[xe.fieldName," ",xe.isRequired&&a.jsx("span",{className:"text-red-500",children:"*"})]}),ye(xe)]},xe.id))})]}),pricing:()=>a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-yellow-800 flex items-center",children:"💰 Estimated Cost"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Storage Rate per Day:"}),a.jsxs("span",{className:"font-medium",children:[A.storageRate.toFixed(3)," ",A.currency]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Estimated Days:"}),a.jsxs("span",{className:"font-medium",children:[d.estimatedDays," days"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Number of Pieces:"}),a.jsxs("span",{className:"font-medium",children:[d.pieces," pieces"]})]}),a.jsxs("div",{className:"border-t border-yellow-300 pt-3 flex justify-between",children:[a.jsx("span",{className:"font-semibold text-yellow-900",children:"Estimated Total:"}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"text-2xl font-bold text-yellow-900",children:[Ee.total.toFixed(3)," ",A.currency]})})]})]})]})};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"📦 New Shipment Intake"}),a.jsx("p",{className:"text-blue-100",children:"WHM Warehouse Management System"})]}),a.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:"✕"})]})}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-100px)]",children:a.jsxs("form",{onSubmit:we,className:"p-6 space-y-6",children:[i&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-r-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"mr-2",children:"⚠️"}),i]})}),c&&a.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 p-4 rounded-r-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"mr-2",children:"✅"}),c]})}),(E.requireClientEmail||E.requireEstimatedValue||E.requireRackAssignment)&&a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-r-lg",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"mr-2 text-lg",children:"ℹ️"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold mb-1",children:"Company Settings Applied"}),a.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[E.requireClientEmail&&a.jsx("li",{children:"Client email is required"}),E.requireEstimatedValue&&a.jsx("li",{children:"Estimated value is required"}),E.requireRackAssignment&&a.jsx("li",{children:"Rack assignment is required"})]})]})]})}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"📋 Form Sections Order:"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click ↑↓ to reorder"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:O.map((xe,le)=>{const Ce={basic:"📦 Basic",client:"👤 Client",warehouse:"🏭 Warehouse",storage:"🏪 Storage",custom:"⚙️ Custom",pricing:"💰 Pricing"};return a.jsxs("div",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded border border-gray-300",children:[a.jsx("span",{className:"text-xs font-medium",children:Ce[xe]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{type:"button",onClick:()=>{if(le>0){const ke=[...O];[ke[le],ke[le-1]]=[ke[le-1],ke[le]],B(ke)}},disabled:le===0,className:"text-xs text-gray-500 hover:text-blue-600 disabled:opacity-30 leading-none",children:"▲"}),a.jsx("button",{type:"button",onClick:()=>{if(le<O.length-1){const ke=[...O];[ke[le],ke[le+1]]=[ke[le+1],ke[le]],B(ke)}},disabled:le===O.length-1,className:"text-xs text-gray-500 hover:text-blue-600 disabled:opacity-30 leading-none",children:"▼"})]})]},xe)})})]})}),O.map(xe=>{const le=Te[xe];return le?a.jsx("div",{children:le()},xe):null}),E.showNotes!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Additional Notes ",E.requireNotes&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"notes",value:d.notes,onChange:ue,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes or comments...",required:E.requireNotes})]}),a.jsxs("div",{style:{display:"none"},className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"🏷️ Shipment Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode ID"}),a.jsx("input",{type:"text",name:"barcode",value:d.barcode,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 font-mono text-lg",readOnly:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Number of Pieces ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"pieces",value:d.pieces,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"👤 Client Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientName",value:d.clientName,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",E.requireClientPhone&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"clientPhone",value:d.clientPhone,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+965 1234 5678",required:E.requireClientPhone})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",E.requireClientEmail&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",name:"clientEmail",value:d.clientEmail,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),E.showClientAddress!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",E.requireClientAddress&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientAddress",value:d.clientAddress,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street address, city",required:E.requireClientAddress})]})]})]}),E.showWarehouseMode!==!1&&a.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"isWarehouseShipment",name:"isWarehouseShipment",checked:d.isWarehouseShipment,onChange:ue,className:"w-5 h-5 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"}),a.jsx("label",{htmlFor:"isWarehouseShipment",className:"text-sm font-semibold text-orange-800",children:"🏭 This is a warehouse shipment (import/export with shipper/consignee details)"})]})}),d.isWarehouseShipment&&E.showWarehouseMode!==!1&&a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-800 flex items-center",children:"🏭 Warehouse Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Shipper Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"shipper",value:d.shipper,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"ABC Trading Company",required:d.isWarehouseShipment})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Consignee Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"consignee",value:d.consignee,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"XYZ Imports LLC",required:d.isWarehouseShipment})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipper Address"}),a.jsx("input",{type:"text",name:"shipperAddress",value:d.shipperAddress,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"123 Export St, Dubai, UAE"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consignee Address"}),a.jsx("input",{type:"text",name:"consigneeAddress",value:d.consigneeAddress,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"456 Import Ave, Kuwait City"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"📦 Shipment Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Weight (kg)"}),a.jsx("input",{type:"number",name:"weight",value:d.weight,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.0",step:"0.1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensions (L×W×H)"}),a.jsx("input",{type:"text",name:"dimensions",value:d.dimensions,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100×50×30 cm"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Value (",A.currency,") ",E.requireEstimatedValue&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"value",value:d.value,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",required:E.requireEstimatedValue})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Type"}),a.jsxs("select",{name:"storageType",value:d.storageType,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"STANDARD",children:"Standard Storage"}),a.jsx("option",{value:"FRAGILE",children:"Fragile Items"}),a.jsx("option",{value:"HAZMAT",children:"Hazardous Materials"}),a.jsx("option",{value:"COLD",children:"Cold Storage"}),a.jsx("option",{value:"SECURE",children:"High Security"})]})]}),E.showDescription!==!1&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",E.requireDescription&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"description",value:d.description,onChange:ue,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the shipment contents...",required:E.requireDescription})]})]})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-800 flex items-center",children:"🏪 Storage Assignment"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assign to Rack ",E.requireRackAssignment&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"rackId",value:d.rackId,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:E.requireRackAssignment,children:[a.jsx("option",{value:"",children:E.requireRackAssignment?"Select a rack (required)":"Select a rack (optional)"}),j.map(xe=>a.jsxs("option",{value:xe.id,children:[xe.code," - ",xe.location," (",xe.capacityUsed,"/",xe.capacityTotal,")"]},xe.id))]})]}),E.showEstimatedDays!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Storage Days ",E.requireEstimatedDays&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"estimatedDays",value:d.estimatedDays,onChange:ue,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",required:E.requireEstimatedDays})]}),E.showSpecialInstructions!==!1&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),a.jsx("textarea",{name:"specialInstructions",value:d.specialInstructions,onChange:ue,rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Any special handling or storage requirements..."})]})]})]}),p.length>0&&a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-800 flex items-center",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(xe=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[xe.fieldName,xe.isRequired&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ye(xe)]},xe.id))})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-800 flex items-center",children:"💰 Estimated Storage Cost"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-600",children:"Base Cost"}),a.jsxs("div",{className:"text-xl font-bold text-blue-800",children:[Ee.baseCost.toFixed(3)," ",A.currency]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[d.pieces," pieces × ",d.estimatedDays," days × ",A.storageRate," rate"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-gray-600",children:["Tax (",A.taxRate,"%)"]}),a.jsxs("div",{className:"text-xl font-bold text-blue-800",children:[Ee.tax.toFixed(3)," ",A.currency]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-gray-600",children:"Total Estimate"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[Ee.total.toFixed(3)," ",A.currency]})]})]})]}),E.showNotes!==!1&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Additional Notes ",E.requireNotes&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"notes",value:d.notes,onChange:ue,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes or comments...",required:E.requireNotes})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",disabled:n,children:"Cancel"}),a.jsx("button",{type:"button",onClick:H,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",disabled:n,children:"Reset"}),a.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:n?"🔄 Creating...":"📦 Create Shipment"})]})]})})]})})}function pne({isOpen:e,onClose:t,onSelectRack:r,selectedRackId:n}){const[s,i]=P.useState([]),[o,c]=P.useState(!0),[u,d]=P.useState("all"),[h,p]=P.useState("all");P.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{c(!0);const k=await Fo.getAll();i(k.racks||[])}catch(k){console.error("Load racks error:",k)}finally{c(!1)}},x=k=>Math.round(k.capacityUsed/k.capacityTotal*100),w=k=>k>=90?"bg-red-500":k>=75?"bg-yellow-500":k>=50?"bg-blue-500":"bg-green-500",j=s.filter(k=>!(h!=="all"&&!k.code.startsWith(h)||u==="available"&&k.capacityUsed>=k.capacityTotal||u==="full"&&k.capacityUsed<k.capacityTotal)),N=Array.from(new Set(s.map(k=>k.code.charAt(0)))).sort(),A=k=>{k.status==="ACTIVE"&&k.capacityUsed<k.capacityTotal&&(r(k.id,k.code),t())};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"🗺️ Warehouse Rack Map"}),a.jsx("p",{className:"text-sm text-purple-100 mt-1",children:"Select a rack with available space"})]}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",children:"×"})]}),a.jsxs("div",{className:"px-6 py-4 border-b bg-gray-50",children:[a.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Section:"}),a.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded-md text-sm font-medium ${h==="all"?"bg-purple-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"All"}),N.map(k=>a.jsx("button",{onClick:()=>p(k),className:`px-3 py-1 rounded-md text-sm font-medium ${h===k?"bg-purple-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:k},k))]}),a.jsx("div",{className:"h-6 w-px bg-gray-300"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show:"}),a.jsx("button",{onClick:()=>d("all"),className:`px-3 py-1 rounded-md text-sm font-medium ${u==="all"?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"All"}),a.jsx("button",{onClick:()=>d("available"),className:`px-3 py-1 rounded-md text-sm font-medium ${u==="available"?"bg-green-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Available"}),a.jsx("button",{onClick:()=>d("full"),className:`px-3 py-1 rounded-md text-sm font-medium ${u==="full"?"bg-red-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Full"})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"text-gray-600",children:"0-50% Full"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-gray-600",children:"50-75% Full"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),a.jsx("span",{className:"text-gray-600",children:"75-90% Full"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),a.jsx("span",{className:"text-gray-600",children:"90-100% Full"})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:j.map(k=>{const E=x(k),_=k.status==="ACTIVE"&&k.capacityUsed<k.capacityTotal,O=k.id===n;return a.jsxs("button",{onClick:()=>A(k),disabled:!_,className:`relative border-2 rounded-lg p-4 transition-all ${O?"border-purple-600 bg-purple-50 ring-2 ring-purple-600":_?"border-gray-300 hover:border-purple-400 hover:shadow-lg":"border-gray-200 bg-gray-50 opacity-60 cursor-not-allowed"}`,children:[O&&a.jsx("div",{className:"absolute -top-2 -right-2",children:a.jsx(Sa,{className:"h-6 w-6 text-purple-600 bg-white rounded-full"})}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Mo,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-lg font-bold text-gray-900",children:k.code})]}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${k.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.status})]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-3 truncate",title:k.location,children:["📍 ",k.location]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:"Capacity"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[k.capacityUsed,"/",k.capacityTotal]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${w(E)}`,style:{width:`${E}%`}})}),a.jsxs("div",{className:"text-xs text-center text-gray-500",children:[E,"% Full"]})]}),_&&a.jsxs("div",{className:"mt-2 text-xs font-medium text-green-600",children:["✓ ",k.capacityTotal-k.capacityUsed," spaces available"]})]},k.id)})}),!o&&j.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx("p",{className:"text-lg",children:"No racks found"}),a.jsx("p",{className:"text-sm mt-2",children:"Try changing the filters"})]})]}),a.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 flex justify-between items-center",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.jsx("span",{className:"font-semibold",children:j.length})," of"," ",a.jsx("span",{className:"font-semibold",children:s.length})," racks"]}),a.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 font-medium",children:"Cancel"})]})]})}):null}function gne({isOpen:e,onClose:t,onSuccess:r,shipment:n}){const[s,i]=P.useState(!1),[o,c]=P.useState([]),[u,d]=P.useState([]),[h,p]=P.useState({}),[v,x]=P.useState({clientName:"",clientPhone:"",clientEmail:"",description:"",totalBoxCount:"",currentBoxCount:"",rackId:"",estimatedValue:"",notes:"",status:""}),[w,j]=P.useState(""),[N,A]=P.useState(""),[k,E]=P.useState(!1);P.useEffect(()=>{e&&n&&(O(),_(),x({clientName:n.clientName||"",clientPhone:n.clientPhone||"",clientEmail:n.clientEmail||"",description:n.description||"",totalBoxCount:n.totalBoxCount||"",currentBoxCount:n.currentBoxCount||"",rackId:n.rackId||"",estimatedValue:n.estimatedValue||"",notes:n.notes||"",status:n.status||"IN_STORAGE"}),j(""),A(""))},[e,n]);const _=async()=>{try{const U=await fetch("/api/custom-fields?section=SHIPMENT",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(U.ok){const L=await U.json(),K=L.customFields||L,z=Array.isArray(K)?K.filter(q=>q.isActive):[];d(z)}if(n!=null&&n.id){const L=await fetch(`/api/custom-field-values/SHIPMENT/${n.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(L.ok){const K=await L.json(),z=K.customFieldValues||K,q={};Array.isArray(z)&&z.forEach(Q=>{q[Q.customFieldId]=Q.fieldValue}),p(q)}}}catch(U){console.error("Failed to load custom fields:",U)}},O=async()=>{try{const L=(await Fo.getAll()).racks.filter(K=>K.id===(n==null?void 0:n.rackId)||K.status==="ACTIVE"&&K.capacityUsed<K.capacityTotal);c(L)}catch(U){j("Failed to load racks: "+U.message)}},B=U=>{const{name:L,value:K}=U.target;x(z=>({...z,[L]:L.includes("Count")||L==="estimatedValue"?bO(K,!0):K}))},F=async U=>{U.preventDefault(),i(!0),j(""),A("");try{const L=X2(v.totalBoxCount),K=X2(v.currentBoxCount),z=X2(v.estimatedValue);if(!v.clientName||!v.clientPhone)throw new Error("Client name and phone are required");if(L<=0)throw new Error("Total box count must be greater than 0");if(K>L)throw new Error("Current box count cannot exceed total box count");if(!v.rackId)throw new Error("Please select a rack");const q={clientName:v.clientName,clientPhone:v.clientPhone,clientEmail:v.clientEmail,description:v.description,currentBoxCount:K,rackId:v.rackId,estimatedValue:z,notes:v.notes,status:v.status};if(await _c.update(n.id,q),u.length>0){const Q=Object.entries(h).filter(([G,H])=>H!=="").map(([G,H])=>({customFieldId:G,fieldValue:H}));try{await fetch(`/api/custom-field-values/SHIPMENT/${n.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:Q})})}catch(G){console.error("Failed to save custom field values:",G)}}alert(`✅ SUCCESS!

Shipment ${n.referenceId} has been updated successfully!

📦 Current Boxes: ${K}
📍 Rack: ${v.rackId}`),r(),t()}catch(L){j(L.message||"Failed to update shipment")}finally{i(!1)}};return!e||!n?null:a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"✏️ Edit Shipment"}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:s,children:"×"})]}),a.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[w&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:w}),N&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:N}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Client Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientName",value:v.clientName,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"clientPhone",value:v.clientPhone,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+965 1234 5678",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),a.jsx("input",{type:"email",name:"clientEmail",value:v.clientEmail,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value (KWD)"}),a.jsx("input",{type:"number",name:"estimatedValue",value:v.estimatedValue,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:"0"})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Shipment Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("input",{type:"text",name:"description",value:v.description,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Household items, furniture, etc."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Box Count ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"totalBoxCount",value:v.totalBoxCount,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10",min:"1",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Box Count ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"currentBoxCount",value:v.currentBoxCount,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:v.status,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"IN_STORAGE",children:"In Storage"}),a.jsx("option",{value:"PARTIAL",children:"Partial"}),a.jsx("option",{value:"RELEASED",children:"Released"})]})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Rack Assignment"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Rack"}),a.jsxs("select",{name:"rackId",value:v.rackId,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"-- No Rack Assigned --"}),o.map(U=>a.jsxs("option",{value:U.id,children:[U.code," - ",U.location," (Available: ",U.capacityTotal-U.capacityUsed,"/",U.capacityTotal,")"]},U.id))]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"button",onClick:()=>E(!0),className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 font-medium border-2 border-purple-300",children:"🗺️ Open Rack Map"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),a.jsx("textarea",{name:"notes",value:v.notes,onChange:B,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any special instructions or notes..."})]}),u.length>0&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(U=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[U.fieldName,U.isRequired&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),U.fieldType==="TEXT"&&a.jsx("input",{type:"text",value:h[U.id]||"",onChange:L=>p(K=>({...K,[U.id]:L.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),U.fieldType==="NUMBER"&&a.jsx("input",{type:"number",value:h[U.id]||"",onChange:L=>p(K=>({...K,[U.id]:L.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),U.fieldType==="DATE"&&a.jsx("input",{type:"date",value:h[U.id]||"",onChange:L=>p(K=>({...K,[U.id]:L.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),U.fieldType==="DROPDOWN"&&U.fieldOptions&&a.jsxs("select",{value:h[U.id]||"",onChange:L=>p(K=>({...K,[U.id]:L.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const L=JSON.parse(U.fieldOptions);return Array.isArray(L)?L.map(K=>a.jsx("option",{value:K,children:K},K)):[]}catch{return U.fieldOptions.split(",").map(L=>a.jsx("option",{value:L.trim(),children:L.trim()},L.trim()))}})()]}),U.fieldType==="CHECKBOX"&&a.jsxs("div",{className:"flex items-center h-10",children:[a.jsx("input",{type:"checkbox",checked:h[U.id]==="true",onChange:L=>p(K=>({...K,[U.id]:L.target.checked?"true":"false"})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},U.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:s,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:s,children:s?"Updating...":"Update Shipment"})]})]})]}),a.jsx(pne,{isOpen:k,onClose:()=>E(!1),selectedRackId:v.rackId,onSelectRack:U=>{x(L=>({...L,rackId:U})),E(!1)}})]})}function xne({shipmentId:e}){const[t,r]=P.useState([]),[n,s]=P.useState(!1),[i,o]=P.useState({});P.useEffect(()=>{c()},[e]);const c=async()=>{s(!0);try{const x=(await(await fetch(`/api/shipments/${e}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes||[];r(x);const w={},j=[];for(const N of x)if(N.rackId&&N.rack){const A=`${N.rack.code}|${N.rack.location||""}`;w[A]||(w[A]=[]),w[A].push(N)}else j.push(N);j.length>0&&(w["Unassigned|Pending Assignment"]=j),o(w)}catch(p){console.error("Failed to load boxes:",p)}finally{s(!1)}};if(n)return a.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"📦"})," Box Distribution"]}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Loading box distribution..."})]});if(t.length===0)return null;const u=t.length,d=t.filter(p=>p.rackId).length,h=Object.keys(i).filter(p=>!p.startsWith("Unassigned")).length;return a.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"📦"})," Box Distribution & Locations"]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-white rounded-lg border border-blue-200",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u}),a.jsx("p",{className:"text-xs text-gray-600",children:"Total Boxes"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:d}),a.jsx("p",{className:"text-xs text-gray-600",children:"Assigned"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h}),a.jsxs("p",{className:"text-xs text-gray-600",children:["Rack",h!==1?"s":""]})]})]}),a.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([p,v])=>{const[x,w]=p.split("|"),j=p.startsWith("Unassigned");return a.jsxs("div",{className:`p-3 rounded-lg border-2 ${j?"bg-yellow-50 border-yellow-300":"bg-white border-green-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:j?"⏳":"🗄️"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-800",children:x}),w&&!j&&a.jsx("p",{className:"text-xs text-gray-600",children:w})]})]}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${j?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:[v.length," box",v.length!==1?"es":""]})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1 mt-2",children:v.map(N=>a.jsx("div",{className:`aspect-square flex items-center justify-center text-xs font-bold rounded ${N.status==="IN_STORAGE"?"bg-green-500 text-white":N.status==="RELEASED"?"bg-gray-400 text-white":"bg-yellow-400 text-gray-800"}`,title:`Box #${N.boxNumber} - ${N.status}`,children:N.boxNumber},N.id))})]},p)})}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-blue-200",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Status Legend:"}),a.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),a.jsx("span",{className:"text-gray-600",children:"In Storage"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),a.jsx("span",{className:"text-gray-600",children:"Pending"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded"}),a.jsx("span",{className:"text-gray-600",children:"Released"})]})]})]})]})}function yne({isOpen:e,onClose:t,shipmentId:r}){const[n,s]=P.useState(null),[i,o]=P.useState([]),[c,u]=P.useState(!1),[d,h]=P.useState("");P.useEffect(()=>{e&&r&&(p(),v())},[e,r]);const p=async()=>{u(!0),h("");try{const w=await _c.getById(r);s(w.shipment)}catch(w){h("Failed to load shipment details"),console.error(w)}finally{u(!1)}},v=async()=>{try{const w=await fetch(`/api/custom-field-values/SHIPMENT/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(w.ok){const j=await w.json();o(j.customFieldValues||j.values||[])}}catch(w){console.error("Failed to load custom field values:",w)}},x=w=>{const j={PENDING:{color:"bg-yellow-100 text-yellow-800 border-yellow-300",emoji:"🟡",text:"Pending"},IN_TRANSIT:{color:"bg-blue-100 text-blue-800 border-blue-300",emoji:"🚚",text:"In Transit"},IN_STORAGE:{color:"bg-green-100 text-green-800 border-green-300",emoji:"🟢",text:"In Storage"},RELEASED:{color:"bg-gray-100 text-gray-800 border-gray-300",emoji:"🔵",text:"Released"}},N=j[w]||j.PENDING;return a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${N.color}`,children:[N.emoji," ",N.text]})};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex justify-between items-center rounded-t-lg",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"📦 Shipment Details"}),a.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["Reference: ",n==null?void 0:n.referenceId]})]}),a.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6",children:c?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading shipment details..."})]}):d?a.jsx("div",{className:"bg-red-50 border border-red-300 text-red-800 px-4 py-3 rounded",children:d}):n?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n.name}),a.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["QR Code: ",n.qrCode]})]}),x(n.status)]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Type"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.type})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Total Boxes"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.originalBoxCount})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Current Boxes"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.currentBoxCount})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Arrival Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.arrivalDate).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"👤"})," Client Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Name"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.clientName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Phone"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.clientPhone})]}),n.clientEmail&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Email"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.clientEmail})]}),n.estimatedValue&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Estimated Value"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:["KWD ",n.estimatedValue.toFixed(3)]})]})]})]}),n.rack&&a.jsxs("div",{className:"border border-green-200 bg-green-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"🗄️"})," Primary Storage Location"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Rack Code"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.rack.code})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Location"}),a.jsx("p",{className:"font-semibold text-gray-800",children:n.rack.location})]})]})]}),a.jsx(xne,{shipmentId:r}),(n.description||n.notes)&&a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"📝"})," Additional Information"]}),n.description&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Description"}),a.jsx("p",{className:"text-gray-800",children:n.description})]}),n.notes&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Notes"}),a.jsx("p",{className:"text-gray-800",children:n.notes})]})]}),i.length>0&&a.jsxs("div",{className:"border border-purple-200 bg-purple-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"✨"})," Custom Fields"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:i.map(w=>a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:w.customField.fieldName}),a.jsx("p",{className:"font-semibold text-gray-800",children:w.customField.fieldType==="CHECKBOX"?w.fieldValue==="true"?"✅ Yes":"❌ No":w.fieldValue})]},w.id))})]}),n.withdrawals&&n.withdrawals.length>0&&a.jsxs("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"📤"})," Withdrawal History"]}),a.jsx("div",{className:"space-y-2",children:n.withdrawals.map(w=>a.jsxs("div",{className:"bg-white p-3 rounded border border-orange-200 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"font-semibold",children:[w.withdrawnBoxCount," boxes withdrawn"]}),a.jsx("span",{className:"text-gray-600",children:new Date(w.withdrawalDate).toLocaleDateString()})]}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Collected by: ",w.withdrawnBy]}),w.notes&&a.jsx("p",{className:"text-gray-600 text-xs mt-1",children:w.notes})]},w.id))})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[a.jsx("span",{className:"text-xl mr-2",children:"🕐"})," Audit Trail"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Created"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.createdAt).toLocaleString()}),n.createdBy&&a.jsxs("p",{className:"text-xs text-gray-500",children:["By: User ID ",n.createdBy]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Last Updated"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.updatedAt).toLocaleString()}),n.updatedBy&&a.jsxs("p",{className:"text-xs text-gray-500",children:["By: User ID ",n.updatedBy]})]}),n.releasedAt&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600",children:"Released"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.releasedAt).toLocaleString()})]})]})]})]}):null}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t rounded-b-lg",children:a.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Close"})})]})}):null}var Qu={},vne=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},wO={},gi={};let h3;const bne=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];gi.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};gi.getSymbolTotalCodewords=function(t){return bne[t]};gi.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};gi.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');h3=t};gi.isKanjiModeEnabled=function(){return typeof h3<"u"};gi.toSJIS=function(t){return h3(t)};var Nx={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,s){if(e.isValid(n))return n;try{return t(n)}catch{return s}}})(Nx);function NO(){this.buffer=[],this.length=0}NO.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var wne=NO;function $0(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}$0.prototype.set=function(e,t,r,n){const s=e*this.size+t;this.data[s]=r,n&&(this.reservedBit[s]=!0)};$0.prototype.get=function(e,t){return this.data[e*this.size+t]};$0.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};$0.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Nne=$0,jO={};(function(e){const t=gi.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,c=[i-7];for(let u=1;u<s-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},e.getPositions=function(n){const s=[],i=e.getRowColCoords(n),o=i.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||s.push([i[c],i[u]]);return s}})(jO);var AO={};const jne=gi.getSymbolSize,gC=7;AO.getPositions=function(t){const r=jne(t);return[[0,0],[r-gC,0],[0,r-gC]]};var CO={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},e.from=function(s){return e.isValid(s)?parseInt(s,10):void 0},e.getPenaltyN1=function(s){const i=s.size;let o=0,c=0,u=0,d=null,h=null;for(let p=0;p<i;p++){c=u=0,d=h=null;for(let v=0;v<i;v++){let x=s.get(p,v);x===d?c++:(c>=5&&(o+=t.N1+(c-5)),d=x,c=1),x=s.get(v,p),x===h?u++:(u>=5&&(o+=t.N1+(u-5)),h=x,u=1)}c>=5&&(o+=t.N1+(c-5)),u>=5&&(o+=t.N1+(u-5))}return o},e.getPenaltyN2=function(s){const i=s.size;let o=0;for(let c=0;c<i-1;c++)for(let u=0;u<i-1;u++){const d=s.get(c,u)+s.get(c,u+1)+s.get(c+1,u)+s.get(c+1,u+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(s){const i=s.size;let o=0,c=0,u=0;for(let d=0;d<i;d++){c=u=0;for(let h=0;h<i;h++)c=c<<1&2047|s.get(d,h),h>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|s.get(h,d),h>=10&&(u===1488||u===93)&&o++}return o*t.N3},e.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function r(n,s,i){switch(n){case e.Patterns.PATTERN000:return(s+i)%2===0;case e.Patterns.PATTERN001:return s%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(s+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return s*i%2+s*i%3===0;case e.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case e.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(s,i){const o=i.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)i.isReserved(u,c)||i.xor(u,c,r(s,u,c))},e.getBestMask=function(s,i){const o=Object.keys(e.Patterns).length;let c=0,u=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,s);const h=e.getPenaltyN1(s)+e.getPenaltyN2(s)+e.getPenaltyN3(s)+e.getPenaltyN4(s);e.applyMask(d,s),h<u&&(u=h,c=d)}return c}})(CO);var jx={};const vc=Nx,Hm=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Vm=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];jx.getBlocksCount=function(t,r){switch(r){case vc.L:return Hm[(t-1)*4+0];case vc.M:return Hm[(t-1)*4+1];case vc.Q:return Hm[(t-1)*4+2];case vc.H:return Hm[(t-1)*4+3];default:return}};jx.getTotalCodewordsCount=function(t,r){switch(r){case vc.L:return Vm[(t-1)*4+0];case vc.M:return Vm[(t-1)*4+1];case vc.Q:return Vm[(t-1)*4+2];case vc.H:return Vm[(t-1)*4+3];default:return}};var SO={},Ax={};const Ph=new Uint8Array(512),Wg=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)Ph[r]=t,Wg[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)Ph[r]=Ph[r-255]})();Ax.log=function(t){if(t<1)throw new Error("log("+t+")");return Wg[t]};Ax.exp=function(t){return Ph[t]};Ax.mul=function(t,r){return t===0||r===0?0:Ph[Wg[t]+Wg[r]]};(function(e){const t=Ax;e.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<s.length;c++)i[o+c]^=t.mul(n[o],s[c]);return i},e.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=t.mul(s[u],o);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},e.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=e.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(SO);const EO=SO;function m3(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}m3.prototype.initialize=function(t){this.degree=t,this.genPoly=EO.generateECPolynomial(this.degree)};m3.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const n=EO.mod(r,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var Ane=m3,kO={},Vc={},p3={};p3.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Ho={};const PO="[0-9]+",Cne="[A-Z $%*+\\-./:]+";let m0="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";m0=m0.replace(/u/g,"\\u");const Sne="(?:(?![A-Z0-9 $%*+\\-./:]|"+m0+`)(?:.|[\r
]))+`;Ho.KANJI=new RegExp(m0,"g");Ho.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ho.BYTE=new RegExp(Sne,"g");Ho.NUMERIC=new RegExp(PO,"g");Ho.ALPHANUMERIC=new RegExp(Cne,"g");const Ene=new RegExp("^"+m0+"$"),kne=new RegExp("^"+PO+"$"),Pne=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ho.testKanji=function(t){return Ene.test(t)};Ho.testNumeric=function(t){return kne.test(t)};Ho.testAlphanumeric=function(t){return Pne.test(t)};(function(e){const t=p3,r=Ho;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return r.testNumeric(i)?e.NUMERIC:r.testAlphanumeric(i)?e.ALPHANUMERIC:r.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+s)}}e.from=function(i,o){if(e.isValid(i))return i;try{return n(i)}catch{return o}}})(Vc);(function(e){const t=gi,r=jx,n=Nx,s=Vc,i=p3,o=7973,c=t.getBCHDigit(o);function u(v,x,w){for(let j=1;j<=40;j++)if(x<=e.getCapacity(j,w,v))return j}function d(v,x){return s.getCharCountIndicator(v,x)+4}function h(v,x){let w=0;return v.forEach(function(j){const N=d(j.mode,x);w+=N+j.getBitsLength()}),w}function p(v,x){for(let w=1;w<=40;w++)if(h(v,w)<=e.getCapacity(w,x,s.MIXED))return w}e.from=function(x,w){return i.isValid(x)?parseInt(x,10):w},e.getCapacity=function(x,w,j){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=s.BYTE);const N=t.getSymbolTotalCodewords(x),A=r.getTotalCodewordsCount(x,w),k=(N-A)*8;if(j===s.MIXED)return k;const E=k-d(j,x);switch(j){case s.NUMERIC:return Math.floor(E/10*3);case s.ALPHANUMERIC:return Math.floor(E/11*2);case s.KANJI:return Math.floor(E/13);case s.BYTE:default:return Math.floor(E/8)}},e.getBestVersionForData=function(x,w){let j;const N=n.from(w,n.M);if(Array.isArray(x)){if(x.length>1)return p(x,N);if(x.length===0)return 1;j=x[0]}else j=x;return u(j.mode,j.getLength(),N)},e.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let w=x<<12;for(;t.getBCHDigit(w)-c>=0;)w^=o<<t.getBCHDigit(w)-c;return x<<12|w}})(kO);var IO={};const Ib=gi,TO=1335,Ine=21522,xC=Ib.getBCHDigit(TO);IO.getEncodedBits=function(t,r){const n=t.bit<<3|r;let s=n<<10;for(;Ib.getBCHDigit(s)-xC>=0;)s^=TO<<Ib.getBCHDigit(s)-xC;return(n<<10|s)^Ine};var _O={};const Tne=Vc;function ff(e){this.mode=Tne.NUMERIC,this.data=e.toString()}ff.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};ff.prototype.getLength=function(){return this.data.length};ff.prototype.getBitsLength=function(){return ff.getBitsLength(this.data.length)};ff.prototype.write=function(t){let r,n,s;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),s=parseInt(n,10),t.put(s,10);const i=this.data.length-r;i>0&&(n=this.data.substr(r),s=parseInt(n,10),t.put(s,i*3+1))};var _ne=ff;const One=Vc,Y2=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function hf(e){this.mode=One.ALPHANUMERIC,this.data=e}hf.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};hf.prototype.getLength=function(){return this.data.length};hf.prototype.getBitsLength=function(){return hf.getBitsLength(this.data.length)};hf.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Y2.indexOf(this.data[r])*45;n+=Y2.indexOf(this.data[r+1]),t.put(n,11)}this.data.length%2&&t.put(Y2.indexOf(this.data[r]),6)};var Rne=hf;const Dne=Vc;function mf(e){this.mode=Dne.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}mf.getBitsLength=function(t){return t*8};mf.prototype.getLength=function(){return this.data.length};mf.prototype.getBitsLength=function(){return mf.getBitsLength(this.data.length)};mf.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var Lne=mf;const Mne=Vc,Bne=gi;function pf(e){this.mode=Mne.KANJI,this.data=e}pf.getBitsLength=function(t){return t*13};pf.prototype.getLength=function(){return this.data.length};pf.prototype.getBitsLength=function(){return pf.getBitsLength(this.data.length)};pf.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=Bne.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var Fne=pf,OO={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,n,s){var i={},o={};o[n]=0;var c=t.PriorityQueue.make();c.push(n,0);for(var u,d,h,p,v,x,w,j,N;!c.empty();){u=c.pop(),d=u.value,p=u.cost,v=r[d]||{};for(h in v)v.hasOwnProperty(h)&&(x=v[h],w=p+x,j=o[h],N=typeof o[h]>"u",(N||j>w)&&(o[h]=w,c.push(h,w),i[h]=d))}if(typeof s<"u"&&typeof o[s]>"u"){var A=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(A)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var s=[],i=n;i;)s.push(i),r[i],i=r[i];return s.reverse(),s},find_path:function(r,n,s){var i=t.single_source_shortest_paths(r,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,s={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=r.sorter||n.default_sorter,s},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var s={value:r,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(OO);var Une=OO.exports;(function(e){const t=Vc,r=_ne,n=Rne,s=Lne,i=Fne,o=Ho,c=gi,u=Une;function d(A){return unescape(encodeURIComponent(A)).length}function h(A,k,E){const _=[];let O;for(;(O=A.exec(E))!==null;)_.push({data:O[0],index:O.index,mode:k,length:O[0].length});return _}function p(A){const k=h(o.NUMERIC,t.NUMERIC,A),E=h(o.ALPHANUMERIC,t.ALPHANUMERIC,A);let _,O;return c.isKanjiModeEnabled()?(_=h(o.BYTE,t.BYTE,A),O=h(o.KANJI,t.KANJI,A)):(_=h(o.BYTE_KANJI,t.BYTE,A),O=[]),k.concat(E,_,O).sort(function(F,U){return F.index-U.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function v(A,k){switch(k){case t.NUMERIC:return r.getBitsLength(A);case t.ALPHANUMERIC:return n.getBitsLength(A);case t.KANJI:return i.getBitsLength(A);case t.BYTE:return s.getBitsLength(A)}}function x(A){return A.reduce(function(k,E){const _=k.length-1>=0?k[k.length-1]:null;return _&&_.mode===E.mode?(k[k.length-1].data+=E.data,k):(k.push(E),k)},[])}function w(A){const k=[];for(let E=0;E<A.length;E++){const _=A[E];switch(_.mode){case t.NUMERIC:k.push([_,{data:_.data,mode:t.ALPHANUMERIC,length:_.length},{data:_.data,mode:t.BYTE,length:_.length}]);break;case t.ALPHANUMERIC:k.push([_,{data:_.data,mode:t.BYTE,length:_.length}]);break;case t.KANJI:k.push([_,{data:_.data,mode:t.BYTE,length:d(_.data)}]);break;case t.BYTE:k.push([{data:_.data,mode:t.BYTE,length:d(_.data)}])}}return k}function j(A,k){const E={},_={start:{}};let O=["start"];for(let B=0;B<A.length;B++){const F=A[B],U=[];for(let L=0;L<F.length;L++){const K=F[L],z=""+B+L;U.push(z),E[z]={node:K,lastCount:0},_[z]={};for(let q=0;q<O.length;q++){const Q=O[q];E[Q]&&E[Q].node.mode===K.mode?(_[Q][z]=v(E[Q].lastCount+K.length,K.mode)-v(E[Q].lastCount,K.mode),E[Q].lastCount+=K.length):(E[Q]&&(E[Q].lastCount=K.length),_[Q][z]=v(K.length,K.mode)+4+t.getCharCountIndicator(K.mode,k))}}O=U}for(let B=0;B<O.length;B++)_[O[B]].end=0;return{map:_,table:E}}function N(A,k){let E;const _=t.getBestModeForData(A);if(E=t.from(k,_),E!==t.BYTE&&E.bit<_.bit)throw new Error('"'+A+'" cannot be encoded with mode '+t.toString(E)+`.
 Suggested mode is: `+t.toString(_));switch(E===t.KANJI&&!c.isKanjiModeEnabled()&&(E=t.BYTE),E){case t.NUMERIC:return new r(A);case t.ALPHANUMERIC:return new n(A);case t.KANJI:return new i(A);case t.BYTE:return new s(A)}}e.fromArray=function(k){return k.reduce(function(E,_){return typeof _=="string"?E.push(N(_,null)):_.data&&E.push(N(_.data,_.mode)),E},[])},e.fromString=function(k,E){const _=p(k,c.isKanjiModeEnabled()),O=w(_),B=j(O,E),F=u.find_path(B.map,"start","end"),U=[];for(let L=1;L<F.length-1;L++)U.push(B.table[F[L]].node);return e.fromArray(x(U))},e.rawSplit=function(k){return e.fromArray(p(k,c.isKanjiModeEnabled()))}})(_O);const Cx=gi,Z2=Nx,zne=wne,$ne=Nne,Wne=jO,qne=AO,Tb=CO,_b=jx,Hne=Ane,qg=kO,Vne=IO,Gne=Vc,J2=_O;function Kne(e,t){const r=e.size,n=qne.getPositions(t);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let c=-1;c<=7;c++)if(!(i+c<=-1||r<=i+c))for(let u=-1;u<=7;u++)o+u<=-1||r<=o+u||(c>=0&&c<=6&&(u===0||u===6)||u>=0&&u<=6&&(c===0||c===6)||c>=2&&c<=4&&u>=2&&u<=4?e.set(i+c,o+u,!0,!0):e.set(i+c,o+u,!1,!0))}}function Xne(e){const t=e.size;for(let r=8;r<t-8;r++){const n=r%2===0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}function Yne(e,t){const r=Wne.getPositions(t);for(let n=0;n<r.length;n++){const s=r[n][0],i=r[n][1];for(let o=-2;o<=2;o++)for(let c=-2;c<=2;c++)o===-2||o===2||c===-2||c===2||o===0&&c===0?e.set(s+o,i+c,!0,!0):e.set(s+o,i+c,!1,!0)}}function Zne(e,t){const r=e.size,n=qg.getEncodedBits(t);let s,i,o;for(let c=0;c<18;c++)s=Math.floor(c/3),i=c%3+r-8-3,o=(n>>c&1)===1,e.set(s,i,o,!0),e.set(i,s,o,!0)}function Q2(e,t,r){const n=e.size,s=Vne.getEncodedBits(t,r);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(n-15+i,8,o,!0),i<8?e.set(8,n-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(n-8,8,1,!0)}function Jne(e,t){const r=e.size;let n=-1,s=r-1,i=7,o=0;for(let c=r-1;c>0;c-=2)for(c===6&&c--;;){for(let u=0;u<2;u++)if(!e.isReserved(s,c-u)){let d=!1;o<t.length&&(d=(t[o]>>>i&1)===1),e.set(s,c-u,d),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||r<=s){s-=n,n=-n;break}}}function Qne(e,t,r){const n=new zne;r.forEach(function(u){n.put(u.mode.bit,4),n.put(u.getLength(),Gne.getCharCountIndicator(u.mode,e)),u.write(n)});const s=Cx.getSymbolTotalCodewords(e),i=_b.getTotalCodewordsCount(e,t),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const c=(o-n.getLengthInBits())/8;for(let u=0;u<c;u++)n.put(u%2?17:236,8);return eae(n,e,t)}function eae(e,t,r){const n=Cx.getSymbolTotalCodewords(t),s=_b.getTotalCodewordsCount(t,r),i=n-s,o=_b.getBlocksCount(t,r),c=n%o,u=o-c,d=Math.floor(n/o),h=Math.floor(i/o),p=h+1,v=d-h,x=new Hne(v);let w=0;const j=new Array(o),N=new Array(o);let A=0;const k=new Uint8Array(e.buffer);for(let F=0;F<o;F++){const U=F<u?h:p;j[F]=k.slice(w,w+U),N[F]=x.encode(j[F]),w+=U,A=Math.max(A,U)}const E=new Uint8Array(n);let _=0,O,B;for(O=0;O<A;O++)for(B=0;B<o;B++)O<j[B].length&&(E[_++]=j[B][O]);for(O=0;O<v;O++)for(B=0;B<o;B++)E[_++]=N[B][O];return E}function tae(e,t,r,n){let s;if(Array.isArray(e))s=J2.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const h=J2.rawSplit(e);d=qg.getBestVersionForData(h,r)}s=J2.fromString(e,d||40)}else throw new Error("Invalid data");const i=qg.getBestVersionForData(s,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Qne(t,r,s),c=Cx.getSymbolSize(t),u=new $ne(c);return Kne(u,t),Xne(u),Yne(u,t),Q2(u,r,0),t>=7&&Zne(u,t),Jne(u,o),isNaN(n)&&(n=Tb.getBestMask(u,Q2.bind(null,u,r))),Tb.applyMask(n,u),Q2(u,r,n),{modules:u,version:t,errorCorrectionLevel:r,maskPattern:n,segments:s}}wO.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Z2.M,s,i;return typeof r<"u"&&(n=Z2.from(r.errorCorrectionLevel,Z2.M),s=qg.from(r.version),i=Tb.from(r.maskPattern),r.toSJISFunc&&Cx.setToSJISFunction(r.toSJISFunc)),tae(t,s,n,i)};var RO={},g3={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},e.getImageWidth=function(n,s){const i=e.getScale(n,s);return Math.floor((n+s.margin*2)*i)},e.qrToImageData=function(n,s,i){const o=s.modules.size,c=s.modules.data,u=e.getScale(o,i),d=Math.floor((o+i.margin*2)*u),h=i.margin*u,p=[i.color.light,i.color.dark];for(let v=0;v<d;v++)for(let x=0;x<d;x++){let w=(v*d+x)*4,j=i.color.light;if(v>=h&&x>=h&&v<d-h&&x<d-h){const N=Math.floor((v-h)/u),A=Math.floor((x-h)/u);j=p[c[N*o+A]?1:0]}n[w++]=j.r,n[w++]=j.g,n[w++]=j.b,n[w]=j.a}}})(g3);(function(e){const t=g3;function r(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,c){let u=c,d=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(d=n()),u=t.getOptions(u);const h=t.getImageWidth(i.modules.size,u),p=d.getContext("2d"),v=p.createImageData(h,h);return t.qrToImageData(v.data,i,u),r(p,d,h),p.putImageData(v,0,0),d},e.renderToDataURL=function(i,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const d=e.render(i,o,u),h=u.type||"image/png",p=u.rendererOpts||{};return d.toDataURL(h,p.quality)}})(RO);var DO={};const rae=g3;function yC(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function ey(e,t,r){let n=e+t;return typeof r<"u"&&(n+=" "+r),n}function nae(e,t,r){let n="",s=0,i=!1,o=0;for(let c=0;c<e.length;c++){const u=Math.floor(c%t),d=Math.floor(c/t);!u&&!i&&(i=!0),e[c]?(o++,c>0&&u>0&&e[c-1]||(n+=i?ey("M",u+r,.5+d+r):ey("m",s,0),s=0,i=!1),u+1<t&&e[c+1]||(n+=ey("h",o),o=0)):s++}return n}DO.render=function(t,r,n){const s=rae.getOptions(r),i=t.modules.size,o=t.modules.data,c=i+s.margin*2,u=s.color.light.a?"<path "+yC(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+yC(s.color.dark,"stroke")+' d="'+nae(o,i,s.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+h+' shape-rendering="crispEdges">'+u+d+`</svg>
`;return typeof n=="function"&&n(null,v),v};const aae=vne,Ob=wO,LO=RO,sae=DO;function x3(e,t,r,n,s){const i=[].slice.call(arguments,1),o=i.length,c=typeof i[o-1]=="function";if(!c&&!aae())throw new Error("Callback required as last argument");if(c){if(o<2)throw new Error("Too few arguments provided");o===2?(s=r,r=t,t=n=void 0):o===3&&(t.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=r,r=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=t,t=n=void 0):o===2&&!t.getContext&&(n=r,r=t,t=void 0),new Promise(function(u,d){try{const h=Ob.create(r,n);u(e(h,t,n))}catch(h){d(h)}})}try{const u=Ob.create(r,n);s(null,e(u,t,n))}catch(u){s(u)}}Qu.create=Ob.create;Qu.toCanvas=x3.bind(null,LO.render);Qu.toDataURL=x3.bind(null,LO.renderToDataURL);Qu.toString=x3.bind(null,function(e,t,r){return sae.render(e,r)});function iae({isOpen:e,onClose:t,shipmentId:r,shipmentRef:n}){const[s,i]=P.useState([]),[o,c]=P.useState({}),[u,d]=P.useState(!1),[h,p]=P.useState(null);P.useEffect(()=>{e&&r&&v()},[e,r]);const v=async()=>{d(!0),p(null);try{const j=await fetch(`/api/shipments/${r}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(j.ok){const N=await j.json();if(!N.boxes||N.boxes.length===0){p("No boxes found for this shipment"),d(!1);return}i(N.boxes);const A={};for(const k of N.boxes)A[k.id]=await Qu.toDataURL(k.qrCode,{width:200});c(A)}}catch(j){console.error("Failed to load boxes:",j)}finally{d(!1)}},x=()=>{window.print()},w=j=>{const N={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",IN_STORAGE:"bg-green-100 text-green-800 border-green-300",RELEASED:"bg-gray-100 text-gray-800 border-gray-300"};return N[j]||N.PENDING};return e?a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex justify-between items-center rounded-t-lg print:hidden",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"📦 Individual Box QR Codes"}),a.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["Shipment: ",n]})]}),a.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"p-6",children:u?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading box QR codes..."})]}):h?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"⚠️"}),a.jsx("p",{className:"text-gray-700 font-semibold text-lg",children:h}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Boxes will be created when shipment is saved"})]}):s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-5xl mb-4",children:"📦"}),a.jsx("p",{className:"text-gray-500",children:"No boxes found for this shipment"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6 flex justify-between items-center print:hidden",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Total Boxes: ",s.length]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Each box has its own unique QR code for scanning"})]}),a.jsxs("button",{onClick:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print All QR Codes"]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(j=>a.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 text-center hover:border-indigo-400 transition print:border print:border-black print:break-inside-avoid",children:[a.jsxs("div",{className:"bg-indigo-100 text-indigo-800 font-bold text-lg rounded-md py-2 mb-3",children:["Box #",j.boxNumber]}),o[j.id]&&a.jsx("img",{src:o[j.id],alt:`Box ${j.boxNumber} QR`,className:"mx-auto mb-3"}),a.jsx("p",{className:"text-xs text-gray-600 font-mono break-all mb-2",children:j.qrCode}),a.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded border inline-block ${w(j.status)}`,children:j.status}),j.rack&&a.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["📍 ",j.rack.code," - ",j.rack.location]})]},j.id))}),s.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),a.jsx("p",{className:"text-lg font-semibold",children:"No boxes found"})]})]})}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t rounded-b-lg print:hidden",children:a.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Close"})})]}),a.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .fixed, .fixed * {
            visibility: visible;
          }
          .fixed {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:border {
            border: 1px solid #000 !important;
          }
          .print\\:break-inside-avoid {
            page-break-inside: avoid;
          }
        }
      `})]}):null}const oae=()=>{const[e,t]=P.useState(""),[r,n]=P.useState("all"),[s,i]=P.useState("all"),[o,c]=P.useState([]),[u,d]=P.useState({all:0,pending:0,in_storage:0,partial:0,released:0}),[h,p]=P.useState({all:0,regular:0,warehouse:0}),[v,x]=P.useState(!0),[w,j]=P.useState(""),[N,A]=P.useState(!1),[k,E]=P.useState(null),[_,O]=P.useState(!1),[B,F]=P.useState(!1),[U,L]=P.useState(!1),[K,z]=P.useState(!1),[q,Q]=P.useState(!1),[G,H]=P.useState(null);P.useEffect(()=>{ue()},[r,s,e]);const ue=async()=>{try{x(!0);const V=(await _c.getAll({})).shipments||[],se={all:V.length,pending:V.filter(xe=>xe.status==="PENDING").length,in_storage:V.filter(xe=>xe.status==="IN_STORAGE"||xe.status==="ACTIVE").length,partial:V.filter(xe=>xe.status==="PARTIAL").length,released:V.filter(xe=>xe.status==="RELEASED").length};d(se);const ne={all:V.length,regular:V.filter(xe=>!xe.isWarehouseShipment).length,warehouse:V.filter(xe=>xe.isWarehouseShipment).length};p(ne);const ve={};r!=="all"&&(ve.status=r==="in_storage"?"IN_STORAGE":r.toUpperCase()),s==="regular"?ve.isWarehouseShipment=!1:s==="warehouse"&&(ve.isWarehouseShipment=!0),e&&(ve.search=e);const Te=(await _c.getAll(ve)).shipments||[];console.log("📦 Shipments loaded:",Te.map(xe=>({id:xe.referenceId,status:xe.status,boxes:xe.currentBoxCount}))),c(Te)}catch(ie){j(ie.message),console.error("Load shipments error:",ie)}finally{x(!1)}},ye=async ie=>{const V=o.find(ne=>ne.id===ie),se=`🚨 DELETE SHIPMENT

Reference: ${(V==null?void 0:V.referenceId)||"N/A"}
Client: ${(V==null?void 0:V.clientName)||"N/A"}
Boxes: ${(V==null?void 0:V.currentBoxCount)||0}

⚠️ This action CANNOT be undone!

Are you sure you want to delete this shipment?`;if(confirm(se))try{await _c.delete(ie),alert("✅ Shipment deleted successfully!"),ue()}catch(ne){alert("❌ Error deleting shipment: "+ne.message)}},de=ie=>{E(ie),A(!0)},we=ie=>{const V=new Date(ie.arrivalDate),se=ie.releasedAt?new Date(ie.releasedAt):new Date;Math.ceil((se.getTime()-V.getTime())/(1e3*60*60*24));const ne={shipment:ie,invoice:null,releaseDate:ie.releasedAt||new Date,releasedBy:"Admin User",collectorID:"N/A",releaseType:ie.currentBoxCount===0?"FULL":"PARTIAL",boxesReleased:ie.originalBoxCount-ie.currentBoxCount};H(ne),Q(!0)},Ee=ie=>{switch(ie){case"PENDING":return{color:"bg-yellow-100 text-yellow-800",icon:"⏳",label:"Pending"};case"IN_STORAGE":return{color:"bg-green-100 text-green-800",icon:"✅",label:"In Storage"};case"ACTIVE":return{color:"bg-green-100 text-green-800",icon:"✅",label:"In Storage"};case"PARTIAL":return{color:"bg-orange-100 text-orange-800",icon:"⚠",label:"Partial"};case"RELEASED":return{color:"bg-blue-100 text-blue-800",icon:"🔵",label:"Released"};default:return{color:"bg-gray-100 text-gray-800",icon:"⚪",label:ie}}};return v?a.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading shipments..."})]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"📦 Warehouse Shipments"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Complete warehouse management with intake, tracking, and release"})]}),a.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md",children:[a.jsx(Tu,{className:"h-5 w-5 mr-2"}),"📦 New Shipment Intake"]})]}),w&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:w}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(t0,{className:"h-5 w-5 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Shipment Type"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="all"?"bg-primary-100 text-primary-700 border border-primary-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All Types (",h.all,")"]}),a.jsxs("button",{onClick:()=>i("regular"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${s==="regular"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(eg,{className:"h-4 w-4"}),"Regular Shipments (",h.regular,")"]}),a.jsxs("button",{onClick:()=>i("warehouse"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${s==="warehouse"?"bg-orange-100 text-orange-700 border border-orange-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(Pv,{className:"h-4 w-4"}),"Warehouse Shipments (",h.warehouse,")"]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsx("button",{onClick:()=>n("all"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="all"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{children:"All Shipments"}),u.all>0&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:u.all})]})}),a.jsx("button",{onClick:()=>n("pending"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="pending"?"border-b-2 border-yellow-500 text-yellow-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{children:"⏳ Pending"}),u.pending>0&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:u.pending})]})}),a.jsx("button",{onClick:()=>n("in_storage"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="in_storage"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{children:"✅ In Storage"}),u.in_storage>0&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:u.in_storage})]})}),a.jsx("button",{onClick:()=>n("partial"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="partial"?"border-b-2 border-orange-500 text-orange-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{children:"� Partial"}),u.partial>0&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:u.partial})]})}),a.jsx("button",{onClick:()=>n("released"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="released"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{children:"🔵 Released"}),u.released>0&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:u.released})]})})]})}),a.jsx("div",{className:"p-4 bg-gray-50",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(w1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by client name, phone, or shipment ID...",value:e,onChange:ie=>t(ie.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barcode ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pieces"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rack"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Stored"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[o.map(ie=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mo,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:ie.referenceId})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:ie.clientName}),a.jsx("div",{className:"text-xs text-gray-500",children:new Date(ie.receivedDate).toLocaleDateString()})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ie.clientPhone}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["📦 ",ie.currentBoxCount," / ",ie.originalBoxCount," pieces"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center gap-2",children:ie.isWarehouseShipment?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:[a.jsx(Pv,{className:"h-3 w-3"}),"Warehouse"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[a.jsx(eg,{className:"h-3 w-3"}),"Regular"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm font-medium text-primary-600",children:ie.rackLocations||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("span",{className:"font-semibold",children:[ie.receivedDate?Math.ceil((new Date().getTime()-new Date(ie.receivedDate).getTime())/(1e3*3600*24)):0," days"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(()=>{const V=Ee(ie.status);return a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${V.color}`,children:[a.jsx("span",{children:V.icon}),a.jsx("span",{children:V.label})]})})()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>{E(ie),z(!0)},className:"text-indigo-600 hover:text-indigo-900",title:"View QR Codes",children:a.jsx(Mo,{className:"h-5 w-5"})}),(ie.status==="IN_STORAGE"||ie.status==="PARTIAL"||ie.status==="ACTIVE"||ie.status==="IN STORAGE")&&ie.currentBoxCount>0&&a.jsx("button",{onClick:()=>{console.log("🔍 Release button clicked:",{status:ie.status,boxes:ie.currentBoxCount}),de(ie)},className:"text-green-600 hover:text-green-900",title:`Generate Invoice & Release (Status: ${ie.status})`,children:a.jsx(kv,{className:"h-5 w-5"})}),ie.status==="RELEASED"&&a.jsx("button",{onClick:()=>we(ie),className:"text-purple-600 hover:text-purple-900",title:"Print Release Note",children:a.jsx(_u,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>{E(ie),L(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:a.jsx(j0,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>{E(ie),F(!0)},className:"text-gray-600 hover:text-gray-900",title:"Edit Shipment",children:a.jsx(jf,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>ye(ie.id),className:"text-red-600 hover:text-red-900",children:a.jsx(Ou,{className:"h-5 w-5"})})]})})]},ie.id)),o.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:"No shipments found"})})]})]})})}),a.jsx(mne,{isOpen:_,onClose:()=>O(!1),onSuccess:ue}),a.jsx(gne,{isOpen:B,onClose:()=>F(!1),shipment:k,onSuccess:ue}),a.jsx(yne,{isOpen:U,onClose:()=>L(!1),shipmentId:(k==null?void 0:k.id)||""}),a.jsx(hne,{isOpen:N,onClose:()=>A(!1),shipment:k,onSuccess:ue}),a.jsx(iae,{isOpen:K,onClose:()=>z(!1),shipmentId:(k==null?void 0:k.id)||"",shipmentRef:(k==null?void 0:k.referenceId)||""}),q&&G&&a.jsx(dne,{isOpen:q,onClose:()=>Q(!1),releaseData:G})]})};function lae({isOpen:e,onClose:t,onSuccess:r}){const[n,s]=P.useState(!1),[i,o]=P.useState({code:"",location:"",rackType:"STORAGE",capacityTotal:100,status:"ACTIVE"}),[c,u]=P.useState(""),[d,h]=P.useState(""),[p,v]=P.useState("");P.useEffect(()=>{e&&(o({code:"",location:"",rackType:"STORAGE",capacityTotal:100,status:"ACTIVE"}),u(""),h(""),v(""))},[e]);const x=k=>{const{name:E,value:_}=k.target;o(O=>({...O,[E]:E==="capacityTotal"?Number(_):_}))},w=async k=>{try{const E=`RACK:${k}`,_=await Qu.toDataURL(E,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});u(_)}catch(E){console.error("QR generation error:",E)}},j=k=>{const E=k.target.value.toUpperCase();o(_=>({..._,code:E})),E.length>0?w(E):u("")},N=()=>{if(!c)return;const k=document.createElement("a");k.href=c,k.download=`rack-${i.code}-qr.png`,document.body.appendChild(k),k.click(),document.body.removeChild(k)},A=async k=>{k.preventDefault(),s(!0),h(""),v("");try{if(!i.code||!i.location)throw new Error("Rack code and location are required");if(i.capacityTotal<=0)throw new Error("Capacity must be greater than 0");const E=`RACK-${i.code}-${Date.now()}`,_={...i,qrCode:E,capacityUsed:0};await Fo.create(_),v("Rack created successfully! ✅"),await w(i.code),setTimeout(()=>{r(),t()},2e3)}catch(E){h(E.message||"Failed to create rack")}finally{s(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-purple-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"🏪 Create New Rack"}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:n,children:"×"})]}),a.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[d&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),p&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:p}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Code ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"code",value:i.code,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase",placeholder:"A1, B2, C3...",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use format like A1, A2, B1, etc."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"location",value:i.location,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Zone A, Floor 1, Section North...",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"rackType",value:i.rackType,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"STORAGE",children:"Storage"}),a.jsx("option",{value:"MATERIALS",children:"Materials"}),a.jsx("option",{value:"EQUIPMENT",children:"Equipment"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Capacity ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"capacityTotal",value:i.capacityTotal,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"100",min:"1",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of items/boxes"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:i.status,onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"RESERVED",children:"Reserved"})]})]})]})]}),c&&a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"QR Code Preview"}),a.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[a.jsx("img",{src:c,alt:"QR Code",className:"border-2 border-gray-300 rounded p-2"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Scan this code to identify rack: ",a.jsx("span",{className:"font-bold",children:i.code})]}),p&&a.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 font-medium text-sm",children:"📥 Download QR Code"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:n,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n,children:n?"Creating...":"Create Rack"})]})]})]})}):null}function cae({isOpen:e,onClose:t,onSuccess:r,rack:n}){const[s,i]=P.useState(!1),[o,c]=P.useState({code:"",location:"",rackType:"STORAGE",capacityTotal:100,status:"ACTIVE"}),[u,d]=P.useState(""),[h,p]=P.useState(""),[v,x]=P.useState("");P.useEffect(()=>{e&&n&&(c({code:n.code||"",location:n.location||"",rackType:n.rackType||"STORAGE",capacityTotal:n.capacityTotal||100,status:n.status||"ACTIVE"}),n.code&&j(n.code),p(""),x(""))},[e,n]);const w=_=>{const{name:O,value:B}=_.target;c(F=>({...F,[O]:O==="capacityTotal"?Number(B):B}))},j=async _=>{try{const O=`RACK:${_}`,B=await Qu.toDataURL(O,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});d(B)}catch(O){console.error("QR generation error:",O)}},N=_=>{const O=_.target.value.toUpperCase();c(B=>({...B,code:O})),O.length>0?j(O):d("")},A=()=>{if(!u)return;const _=document.createElement("a");_.href=u,_.download=`rack-${o.code}-qr.png`,document.body.appendChild(_),_.click(),document.body.removeChild(_)},k=async _=>{_.preventDefault(),i(!0),p(""),x("");try{if(!o.code||!o.location)throw new Error("Rack code and location are required");if(o.capacityTotal<=0)throw new Error("Capacity must be greater than 0");if(o.capacityTotal<n.capacityUsed)throw new Error(`Cannot reduce capacity below current usage (${n.capacityUsed})`);await Fo.update(n.id,o),x("Rack updated successfully! ✅"),setTimeout(()=>{r(),t()},1500)}catch(O){p(O.message||"Failed to update rack")}finally{i(!1)}};if(!e||!n)return null;const E=Math.round(n.capacityUsed/n.capacityTotal*100);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-purple-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"✏️ Edit Rack"}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:s,children:"×"})]}),a.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[h&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:h}),v&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:v}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Current Usage"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-blue-700",children:[n.capacityUsed," / ",n.capacityTotal," items (",E,"%)"]}),a.jsx("div",{className:"w-32 bg-blue-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${E}%`}})})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Code ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"code",value:o.code,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase",placeholder:"A1, B2, C3...",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use format like A1, A2, B1, etc."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"location",value:o.location,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Zone A, Floor 1, Section North...",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"rackType",value:o.rackType,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"STORAGE",children:"Storage"}),a.jsx("option",{value:"MATERIALS",children:"Materials"}),a.jsx("option",{value:"EQUIPMENT",children:"Equipment"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Capacity ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"capacityTotal",value:o.capacityTotal,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"100",min:n.capacityUsed,required:!0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",n.capacityUsed," (current usage)"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:o.status,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"RESERVED",children:"Reserved"})]})]})]})]}),u&&a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"QR Code"}),a.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[a.jsx("img",{src:u,alt:"QR Code",className:"border-2 border-gray-300 rounded p-2"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Scan this code to identify rack: ",a.jsx("span",{className:"font-bold",children:o.code})]}),a.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 font-medium text-sm",children:"📥 Download QR Code"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:s,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:s,children:s?"Updating...":"Update Rack"})]})]})]})})}const uae=()=>{const[e,t]=P.useState("all"),[r,n]=P.useState([]),[s,i]=P.useState(!0),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[h,p]=P.useState(null);P.useEffect(()=>{v()},[]);const v=async()=>{try{i(!0);const j=await Fo.getAll();n(j.racks||[])}catch(j){console.error("Load racks error:",j)}finally{i(!1)}},x=e==="all"?r:r.filter(j=>j.code.startsWith(e)),w=j=>j>=90?"bg-red-500":j>=75?"bg-yellow-500":"bg-green-500";return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Warehouse Racks"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage warehouse storage racks"})]}),a.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[a.jsx(Tu,{className:"h-5 w-5 mr-2"}),"Add Rack"]})]}),s?a.jsx("div",{className:"text-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Racks"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.length})]}),a.jsx(Rl,{className:"h-10 w-10 text-primary-500"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Capacity"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.reduce((j,N)=>j+N.capacityTotal,0)})]}),a.jsx(e0,{className:"h-10 w-10 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Occupied"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.reduce((j,N)=>j+N.capacityUsed,0)})]}),a.jsxs("div",{className:"text-green-600 text-sm font-medium",children:[r.length>0?Math.round(r.reduce((j,N)=>j+N.capacityUsed,0)/r.reduce((j,N)=>j+N.capacityTotal,0)*100):0,"%"]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Available"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.reduce((j,N)=>j+(N.capacityTotal-N.capacityUsed),0)})]}),a.jsxs("div",{className:"text-blue-600 text-sm font-medium",children:[r.length>0?Math.round(r.reduce((j,N)=>j+(N.capacityTotal-N.capacityUsed),0)/r.reduce((j,N)=>j+N.capacityTotal,0)*100):0,"%"]})]})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Sections"}),["A","B","C"].map(j=>a.jsxs("button",{onClick:()=>t(j),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e===j?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Section ",j]},j))]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Warehouse Layout"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:x.map(j=>{var k;const N=j.utilization||Math.round(j.capacityUsed/j.capacityTotal*100),A=((k=j.inventory)==null?void 0:k.length)||0;return a.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:border-primary-500 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mo,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-lg font-bold text-gray-900",children:j.code})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{p(j),d(!0)},className:"text-gray-500 hover:text-blue-600",title:"Edit Rack",children:a.jsx(jf,{className:"h-4 w-4"})}),a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Capacity"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[j.capacityUsed,"/",j.capacityTotal]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${w(N)}`,style:{width:`${N}%`}})}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[a.jsxs("span",{children:[A," shipments"]}),a.jsxs("span",{children:[N.toFixed(0),"%"]})]}),a.jsx("div",{className:"text-xs text-gray-400 mt-2",children:j.location||`Section ${j.code.charAt(0)}`})]})]},j.id)})})]}),a.jsx(lae,{isOpen:o,onClose:()=>c(!1),onSuccess:v}),a.jsx(cae,{isOpen:u,onClose:()=>d(!1),rack:h,onSuccess:v})]})};function dae({isOpen:e,onClose:t,onSuccess:r}){const[n,s]=P.useState(!1),[i,o]=P.useState({title:"",jobType:"LOCAL",clientName:"",clientPhone:"",fromAddress:"",toAddress:"",scheduledDate:"",status:"SCHEDULED"}),[c,u]=P.useState([]),[d,h]=P.useState({}),[p,v]=P.useState([]),[x,w]=P.useState([]),[j,N]=P.useState(""),[A,k]=P.useState("");P.useEffect(()=>{if(e){const F=new Date().toISOString().split("T")[0];o({title:"",jobType:"LOCAL",clientName:"",clientPhone:"",fromAddress:"",toAddress:"",scheduledDate:F,status:"SCHEDULED"}),N(""),k(""),w([]),_(),E(),h({})}},[e]);const E=async()=>{try{const F=await fetch("/api/materials",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(F.ok){const U=await F.json();v(U.filter(L=>L.totalQuantity>0))}}catch(F){console.error("Failed to load materials:",F)}},_=async()=>{try{const F=await fetch("/api/custom-fields?section=JOB",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(F.ok){const U=await F.json(),L=U.customFields||U,K=Array.isArray(L)?L.filter(q=>q.isActive):[];u(K);const z={};K.forEach(q=>{z[q.id]=""}),h(z)}}catch(F){console.error("Failed to load custom fields:",F)}},O=F=>{const{name:U,value:L}=F.target;o(K=>({...K,[U]:L}))},B=async F=>{F.preventDefault(),s(!0),N(""),k("");try{if(!i.title||!i.clientName||!i.clientPhone)throw new Error("Title, client name, and phone are required");if(!i.fromAddress)throw new Error("From address is required");if(!i.scheduledDate)throw new Error("Scheduled date is required");if(i.jobType==="INTERNATIONAL"&&!i.toAddress)throw new Error("To address is required for international moves");const U={jobCode:`JOB-${Date.now()}`,jobTitle:i.title,clientName:i.clientName,clientPhone:i.clientPhone,clientEmail:"",jobDate:new Date(i.scheduledDate).toISOString(),jobAddress:i.fromAddress,dropoffAddress:i.toAddress||null,teamLeaderId:null,driverName:null,vehicleNumber:null,notes:null,status:i.status},K=(await kh.create(U)).id;if(x.length>0){const z=x.filter(q=>q.materialId&&q.quantity>0);for(const q of z)try{await fetch("/api/materials/issue",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({jobId:K,materialId:q.materialId,quantity:q.quantity})})}catch(Q){console.error("Failed to issue material:",Q)}}if(c.length>0){const z=Object.entries(d).filter(([q,Q])=>Q!=="").map(([q,Q])=>({customFieldId:q,fieldValue:Q}));if(z.length>0)try{await fetch(`/api/custom-field-values/JOB/${K}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:z})})}catch(q){console.error("Failed to save custom field values:",q)}}k("Moving job created successfully! ✅"),setTimeout(()=>{r(),t()},1500)}catch(U){N(U.message||"Failed to create moving job")}finally{s(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"🚛 Create New Moving Job"}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:n,children:"×"})]}),a.jsxs("form",{onSubmit:B,className:"p-6 space-y-6",children:[j&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:j}),A&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:A}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Job Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"title",value:i.title,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Office Relocation - ABC Company",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"jobType",value:i.jobType,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"LOCAL",children:"Local Move"}),a.jsx("option",{value:"INTERNATIONAL",children:"International Move"}),a.jsx("option",{value:"PACKING_ONLY",children:"Packing Only"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:i.status,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),a.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),a.jsx("option",{value:"COMPLETED",children:"Completed"}),a.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Scheduled Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"scheduledDate",value:i.scheduledDate,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Client Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientName",value:i.clientName,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"clientPhone",value:i.clientPhone,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+965 1234 5678",required:!0})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Location Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["From Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"fromAddress",value:i.fromAddress,onChange:O,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full pickup address...",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["To Address ",i.jobType==="INTERNATIONAL"&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"toAddress",value:i.toAddress,onChange:O,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full delivery address...",required:i.jobType==="INTERNATIONAL"}),i.jobType==="PACKING_ONLY"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for packing-only jobs"})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"📦 Materials (Optional)"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select materials needed for this job. Stock will be deducted automatically."}),a.jsxs("div",{className:"space-y-3",children:[x.map((F,U)=>{const L=p.find(K=>K.id===F.materialId);return a.jsxs("div",{className:"flex gap-3 items-center bg-gray-50 p-3 rounded",children:[a.jsxs("select",{value:F.materialId,onChange:K=>{const z=[...x];z[U].materialId=K.target.value,w(z)},className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"-- Select Material --"}),p.map(K=>a.jsxs("option",{value:K.id,children:[K.sku," - ",K.name," (Stock: ",K.totalQuantity," ",K.unit,")"]},K.id))]}),a.jsx("input",{type:"number",min:"1",max:(L==null?void 0:L.totalQuantity)||999,value:F.quantity,onChange:K=>{const z=[...x];z[U].quantity=parseInt(K.target.value)||0,w(z)},className:"w-24 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Qty"}),a.jsx("button",{type:"button",onClick:()=>{w(x.filter((K,z)=>z!==U))},className:"text-red-600 hover:text-red-800",children:"✕"})]},U)}),a.jsx("button",{type:"button",onClick:()=>{w([...x,{materialId:"",quantity:1}])},className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ Add Material"})]})]}),c.length>0&&a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(F=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[F.fieldName,F.isRequired&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),F.fieldType==="TEXT"&&a.jsx("input",{type:"text",value:d[F.id]||"",onChange:U=>h(L=>({...L,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${F.fieldName.toLowerCase()}`}),F.fieldType==="NUMBER"&&a.jsx("input",{type:"number",value:d[F.id]||"",onChange:U=>h(L=>({...L,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${F.fieldName.toLowerCase()}`}),F.fieldType==="DATE"&&a.jsx("input",{type:"date",value:d[F.id]||"",onChange:U=>h(L=>({...L,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"}),F.fieldType==="DROPDOWN"&&F.fieldOptions&&a.jsxs("select",{value:d[F.id]||"",onChange:U=>h(L=>({...L,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const U=JSON.parse(F.fieldOptions);return Array.isArray(U)?U.map(L=>a.jsx("option",{value:L,children:L},L)):[]}catch{return F.fieldOptions.split(",").map(U=>a.jsx("option",{value:U.trim(),children:U.trim()},U.trim()))}})()]}),F.fieldType==="CHECKBOX"&&a.jsxs("div",{className:"flex items-center h-10",children:[a.jsx("input",{type:"checkbox",checked:d[F.id]==="true",onChange:U=>h(L=>({...L,[F.id]:U.target.checked?"true":"false"})),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-2 focus:ring-green-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},F.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:n,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n,children:n?"Creating...":"Create Job"})]})]})]})}):null}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hae=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),vC=e=>{const t=hae(e);return t.charAt(0).toUpperCase()+t.slice(1)},MO=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),mae=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...c},u)=>P.createElement("svg",{ref:u,...pae,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:MO("lucide",s),...!i&&!mae(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>P.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=(e,t)=>{const r=P.forwardRef(({className:n,...s},i)=>P.createElement(gae,{ref:i,iconNode:t,className:MO(`lucide-${fae(vC(e))}`,`lucide-${e}`,n),...s}));return r.displayName=vC(e),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Rb=ur("activity",xae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],vae=ur("archive",yae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],wae=ur("arrow-left-right",bae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],bC=ur("briefcase",Nae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],wC=ur("building-2",jae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],y3=ur("calendar",Aae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Sx=ur("camera",Cae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],NC=ur("check",Sae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],kae=ur("circle-alert",Eae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jC=ur("dollar-sign",Pae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ex=ur("download",Iae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_ae=ur("eye",Tae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Rae=ur("file-text",Oae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Lae=ur("file",Dae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mae=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],ty=ur("folder-tree",Mae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Fae=ur("funnel",Bae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],zae=ur("history",Uae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],AC=ur("lock",$ae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qae=ur("mail",Wae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],BO=ur("map-pin",Hae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Wu=ur("package",Vae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Kae=ur("phone",Gae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vp=ur("plus",Xae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],FO=ur("printer",Yae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jae=ur("refresh-cw",Zae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ju=ur("save",Qae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tse=ur("search",ese);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Db=ur("shield",rse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ase=ur("shopping-cart",nse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kx=ur("trash-2",sse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Lb=ur("trending-down",ise);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],CC=ur("trending-up",ose);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hg=ur("triangle-alert",lse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cse=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],use=ur("upload",cse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fse=ur("user-plus",dse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vg=ur("users",hse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mse=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ry=ur("user",mse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ci=ur("x",pse);function UO({isOpen:e,onClose:t,jobId:r,onSuccess:n}){const[s,i]=P.useState([]),[o,c]=P.useState(new Map),[u,d]=P.useState(!1);P.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{try{const j=await fetch(`/api/materials/job-materials/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(j.ok){const A=(await j.json()).filter(E=>!E.returns||E.returns.length===0);i(A);const k=new Map;A.forEach(E=>{k.set(E.id,{issueId:E.id,quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]})}),c(k)}}catch(j){console.error("Failed to load issued materials:",j)}},p=(j,N,A)=>{const k=new Map(o),E=k.get(j);E&&(k.set(j,{...E,[N]:A}),c(k))},v=(j,N)=>{if(N){const A=o.get(j);if(A){const k=[...A.photos,...Array.from(N)];p(j,"photos",k)}}},x=(j,N)=>{const A=o.get(j);if(A){const k=A.photos.filter((E,_)=>_!==N);p(j,"photos",k)}},w=async j=>{j.preventDefault(),d(!0);try{for(const[N,A]of o.entries()){const k=s.find(F=>F.id===N);if(!k)continue;console.log("Return Data:",{materialName:k.material.name,issued:k.quantity,quantityGood:A.quantityGood,quantityGoodType:typeof A.quantityGood,quantityDamaged:A.quantityDamaged,quantityDamagedType:typeof A.quantityDamaged});const E=Number(A.quantityGood)+Number(A.quantityDamaged);if(E>k.quantity){alert(`${k.material.name}: Total returned (${E}) cannot exceed issued quantity (${k.quantity})`),d(!1);return}const _=k.quantity-E;if(A.quantityDamaged>0&&!A.damageReason.trim()){alert(`${k.material.name}: Damage reason required for damaged items`),d(!1);return}if(A.quantityDamaged>0&&A.photos.length===0){alert(`${k.material.name}: Photo proof required for damaged items`),d(!1);return}const O=new FormData;O.append("jobId",r),O.append("issueId",N),O.append("quantityUsed",String(_)),O.append("quantityGood",String(Number(A.quantityGood))),O.append("quantityDamaged",String(Number(A.quantityDamaged))),O.append("damageReason",A.damageReason),O.append("notes",A.notes),A.photos.forEach(F=>{O.append("photos",F)});const B=await fetch("/api/materials/return",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:O});if(!B.ok){const F=await B.json();throw new Error(F.error||"Failed to record return")}}await n(),alert("✅ Material returns recorded successfully! Stock updated."),t()}catch(N){alert(`❌ Error: ${N.message}`)}finally{d(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"📦 Return Materials"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(ci,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:w,className:"p-6",children:[s.length===0?a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No materials to return"}):a.jsx("div",{className:"space-y-6",children:s.map(j=>{const N=o.get(j.id);return N?a.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-bold text-lg",children:j.material.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[j.material.sku," • Issued: ",a.jsxs("span",{className:"font-bold text-blue-600",children:[j.quantity," ",j.material.unit]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"✅ Returned (Good Condition) *"}),a.jsx("input",{type:"number",min:"0",max:j.quantity,value:N.quantityGood===0?"":N.quantityGood,onChange:A=>{const k=A.target.value===""?0:Number(A.target.value);p(j.id,"quantityGood",isNaN(k)?0:k)},className:"w-full border rounded px-3 py-2 text-lg font-semibold",placeholder:"Enter quantity"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Good items returned to stock"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"❌ Damaged (Lost)"}),a.jsx("input",{type:"number",min:"0",max:j.quantity,value:N.quantityDamaged===0?"":N.quantityDamaged,onChange:A=>{const k=A.target.value===""?0:Number(A.target.value);p(j.id,"quantityDamaged",isNaN(k)?0:k)},className:"w-full border rounded px-3 py-2 text-lg font-semibold",placeholder:"Enter quantity"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Damaged/broken items"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:[a.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["🔧 Used/Consumed: ",a.jsxs("span",{className:"text-lg font-bold",children:[j.quantity-(N.quantityGood+N.quantityDamaged)," ",j.material.unit]})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Automatically calculated: Issued (",j.quantity,") - Returned (",N.quantityGood,") - Damaged (",N.quantityDamaged,")"]})]}),N.quantityDamaged>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Damage Reason *"}),a.jsx("textarea",{value:N.damageReason,onChange:A=>p(j.id,"damageReason",A.target.value),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Explain what happened...",required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a.jsx(Sx,{className:"w-4 h-4 inline mr-1"}),"Damage Photos * (Required)"]}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:A=>v(j.id,A.target.files),className:"w-full border rounded px-3 py-2"}),N.photos.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:N.photos.map((A,k)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:URL.createObjectURL(A),alt:`Damage ${k+1}`,className:"w-20 h-20 object-cover rounded"}),a.jsx("button",{type:"button",onClick:()=>x(j.id,k),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1",children:a.jsx(kx,{className:"w-3 h-3"})})]},k))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("textarea",{value:N.notes,onChange:A=>p(j.id,"notes",A.target.value),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Any additional notes..."})]})]},j.id):null})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:u||s.length===0,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400",children:u?"Saving...":"Record Returns"})]})]})]})}):null}function gse({isOpen:e,onClose:t,onSuccess:r,job:n}){const[s,i]=P.useState(!1),[o,c]=P.useState({title:"",jobType:"LOCAL",clientName:"",clientPhone:"",fromAddress:"",toAddress:"",scheduledDate:"",status:"SCHEDULED"}),[u,d]=P.useState([]),[h,p]=P.useState({}),[v,x]=P.useState(!1),[w,j]=P.useState(""),[N,A]=P.useState("");P.useEffect(()=>{if(e&&n){const O=n.jobDate||n.scheduledDate?new Date(n.jobDate||n.scheduledDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];c({title:n.jobTitle||n.title||"",jobType:n.jobType||"LOCAL",clientName:n.clientName||"",clientPhone:n.clientPhone||"",fromAddress:n.jobAddress||n.fromAddress||"",toAddress:n.dropoffAddress||n.toAddress||"",scheduledDate:O,status:n.status||"PLANNED"}),j(""),A(""),k()}},[e,n]);const k=async()=>{if(n!=null&&n.id)try{const O=await fetch("/api/custom-fields?section=JOB",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(O.ok){const B=await O.json(),F=B.customFields||B,U=Array.isArray(F)?F.filter(K=>K.isActive):[];d(U);const L=await fetch(`/api/custom-field-values/JOB/${n.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(L.ok){const K=await L.json(),z=K.customFieldValues||K,q={};Array.isArray(z)&&z.forEach(Q=>{q[Q.customFieldId]=Q.fieldValue}),p(q)}}}catch(O){console.error("Failed to load custom fields:",O)}},E=O=>{const{name:B,value:F}=O.target;c(U=>({...U,[B]:F}))},_=async O=>{O.preventDefault(),i(!0),j(""),A("");try{if(!o.title||!o.clientName||!o.clientPhone)throw new Error("Title, client name, and phone are required");if(!o.fromAddress)throw new Error("From address is required");if(!o.scheduledDate)throw new Error("Scheduled date is required");if(o.jobType==="INTERNATIONAL"&&!o.toAddress)throw new Error("To address is required for international moves");const B={jobTitle:o.title,clientName:o.clientName,clientPhone:o.clientPhone,jobDate:new Date(o.scheduledDate).toISOString(),jobAddress:o.fromAddress,dropoffAddress:o.toAddress||null,status:o.status};if(await kh.update(n.id,B),u.length>0){const F=Object.entries(h).filter(([U,L])=>L!=="").map(([U,L])=>({customFieldId:U,fieldValue:L}));if(F.length>0)try{await fetch(`/api/custom-field-values/JOB/${n.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:F})})}catch(U){console.error("Failed to save custom field values:",U)}}A("Moving job updated successfully! ✅"),setTimeout(()=>{r(),t()},1500)}catch(B){j(B.message||"Failed to update moving job")}finally{i(!1)}};return!e||!n?null:a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"✏️ Edit Moving Job"}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:s,children:"×"})]}),a.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[w&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:w}),N&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:N}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Job Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"title",value:o.title,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Office Relocation - ABC Company",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"jobType",value:o.jobType,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"LOCAL",children:"Local Move"}),a.jsx("option",{value:"INTERNATIONAL",children:"International Move"}),a.jsx("option",{value:"PACKING_ONLY",children:"Packing Only"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:o.status,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"PLANNED",children:"Planned"}),a.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),a.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),a.jsx("option",{value:"CANCELLED",children:"Cancelled"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Use "Complete Job" button to finish job and return materials'})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Scheduled Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"scheduledDate",value:o.scheduledDate,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Client Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"clientName",value:o.clientName,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"clientPhone",value:o.clientPhone,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+965 1234 5678",required:!0})]})]})]}),a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Location Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["From Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"fromAddress",value:o.fromAddress,onChange:E,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full pickup address...",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["To Address ",o.jobType==="INTERNATIONAL"&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"toAddress",value:o.toAddress,onChange:E,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full delivery address...",required:o.jobType==="INTERNATIONAL"}),o.jobType==="PACKING_ONLY"&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for packing-only jobs"})]})]})]}),u.length>0&&a.jsxs("div",{className:"border-b pb-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(O=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[O.fieldName,O.isRequired&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),O.fieldType==="TEXT"&&a.jsx("input",{type:"text",value:h[O.id]||"",onChange:B=>p(F=>({...F,[O.id]:B.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${O.fieldName.toLowerCase()}`}),O.fieldType==="NUMBER"&&a.jsx("input",{type:"number",value:h[O.id]||"",onChange:B=>p(F=>({...F,[O.id]:B.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${O.fieldName.toLowerCase()}`}),O.fieldType==="DATE"&&a.jsx("input",{type:"date",value:h[O.id]||"",onChange:B=>p(F=>({...F,[O.id]:B.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"}),O.fieldType==="DROPDOWN"&&O.fieldOptions&&a.jsxs("select",{value:h[O.id]||"",onChange:B=>p(F=>({...F,[O.id]:B.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const B=JSON.parse(O.fieldOptions);return Array.isArray(B)?B.map(F=>a.jsx("option",{value:F,children:F},F)):[]}catch{return O.fieldOptions.split(",").map(B=>a.jsx("option",{value:B.trim(),children:B.trim()},B.trim()))}})()]}),O.fieldType==="CHECKBOX"&&a.jsxs("div",{className:"flex items-center h-10",children:[a.jsx("input",{type:"checkbox",checked:h[O.id]==="true",onChange:B=>p(F=>({...F,[O.id]:B.target.checked?"true":"false"})),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-2 focus:ring-green-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},O.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:s,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:s,children:s?"Updating...":"Update Job"})]})]})]}),a.jsx(UO,{isOpen:v,onClose:()=>{x(!1),r(),t()},jobId:(n==null?void 0:n.id)||"",onSuccess:()=>{x(!1),r(),t()}})]})}const xse=({jobId:e,jobStatus:t,onUpdate:r})=>{const[n,s]=P.useState("issued"),[i,o]=P.useState([]),[c,u]=P.useState([]),[d,h]=P.useState([]),[p,v]=P.useState(!1),[x,w]=P.useState({materialId:"",quantity:0,rackId:"",notes:""}),[j,N]=P.useState(!1),[A,k]=P.useState(null),[E,_]=P.useState({issueId:"",quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]}),[O,B]=P.useState(!1);P.useEffect(()=>{F()},[e]);const F=async()=>{const ue={Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"};try{const de=await(await fetch("/api/materials",{headers:ue})).json();o(de);const Ee=await(await fetch("/api/materials/available-racks",{headers:ue})).json();u(Ee);const V=await(await fetch(`/api/materials/job-materials/${e}`,{headers:ue})).json();h(V)}catch(ye){console.error("Failed to load data:",ye)}},U=async H=>{H.preventDefault(),B(!0);const ue=localStorage.getItem("authToken");try{const ye=await fetch("/api/materials/issue",{method:"POST",headers:{Authorization:`Bearer ${ue}`,"Content-Type":"application/json"},body:JSON.stringify({jobId:e,materialId:x.materialId,quantity:x.quantity,rackId:x.rackId||null,notes:x.notes})});if(ye.ok)alert("Material issued successfully! Stock updated."),v(!1),w({materialId:"",quantity:0,rackId:"",notes:""}),F(),r==null||r();else{const de=await ye.json();alert(`Failed to issue material: ${de.error}`)}}catch(ye){console.error("Failed to issue material:",ye),alert("Failed to issue material")}finally{B(!1)}},L=async H=>{H.preventDefault(),B(!0);const ue=localStorage.getItem("authToken"),ye=new FormData;ye.append("jobId",e),ye.append("issueId",E.issueId),ye.append("quantityUsed",E.quantityUsed.toString()),ye.append("quantityGood",E.quantityGood.toString()),ye.append("quantityDamaged",E.quantityDamaged.toString()),ye.append("damageReason",E.damageReason),ye.append("notes",E.notes),E.photos.forEach(de=>{ye.append("photos",de)});try{const de=await fetch("/api/materials/return",{method:"POST",headers:{Authorization:`Bearer ${ue}`},body:ye});if(de.ok)alert("Material return recorded! Stock updated."),N(!1),_({issueId:"",quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]}),k(null),F(),r==null||r();else{const we=await de.json();alert(`Failed to record return: ${we.error}`)}}catch(de){console.error("Failed to record return:",de),alert("Failed to record material return")}finally{B(!1)}},K=H=>{if(H.target.files){const ue=Array.from(H.target.files);_({...E,photos:[...E.photos,...ue]})}},z=H=>{const ue=E.photos.filter((ye,de)=>de!==H);_({...E,photos:ue})},q=H=>{k(H),_({issueId:H.id,quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]}),N(!0)},Q=()=>d.reduce((H,ue)=>H+ue.totalCost,0),G=()=>d.filter(H=>!H.returns||H.returns.length===0).length;return a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Wu,{className:"w-6 h-6"}),"Job Materials"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Track materials issued and returned for this job"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Cost"}),a.jsxs("p",{className:"text-xl font-bold",children:[Q().toFixed(2)," KWD"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Pending Returns"}),a.jsx("p",{className:"text-xl font-bold text-orange-600",children:G()})]})]})]}),a.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[a.jsxs("button",{onClick:()=>s("issued"),className:`px-4 py-2 font-medium ${n==="issued"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,children:["Issued Materials (",d.length,")"]}),a.jsx("button",{onClick:()=>s("return"),className:`px-4 py-2 font-medium ${n==="return"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,children:"Returns & Damages"})]}),n==="issued"&&a.jsxs("div",{children:[t!=="COMPLETED"&&t!=="CANCELLED"&&a.jsxs("button",{onClick:()=>v(!0),className:"mb-4 flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:[a.jsx(vp,{className:"w-4 h-4"}),"Issue Material"]}),p&&a.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Issue Material to Job"}),a.jsx("button",{onClick:()=>v(!1),children:a.jsx(ci,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:U,className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material *"}),a.jsxs("select",{required:!0,value:x.materialId,onChange:H=>w({...x,materialId:H.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"-- Select Material --"}),i.map(H=>a.jsxs("option",{value:H.id,children:[H.sku," - ",H.name," (Stock: ",H.totalQuantity," ",H.unit,")"]},H.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity *"}),a.jsx("input",{type:"number",required:!0,min:"1",value:x.quantity,onChange:H=>w({...x,quantity:H.target.value===""?0:parseInt(H.target.value)||0}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Storage Rack (Optional)"}),a.jsxs("select",{value:x.rackId,onChange:H=>w({...x,rackId:H.target.value}),className:"w-full border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:"-- No Specific Rack --"}),c.map(H=>a.jsxs("option",{value:H.id,children:[H.code," - ",H.location]},H.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("input",{type:"text",value:x.notes,onChange:H=>w({...x,notes:H.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Any special notes..."})]}),a.jsx("div",{className:"col-span-2",children:a.jsxs("button",{type:"submit",disabled:O,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[a.jsx(ju,{className:"w-4 h-4"}),O?"Issuing...":"Issue Material"]})})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Cost"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rack"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(H=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:H.material.name}),a.jsx("p",{className:"text-sm text-gray-500",children:H.material.sku})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[H.quantity," ",H.material.unit]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[H.unitCost.toFixed(2)," KWD"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-bold",children:[H.totalCost.toFixed(2)," KWD"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.rack?`${H.rack.code} - ${H.rack.location}`:"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.returns&&H.returns.length>0?a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Returned"}):a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-800",children:"Pending Return"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(!H.returns||H.returns.length===0)&&t==="COMPLETED"&&a.jsxs("button",{onClick:()=>q(H),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[a.jsx(wae,{className:"w-4 h-4"}),"Record Return"]})})]},H.id))})]})})]}),j&&A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Record Material Return"}),a.jsx("button",{onClick:()=>N(!1),children:a.jsx(ci,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded mb-4",children:[a.jsx("p",{className:"font-medium",children:A.material.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Issued Quantity: ",A.quantity," ",A.material.unit]})]}),a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity Used *"}),a.jsx("input",{type:"number",required:!0,min:"0",max:A.quantity,value:E.quantityUsed,onChange:H=>{const ue=parseInt(H.target.value)||0;_({...E,quantityUsed:ue})},className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Good Condition *"}),a.jsx("input",{type:"number",required:!0,min:"0",value:E.quantityGood,onChange:H=>_({...E,quantityGood:parseInt(H.target.value)||0}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Damaged *"}),a.jsx("input",{type:"number",required:!0,min:"0",value:E.quantityDamaged,onChange:H=>_({...E,quantityDamaged:parseInt(H.target.value)||0}),className:"w-full border rounded px-3 py-2"})]})]}),E.quantityDamaged>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Damage Reason *"}),a.jsx("textarea",{required:!0,value:E.damageReason,onChange:H=>_({...E,damageReason:H.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Explain what happened..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a.jsx(Sx,{className:"w-4 h-4 inline mr-1"}),"Damage Photos (Required for damaged items)"]}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:K,className:"w-full border rounded px-3 py-2"}),E.photos.length>0&&a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:E.photos.map((H,ue)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:URL.createObjectURL(H),alt:`Damage ${ue+1}`,className:"w-20 h-20 object-cover rounded"}),a.jsx("button",{type:"button",onClick:()=>z(ue),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1",children:a.jsx(kx,{className:"w-3 h-3"})})]},ue))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("textarea",{value:E.notes,onChange:H=>_({...E,notes:H.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Any additional notes..."})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:O,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[a.jsx(ju,{className:"w-4 h-4"}),O?"Saving...":"Record Return"]})]})]})]})}),n==="return"&&a.jsxs("div",{className:"space-y-4",children:[d.filter(H=>H.returns&&H.returns.length>0).map(H=>{var ue;return a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("div",{className:"flex justify-between items-start mb-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:H.material.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Issued: ",H.quantity," ",H.material.unit]})]})}),(ue=H.returns)==null?void 0:ue.map(ye=>a.jsx("div",{className:"bg-gray-50 p-3 rounded mt-2",children:a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Used"}),a.jsx("p",{className:"font-medium",children:ye.quantityUsed})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Returned (Good)"}),a.jsx("p",{className:"font-medium text-green-600",children:ye.quantityGood})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Damaged"}),a.jsx("p",{className:"font-medium text-red-600",children:ye.quantityDamaged})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Date"}),a.jsx("p",{className:"font-medium",children:new Date(ye.recordedAt).toLocaleDateString()})]})]})},ye.id))]},H.id)}),d.filter(H=>H.returns&&H.returns.length>0).length===0&&a.jsx("p",{className:"text-center text-gray-500 py-8",children:"No returns recorded yet"})]})]})},yse=({open:e,onClose:t,jobId:r,materialIssueId:n,existingAssignment:s,onSuccess:i})=>{const[o,c]=P.useState(!1),[u,d]=P.useState([]),[h,p]=P.useState([]),[v,x]=P.useState(""),[w,j]=P.useState({jobId:r,materialIssueId:n,packerName:"",packerUserId:"",carpenterName:"",carpenterUserId:"",driverName:"",driverUserId:"",externalLaborCount:0,externalLaborNames:"",externalLaborCost:0,outsideForkliftNeeded:!1,forkliftOperatorName:"",forkliftCost:0,forkliftHours:0,notes:""});P.useEffect(()=>{if(e&&(N(),s&&(j(s),s.externalLaborNames)))try{const O=JSON.parse(s.externalLaborNames);p(Array.isArray(O)?O:[])}catch{p([])}},[e,s]);const N=async()=>{try{const O=await fetch("/api/staff-assignments/available-staff",{headers:{Authorization:"Bearer "}});if(O.ok){const B=await O.json();d(B)}}catch(O){console.error("Failed to fetch staff:",O)}},A=(O,B)=>{const F=u.find(U=>U.id===B);F&&j({...w,[`${O}Name`]:F.name,[`${O}UserId`]:F.id})},k=()=>{v.trim()&&(p([...h,v.trim()]),x(""))},E=O=>{p(h.filter((B,F)=>F!==O))},_=async O=>{O.preventDefault(),c(!0);try{const B={...w,externalLaborCount:h.length,externalLaborNames:JSON.stringify(h)},F=s!=null&&s.id?"/api/staff-assignments/":"/api/staff-assignments",U=s!=null&&s.id?"PUT":"POST";(await fetch(F,{method:U,headers:{"Content-Type":"application/json",Authorization:"Bearer "},body:JSON.stringify(B)})).ok?(i==null||i(),t()):alert("Failed to save staff assignment")}catch(B){console.error("Failed to save assignment:",B),alert("Error saving staff assignment")}finally{c(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4 flex justify-between items-center rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vg,{className:"w-6 h-6"}),a.jsx("h2",{className:"text-xl font-bold",children:"Staff Assignment"})]}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 transition-colors",children:a.jsx(ci,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-700 flex items-center gap-2",children:[a.jsx(Vg,{className:"w-5 h-5"}),"Internal Staff"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packer"}),a.jsxs("select",{value:w.packerUserId||"",onChange:O=>A("packer",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Packer"}),u.map(O=>a.jsxs("option",{value:O.id,children:[O.name," - ",O.position||"Staff"]},O.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carpenter"}),a.jsxs("select",{value:w.carpenterUserId||"",onChange:O=>A("carpenter",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Carpenter"}),u.map(O=>a.jsxs("option",{value:O.id,children:[O.name," - ",O.position||"Staff"]},O.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver"}),a.jsxs("select",{value:w.driverUserId||"",onChange:O=>A("driver",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Driver"}),u.map(O=>a.jsxs("option",{value:O.id,children:[O.name," - ",O.position||"Staff"]},O.id))]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"External Labor"}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx("input",{type:"text",value:v,onChange:O=>x(O.target.value),placeholder:"Enter labor name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",onKeyPress:O=>O.key==="Enter"&&(O.preventDefault(),k())}),a.jsxs("button",{type:"button",onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2",children:[a.jsx(fse,{className:"w-4 h-4"}),"Add"]})]}),h.length>0&&a.jsx("div",{className:"space-y-2",children:h.map((O,B)=>a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-md",children:[a.jsx("span",{className:"text-sm font-medium",children:O}),a.jsx("button",{type:"button",onClick:()=>E(B),className:"text-red-600 hover:text-red-700",children:a.jsx(kx,{className:"w-4 h-4"})})]},B))}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"External Labor Cost (KWD)"}),a.jsx("input",{type:"number",step:"0.001",value:w.externalLaborCost||"",onChange:O=>j({...w,externalLaborCost:parseFloat(O.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Forklift (Outside)"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"forklift",checked:w.outsideForkliftNeeded||!1,onChange:O=>j({...w,outsideForkliftNeeded:O.target.checked}),className:"w-4 h-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"forklift",className:"text-sm font-medium text-gray-700",children:"Outside Forklift Needed"})]}),w.outsideForkliftNeeded&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator Name"}),a.jsx("input",{type:"text",value:w.forkliftOperatorName||"",onChange:O=>j({...w,forkliftOperatorName:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours"}),a.jsx("input",{type:"number",step:"0.5",value:w.forkliftHours||"",onChange:O=>j({...w,forkliftHours:parseFloat(O.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (KWD)"}),a.jsx("input",{type:"number",step:"0.001",value:w.forkliftCost||"",onChange:O=>j({...w,forkliftCost:parseFloat(O.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{value:w.notes||"",onChange:O=>j({...w,notes:O.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",placeholder:"Any additional notes..."})]}),a.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",disabled:o,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",disabled:o,children:o?"Saving...":s?"Update":"Assign Staff"})]})]})]})}):null},vse=({isOpen:e,onClose:t,job:r,onUpdate:n})=>{const[s,i]=P.useState("details"),[o,c]=P.useState(!1);return!e||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:r.title||r.jobTitle}),a.jsx("p",{className:"text-gray-600",children:r.jobCode})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(ci,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"border-b px-6",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>i("details"),className:`py-3 px-4 font-medium border-b-2 transition-colors ${s==="details"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:"Job Details"}),a.jsx("button",{onClick:()=>i("materials"),className:`py-3 px-4 font-medium border-b-2 transition-colors ${s==="materials"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:"Materials"}),a.jsx("button",{onClick:()=>i("staff"),className:`py-3 px-4 font-medium border-b-2 transition-colors ${s==="staff"?"border-green-600 text-green-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:"Staff Assignment"})]})}),a.jsxs("div",{className:"p-6",children:[s==="details"&&a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg mb-3",children:"Client Information"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),a.jsx("p",{className:"font-medium",children:r.clientName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),a.jsx("p",{className:"font-medium",children:r.clientPhone})]}),r.clientEmail&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),a.jsx("p",{className:"font-medium",children:r.clientEmail})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg mb-3",children:"Job Information"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),a.jsx("p",{className:"font-medium",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.status==="COMPLETED"?"bg-green-100 text-green-800":r.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":r.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.status})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Job Date"}),a.jsx("p",{className:"font-medium",children:new Date(r.jobDate).toLocaleDateString()})]}),r.driverName&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Driver"}),a.jsx("p",{className:"font-medium",children:r.driverName})]}),r.vehicleNumber&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Vehicle"}),a.jsx("p",{className:"font-medium",children:r.vehicleNumber})]})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h3",{className:"font-bold text-lg mb-3",children:"Addresses"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Pickup Address"}),a.jsx("p",{className:"font-medium",children:r.jobAddress})]}),r.dropoffAddress&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Dropoff Address"}),a.jsx("p",{className:"font-medium",children:r.dropoffAddress})]})]})]}),r.notes&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("h3",{className:"font-bold text-lg mb-3",children:"Notes"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded",children:r.notes})]})]}),s==="materials"&&a.jsx(xse,{jobId:r.id,jobStatus:r.status,onUpdate:n}),s==="staff"&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Staff Assignment"}),a.jsx("p",{className:"text-gray-600",children:"Assign packers, carpenters, drivers, and external labor to this job."})]}),a.jsx("button",{onClick:()=>c(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-medium",children:"+ Assign Staff to Job"}),a.jsx("div",{className:"mt-6 text-gray-500 text-center py-8 border-2 border-dashed rounded-lg",children:"Staff assignments will be displayed here"})]})]}),o&&a.jsx(yse,{open:o,onClose:()=>c(!1),jobId:r.id,onSuccess:()=>{c(!1),n&&n()}})]})})};function bse({isOpen:e,onClose:t,jobId:r}){const[n,s]=P.useState(null),[i,o]=P.useState([]),[c,u]=P.useState(!0),d=P.useRef(null);P.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{u(!0);try{const j=localStorage.getItem("authToken"),A=await(await fetch(`/api/moving-jobs/${r}`,{headers:{Authorization:`Bearer ${j}`}})).json();s(A);const E=await(await fetch(`/api/materials/job-materials/${r}`,{headers:{Authorization:`Bearer ${j}`}})).json();o(E)}catch(j){console.error("Failed to load data:",j)}finally{u(!1)}},p=()=>{const j=i.reduce((_,O)=>_+O.quantity,0),N=i.reduce((_,O)=>{var F;const B=(F=O.returns)==null?void 0:F[0];return _+((B==null?void 0:B.quantityUsed)||0)},0),A=i.reduce((_,O)=>{var F;const B=(F=O.returns)==null?void 0:F[0];return _+((B==null?void 0:B.quantityGood)||0)},0),k=i.reduce((_,O)=>{var F;const B=(F=O.returns)==null?void 0:F[0];return _+((B==null?void 0:B.quantityDamaged)||0)},0),E=i.reduce((_,O)=>_+O.totalCost,0);return{totalIssued:j,totalUsed:N,totalReturned:A,totalDamaged:k,totalCost:E}},v=()=>{window.print()},x=()=>{const j=p();let N=`Material SKU,Material Name,Issued Qty,Used Qty,Returned Good,Damaged,Unit Cost,Total Cost,Status
`;i.forEach(_=>{var F;const O=(F=_.returns)==null?void 0:F[0],B=O?"Returned":"Pending";N+=`${_.material.sku},${_.material.name},${_.quantity},${(O==null?void 0:O.quantityUsed)||0},${(O==null?void 0:O.quantityGood)||0},${(O==null?void 0:O.quantityDamaged)||0},${_.unitCost},${_.totalCost},${B}
`}),N+=`
Totals:,,,${j.totalIssued},${j.totalUsed},${j.totalReturned},${j.totalDamaged},,${j.totalCost}
`;const A=new Blob([N],{type:"text/csv"}),k=URL.createObjectURL(A),E=document.createElement("a");E.href=k,E.download=`Job-${n==null?void 0:n.jobCode}-Material-Report.csv`,E.click()};if(!e)return null;const w=p();return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          #printable-report, #printable-report * {
            visibility: visible;
          }
          #printable-report {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .no-print {
            display: none !important;
          }
        }
      `}),a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 no-print",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center no-print",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"📊 Job Material Report"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(FO,{className:"w-4 h-4"}),"Print"]}),a.jsxs("button",{onClick:x,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2",children:[a.jsx(Ex,{className:"w-4 h-4"}),"CSV"]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(ci,{className:"w-6 h-6"})})]})]}),a.jsx("div",{ref:d,id:"printable-report",className:"p-6",children:c?a.jsx("p",{className:"text-center py-8",children:"Loading..."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6 border-b pb-4",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Usage Report"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Job Code:"})," ",n==null?void 0:n.jobCode]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Job Title:"})," ",n==null?void 0:n.jobTitle]})]}),a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Client:"})," ",n==null?void 0:n.clientName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Date:"})," ",new Date((n==null?void 0:n.jobDate)||"").toLocaleDateString()]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",a.jsx("span",{className:`px-2 py-1 rounded text-xs ${(n==null?void 0:n.status)==="COMPLETED"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:n==null?void 0:n.status})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Issued"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.totalIssued})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Used"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:w.totalUsed})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Returned Good"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.totalReturned})]}),a.jsxs("div",{className:"bg-red-50 p-4 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Damaged"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:w.totalDamaged})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[w.totalCost.toFixed(2)," KWD"]})]})]}),a.jsxs("table",{className:"min-w-full border-collapse border",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"border px-4 py-2 text-left",children:"SKU"}),a.jsx("th",{className:"border px-4 py-2 text-left",children:"Material Name"}),a.jsx("th",{className:"border px-4 py-2 text-center",children:"Issued"}),a.jsx("th",{className:"border px-4 py-2 text-center",children:"Used"}),a.jsx("th",{className:"border px-4 py-2 text-center",children:"Returned"}),a.jsx("th",{className:"border px-4 py-2 text-center",children:"Damaged"}),a.jsx("th",{className:"border px-4 py-2 text-right",children:"Unit Cost"}),a.jsx("th",{className:"border px-4 py-2 text-right",children:"Total Cost"}),a.jsx("th",{className:"border px-4 py-2 text-center",children:"Status"})]})}),a.jsxs("tbody",{children:[i.map(j=>{var A;const N=(A=j.returns)==null?void 0:A[0];return a.jsxs("tr",{children:[a.jsx("td",{className:"border px-4 py-2",children:j.material.sku}),a.jsx("td",{className:"border px-4 py-2",children:j.material.name}),a.jsxs("td",{className:"border px-4 py-2 text-center",children:[j.quantity," ",j.material.unit]}),a.jsx("td",{className:"border px-4 py-2 text-center",children:(N==null?void 0:N.quantityUsed)||"-"}),a.jsx("td",{className:"border px-4 py-2 text-center text-green-600",children:(N==null?void 0:N.quantityGood)||"-"}),a.jsx("td",{className:"border px-4 py-2 text-center text-red-600",children:(N==null?void 0:N.quantityDamaged)||"-"}),a.jsxs("td",{className:"border px-4 py-2 text-right",children:[j.unitCost.toFixed(2)," KWD"]}),a.jsxs("td",{className:"border px-4 py-2 text-right font-bold",children:[j.totalCost.toFixed(2)," KWD"]}),a.jsx("td",{className:"border px-4 py-2 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${N?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:N?"Returned":"Pending"})})]},j.id)}),a.jsxs("tr",{className:"bg-gray-50 font-bold",children:[a.jsx("td",{colSpan:2,className:"border px-4 py-2",children:"TOTALS"}),a.jsx("td",{className:"border px-4 py-2 text-center",children:w.totalIssued}),a.jsx("td",{className:"border px-4 py-2 text-center",children:w.totalUsed}),a.jsx("td",{className:"border px-4 py-2 text-center text-green-600",children:w.totalReturned}),a.jsx("td",{className:"border px-4 py-2 text-center text-red-600",children:w.totalDamaged}),a.jsx("td",{className:"border px-4 py-2"}),a.jsxs("td",{className:"border px-4 py-2 text-right",children:[w.totalCost.toFixed(2)," KWD"]}),a.jsx("td",{className:"border px-4 py-2"})]})]})]}),i.some(j=>{var N,A;return((A=(N=j.returns)==null?void 0:N[0])==null?void 0:A.quantityDamaged)>0})&&a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-xl font-bold mb-3",children:"🔴 Damage Details"}),i.filter(j=>{var N,A;return((A=(N=j.returns)==null?void 0:N[0])==null?void 0:A.quantityDamaged)>0}).map(j=>{var A;const N=(A=j.damages)==null?void 0:A[0];return a.jsxs("div",{className:"border rounded p-4 mb-3",children:[a.jsx("p",{className:"font-bold",children:j.material.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Damaged Quantity: ",j.returns[0].quantityDamaged," ",j.material.unit]}),N&&a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-sm mt-2",children:[a.jsx("strong",{children:"Reason:"})," ",N.reason]}),N.photoUrls&&a.jsx("div",{className:"flex gap-2 mt-2",children:N.photoUrls.split(",").map((k,E)=>a.jsx("img",{src:k,alt:`Damage ${E+1}`,className:"w-20 h-20 object-cover rounded"},E))})]})]},j.id)})]}),a.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[a.jsxs("p",{children:["Generated on ",new Date().toLocaleString()]}),a.jsx("p",{children:"Warehouse Management System"})]})]})})]})})]})}const wse=({isOpen:e,onClose:t,job:r})=>{const[n,s]=P.useState([]),[i,o]=P.useState(!1),[c,u]=P.useState(!1),[d,h]=P.useState(!1);P.useEffect(()=>{e&&(r!=null&&r.id)&&p()},[e,r]);const p=async()=>{try{o(!0);const E=await fetch(`/api/job-files/${r.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(E.ok){const _=await E.json();s(_.files||[])}}catch(E){console.error("Failed to load files:",E)}finally{o(!1)}},v=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?h(!0):E.type==="dragleave"&&h(!1)},x=async E=>{E.preventDefault(),E.stopPropagation(),h(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&await j(E.dataTransfer.files)},w=async E=>{E.target.files&&E.target.files[0]&&await j(E.target.files)},j=async E=>{const _=new FormData;Array.from(E).forEach(O=>{_.append("files",O)}),_.append("jobId",r.id);try{u(!0),(await fetch("/api/job-files/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:_})).ok?await p():alert("Failed to upload files")}catch(O){console.error("Upload error:",O),alert("Failed to upload files")}finally{u(!1)}},N=async E=>{if(confirm("Delete this file?"))try{(await fetch(`/api/job-files/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).ok?await p():alert("Failed to delete file")}catch(_){console.error("Delete error:",_),alert("Failed to delete file")}},A=E=>{if(E===0)return"0 Bytes";const _=1024,O=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(E)/Math.log(_));return Math.round(E/Math.pow(_,B)*100)/100+" "+O[B]},k=E=>E.includes("image")?"🖼️":E.includes("pdf")?"📄":E.includes("word")||E.includes("document")?"📝":E.includes("excel")||E.includes("spreadsheet")?"📊":"📎";return!e||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"📁 Job Files & Documents"}),a.jsx("p",{className:"text-purple-100 text-sm",children:r.jobTitle||r.jobCode})]}),a.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",children:a.jsx(ci,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-purple-500 bg-purple-50":"border-gray-300"}`,onDragEnter:v,onDragLeave:v,onDragOver:v,onDrop:x,children:[a.jsx(use,{className:`w-12 h-12 mx-auto mb-4 ${d?"text-purple-600":"text-gray-400"}`}),a.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"Drop files here or click to browse"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports: PDF, Images, Documents, Spreadsheets (Max 10MB each)"}),a.jsxs("label",{className:"inline-block",children:[a.jsx("span",{className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 cursor-pointer",children:c?"Uploading...":"Browse Files"}),a.jsx("input",{type:"file",multiple:!0,onChange:w,className:"hidden",disabled:c,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx"})]})]})}),a.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:i?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading files..."})]}):n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Lae,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No files uploaded yet"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Upload your first document using the area above"})]}):a.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(E=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("span",{className:"text-3xl mr-4",children:k(E.fileType)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:E.fileName}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[a.jsx("span",{children:A(E.fileSize)}),a.jsx("span",{children:"•"}),a.jsx("span",{children:new Date(E.uploadedAt).toLocaleDateString()}),E.uploadedBy&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{children:["By ",E.uploadedBy]})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:E.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"View",children:a.jsx(_ae,{className:"w-5 h-5"})}),a.jsx("a",{href:E.fileUrl,download:E.fileName,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Download",children:a.jsx(Ex,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>N(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:a.jsx(kx,{className:"w-5 h-5"})})]})]},E.id))})}),a.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[n.length," file",n.length!==1?"s":""," uploaded"]}),a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Close"})]})]})})},Nse=()=>{const[e,t]=P.useState("all"),[r,n]=P.useState([]),[s,i]=P.useState(!0),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[h,p]=P.useState(!1),[v,x]=P.useState(!1),[w,j]=P.useState(!1),[N,A]=P.useState(!1),[k,E]=P.useState(null);P.useEffect(()=>{_()},[e]);const _=async()=>{try{i(!0);const B={};if(e!=="all"){const U={scheduled:"SCHEDULED,PLANNED",inprogress:"IN_PROGRESS,DISPATCHED",completed:"COMPLETED,CLOSED"};B.status=U[e]||e.toUpperCase()}const F=await kh.getAll(B);n(F.jobs||[])}catch(B){console.error("Load jobs error:",B)}finally{i(!1)}},O=B=>{switch(B){case"Scheduled":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-green-100 text-green-800";case"Completed":return"bg-gray-100 text-gray-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Moving Jobs"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Schedule and manage moving operations"})]}),a.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[a.jsx(Tu,{className:"h-5 w-5 mr-2"}),"New Job"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Jobs"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.length})]}),a.jsx(Ic,{className:"h-10 w-10 text-primary-500"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"In Progress"}),a.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:r.filter(B=>B.status==="IN_PROGRESS").length})]})})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Scheduled"}),a.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:r.filter(B=>B.status==="SCHEDULED"||B.status==="PLANNED").length})]})})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completed"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 mt-2",children:r.filter(B=>B.status==="COMPLETED").length})]})})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Jobs"}),a.jsx("button",{onClick:()=>t("scheduled"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="scheduled"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Scheduled"}),a.jsx("button",{onClick:()=>t("inprogress"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="inprogress"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Progress"}),a.jsx("button",{onClick:()=>t("completed"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="completed"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Completed"})]})}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading jobs..."})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(B=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-lg transition-all",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4 rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold",children:B.jobTitle||B.title||"Untitled Job"}),a.jsx("p",{className:"text-blue-100 text-sm",children:B.jobCode||"No Code"})]}),a.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${O(B.status)}`,children:B.status})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center text-sm mb-2",children:[a.jsx(r0,{className:"h-5 w-5 mr-2 text-blue-600"}),a.jsx("span",{className:"font-bold text-gray-700",children:"Client Details"})]}),a.jsxs("div",{className:"ml-7 space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:B.clientName}),a.jsx("p",{className:"text-sm text-gray-600",children:B.clientPhone}),B.clientEmail&&a.jsx("p",{className:"text-sm text-gray-600",children:B.clientEmail})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start text-sm",children:[a.jsx(K7,{className:"h-5 w-5 mr-2 text-green-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-700",children:"From:"}),a.jsx("p",{className:"text-gray-600 text-xs mt-1",children:B.jobAddress||B.fromAddress||"Not specified"})]})]}),(B.dropoffAddress||B.toAddress)&&a.jsx("div",{className:"flex items-start text-sm ml-7",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-gray-700",children:"To:"}),a.jsx("p",{className:"text-gray-600 text-xs mt-1",children:B.dropoffAddress||B.toAddress})]})})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm bg-blue-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(YB,{className:"h-5 w-5 mr-2 text-blue-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:B.jobDate?new Date(B.jobDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No Date"})]}),a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:B.jobType||"LOCAL"})]}),B.assignments&&B.assignments.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"ASSIGNED TEAM"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:B.assignments.map(F=>a.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["👤 ",F.user.name]},F.id))})]}),B.materialIssues&&B.materialIssues.length>0&&a.jsx("div",{className:"bg-orange-50 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs font-medium text-orange-700 mb-1",children:["📦 Materials: ",B.materialIssues.length," items issued"]})}),B.notes&&a.jsxs("div",{className:"text-xs text-gray-600 bg-yellow-50 p-2 rounded border-l-4 border-yellow-400",children:[a.jsx("span",{className:"font-medium",children:"Note:"})," ",B.notes.substring(0,50),B.notes.length>50?"...":""]})]}),a.jsxs("div",{className:"px-6 pb-6 grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>{E(B),p(!0)},className:"px-4 py-2 bg-green-50 text-green-600 rounded-md hover:bg-green-100 font-medium text-sm flex items-center justify-center gap-2",children:[a.jsx(j0,{className:"h-4 w-4"}),"View"]}),a.jsxs("button",{onClick:()=>{E(B),d(!0)},className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 font-medium text-sm flex items-center justify-center gap-2",children:[a.jsx(jf,{className:"h-4 w-4"}),"Edit"]}),a.jsxs("button",{onClick:()=>{E(B),x(!0)},className:"px-4 py-2 bg-purple-50 text-purple-600 rounded-md hover:bg-purple-100 font-medium text-sm flex items-center justify-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4"}),"Report"]}),a.jsx("button",{onClick:()=>{E(B),A(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-md hover:bg-indigo-100 font-medium text-sm flex items-center justify-center gap-2",children:"📁 Files"}),B.status!=="COMPLETED"&&a.jsx("button",{onClick:()=>{E(B),j(!0)},className:"px-4 py-2 bg-orange-50 text-orange-600 rounded-md hover:bg-orange-100 font-medium text-sm flex items-center justify-center gap-2",children:"✅ Complete Job"}),a.jsxs("button",{onClick:async()=>{if(confirm(`Delete job "${B.title||B.jobTitle}"?`))try{await kh.delete(B.id),_()}catch(F){console.error("Delete error:",F),alert("Failed to delete job")}},className:"px-4 py-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 font-medium text-sm flex items-center justify-center gap-2",children:[a.jsx(Ou,{className:"h-4 w-4"}),"Delete"]})]})]},B.id))}),a.jsx(dae,{isOpen:o,onClose:()=>c(!1),onSuccess:_}),a.jsx(gse,{isOpen:u,onClose:()=>d(!1),job:k,onSuccess:_}),a.jsx(vse,{isOpen:h,onClose:()=>p(!1),job:k,onUpdate:_}),a.jsx(bse,{isOpen:v,onClose:()=>x(!1),jobId:(k==null?void 0:k.id)||""}),a.jsx(UO,{isOpen:w,onClose:()=>j(!1),jobId:(k==null?void 0:k.id)||"",onSuccess:async()=>{try{await kh.update(k.id,{status:"COMPLETED"}),await _()}catch(B){throw console.error("Failed to update job status:",B),B}}}),a.jsx(wse,{isOpen:N,onClose:()=>A(!1),job:k})]})},jse=[{name:"Indigo Purple",primary:"#4F46E5",secondary:"#7C3AED",accent:"#10B981"},{name:"Blue Cyan",primary:"#0EA5E9",secondary:"#06B6D4",accent:"#8B5CF6"},{name:"Green",primary:"#10B981",secondary:"#059669",accent:"#F59E0B"},{name:"Amber Red",primary:"#F59E0B",secondary:"#EF4444",accent:"#3B82F6"}],Ase=()=>{const[e,t]=P.useState({name:"",email:"",phone:"",address:"",website:"",logo:null,primaryColor:"#4F46E5",secondaryColor:"#7C3AED",accentColor:"#10B981",showCompanyName:!0,logoSize:"medium"}),[r,n]=P.useState(!1),[s,i]=P.useState(!0),[o,c]=P.useState(null),[u,d]=P.useState(null),[h,p]=P.useState(null);P.useEffect(()=>{(async()=>{try{const k=(await fC.getInfo()).company;t({name:k.name||"",email:k.email||"",phone:k.phone||"",address:k.address||"",website:k.website||"",logo:k.logo||null,primaryColor:k.primaryColor||"#4F46E5",secondaryColor:k.secondaryColor||"#7C3AED",accentColor:k.accentColor||"#10B981",showCompanyName:k.showCompanyName!==!1,logoSize:k.logoSize||"medium"}),k.logo&&p(k.logo)}catch(A){console.error("Failed to load company data:",A),c({type:"error",text:"Failed to load company information"})}finally{i(!1)}})()},[]);const v=N=>{var k;const A=(k=N.target.files)==null?void 0:k[0];if(A){if(A.size>2*1024*1024){c({type:"error",text:"Logo file size must be less than 2MB"});return}d(A);const E=new FileReader;E.onloadend=()=>{p(E.result)},E.readAsDataURL(A)}},x=async()=>{if(!u)return null;try{const N=new FormData;N.append("logo",u);const A=localStorage.getItem("authToken"),k=await fetch("/api/upload/logo",{method:"POST",headers:{Authorization:`Bearer ${A}`},body:N});if(k.ok)return(await k.json()).logoUrl}catch(N){console.error("Failed to upload logo:",N)}return null},w=async()=>{n(!0),c(null);try{let N=e.logo;if(u){const A=await x();A&&(N=A)}await fC.updateInfo({name:e.name,email:e.email,phone:e.phone,website:e.website,address:e.address,logo:N,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor,showCompanyName:e.showCompanyName,logoSize:e.logoSize}),c({type:"success",text:"Company settings saved successfully!"}),d(null),setTimeout(()=>{window.location.reload()},1500)}catch(N){c({type:"error",text:N.message||"Failed to save company information"})}finally{n(!1)}},j=N=>{t(A=>({...A,primaryColor:N.primary,secondaryColor:N.secondary,accentColor:N.accent}))};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading company information..."})]})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Company & Branding"}),a.jsx("p",{className:"text-gray-600",children:"Manage your company details, logo, and brand colors"})]}),a.jsx("button",{onClick:w,disabled:r,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:r?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Sa,{className:"h-5 w-5"}),a.jsx("span",{children:"Save Changes"})]})})]}),o&&a.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${o.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[o.type==="success"?a.jsx(Sa,{className:"h-6 w-6"}):a.jsx(ho,{className:"h-6 w-6"}),a.jsx("span",{className:"font-medium",children:o.text})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(_v,{className:"h-6 w-6 text-gray-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Company Logo"})]}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"relative",children:[h?a.jsx("img",{src:h,alt:"Company Logo",className:"w-24 h-24 rounded-lg object-cover border-2 border-gray-200"}):a.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:a.jsx(pp,{className:"h-8 w-8 text-gray-400"})}),a.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors shadow-lg",children:[a.jsx(_v,{className:"h-4 w-4"}),a.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Upload Company Logo"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PNG, JPG, SVG up to 2MB. Recommended: 200x200px"}),u&&a.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["✓ New logo selected: ",u.name]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(pp,{className:"h-6 w-6 text-gray-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:e.name,onChange:N=>t({...e,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Demo Warehouse Co."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[a.jsx(b1,{className:"h-4 w-4"}),a.jsx("span",{children:"Email Address"})]}),a.jsx("input",{type:"email",value:e.email,onChange:N=>t({...e,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"contact@company.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[a.jsx(TF,{className:"h-4 w-4"}),a.jsx("span",{children:"Phone Number"})]}),a.jsx("input",{type:"tel",value:e.phone,onChange:N=>t({...e,phone:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"+965 1234 5678"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[a.jsx(bF,{className:"h-4 w-4"}),a.jsx("span",{children:"Website"})]}),a.jsx("input",{type:"url",value:e.website,onChange:N=>t({...e,website:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://company.com"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[a.jsx(K7,{className:"h-4 w-4"}),a.jsx("span",{children:"Address"})]}),a.jsx("textarea",{value:e.address,onChange:N=>t({...e,address:N.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Kuwait City, Kuwait"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(N1,{className:"h-6 w-6 text-gray-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Brand Colors"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Presets"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:jse.map(N=>a.jsxs("button",{onClick:()=>j(N),className:"p-3 border-2 border-gray-200 rounded-lg hover:border-primary-500 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:N.primary}}),a.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:N.secondary}}),a.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:N.accent}})]}),a.jsx("p",{className:"text-sm font-medium text-gray-700",children:N.name})]},N.name))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:e.primaryColor,onChange:N=>t({...e,primaryColor:N.target.value}),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),a.jsx("input",{type:"text",value:e.primaryColor,onChange:N=>t({...e,primaryColor:N.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"#4F46E5"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:e.secondaryColor,onChange:N=>t({...e,secondaryColor:N.target.value}),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),a.jsx("input",{type:"text",value:e.secondaryColor,onChange:N=>t({...e,secondaryColor:N.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"#7C3AED"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accent Color"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:e.accentColor,onChange:N=>t({...e,accentColor:N.target.value}),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),a.jsx("input",{type:"text",value:e.accentColor,onChange:N=>t({...e,accentColor:N.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"#10B981"})]})]})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:"Show Company Name on Login"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Display company name below logo on login page"})]}),a.jsx("button",{onClick:()=>t({...e,showCompanyName:!e.showCompanyName}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.showCompanyName?"bg-primary-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.showCompanyName?"translate-x-6":"translate-x-1"}`})})]}),a.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo Size on Login Page"}),a.jsxs("select",{value:e.logoSize,onChange:N=>t({...e,logoSize:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"small",children:"Small (48px)"}),a.jsx("option",{value:"medium",children:"Medium (80px)"}),a.jsx("option",{value:"large",children:"Large (128px)"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Page Preview"}),a.jsx("div",{className:"relative h-64 rounded-lg overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.primaryColor}15 0%, ${e.secondaryColor}15 100%)`},children:a.jsxs("div",{className:"text-center",children:[h?a.jsx("img",{src:h,alt:"Logo",className:"h-16 w-16 mx-auto mb-4 rounded-lg object-cover"}):a.jsx("div",{className:"h-16 w-16 mx-auto mb-4 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.primaryColor} 0%, ${e.secondaryColor} 100%)`},children:a.jsx(pp,{className:"h-8 w-8 text-white"})}),e.showCompanyName&&a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.name||"Company Name"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Sign in to access your account"})]})})]})]})},Cse={ADMIN:"bg-red-100 text-red-800",MANAGER:"bg-blue-100 text-blue-800",WORKER:"bg-green-100 text-green-800"},Sse={ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800"},Ese=()=>{const[e,t]=P.useState([]),[r,n]=P.useState(!0),[s,i]=P.useState(""),[o,c]=P.useState("ALL"),[u,d]=P.useState("ALL"),[h,p]=P.useState(!1),[v,x]=P.useState(null);P.useEffect(()=>{w()},[]);const w=async()=>{try{const k=(await ene.getAll()).users.map(E=>({id:E.id,name:E.name,email:E.email,phone:E.phone||"",role:E.role,status:E.isActive?"ACTIVE":"INACTIVE",skills:E.skills?typeof E.skills=="string"?JSON.parse(E.skills):E.skills:[],joinedAt:E.createdAt?new Date(E.createdAt).toLocaleDateString():"",lastActive:new Date(E.updatedAt).toLocaleDateString(),avatar:E.avatar||void 0}));t(k)}catch(A){console.error("Failed to load users:",A)}finally{n(!1)}},j=e.filter(A=>{const k=A.name.toLowerCase().includes(s.toLowerCase())||A.email.toLowerCase().includes(s.toLowerCase()),E=o==="ALL"||A.role===o,_=u==="ALL"||A.status===u;return k&&E&&_}),N=A=>A.split(" ").map(k=>k[0]).join("").toUpperCase();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage team members, roles, and permissions"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[a.jsx(Aj,{className:"h-5 w-5"}),a.jsx("span",{children:"Add User"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(r0,{className:"h-8 w-8 text-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Nj,{className:"h-8 w-8 text-green-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(A=>A.status==="ACTIVE").length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(tg,{className:"h-8 w-8 text-red-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(A=>A.role==="ADMIN").length})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Tv,{className:"h-8 w-8 text-yellow-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Inactive"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(A=>A.status==="INACTIVE").length})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(w1,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:s,onChange:A=>i(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(t0,{className:"h-5 w-5 text-gray-400"}),a.jsxs("select",{value:o,onChange:A=>c(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"ALL",children:"All Roles"}),a.jsx("option",{value:"ADMIN",children:"Admin"}),a.jsx("option",{value:"MANAGER",children:"Manager"}),a.jsx("option",{value:"WORKER",children:"Worker"})]})]}),a.jsx("div",{children:a.jsxs("select",{value:u,onChange:A=>d(A.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"ALL",children:"All Status"}),a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"INACTIVE",children:"Inactive"})]})})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skills"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(A=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:A.avatar?a.jsx("img",{className:"h-10 w-10 rounded-full",src:A.avatar,alt:A.name}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-primary-600",children:N(A.name)})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),a.jsx("div",{className:"text-sm text-gray-500",children:A.email}),a.jsx("div",{className:"text-sm text-gray-500",children:A.phone})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Cse[A.role]}`,children:A.role}),a.jsx("br",{}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Sse[A.status]}`,children:A.status})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.skills.slice(0,2).map((k,E)=>a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:k},E)),A.skills.length>2&&a.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:["+",A.skills.length-2," more"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.lastActive}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>x(A),className:"text-primary-600 hover:text-primary-900",children:a.jsx(j0,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:a.jsx(jf,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-red-600 hover:text-red-900",children:a.jsx(Ou,{className:"h-4 w-4"})})]})})]},A.id))})]})})}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Permissions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(tg,{className:"h-5 w-5 text-red-600 mr-2"}),a.jsx("h4",{className:"font-medium text-red-900",children:"Administrator"})]}),a.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[a.jsx("li",{children:"• Full system access"}),a.jsx("li",{children:"• User management"}),a.jsx("li",{children:"• Company settings"}),a.jsx("li",{children:"• Financial reports"}),a.jsx("li",{children:"• System configuration"})]})]}),a.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(r0,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("h4",{className:"font-medium text-blue-900",children:"Manager"})]}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Job scheduling"}),a.jsx("li",{children:"• Team management"}),a.jsx("li",{children:"• Inventory oversight"}),a.jsx("li",{children:"• Performance reports"}),a.jsx("li",{children:"• Expense approval"})]})]}),a.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Nj,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsx("h4",{className:"font-medium text-green-900",children:"Worker"})]}),a.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[a.jsx("li",{children:"• QR scanning operations"}),a.jsx("li",{children:"• Job execution"}),a.jsx("li",{children:"• Inventory updates"}),a.jsx("li",{children:"• Photo uploads"}),a.jsx("li",{children:"• Basic reporting"})]})]})]})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New User"}),a.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("form",{onSubmit:async A=>{A.preventDefault();const k=new FormData(A.currentTarget),E={name:k.get("name"),email:k.get("email"),password:k.get("password"),role:k.get("role")};try{const _=localStorage.getItem("authToken"),O=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(E)}),B=await O.json();O.ok?(alert("User created successfully!"),p(!1),w(),A.currentTarget.reset()):alert(B.error||"Failed to create user")}catch(_){alert(_.message||"Failed to create user")}},children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter full name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"user@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),a.jsx("input",{type:"password",name:"password",required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Minimum 6 characters"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),a.jsxs("select",{name:"role",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a role"}),a.jsx("option",{value:"ADMIN",children:"Admin - Full system access"}),a.jsx("option",{value:"MANAGER",children:"Manager - Team & operations management"}),a.jsx("option",{value:"WORKER",children:"Worker - Daily operations"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[a.jsx(Aj,{className:"h-5 w-5"}),a.jsx("span",{children:"Create User"})]})]})]})]})})]})},kse=()=>{const[e,t]=P.useState({templateType:"MODERN",primaryColor:"#2563eb",secondaryColor:"#64748b",showLogo:!0,showCompanyAddress:!0,showClientDetails:!0,footerText:"Thank you for your business!",termsConditions:"",invoicePrefix:"INV",invoiceStartNumber:1001}),[r,n]=P.useState(!0),[s,i]=P.useState(!1),[o,c]=P.useState(null);P.useEffect(()=>{u()},[]);const u=async()=>{try{const v=(await hC.get()).settings;t({templateType:"MODERN",primaryColor:v.primaryColor||"#2563eb",secondaryColor:v.accentColor||"#64748b",showLogo:v.showLogo!==void 0?v.showLogo:!0,showCompanyAddress:!0,showClientDetails:!0,footerText:v.footerText||"Thank you for your business!",termsConditions:v.terms||"",invoicePrefix:v.prefix||"INV",invoiceStartNumber:v.nextNumber||1001})}catch(p){console.error("Failed to load invoice settings:",p),c({type:"error",text:"Failed to load invoice settings"})}finally{n(!1)}},d=async()=>{i(!0),c(null);try{await hC.update({prefix:e.invoicePrefix,nextNumber:e.invoiceStartNumber,primaryColor:e.primaryColor,accentColor:e.secondaryColor,showLogo:e.showLogo,footerText:e.footerText,terms:e.termsConditions}),c({type:"success",text:"Invoice settings saved successfully!"}),setTimeout(()=>c(null),3e3)}catch(p){c({type:"error",text:p.message||"Failed to save invoice settings"})}finally{i(!1)}};if(r)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading invoice settings..."})]})});const h=[{id:"MODERN",name:"Modern",preview:"📄"},{id:"CLASSIC",name:"Classic",preview:"📋"},{id:"MINIMAL",name:"Minimal",preview:"📝"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(N1,{className:"h-8 w-8 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Advanced Template Configuration"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Access the full template customization system with 70+ configuration options for invoices and release notes"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 mb-4",children:[a.jsx("li",{children:"• Company branding & logo upload"}),a.jsx("li",{children:"• Invoice & release note layouts"}),a.jsx("li",{children:"• Custom colors, fonts & styling"}),a.jsx("li",{children:"• Print settings & localization"})]}),a.jsxs(ph,{to:"/settings/templates",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:["Open Template Settings",a.jsx(UB,{className:"h-4 w-4"})]})]})]})})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice & Templates"}),a.jsx("p",{className:"text-gray-600",children:"Customize invoice appearance and branding"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[o&&a.jsx("div",{className:`text-sm ${o.type==="success"?"text-green-600":"text-red-600"}`,children:o.text}),a.jsx("button",{onClick:d,disabled:s,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Saving...":"Save Changes"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Template"}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:h.map(p=>a.jsxs("div",{onClick:()=>t(v=>({...v,templateType:p.id})),className:`border-2 rounded-lg p-6 cursor-pointer transition-all ${e.templateType===p.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300"}`,children:[a.jsx("div",{className:"text-4xl text-center mb-2",children:p.preview}),a.jsx("div",{className:"text-center font-medium",children:p.name}),e.templateType===p.id&&a.jsx("div",{className:"text-center mt-2",children:a.jsx(Sa,{className:"h-5 w-5 text-primary-600 mx-auto"})})]},p.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Brand Colors"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:e.primaryColor,onChange:p=>t(v=>({...v,primaryColor:p.target.value})),className:"h-10 w-20 rounded border border-gray-300"}),a.jsx("input",{type:"text",value:e.primaryColor,onChange:p=>t(v=>({...v,primaryColor:p.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:e.secondaryColor,onChange:p=>t(v=>({...v,secondaryColor:p.target.value})),className:"h-10 w-20 rounded border border-gray-300"}),a.jsx("input",{type:"text",value:e.secondaryColor,onChange:p=>t(v=>({...v,secondaryColor:p.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Prefix"}),a.jsx("input",{type:"text",value:e.invoicePrefix,onChange:p=>t(v=>({...v,invoicePrefix:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Number"}),a.jsx("input",{type:"number",value:e.invoiceStartNumber,onChange:p=>t(v=>({...v,invoiceStartNumber:parseInt(p.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsx("div",{className:"mt-6 space-y-4",children:[{key:"showLogo",label:"Show Company Logo"},{key:"showCompanyAddress",label:"Show Company Address"},{key:"showClientDetails",label:"Show Client Details"}].map(p=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e[p.key],onChange:v=>t(x=>({...x,[p.key]:v.target.checked})),className:"h-4 w-4 text-primary-600 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:p.label})]},p.key))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Footer & Terms"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),a.jsx("input",{type:"text",value:e.footerText,onChange:p=>t(v=>({...v,footerText:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms & Conditions"}),a.jsx("textarea",{value:e.termsConditions,onChange:p=>t(v=>({...v,termsConditions:p.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter your terms and conditions..."})]})]})]}),a.jsx("button",{className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700",children:"Save Invoice Settings"})]})},Pse=()=>{const[e,t]=P.useState("general"),[r,n]=P.useState(null),[s,i]=P.useState([]),[o,c]=P.useState(!0),[u,d]=P.useState(!1),[h,p]=P.useState(null);P.useEffect(()=>{v(),x()},[]);const v=async()=>{try{const N=await Uo.getSettings();n(N)}catch(N){console.error("Failed to load billing settings:",N),p({type:"error",text:"Failed to load billing settings"})}finally{c(!1)}},x=async()=>{try{const N=await Uo.getChargeTypes();i(N)}catch(N){console.error("Failed to load charge types:",N)}},w=async()=>{if(r){if(!r.currency||r.currency.trim()===""){p({type:"error",text:"Currency is required"});return}if(!r.invoicePrefix||r.invoicePrefix.trim()===""){p({type:"error",text:"Invoice prefix is required"});return}if(r.taxRate!==void 0&&(r.taxRate<0||r.taxRate>100)){p({type:"error",text:"Tax rate must be between 0 and 100"});return}if(r.invoiceDueDays!==void 0&&r.invoiceDueDays<0){p({type:"error",text:"Invoice due days must be positive"});return}if(r.gracePeriodDays!==void 0&&r.gracePeriodDays<0){p({type:"error",text:"Grace period days must be positive"});return}if(r.iban&&r.iban.trim()!==""&&!/^[A-Z]{2}[0-9]{2}[A-Z0-9]{1,30}$/.test(r.iban.replace(/\s/g,""))){p({type:"error",text:"Invalid IBAN format"});return}d(!0);try{await Uo.updateSettings(r),p({type:"success",text:"Billing settings updated successfully!"}),setTimeout(()=>p(null),3e3)}catch(N){console.error("Failed to save settings:",N),p({type:"error",text:N.message||"Failed to save billing settings"})}finally{d(!1)}}},j=[{id:"general",name:"General Settings",icon:Lo},{id:"invoice",name:"Invoice Design",icon:N1},{id:"bank",name:"Bank Details",icon:Qh},{id:"terms",name:"Terms & Conditions",icon:_s},{id:"charges",name:"Charge Types",icon:Lo}];return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing Settings"}),a.jsx("p",{className:"text-gray-600",children:"Configure storage charges, invoice customization, and payment details"})]}),h&&a.jsx("div",{className:`p-4 rounded-lg ${h.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:a.jsxs("div",{className:"flex items-center",children:[h.type==="success"?a.jsx(Sa,{className:"h-5 w-5 mr-2"}):a.jsx(ho,{className:"h-5 w-5 mr-2"}),h.text]})}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:j.map(N=>{const A=N.icon;return a.jsxs("button",{onClick:()=>t(N.id),className:`
                  py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                  ${e===N.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[a.jsx(A,{className:"h-5 w-5"}),N.name]},N.id)})})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"General Billing Settings"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),a.jsx("input",{type:"text",value:r.currency,onChange:N=>n({...r,currency:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"KWD"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Prefix"}),a.jsx("input",{type:"text",value:r.invoicePrefix,onChange:N=>n({...r,invoicePrefix:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"INV"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:r.taxRate||"",onChange:N=>n({...r,taxRate:parseFloat(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"5.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Due Days"}),a.jsx("input",{type:"number",value:r.invoiceDueDays||"",onChange:N=>n({...r,invoiceDueDays:parseInt(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grace Period (Days)"}),a.jsx("input",{type:"number",value:r.gracePeriodDays||"",onChange:N=>n({...r,gracePeriodDays:parseInt(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"3"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Days before storage charges apply"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Storage Charge"}),a.jsx("input",{type:"number",step:"0.01",value:r.minimumStorageCharge||"",onChange:N=>n({...r,minimumStorageCharge:parseFloat(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"10.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate Type"}),a.jsxs("select",{value:r.storageRateType,onChange:N=>n({...r,storageRateType:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"PER_BOX",children:"Per Box"}),a.jsx("option",{value:"PER_CUBIC_M",children:"Per Cubic Meter"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate Per Box"}),a.jsx("input",{type:"number",step:"0.001",value:r.storageRatePerBox||"",onChange:N=>n({...r,storageRatePerBox:parseFloat(N.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.500"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Rate per box per day"})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:w,disabled:u,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:u?"Saving...":"Save Settings"})})]}),e==="invoice"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Design & Layout"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),a.jsx("input",{type:"text",value:r.logoUrl||"",onChange:N=>n({...r,logoUrl:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://example.com/logo.png"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo Position"}),a.jsxs("select",{value:r.logoPosition,onChange:N=>n({...r,logoPosition:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"LEFT",children:"Left"}),a.jsx("option",{value:"CENTER",children:"Center"}),a.jsx("option",{value:"RIGHT",children:"Right"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:r.showCompanyStamp,onChange:N=>n({...r,showCompanyStamp:N.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{children:"Show Company Stamp"})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:r.primaryColor||"#1E40AF",onChange:N=>n({...r,primaryColor:N.target.value}),className:"h-10 w-20 rounded border border-gray-300"}),a.jsx("input",{type:"text",value:r.primaryColor||"",onChange:N=>n({...r,primaryColor:N.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"#1E40AF"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:r.secondaryColor||"#64748B",onChange:N=>n({...r,secondaryColor:N.target.value}),className:"h-10 w-20 rounded border border-gray-300"}),a.jsx("input",{type:"text",value:r.secondaryColor||"",onChange:N=>n({...r,secondaryColor:N.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"#64748B"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Registration No."}),a.jsx("input",{type:"text",value:r.taxRegistrationNo||"",onChange:N=>n({...r,taxRegistrationNo:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"123456789"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Registration No."}),a.jsx("input",{type:"text",value:r.companyRegistrationNo||"",onChange:N=>n({...r,companyRegistrationNo:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"CR-123456"})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:w,disabled:u,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:u?"Saving...":"Save Settings"})})]}),e==="bank"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bank Account Details"}),a.jsx("p",{className:"text-sm text-gray-600",children:"These details will be shown on invoices for customer payments"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),a.jsx("input",{type:"text",value:r.bankName||"",onChange:N=>n({...r,bankName:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"National Bank of Kuwait"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Name"}),a.jsx("input",{type:"text",value:r.branchName||"",onChange:N=>n({...r,branchName:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Salmiya Branch"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),a.jsx("input",{type:"text",value:r.accountName||"",onChange:N=>n({...r,accountName:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Your Company Name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),a.jsx("input",{type:"text",value:r.accountNumber||"",onChange:N=>n({...r,accountNumber:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"1234567890"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN"}),a.jsx("input",{type:"text",value:r.iban||"",onChange:N=>n({...r,iban:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"KW81CBKU0000000000001234560101"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SWIFT Code"}),a.jsx("input",{type:"text",value:r.swiftCode||"",onChange:N=>n({...r,swiftCode:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"CBKUKWKW"})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:w,disabled:u,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:u?"Saving...":"Save Settings"})})]}),e==="terms"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Terms & Conditions"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Customize the text shown on your invoices"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Instructions"}),a.jsx("textarea",{value:r.paymentInstructions||"",onChange:N=>n({...r,paymentInstructions:N.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Please make payment within 10 days of invoice date..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms and Conditions"}),a.jsx("textarea",{value:r.termsAndConditions||"",onChange:N=>n({...r,termsAndConditions:N.target.value}),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:`1. Payment is due within the specified period...
2. Late payments may incur additional charges...
3. All charges are in KWD unless otherwise stated...`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),a.jsx("input",{type:"text",value:r.footerText||"",onChange:N=>n({...r,footerText:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Thank you for your business"})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:w,disabled:u,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:u?"Saving...":"Save Settings"})})]}),e==="charges"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Charge Types"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manage custom charges for storage and release"})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[a.jsx(Tu,{className:"h-5 w-5"}),"Add Charge Type"]})]}),a.jsx("div",{className:"space-y-3",children:s.map(N=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-primary-300",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${N.category==="STORAGE"?"bg-blue-100 text-blue-700":N.category==="RELEASE"?"bg-green-100 text-green-700":N.category==="SERVICE"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:N.category}),N.isActive?a.jsx(Sa,{className:"h-5 w-5 text-green-500"}):a.jsx(ho,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.description}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[a.jsxs("span",{className:"text-gray-700",children:[a.jsxs("strong",{children:[N.rate.toFixed(3)," ",r.currency]})," (",N.calculationType.replace("_"," ").toLowerCase(),")"]}),N.minCharge&&a.jsxs("span",{className:"text-gray-500",children:["Min: ",N.minCharge," ",r.currency]}),N.maxCharge&&a.jsxs("span",{className:"text-gray-500",children:["Max: ",N.maxCharge," ",r.currency]}),a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${N.isTaxable?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:N.isTaxable?"Taxable":"Non-taxable"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:a.jsx(jf,{className:"h-5 w-5"})}),a.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(Ou,{className:"h-5 w-5"})})]})]},N.id))}),s.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No charge types configured yet"}),a.jsx("p",{className:"text-sm",children:"Add your first charge type to get started"})]})]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Failed to load billing settings"})})},Ise=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Integrations"}),a.jsx("p",{className:"text-gray-600",children:"Connect third-party services and APIs"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(G7,{className:"h-6 w-6 text-green-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"WhatsApp Business API"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Send job updates and notifications via WhatsApp"})]})]}),a.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Configure"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),a.jsx("input",{type:"password",placeholder:"Enter WhatsApp API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",placeholder:"+965 XXXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(b1,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Notifications"}),a.jsx("p",{className:"text-sm text-gray-500",children:"SMTP configuration for email alerts"})]})]}),a.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Connected"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(eF,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SMS Gateway"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Send SMS notifications to customers"})]})]}),a.jsx("button",{className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Connect"})]})})]}),SC={STORAGE:"bg-blue-100 text-blue-800",MATERIALS:"bg-green-100 text-green-800",EQUIPMENT:"bg-purple-100 text-purple-800"},Tse={ACTIVE:"bg-green-100 text-green-800",MAINTENANCE:"bg-yellow-100 text-yellow-800",INACTIVE:"bg-red-100 text-red-800"},_se=()=>{const[e,t]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState(!0),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[h,p]=P.useState(null),[v,x]=P.useState({code:"",location:"",rackType:"STORAGE",capacityTotal:100}),[w,j]=P.useState({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"});P.useEffect(()=>{N()},[]);const N=async()=>{try{i(!0);const[G,H]=await Promise.all([Fo.getAll(),qm.getAll()]),ue=G.racks.map(Ee=>({id:Ee.id,code:Ee.code,location:Ee.location||"",type:Ee.rackType,capacity:Ee.capacityTotal,currentLoad:Ee.capacityUsed,qrCode:Ee.qrCode,status:Ee.status})),ye=H.customFields||H,we=(Array.isArray(ye)?ye:[]).map(Ee=>({id:Ee.id,name:Ee.fieldName,type:Ee.fieldType,options:Ee.fieldOptions||void 0,required:Ee.isRequired,section:Ee.section,order:1}));t(ue),n(we)}catch(G){console.error("Failed to load data:",G),alert("Failed to load racks and custom fields")}finally{i(!1)}},A=G=>Math.round(G.currentLoad/G.capacity*100),k=G=>G>=90?"bg-red-500":G>=70?"bg-yellow-500":"bg-green-500",E=async()=>{try{if(!v.code||!v.location){alert("Please fill in all required fields");return}const G=await Fo.create(v),H={id:G.rack.id,code:G.rack.code,location:G.rack.location||"",type:G.rack.rackType,capacity:G.rack.capacityTotal,currentLoad:G.rack.capacityUsed,qrCode:G.rack.qrCode,status:G.rack.status};t([...e,H]),x({code:"",location:"",rackType:"STORAGE",capacityTotal:100}),c(!1)}catch(G){console.error("Failed to create rack:",G),alert(G.message||"Failed to create rack")}},_=async()=>{try{if(!w.fieldName){alert("Please provide a field name");return}const G={...w,fieldOptions:w.fieldType==="DROPDOWN"?w.fieldOptions.filter(ue=>ue.trim()):null};console.log("Creating field with data:",G);const H=await qm.create(G);console.log("API Response:",H),await N(),j({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}),d(!1),alert("Custom field added successfully!")}catch(G){console.error("Failed to create custom field:",G),alert(G.message||"Failed to create custom field")}},O=async G=>{if(confirm("Are you sure you want to delete this rack?"))try{await Fo.delete(G),t(e.filter(H=>H.id!==G))}catch(H){console.error("Failed to delete rack:",H),alert(H.message||"Failed to delete rack")}},B=async G=>{if(confirm("Are you sure you want to delete this custom field?"))try{await qm.delete(G),n(r.filter(H=>H.id!==G))}catch(H){console.error("Failed to delete custom field:",H),alert(H.message||"Failed to delete custom field")}},F=G=>{p(G),j({fieldName:G.name,fieldType:G.type,fieldOptions:G.options||[""],isRequired:G.required,section:G.section}),d(!0)},U=async()=>{if(h)try{if(!w.fieldName){alert("Please provide a field name");return}const G={fieldName:w.fieldName,fieldType:w.fieldType,fieldOptions:w.fieldType==="DROPDOWN"?w.fieldOptions.filter(ue=>ue.trim()):null,isRequired:w.isRequired,section:w.section},H=await qm.update(h.id,G);console.log("Update response:",H),await N(),j({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}),p(null),d(!1),alert("Custom field updated successfully!")}catch(G){console.error("Failed to update custom field:",G),alert(G.message||"Failed to update custom field")}},L=()=>{p(null),j({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}),d(!1)},K=G=>{const H={priority:{fieldName:"Priority Level",fieldType:"DROPDOWN",fieldOptions:["Low","Medium","High","Urgent"],isRequired:!1,section:"SHIPMENT"},insurance:{fieldName:"Insurance Value",fieldType:"NUMBER",fieldOptions:[""],isRequired:!0,section:"SHIPMENT"},customerType:{fieldName:"Customer Type",fieldType:"DROPDOWN",fieldOptions:["Individual","Corporate","Government"],isRequired:!1,section:"JOB"},deliveryInstructions:{fieldName:"Delivery Instructions",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"},fragile:{fieldName:"Fragile Item",fieldType:"CHECKBOX",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}};H[G]&&j(H[G])},z=()=>{j(G=>({...G,fieldOptions:[...G.fieldOptions,""]}))},q=(G,H)=>{j(ue=>({...ue,fieldOptions:ue.fieldOptions.map((ye,de)=>de===G?H:ye)}))},Q=G=>{j(H=>({...H,fieldOptions:H.fieldOptions.filter((ue,ye)=>ye!==G)}))};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading system settings..."})]})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Configuration"}),a.jsx("p",{className:"text-gray-600",children:"Configure racks, custom fields, and operational settings"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(EF,{className:"h-6 w-6 text-primary-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Warehouse Layout"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Total Capacity: ",e.reduce((G,H)=>G+H.capacity,0)," units"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.map(G=>{const H=A(G);return a.jsx("div",{className:`relative border-2 rounded-lg p-4 transition-all hover:shadow-md ${G.status==="ACTIVE"?"border-green-200 bg-green-50":G.status==="MAINTENANCE"?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-lg",children:G.code}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:G.location}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[a.jsx("span",{children:G.currentLoad}),a.jsx("span",{children:G.capacity})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${k(H)}`,style:{width:`${H}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[H,"%"]})]}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full mt-2 ${SC[G.type]}`,children:G.type})]})},G.id)}),a.jsx("div",{onClick:()=>c(!0),className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition-all",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Tu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Add Rack"})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Rl,{className:"h-6 w-6 text-primary-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rack Management"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(_u,{className:"h-4 w-4"}),a.jsx("span",{children:"Print QR Codes"})]}),a.jsxs("button",{onClick:()=>c(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[a.jsx(Tu,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Rack"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rack"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"QR Code"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(G=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:G.code})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.location}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${SC[G.type]}`,children:G.type})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[G.currentLoad," / ",G.capacity]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Tse[G.status]}`,children:G.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mo,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-500 font-mono",children:G.qrCode})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"text-green-600 hover:text-green-900",title:"Print QR Code",children:a.jsx(_u,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>O(G.id),className:"text-red-600 hover:text-red-900",title:"Delete Rack",children:a.jsx(Ou,{className:"h-4 w-4"})})]})})]},G.id))})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(BF,{className:"h-6 w-6 text-primary-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Custom Fields"})]}),a.jsxs("button",{onClick:()=>{p(null),d(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[a.jsx(dF,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Field"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary-600",children:r.filter(G=>G.section==="SHIPMENT").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Shipment Fields"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(G=>G.section==="JOB").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Job Fields"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.filter(G=>G.section==="EXPENSE").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Expense Fields"})]})]}),["SHIPMENT","JOB","EXPENSE"].map(G=>a.jsxs("div",{className:"mb-6",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:[G," Fields"]}),a.jsx("div",{className:"space-y-2",children:r.filter(H=>H.section===G).sort((H,ue)=>H.order-ue.order).map(H=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"font-medium text-gray-900",children:H.name}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",H.type,")"]}),H.required&&a.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Required"})]}),H.options&&a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Options: ",H.options.join(", ")]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>F(H),className:"text-blue-600 hover:text-blue-900",title:"Edit Field",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("button",{onClick:()=>B(H.id),className:"text-red-600 hover:text-red-900",title:"Delete Field",children:a.jsx(Ou,{className:"h-4 w-4"})})]})]},H.id))})]},G))]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Rack"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rack Code"}),a.jsx("input",{type:"text",value:v.code,onChange:G=>x(H=>({...H,code:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., A1, B2, C3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),a.jsx("input",{type:"text",value:v.location,onChange:G=>x(H=>({...H,location:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Section A - Row 1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),a.jsxs("select",{value:v.rackType,onChange:G=>x(H=>({...H,rackType:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:"STORAGE",children:"Storage"}),a.jsx("option",{value:"MATERIALS",children:"Materials"}),a.jsx("option",{value:"EQUIPMENT",children:"Equipment"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),a.jsx("input",{type:"number",value:v.capacityTotal,onChange:G=>x(H=>({...H,capacityTotal:parseInt(G.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",min:"1"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:E,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:"Add Rack"}),a.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-96 overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:h?"Edit Custom Field":"Add Custom Field"}),!h&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>K("priority"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Priority Level"}),a.jsx("button",{onClick:()=>K("insurance"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Insurance Value"}),a.jsx("button",{onClick:()=>K("customerType"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Customer Type"}),a.jsx("button",{onClick:()=>K("deliveryInstructions"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Delivery Instructions"}),a.jsx("button",{onClick:()=>K("fragile"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Fragile Item"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Name"}),a.jsx("input",{type:"text",value:w.fieldName,onChange:G=>j(H=>({...H,fieldName:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Priority Level"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Type"}),a.jsxs("select",{value:w.fieldType,onChange:G=>j(H=>({...H,fieldType:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:"TEXT",children:"Text"}),a.jsx("option",{value:"NUMBER",children:"Number"}),a.jsx("option",{value:"DATE",children:"Date"}),a.jsx("option",{value:"DROPDOWN",children:"Dropdown"}),a.jsx("option",{value:"CHECKBOX",children:"Checkbox"})]})]}),w.fieldType==="DROPDOWN"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options"}),w.fieldOptions.map((G,H)=>a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("input",{type:"text",value:G,onChange:ue=>q(H,ue.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Option ${H+1}`}),w.fieldOptions.length>1&&a.jsx("button",{onClick:()=>Q(H),className:"text-red-600 hover:text-red-800",children:a.jsx($c,{className:"h-4 w-4"})})]},H)),a.jsx("button",{onClick:z,className:"text-primary-600 hover:text-primary-800 text-sm",children:"+ Add Option"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),a.jsxs("select",{value:w.section,onChange:G=>j(H=>({...H,section:G.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:"SHIPMENT",children:"Shipment"}),a.jsx("option",{value:"JOB",children:"Moving Job"}),a.jsx("option",{value:"EXPENSE",children:"Expense"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"required",checked:w.isRequired,onChange:G=>j(H=>({...H,isRequired:G.target.checked})),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"required",className:"ml-2 text-sm text-gray-700",children:"Required field"})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:h?U:_,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:h?"Update Field":"Add Field"}),a.jsx("button",{onClick:L,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]})},Ose=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security & Access"}),a.jsx("p",{className:"text-gray-600",children:"Manage authentication and security settings"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password Policy"}),a.jsx("div",{className:"space-y-3",children:["Minimum 8 characters","Require uppercase letters","Require numbers","Require special characters"].map((e,t)=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-primary-600 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:e})]},t))})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add an extra layer of security"})]}),a.jsx("button",{className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:"Enable"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Session Management"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),a.jsx("input",{type:"number",defaultValue:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),Rse=()=>{const[e,t]=P.useState({email:{},sms:{},push:{}}),[r,n]=P.useState(!0),[s,i]=P.useState(!1),[o,c]=P.useState(null);P.useEffect(()=>{u()},[]);const u=async()=>{try{const h=await mC.get();t(h.preferences)}catch(h){console.error("Failed to load preferences:",h),c({type:"error",text:"Failed to load notification preferences"})}finally{n(!1)}},d=async()=>{i(!0),c(null);try{await mC.update(e),c({type:"success",text:"Notification preferences saved successfully!"}),setTimeout(()=>c(null),3e3)}catch(h){c({type:"error",text:h.message||"Failed to save notification preferences"})}finally{i(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading notification settings..."})]})}):a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),a.jsx("p",{className:"text-gray-600",children:"Configure how and when you receive notifications"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[o&&a.jsxs("div",{className:`flex items-center ${o.type==="success"?"text-green-600":"text-red-600"}`,children:[o.type==="success"&&a.jsx(Sa,{className:"h-5 w-5 mr-2"}),a.jsx("span",{className:"text-sm",children:o.text})]}),a.jsx("button",{onClick:d,disabled:s,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Saving...":"Save Preferences"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Email Notifications"}),a.jsx("div",{className:"space-y-3",children:[{label:"New shipment arrival",desc:"Get notified when new shipments arrive"},{label:"Job assignments",desc:"Notifications for new job assignments"},{label:"Expense approvals",desc:"Alerts for expense approval requests"},{label:"System updates",desc:"Important system updates and maintenance"}].map((h,p)=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:h.label}),a.jsx("div",{className:"text-sm text-gray-500",children:h.desc})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},p))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"WhatsApp Notifications"}),a.jsx("div",{className:"space-y-3",children:["Job updates","Schedule changes","Emergency alerts"].map((h,p)=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-primary-600 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:h})]},p))})]})]})},Dse=()=>{const[e,t]=P.useState(null),[r,n]=P.useState(!0),[s,i]=P.useState(!1),[o,c]=P.useState(!1),[u,d]=P.useState(null);P.useEffect(()=>{h()},[]);const h=async()=>{n(!0);try{const w=await fetch("/api/shipment-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!w.ok)throw new Error("Failed to load settings");const j=await w.json();t(j.settings)}catch(w){d({type:"error",text:w.message})}finally{n(!1)}},p=async()=>{if(e){i(!0),d(null);try{const w=await fetch("/api/shipment-settings",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!w.ok)throw new Error("Failed to save settings");const j=await w.json();t(j.settings),d({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>d(null),3e3)}catch(w){d({type:"error",text:w.message})}finally{i(!1)}}},v=async()=>{if(confirm("Are you sure you want to reset all shipment settings to defaults? This cannot be undone.")){c(!0),d(null);try{const w=await fetch("/api/shipment-settings/reset",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!w.ok)throw new Error("Failed to reset settings");const j=await w.json();t(j.settings),d({type:"success",text:"Settings reset to defaults successfully!"}),setTimeout(()=>d(null),3e3)}catch(w){d({type:"error",text:w.message})}finally{c(!1)}}},x=(w,j)=>{e&&t({...e,[w]:j})};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shipment Configuration"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Configure shipment intake, storage, and release workflows"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:v,disabled:o||s,className:"px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Jh,{className:"h-5 w-5"}),o?"Resetting...":"Reset to Defaults"]}),a.jsxs("button",{onClick:p,disabled:s||o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Sa,{className:"h-5 w-5"}),s?"Saving...":"Save Changes"]})]})]}),u&&a.jsx("div",{className:`p-4 rounded-lg ${u.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="success"?a.jsx(Sa,{className:"h-5 w-5"}):a.jsx(ho,{className:"h-5 w-5"}),a.jsx("span",{children:u.text})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Ic,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Intake Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure required fields during shipment creation"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Client Email"}),a.jsx("input",{type:"checkbox",checked:e.requireClientEmail,onChange:w=>x("requireClientEmail",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Client Phone"}),a.jsx("input",{type:"checkbox",checked:e.requireClientPhone,onChange:w=>x("requireClientPhone",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Estimated Value"}),a.jsx("input",{type:"checkbox",checked:e.requireEstimatedValue,onChange:w=>x("requireEstimatedValue",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Photos"}),a.jsx("input",{type:"checkbox",checked:e.requirePhotos,onChange:w=>x("requirePhotos",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Auto-generate QR Code"}),a.jsx("input",{type:"checkbox",checked:e.autoGenerateQR,onChange:w=>x("autoGenerateQR",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code Prefix"}),a.jsx("input",{type:"text",value:e.qrCodePrefix,onChange:w=>x("qrCodePrefix",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"SHP"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Storage Type"}),a.jsxs("select",{value:e.defaultStorageType,onChange:w=>x("defaultStorageType",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"PERSONAL",children:"Personal"}),a.jsx("option",{value:"COMMERCIAL",children:"Commercial"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(_s,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Intake Form Fields"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Customize which fields appear and are required in shipment intake form"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Basic Information Fields"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Client Address"}),a.jsx("input",{type:"checkbox",checked:e.showClientAddress!==!1,onChange:w=>x("showClientAddress",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showClientAddress!==!1&&a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireClientAddress===!0,onChange:w=>x("requireClientAddress",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Reference ID"}),a.jsx("input",{type:"checkbox",checked:e.showReferenceId!==!1,onChange:w=>x("showReferenceId",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showReferenceId!==!1&&a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireReferenceId===!0,onChange:w=>x("requireReferenceId",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Description"}),a.jsx("input",{type:"checkbox",checked:e.showDescription!==!1,onChange:w=>x("showDescription",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showDescription!==!1&&a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireDescription===!0,onChange:w=>x("requireDescription",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Notes"}),a.jsx("input",{type:"checkbox",checked:e.showNotes!==!1,onChange:w=>x("showNotes",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showNotes!==!1&&a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireNotes===!0,onChange:w=>x("requireNotes",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Warehouse Shipment Fields"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Warehouse Mode Toggle"}),a.jsx("input",{type:"checkbox",checked:e.showWarehouseMode!==!1,onChange:w=>x("showWarehouseMode",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]})}),a.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Shipper Details"}),a.jsx("input",{type:"checkbox",checked:e.showShipperDetails!==!1,onChange:w=>x("showShipperDetails",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]})}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Weight"}),a.jsx("input",{type:"checkbox",checked:e.showWeight!==!1,onChange:w=>x("showWeight",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showWeight!==!1&&a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireWeight===!0,onChange:w=>x("requireWeight",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dimensions"}),a.jsx("input",{type:"checkbox",checked:e.showDimensions!==!1,onChange:w=>x("showDimensions",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showDimensions!==!1&&a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireDimensions===!0,onChange:w=>x("requireDimensions",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Storage Assignment Fields"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Estimated Storage Days"}),a.jsx("input",{type:"checkbox",checked:e.showEstimatedDays!==!1,onChange:w=>x("showEstimatedDays",w.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showEstimatedDays!==!1&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:e.requireEstimatedDays===!0,onChange:w=>x("requireEstimatedDays",w.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-600",children:"Default Value (days)"}),a.jsx("input",{type:"number",value:e.defaultEstimatedDays||30,onChange:w=>x("defaultEstimatedDays",parseInt(w.target.value)),className:"w-full mt-1 px-2 py-1 text-sm border border-gray-300 rounded",min:"1"})]})]})]})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:a.jsx(V7,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Storage Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure rack assignment and capacity alerts"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Allow Multiple Racks"}),a.jsx("input",{type:"checkbox",checked:e.allowMultipleRacks,onChange:w=>x("allowMultipleRacks",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Rack Assignment"}),a.jsx("input",{type:"checkbox",checked:e.requireRackAssignment,onChange:w=>x("requireRackAssignment",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Auto-assign Rack"}),a.jsx("input",{type:"checkbox",checked:e.autoAssignRack,onChange:w=>x("autoAssignRack",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Low Capacity Alerts"}),a.jsx("input",{type:"checkbox",checked:e.notifyOnLowCapacity,onChange:w=>x("notifyOnLowCapacity",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Low Capacity Threshold: ",e.lowCapacityThreshold,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:e.lowCapacityThreshold,onChange:w=>x("lowCapacityThreshold",parseInt(w.target.value)),className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0%"}),a.jsx("span",{children:"50%"}),a.jsx("span",{children:"100%"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(jj,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Release Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure release approval and documentation requirements"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Release Approval"}),a.jsx("input",{type:"checkbox",checked:e.requireReleaseApproval,onChange:w=>x("requireReleaseApproval",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approver Role"}),a.jsxs("select",{value:e.releaseApproverRole,onChange:w=>x("releaseApproverRole",w.target.value),disabled:!e.requireReleaseApproval,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[a.jsx("option",{value:"MANAGER",children:"Manager"}),a.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Release Photos"}),a.jsx("input",{type:"checkbox",checked:e.requireReleasePhotos,onChange:w=>x("requireReleasePhotos",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require ID Verification"}),a.jsx("input",{type:"checkbox",checked:e.requireIDVerification,onChange:w=>x("requireIDVerification",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Generate Release Invoice"}),a.jsx("input",{type:"checkbox",checked:e.generateReleaseInvoice,onChange:w=>x("generateReleaseInvoice",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Auto-send Invoice Email"}),a.jsx("input",{type:"checkbox",checked:e.autoSendInvoiceEmail,onChange:w=>x("autoSendInvoiceEmail",w.target.checked),disabled:!e.generateReleaseInvoice,className:"h-5 w-5 text-blue-600 rounded disabled:opacity-50"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Release Signature"}),a.jsx("input",{type:"checkbox",checked:e.requireReleaseSignature,onChange:w=>x("requireReleaseSignature",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Collector ID"}),a.jsx("input",{type:"checkbox",checked:e.requireCollectorID,onChange:w=>x("requireCollectorID",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Allow Proxy Collection"}),a.jsx("input",{type:"checkbox",checked:e.allowProxyCollection,onChange:w=>x("allowProxyCollection",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(Qh,{className:"h-6 w-6 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing Configuration"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure storage and release charges"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate per Day (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:e.storageRatePerDay,onChange:w=>x("storageRatePerDay",parseFloat(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate per Box (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:e.storageRatePerBox,onChange:w=>x("storageRatePerBox",parseFloat(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Charge Partial Day"}),a.jsx("input",{type:"checkbox",checked:e.chargePartialDay,onChange:w=>x("chargePartialDay",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Charge Days"}),a.jsx("input",{type:"number",min:"0",value:e.minimumChargeDays,onChange:w=>x("minimumChargeDays",parseInt(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Handling Fee (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:e.releaseHandlingFee,onChange:w=>x("releaseHandlingFee",parseFloat(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Per-Box Fee (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:e.releasePerBoxFee,onChange:w=>x("releasePerBoxFee",parseFloat(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Transport Fee (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:e.releaseTransportFee,onChange:w=>x("releaseTransportFee",parseFloat(w.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(jj,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Partial Release Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure partial release workflow"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Allow Partial Release"}),a.jsx("input",{type:"checkbox",checked:e.allowPartialRelease,onChange:w=>x("allowPartialRelease",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Boxes per Release"}),a.jsx("input",{type:"number",min:"1",value:e.partialReleaseMinBoxes,onChange:w=>x("partialReleaseMinBoxes",parseInt(w.target.value)),disabled:!e.allowPartialRelease,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Require Partial Approval"}),a.jsx("input",{type:"checkbox",checked:e.requirePartialApproval,onChange:w=>x("requirePartialApproval",w.target.checked),disabled:!e.allowPartialRelease,className:"h-5 w-5 text-blue-600 rounded disabled:opacity-50"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:a.jsx(n5,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure client and staff notifications"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Notify Client on Intake"}),a.jsx("input",{type:"checkbox",checked:e.notifyClientOnIntake,onChange:w=>x("notifyClientOnIntake",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Notify Client on Release"}),a.jsx("input",{type:"checkbox",checked:e.notifyClientOnRelease,onChange:w=>x("notifyClientOnRelease",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Storage Alert Notifications"}),a.jsx("input",{type:"checkbox",checked:e.notifyOnStorageAlert,onChange:w=>x("notifyOnStorageAlert",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),a.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Alert After (Days)"}),a.jsx("input",{type:"number",min:"1",value:e.storageAlertDays,onChange:w=>x("storageAlertDays",parseInt(w.target.value)),disabled:!e.notifyOnStorageAlert,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),a.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[a.jsx("span",{className:"text-gray-700",children:"Enable Custom Fields"}),a.jsx("input",{type:"checkbox",checked:e.enableCustomFields,onChange:w=>x("enableCustomFields",w.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-0 bg-white p-4 border-t border-gray-200 -mx-6 -mb-6",children:[a.jsxs("button",{onClick:v,disabled:o||s,className:"px-6 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Jh,{className:"h-5 w-5"}),o?"Resetting...":"Reset to Defaults"]}),a.jsxs("button",{onClick:p,disabled:s||o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Sa,{className:"h-5 w-5"}),s?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ho,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Failed to load settings"}),a.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})},Lse=[{id:"company",name:"Company & Branding",icon:pp,path:"company",description:"Company details, logo, colors, and branding settings"},{id:"users",name:"User Management",icon:r0,path:"users",description:"Manage team members, roles, and permissions"},{id:"invoice",name:"Invoice & Templates",icon:_s,path:"invoice",description:"Customize invoice templates, branding, and layouts"},{id:"billing",name:"Billing & Rates",icon:Lo,path:"billing",description:"Storage rates, payment methods, and subscription"},{id:"integrations",name:"Integrations",icon:G7,path:"integrations",description:"WhatsApp, SMS, email, and third-party connections"},{id:"shipment",name:"Shipment Configuration",icon:Ic,path:"shipment",description:"Configure shipment intake, storage, release workflows, and pricing"},{id:"system",name:"System Configuration",icon:e0,path:"system",description:"Racks setup, custom fields, and operational settings"},{id:"security",name:"Security & Access",icon:tg,path:"security",description:"Authentication, permissions, and security policies"},{id:"notifications",name:"Notifications",icon:n5,path:"notifications",description:"Alert preferences, email notifications, and messaging"}],Mse=()=>{const[e,t]=P.useState("company");return a.jsxs("div",{className:"flex h-full bg-gray-50",children:[a.jsxs("div",{className:"w-80 bg-white shadow-lg border-r border-gray-200 overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:a.jsx(V7,{className:"h-6 w-6 text-primary-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Settings"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Configure your warehouse system"})]})]})}),a.jsx("nav",{className:"p-4 space-y-2",children:Lse.map(r=>{const n=r.icon,s=e===r.id;return a.jsx("button",{onClick:()=>t(r.id),className:`
                  w-full text-left p-4 rounded-lg transition-all duration-200
                  ${s?"bg-primary-50 border border-primary-200 text-primary-700":"hover:bg-gray-50 text-gray-700 border border-transparent"}
                `,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(n,{className:`h-5 w-5 mt-0.5 flex-shrink-0 ${s?"text-primary-600":"text-gray-400"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`font-medium ${s?"text-primary-900":"text-gray-900"}`,children:r.name}),a.jsx("p",{className:`text-sm mt-1 ${s?"text-primary-600":"text-gray-500"}`,children:r.description})]})]})},r.id)})}),a.jsxs("div",{className:"p-4 mt-6 border-t border-gray-200",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Stats"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Total Users"}),a.jsx("span",{className:"font-medium text-gray-900",children:"12"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Active Racks"}),a.jsx("span",{className:"font-medium text-gray-900",children:"48"})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Monthly Revenue"}),a.jsx("span",{className:"font-medium text-gray-900",children:"2,450 KWD"})]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[e==="company"&&a.jsx(Ase,{}),e==="users"&&a.jsx(Ese,{}),e==="invoice"&&a.jsx(kse,{}),e==="billing"&&a.jsx(Pse,{}),e==="integrations"&&a.jsx(Ise,{}),e==="shipment"&&a.jsx(Dse,{}),e==="system"&&a.jsx(_se,{}),e==="security"&&a.jsx(Ose,{}),e==="notifications"&&a.jsx(Rse,{})]})})]})};var xt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(xt||(xt={}));var EC=new Map([[xt.QR_CODE,"QR_CODE"],[xt.AZTEC,"AZTEC"],[xt.CODABAR,"CODABAR"],[xt.CODE_39,"CODE_39"],[xt.CODE_93,"CODE_93"],[xt.CODE_128,"CODE_128"],[xt.DATA_MATRIX,"DATA_MATRIX"],[xt.MAXICODE,"MAXICODE"],[xt.ITF,"ITF"],[xt.EAN_13,"EAN_13"],[xt.EAN_8,"EAN_8"],[xt.PDF_417,"PDF_417"],[xt.RSS_14,"RSS_14"],[xt.RSS_EXPANDED,"RSS_EXPANDED"],[xt.UPC_A,"UPC_A"],[xt.UPC_E,"UPC_E"],[xt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),kC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(kC||(kC={}));function Bse(e){return Object.values(xt).includes(e)}var Gg;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Gg||(Gg={}));var Fse=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Gg.SCAN_TYPE_CAMERA,Gg.SCAN_TYPE_FILE],e}(),zO=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!EC.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,EC.get(t))},e}(),PC=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Mb;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Mb||(Mb={}));var Use=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Mb.UNKWOWN_ERROR}},e}(),zse=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function gl(e){return typeof e>"u"||e===null}var Pd=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),$O=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(s),o=Object.keys(t),c=0,u=o;c<u.length;c++){var d=u[c];if(i.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e}(),Bb={exports:{}};(function(e,t){(function(r,n){n(t)})(Hf,function(r){function n(X){return X==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,l){X.__proto__=l}||function(X,l){for(var f in l)l.hasOwnProperty(f)&&(X[f]=l[f])};function i(X,l){s(X,l);function f(){this.constructor=X}X.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}function o(X,l){var f=Object.setPrototypeOf;f?f(X,l):X.__proto__=l}function c(X,l){l===void 0&&(l=X.constructor);var f=Error.captureStackTrace;f&&f(X,l)}var u=function(X){i(l,X);function l(f){var m=this.constructor,g=X.call(this,f)||this;return Object.defineProperty(g,"name",{value:m.name,enumerable:!1}),o(g,m.prototype),c(g),g}return l}(Error);class d extends u{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}d.kind="Exception";class h extends d{}h.kind="ArgumentException";class p extends d{}p.kind="IllegalArgumentException";class v{constructor(l){if(this.binarizer=l,l===null)throw new p("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,f){return this.binarizer.getBlackRow(l,f)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,f,m,g){const y=this.binarizer.getLuminanceSource().crop(l,f,m,g);return new v(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new v(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new v(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class x extends d{static getChecksumInstance(){return new x}}x.kind="ChecksumException";class w{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(l,f,m,g,y){for(;y--;)m[g++]=l[f++]}static currentTimeMillis(){return Date.now()}}class N extends d{}N.kind="IndexOutOfBoundsException";class A extends N{constructor(l=void 0,f=void 0){super(f),this.index=l,this.message=f}}A.kind="ArrayIndexOutOfBoundsException";class k{static fill(l,f){for(let m=0,g=l.length;m<g;m++)l[m]=f}static fillWithin(l,f,m,g){k.rangeCheck(l.length,f,m);for(let y=f;y<m;y++)l[y]=g}static rangeCheck(l,f,m){if(f>m)throw new p("fromIndex("+f+") > toIndex("+m+")");if(f<0)throw new A(f);if(m>l)throw new A(m)}static asList(...l){return l}static create(l,f,m){return Array.from({length:l}).map(y=>Array.from({length:f}).fill(m))}static createInt32Array(l,f,m){return Array.from({length:l}).map(y=>Int32Array.from({length:f}).fill(m))}static equals(l,f){if(!l||!f||!l.length||!f.length||l.length!==f.length)return!1;for(let m=0,g=l.length;m<g;m++)if(l[m]!==f[m])return!1;return!0}static hashCode(l){if(l===null)return 0;let f=1;for(const m of l)f=31*f+m;return f}static fillUint8Array(l,f){for(let m=0;m!==l.length;m++)l[m]=f}static copyOf(l,f){return l.slice(0,f)}static copyOfUint8Array(l,f){if(l.length<=f){const m=new Uint8Array(f);return m.set(l),m}return l.slice(0,f)}static copyOfRange(l,f,m){const g=m-f,y=new Int32Array(g);return j.arraycopy(l,f,y,0,g),y}static binarySearch(l,f,m){m===void 0&&(m=k.numberComparator);let g=0,y=l.length-1;for(;g<=y;){const b=y+g>>1,S=m(f,l[b]);if(S>0)g=b+1;else if(S<0)y=b-1;else return b}return-g-1}static numberComparator(l,f){return l-f}}class E{static numberOfTrailingZeros(l){let f;if(l===0)return 32;let m=31;return f=l<<16,f!==0&&(m-=16,l=f),f=l<<8,f!==0&&(m-=8,l=f),f=l<<4,f!==0&&(m-=4,l=f),f=l<<2,f!==0&&(m-=2,l=f),m-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let f=1;return l>>>16||(f+=16,l<<=16),l>>>24||(f+=8,l<<=8),l>>>28||(f+=4,l<<=4),l>>>30||(f+=2,l<<=2),f-=l>>>31,f}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,f){return Math.trunc(l/f)}static parseInt(l,f=void 0){return parseInt(l,f)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _{constructor(l,f){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,f==null?this.bits=_.makeArray(l):this.bits=f)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const f=_.makeArray(l);j.arraycopy(this.bits,0,f,0,this.bits.length),this.bits=f}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const f=this.size;if(l>=f)return f;const m=this.bits;let g=Math.floor(l/32),y=m[g];y&=~((1<<(l&31))-1);const b=m.length;for(;y===0;){if(++g===b)return f;y=m[g]}const S=g*32+E.numberOfTrailingZeros(y);return S>f?f:S}getNextUnset(l){const f=this.size;if(l>=f)return f;const m=this.bits;let g=Math.floor(l/32),y=~m[g];y&=~((1<<(l&31))-1);const b=m.length;for(;y===0;){if(++g===b)return f;y=~m[g]}const S=g*32+E.numberOfTrailingZeros(y);return S>f?f:S}setBulk(l,f){this.bits[Math.floor(l/32)]=f}setRange(l,f){if(f<l||l<0||f>this.size)throw new p;if(f===l)return;f--;const m=Math.floor(l/32),g=Math.floor(f/32),y=this.bits;for(let b=m;b<=g;b++){const S=b>m?0:l&31,D=(2<<(b<g?31:f&31))-(1<<S);y[b]|=D}}clear(){const l=this.bits.length,f=this.bits;for(let m=0;m<l;m++)f[m]=0}isRange(l,f,m){if(f<l||l<0||f>this.size)throw new p;if(f===l)return!0;f--;const g=Math.floor(l/32),y=Math.floor(f/32),b=this.bits;for(let S=g;S<=y;S++){const T=S>g?0:l&31,$=(2<<(S<y?31:f&31))-(1<<T)&4294967295;if((b[S]&$)!==(m?$:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,f){if(f<0||f>32)throw new p("Num bits must be between 0 and 32");this.ensureCapacity(this.size+f);for(let m=f;m>0;m--)this.appendBit((l>>m-1&1)===1)}appendBitArray(l){const f=l.size;this.ensureCapacity(this.size+f);for(let m=0;m<f;m++)this.appendBit(l.get(m))}xor(l){if(this.size!==l.size)throw new p("Sizes don't match");const f=this.bits;for(let m=0,g=f.length;m<g;m++)f[m]^=l.bits[m]}toBytes(l,f,m,g){for(let y=0;y<g;y++){let b=0;for(let S=0;S<8;S++)this.get(l)&&(b|=1<<7-S),l++;f[m+y]=b}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),f=Math.floor((this.size-1)/32),m=f+1,g=this.bits;for(let y=0;y<m;y++){let b=g[y];b=b>>1&1431655765|(b&1431655765)<<1,b=b>>2&858993459|(b&858993459)<<2,b=b>>4&252645135|(b&252645135)<<4,b=b>>8&16711935|(b&16711935)<<8,b=b>>16&65535|(b&65535)<<16,l[f-y]=b}if(this.size!==m*32){const y=m*32-this.size;let b=l[0]>>>y;for(let S=1;S<m;S++){const T=l[S];b|=T<<32-y,l[S-1]=b,b=T>>>y}l[m-1]=b}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof _))return!1;const f=l;return this.size===f.size&&k.equals(this.bits,f.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let l="";for(let f=0,m=this.size;f<m;f++)f&7||(l+=" "),l+=this.get(f)?"X":".";return l}clone(){return new _(this.size,this.bits.slice())}}var O;(function(X){X[X.OTHER=0]="OTHER",X[X.PURE_BARCODE=1]="PURE_BARCODE",X[X.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",X[X.TRY_HARDER=3]="TRY_HARDER",X[X.CHARACTER_SET=4]="CHARACTER_SET",X[X.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",X[X.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",X[X.ASSUME_GS1=7]="ASSUME_GS1",X[X.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",X[X.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",X[X.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(O||(O={}));var B=O;class F extends d{static getFormatInstance(){return new F}}F.kind="FormatException";var U;(function(X){X[X.Cp437=0]="Cp437",X[X.ISO8859_1=1]="ISO8859_1",X[X.ISO8859_2=2]="ISO8859_2",X[X.ISO8859_3=3]="ISO8859_3",X[X.ISO8859_4=4]="ISO8859_4",X[X.ISO8859_5=5]="ISO8859_5",X[X.ISO8859_6=6]="ISO8859_6",X[X.ISO8859_7=7]="ISO8859_7",X[X.ISO8859_8=8]="ISO8859_8",X[X.ISO8859_9=9]="ISO8859_9",X[X.ISO8859_10=10]="ISO8859_10",X[X.ISO8859_11=11]="ISO8859_11",X[X.ISO8859_13=12]="ISO8859_13",X[X.ISO8859_14=13]="ISO8859_14",X[X.ISO8859_15=14]="ISO8859_15",X[X.ISO8859_16=15]="ISO8859_16",X[X.SJIS=16]="SJIS",X[X.Cp1250=17]="Cp1250",X[X.Cp1251=18]="Cp1251",X[X.Cp1252=19]="Cp1252",X[X.Cp1256=20]="Cp1256",X[X.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",X[X.UTF8=22]="UTF8",X[X.ASCII=23]="ASCII",X[X.Big5=24]="Big5",X[X.GB18030=25]="GB18030",X[X.EUC_KR=26]="EUC_KR"})(U||(U={}));class L{constructor(l,f,m,...g){this.valueIdentifier=l,this.name=m,typeof f=="number"?this.values=Int32Array.from([f]):this.values=f,this.otherEncodingNames=g,L.VALUE_IDENTIFIER_TO_ECI.set(l,this),L.NAME_TO_ECI.set(m,this);const y=this.values;for(let b=0,S=y.length;b!==S;b++){const T=y[b];L.VALUES_TO_ECI.set(T,this)}for(const b of g)L.NAME_TO_ECI.set(b,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new F("incorect value");const f=L.VALUES_TO_ECI.get(l);if(f===void 0)throw new F("incorect value");return f}static getCharacterSetECIByName(l){const f=L.NAME_TO_ECI.get(l);if(f===void 0)throw new F("incorect value");return f}equals(l){if(!(l instanceof L))return!1;const f=l;return this.getName()===f.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(U.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(U.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(U.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(U.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(U.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(U.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(U.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(U.Big5,28,"Big5"),L.GB18030=new L(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(U.EUC_KR,30,"EUC_KR","EUC-KR");class K extends d{}K.kind="UnsupportedOperationException";class z{static decode(l,f){const m=this.encodingName(f);return this.customDecoder?this.customDecoder(l,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(l,m):new TextDecoder(m).decode(l)}static shouldDecodeOnFallback(l){return!z.isBrowser()&&l==="ISO-8859-1"}static encode(l,f){const m=this.encodingName(f);return this.customEncoder?this.customEncoder(l,m):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof L?l:L.getCharacterSetECIByName(l)}static decodeFallback(l,f){const m=this.encodingCharacterSet(f);if(z.isDecodeFallbackSupported(m)){let g="";for(let y=0,b=l.length;y<b;y++){let S=l[y].toString(16);S.length<2&&(S="0"+S),g+="%"+S}return decodeURIComponent(g)}if(m.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new K(`Encoding ${this.encodingName(f)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(L.UTF8)||l.equals(L.ISO8859_1)||l.equals(L.ASCII)}static encodeFallback(l){const m=btoa(unescape(encodeURIComponent(l))).split(""),g=[];for(let y=0;y<m.length;y++)g.push(m[y].charCodeAt(0));return new Uint8Array(g)}}class q{static castAsNonUtf8Char(l,f=null){const m=f?f.getName():this.ISO88591;return z.decode(new Uint8Array([l]),m)}static guessEncoding(l,f){if(f!=null&&f.get(B.CHARACTER_SET)!==void 0)return f.get(B.CHARACTER_SET).toString();const m=l.length;let g=!0,y=!0,b=!0,S=0,T=0,D=0,$=0,Y=0,ee=0,fe=0,Ne=0,Ae=0,Oe=0,Fe=0;const Ye=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let et=0;et<m&&(g||y||b);et++){const Je=l[et]&255;b&&(S>0?Je&128?S--:b=!1:Je&128&&(Je&64?(S++,Je&32?(S++,Je&16?(S++,Je&8?b=!1:$++):D++):T++):b=!1)),g&&(Je>127&&Je<160?g=!1:Je>159&&(Je<192||Je===215||Je===247)&&Fe++),y&&(Y>0?Je<64||Je===127||Je>252?y=!1:Y--:Je===128||Je===160||Je>239?y=!1:Je>160&&Je<224?(ee++,Ne=0,fe++,fe>Ae&&(Ae=fe)):Je>127?(Y++,fe=0,Ne++,Ne>Oe&&(Oe=Ne)):(fe=0,Ne=0))}return b&&S>0&&(b=!1),y&&Y>0&&(y=!1),b&&(Ye||T+D+$>0)?q.UTF8:y&&(q.ASSUME_SHIFT_JIS||Ae>=3||Oe>=3)?q.SHIFT_JIS:g&&y?Ae===2&&ee===2||Fe*10>=m?q.SHIFT_JIS:q.ISO88591:g?q.ISO88591:y?q.SHIFT_JIS:b?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(l,...f){let m=-1;function g(b,S,T,D,$,Y){if(b==="%%")return"%";if(f[++m]===void 0)return;b=D?parseInt(D.substr(1)):void 0;let ee=$?parseInt($.substr(1)):void 0,fe;switch(Y){case"s":fe=f[m];break;case"c":fe=f[m][0];break;case"f":fe=parseFloat(f[m]).toFixed(b);break;case"p":fe=parseFloat(f[m]).toPrecision(b);break;case"e":fe=parseFloat(f[m]).toExponential(b);break;case"x":fe=parseInt(f[m]).toString(ee||16);break;case"d":fe=parseFloat(parseInt(f[m],ee||10).toPrecision(b)).toFixed(0);break}fe=typeof fe=="object"?JSON.stringify(fe):(+fe).toString(ee);let Ne=parseInt(T),Ae=T&&T[0]+""=="0"?"0":" ";for(;fe.length<Ne;)fe=S!==void 0?fe+Ae:Ae+fe;return fe}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(y,g)}static getBytes(l,f){return z.encode(l,f)}static getCharCode(l,f=0){return l.charCodeAt(f)}static getCharAt(l){return String.fromCharCode(l)}}q.SHIFT_JIS=L.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=L.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=L.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class Q{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=q.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,f,m){for(let g=f;f<f+m;g++)this.append(l[g]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,f){this.value=this.value.substr(0,l)+f+this.value.substr(l+1)}substring(l,f){return this.value.substring(l,f)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,f){this.value=this.value.substr(0,l)+f+this.value.substr(l+f.length)}}class G{constructor(l,f,m,g){if(this.width=l,this.height=f,this.rowSize=m,this.bits=g,f==null&&(f=l),this.height=f,l<1||f<1)throw new p("Both dimensions must be greater than 0");m==null&&(m=Math.floor((l+31)/32)),this.rowSize=m,g==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const f=l.length,m=l[0].length,g=new G(m,f);for(let y=0;y<f;y++){const b=l[y];for(let S=0;S<m;S++)b[S]&&g.set(S,y)}return g}static parseFromString(l,f,m){if(l===null)throw new p("stringRepresentation cannot be null");const g=new Array(l.length);let y=0,b=0,S=-1,T=0,D=0;for(;D<l.length;)if(l.charAt(D)===`
`||l.charAt(D)==="\r"){if(y>b){if(S===-1)S=y-b;else if(y-b!==S)throw new p("row lengths do not match");b=y,T++}D++}else if(l.substring(D,D+f.length)===f)D+=f.length,g[y]=!0,y++;else if(l.substring(D,D+m.length)===m)D+=m.length,g[y]=!1,y++;else throw new p("illegal character encountered: "+l.substring(D));if(y>b){if(S===-1)S=y-b;else if(y-b!==S)throw new p("row lengths do not match");T++}const $=new G(S,T);for(let Y=0;Y<y;Y++)g[Y]&&$.set(Math.floor(Y%S),Math.floor(Y/S));return $}get(l,f){const m=f*this.rowSize+Math.floor(l/32);return(this.bits[m]>>>(l&31)&1)!==0}set(l,f){const m=f*this.rowSize+Math.floor(l/32);this.bits[m]|=1<<(l&31)&4294967295}unset(l,f){const m=f*this.rowSize+Math.floor(l/32);this.bits[m]&=~(1<<(l&31)&4294967295)}flip(l,f){const m=f*this.rowSize+Math.floor(l/32);this.bits[m]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new p("input matrix dimensions do not match");const f=new _(Math.floor(this.width/32)+1),m=this.rowSize,g=this.bits;for(let y=0,b=this.height;y<b;y++){const S=y*m,T=l.getRow(y,f).getBitArray();for(let D=0;D<m;D++)g[S+D]^=T[D]}}clear(){const l=this.bits,f=l.length;for(let m=0;m<f;m++)l[m]=0}setRegion(l,f,m,g){if(f<0||l<0)throw new p("Left and top must be nonnegative");if(g<1||m<1)throw new p("Height and width must be at least 1");const y=l+m,b=f+g;if(b>this.height||y>this.width)throw new p("The region must fit inside the matrix");const S=this.rowSize,T=this.bits;for(let D=f;D<b;D++){const $=D*S;for(let Y=l;Y<y;Y++)T[$+Math.floor(Y/32)]|=1<<(Y&31)&4294967295}}getRow(l,f){f==null||f.getSize()<this.width?f=new _(this.width):f.clear();const m=this.rowSize,g=this.bits,y=l*m;for(let b=0;b<m;b++)f.setBulk(b*32,g[y+b]);return f}setRow(l,f){j.arraycopy(f.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),f=this.getHeight();let m=new _(l),g=new _(l);for(let y=0,b=Math.floor((f+1)/2);y<b;y++)m=this.getRow(y,m),g=this.getRow(f-1-y,g),m.reverse(),g.reverse(),this.setRow(y,g),this.setRow(f-1-y,m)}getEnclosingRectangle(){const l=this.width,f=this.height,m=this.rowSize,g=this.bits;let y=l,b=f,S=-1,T=-1;for(let D=0;D<f;D++)for(let $=0;$<m;$++){const Y=g[D*m+$];if(Y!==0){if(D<b&&(b=D),D>T&&(T=D),$*32<y){let ee=0;for(;!(Y<<31-ee&4294967295);)ee++;$*32+ee<y&&(y=$*32+ee)}if($*32+31>S){let ee=31;for(;!(Y>>>ee);)ee--;$*32+ee>S&&(S=$*32+ee)}}}return S<y||T<b?null:Int32Array.from([y,b,S-y+1,T-b+1])}getTopLeftOnBit(){const l=this.rowSize,f=this.bits;let m=0;for(;m<f.length&&f[m]===0;)m++;if(m===f.length)return null;const g=m/l;let y=m%l*32;const b=f[m];let S=0;for(;!(b<<31-S&4294967295);)S++;return y+=S,Int32Array.from([y,g])}getBottomRightOnBit(){const l=this.rowSize,f=this.bits;let m=f.length-1;for(;m>=0&&f[m]===0;)m--;if(m<0)return null;const g=Math.floor(m/l);let y=Math.floor(m%l)*32;const b=f[m];let S=31;for(;!(b>>>S);)S--;return y+=S,Int32Array.from([y,g])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof G))return!1;const f=l;return this.width===f.width&&this.height===f.height&&this.rowSize===f.rowSize&&k.equals(this.bits,f.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+k.hashCode(this.bits),l}toString(l="X ",f="  ",m=`
`){return this.buildToString(l,f,m)}buildToString(l,f,m){let g=new Q;for(let y=0,b=this.height;y<b;y++){for(let S=0,T=this.width;S<T;S++)g.append(this.get(S,y)?l:f);g.append(m)}return g.toString()}clone(){return new G(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends d{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class ue extends w{constructor(l){super(l),this.luminances=ue.EMPTY,this.buckets=new Int32Array(ue.LUMINANCE_BUCKETS)}getBlackRow(l,f){const m=this.getLuminanceSource(),g=m.getWidth();f==null||f.getSize()<g?f=new _(g):f.clear(),this.initArrays(g);const y=m.getRow(l,this.luminances),b=this.buckets;for(let T=0;T<g;T++)b[(y[T]&255)>>ue.LUMINANCE_SHIFT]++;const S=ue.estimateBlackPoint(b);if(g<3)for(let T=0;T<g;T++)(y[T]&255)<S&&f.set(T);else{let T=y[0]&255,D=y[1]&255;for(let $=1;$<g-1;$++){const Y=y[$+1]&255;(D*4-T-Y)/2<S&&f.set($),T=D,D=Y}}return f}getBlackMatrix(){const l=this.getLuminanceSource(),f=l.getWidth(),m=l.getHeight(),g=new G(f,m);this.initArrays(f);const y=this.buckets;for(let T=1;T<5;T++){const D=Math.floor(m*T/5),$=l.getRow(D,this.luminances),Y=Math.floor(f*4/5);for(let ee=Math.floor(f/5);ee<Y;ee++){const fe=$[ee]&255;y[fe>>ue.LUMINANCE_SHIFT]++}}const b=ue.estimateBlackPoint(y),S=l.getMatrix();for(let T=0;T<m;T++){const D=T*f;for(let $=0;$<f;$++)(S[D+$]&255)<b&&g.set($,T)}return g}createBinarizer(l){return new ue(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const f=this.buckets;for(let m=0;m<ue.LUMINANCE_BUCKETS;m++)f[m]=0}static estimateBlackPoint(l){const f=l.length;let m=0,g=0,y=0;for(let $=0;$<f;$++)l[$]>y&&(g=$,y=l[$]),l[$]>m&&(m=l[$]);let b=0,S=0;for(let $=0;$<f;$++){const Y=$-g,ee=l[$]*Y*Y;ee>S&&(b=$,S=ee)}if(g>b){const $=g;g=b,b=$}if(b-g<=f/16)throw new H;let T=b-1,D=-1;for(let $=b-1;$>g;$--){const Y=$-g,ee=Y*Y*(b-$)*(m-l[$]);ee>D&&(T=$,D=ee)}return T<<ue.LUMINANCE_SHIFT}}ue.LUMINANCE_BITS=5,ue.LUMINANCE_SHIFT=8-ue.LUMINANCE_BITS,ue.LUMINANCE_BUCKETS=1<<ue.LUMINANCE_BITS,ue.EMPTY=Uint8ClampedArray.from([0]);class ye extends ue{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),f=l.getWidth(),m=l.getHeight();if(f>=ye.MINIMUM_DIMENSION&&m>=ye.MINIMUM_DIMENSION){const g=l.getMatrix();let y=f>>ye.BLOCK_SIZE_POWER;f&ye.BLOCK_SIZE_MASK&&y++;let b=m>>ye.BLOCK_SIZE_POWER;m&ye.BLOCK_SIZE_MASK&&b++;const S=ye.calculateBlackPoints(g,y,b,f,m),T=new G(f,m);ye.calculateThresholdForBlock(g,y,b,f,m,S,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new ye(l)}static calculateThresholdForBlock(l,f,m,g,y,b,S){const T=y-ye.BLOCK_SIZE,D=g-ye.BLOCK_SIZE;for(let $=0;$<m;$++){let Y=$<<ye.BLOCK_SIZE_POWER;Y>T&&(Y=T);const ee=ye.cap($,2,m-3);for(let fe=0;fe<f;fe++){let Ne=fe<<ye.BLOCK_SIZE_POWER;Ne>D&&(Ne=D);const Ae=ye.cap(fe,2,f-3);let Oe=0;for(let Ye=-2;Ye<=2;Ye++){const et=b[ee+Ye];Oe+=et[Ae-2]+et[Ae-1]+et[Ae]+et[Ae+1]+et[Ae+2]}const Fe=Oe/25;ye.thresholdBlock(l,Ne,Y,Fe,g,S)}}}static cap(l,f,m){return l<f?f:l>m?m:l}static thresholdBlock(l,f,m,g,y,b){for(let S=0,T=m*y+f;S<ye.BLOCK_SIZE;S++,T+=y)for(let D=0;D<ye.BLOCK_SIZE;D++)(l[T+D]&255)<=g&&b.set(f+D,m+S)}static calculateBlackPoints(l,f,m,g,y){const b=y-ye.BLOCK_SIZE,S=g-ye.BLOCK_SIZE,T=new Array(m);for(let D=0;D<m;D++){T[D]=new Int32Array(f);let $=D<<ye.BLOCK_SIZE_POWER;$>b&&($=b);for(let Y=0;Y<f;Y++){let ee=Y<<ye.BLOCK_SIZE_POWER;ee>S&&(ee=S);let fe=0,Ne=255,Ae=0;for(let Fe=0,Ye=$*g+ee;Fe<ye.BLOCK_SIZE;Fe++,Ye+=g){for(let et=0;et<ye.BLOCK_SIZE;et++){const Je=l[Ye+et]&255;fe+=Je,Je<Ne&&(Ne=Je),Je>Ae&&(Ae=Je)}if(Ae-Ne>ye.MIN_DYNAMIC_RANGE)for(Fe++,Ye+=g;Fe<ye.BLOCK_SIZE;Fe++,Ye+=g)for(let et=0;et<ye.BLOCK_SIZE;et++)fe+=l[Ye+et]&255}let Oe=fe>>ye.BLOCK_SIZE_POWER*2;if(Ae-Ne<=ye.MIN_DYNAMIC_RANGE&&(Oe=Ne/2,D>0&&Y>0)){const Fe=(T[D-1][Y]+2*T[D][Y-1]+T[D-1][Y-1])/4;Ne<Fe&&(Oe=Fe)}T[D][Y]=Oe}}return T}}ye.BLOCK_SIZE_POWER=3,ye.BLOCK_SIZE=1<<ye.BLOCK_SIZE_POWER,ye.BLOCK_SIZE_MASK=ye.BLOCK_SIZE-1,ye.MINIMUM_DIMENSION=ye.BLOCK_SIZE*5,ye.MIN_DYNAMIC_RANGE=24;class de{constructor(l,f){this.width=l,this.height=f}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,f,m,g){throw new K("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new K("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new K("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let f=new Q;for(let m=0;m<this.height;m++){const g=this.getRow(m,l);for(let y=0;y<this.width;y++){const b=g[y]&255;let S;b<64?S="#":b<128?S="+":b<192?S=".":S=" ",f.append(S)}f.append(`
`)}return f.toString()}}class we extends de{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,f){const m=this.delegate.getRow(l,f),g=this.getWidth();for(let y=0;y<g;y++)m[y]=255-(m[y]&255);return m}getMatrix(){const l=this.delegate.getMatrix(),f=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(f);for(let g=0;g<f;g++)m[g]=255-(l[g]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(l,f,m,g){return new we(this.delegate.crop(l,f,m,g))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new we(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new we(this.delegate.rotateCounterClockwise45())}}class Ee extends de{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=Ee.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const f=l.getContext("2d").getImageData(0,0,l.width,l.height);return Ee.toGrayscaleBuffer(f.data,l.width,l.height)}static toGrayscaleBuffer(l,f,m){const g=new Uint8ClampedArray(f*m);for(let y=0,b=0,S=l.length;y<S;y+=4,b++){let T;if(l[y+3]===0)T=255;else{const $=l[y],Y=l[y+1],ee=l[y+2];T=306*$+601*Y+117*ee+512>>10}g[b]=T}return g}getRow(l,f){if(l<0||l>=this.getHeight())throw new p("Requested row is outside the image: "+l);const m=this.getWidth(),g=l*m;return f===null?f=this.buffer.slice(g,g+m):(f.length<m&&(f=new Uint8ClampedArray(m)),f.set(this.buffer.slice(g,g+m))),f}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,f,m,g){return super.crop(l,f,m,g),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const f=this.getTempCanvasElement(),m=f.getContext("2d"),g=l*Ee.DEGREE_TO_RADIANS,y=this.canvas.width,b=this.canvas.height,S=Math.ceil(Math.abs(Math.cos(g))*y+Math.abs(Math.sin(g))*b),T=Math.ceil(Math.abs(Math.sin(g))*y+Math.abs(Math.cos(g))*b);return f.width=S,f.height=T,m.translate(S/2,T/2),m.rotate(g),m.drawImage(this.canvas,y/-2,b/-2),this.buffer=Ee.makeBufferFromCanvasImageData(f),this}invert(){return new we(this)}}Ee.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(l,f,m){this.deviceId=l,this.label=f,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var V=(globalThis||Hf||self||window||void 0)&&(globalThis||Hf||self||window||void 0).__awaiter||function(X,l,f,m){function g(y){return y instanceof f?y:new f(function(b){b(y)})}return new(f||(f=Promise))(function(y,b){function S($){try{D(m.next($))}catch(Y){b(Y)}}function T($){try{D(m.throw($))}catch(Y){b(Y)}}function D($){$.done?y($.value):g($.value).then(S,T)}D((m=m.apply(X,l||[])).next())})};class se{constructor(l,f=500,m){this.reader=l,this.timeBetweenScansMillis=f,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return V(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),f=[];for(const m of l){const g=m.kind==="video"?"videoinput":m.kind;if(g!=="videoinput")continue;const y=m.deviceId||m.id,b=m.label||`Video device ${f.length+1}`,S=m.groupId,T={deviceId:y,label:b,kind:g,groupId:S};f.push(T)}return f})}getVideoInputDevices(){return V(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(f=>new ie(f.deviceId,f.label))})}findDeviceById(l){return V(this,void 0,void 0,function*(){const f=yield this.listVideoInputDevices();return f?f.find(m=>m.deviceId===l):null})}decodeFromInputVideoDevice(l,f){return V(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,f)})}decodeOnceFromVideoDevice(l,f){return V(this,void 0,void 0,function*(){this.reset();let m;l?m={deviceId:{exact:l}}:m={facingMode:"environment"};const g={video:m};return yield this.decodeOnceFromConstraints(g,f)})}decodeOnceFromConstraints(l,f){return V(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(m,f)})}decodeOnceFromStream(l,f){return V(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(l,f);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(l,f,m){return V(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,f,m)})}decodeFromVideoDevice(l,f,m){return V(this,void 0,void 0,function*(){let g;l?g={deviceId:{exact:l}}:g={facingMode:"environment"};const y={video:g};return yield this.decodeFromConstraints(y,f,m)})}decodeFromConstraints(l,f,m){return V(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(g,f,m)})}decodeFromStream(l,f,m){return V(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(l,f);return yield this.decodeContinuously(g,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,f){return V(this,void 0,void 0,function*(){const m=this.prepareVideoElement(f);return this.addVideoSource(m,l),this.videoElement=m,this.stream=l,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(l){return new Promise((f,m)=>this.playVideoOnLoad(l,()=>f()))}playVideoOnLoad(l,f){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",f),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return V(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,f){const m=document.getElementById(l);if(!m)throw new h(`element with id '${l}' not found`);if(m.nodeName.toLowerCase()!==f.toLowerCase())throw new h(`element with id '${l}' must be an ${f} element`);return m}decodeFromImage(l,f){if(!l&&!f)throw new h("either imageElement with a src set or an url must be provided");return f&&!l?this.decodeFromImageUrl(f):this.decodeFromImageElement(l)}decodeFromVideo(l,f){if(!l&&!f)throw new h("Either an element with a src set or an URL must be provided");return f&&!l?this.decodeFromVideoUrl(f):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,f,m){if(l===void 0&&f===void 0)throw new h("Either an element with a src set or an URL must be provided");return f&&!l?this.decodeFromVideoUrlContinuously(f,m):this.decodeFromVideoElementContinuously(l,m)}decodeFromImageElement(l){if(!l)throw new h("An image element must be provided.");this.reset();const f=this.prepareImageElement(l);this.imageElement=f;let m;return this.isImageLoaded(f)?m=this.decodeOnce(f,!1,!0):m=this._decodeOnLoadImage(f),m}decodeFromVideoElement(l){const f=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(f)}decodeFromVideoElementContinuously(l,f){const m=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(m,f)}_decodeFromVideoElementSetup(l){if(!l)throw new h("A video element must be provided.");this.reset();const f=this.prepareVideoElement(l);return this.videoElement=f,f}decodeFromImageUrl(l){if(!l)throw new h("An URL must be provided.");this.reset();const f=this.prepareImageElement();this.imageElement=f;const m=this._decodeOnLoadImage(f);return f.src=l,m}decodeFromVideoUrl(l){if(!l)throw new h("An URL must be provided.");this.reset();const f=this.prepareVideoElement(),m=this.decodeFromVideoElement(f);return f.src=l,m}decodeFromVideoUrlContinuously(l,f){if(!l)throw new h("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),g=this.decodeFromVideoElementContinuously(m,f);return m.src=l,g}_decodeOnLoadImage(l){return new Promise((f,m)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(f,m),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return V(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,f){return V(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,f)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let f;return typeof l>"u"&&(f=document.createElement("img"),f.width=200,f.height=200),typeof l=="string"&&(f=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(f=l),f}prepareVideoElement(l){let f;return!l&&typeof document<"u"&&(f=document.createElement("video"),f.width=200,f.height=200),typeof l=="string"&&(f=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(f=l),f.setAttribute("autoplay","true"),f.setAttribute("muted","true"),f.setAttribute("playsinline","true"),f}decodeOnce(l,f=!0,m=!0){this._stopAsyncDecode=!1;const g=(y,b)=>{if(this._stopAsyncDecode){b(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const S=this.decode(l);y(S)}catch(S){const T=f&&S instanceof H,$=(S instanceof x||S instanceof F)&&m;if(T||$)return setTimeout(g,this._timeBetweenDecodingAttempts,y,b);b(S)}};return new Promise((y,b)=>g(y,b))}decodeContinuously(l,f){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const g=this.decode(l);f(g,null),setTimeout(m,this.timeBetweenScansMillis)}catch(g){f(null,g);const y=g instanceof x||g instanceof F,b=g instanceof H;(y||b)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(l){const f=this.createBinaryBitmap(l);return this.decodeBitmap(f)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,f,m){f||(f={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(l,f.sx,f.sy,f.sWidth,f.sHeight,f.dx,f.dy,f.dWidth,f.dHeight)}drawImageOnCanvas(l,f,m=this.captureCanvasContext){f||(f={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(l,f.sx,f.sy,f.sWidth,f.sHeight,f.dx,f.dy,f.dWidth,f.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const f=this.getCaptureCanvas(l),m=new Ee(f),g=new ye(m);return new v(g)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const f=this.createCaptureCanvas(l);this.captureCanvas=f}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const f=document.createElement("canvas");let m,g;return typeof l<"u"&&(l instanceof HTMLVideoElement?(m=l.videoWidth,g=l.videoHeight):l instanceof HTMLImageElement&&(m=l.naturalWidth||l.width,g=l.naturalHeight||l.height)),f.style.width=m+"px",f.style.height=g+"px",f.width=m,f.height=g,f}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,f){try{l.srcObject=f}catch{l.src=URL.createObjectURL(f)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class ne{constructor(l,f,m=f==null?0:8*f.length,g,y,b=j.currentTimeMillis()){this.text=l,this.rawBytes=f,this.numBits=m,this.resultPoints=g,this.format=y,this.timestamp=b,this.text=l,this.rawBytes=f,m==null?this.numBits=f==null?0:8*f.length:this.numBits=m,this.resultPoints=g,this.format=y,this.resultMetadata=null,b==null?this.timestamp=j.currentTimeMillis():this.timestamp=b}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,f){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,f)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const f=this.resultPoints;if(f===null)this.resultPoints=l;else if(l!==null&&l.length>0){const m=new Array(f.length+l.length);j.arraycopy(f,0,m,0,f.length),j.arraycopy(l,0,m,f.length,l.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ve;(function(X){X[X.AZTEC=0]="AZTEC",X[X.CODABAR=1]="CODABAR",X[X.CODE_39=2]="CODE_39",X[X.CODE_93=3]="CODE_93",X[X.CODE_128=4]="CODE_128",X[X.DATA_MATRIX=5]="DATA_MATRIX",X[X.EAN_8=6]="EAN_8",X[X.EAN_13=7]="EAN_13",X[X.ITF=8]="ITF",X[X.MAXICODE=9]="MAXICODE",X[X.PDF_417=10]="PDF_417",X[X.QR_CODE=11]="QR_CODE",X[X.RSS_14=12]="RSS_14",X[X.RSS_EXPANDED=13]="RSS_EXPANDED",X[X.UPC_A=14]="UPC_A",X[X.UPC_E=15]="UPC_E",X[X.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ve||(ve={}));var be=ve,Te;(function(X){X[X.OTHER=0]="OTHER",X[X.ORIENTATION=1]="ORIENTATION",X[X.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",X[X.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",X[X.ISSUE_NUMBER=4]="ISSUE_NUMBER",X[X.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",X[X.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",X[X.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",X[X.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",X[X.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",X[X.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Te||(Te={}));var xe=Te;class le{constructor(l,f,m,g,y=-1,b=-1){this.rawBytes=l,this.text=f,this.byteSegments=m,this.ecLevel=g,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=b,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ce{exp(l){return this.expTable[l]}log(l){if(l===0)throw new p;return this.logTable[l]}static addOrSubtract(l,f){return l^f}}class ke{constructor(l,f){if(f.length===0)throw new p;this.field=l;const m=f.length;if(m>1&&f[0]===0){let g=1;for(;g<m&&f[g]===0;)g++;g===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-g),j.arraycopy(f,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=f}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const f=this.coefficients;let m;if(l===1){m=0;for(let b=0,S=f.length;b!==S;b++){const T=f[b];m=Ce.addOrSubtract(m,T)}return m}m=f[0];const g=f.length,y=this.field;for(let b=1;b<g;b++)m=Ce.addOrSubtract(y.multiply(l,m),f[b]);return m}addOrSubtract(l){if(!this.field.equals(l.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let f=this.coefficients,m=l.coefficients;if(f.length>m.length){const b=f;f=m,m=b}let g=new Int32Array(m.length);const y=m.length-f.length;j.arraycopy(m,0,g,0,y);for(let b=y;b<m.length;b++)g[b]=Ce.addOrSubtract(f[b-y],m[b]);return new ke(this.field,g)}multiply(l){if(!this.field.equals(l.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const f=this.coefficients,m=f.length,g=l.coefficients,y=g.length,b=new Int32Array(m+y-1),S=this.field;for(let T=0;T<m;T++){const D=f[T];for(let $=0;$<y;$++)b[T+$]=Ce.addOrSubtract(b[T+$],S.multiply(D,g[$]))}return new ke(S,b)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const f=this.coefficients.length,m=this.field,g=new Int32Array(f),y=this.coefficients;for(let b=0;b<f;b++)g[b]=m.multiply(y[b],l);return new ke(m,g)}multiplyByMonomial(l,f){if(l<0)throw new p;if(f===0)return this.field.getZero();const m=this.coefficients,g=m.length,y=new Int32Array(g+l),b=this.field;for(let S=0;S<g;S++)y[S]=b.multiply(m[S],f);return new ke(b,y)}divide(l){if(!this.field.equals(l.field))throw new p("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new p("Divide by 0");const f=this.field;let m=f.getZero(),g=this;const y=l.getCoefficient(l.getDegree()),b=f.inverse(y);for(;g.getDegree()>=l.getDegree()&&!g.isZero();){const S=g.getDegree()-l.getDegree(),T=f.multiply(g.getCoefficient(g.getDegree()),b),D=l.multiplyByMonomial(S,T),$=f.buildMonomial(S,T);m=m.addOrSubtract($),g=g.addOrSubtract(D)}return[m,g]}toString(){let l="";for(let f=this.getDegree();f>=0;f--){let m=this.getCoefficient(f);if(m!==0){if(m<0?(l+=" - ",m=-m):l.length>0&&(l+=" + "),f===0||m!==1){const g=this.field.log(m);g===0?l+="1":g===1?l+="a":(l+="a^",l+=g)}f!==0&&(f===1?l+="x":(l+="x^",l+=f))}}return l}}class Ie extends d{}Ie.kind="ArithmeticException";class We extends Ce{constructor(l,f,m){super(),this.primitive=l,this.size=f,this.generatorBase=m;const g=new Int32Array(f);let y=1;for(let S=0;S<f;S++)g[S]=y,y*=2,y>=f&&(y^=l,y&=f-1);this.expTable=g;const b=new Int32Array(f);for(let S=0;S<f-1;S++)b[g[S]]=S;this.logTable=b,this.zero=new ke(this,Int32Array.from([0])),this.one=new ke(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,f){if(l<0)throw new p;if(f===0)return this.zero;const m=new Int32Array(l+1);return m[0]=f,new ke(this,m)}inverse(l){if(l===0)throw new Ie;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,f){return l===0||f===0?0:this.expTable[(this.logTable[l]+this.logTable[f])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}We.AZTEC_DATA_12=new We(4201,4096,1),We.AZTEC_DATA_10=new We(1033,1024,1),We.AZTEC_DATA_6=new We(67,64,1),We.AZTEC_PARAM=new We(19,16,1),We.QR_CODE_FIELD_256=new We(285,256,0),We.DATA_MATRIX_FIELD_256=new We(301,256,1),We.AZTEC_DATA_8=We.DATA_MATRIX_FIELD_256,We.MAXICODE_FIELD_64=We.AZTEC_DATA_6;class Re extends d{}Re.kind="ReedSolomonException";class he extends d{}he.kind="IllegalStateException";class Ze{constructor(l){this.field=l}decode(l,f){const m=this.field,g=new ke(m,l),y=new Int32Array(f);let b=!0;for(let fe=0;fe<f;fe++){const Ne=g.evaluateAt(m.exp(fe+m.getGeneratorBase()));y[y.length-1-fe]=Ne,Ne!==0&&(b=!1)}if(b)return;const S=new ke(m,y),T=this.runEuclideanAlgorithm(m.buildMonomial(f,1),S,f),D=T[0],$=T[1],Y=this.findErrorLocations(D),ee=this.findErrorMagnitudes($,Y);for(let fe=0;fe<Y.length;fe++){const Ne=l.length-1-m.log(Y[fe]);if(Ne<0)throw new Re("Bad error location");l[Ne]=We.addOrSubtract(l[Ne],ee[fe])}}runEuclideanAlgorithm(l,f,m){if(l.getDegree()<f.getDegree()){const fe=l;l=f,f=fe}const g=this.field;let y=l,b=f,S=g.getZero(),T=g.getOne();for(;b.getDegree()>=(m/2|0);){let fe=y,Ne=S;if(y=b,S=T,y.isZero())throw new Re("r_{i-1} was zero");b=fe;let Ae=g.getZero();const Oe=y.getCoefficient(y.getDegree()),Fe=g.inverse(Oe);for(;b.getDegree()>=y.getDegree()&&!b.isZero();){const Ye=b.getDegree()-y.getDegree(),et=g.multiply(b.getCoefficient(b.getDegree()),Fe);Ae=Ae.addOrSubtract(g.buildMonomial(Ye,et)),b=b.addOrSubtract(y.multiplyByMonomial(Ye,et))}if(T=Ae.multiply(S).addOrSubtract(Ne),b.getDegree()>=y.getDegree())throw new he("Division algorithm failed to reduce polynomial?")}const D=T.getCoefficient(0);if(D===0)throw new Re("sigmaTilde(0) was zero");const $=g.inverse(D),Y=T.multiplyScalar($),ee=b.multiplyScalar($);return[Y,ee]}findErrorLocations(l){const f=l.getDegree();if(f===1)return Int32Array.from([l.getCoefficient(1)]);const m=new Int32Array(f);let g=0;const y=this.field;for(let b=1;b<y.getSize()&&g<f;b++)l.evaluateAt(b)===0&&(m[g]=y.inverse(b),g++);if(g!==f)throw new Re("Error locator degree does not match number of roots");return m}findErrorMagnitudes(l,f){const m=f.length,g=new Int32Array(m),y=this.field;for(let b=0;b<m;b++){const S=y.inverse(f[b]);let T=1;for(let D=0;D<m;D++)if(b!==D){const $=y.multiply(f[D],S),Y=$&1?$&-2:$|1;T=y.multiply(T,Y)}g[b]=y.multiply(l.evaluateAt(S),y.inverse(T)),y.getGeneratorBase()!==0&&(g[b]=y.multiply(g[b],S))}return g}}var ot;(function(X){X[X.UPPER=0]="UPPER",X[X.LOWER=1]="LOWER",X[X.MIXED=2]="MIXED",X[X.DIGIT=3]="DIGIT",X[X.PUNCT=4]="PUNCT",X[X.BINARY=5]="BINARY"})(ot||(ot={}));class it{decode(l){this.ddata=l;let f=l.getBits(),m=this.extractBits(f),g=this.correctBits(m),y=it.convertBoolArrayToByteArray(g),b=it.getEncodedData(g),S=new le(y,b,null,null);return S.setNumBits(g.length),S}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let f=l.length,m=ot.UPPER,g=ot.UPPER,y="",b=0;for(;b<f;)if(g===ot.BINARY){if(f-b<5)break;let S=it.readCode(l,b,5);if(b+=5,S===0){if(f-b<11)break;S=it.readCode(l,b,11)+31,b+=11}for(let T=0;T<S;T++){if(f-b<8){b=f;break}const D=it.readCode(l,b,8);y+=q.castAsNonUtf8Char(D),b+=8}g=m}else{let S=g===ot.DIGIT?4:5;if(f-b<S)break;let T=it.readCode(l,b,S);b+=S;let D=it.getCharacter(g,T);D.startsWith("CTRL_")?(m=g,g=it.getTable(D.charAt(5)),D.charAt(6)==="L"&&(m=g)):(y+=D,g=m)}return y}static getTable(l){switch(l){case"L":return ot.LOWER;case"P":return ot.PUNCT;case"M":return ot.MIXED;case"D":return ot.DIGIT;case"B":return ot.BINARY;case"U":default:return ot.UPPER}}static getCharacter(l,f){switch(l){case ot.UPPER:return it.UPPER_TABLE[f];case ot.LOWER:return it.LOWER_TABLE[f];case ot.MIXED:return it.MIXED_TABLE[f];case ot.PUNCT:return it.PUNCT_TABLE[f];case ot.DIGIT:return it.DIGIT_TABLE[f];default:throw new he("Bad table")}}correctBits(l){let f,m;this.ddata.getNbLayers()<=2?(m=6,f=We.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,f=We.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,f=We.AZTEC_DATA_10):(m=12,f=We.AZTEC_DATA_12);let g=this.ddata.getNbDatablocks(),y=l.length/m;if(y<g)throw new F;let b=l.length%m,S=new Int32Array(y);for(let ee=0;ee<y;ee++,b+=m)S[ee]=it.readCode(l,b,m);try{new Ze(f).decode(S,y-g)}catch(ee){throw new F(ee)}let T=(1<<m)-1,D=0;for(let ee=0;ee<g;ee++){let fe=S[ee];if(fe===0||fe===T)throw new F;(fe===1||fe===T-1)&&D++}let $=new Array(g*m-D),Y=0;for(let ee=0;ee<g;ee++){let fe=S[ee];if(fe===1||fe===T-1)$.fill(fe>1,Y,Y+m-1),Y+=m-1;else for(let Ne=m-1;Ne>=0;--Ne)$[Y++]=(fe&1<<Ne)!==0}return $}extractBits(l){let f=this.ddata.isCompact(),m=this.ddata.getNbLayers(),g=(f?11:14)+m*4,y=new Int32Array(g),b=new Array(this.totalBitsInLayer(m,f));if(f)for(let S=0;S<y.length;S++)y[S]=S;else{let S=g+1+2*E.truncDivision(E.truncDivision(g,2)-1,15),T=g/2,D=E.truncDivision(S,2);for(let $=0;$<T;$++){let Y=$+E.truncDivision($,15);y[T-$-1]=D-Y-1,y[T+$]=D+Y+1}}for(let S=0,T=0;S<m;S++){let D=(m-S)*4+(f?9:12),$=S*2,Y=g-1-$;for(let ee=0;ee<D;ee++){let fe=ee*2;for(let Ne=0;Ne<2;Ne++)b[T+fe+Ne]=l.get(y[$+Ne],y[$+ee]),b[T+2*D+fe+Ne]=l.get(y[$+ee],y[Y-Ne]),b[T+4*D+fe+Ne]=l.get(y[Y-Ne],y[Y-ee]),b[T+6*D+fe+Ne]=l.get(y[Y-ee],y[$+Ne])}T+=D*8}return b}static readCode(l,f,m){let g=0;for(let y=f;y<f+m;y++)g<<=1,l[y]&&(g|=1);return g}static readByte(l,f){let m=l.length-f;return m>=8?it.readCode(l,f,8):it.readCode(l,f,m)<<8-m}static convertBoolArrayToByteArray(l){let f=new Uint8Array((l.length+7)/8);for(let m=0;m<f.length;m++)f[m]=it.readByte(l,8*m);return f}totalBitsInLayer(l,f){return((f?88:112)+16*l)*l}}it.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],it.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],it.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],it.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],it.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ve{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,f,m,g){const y=l-m,b=f-g;return Math.sqrt(y*y+b*b)}static sum(l){let f=0;for(let m=0,g=l.length;m!==g;m++){const y=l[m];f+=y}return f}}class At{static floatToIntBits(l){return l}}At.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(l,f){this.x=l,this.y=f}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof He){const f=l;return this.x===f.x&&this.y===f.y}return!1}hashCode(){return 31*At.floatToIntBits(this.x)+At.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const f=this.distance(l[0],l[1]),m=this.distance(l[1],l[2]),g=this.distance(l[0],l[2]);let y,b,S;if(m>=f&&m>=g?(b=l[0],y=l[1],S=l[2]):g>=m&&g>=f?(b=l[1],y=l[0],S=l[2]):(b=l[2],y=l[0],S=l[1]),this.crossProductZ(y,b,S)<0){const T=y;y=S,S=T}l[0]=y,l[1]=b,l[2]=S}static distance(l,f){return Ve.distance(l.x,l.y,f.x,f.y)}static crossProductZ(l,f,m){const g=f.x,y=f.y;return(m.x-g)*(l.y-y)-(m.y-y)*(l.x-g)}}class Xt{constructor(l,f){this.bits=l,this.points=f}getBits(){return this.bits}getPoints(){return this.points}}class Ot extends Xt{constructor(l,f,m,g,y){super(l,f),this.compact=m,this.nbDatablocks=g,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ar{constructor(l,f,m,g){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),f==null&&(f=ar.INIT_SIZE),m==null&&(m=l.getWidth()/2|0),g==null&&(g=l.getHeight()/2|0);const y=f/2|0;if(this.leftInit=m-y,this.rightInit=m+y,this.upInit=g-y,this.downInit=g+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let l=this.leftInit,f=this.rightInit,m=this.upInit,g=this.downInit,y=!1,b=!0,S=!1,T=!1,D=!1,$=!1,Y=!1;const ee=this.width,fe=this.height;for(;b;){b=!1;let Ne=!0;for(;(Ne||!T)&&f<ee;)Ne=this.containsBlackPoint(m,g,f,!1),Ne?(f++,b=!0,T=!0):T||f++;if(f>=ee){y=!0;break}let Ae=!0;for(;(Ae||!D)&&g<fe;)Ae=this.containsBlackPoint(l,f,g,!0),Ae?(g++,b=!0,D=!0):D||g++;if(g>=fe){y=!0;break}let Oe=!0;for(;(Oe||!$)&&l>=0;)Oe=this.containsBlackPoint(m,g,l,!1),Oe?(l--,b=!0,$=!0):$||l--;if(l<0){y=!0;break}let Fe=!0;for(;(Fe||!Y)&&m>=0;)Fe=this.containsBlackPoint(l,f,m,!0),Fe?(m--,b=!0,Y=!0):Y||m--;if(m<0){y=!0;break}b&&(S=!0)}if(!y&&S){const Ne=f-l;let Ae=null;for(let et=1;Ae===null&&et<Ne;et++)Ae=this.getBlackPointOnSegment(l,g-et,l+et,g);if(Ae==null)throw new H;let Oe=null;for(let et=1;Oe===null&&et<Ne;et++)Oe=this.getBlackPointOnSegment(l,m+et,l+et,m);if(Oe==null)throw new H;let Fe=null;for(let et=1;Fe===null&&et<Ne;et++)Fe=this.getBlackPointOnSegment(f,m+et,f-et,m);if(Fe==null)throw new H;let Ye=null;for(let et=1;Ye===null&&et<Ne;et++)Ye=this.getBlackPointOnSegment(f,g-et,f-et,g);if(Ye==null)throw new H;return this.centerEdges(Ye,Ae,Fe,Oe)}else throw new H}getBlackPointOnSegment(l,f,m,g){const y=Ve.round(Ve.distance(l,f,m,g)),b=(m-l)/y,S=(g-f)/y,T=this.image;for(let D=0;D<y;D++){const $=Ve.round(l+D*b),Y=Ve.round(f+D*S);if(T.get($,Y))return new He($,Y)}return null}centerEdges(l,f,m,g){const y=l.getX(),b=l.getY(),S=f.getX(),T=f.getY(),D=m.getX(),$=m.getY(),Y=g.getX(),ee=g.getY(),fe=ar.CORR;return y<this.width/2?[new He(Y-fe,ee+fe),new He(S+fe,T+fe),new He(D-fe,$-fe),new He(y+fe,b-fe)]:[new He(Y+fe,ee+fe),new He(S+fe,T-fe),new He(D-fe,$+fe),new He(y-fe,b-fe)]}containsBlackPoint(l,f,m,g){const y=this.image;if(g){for(let b=l;b<=f;b++)if(y.get(b,m))return!0}else for(let b=l;b<=f;b++)if(y.get(m,b))return!0;return!1}}ar.INIT_SIZE=10,ar.CORR=1;class Yt{static checkAndNudgePoints(l,f){const m=l.getWidth(),g=l.getHeight();let y=!0;for(let b=0;b<f.length&&y;b+=2){const S=Math.floor(f[b]),T=Math.floor(f[b+1]);if(S<-1||S>m||T<-1||T>g)throw new H;y=!1,S===-1?(f[b]=0,y=!0):S===m&&(f[b]=m-1,y=!0),T===-1?(f[b+1]=0,y=!0):T===g&&(f[b+1]=g-1,y=!0)}y=!0;for(let b=f.length-2;b>=0&&y;b-=2){const S=Math.floor(f[b]),T=Math.floor(f[b+1]);if(S<-1||S>m||T<-1||T>g)throw new H;y=!1,S===-1?(f[b]=0,y=!0):S===m&&(f[b]=m-1,y=!0),T===-1?(f[b+1]=0,y=!0):T===g&&(f[b+1]=g-1,y=!0)}}}class Lt{constructor(l,f,m,g,y,b,S,T,D){this.a11=l,this.a21=f,this.a31=m,this.a12=g,this.a22=y,this.a32=b,this.a13=S,this.a23=T,this.a33=D}static quadrilateralToQuadrilateral(l,f,m,g,y,b,S,T,D,$,Y,ee,fe,Ne,Ae,Oe){const Fe=Lt.quadrilateralToSquare(l,f,m,g,y,b,S,T);return Lt.squareToQuadrilateral(D,$,Y,ee,fe,Ne,Ae,Oe).times(Fe)}transformPoints(l){const f=l.length,m=this.a11,g=this.a12,y=this.a13,b=this.a21,S=this.a22,T=this.a23,D=this.a31,$=this.a32,Y=this.a33;for(let ee=0;ee<f;ee+=2){const fe=l[ee],Ne=l[ee+1],Ae=y*fe+T*Ne+Y;l[ee]=(m*fe+b*Ne+D)/Ae,l[ee+1]=(g*fe+S*Ne+$)/Ae}}transformPointsWithValues(l,f){const m=this.a11,g=this.a12,y=this.a13,b=this.a21,S=this.a22,T=this.a23,D=this.a31,$=this.a32,Y=this.a33,ee=l.length;for(let fe=0;fe<ee;fe++){const Ne=l[fe],Ae=f[fe],Oe=y*Ne+T*Ae+Y;l[fe]=(m*Ne+b*Ae+D)/Oe,f[fe]=(g*Ne+S*Ae+$)/Oe}}static squareToQuadrilateral(l,f,m,g,y,b,S,T){const D=l-m+y-S,$=f-g+b-T;if(D===0&&$===0)return new Lt(m-l,y-m,l,g-f,b-g,f,0,0,1);{const Y=m-y,ee=S-y,fe=g-b,Ne=T-b,Ae=Y*Ne-ee*fe,Oe=(D*Ne-ee*$)/Ae,Fe=(Y*$-D*fe)/Ae;return new Lt(m-l+Oe*m,S-l+Fe*S,l,g-f+Oe*g,T-f+Fe*T,f,Oe,Fe,1)}}static quadrilateralToSquare(l,f,m,g,y,b,S,T){return Lt.squareToQuadrilateral(l,f,m,g,y,b,S,T).buildAdjoint()}buildAdjoint(){return new Lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new Lt(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class Sr extends Yt{sampleGrid(l,f,m,g,y,b,S,T,D,$,Y,ee,fe,Ne,Ae,Oe,Fe,Ye,et){const Je=Lt.quadrilateralToQuadrilateral(g,y,b,S,T,D,$,Y,ee,fe,Ne,Ae,Oe,Fe,Ye,et);return this.sampleGridWithTransform(l,f,m,Je)}sampleGridWithTransform(l,f,m,g){if(f<=0||m<=0)throw new H;const y=new G(f,m),b=new Float32Array(2*f);for(let S=0;S<m;S++){const T=b.length,D=S+.5;for(let $=0;$<T;$+=2)b[$]=$/2+.5,b[$+1]=D;g.transformPoints(b),Yt.checkAndNudgePoints(l,b);try{for(let $=0;$<T;$+=2)l.get(Math.floor(b[$]),Math.floor(b[$+1]))&&y.set($/2,S)}catch{throw new H}}return y}}class $t{static setGridSampler(l){$t.gridSampler=l}static getInstance(){return $t.gridSampler}}$t.gridSampler=new Sr;class ht{constructor(l,f){this.x=l,this.y=f}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qt{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let f=this.getMatrixCenter(),m=this.getBullsEyeCorners(f);if(l){let b=m[0];m[0]=m[2],m[2]=b}this.extractParameters(m);let g=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),y=this.getMatrixCornerPoints(m);return new Ot(g,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new H;let f=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(l[0],l[1],f),this.sampleLine(l[1],l[2],f),this.sampleLine(l[2],l[3],f),this.sampleLine(l[3],l[0],f)]);this.shift=this.getRotation(m,f);let g=0;for(let b=0;b<4;b++){let S=m[(this.shift+b)%4];this.compact?(g<<=7,g+=S>>1&127):(g<<=10,g+=(S>>2&992)+(S>>1&31))}let y=this.getCorrectedParameterData(g,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(l,f){let m=0;l.forEach((g,y,b)=>{let S=(g>>f-2<<1)+(g&1);m=(m<<3)+S}),m=((m&1)<<11)+(m>>1);for(let g=0;g<4;g++)if(E.bitCount(m^this.EXPECTED_CORNER_BITS[g])<=2)return g;throw new H}getCorrectedParameterData(l,f){let m,g;f?(m=7,g=2):(m=10,g=4);let y=m-g,b=new Int32Array(m);for(let T=m-1;T>=0;--T)b[T]=l&15,l>>=4;try{new Ze(We.AZTEC_PARAM).decode(b,y)}catch{throw new H}let S=0;for(let T=0;T<g;T++)S=(S<<4)+b[T];return S}getBullsEyeCorners(l){let f=l,m=l,g=l,y=l,b=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Y=this.getFirstDifferent(f,b,1,-1),ee=this.getFirstDifferent(m,b,1,1),fe=this.getFirstDifferent(g,b,-1,1),Ne=this.getFirstDifferent(y,b,-1,-1);if(this.nbCenterLayers>2){let Ae=this.distancePoint(Ne,Y)*this.nbCenterLayers/(this.distancePoint(y,f)*(this.nbCenterLayers+2));if(Ae<.75||Ae>1.25||!this.isWhiteOrBlackRectangle(Y,ee,fe,Ne))break}f=Y,m=ee,g=fe,y=Ne,b=!b}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let S=new He(f.getX()+.5,f.getY()-.5),T=new He(m.getX()+.5,m.getY()+.5),D=new He(g.getX()-.5,g.getY()+.5),$=new He(y.getX()-.5,y.getY()-.5);return this.expandSquare([S,T,D,$],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,f,m,g;try{let S=new ar(this.image).detect();l=S[0],f=S[1],m=S[2],g=S[3]}catch{let T=this.image.getWidth()/2,D=this.image.getHeight()/2;l=this.getFirstDifferent(new ht(T+7,D-7),!1,1,-1).toResultPoint(),f=this.getFirstDifferent(new ht(T+7,D+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new ht(T-7,D+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new ht(T-7,D-7),!1,-1,-1).toResultPoint()}let y=Ve.round((l.getX()+g.getX()+f.getX()+m.getX())/4),b=Ve.round((l.getY()+g.getY()+f.getY()+m.getY())/4);try{let S=new ar(this.image,15,y,b).detect();l=S[0],f=S[1],m=S[2],g=S[3]}catch{l=this.getFirstDifferent(new ht(y+7,b-7),!1,1,-1).toResultPoint(),f=this.getFirstDifferent(new ht(y+7,b+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new ht(y-7,b+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new ht(y-7,b-7),!1,-1,-1).toResultPoint()}return y=Ve.round((l.getX()+g.getX()+f.getX()+m.getX())/4),b=Ve.round((l.getY()+g.getY()+f.getY()+m.getY())/4),new ht(y,b)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,f,m,g,y){let b=$t.getInstance(),S=this.getDimension(),T=S/2-this.nbCenterLayers,D=S/2+this.nbCenterLayers;return b.sampleGrid(l,S,S,T,T,D,T,D,D,T,D,f.getX(),f.getY(),m.getX(),m.getY(),g.getX(),g.getY(),y.getX(),y.getY())}sampleLine(l,f,m){let g=0,y=this.distanceResultPoint(l,f),b=y/m,S=l.getX(),T=l.getY(),D=b*(f.getX()-l.getX())/y,$=b*(f.getY()-l.getY())/y;for(let Y=0;Y<m;Y++)this.image.get(Ve.round(S+Y*D),Ve.round(T+Y*$))&&(g|=1<<m-Y-1);return g}isWhiteOrBlackRectangle(l,f,m,g){let y=3;l=new ht(l.getX()-y,l.getY()+y),f=new ht(f.getX()-y,f.getY()-y),m=new ht(m.getX()+y,m.getY()-y),g=new ht(g.getX()+y,g.getY()+y);let b=this.getColor(g,l);if(b===0)return!1;let S=this.getColor(l,f);return S!==b||(S=this.getColor(f,m),S!==b)?!1:(S=this.getColor(m,g),S===b)}getColor(l,f){let m=this.distancePoint(l,f),g=(f.getX()-l.getX())/m,y=(f.getY()-l.getY())/m,b=0,S=l.getX(),T=l.getY(),D=this.image.get(l.getX(),l.getY()),$=Math.ceil(m);for(let ee=0;ee<$;ee++)S+=g,T+=y,this.image.get(Ve.round(S),Ve.round(T))!==D&&b++;let Y=b/m;return Y>.1&&Y<.9?0:Y<=.1===D?1:-1}getFirstDifferent(l,f,m,g){let y=l.getX()+m,b=l.getY()+g;for(;this.isValid(y,b)&&this.image.get(y,b)===f;)y+=m,b+=g;for(y-=m,b-=g;this.isValid(y,b)&&this.image.get(y,b)===f;)y+=m;for(y-=m;this.isValid(y,b)&&this.image.get(y,b)===f;)b+=g;return b-=g,new ht(y,b)}expandSquare(l,f,m){let g=m/(2*f),y=l[0].getX()-l[2].getX(),b=l[0].getY()-l[2].getY(),S=(l[0].getX()+l[2].getX())/2,T=(l[0].getY()+l[2].getY())/2,D=new He(S+g*y,T+g*b),$=new He(S-g*y,T-g*b);y=l[1].getX()-l[3].getX(),b=l[1].getY()-l[3].getY(),S=(l[1].getX()+l[3].getX())/2,T=(l[1].getY()+l[3].getY())/2;let Y=new He(S+g*y,T+g*b),ee=new He(S-g*y,T-g*b);return[D,Y,$,ee]}isValid(l,f){return l>=0&&l<this.image.getWidth()&&f>0&&f<this.image.getHeight()}isValidPoint(l){let f=Ve.round(l.getX()),m=Ve.round(l.getY());return this.isValid(f,m)}distancePoint(l,f){return Ve.distance(l.getX(),l.getY(),f.getX(),f.getY())}distanceResultPoint(l,f){return Ve.distance(l.getX(),l.getY(),f.getX(),f.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class Et{decode(l,f=null){let m=null,g=new qt(l.getBlackMatrix()),y=null,b=null;try{let $=g.detectMirror(!1);y=$.getPoints(),this.reportFoundResultPoints(f,y),b=new it().decode($)}catch($){m=$}if(b==null)try{let $=g.detectMirror(!0);y=$.getPoints(),this.reportFoundResultPoints(f,y),b=new it().decode($)}catch($){throw m??$}let S=new ne(b.getText(),b.getRawBytes(),b.getNumBits(),y,be.AZTEC,j.currentTimeMillis()),T=b.getByteSegments();T!=null&&S.putMetadata(xe.BYTE_SEGMENTS,T);let D=b.getECLevel();return D!=null&&S.putMetadata(xe.ERROR_CORRECTION_LEVEL,D),S}reportFoundResultPoints(l,f){if(l!=null){let m=l.get(B.NEED_RESULT_POINT_CALLBACK);m!=null&&f.forEach((g,y,b)=>{m.foundPossibleResultPoint(g)})}}reset(){}}class $r extends se{constructor(l=500){super(new Et,l)}}class Ut{decode(l,f){try{return this.doDecode(l,f)}catch{if(f&&f.get(B.TRY_HARDER)===!0&&l.isRotateSupported()){const y=l.rotateCounterClockwise(),b=this.doDecode(y,f),S=b.getResultMetadata();let T=270;S!==null&&S.get(xe.ORIENTATION)===!0&&(T=T+S.get(xe.ORIENTATION)%360),b.putMetadata(xe.ORIENTATION,T);const D=b.getResultPoints();if(D!==null){const $=y.getHeight();for(let Y=0;Y<D.length;Y++)D[Y]=new He($-D[Y].getY()-1,D[Y].getX())}return b}else throw new H}}reset(){}doDecode(l,f){const m=l.getWidth(),g=l.getHeight();let y=new _(m);const b=f&&f.get(B.TRY_HARDER)===!0,S=Math.max(1,g>>(b?8:5));let T;b?T=g:T=15;const D=Math.trunc(g/2);for(let $=0;$<T;$++){const Y=Math.trunc(($+1)/2),ee=($&1)===0,fe=D+S*(ee?Y:-Y);if(fe<0||fe>=g)break;try{y=l.getBlackRow(fe,y)}catch{continue}for(let Ne=0;Ne<2;Ne++){if(Ne===1&&(y.reverse(),f&&f.get(B.NEED_RESULT_POINT_CALLBACK)===!0)){const Ae=new Map;f.forEach((Oe,Fe)=>Ae.set(Fe,Oe)),Ae.delete(B.NEED_RESULT_POINT_CALLBACK),f=Ae}try{const Ae=this.decodeRow(fe,y,f);if(Ne===1){Ae.putMetadata(xe.ORIENTATION,180);const Oe=Ae.getResultPoints();Oe!==null&&(Oe[0]=new He(m-Oe[0].getX()-1,Oe[0].getY()),Oe[1]=new He(m-Oe[1].getX()-1,Oe[1].getY()))}return Ae}catch{}}}throw new H}static recordPattern(l,f,m){const g=m.length;for(let D=0;D<g;D++)m[D]=0;const y=l.getSize();if(f>=y)throw new H;let b=!l.get(f),S=0,T=f;for(;T<y;){if(l.get(T)!==b)m[S]++;else{if(++S===g)break;m[S]=1,b=!b}T++}if(!(S===g||S===g-1&&T===y))throw new H}static recordPatternInReverse(l,f,m){let g=m.length,y=l.get(f);for(;f>0&&g>=0;)l.get(--f)!==y&&(g--,y=!y);if(g>=0)throw new H;Ut.recordPattern(l,f+1,m)}static patternMatchVariance(l,f,m){const g=l.length;let y=0,b=0;for(let D=0;D<g;D++)y+=l[D],b+=f[D];if(y<b)return Number.POSITIVE_INFINITY;const S=y/b;m*=S;let T=0;for(let D=0;D<g;D++){const $=l[D],Y=f[D]*S,ee=$>Y?$-Y:Y-$;if(ee>m)return Number.POSITIVE_INFINITY;T+=ee}return T/y}}class qe extends Ut{static findStartPattern(l){const f=l.getSize(),m=l.getNextSet(0);let g=0,y=Int32Array.from([0,0,0,0,0,0]),b=m,S=!1;const T=6;for(let D=m;D<f;D++)if(l.get(D)!==S)y[g]++;else{if(g===T-1){let $=qe.MAX_AVG_VARIANCE,Y=-1;for(let ee=qe.CODE_START_A;ee<=qe.CODE_START_C;ee++){const fe=Ut.patternMatchVariance(y,qe.CODE_PATTERNS[ee],qe.MAX_INDIVIDUAL_VARIANCE);fe<$&&($=fe,Y=ee)}if(Y>=0&&l.isRange(Math.max(0,b-(D-b)/2),b,!1))return Int32Array.from([b,D,Y]);b+=y[0]+y[1],y=y.slice(2,y.length-1),y[g-1]=0,y[g]=0,g--}else g++;y[g]=1,S=!S}throw new H}static decodeCode(l,f,m){Ut.recordPattern(l,m,f);let g=qe.MAX_AVG_VARIANCE,y=-1;for(let b=0;b<qe.CODE_PATTERNS.length;b++){const S=qe.CODE_PATTERNS[b],T=this.patternMatchVariance(f,S,qe.MAX_INDIVIDUAL_VARIANCE);T<g&&(g=T,y=b)}if(y>=0)return y;throw new H}decodeRow(l,f,m){const g=m&&m.get(B.ASSUME_GS1)===!0,y=qe.findStartPattern(f),b=y[2];let S=0;const T=new Uint8Array(20);T[S++]=b;let D;switch(b){case qe.CODE_START_A:D=qe.CODE_CODE_A;break;case qe.CODE_START_B:D=qe.CODE_CODE_B;break;case qe.CODE_START_C:D=qe.CODE_CODE_C;break;default:throw new F}let $=!1,Y=!1,ee="",fe=y[0],Ne=y[1];const Ae=Int32Array.from([0,0,0,0,0,0]);let Oe=0,Fe=0,Ye=b,et=0,Je=!0,Dt=!1,zt=!1;for(;!$;){const ul=Y;switch(Y=!1,Oe=Fe,Fe=qe.decodeCode(f,Ae,Ne),T[S++]=Fe,Fe!==qe.CODE_STOP&&(Je=!0),Fe!==qe.CODE_STOP&&(et++,Ye+=et*Fe),fe=Ne,Ne+=Ae.reduce((K0,eu)=>K0+eu,0),Fe){case qe.CODE_START_A:case qe.CODE_START_B:case qe.CODE_START_C:throw new F}switch(D){case qe.CODE_CODE_A:if(Fe<64)zt===Dt?ee+=String.fromCharCode(32+Fe):ee+=String.fromCharCode(32+Fe+128),zt=!1;else if(Fe<96)zt===Dt?ee+=String.fromCharCode(Fe-64):ee+=String.fromCharCode(Fe+64),zt=!1;else switch(Fe!==qe.CODE_STOP&&(Je=!1),Fe){case qe.CODE_FNC_1:g&&(ee.length===0?ee+="]C1":ee+="");break;case qe.CODE_FNC_2:case qe.CODE_FNC_3:break;case qe.CODE_FNC_4_A:!Dt&&zt?(Dt=!0,zt=!1):Dt&&zt?(Dt=!1,zt=!1):zt=!0;break;case qe.CODE_SHIFT:Y=!0,D=qe.CODE_CODE_B;break;case qe.CODE_CODE_B:D=qe.CODE_CODE_B;break;case qe.CODE_CODE_C:D=qe.CODE_CODE_C;break;case qe.CODE_STOP:$=!0;break}break;case qe.CODE_CODE_B:if(Fe<96)zt===Dt?ee+=String.fromCharCode(32+Fe):ee+=String.fromCharCode(32+Fe+128),zt=!1;else switch(Fe!==qe.CODE_STOP&&(Je=!1),Fe){case qe.CODE_FNC_1:g&&(ee.length===0?ee+="]C1":ee+="");break;case qe.CODE_FNC_2:case qe.CODE_FNC_3:break;case qe.CODE_FNC_4_B:!Dt&&zt?(Dt=!0,zt=!1):Dt&&zt?(Dt=!1,zt=!1):zt=!0;break;case qe.CODE_SHIFT:Y=!0,D=qe.CODE_CODE_A;break;case qe.CODE_CODE_A:D=qe.CODE_CODE_A;break;case qe.CODE_CODE_C:D=qe.CODE_CODE_C;break;case qe.CODE_STOP:$=!0;break}break;case qe.CODE_CODE_C:if(Fe<100)Fe<10&&(ee+="0"),ee+=Fe;else switch(Fe!==qe.CODE_STOP&&(Je=!1),Fe){case qe.CODE_FNC_1:g&&(ee.length===0?ee+="]C1":ee+="");break;case qe.CODE_CODE_A:D=qe.CODE_CODE_A;break;case qe.CODE_CODE_B:D=qe.CODE_CODE_B;break;case qe.CODE_STOP:$=!0;break}break}ul&&(D=D===qe.CODE_CODE_A?qe.CODE_CODE_B:qe.CODE_CODE_A)}const Zn=Ne-fe;if(Ne=f.getNextUnset(Ne),!f.isRange(Ne,Math.min(f.getSize(),Ne+(Ne-fe)/2),!1))throw new H;if(Ye-=et*Oe,Ye%103!==Oe)throw new x;const ba=ee.length;if(ba===0)throw new H;ba>0&&Je&&(D===qe.CODE_CODE_C?ee=ee.substring(0,ba-2):ee=ee.substring(0,ba-1));const sa=(y[1]+y[0])/2,_r=fe+Zn/2,Jn=T.length,Ga=new Uint8Array(Jn);for(let ul=0;ul<Jn;ul++)Ga[ul]=T[ul];const cl=[new He(sa,l),new He(_r,l)];return new ne(ee,Ga,0,cl,be.CODE_128,new Date().getTime())}}qe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],qe.MAX_AVG_VARIANCE=.25,qe.MAX_INDIVIDUAL_VARIANCE=.7,qe.CODE_SHIFT=98,qe.CODE_CODE_C=99,qe.CODE_CODE_B=100,qe.CODE_CODE_A=101,qe.CODE_FNC_1=102,qe.CODE_FNC_2=97,qe.CODE_FNC_3=96,qe.CODE_FNC_4_A=101,qe.CODE_FNC_4_B=100,qe.CODE_START_A=103,qe.CODE_START_B=104,qe.CODE_START_C=105,qe.CODE_STOP=106;class jt extends Ut{constructor(l=!1,f=!1){super(),this.usingCheckDigit=l,this.extendedMode=f,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,f,m){let g=this.counters;g.fill(0),this.decodeRowResult="";let y=jt.findAsteriskPattern(f,g),b=f.getNextSet(y[1]),S=f.getSize(),T,D;do{jt.recordPattern(f,b,g);let Ae=jt.toNarrowWidePattern(g);if(Ae<0)throw new H;T=jt.patternToChar(Ae),this.decodeRowResult+=T,D=b;for(let Oe of g)b+=Oe;b=f.getNextSet(b)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let $=0;for(let Ae of g)$+=Ae;let Y=b-D-$;if(b!==S&&Y*2<$)throw new H;if(this.usingCheckDigit){let Ae=this.decodeRowResult.length-1,Oe=0;for(let Fe=0;Fe<Ae;Fe++)Oe+=jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Fe));if(this.decodeRowResult.charAt(Ae)!==jt.ALPHABET_STRING.charAt(Oe%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,Ae)}if(this.decodeRowResult.length===0)throw new H;let ee;this.extendedMode?ee=jt.decodeExtended(this.decodeRowResult):ee=this.decodeRowResult;let fe=(y[1]+y[0])/2,Ne=D+$/2;return new ne(ee,null,0,[new He(fe,l),new He(Ne,l)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(l,f){let m=l.getSize(),g=l.getNextSet(0),y=0,b=g,S=!1,T=f.length;for(let D=g;D<m;D++)if(l.get(D)!==S)f[y]++;else{if(y===T-1){if(this.toNarrowWidePattern(f)===jt.ASTERISK_ENCODING&&l.isRange(Math.max(0,b-Math.floor((D-b)/2)),b,!1))return[b,D];b+=f[0]+f[1],f.copyWithin(0,2,2+y-1),f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,S=!S}throw new H}static toNarrowWidePattern(l){let f=l.length,m=0,g;do{let y=2147483647;for(let T of l)T<y&&T>m&&(y=T);m=y,g=0;let b=0,S=0;for(let T=0;T<f;T++){let D=l[T];D>m&&(S|=1<<f-1-T,g++,b+=D)}if(g===3){for(let T=0;T<f&&g>0;T++){let D=l[T];if(D>m&&(g--,D*2>=b))return-1}return S}}while(g>3);return-1}static patternToChar(l){for(let f=0;f<jt.CHARACTER_ENCODINGS.length;f++)if(jt.CHARACTER_ENCODINGS[f]===l)return jt.ALPHABET_STRING.charAt(f);if(l===jt.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(l){let f=l.length,m="";for(let g=0;g<f;g++){let y=l.charAt(g);if(y==="+"||y==="$"||y==="%"||y==="/"){let b=l.charAt(g+1),S="\0";switch(y){case"+":if(b>="A"&&b<="Z")S=String.fromCharCode(b.charCodeAt(0)+32);else throw new F;break;case"$":if(b>="A"&&b<="Z")S=String.fromCharCode(b.charCodeAt(0)-64);else throw new F;break;case"%":if(b>="A"&&b<="E")S=String.fromCharCode(b.charCodeAt(0)-38);else if(b>="F"&&b<="J")S=String.fromCharCode(b.charCodeAt(0)-11);else if(b>="K"&&b<="O")S=String.fromCharCode(b.charCodeAt(0)+16);else if(b>="P"&&b<="T")S=String.fromCharCode(b.charCodeAt(0)+43);else if(b==="U")S="\0";else if(b==="V")S="@";else if(b==="W")S="`";else if(b==="X"||b==="Y"||b==="Z")S="";else throw new F;break;case"/":if(b>="A"&&b<="O")S=String.fromCharCode(b.charCodeAt(0)-32);else if(b==="Z")S=":";else throw new F;break}m+=S,g++}else m+=y}return m}}jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],jt.ASTERISK_ENCODING=148;class Mt extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,f,m){let g=this.decodeStart(f),y=this.decodeEnd(f),b=new Q;Mt.decodeMiddle(f,g[1],y[0],b);let S=b.toString(),T=null;m!=null&&(T=m.get(B.ALLOWED_LENGTHS)),T==null&&(T=Mt.DEFAULT_ALLOWED_LENGTHS);let D=S.length,$=!1,Y=0;for(let Ne of T){if(D===Ne){$=!0;break}Ne>Y&&(Y=Ne)}if(!$&&D>Y&&($=!0),!$)throw new F;const ee=[new He(g[1],l),new He(y[0],l)];return new ne(S,null,0,ee,be.ITF,new Date().getTime())}static decodeMiddle(l,f,m,g){let y=new Int32Array(10),b=new Int32Array(5),S=new Int32Array(5);for(y.fill(0),b.fill(0),S.fill(0);f<m;){Ut.recordPattern(l,f,y);for(let D=0;D<5;D++){let $=2*D;b[D]=y[$],S[D]=y[$+1]}let T=Mt.decodeDigit(b);g.append(T.toString()),T=this.decodeDigit(S),g.append(T.toString()),y.forEach(function(D){f+=D})}}decodeStart(l){let f=Mt.skipWhiteSpace(l),m=Mt.findGuardPattern(l,f,Mt.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(l,m[0]),m}validateQuietZone(l,f){let m=this.narrowLineWidth*10;m=m<f?m:f;for(let g=f-1;m>0&&g>=0&&!l.get(g);g--)m--;if(m!==0)throw new H}static skipWhiteSpace(l){const f=l.getSize(),m=l.getNextSet(0);if(m===f)throw new H;return m}decodeEnd(l){l.reverse();try{let f=Mt.skipWhiteSpace(l),m;try{m=Mt.findGuardPattern(l,f,Mt.END_PATTERN_REVERSED[0])}catch(y){y instanceof H&&(m=Mt.findGuardPattern(l,f,Mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,m[0]);let g=m[0];return m[0]=l.getSize()-m[1],m[1]=l.getSize()-g,m}finally{l.reverse()}}static findGuardPattern(l,f,m){let g=m.length,y=new Int32Array(g),b=l.getSize(),S=!1,T=0,D=f;y.fill(0);for(let $=f;$<b;$++)if(l.get($)!==S)y[T]++;else{if(T===g-1){if(Ut.patternMatchVariance(y,m,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return[D,$];D+=y[0]+y[1],j.arraycopy(y,2,y,0,T-1),y[T-1]=0,y[T]=0,T--}else T++;y[T]=1,S=!S}throw new H}static decodeDigit(l){let f=Mt.MAX_AVG_VARIANCE,m=-1,g=Mt.PATTERNS.length;for(let y=0;y<g;y++){let b=Mt.PATTERNS[y],S=Ut.patternMatchVariance(l,b,Mt.MAX_INDIVIDUAL_VARIANCE);S<f?(f=S,m=y):S===f&&(m=-1)}if(m>=0)return m%10;throw new H}}Mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Mt.MAX_AVG_VARIANCE=.38,Mt.MAX_INDIVIDUAL_VARIANCE=.5,Mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Mt.START_PATTERN=Int32Array.from([1,1,1,1]),Mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ft extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let f=!1,m,g=0,y=Int32Array.from([0,0,0]);for(;!f;){y=Int32Array.from([0,0,0]),m=ft.findGuardPattern(l,g,!1,this.START_END_PATTERN,y);let b=m[0];g=m[1];let S=b-(g-b);S>=0&&(f=l.isRange(S,b,!1))}return m}static checkChecksum(l){return ft.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let f=l.length;if(f===0)return!1;let m=parseInt(l.charAt(f-1),10);return ft.getStandardUPCEANChecksum(l.substring(0,f-1))===m}static getStandardUPCEANChecksum(l){let f=l.length,m=0;for(let g=f-1;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}m*=3;for(let g=f-2;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}return(1e3-m)%10}static decodeEnd(l,f){return ft.findGuardPattern(l,f,!1,ft.START_END_PATTERN,new Int32Array(ft.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,f,m,g){return this.findGuardPattern(l,f,m,g,new Int32Array(g.length))}static findGuardPattern(l,f,m,g,y){let b=l.getSize();f=m?l.getNextUnset(f):l.getNextSet(f);let S=0,T=f,D=g.length,$=m;for(let Y=f;Y<b;Y++)if(l.get(Y)!==$)y[S]++;else{if(S===D-1){if(Ut.patternMatchVariance(y,g,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return Int32Array.from([T,Y]);T+=y[0]+y[1];let ee=y.slice(2,y.length-1);for(let fe=0;fe<S-1;fe++)y[fe]=ee[fe];y[S-1]=0,y[S]=0,S--}else S++;y[S]=1,$=!$}throw new H}static decodeDigit(l,f,m,g){this.recordPattern(l,m,f);let y=this.MAX_AVG_VARIANCE,b=-1,S=g.length;for(let T=0;T<S;T++){let D=g[T],$=Ut.patternMatchVariance(f,D,ft.MAX_INDIVIDUAL_VARIANCE);$<y&&(y=$,b=T)}if(b>=0)return b;throw new H}}ft.MAX_AVG_VARIANCE=.48,ft.MAX_INDIVIDUAL_VARIANCE=.7,ft.START_END_PATTERN=Int32Array.from([1,1,1]),ft.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ft.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ft.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,f,m){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(f,m,g),b=g.toString(),S=sr.parseExtensionString(b),T=[new He((m[0]+m[1])/2,l),new He(y,l)],D=new ne(b,null,0,T,be.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&D.putAllMetadata(S),D}decodeMiddle(l,f,m){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),b=f[1],S=0;for(let D=0;D<5&&b<y;D++){let $=ft.decodeDigit(l,g,b,ft.L_AND_G_PATTERNS);m+=String.fromCharCode(48+$%10);for(let Y of g)b+=Y;$>=10&&(S|=1<<4-D),D!==4&&(b=l.getNextSet(b),b=l.getNextUnset(b))}if(m.length!==5)throw new H;let T=this.determineCheckDigit(S);if(sr.extensionChecksum(m.toString())!==T)throw new H;return b}static extensionChecksum(l){let f=l.length,m=0;for(let g=f-2;g>=0;g-=2)m+=l.charAt(g).charCodeAt(0)-48;m*=3;for(let g=f-1;g>=0;g-=2)m+=l.charAt(g).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(l){for(let f=0;f<10;f++)if(l===this.CHECK_DIGIT_ENCODINGS[f])return f;throw new H}static parseExtensionString(l){if(l.length!==5)return null;let f=sr.parseExtension5String(l);return f==null?null:new Map([[xe.SUGGESTED_PRICE,f]])}static parseExtension5String(l){let f;switch(l.charAt(0)){case"0":f="£";break;case"5":f="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}f="";break;default:f="";break}let m=parseInt(l.substring(1)),g=(m/100).toString(),y=m%100,b=y<10?"0"+y:y.toString();return f+g+"."+b}}class Zt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,f,m){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(f,m,g),b=g.toString(),S=Zt.parseExtensionString(b),T=[new He((m[0]+m[1])/2,l),new He(y,l)],D=new ne(b,null,0,T,be.UPC_EAN_EXTENSION,new Date().getTime());return S!=null&&D.putAllMetadata(S),D}decodeMiddle(l,f,m){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),b=f[1],S=0;for(let T=0;T<2&&b<y;T++){let D=ft.decodeDigit(l,g,b,ft.L_AND_G_PATTERNS);m+=String.fromCharCode(48+D%10);for(let $ of g)b+=$;D>=10&&(S|=1<<1-T),T!==1&&(b=l.getNextSet(b),b=l.getNextUnset(b))}if(m.length!==2)throw new H;if(parseInt(m.toString())%4!==S)throw new H;return b}static parseExtensionString(l){return l.length!==2?null:new Map([[xe.ISSUE_NUMBER,parseInt(l)]])}}class dn{static decodeRow(l,f,m){let g=ft.findGuardPattern(f,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sr().decodeRow(l,f,g)}catch{return new Zt().decodeRow(l,f,g)}}}dn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Wt extends ft{constructor(){super(),this.decodeRowStringBuffer="",Wt.L_AND_G_PATTERNS=Wt.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let f=Wt.L_PATTERNS[l-10],m=new Int32Array(f.length);for(let g=0;g<f.length;g++)m[g]=f[f.length-g-1];Wt.L_AND_G_PATTERNS[l]=m}}decodeRow(l,f,m){let g=Wt.findStartGuardPattern(f),y=m==null?null:m.get(B.NEED_RESULT_POINT_CALLBACK);if(y!=null){const Je=new He((g[0]+g[1])/2,l);y.foundPossibleResultPoint(Je)}let b=this.decodeMiddle(f,g,this.decodeRowStringBuffer),S=b.rowOffset,T=b.resultString;if(y!=null){const Je=new He(S,l);y.foundPossibleResultPoint(Je)}let D=this.decodeEnd(f,S);if(y!=null){const Je=new He((D[0]+D[1])/2,l);y.foundPossibleResultPoint(Je)}let $=D[1],Y=$+($-D[0]);if(Y>=f.getSize()||!f.isRange($,Y,!1))throw new H;let ee=T.toString();if(ee.length<8)throw new F;if(!Wt.checkChecksum(ee))throw new x;let fe=(g[1]+g[0])/2,Ne=(D[1]+D[0])/2,Ae=this.getBarcodeFormat(),Oe=[new He(fe,l),new He(Ne,l)],Fe=new ne(ee,null,0,Oe,Ae,new Date().getTime()),Ye=0;try{let Je=dn.decodeRow(l,f,D[1]);Fe.putMetadata(xe.UPC_EAN_EXTENSION,Je.getText()),Fe.putAllMetadata(Je.getResultMetadata()),Fe.addResultPoints(Je.getResultPoints()),Ye=Je.getText().length}catch{}let et=m==null?null:m.get(B.ALLOWED_EAN_EXTENSIONS);if(et!=null){let Je=!1;for(let Dt in et)if(Ye.toString()===Dt){Je=!0;break}if(!Je)throw new H}return Fe}decodeEnd(l,f){return Wt.findGuardPattern(l,f,!1,Wt.START_END_PATTERN,new Int32Array(Wt.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return Wt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let f=l.length;if(f===0)return!1;let m=parseInt(l.charAt(f-1),10);return Wt.getStandardUPCEANChecksum(l.substring(0,f-1))===m}static getStandardUPCEANChecksum(l){let f=l.length,m=0;for(let g=f-1;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}m*=3;for(let g=f-2;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}return(1e3-m)%10}}class gr extends Wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,f,m){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),b=f[1],S=0;for(let D=0;D<6&&b<y;D++){let $=Wt.decodeDigit(l,g,b,Wt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+$%10);for(let Y of g)b+=Y;$>=10&&(S|=1<<5-D)}m=gr.determineFirstDigit(m,S),b=Wt.findGuardPattern(l,b,!0,Wt.MIDDLE_PATTERN,new Int32Array(Wt.MIDDLE_PATTERN.length).fill(0))[1];for(let D=0;D<6&&b<y;D++){let $=Wt.decodeDigit(l,g,b,Wt.L_PATTERNS);m+=String.fromCharCode(48+$);for(let Y of g)b+=Y}return{rowOffset:b,resultString:m}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(l,f){for(let m=0;m<10;m++)if(f===this.FIRST_DIGIT_ENCODINGS[m])return l=String.fromCharCode(48+m)+l,l;throw new H}}gr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Gt extends Wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,f,m){const g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),b=f[1];for(let T=0;T<4&&b<y;T++){let D=Wt.decodeDigit(l,g,b,Wt.L_PATTERNS);m+=String.fromCharCode(48+D);for(let $ of g)b+=$}b=Wt.findGuardPattern(l,b,!0,Wt.MIDDLE_PATTERN,new Int32Array(Wt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&b<y;T++){let D=Wt.decodeDigit(l,g,b,Wt.L_PATTERNS);m+=String.fromCharCode(48+D);for(let $ of g)b+=$}return{rowOffset:b,resultString:m}}getBarcodeFormat(){return be.EAN_8}}class br extends Wt{constructor(){super(...arguments),this.ean13Reader=new gr}getBarcodeFormat(){return be.UPC_A}decode(l,f){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,f,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,f,m))}decodeMiddle(l,f,m){return this.ean13Reader.decodeMiddle(l,f,m)}maybeReturnResult(l){let f=l.getText();if(f.charAt(0)==="0"){let m=new ne(f.substring(1),null,null,l.getResultPoints(),be.UPC_A);return l.getResultMetadata()!=null&&m.putAllMetadata(l.getResultMetadata()),m}else throw new H}reset(){this.ean13Reader.reset()}}class ra extends Wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,f,m){const g=this.decodeMiddleCounters.map(D=>D);g[0]=0,g[1]=0,g[2]=0,g[3]=0;const y=l.getSize();let b=f[1],S=0;for(let D=0;D<6&&b<y;D++){const $=ra.decodeDigit(l,g,b,ra.L_AND_G_PATTERNS);m+=String.fromCharCode(48+$%10);for(let Y of g)b+=Y;$>=10&&(S|=1<<5-D)}let T=ra.determineNumSysAndCheckDigit(m,S);return{rowOffset:b,resultString:T}}decodeEnd(l,f){return ra.findGuardPatternWithoutCounters(l,f,!0,ra.MIDDLE_END_PATTERN)}checkChecksum(l){return Wt.checkChecksum(ra.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,f){for(let m=0;m<=1;m++)for(let g=0;g<10;g++)if(f===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][g]){let y=String.fromCharCode(48+m),b=String.fromCharCode(48+g);return y+l+b}throw H.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(l){const f=l.slice(1,7).split("").map(y=>y.charCodeAt(0)),m=new Q;m.append(l.charAt(0));let g=f[5];switch(g){case 0:case 1:case 2:m.appendChars(f,0,2),m.append(g),m.append("0000"),m.appendChars(f,2,3);break;case 3:m.appendChars(f,0,3),m.append("00000"),m.appendChars(f,3,2);break;case 4:m.appendChars(f,0,4),m.append("00000"),m.append(f[4]);break;default:m.appendChars(f,0,5),m.append("0000"),m.append(g);break}return l.length>=8&&m.append(l.charAt(7)),m.toString()}}ra.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ra.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Vn extends Ut{constructor(l){super();let f=l==null?null:l.get(B.POSSIBLE_FORMATS),m=[];n(f)?(m.push(new gr),m.push(new br),m.push(new Gt),m.push(new ra)):(f.indexOf(be.EAN_13)>-1&&m.push(new gr),f.indexOf(be.UPC_A)>-1&&m.push(new br),f.indexOf(be.EAN_8)>-1&&m.push(new Gt),f.indexOf(be.UPC_E)>-1&&m.push(new ra)),this.readers=m}decodeRow(l,f,m){for(let g of this.readers)try{const y=g.decodeRow(l,f,m),b=y.getBarcodeFormat()===be.EAN_13&&y.getText().charAt(0)==="0",S=m==null?null:m.get(B.POSSIBLE_FORMATS),T=S==null||S.includes(be.UPC_A);if(b&&T){const D=y.getRawBytes(),$=new ne(y.getText().substring(1),D,D?D.length:null,y.getResultPoints(),be.UPC_A);return $.putAllMetadata(y.getResultMetadata()),$}return y}catch{}throw new H}reset(){for(let l of this.readers)l.reset()}}class Zr extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,f){for(let m=0;m<f.length;m++)if(Ut.patternMatchVariance(l,f[m],Zr.MAX_INDIVIDUAL_VARIANCE)<Zr.MAX_AVG_VARIANCE)return m;throw new H}static count(l){return Ve.sum(new Int32Array(l))}static increment(l,f){let m=0,g=f[0];for(let y=1;y<l.length;y++)f[y]>g&&(g=f[y],m=y);l[m]++}static decrement(l,f){let m=0,g=f[0];for(let y=1;y<l.length;y++)f[y]<g&&(g=f[y],m=y);l[m]--}static isFinderPattern(l){let f=l[0]+l[1],m=f+l[2]+l[3],g=f/m;if(g>=Zr.MIN_FINDER_PATTERN_RATIO&&g<=Zr.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER;for(let S of l)S>b&&(b=S),S<y&&(y=S);return b<10*y}return!1}}Zr.MAX_AVG_VARIANCE=.2,Zr.MAX_INDIVIDUAL_VARIANCE=.45,Zr.MIN_FINDER_PATTERN_RATIO=9.5/12,Zr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Pa{constructor(l,f){this.value=l,this.checksumPortion=f}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof Pa))return!1;const f=l;return this.value===f.value&&this.checksumPortion===f.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Bt{constructor(l,f,m,g,y){this.value=l,this.startEnd=f,this.value=l,this.startEnd=f,this.resultPoints=new Array,this.resultPoints.push(new He(m,y)),this.resultPoints.push(new He(g,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof Bt))return!1;const f=l;return this.value===f.value}hashCode(){return this.value}}class Gn{constructor(){}static getRSSvalue(l,f,m){let g=0;for(let T of l)g+=T;let y=0,b=0,S=l.length;for(let T=0;T<S-1;T++){let D;for(D=1,b|=1<<T;D<l[T];D++,b&=~(1<<T)){let $=Gn.combins(g-D-1,S-T-2);if(m&&b===0&&g-D-(S-T-1)>=S-T-1&&($-=Gn.combins(g-D-(S-T),S-T-2)),S-T-1>1){let Y=0;for(let ee=g-D-(S-T-2);ee>f;ee--)Y+=Gn.combins(g-D-ee-1,S-T-3);$-=Y*(S-1-T)}else g-D>f&&$--;y+=$}g-=D}return y}static combins(l,f){let m,g;l-f>f?(g=f,m=l-f):(g=l-f,m=f);let y=1,b=1;for(let S=l;S>m;S--)y*=S,b<=g&&(y/=b,b++);for(;b<=g;)y/=b,b++;return y}}class Hi{static buildBitArray(l){let f=l.length*2-1;l[l.length-1].getRightChar()==null&&(f-=1);let m=12*f,g=new _(m),y=0,S=l[0].getRightChar().getValue();for(let T=11;T>=0;--T)S&1<<T&&g.set(y),y++;for(let T=1;T<l.length;++T){let D=l[T],$=D.getLeftChar().getValue();for(let Y=11;Y>=0;--Y)$&1<<Y&&g.set(y),y++;if(D.getRightChar()!=null){let Y=D.getRightChar().getValue();for(let ee=11;ee>=0;--ee)Y&1<<ee&&g.set(y),y++}}return g}}class Kn{constructor(l,f){f?this.decodedInformation=null:(this.finished=l,this.decodedInformation=f)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Wa{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class dr extends Wa{constructor(l,f){super(l),this.value=f}getValue(){return this.value}isFNC1(){return this.value===dr.FNC1}}dr.FNC1="$";class Jr extends Wa{constructor(l,f,m){super(l),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=f}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tr extends Wa{constructor(l,f,m){if(super(l),f<0||f>10||m<0||m>10)throw new F;this.firstDigit=f,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tr.FNC1}isAnyFNC1(){return this.firstDigit===Tr.FNC1||this.secondDigit===Tr.FNC1}}Tr.FNC1=10;class dt{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new H;let f=l.substring(0,2);for(let y of dt.TWO_DIGIT_DATA_LENGTH)if(y[0]===f)return y[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(2,y[2],l):dt.processFixedAI(2,y[1],l);if(l.length<3)throw new H;let m=l.substring(0,3);for(let y of dt.THREE_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(3,y[2],l):dt.processFixedAI(3,y[1],l);for(let y of dt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(4,y[2],l):dt.processFixedAI(4,y[1],l);if(l.length<4)throw new H;let g=l.substring(0,4);for(let y of dt.FOUR_DIGIT_DATA_LENGTH)if(y[0]===g)return y[1]===dt.VARIABLE_LENGTH?dt.processVariableAI(4,y[2],l):dt.processFixedAI(4,y[1],l);throw new H}static processFixedAI(l,f,m){if(m.length<l)throw new H;let g=m.substring(0,l);if(m.length<l+f)throw new H;let y=m.substring(l,l+f),b=m.substring(l+f),S="("+g+")"+y,T=dt.parseFieldsInGeneralPurpose(b);return T==null?S:S+T}static processVariableAI(l,f,m){let g=m.substring(0,l),y;m.length<l+f?y=m.length:y=l+f;let b=m.substring(l,y),S=m.substring(y),T="("+g+")"+b,D=dt.parseFieldsInGeneralPurpose(S);return D==null?T:T+D}}dt.VARIABLE_LENGTH=[],dt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",dt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",dt.VARIABLE_LENGTH,20],["22",dt.VARIABLE_LENGTH,29],["30",dt.VARIABLE_LENGTH,8],["37",dt.VARIABLE_LENGTH,8],["90",dt.VARIABLE_LENGTH,30],["91",dt.VARIABLE_LENGTH,30],["92",dt.VARIABLE_LENGTH,30],["93",dt.VARIABLE_LENGTH,30],["94",dt.VARIABLE_LENGTH,30],["95",dt.VARIABLE_LENGTH,30],["96",dt.VARIABLE_LENGTH,30],["97",dt.VARIABLE_LENGTH,3],["98",dt.VARIABLE_LENGTH,30],["99",dt.VARIABLE_LENGTH,30]],dt.THREE_DIGIT_DATA_LENGTH=[["240",dt.VARIABLE_LENGTH,30],["241",dt.VARIABLE_LENGTH,30],["242",dt.VARIABLE_LENGTH,6],["250",dt.VARIABLE_LENGTH,30],["251",dt.VARIABLE_LENGTH,30],["253",dt.VARIABLE_LENGTH,17],["254",dt.VARIABLE_LENGTH,20],["400",dt.VARIABLE_LENGTH,30],["401",dt.VARIABLE_LENGTH,30],["402",17],["403",dt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",dt.VARIABLE_LENGTH,20],["421",dt.VARIABLE_LENGTH,15],["422",3],["423",dt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],dt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",dt.VARIABLE_LENGTH,15],["391",dt.VARIABLE_LENGTH,18],["392",dt.VARIABLE_LENGTH,15],["393",dt.VARIABLE_LENGTH,18],["703",dt.VARIABLE_LENGTH,30]],dt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",dt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",dt.VARIABLE_LENGTH,20],["8003",dt.VARIABLE_LENGTH,30],["8004",dt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",dt.VARIABLE_LENGTH,30],["8008",dt.VARIABLE_LENGTH,12],["8018",18],["8020",dt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",dt.VARIABLE_LENGTH,70],["8200",dt.VARIABLE_LENGTH,70]];class ls{constructor(l){this.buffer=new Q,this.information=l}decodeAllCodes(l,f){let m=f,g=null;do{let y=this.decodeGeneralPurposeField(m,g),b=dt.parseFieldsInGeneralPurpose(y.getNewString());if(b!=null&&l.append(b),y.isRemaining()?g=""+y.getRemainingValue():g=null,m===y.getNewPosition())break;m=y.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let f=l;f<l+3;++f)if(this.information.get(f))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(l,4);return y===0?new Tr(this.information.getSize(),Tr.FNC1,Tr.FNC1):new Tr(this.information.getSize(),y-1,Tr.FNC1)}let f=this.extractNumericValueFromBitArray(l,7),m=(f-8)/11,g=(f-8)%11;return new Tr(l+7,m,g)}extractNumericValueFromBitArray(l,f){return ls.extractNumericValueFromBitArray(this.information,l,f)}static extractNumericValueFromBitArray(l,f,m){let g=0;for(let y=0;y<m;++y)l.get(f+y)&&(g|=1<<m-y-1);return g}decodeGeneralPurposeField(l,f){this.buffer.setLengthToZero(),f!=null&&this.buffer.append(f),this.current.setPosition(l);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Jr(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Jr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,f;do{let m=this.current.getPosition();if(this.current.isAlpha()?(f=this.parseAlphaBlock(),l=f.isFinished()):this.current.isIsoIec646()?(f=this.parseIsoIec646Block(),l=f.isFinished()):(f=this.parseNumericBlock(),l=f.isFinished()),!(m!==this.current.getPosition())&&!l)break}while(!l);return f.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let f;return l.isSecondDigitFNC1()?f=new Jr(this.current.getPosition(),this.buffer.toString()):f=new Jr(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new Kn(!0,f)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let f=new Jr(this.current.getPosition(),this.buffer.toString());return new Kn(!0,f)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Kn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let f=new Jr(this.current.getPosition(),this.buffer.toString());return new Kn(!0,f)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Kn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let f=new Jr(this.current.getPosition(),this.buffer.toString());return new Kn(!0,f)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Kn(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,5);if(f>=5&&f<16)return!0;if(l+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(l,7);if(m>=64&&m<116)return!0;if(l+8>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(l,8);return g>=232&&g<253}decodeIsoIec646(l){let f=this.extractNumericValueFromBitArray(l,5);if(f===15)return new dr(l+5,dr.FNC1);if(f>=5&&f<15)return new dr(l+5,"0"+(f-5));let m=this.extractNumericValueFromBitArray(l,7);if(m>=64&&m<90)return new dr(l+7,""+(m+1));if(m>=90&&m<116)return new dr(l+7,""+(m+7));let g=this.extractNumericValueFromBitArray(l,8),y;switch(g){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new F}return new dr(l+8,y)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(l,5);if(f>=5&&f<16)return!0;if(l+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(l,6);return m>=16&&m<63}decodeAlphanumeric(l){let f=this.extractNumericValueFromBitArray(l,5);if(f===15)return new dr(l+5,dr.FNC1);if(f>=5&&f<15)return new dr(l+5,"0"+(f-5));let m=this.extractNumericValueFromBitArray(l,6);if(m>=32&&m<58)return new dr(l+6,""+(m+33));let g;switch(m){case 58:g="*";break;case 59:g=",";break;case 60:g="-";break;case 61:g=".";break;case 62:g="/";break;default:throw new he("Decoding invalid alphanumeric value: "+m)}return new dr(l+6,g)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let f=0;f<5&&f+l<this.information.getSize();++f)if(f===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+f))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let f=l;f<l+3;++f)if(this.information.get(f))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let f=0;f<4&&f+l<this.information.getSize();++f)if(this.information.get(l+f))return!1;return!0}}class cs{constructor(l){this.information=l,this.generalDecoder=new ls(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class rn extends cs{constructor(l){super(l)}encodeCompressedGtin(l,f){l.append("(01)");let m=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,f,m)}encodeCompressedGtinWithoutAI(l,f,m){for(let g=0;g<4;++g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(f+10*g,10);y/100===0&&l.append("0"),y/10===0&&l.append("0"),l.append(y)}rn.appendCheckDigit(l,m)}static appendCheckDigit(l,f){let m=0;for(let g=0;g<13;g++){let y=l.charAt(g+f).charCodeAt(0)-48;m+=g&1?y:3*y}m=10-m%10,m===10&&(m=0),l.append(m)}}rn.GTIN_SIZE=40;class xa extends rn{constructor(l){super(l)}parseInformation(){let l=new Q;l.append("(01)");let f=l.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(xa.HEADER_SIZE,4);return l.append(m),this.encodeCompressedGtinWithoutAI(l,xa.HEADER_SIZE+4,f),this.getGeneralDecoder().decodeAllCodes(l,xa.HEADER_SIZE+44)}}xa.HEADER_SIZE=4;class qa extends cs{constructor(l){super(l)}parseInformation(){let l=new Q;return this.getGeneralDecoder().decodeAllCodes(l,qa.HEADER_SIZE)}}qa.HEADER_SIZE=5;class Ia extends rn{constructor(l){super(l)}encodeCompressedWeight(l,f,m){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(f,m);this.addWeightCode(l,g);let y=this.checkWeight(g),b=1e5;for(let S=0;S<5;++S)y/b===0&&l.append("0"),b/=10;l.append(y)}}class ya extends Ia{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=ya.HEADER_SIZE+Ia.GTIN_SIZE+ya.WEIGHT_SIZE)throw new H;let l=new Q;return this.encodeCompressedGtin(l,ya.HEADER_SIZE),this.encodeCompressedWeight(l,ya.HEADER_SIZE+Ia.GTIN_SIZE,ya.WEIGHT_SIZE),l.toString()}}ya.HEADER_SIZE=5,ya.WEIGHT_SIZE=15;class xi extends ya{constructor(l){super(l)}addWeightCode(l,f){l.append("(3103)")}checkWeight(l){return l}}class Go extends ya{constructor(l){super(l)}addWeightCode(l,f){f<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class Ta extends rn{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Ta.HEADER_SIZE+rn.GTIN_SIZE)throw new H;let l=new Q;this.encodeCompressedGtin(l,Ta.HEADER_SIZE);let f=this.getGeneralDecoder().extractNumericValueFromBitArray(Ta.HEADER_SIZE+rn.GTIN_SIZE,Ta.LAST_DIGIT_SIZE);l.append("(392"),l.append(f),l.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(Ta.HEADER_SIZE+rn.GTIN_SIZE+Ta.LAST_DIGIT_SIZE,null);return l.append(m.getNewString()),l.toString()}}Ta.HEADER_SIZE=8,Ta.LAST_DIGIT_SIZE=2;class kn extends rn{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<kn.HEADER_SIZE+rn.GTIN_SIZE)throw new H;let l=new Q;this.encodeCompressedGtin(l,kn.HEADER_SIZE);let f=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+rn.GTIN_SIZE,kn.LAST_DIGIT_SIZE);l.append("(393"),l.append(f),l.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+rn.GTIN_SIZE+kn.LAST_DIGIT_SIZE,kn.FIRST_THREE_DIGITS_SIZE);m/100==0&&l.append("0"),m/10==0&&l.append("0"),l.append(m);let g=this.getGeneralDecoder().decodeGeneralPurposeField(kn.HEADER_SIZE+rn.GTIN_SIZE+kn.LAST_DIGIT_SIZE+kn.FIRST_THREE_DIGITS_SIZE,null);return l.append(g.getNewString()),l.toString()}}kn.HEADER_SIZE=8,kn.LAST_DIGIT_SIZE=2,kn.FIRST_THREE_DIGITS_SIZE=10;class Er extends Ia{constructor(l,f,m){super(l),this.dateCode=m,this.firstAIdigits=f}parseInformation(){if(this.getInformation().getSize()!=Er.HEADER_SIZE+Er.GTIN_SIZE+Er.WEIGHT_SIZE+Er.DATE_SIZE)throw new H;let l=new Q;return this.encodeCompressedGtin(l,Er.HEADER_SIZE),this.encodeCompressedWeight(l,Er.HEADER_SIZE+Er.GTIN_SIZE,Er.WEIGHT_SIZE),this.encodeCompressedDate(l,Er.HEADER_SIZE+Er.GTIN_SIZE+Er.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,f){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(f,Er.DATE_SIZE);if(m==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let g=m%32;m/=32;let y=m%12+1;m/=12;let b=m;b/10==0&&l.append("0"),l.append(b),y/10==0&&l.append("0"),l.append(y),g/10==0&&l.append("0"),l.append(g)}addWeightCode(l,f){l.append("("),l.append(this.firstAIdigits),l.append(f/1e5),l.append(")")}checkWeight(l){return l%1e5}}Er.HEADER_SIZE=8,Er.WEIGHT_SIZE=20,Er.DATE_SIZE=16;function rd(X){try{if(X.get(1))return new xa(X);if(!X.get(2))return new qa(X);switch(ls.extractNumericValueFromBitArray(X,1,4)){case 4:return new xi(X);case 5:return new Go(X)}switch(ls.extractNumericValueFromBitArray(X,1,5)){case 12:return new Ta(X);case 13:return new kn(X)}switch(ls.extractNumericValueFromBitArray(X,1,7)){case 56:return new Er(X,"310","11");case 57:return new Er(X,"320","11");case 58:return new Er(X,"310","13");case 59:return new Er(X,"320","13");case 60:return new Er(X,"310","15");case 61:return new Er(X,"320","15");case 62:return new Er(X,"310","17");case 63:return new Er(X,"320","17")}}catch(l){throw console.log(l),new he("unknown decoder: "+X)}}class js{constructor(l,f,m,g){this.leftchar=l,this.rightchar=f,this.finderpattern=m,this.maybeLast=g}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,f){return l instanceof js?js.equalsOrNull(l.leftchar,f.leftchar)&&js.equalsOrNull(l.rightchar,f.rightchar)&&js.equalsOrNull(l.finderpattern,f.finderpattern):!1}static equalsOrNull(l,f){return l===null?f===null:js.equals(l,f)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kl{constructor(l,f,m){this.pairs=l,this.rowNumber=f,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,f){return l instanceof Kl?this.checkEqualitity(l,f)&&l.wasReversed===f.wasReversed:!1}checkEqualitity(l,f){if(!l||!f)return;let m;return l.forEach((g,y)=>{f.forEach(b=>{g.getLeftChar().getValue()===b.getLeftChar().getValue()&&g.getRightChar().getValue()===b.getRightChar().getValue()&&g.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(m=!0)})}),m}}class tt extends Zr{constructor(l){super(...arguments),this.pairs=new Array(tt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,f,m){this.pairs.length=0,this.startFromEven=!1;try{return tt.constructResult(this.decodeRow2pairs(l,f))}catch(g){this.verbose&&console.log(g)}return this.pairs.length=0,this.startFromEven=!0,tt.constructResult(this.decodeRow2pairs(l,f))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,f){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(f,this.pairs,l))}catch(y){if(y instanceof H){if(!this.pairs.length)throw new H;m=!0}}if(this.checkChecksum())return this.pairs;let g;if(this.rows.length?g=!0:g=!1,this.storeRow(l,!1),g){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new H}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let f=null;try{f=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return l&&(this.rows=this.rows.reverse()),f}checkRows(l,f){for(let m=f;m<this.rows.length;m++){let g=this.rows[m];this.pairs.length=0;for(let b of l)this.pairs.push(b.getPairs());if(this.pairs.push(g.getPairs()),!tt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(l);y.push(g);try{return this.checkRows(y,m+1)}catch(b){this.verbose&&console.log(b)}}throw new H}static isValidSequence(l){for(let f of tt.FINDER_PATTERN_SEQUENCES){if(l.length>f.length)continue;let m=!0;for(let g=0;g<l.length;g++)if(l[g].getFinderPattern().getValue()!=f[g]){m=!1;break}if(m)return!0}return!1}storeRow(l,f){let m=0,g=!1,y=!1;for(;m<this.rows.length;){let b=this.rows[m];if(b.getRowNumber()>l){y=b.isEquivalent(this.pairs);break}g=b.isEquivalent(this.pairs),m++}y||g||tt.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new Kl(this.pairs,l,f)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,f){for(let m of f)if(m.getPairs().length!==l.length){for(let g of m.getPairs())for(let y of l)if(js.equals(g,y))break}}static isPartialRow(l,f){for(let m of f){let g=!0;for(let y of l){let b=!1;for(let S of m.getPairs())if(y.equals(S)){b=!0;break}if(!b){g=!1;break}}if(g)return!0}return!1}getRows(){return this.rows}static constructResult(l){let f=Hi.buildBitArray(l),g=rd(f).parseInformation(),y=l[0].getFinderPattern().getResultPoints(),b=l[l.length-1].getFinderPattern().getResultPoints(),S=[y[0],y[1],b[0],b[1]];return new ne(g,null,null,S,be.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),f=l.getLeftChar(),m=l.getRightChar();if(m==null)return!1;let g=m.getChecksumPortion(),y=2;for(let S=1;S<this.pairs.size();++S){let T=this.pairs.get(S);g+=T.getLeftChar().getChecksumPortion(),y++;let D=T.getRightChar();D!=null&&(g+=D.getChecksumPortion(),y++)}return g%=211,211*(y-4)+g==f.getValue()}static getNextSecondBar(l,f){let m;return l.get(f)?(m=l.getNextUnset(f),m=l.getNextSet(m)):(m=l.getNextSet(f),m=l.getNextUnset(m)),m}retrieveNextPair(l,f,m){let g=f.length%2==0;this.startFromEven&&(g=!g);let y,b=!0,S=-1;do this.findNextPair(l,f,S),y=this.parseFoundFinderPattern(l,m,g),y==null?S=tt.getNextSecondBar(l,this.startEnd[0]):b=!1;while(b);let T=this.decodeDataCharacter(l,y,g,!0);if(!this.isEmptyPair(f)&&f[f.length-1].mustBeLast())throw new H;let D;try{D=this.decodeDataCharacter(l,y,g,!1)}catch($){D=null,this.verbose&&console.log($)}return new js(T,D,y,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,f,m){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),b;m>=0?b=m:this.isEmptyPair(f)?b=0:b=f[f.length-1].getFinderPattern().getStartEnd()[1];let S=f.length%2!=0;this.startFromEven&&(S=!S);let T=!1;for(;b<y&&(T=!l.get(b),!!T);)b++;let D=0,$=b;for(let Y=b;Y<y;Y++)if(l.get(Y)!=T)g[D]++;else{if(D==3){if(S&&tt.reverseCounters(g),tt.isFinderPattern(g)){this.startEnd[0]=$,this.startEnd[1]=Y;return}S&&tt.reverseCounters(g),$+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,D--}else D++;g[D]=1,T=!T}throw new H}static reverseCounters(l){let f=l.length;for(let m=0;m<f/2;++m){let g=l[m];l[m]=l[f-m-1],l[f-m-1]=g}}parseFoundFinderPattern(l,f,m){let g,y,b;if(m){let D=this.startEnd[0]-1;for(;D>=0&&!l.get(D);)D--;D++,g=this.startEnd[0]-D,y=D,b=this.startEnd[1]}else y=this.startEnd[0],b=l.getNextUnset(this.startEnd[1]+1),g=b-this.startEnd[1];let S=this.getDecodeFinderCounters();j.arraycopy(S,0,S,1,S.length-1),S[0]=g;let T;try{T=this.parseFinderValue(S,tt.FINDER_PATTERNS)}catch{return null}return new Bt(T,[y,b],y,b,f)}decodeDataCharacter(l,f,m,g){let y=this.getDataCharacterCounters();for(let _r=0;_r<y.length;_r++)y[_r]=0;if(g)tt.recordPatternInReverse(l,f.getStartEnd()[0],y);else{tt.recordPattern(l,f.getStartEnd()[1],y);for(let _r=0,Jn=y.length-1;_r<Jn;_r++,Jn--){let Ga=y[_r];y[_r]=y[Jn],y[Jn]=Ga}}let b=17,S=Ve.sum(new Int32Array(y))/b,T=(f.getStartEnd()[1]-f.getStartEnd()[0])/15;if(Math.abs(S-T)/T>.3)throw new H;let D=this.getOddCounts(),$=this.getEvenCounts(),Y=this.getOddRoundingErrors(),ee=this.getEvenRoundingErrors();for(let _r=0;_r<y.length;_r++){let Jn=1*y[_r]/S,Ga=Jn+.5;if(Ga<1){if(Jn<.3)throw new H;Ga=1}else if(Ga>8){if(Jn>8.7)throw new H;Ga=8}let cl=_r/2;_r&1?($[cl]=Ga,ee[cl]=Jn-Ga):(D[cl]=Ga,Y[cl]=Jn-Ga)}this.adjustOddEvenCounts(b);let fe=4*f.getValue()+(m?0:2)+(g?0:1)-1,Ne=0,Ae=0;for(let _r=D.length-1;_r>=0;_r--){if(tt.isNotA1left(f,m,g)){let Jn=tt.WEIGHTS[fe][2*_r];Ae+=D[_r]*Jn}Ne+=D[_r]}let Oe=0;for(let _r=$.length-1;_r>=0;_r--)if(tt.isNotA1left(f,m,g)){let Jn=tt.WEIGHTS[fe][2*_r+1];Oe+=$[_r]*Jn}let Fe=Ae+Oe;if(Ne&1||Ne>13||Ne<4)throw new H;let Ye=(13-Ne)/2,et=tt.SYMBOL_WIDEST[Ye],Je=9-et,Dt=Gn.getRSSvalue(D,et,!0),zt=Gn.getRSSvalue($,Je,!1),Zn=tt.EVEN_TOTAL_SUBSET[Ye],ba=tt.GSUM[Ye],sa=Dt*Zn+zt+ba;return new Pa(sa,Fe)}static isNotA1left(l,f,m){return!(l.getValue()==0&&f&&m)}adjustOddEvenCounts(l){let f=Ve.sum(new Int32Array(this.getOddCounts())),m=Ve.sum(new Int32Array(this.getEvenCounts())),g=!1,y=!1;f>13?y=!0:f<4&&(g=!0);let b=!1,S=!1;m>13?S=!0:m<4&&(b=!0);let T=f+m-l,D=(f&1)==1,$=(m&1)==0;if(T==1)if(D){if($)throw new H;y=!0}else{if(!$)throw new H;S=!0}else if(T==-1)if(D){if($)throw new H;g=!0}else{if(!$)throw new H;b=!0}else if(T==0){if(D){if(!$)throw new H;f<m?(g=!0,S=!0):(y=!0,b=!0)}else if($)throw new H}else throw new H;if(g){if(y)throw new H;tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),b){if(S)throw new H;tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tt.SYMBOL_WIDEST=[7,5,4,3,1],tt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],tt.GSUM=[0,348,1388,2948,3988],tt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],tt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],tt.FINDER_PAT_A=0,tt.FINDER_PAT_B=1,tt.FINDER_PAT_C=2,tt.FINDER_PAT_D=3,tt.FINDER_PAT_E=4,tt.FINDER_PAT_F=5,tt.FINDER_PATTERN_SEQUENCES=[[tt.FINDER_PAT_A,tt.FINDER_PAT_A],[tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B],[tt.FINDER_PAT_A,tt.FINDER_PAT_C,tt.FINDER_PAT_B,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_C],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F]],tt.MAX_PAIRS=11;class As extends Pa{constructor(l,f,m){super(l,f),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Wr extends Zr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,f,m){const g=this.decodePair(f,!1,l,m);Wr.addOrTally(this.possibleLeftPairs,g),f.reverse();let y=this.decodePair(f,!0,l,m);Wr.addOrTally(this.possibleRightPairs,y),f.reverse();for(let b of this.possibleLeftPairs)if(b.getCount()>1){for(let S of this.possibleRightPairs)if(S.getCount()>1&&Wr.checkChecksum(b,S))return Wr.constructResult(b,S)}throw new H}static addOrTally(l,f){if(f==null)return;let m=!1;for(let g of l)if(g.getValue()===f.getValue()){g.incrementCount(),m=!0;break}m||l.push(f)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,f){let m=4537077*l.getValue()+f.getValue(),g=new String(m).toString(),y=new Q;for(let D=13-g.length;D>0;D--)y.append("0");y.append(g);let b=0;for(let D=0;D<13;D++){let $=y.charAt(D).charCodeAt(0)-48;b+=D&1?$:3*$}b=10-b%10,b===10&&(b=0),y.append(b.toString());let S=l.getFinderPattern().getResultPoints(),T=f.getFinderPattern().getResultPoints();return new ne(y.toString(),null,0,[S[0],S[1],T[0],T[1]],be.RSS_14,new Date().getTime())}static checkChecksum(l,f){let m=(l.getChecksumPortion()+16*f.getChecksumPortion())%79,g=9*l.getFinderPattern().getValue()+f.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,m===g}decodePair(l,f,m,g){try{let y=this.findFinderPattern(l,f),b=this.parseFoundFinderPattern(l,m,f,y),S=g==null?null:g.get(B.NEED_RESULT_POINT_CALLBACK);if(S!=null){let $=(y[0]+y[1])/2;f&&($=l.getSize()-1-$),S.foundPossibleResultPoint(new He($,m))}let T=this.decodeDataCharacter(l,b,!0),D=this.decodeDataCharacter(l,b,!1);return new As(1597*T.getValue()+D.getValue(),T.getChecksumPortion()+4*D.getChecksumPortion(),b)}catch{return null}}decodeDataCharacter(l,f,m){let g=this.getDataCharacterCounters();for(let Oe=0;Oe<g.length;Oe++)g[Oe]=0;if(m)Ut.recordPatternInReverse(l,f.getStartEnd()[0],g);else{Ut.recordPattern(l,f.getStartEnd()[1]+1,g);for(let Oe=0,Fe=g.length-1;Oe<Fe;Oe++,Fe--){let Ye=g[Oe];g[Oe]=g[Fe],g[Fe]=Ye}}let y=m?16:15,b=Ve.sum(new Int32Array(g))/y,S=this.getOddCounts(),T=this.getEvenCounts(),D=this.getOddRoundingErrors(),$=this.getEvenRoundingErrors();for(let Oe=0;Oe<g.length;Oe++){let Fe=g[Oe]/b,Ye=Math.floor(Fe+.5);Ye<1?Ye=1:Ye>8&&(Ye=8);let et=Math.floor(Oe/2);Oe&1?(T[et]=Ye,$[et]=Fe-Ye):(S[et]=Ye,D[et]=Fe-Ye)}this.adjustOddEvenCounts(m,y);let Y=0,ee=0;for(let Oe=S.length-1;Oe>=0;Oe--)ee*=9,ee+=S[Oe],Y+=S[Oe];let fe=0,Ne=0;for(let Oe=T.length-1;Oe>=0;Oe--)fe*=9,fe+=T[Oe],Ne+=T[Oe];let Ae=ee+3*fe;if(m){if(Y&1||Y>12||Y<4)throw new H;let Oe=(12-Y)/2,Fe=Wr.OUTSIDE_ODD_WIDEST[Oe],Ye=9-Fe,et=Gn.getRSSvalue(S,Fe,!1),Je=Gn.getRSSvalue(T,Ye,!0),Dt=Wr.OUTSIDE_EVEN_TOTAL_SUBSET[Oe],zt=Wr.OUTSIDE_GSUM[Oe];return new Pa(et*Dt+Je+zt,Ae)}else{if(Ne&1||Ne>10||Ne<4)throw new H;let Oe=(10-Ne)/2,Fe=Wr.INSIDE_ODD_WIDEST[Oe],Ye=9-Fe,et=Gn.getRSSvalue(S,Fe,!0),Je=Gn.getRSSvalue(T,Ye,!1),Dt=Wr.INSIDE_ODD_TOTAL_SUBSET[Oe],zt=Wr.INSIDE_GSUM[Oe];return new Pa(Je*Dt+et+zt,Ae)}}findFinderPattern(l,f){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=l.getSize(),y=!1,b=0;for(;b<g&&(y=!l.get(b),f!==y);)b++;let S=0,T=b;for(let D=b;D<g;D++)if(l.get(D)!==y)m[S]++;else{if(S===3){if(Zr.isFinderPattern(m))return[T,D];T+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,S--}else S++;m[S]=1,y=!y}throw new H}parseFoundFinderPattern(l,f,m,g){let y=l.get(g[0]),b=g[0]-1;for(;b>=0&&y!==l.get(b);)b--;b++;const S=g[0]-b,T=this.getDecodeFinderCounters(),D=new Int32Array(T.length);j.arraycopy(T,0,D,1,T.length-1),D[0]=S;const $=this.parseFinderValue(D,Wr.FINDER_PATTERNS);let Y=b,ee=g[1];return m&&(Y=l.getSize()-1-Y,ee=l.getSize()-1-ee),new Bt($,[b,g[1]],Y,ee,f)}adjustOddEvenCounts(l,f){let m=Ve.sum(new Int32Array(this.getOddCounts())),g=Ve.sum(new Int32Array(this.getEvenCounts())),y=!1,b=!1,S=!1,T=!1;l?(m>12?b=!0:m<4&&(y=!0),g>12?T=!0:g<4&&(S=!0)):(m>11?b=!0:m<5&&(y=!0),g>10?T=!0:g<4&&(S=!0));let D=m+g-f,$=(m&1)===(l?1:0),Y=(g&1)===1;if(D===1)if($){if(Y)throw new H;b=!0}else{if(!Y)throw new H;T=!0}else if(D===-1)if($){if(Y)throw new H;y=!0}else{if(!Y)throw new H;S=!0}else if(D===0){if($){if(!Y)throw new H;m<g?(y=!0,T=!0):(b=!0,S=!0)}else if(Y)throw new H}else throw new H;if(y){if(b)throw new H;Zr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(b&&Zr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),S){if(T)throw new H;Zr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&Zr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Wr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Wr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Wr.OUTSIDE_GSUM=[0,161,961,2015,2715],Wr.INSIDE_GSUM=[0,336,1036,1516],Wr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Wr.INSIDE_ODD_WIDEST=[2,4,6,8],Wr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Vi extends Ut{constructor(l,f){super(),this.readers=[],this.verbose=f===!0;const m=l?l.get(B.POSSIBLE_FORMATS):null,g=l&&l.get(B.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(be.EAN_13)||m.includes(be.UPC_A)||m.includes(be.EAN_8)||m.includes(be.UPC_E))&&this.readers.push(new Vn(l)),m.includes(be.CODE_39)&&this.readers.push(new jt(g)),m.includes(be.CODE_128)&&this.readers.push(new qe),m.includes(be.ITF)&&this.readers.push(new Mt),m.includes(be.RSS_14)&&this.readers.push(new Wr),m.includes(be.RSS_EXPANDED)&&this.readers.push(new tt(this.verbose))):(this.readers.push(new Vn(l)),this.readers.push(new jt),this.readers.push(new Vn(l)),this.readers.push(new qe),this.readers.push(new Mt),this.readers.push(new Wr),this.readers.push(new tt(this.verbose)))}decodeRow(l,f,m){for(let g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(l,f,m)}catch{}throw new H}reset(){this.readers.forEach(l=>l.reset())}}class Gc extends se{constructor(l=500,f){super(new Vi(f),l,f)}}class xr{constructor(l,f,m){this.ecCodewords=l,this.ecBlocks=[f],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class mr{constructor(l,f){this.count=l,this.dataCodewords=f}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class lr{constructor(l,f,m,g,y,b){this.versionNumber=l,this.symbolSizeRows=f,this.symbolSizeColumns=m,this.dataRegionSizeRows=g,this.dataRegionSizeColumns=y,this.ecBlocks=b;let S=0;const T=b.getECCodewords(),D=b.getECBlocks();for(let $ of D)S+=$.getCount()*($.getDataCodewords()+T);this.totalCodewords=S}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,f){if(l&1||f&1)throw new F;for(let m of lr.VERSIONS)if(m.symbolSizeRows===l&&m.symbolSizeColumns===f)return m;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new lr(1,10,10,8,8,new xr(5,new mr(1,3))),new lr(2,12,12,10,10,new xr(7,new mr(1,5))),new lr(3,14,14,12,12,new xr(10,new mr(1,8))),new lr(4,16,16,14,14,new xr(12,new mr(1,12))),new lr(5,18,18,16,16,new xr(14,new mr(1,18))),new lr(6,20,20,18,18,new xr(18,new mr(1,22))),new lr(7,22,22,20,20,new xr(20,new mr(1,30))),new lr(8,24,24,22,22,new xr(24,new mr(1,36))),new lr(9,26,26,24,24,new xr(28,new mr(1,44))),new lr(10,32,32,14,14,new xr(36,new mr(1,62))),new lr(11,36,36,16,16,new xr(42,new mr(1,86))),new lr(12,40,40,18,18,new xr(48,new mr(1,114))),new lr(13,44,44,20,20,new xr(56,new mr(1,144))),new lr(14,48,48,22,22,new xr(68,new mr(1,174))),new lr(15,52,52,24,24,new xr(42,new mr(2,102))),new lr(16,64,64,14,14,new xr(56,new mr(2,140))),new lr(17,72,72,16,16,new xr(36,new mr(4,92))),new lr(18,80,80,18,18,new xr(48,new mr(4,114))),new lr(19,88,88,20,20,new xr(56,new mr(4,144))),new lr(20,96,96,22,22,new xr(68,new mr(4,174))),new lr(21,104,104,24,24,new xr(56,new mr(6,136))),new lr(22,120,120,18,18,new xr(68,new mr(6,175))),new lr(23,132,132,20,20,new xr(62,new mr(8,163))),new lr(24,144,144,22,22,new xr(62,new mr(8,156),new mr(2,155))),new lr(25,8,18,6,16,new xr(7,new mr(1,5))),new lr(26,8,32,6,14,new xr(11,new mr(1,10))),new lr(27,12,26,10,24,new xr(14,new mr(1,16))),new lr(28,12,36,10,16,new xr(18,new mr(1,22))),new lr(29,16,36,14,16,new xr(24,new mr(1,32))),new lr(30,16,48,14,22,new xr(28,new mr(1,49)))]}}lr.VERSIONS=lr.buildVersions();class bo{constructor(l){const f=l.getHeight();if(f<8||f>144||f&1)throw new F;this.version=bo.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new G(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const f=l.getHeight(),m=l.getWidth();return lr.getVersionForDimensions(f,m)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let f=0,m=4,g=0;const y=this.mappingBitMatrix.getHeight(),b=this.mappingBitMatrix.getWidth();let S=!1,T=!1,D=!1,$=!1;do if(m===y&&g===0&&!S)l[f++]=this.readCorner1(y,b)&255,m-=2,g+=2,S=!0;else if(m===y-2&&g===0&&b&3&&!T)l[f++]=this.readCorner2(y,b)&255,m-=2,g+=2,T=!0;else if(m===y+4&&g===2&&!(b&7)&&!D)l[f++]=this.readCorner3(y,b)&255,m-=2,g+=2,D=!0;else if(m===y-2&&g===0&&(b&7)===4&&!$)l[f++]=this.readCorner4(y,b)&255,m-=2,g+=2,$=!0;else{do m<y&&g>=0&&!this.readMappingMatrix.get(g,m)&&(l[f++]=this.readUtah(m,g,y,b)&255),m-=2,g+=2;while(m>=0&&g<b);m+=1,g+=3;do m>=0&&g<b&&!this.readMappingMatrix.get(g,m)&&(l[f++]=this.readUtah(m,g,y,b)&255),m+=2,g-=2;while(m<y&&g>=0);m+=3,g+=1}while(m<y||g<b);if(f!==this.version.getTotalCodewords())throw new F;return l}readModule(l,f,m,g){return l<0&&(l+=m,f+=4-(m+4&7)),f<0&&(f+=g,l+=4-(g+4&7)),this.readMappingMatrix.set(f,l),this.mappingBitMatrix.get(f,l)}readUtah(l,f,m,g){let y=0;return this.readModule(l-2,f-2,m,g)&&(y|=1),y<<=1,this.readModule(l-2,f-1,m,g)&&(y|=1),y<<=1,this.readModule(l-1,f-2,m,g)&&(y|=1),y<<=1,this.readModule(l-1,f-1,m,g)&&(y|=1),y<<=1,this.readModule(l-1,f,m,g)&&(y|=1),y<<=1,this.readModule(l,f-2,m,g)&&(y|=1),y<<=1,this.readModule(l,f-1,m,g)&&(y|=1),y<<=1,this.readModule(l,f,m,g)&&(y|=1),y}readCorner1(l,f){let m=0;return this.readModule(l-1,0,l,f)&&(m|=1),m<<=1,this.readModule(l-1,1,l,f)&&(m|=1),m<<=1,this.readModule(l-1,2,l,f)&&(m|=1),m<<=1,this.readModule(0,f-2,l,f)&&(m|=1),m<<=1,this.readModule(0,f-1,l,f)&&(m|=1),m<<=1,this.readModule(1,f-1,l,f)&&(m|=1),m<<=1,this.readModule(2,f-1,l,f)&&(m|=1),m<<=1,this.readModule(3,f-1,l,f)&&(m|=1),m}readCorner2(l,f){let m=0;return this.readModule(l-3,0,l,f)&&(m|=1),m<<=1,this.readModule(l-2,0,l,f)&&(m|=1),m<<=1,this.readModule(l-1,0,l,f)&&(m|=1),m<<=1,this.readModule(0,f-4,l,f)&&(m|=1),m<<=1,this.readModule(0,f-3,l,f)&&(m|=1),m<<=1,this.readModule(0,f-2,l,f)&&(m|=1),m<<=1,this.readModule(0,f-1,l,f)&&(m|=1),m<<=1,this.readModule(1,f-1,l,f)&&(m|=1),m}readCorner3(l,f){let m=0;return this.readModule(l-1,0,l,f)&&(m|=1),m<<=1,this.readModule(l-1,f-1,l,f)&&(m|=1),m<<=1,this.readModule(0,f-3,l,f)&&(m|=1),m<<=1,this.readModule(0,f-2,l,f)&&(m|=1),m<<=1,this.readModule(0,f-1,l,f)&&(m|=1),m<<=1,this.readModule(1,f-3,l,f)&&(m|=1),m<<=1,this.readModule(1,f-2,l,f)&&(m|=1),m<<=1,this.readModule(1,f-1,l,f)&&(m|=1),m}readCorner4(l,f){let m=0;return this.readModule(l-3,0,l,f)&&(m|=1),m<<=1,this.readModule(l-2,0,l,f)&&(m|=1),m<<=1,this.readModule(l-1,0,l,f)&&(m|=1),m<<=1,this.readModule(0,f-2,l,f)&&(m|=1),m<<=1,this.readModule(0,f-1,l,f)&&(m|=1),m<<=1,this.readModule(1,f-1,l,f)&&(m|=1),m<<=1,this.readModule(2,f-1,l,f)&&(m|=1),m<<=1,this.readModule(3,f-1,l,f)&&(m|=1),m}extractDataRegion(l){const f=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(l.getHeight()!==f)throw new p("Dimension of bitMatrix must match the version size");const g=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),b=f/g|0,S=m/y|0,T=b*g,D=S*y,$=new G(D,T);for(let Y=0;Y<b;++Y){const ee=Y*g;for(let fe=0;fe<S;++fe){const Ne=fe*y;for(let Ae=0;Ae<g;++Ae){const Oe=Y*(g+2)+1+Ae,Fe=ee+Ae;for(let Ye=0;Ye<y;++Ye){const et=fe*(y+2)+1+Ye;if(l.get(et,Oe)){const Je=Ne+Ye;$.set(Je,Fe)}}}}}return $}}class Kc{constructor(l,f){this.numDataCodewords=l,this.codewords=f}static getDataBlocks(l,f){const m=f.getECBlocks();let g=0;const y=m.getECBlocks();for(let Ae of y)g+=Ae.getCount();const b=new Array(g);let S=0;for(let Ae of y)for(let Oe=0;Oe<Ae.getCount();Oe++){const Fe=Ae.getDataCodewords(),Ye=m.getECCodewords()+Fe;b[S++]=new Kc(Fe,new Uint8Array(Ye))}const D=b[0].codewords.length-m.getECCodewords(),$=D-1;let Y=0;for(let Ae=0;Ae<$;Ae++)for(let Oe=0;Oe<S;Oe++)b[Oe].codewords[Ae]=l[Y++];const ee=f.getVersionNumber()===24,fe=ee?8:S;for(let Ae=0;Ae<fe;Ae++)b[Ae].codewords[D-1]=l[Y++];const Ne=b[0].codewords.length;for(let Ae=D;Ae<Ne;Ae++)for(let Oe=0;Oe<S;Oe++){const Fe=ee?(Oe+8)%S:Oe,Ye=ee&&Fe>7?Ae-1:Ae;b[Fe].codewords[Ye]=l[Y++]}if(Y!==l.length)throw new p;return b}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fn{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new p(""+l);let f=0,m=this.bitOffset,g=this.byteOffset;const y=this.bytes;if(m>0){const b=8-m,S=l<b?l:b,T=b-S,D=255>>8-S<<T;f=(y[g]&D)>>T,l-=S,m+=S,m===8&&(m=0,g++)}if(l>0){for(;l>=8;)f=f<<8|y[g]&255,g++,l-=8;if(l>0){const b=8-l,S=255>>b<<b;f=f<<l|(y[g]&S)>>b,m+=l}}return this.bitOffset=m,this.byteOffset=g,f}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var hn;(function(X){X[X.PAD_ENCODE=0]="PAD_ENCODE",X[X.ASCII_ENCODE=1]="ASCII_ENCODE",X[X.C40_ENCODE=2]="C40_ENCODE",X[X.TEXT_ENCODE=3]="TEXT_ENCODE",X[X.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",X[X.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",X[X.BASE256_ENCODE=6]="BASE256_ENCODE"})(hn||(hn={}));class zs{static decode(l){const f=new fn(l),m=new Q,g=new Q,y=new Array;let b=hn.ASCII_ENCODE;do if(b===hn.ASCII_ENCODE)b=this.decodeAsciiSegment(f,m,g);else{switch(b){case hn.C40_ENCODE:this.decodeC40Segment(f,m);break;case hn.TEXT_ENCODE:this.decodeTextSegment(f,m);break;case hn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(f,m);break;case hn.EDIFACT_ENCODE:this.decodeEdifactSegment(f,m);break;case hn.BASE256_ENCODE:this.decodeBase256Segment(f,m,y);break;default:throw new F}b=hn.ASCII_ENCODE}while(b!==hn.PAD_ENCODE&&f.available()>0);return g.length()>0&&m.append(g.toString()),new le(l,m.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(l,f,m){let g=!1;do{let y=l.readBits(8);if(y===0)throw new F;if(y<=128)return g&&(y+=128),f.append(String.fromCharCode(y-1)),hn.ASCII_ENCODE;if(y===129)return hn.PAD_ENCODE;if(y<=229){const b=y-130;b<10&&f.append("0"),f.append(""+b)}else switch(y){case 230:return hn.C40_ENCODE;case 231:return hn.BASE256_ENCODE;case 232:f.append("");break;case 233:case 234:break;case 235:g=!0;break;case 236:f.append("[)>05"),m.insert(0,"");break;case 237:f.append("[)>06"),m.insert(0,"");break;case 238:return hn.ANSIX12_ENCODE;case 239:return hn.TEXT_ENCODE;case 240:return hn.EDIFACT_ENCODE;case 241:break;default:if(y!==254||l.available()!==0)throw new F;break}}while(l.available()>0);return hn.ASCII_ENCODE}static decodeC40Segment(l,f){let m=!1;const g=[];let y=0;do{if(l.available()===8)return;const b=l.readBits(8);if(b===254)return;this.parseTwoBytes(b,l.readBits(8),g);for(let S=0;S<3;S++){const T=g[S];switch(y){case 0:if(T<3)y=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const D=this.C40_BASIC_SET_CHARS[T];m?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),m=!1):f.append(D)}else throw new F;break;case 1:m?(f.append(String.fromCharCode(T+128)),m=!1):f.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const D=this.C40_SHIFT2_SET_CHARS[T];m?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),m=!1):f.append(D)}else switch(T){case 27:f.append("");break;case 30:m=!0;break;default:throw new F}y=0;break;case 3:m?(f.append(String.fromCharCode(T+224)),m=!1):f.append(String.fromCharCode(T+96)),y=0;break;default:throw new F}}}while(l.available()>0)}static decodeTextSegment(l,f){let m=!1,g=[],y=0;do{if(l.available()===8)return;const b=l.readBits(8);if(b===254)return;this.parseTwoBytes(b,l.readBits(8),g);for(let S=0;S<3;S++){const T=g[S];switch(y){case 0:if(T<3)y=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const D=this.TEXT_BASIC_SET_CHARS[T];m?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),m=!1):f.append(D)}else throw new F;break;case 1:m?(f.append(String.fromCharCode(T+128)),m=!1):f.append(String.fromCharCode(T)),y=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const D=this.TEXT_SHIFT2_SET_CHARS[T];m?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),m=!1):f.append(D)}else switch(T){case 27:f.append("");break;case 30:m=!0;break;default:throw new F}y=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const D=this.TEXT_SHIFT3_SET_CHARS[T];m?(f.append(String.fromCharCode(D.charCodeAt(0)+128)),m=!1):f.append(D),y=0}else throw new F;break;default:throw new F}}}while(l.available()>0)}static decodeAnsiX12Segment(l,f){const m=[];do{if(l.available()===8)return;const g=l.readBits(8);if(g===254)return;this.parseTwoBytes(g,l.readBits(8),m);for(let y=0;y<3;y++){const b=m[y];switch(b){case 0:f.append("\r");break;case 1:f.append("*");break;case 2:f.append(">");break;case 3:f.append(" ");break;default:if(b<14)f.append(String.fromCharCode(b+44));else if(b<40)f.append(String.fromCharCode(b+51));else throw new F;break}}}while(l.available()>0)}static parseTwoBytes(l,f,m){let g=(l<<8)+f-1,y=Math.floor(g/1600);m[0]=y,g-=y*1600,y=Math.floor(g/40),m[1]=y,m[2]=g-y*40}static decodeEdifactSegment(l,f){do{if(l.available()<=16)return;for(let m=0;m<4;m++){let g=l.readBits(6);if(g===31){const y=8-l.getBitOffset();y!==8&&l.readBits(y);return}g&32||(g|=64),f.append(String.fromCharCode(g))}}while(l.available()>0)}static decodeBase256Segment(l,f,m){let g=1+l.getByteOffset();const y=this.unrandomize255State(l.readBits(8),g++);let b;if(y===0?b=l.available()/8|0:y<250?b=y:b=250*(y-249)+this.unrandomize255State(l.readBits(8),g++),b<0)throw new F;const S=new Uint8Array(b);for(let T=0;T<b;T++){if(l.available()<8)throw new F;S[T]=this.unrandomize255State(l.readBits(8),g++)}m.push(S);try{f.append(z.decode(S,q.ISO88591))}catch(T){throw new he("Platform does not support required encoding: "+T.message)}}static unrandomize255State(l,f){const m=149*f%255+1,g=l-m;return g>=0?g:g+256}}zs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zs.TEXT_SHIFT2_SET_CHARS=zs.C40_SHIFT2_SET_CHARS,zs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Gi{constructor(){this.rsDecoder=new Ze(We.DATA_MATRIX_FIELD_256)}decode(l){const f=new bo(l),m=f.getVersion(),g=f.readCodewords(),y=Kc.getDataBlocks(g,m);let b=0;for(let D of y)b+=D.getNumDataCodewords();const S=new Uint8Array(b),T=y.length;for(let D=0;D<T;D++){const $=y[D],Y=$.getCodewords(),ee=$.getNumDataCodewords();this.correctErrors(Y,ee);for(let fe=0;fe<ee;fe++)S[fe*T+D]=Y[fe]}return zs.decode(S)}correctErrors(l,f){const m=new Int32Array(l);try{this.rsDecoder.decode(m,l.length-f)}catch{throw new x}for(let g=0;g<f;g++)l[g]=m[g]}}class Or{constructor(l){this.image=l,this.rectangleDetector=new ar(this.image)}detect(){const l=this.rectangleDetector.detect();let f=this.detectSolid1(l);if(f=this.detectSolid2(f),f[3]=this.correctTopRight(f),!f[3])throw new H;f=this.shiftToModuleCenter(f);const m=f[0],g=f[1],y=f[2],b=f[3];let S=this.transitionsBetween(m,b)+1,T=this.transitionsBetween(y,b)+1;(S&1)===1&&(S+=1),(T&1)===1&&(T+=1),4*S<7*T&&4*T<7*S&&(S=T=Math.max(S,T));let D=Or.sampleGrid(this.image,m,g,y,b,S,T);return new Xt(D,[m,g,y,b])}static shiftPoint(l,f,m){let g=(f.getX()-l.getX())/(m+1),y=(f.getY()-l.getY())/(m+1);return new He(l.getX()+g,l.getY()+y)}static moveAway(l,f,m){let g=l.getX(),y=l.getY();return g<f?g-=1:g+=1,y<m?y-=1:y+=1,new He(g,y)}detectSolid1(l){let f=l[0],m=l[1],g=l[3],y=l[2],b=this.transitionsBetween(f,m),S=this.transitionsBetween(m,g),T=this.transitionsBetween(g,y),D=this.transitionsBetween(y,f),$=b,Y=[y,f,m,g];return $>S&&($=S,Y[0]=f,Y[1]=m,Y[2]=g,Y[3]=y),$>T&&($=T,Y[0]=m,Y[1]=g,Y[2]=y,Y[3]=f),$>D&&(Y[0]=g,Y[1]=y,Y[2]=f,Y[3]=m),Y}detectSolid2(l){let f=l[0],m=l[1],g=l[2],y=l[3],b=this.transitionsBetween(f,y),S=Or.shiftPoint(m,g,(b+1)*4),T=Or.shiftPoint(g,m,(b+1)*4),D=this.transitionsBetween(S,f),$=this.transitionsBetween(T,y);return D<$?(l[0]=f,l[1]=m,l[2]=g,l[3]=y):(l[0]=m,l[1]=g,l[2]=y,l[3]=f),l}correctTopRight(l){let f=l[0],m=l[1],g=l[2],y=l[3],b=this.transitionsBetween(f,y),S=this.transitionsBetween(m,y),T=Or.shiftPoint(f,m,(S+1)*4),D=Or.shiftPoint(g,m,(b+1)*4);b=this.transitionsBetween(T,y),S=this.transitionsBetween(D,y);let $=new He(y.getX()+(g.getX()-m.getX())/(b+1),y.getY()+(g.getY()-m.getY())/(b+1)),Y=new He(y.getX()+(f.getX()-m.getX())/(S+1),y.getY()+(f.getY()-m.getY())/(S+1));if(!this.isValid($))return this.isValid(Y)?Y:null;if(!this.isValid(Y))return $;let ee=this.transitionsBetween(T,$)+this.transitionsBetween(D,$),fe=this.transitionsBetween(T,Y)+this.transitionsBetween(D,Y);return ee>fe?$:Y}shiftToModuleCenter(l){let f=l[0],m=l[1],g=l[2],y=l[3],b=this.transitionsBetween(f,y)+1,S=this.transitionsBetween(g,y)+1,T=Or.shiftPoint(f,m,S*4),D=Or.shiftPoint(g,m,b*4);b=this.transitionsBetween(T,y)+1,S=this.transitionsBetween(D,y)+1,(b&1)===1&&(b+=1),(S&1)===1&&(S+=1);let $=(f.getX()+m.getX()+g.getX()+y.getX())/4,Y=(f.getY()+m.getY()+g.getY()+y.getY())/4;f=Or.moveAway(f,$,Y),m=Or.moveAway(m,$,Y),g=Or.moveAway(g,$,Y),y=Or.moveAway(y,$,Y);let ee,fe;return T=Or.shiftPoint(f,m,S*4),T=Or.shiftPoint(T,y,b*4),ee=Or.shiftPoint(m,f,S*4),ee=Or.shiftPoint(ee,g,b*4),D=Or.shiftPoint(g,y,S*4),D=Or.shiftPoint(D,m,b*4),fe=Or.shiftPoint(y,g,S*4),fe=Or.shiftPoint(fe,f,b*4),[T,ee,D,fe]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,f,m,g,y,b,S){return $t.getInstance().sampleGrid(l,b,S,.5,.5,b-.5,.5,b-.5,S-.5,.5,S-.5,f.getX(),f.getY(),y.getX(),y.getY(),g.getX(),g.getY(),m.getX(),m.getY())}transitionsBetween(l,f){let m=Math.trunc(l.getX()),g=Math.trunc(l.getY()),y=Math.trunc(f.getX()),b=Math.trunc(f.getY()),S=Math.abs(b-g)>Math.abs(y-m);if(S){let Ae=m;m=g,g=Ae,Ae=y,y=b,b=Ae}let T=Math.abs(y-m),D=Math.abs(b-g),$=-T/2,Y=g<b?1:-1,ee=m<y?1:-1,fe=0,Ne=this.image.get(S?g:m,S?m:g);for(let Ae=m,Oe=g;Ae!==y;Ae+=ee){let Fe=this.image.get(S?Oe:Ae,S?Ae:Oe);if(Fe!==Ne&&(fe++,Ne=Fe),$+=D,$>0){if(Oe===b)break;Oe+=Y,$-=T}}return fe}}class Xn{constructor(){this.decoder=new Gi}decode(l,f=null){let m,g;if(f!=null&&f.has(B.PURE_BARCODE)){const D=Xn.extractPureBits(l.getBlackMatrix());m=this.decoder.decode(D),g=Xn.NO_POINTS}else{const D=new Or(l.getBlackMatrix()).detect();m=this.decoder.decode(D.getBits()),g=D.getPoints()}const y=m.getRawBytes(),b=new ne(m.getText(),y,8*y.length,g,be.DATA_MATRIX,j.currentTimeMillis()),S=m.getByteSegments();S!=null&&b.putMetadata(xe.BYTE_SEGMENTS,S);const T=m.getECLevel();return T!=null&&b.putMetadata(xe.ERROR_CORRECTION_LEVEL,T),b}reset(){}static extractPureBits(l){const f=l.getTopLeftOnBit(),m=l.getBottomRightOnBit();if(f==null||m==null)throw new H;const g=this.moduleSize(f,l);let y=f[1];const b=m[1];let S=f[0];const D=(m[0]-S+1)/g,$=(b-y+1)/g;if(D<=0||$<=0)throw new H;const Y=g/2;y+=Y,S+=Y;const ee=new G(D,$);for(let fe=0;fe<$;fe++){const Ne=y+fe*g;for(let Ae=0;Ae<D;Ae++)l.get(S+Ae*g,Ne)&&ee.set(Ae,fe)}return ee}static moduleSize(l,f){const m=f.getWidth();let g=l[0];const y=l[1];for(;g<m&&f.get(g,y);)g++;if(g===m)throw new H;const b=g-l[0];if(b===0)throw new H;return b}}Xn.NO_POINTS=[];class Ko extends se{constructor(l=500){super(new Xn,l)}}var qr;(function(X){X[X.L=0]="L",X[X.M=1]="M",X[X.Q=2]="Q",X[X.H=3]="H"})(qr||(qr={}));class jr{constructor(l,f,m){this.value=l,this.stringValue=f,this.bits=m,jr.FOR_BITS.set(m,this),jr.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return jr.L;case"M":return jr.M;case"Q":return jr.Q;case"H":return jr.H;default:throw new h(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof jr))return!1;const f=l;return this.value===f.value}static forBits(l){if(l<0||l>=jr.FOR_BITS.size)throw new p;return jr.FOR_BITS.get(l)}}jr.FOR_BITS=new Map,jr.FOR_VALUE=new Map,jr.L=new jr(qr.L,"L",1),jr.M=new jr(qr.M,"M",0),jr.Q=new jr(qr.Q,"Q",3),jr.H=new jr(qr.H,"H",2);class Yn{constructor(l){this.errorCorrectionLevel=jr.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,f){return E.bitCount(l^f)}static decodeFormatInformation(l,f){const m=Yn.doDecodeFormatInformation(l,f);return m!==null?m:Yn.doDecodeFormatInformation(l^Yn.FORMAT_INFO_MASK_QR,f^Yn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,f){let m=Number.MAX_SAFE_INTEGER,g=0;for(const y of Yn.FORMAT_INFO_DECODE_LOOKUP){const b=y[0];if(b===l||b===f)return new Yn(y[1]);let S=Yn.numBitsDiffering(l,b);S<m&&(g=y[1],m=S),l!==f&&(S=Yn.numBitsDiffering(f,b),S<m&&(g=y[1],m=S))}return m<=3?new Yn(g):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof Yn))return!1;const f=l;return this.errorCorrectionLevel===f.errorCorrectionLevel&&this.dataMask===f.dataMask}}Yn.FORMAT_INFO_MASK_QR=21522,Yn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Le{constructor(l,...f){this.ecCodewordsPerBlock=l,this.ecBlocks=f}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const f=this.ecBlocks;for(const m of f)l+=m.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ce{constructor(l,f){this.count=l,this.dataCodewords=f}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class mt{constructor(l,f,...m){this.versionNumber=l,this.alignmentPatternCenters=f,this.ecBlocks=m;let g=0;const y=m[0].getECCodewordsPerBlock(),b=m[0].getECBlocks();for(const S of b)g+=S.getCount()*(S.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new F;try{return this.getVersionForNumber((l-17)/4)}catch{throw new F}}static getVersionForNumber(l){if(l<1||l>40)throw new p;return mt.VERSIONS[l-1]}static decodeVersionInformation(l){let f=Number.MAX_SAFE_INTEGER,m=0;for(let g=0;g<mt.VERSION_DECODE_INFO.length;g++){const y=mt.VERSION_DECODE_INFO[g];if(y===l)return mt.getVersionForNumber(g+7);const b=Yn.numBitsDiffering(l,y);b<f&&(m=g+7,f=b)}return f<=3?mt.getVersionForNumber(m):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),f=new G(l);f.setRegion(0,0,9,9),f.setRegion(l-8,0,8,9),f.setRegion(0,l-8,9,8);const m=this.alignmentPatternCenters.length;for(let g=0;g<m;g++){const y=this.alignmentPatternCenters[g]-2;for(let b=0;b<m;b++)g===0&&(b===0||b===m-1)||g===m-1&&b===0||f.setRegion(this.alignmentPatternCenters[b]-2,y,5,5)}return f.setRegion(6,9,1,l-17),f.setRegion(9,6,l-17,1),this.versionNumber>6&&(f.setRegion(l-11,0,3,6),f.setRegion(0,l-11,6,3)),f}toString(){return""+this.versionNumber}}mt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),mt.VERSIONS=[new mt(1,new Int32Array(0),new Le(7,new ce(1,19)),new Le(10,new ce(1,16)),new Le(13,new ce(1,13)),new Le(17,new ce(1,9))),new mt(2,Int32Array.from([6,18]),new Le(10,new ce(1,34)),new Le(16,new ce(1,28)),new Le(22,new ce(1,22)),new Le(28,new ce(1,16))),new mt(3,Int32Array.from([6,22]),new Le(15,new ce(1,55)),new Le(26,new ce(1,44)),new Le(18,new ce(2,17)),new Le(22,new ce(2,13))),new mt(4,Int32Array.from([6,26]),new Le(20,new ce(1,80)),new Le(18,new ce(2,32)),new Le(26,new ce(2,24)),new Le(16,new ce(4,9))),new mt(5,Int32Array.from([6,30]),new Le(26,new ce(1,108)),new Le(24,new ce(2,43)),new Le(18,new ce(2,15),new ce(2,16)),new Le(22,new ce(2,11),new ce(2,12))),new mt(6,Int32Array.from([6,34]),new Le(18,new ce(2,68)),new Le(16,new ce(4,27)),new Le(24,new ce(4,19)),new Le(28,new ce(4,15))),new mt(7,Int32Array.from([6,22,38]),new Le(20,new ce(2,78)),new Le(18,new ce(4,31)),new Le(18,new ce(2,14),new ce(4,15)),new Le(26,new ce(4,13),new ce(1,14))),new mt(8,Int32Array.from([6,24,42]),new Le(24,new ce(2,97)),new Le(22,new ce(2,38),new ce(2,39)),new Le(22,new ce(4,18),new ce(2,19)),new Le(26,new ce(4,14),new ce(2,15))),new mt(9,Int32Array.from([6,26,46]),new Le(30,new ce(2,116)),new Le(22,new ce(3,36),new ce(2,37)),new Le(20,new ce(4,16),new ce(4,17)),new Le(24,new ce(4,12),new ce(4,13))),new mt(10,Int32Array.from([6,28,50]),new Le(18,new ce(2,68),new ce(2,69)),new Le(26,new ce(4,43),new ce(1,44)),new Le(24,new ce(6,19),new ce(2,20)),new Le(28,new ce(6,15),new ce(2,16))),new mt(11,Int32Array.from([6,30,54]),new Le(20,new ce(4,81)),new Le(30,new ce(1,50),new ce(4,51)),new Le(28,new ce(4,22),new ce(4,23)),new Le(24,new ce(3,12),new ce(8,13))),new mt(12,Int32Array.from([6,32,58]),new Le(24,new ce(2,92),new ce(2,93)),new Le(22,new ce(6,36),new ce(2,37)),new Le(26,new ce(4,20),new ce(6,21)),new Le(28,new ce(7,14),new ce(4,15))),new mt(13,Int32Array.from([6,34,62]),new Le(26,new ce(4,107)),new Le(22,new ce(8,37),new ce(1,38)),new Le(24,new ce(8,20),new ce(4,21)),new Le(22,new ce(12,11),new ce(4,12))),new mt(14,Int32Array.from([6,26,46,66]),new Le(30,new ce(3,115),new ce(1,116)),new Le(24,new ce(4,40),new ce(5,41)),new Le(20,new ce(11,16),new ce(5,17)),new Le(24,new ce(11,12),new ce(5,13))),new mt(15,Int32Array.from([6,26,48,70]),new Le(22,new ce(5,87),new ce(1,88)),new Le(24,new ce(5,41),new ce(5,42)),new Le(30,new ce(5,24),new ce(7,25)),new Le(24,new ce(11,12),new ce(7,13))),new mt(16,Int32Array.from([6,26,50,74]),new Le(24,new ce(5,98),new ce(1,99)),new Le(28,new ce(7,45),new ce(3,46)),new Le(24,new ce(15,19),new ce(2,20)),new Le(30,new ce(3,15),new ce(13,16))),new mt(17,Int32Array.from([6,30,54,78]),new Le(28,new ce(1,107),new ce(5,108)),new Le(28,new ce(10,46),new ce(1,47)),new Le(28,new ce(1,22),new ce(15,23)),new Le(28,new ce(2,14),new ce(17,15))),new mt(18,Int32Array.from([6,30,56,82]),new Le(30,new ce(5,120),new ce(1,121)),new Le(26,new ce(9,43),new ce(4,44)),new Le(28,new ce(17,22),new ce(1,23)),new Le(28,new ce(2,14),new ce(19,15))),new mt(19,Int32Array.from([6,30,58,86]),new Le(28,new ce(3,113),new ce(4,114)),new Le(26,new ce(3,44),new ce(11,45)),new Le(26,new ce(17,21),new ce(4,22)),new Le(26,new ce(9,13),new ce(16,14))),new mt(20,Int32Array.from([6,34,62,90]),new Le(28,new ce(3,107),new ce(5,108)),new Le(26,new ce(3,41),new ce(13,42)),new Le(30,new ce(15,24),new ce(5,25)),new Le(28,new ce(15,15),new ce(10,16))),new mt(21,Int32Array.from([6,28,50,72,94]),new Le(28,new ce(4,116),new ce(4,117)),new Le(26,new ce(17,42)),new Le(28,new ce(17,22),new ce(6,23)),new Le(30,new ce(19,16),new ce(6,17))),new mt(22,Int32Array.from([6,26,50,74,98]),new Le(28,new ce(2,111),new ce(7,112)),new Le(28,new ce(17,46)),new Le(30,new ce(7,24),new ce(16,25)),new Le(24,new ce(34,13))),new mt(23,Int32Array.from([6,30,54,78,102]),new Le(30,new ce(4,121),new ce(5,122)),new Le(28,new ce(4,47),new ce(14,48)),new Le(30,new ce(11,24),new ce(14,25)),new Le(30,new ce(16,15),new ce(14,16))),new mt(24,Int32Array.from([6,28,54,80,106]),new Le(30,new ce(6,117),new ce(4,118)),new Le(28,new ce(6,45),new ce(14,46)),new Le(30,new ce(11,24),new ce(16,25)),new Le(30,new ce(30,16),new ce(2,17))),new mt(25,Int32Array.from([6,32,58,84,110]),new Le(26,new ce(8,106),new ce(4,107)),new Le(28,new ce(8,47),new ce(13,48)),new Le(30,new ce(7,24),new ce(22,25)),new Le(30,new ce(22,15),new ce(13,16))),new mt(26,Int32Array.from([6,30,58,86,114]),new Le(28,new ce(10,114),new ce(2,115)),new Le(28,new ce(19,46),new ce(4,47)),new Le(28,new ce(28,22),new ce(6,23)),new Le(30,new ce(33,16),new ce(4,17))),new mt(27,Int32Array.from([6,34,62,90,118]),new Le(30,new ce(8,122),new ce(4,123)),new Le(28,new ce(22,45),new ce(3,46)),new Le(30,new ce(8,23),new ce(26,24)),new Le(30,new ce(12,15),new ce(28,16))),new mt(28,Int32Array.from([6,26,50,74,98,122]),new Le(30,new ce(3,117),new ce(10,118)),new Le(28,new ce(3,45),new ce(23,46)),new Le(30,new ce(4,24),new ce(31,25)),new Le(30,new ce(11,15),new ce(31,16))),new mt(29,Int32Array.from([6,30,54,78,102,126]),new Le(30,new ce(7,116),new ce(7,117)),new Le(28,new ce(21,45),new ce(7,46)),new Le(30,new ce(1,23),new ce(37,24)),new Le(30,new ce(19,15),new ce(26,16))),new mt(30,Int32Array.from([6,26,52,78,104,130]),new Le(30,new ce(5,115),new ce(10,116)),new Le(28,new ce(19,47),new ce(10,48)),new Le(30,new ce(15,24),new ce(25,25)),new Le(30,new ce(23,15),new ce(25,16))),new mt(31,Int32Array.from([6,30,56,82,108,134]),new Le(30,new ce(13,115),new ce(3,116)),new Le(28,new ce(2,46),new ce(29,47)),new Le(30,new ce(42,24),new ce(1,25)),new Le(30,new ce(23,15),new ce(28,16))),new mt(32,Int32Array.from([6,34,60,86,112,138]),new Le(30,new ce(17,115)),new Le(28,new ce(10,46),new ce(23,47)),new Le(30,new ce(10,24),new ce(35,25)),new Le(30,new ce(19,15),new ce(35,16))),new mt(33,Int32Array.from([6,30,58,86,114,142]),new Le(30,new ce(17,115),new ce(1,116)),new Le(28,new ce(14,46),new ce(21,47)),new Le(30,new ce(29,24),new ce(19,25)),new Le(30,new ce(11,15),new ce(46,16))),new mt(34,Int32Array.from([6,34,62,90,118,146]),new Le(30,new ce(13,115),new ce(6,116)),new Le(28,new ce(14,46),new ce(23,47)),new Le(30,new ce(44,24),new ce(7,25)),new Le(30,new ce(59,16),new ce(1,17))),new mt(35,Int32Array.from([6,30,54,78,102,126,150]),new Le(30,new ce(12,121),new ce(7,122)),new Le(28,new ce(12,47),new ce(26,48)),new Le(30,new ce(39,24),new ce(14,25)),new Le(30,new ce(22,15),new ce(41,16))),new mt(36,Int32Array.from([6,24,50,76,102,128,154]),new Le(30,new ce(6,121),new ce(14,122)),new Le(28,new ce(6,47),new ce(34,48)),new Le(30,new ce(46,24),new ce(10,25)),new Le(30,new ce(2,15),new ce(64,16))),new mt(37,Int32Array.from([6,28,54,80,106,132,158]),new Le(30,new ce(17,122),new ce(4,123)),new Le(28,new ce(29,46),new ce(14,47)),new Le(30,new ce(49,24),new ce(10,25)),new Le(30,new ce(24,15),new ce(46,16))),new mt(38,Int32Array.from([6,32,58,84,110,136,162]),new Le(30,new ce(4,122),new ce(18,123)),new Le(28,new ce(13,46),new ce(32,47)),new Le(30,new ce(48,24),new ce(14,25)),new Le(30,new ce(42,15),new ce(32,16))),new mt(39,Int32Array.from([6,26,54,82,110,138,166]),new Le(30,new ce(20,117),new ce(4,118)),new Le(28,new ce(40,47),new ce(7,48)),new Le(30,new ce(43,24),new ce(22,25)),new Le(30,new ce(10,15),new ce(67,16))),new mt(40,Int32Array.from([6,30,58,86,114,142,170]),new Le(30,new ce(19,118),new ce(6,119)),new Le(28,new ce(18,47),new ce(31,48)),new Le(30,new ce(34,24),new ce(34,25)),new Le(30,new ce(20,15),new ce(61,16)))];var bn;(function(X){X[X.DATA_MASK_000=0]="DATA_MASK_000",X[X.DATA_MASK_001=1]="DATA_MASK_001",X[X.DATA_MASK_010=2]="DATA_MASK_010",X[X.DATA_MASK_011=3]="DATA_MASK_011",X[X.DATA_MASK_100=4]="DATA_MASK_100",X[X.DATA_MASK_101=5]="DATA_MASK_101",X[X.DATA_MASK_110=6]="DATA_MASK_110",X[X.DATA_MASK_111=7]="DATA_MASK_111"})(bn||(bn={}));class _a{constructor(l,f){this.value=l,this.isMasked=f}unmaskBitMatrix(l,f){for(let m=0;m<f;m++)for(let g=0;g<f;g++)this.isMasked(m,g)&&l.flip(g,m)}}_a.values=new Map([[bn.DATA_MASK_000,new _a(bn.DATA_MASK_000,(X,l)=>(X+l&1)===0)],[bn.DATA_MASK_001,new _a(bn.DATA_MASK_001,(X,l)=>(X&1)===0)],[bn.DATA_MASK_010,new _a(bn.DATA_MASK_010,(X,l)=>l%3===0)],[bn.DATA_MASK_011,new _a(bn.DATA_MASK_011,(X,l)=>(X+l)%3===0)],[bn.DATA_MASK_100,new _a(bn.DATA_MASK_100,(X,l)=>(Math.floor(X/2)+Math.floor(l/3)&1)===0)],[bn.DATA_MASK_101,new _a(bn.DATA_MASK_101,(X,l)=>X*l%6===0)],[bn.DATA_MASK_110,new _a(bn.DATA_MASK_110,(X,l)=>X*l%6<3)],[bn.DATA_MASK_111,new _a(bn.DATA_MASK_111,(X,l)=>(X+l+X*l%3&1)===0)]]);class wo{constructor(l){const f=l.getHeight();if(f<21||(f&3)!==1)throw new F;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let y=0;y<6;y++)l=this.copyBit(y,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let y=5;y>=0;y--)l=this.copyBit(8,y,l);const f=this.bitMatrix.getHeight();let m=0;const g=f-7;for(let y=f-1;y>=g;y--)m=this.copyBit(8,y,m);for(let y=f-8;y<f;y++)m=this.copyBit(y,8,m);if(this.parsedFormatInfo=Yn.decodeFormatInformation(l,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),f=Math.floor((l-17)/4);if(f<=6)return mt.getVersionForNumber(f);let m=0;const g=l-11;for(let b=5;b>=0;b--)for(let S=l-9;S>=g;S--)m=this.copyBit(S,b,m);let y=mt.decodeVersionInformation(m);if(y!==null&&y.getDimensionForVersion()===l)return this.parsedVersion=y,y;m=0;for(let b=5;b>=0;b--)for(let S=l-9;S>=g;S--)m=this.copyBit(b,S,m);if(y=mt.decodeVersionInformation(m),y!==null&&y.getDimensionForVersion()===l)return this.parsedVersion=y,y;throw new F}copyBit(l,f,m){return(this.isMirror?this.bitMatrix.get(f,l):this.bitMatrix.get(l,f))?m<<1|1:m<<1}readCodewords(){const l=this.readFormatInformation(),f=this.readVersion(),m=_a.values.get(l.getDataMask()),g=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,g);const y=f.buildFunctionPattern();let b=!0;const S=new Uint8Array(f.getTotalCodewords());let T=0,D=0,$=0;for(let Y=g-1;Y>0;Y-=2){Y===6&&Y--;for(let ee=0;ee<g;ee++){const fe=b?g-1-ee:ee;for(let Ne=0;Ne<2;Ne++)y.get(Y-Ne,fe)||($++,D<<=1,this.bitMatrix.get(Y-Ne,fe)&&(D|=1),$===8&&(S[T++]=D,$=0,D=0))}b=!b}if(T!==f.getTotalCodewords())throw new F;return S}remask(){if(this.parsedFormatInfo===null)return;const l=_a.values[this.parsedFormatInfo.getDataMask()],f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let f=0,m=l.getWidth();f<m;f++)for(let g=f+1,y=l.getHeight();g<y;g++)l.get(f,g)!==l.get(g,f)&&(l.flip(g,f),l.flip(f,g))}}class Xo{constructor(l,f){this.numDataCodewords=l,this.codewords=f}static getDataBlocks(l,f,m){if(l.length!==f.getTotalCodewords())throw new p;const g=f.getECBlocksForLevel(m);let y=0;const b=g.getECBlocks();for(const Ne of b)y+=Ne.getCount();const S=new Array(y);let T=0;for(const Ne of b)for(let Ae=0;Ae<Ne.getCount();Ae++){const Oe=Ne.getDataCodewords(),Fe=g.getECCodewordsPerBlock()+Oe;S[T++]=new Xo(Oe,new Uint8Array(Fe))}const D=S[0].codewords.length;let $=S.length-1;for(;$>=0&&S[$].codewords.length!==D;)$--;$++;const Y=D-g.getECCodewordsPerBlock();let ee=0;for(let Ne=0;Ne<Y;Ne++)for(let Ae=0;Ae<T;Ae++)S[Ae].codewords[Ne]=l[ee++];for(let Ne=$;Ne<T;Ne++)S[Ne].codewords[Y]=l[ee++];const fe=S[0].codewords.length;for(let Ne=Y;Ne<fe;Ne++)for(let Ae=0;Ae<T;Ae++){const Oe=Ae<$?Ne:Ne+1;S[Ae].codewords[Oe]=l[ee++]}return S}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ha;(function(X){X[X.TERMINATOR=0]="TERMINATOR",X[X.NUMERIC=1]="NUMERIC",X[X.ALPHANUMERIC=2]="ALPHANUMERIC",X[X.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",X[X.BYTE=4]="BYTE",X[X.ECI=5]="ECI",X[X.KANJI=6]="KANJI",X[X.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",X[X.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",X[X.HANZI=9]="HANZI"})(Ha||(Ha={}));class Rt{constructor(l,f,m,g){this.value=l,this.stringValue=f,this.characterCountBitsForVersions=m,this.bits=g,Rt.FOR_BITS.set(g,this),Rt.FOR_VALUE.set(l,this)}static forBits(l){const f=Rt.FOR_BITS.get(l);if(f===void 0)throw new p;return f}getCharacterCountBits(l){const f=l.getVersionNumber();let m;return f<=9?m=0:f<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof Rt))return!1;const f=l;return this.value===f.value}toString(){return this.stringValue}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.TERMINATOR=new Rt(Ha.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Rt.NUMERIC=new Rt(Ha.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Rt.ALPHANUMERIC=new Rt(Ha.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Rt.STRUCTURED_APPEND=new Rt(Ha.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Rt.BYTE=new Rt(Ha.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Rt.ECI=new Rt(Ha.ECI,"ECI",Int32Array.from([0,0,0]),7),Rt.KANJI=new Rt(Ha.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Rt.FNC1_FIRST_POSITION=new Rt(Ha.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Rt.FNC1_SECOND_POSITION=new Rt(Ha.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Rt.HANZI=new Rt(Ha.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Hr{static decode(l,f,m,g){const y=new fn(l);let b=new Q;const S=new Array;let T=-1,D=-1;try{let $=null,Y=!1,ee;do{if(y.available()<4)ee=Rt.TERMINATOR;else{const fe=y.readBits(4);ee=Rt.forBits(fe)}switch(ee){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:Y=!0;break;case Rt.STRUCTURED_APPEND:if(y.available()<16)throw new F;T=y.readBits(8),D=y.readBits(8);break;case Rt.ECI:const fe=Hr.parseECIValue(y);if($=L.getCharacterSetECIByValue(fe),$===null)throw new F;break;case Rt.HANZI:const Ne=y.readBits(4),Ae=y.readBits(ee.getCharacterCountBits(f));Ne===Hr.GB2312_SUBSET&&Hr.decodeHanziSegment(y,b,Ae);break;default:const Oe=y.readBits(ee.getCharacterCountBits(f));switch(ee){case Rt.NUMERIC:Hr.decodeNumericSegment(y,b,Oe);break;case Rt.ALPHANUMERIC:Hr.decodeAlphanumericSegment(y,b,Oe,Y);break;case Rt.BYTE:Hr.decodeByteSegment(y,b,Oe,$,S,g);break;case Rt.KANJI:Hr.decodeKanjiSegment(y,b,Oe);break;default:throw new F}break}}while(ee!==Rt.TERMINATOR)}catch{throw new F}return new le(l,b.toString(),S.length===0?null:S,m===null?null:m.toString(),T,D)}static decodeHanziSegment(l,f,m){if(m*13>l.available())throw new F;const g=new Uint8Array(2*m);let y=0;for(;m>0;){const b=l.readBits(13);let S=b/96<<8&4294967295|b%96;S<959?S+=41377:S+=42657,g[y]=S>>8&255,g[y+1]=S&255,y+=2,m--}try{f.append(z.decode(g,q.GB2312))}catch(b){throw new F(b)}}static decodeKanjiSegment(l,f,m){if(m*13>l.available())throw new F;const g=new Uint8Array(2*m);let y=0;for(;m>0;){const b=l.readBits(13);let S=b/192<<8&4294967295|b%192;S<7936?S+=33088:S+=49472,g[y]=S>>8,g[y+1]=S,y+=2,m--}try{f.append(z.decode(g,q.SHIFT_JIS))}catch(b){throw new F(b)}}static decodeByteSegment(l,f,m,g,y,b){if(8*m>l.available())throw new F;const S=new Uint8Array(m);for(let D=0;D<m;D++)S[D]=l.readBits(8);let T;g===null?T=q.guessEncoding(S,b):T=g.getName();try{f.append(z.decode(S,T))}catch(D){throw new F(D)}y.push(S)}static toAlphaNumericChar(l){if(l>=Hr.ALPHANUMERIC_CHARS.length)throw new F;return Hr.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,f,m,g){const y=f.length();for(;m>1;){if(l.available()<11)throw new F;const b=l.readBits(11);f.append(Hr.toAlphaNumericChar(Math.floor(b/45))),f.append(Hr.toAlphaNumericChar(b%45)),m-=2}if(m===1){if(l.available()<6)throw new F;f.append(Hr.toAlphaNumericChar(l.readBits(6)))}if(g)for(let b=y;b<f.length();b++)f.charAt(b)==="%"&&(b<f.length()-1&&f.charAt(b+1)==="%"?f.deleteCharAt(b+1):f.setCharAt(b,""))}static decodeNumericSegment(l,f,m){for(;m>=3;){if(l.available()<10)throw new F;const g=l.readBits(10);if(g>=1e3)throw new F;f.append(Hr.toAlphaNumericChar(Math.floor(g/100))),f.append(Hr.toAlphaNumericChar(Math.floor(g/10)%10)),f.append(Hr.toAlphaNumericChar(g%10)),m-=3}if(m===2){if(l.available()<7)throw new F;const g=l.readBits(7);if(g>=100)throw new F;f.append(Hr.toAlphaNumericChar(Math.floor(g/10))),f.append(Hr.toAlphaNumericChar(g%10))}else if(m===1){if(l.available()<4)throw new F;const g=l.readBits(4);if(g>=10)throw new F;f.append(Hr.toAlphaNumericChar(g))}}static parseECIValue(l){const f=l.readBits(8);if(!(f&128))return f&127;if((f&192)===128){const m=l.readBits(8);return(f&63)<<8&4294967295|m}if((f&224)===192){const m=l.readBits(16);return(f&31)<<16&4294967295|m}throw new F}}Hr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Hr.GB2312_SUBSET=1;class Xl{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const f=l[0];l[0]=l[2],l[2]=f}}class Yo{constructor(){this.rsDecoder=new Ze(We.QR_CODE_FIELD_256)}decodeBooleanArray(l,f){return this.decodeBitMatrix(G.parseFromBooleanArray(l),f)}decodeBitMatrix(l,f){const m=new wo(l);let g=null;try{return this.decodeBitMatrixParser(m,f)}catch(y){g=y}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const y=this.decodeBitMatrixParser(m,f);return y.setOther(new Xl(!0)),y}catch(y){throw g!==null?g:y}}decodeBitMatrixParser(l,f){const m=l.readVersion(),g=l.readFormatInformation().getErrorCorrectionLevel(),y=l.readCodewords(),b=Xo.getDataBlocks(y,m,g);let S=0;for(const $ of b)S+=$.getNumDataCodewords();const T=new Uint8Array(S);let D=0;for(const $ of b){const Y=$.getCodewords(),ee=$.getNumDataCodewords();this.correctErrors(Y,ee);for(let fe=0;fe<ee;fe++)T[D++]=Y[fe]}return Hr.decode(T,m,g,f)}correctErrors(l,f){const m=new Int32Array(l);try{this.rsDecoder.decode(m,l.length-f)}catch{throw new x}for(let g=0;g<f;g++)l[g]=m[g]}}class yi extends He{constructor(l,f,m){super(l,f),this.estimatedModuleSize=m}aboutEquals(l,f,m){if(Math.abs(f-this.getY())<=l&&Math.abs(m-this.getX())<=l){const g=Math.abs(l-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(l,f,m){const g=(this.getX()+f)/2,y=(this.getY()+l)/2,b=(this.estimatedModuleSize+m)/2;return new yi(g,y,b)}}class Yl{constructor(l,f,m,g,y,b,S){this.image=l,this.startX=f,this.startY=m,this.width=g,this.height=y,this.moduleSize=b,this.resultPointCallback=S,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,f=this.height,m=this.width,g=l+m,y=this.startY+f/2,b=new Int32Array(3),S=this.image;for(let T=0;T<f;T++){const D=y+(T&1?-Math.floor((T+1)/2):Math.floor((T+1)/2));b[0]=0,b[1]=0,b[2]=0;let $=l;for(;$<g&&!S.get($,D);)$++;let Y=0;for(;$<g;){if(S.get($,D))if(Y===1)b[1]++;else if(Y===2){if(this.foundPatternCross(b)){const ee=this.handlePossibleCenter(b,D,$);if(ee!==null)return ee}b[0]=b[2],b[1]=1,b[2]=0,Y=1}else b[++Y]++;else Y===1&&Y++,b[Y]++;$++}if(this.foundPatternCross(b)){const ee=this.handlePossibleCenter(b,D,g);if(ee!==null)return ee}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(l,f){return f-l[2]-l[1]/2}foundPatternCross(l){const f=this.moduleSize,m=f/2;for(let g=0;g<3;g++)if(Math.abs(f-l[g])>=m)return!1;return!0}crossCheckVertical(l,f,m,g){const y=this.image,b=y.getHeight(),S=this.crossCheckStateCount;S[0]=0,S[1]=0,S[2]=0;let T=l;for(;T>=0&&y.get(f,T)&&S[1]<=m;)S[1]++,T--;if(T<0||S[1]>m)return NaN;for(;T>=0&&!y.get(f,T)&&S[0]<=m;)S[0]++,T--;if(S[0]>m)return NaN;for(T=l+1;T<b&&y.get(f,T)&&S[1]<=m;)S[1]++,T++;if(T===b||S[1]>m)return NaN;for(;T<b&&!y.get(f,T)&&S[2]<=m;)S[2]++,T++;if(S[2]>m)return NaN;const D=S[0]+S[1]+S[2];return 5*Math.abs(D-g)>=2*g?NaN:this.foundPatternCross(S)?Yl.centerFromEnd(S,T):NaN}handlePossibleCenter(l,f,m){const g=l[0]+l[1]+l[2],y=Yl.centerFromEnd(l,m),b=this.crossCheckVertical(f,y,2*l[1],g);if(!isNaN(b)){const S=(l[0]+l[1]+l[2])/3;for(const D of this.possibleCenters)if(D.aboutEquals(S,b,y))return D.combineEstimate(b,y,S);const T=new yi(y,b,S);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class Ki extends He{constructor(l,f,m,g){super(l,f),this.estimatedModuleSize=m,this.count=g,g===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,f,m){if(Math.abs(f-this.getY())<=l&&Math.abs(m-this.getX())<=l){const g=Math.abs(l-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(l,f,m){const g=this.count+1,y=(this.count*this.getX()+f)/g,b=(this.count*this.getY()+l)/g,S=(this.count*this.estimatedModuleSize+m)/g;return new Ki(y,b,S,g)}}class Xc{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class wt{constructor(l,f){this.image=l,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=f}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const f=l!=null&&l.get(B.TRY_HARDER)!==void 0,m=l!=null&&l.get(B.PURE_BARCODE)!==void 0,g=this.image,y=g.getHeight(),b=g.getWidth();let S=Math.floor(3*y/(4*wt.MAX_MODULES));(S<wt.MIN_SKIP||f)&&(S=wt.MIN_SKIP);let T=!1;const D=new Int32Array(5);for(let Y=S-1;Y<y&&!T;Y+=S){D[0]=0,D[1]=0,D[2]=0,D[3]=0,D[4]=0;let ee=0;for(let fe=0;fe<b;fe++)if(g.get(fe,Y))(ee&1)===1&&ee++,D[ee]++;else if(ee&1)D[ee]++;else if(ee===4)if(wt.foundPatternCross(D)){if(this.handlePossibleCenter(D,Y,fe,m)===!0)if(S=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const Ae=this.findRowSkip();Ae>D[2]&&(Y+=Ae-D[2]-S,fe=b-1)}else{D[0]=D[2],D[1]=D[3],D[2]=D[4],D[3]=1,D[4]=0,ee=3;continue}ee=0,D[0]=0,D[1]=0,D[2]=0,D[3]=0,D[4]=0}else D[0]=D[2],D[1]=D[3],D[2]=D[4],D[3]=1,D[4]=0,ee=3;else D[++ee]++;wt.foundPatternCross(D)&&this.handlePossibleCenter(D,Y,b,m)===!0&&(S=D[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const $=this.selectBestPatterns();return He.orderBestPatterns($),new Xc($)}static centerFromEnd(l,f){return f-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let f=0;for(let y=0;y<5;y++){const b=l[y];if(b===0)return!1;f+=b}if(f<7)return!1;const m=f/7,g=m/2;return Math.abs(m-l[0])<g&&Math.abs(m-l[1])<g&&Math.abs(3*m-l[2])<3*g&&Math.abs(m-l[3])<g&&Math.abs(m-l[4])<g}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,f,m,g){const y=this.getCrossCheckStateCount();let b=0;const S=this.image;for(;l>=b&&f>=b&&S.get(f-b,l-b);)y[2]++,b++;if(l<b||f<b)return!1;for(;l>=b&&f>=b&&!S.get(f-b,l-b)&&y[1]<=m;)y[1]++,b++;if(l<b||f<b||y[1]>m)return!1;for(;l>=b&&f>=b&&S.get(f-b,l-b)&&y[0]<=m;)y[0]++,b++;if(y[0]>m)return!1;const T=S.getHeight(),D=S.getWidth();for(b=1;l+b<T&&f+b<D&&S.get(f+b,l+b);)y[2]++,b++;if(l+b>=T||f+b>=D)return!1;for(;l+b<T&&f+b<D&&!S.get(f+b,l+b)&&y[3]<m;)y[3]++,b++;if(l+b>=T||f+b>=D||y[3]>=m)return!1;for(;l+b<T&&f+b<D&&S.get(f+b,l+b)&&y[4]<m;)y[4]++,b++;if(y[4]>=m)return!1;const $=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs($-g)<2*g&&wt.foundPatternCross(y)}crossCheckVertical(l,f,m,g){const y=this.image,b=y.getHeight(),S=this.getCrossCheckStateCount();let T=l;for(;T>=0&&y.get(f,T);)S[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(f,T)&&S[1]<=m;)S[1]++,T--;if(T<0||S[1]>m)return NaN;for(;T>=0&&y.get(f,T)&&S[0]<=m;)S[0]++,T--;if(S[0]>m)return NaN;for(T=l+1;T<b&&y.get(f,T);)S[2]++,T++;if(T===b)return NaN;for(;T<b&&!y.get(f,T)&&S[3]<m;)S[3]++,T++;if(T===b||S[3]>=m)return NaN;for(;T<b&&y.get(f,T)&&S[4]<m;)S[4]++,T++;if(S[4]>=m)return NaN;const D=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(D-g)>=2*g?NaN:wt.foundPatternCross(S)?wt.centerFromEnd(S,T):NaN}crossCheckHorizontal(l,f,m,g){const y=this.image,b=y.getWidth(),S=this.getCrossCheckStateCount();let T=l;for(;T>=0&&y.get(T,f);)S[2]++,T--;if(T<0)return NaN;for(;T>=0&&!y.get(T,f)&&S[1]<=m;)S[1]++,T--;if(T<0||S[1]>m)return NaN;for(;T>=0&&y.get(T,f)&&S[0]<=m;)S[0]++,T--;if(S[0]>m)return NaN;for(T=l+1;T<b&&y.get(T,f);)S[2]++,T++;if(T===b)return NaN;for(;T<b&&!y.get(T,f)&&S[3]<m;)S[3]++,T++;if(T===b||S[3]>=m)return NaN;for(;T<b&&y.get(T,f)&&S[4]<m;)S[4]++,T++;if(S[4]>=m)return NaN;const D=S[0]+S[1]+S[2]+S[3]+S[4];return 5*Math.abs(D-g)>=g?NaN:wt.foundPatternCross(S)?wt.centerFromEnd(S,T):NaN}handlePossibleCenter(l,f,m,g){const y=l[0]+l[1]+l[2]+l[3]+l[4];let b=wt.centerFromEnd(l,m),S=this.crossCheckVertical(f,Math.floor(b),l[2],y);if(!isNaN(S)&&(b=this.crossCheckHorizontal(Math.floor(b),Math.floor(S),l[2],y),!isNaN(b)&&(!g||this.crossCheckDiagonal(Math.floor(S),Math.floor(b),l[2],y)))){const T=y/7;let D=!1;const $=this.possibleCenters;for(let Y=0,ee=$.length;Y<ee;Y++){const fe=$[Y];if(fe.aboutEquals(T,S,b)){$[Y]=fe.combineEstimate(S,b,T),D=!0;break}}if(!D){const Y=new Ki(b,S,T);$.push(Y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Y)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let f=null;for(const m of this.possibleCenters)if(m.getCount()>=wt.CENTER_QUORUM)if(f==null)f=m;else return this.hasSkipped=!0,Math.floor((Math.abs(f.getX()-m.getX())-Math.abs(f.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,f=0;const m=this.possibleCenters.length;for(const b of this.possibleCenters)b.getCount()>=wt.CENTER_QUORUM&&(l++,f+=b.getEstimatedModuleSize());if(l<3)return!1;const g=f/m;let y=0;for(const b of this.possibleCenters)y+=Math.abs(b.getEstimatedModuleSize()-g);return y<=.05*f}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new H;const f=this.possibleCenters;let m;if(l>3){let g=0,y=0;for(const T of this.possibleCenters){const D=T.getEstimatedModuleSize();g+=D,y+=D*D}m=g/l;let b=Math.sqrt(y/l-m*m);f.sort((T,D)=>{const $=Math.abs(D.getEstimatedModuleSize()-m),Y=Math.abs(T.getEstimatedModuleSize()-m);return $<Y?-1:$>Y?1:0});const S=Math.max(.2*m,b);for(let T=0;T<f.length&&f.length>3;T++){const D=f[T];Math.abs(D.getEstimatedModuleSize()-m)>S&&(f.splice(T,1),T--)}}if(f.length>3){let g=0;for(const y of f)g+=y.getEstimatedModuleSize();m=g/f.length,f.sort((y,b)=>{if(b.getCount()===y.getCount()){const S=Math.abs(b.getEstimatedModuleSize()-m),T=Math.abs(y.getEstimatedModuleSize()-m);return S<T?1:S>T?-1:0}else return b.getCount()-y.getCount()}),f.splice(3)}return[f[0],f[1],f[2]]}}wt.CENTER_QUORUM=2,wt.MIN_SKIP=3,wt.MAX_MODULES=57;class Zo{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get(B.NEED_RESULT_POINT_CALLBACK);const m=new wt(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(m)}processFinderPatternInfo(l){const f=l.getTopLeft(),m=l.getTopRight(),g=l.getBottomLeft(),y=this.calculateModuleSize(f,m,g);if(y<1)throw new H("No pattern found in proccess finder.");const b=Zo.computeDimension(f,m,g,y),S=mt.getProvisionalVersionForDimension(b),T=S.getDimensionForVersion()-7;let D=null;if(S.getAlignmentPatternCenters().length>0){const fe=m.getX()-f.getX()+g.getX(),Ne=m.getY()-f.getY()+g.getY(),Ae=1-3/T,Oe=Math.floor(f.getX()+Ae*(fe-f.getX())),Fe=Math.floor(f.getY()+Ae*(Ne-f.getY()));for(let Ye=4;Ye<=16;Ye<<=1)try{D=this.findAlignmentInRegion(y,Oe,Fe,Ye);break}catch(et){if(!(et instanceof H))throw et}}const $=Zo.createTransform(f,m,g,D,b),Y=Zo.sampleGrid(this.image,$,b);let ee;return D===null?ee=[g,f,m]:ee=[g,f,m,D],new Xt(Y,ee)}static createTransform(l,f,m,g,y){const b=y-3.5;let S,T,D,$;return g!==null?(S=g.getX(),T=g.getY(),D=b-3,$=D):(S=f.getX()-l.getX()+m.getX(),T=f.getY()-l.getY()+m.getY(),D=b,$=b),Lt.quadrilateralToQuadrilateral(3.5,3.5,b,3.5,D,$,3.5,b,l.getX(),l.getY(),f.getX(),f.getY(),S,T,m.getX(),m.getY())}static sampleGrid(l,f,m){return $t.getInstance().sampleGridWithTransform(l,m,m,f)}static computeDimension(l,f,m,g){const y=Ve.round(He.distance(l,f)/g),b=Ve.round(He.distance(l,m)/g);let S=Math.floor((y+b)/2)+7;switch(S&3){case 0:S++;break;case 2:S--;break;case 3:throw new H("Dimensions could be not found.")}return S}calculateModuleSize(l,f,m){return(this.calculateModuleSizeOneWay(l,f)+this.calculateModuleSizeOneWay(l,m))/2}calculateModuleSizeOneWay(l,f){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(f.getX()),Math.floor(f.getY())),g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(f.getX()),Math.floor(f.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(m)?g/7:isNaN(g)?m/7:(m+g)/14}sizeOfBlackWhiteBlackRunBothWays(l,f,m,g){let y=this.sizeOfBlackWhiteBlackRun(l,f,m,g),b=1,S=l-(m-l);S<0?(b=l/(l-S),S=0):S>=this.image.getWidth()&&(b=(this.image.getWidth()-1-l)/(S-l),S=this.image.getWidth()-1);let T=Math.floor(f-(g-f)*b);return b=1,T<0?(b=f/(f-T),T=0):T>=this.image.getHeight()&&(b=(this.image.getHeight()-1-f)/(T-f),T=this.image.getHeight()-1),S=Math.floor(l+(S-l)*b),y+=this.sizeOfBlackWhiteBlackRun(l,f,S,T),y-1}sizeOfBlackWhiteBlackRun(l,f,m,g){const y=Math.abs(g-f)>Math.abs(m-l);if(y){let fe=l;l=f,f=fe,fe=m,m=g,g=fe}const b=Math.abs(m-l),S=Math.abs(g-f);let T=-b/2;const D=l<m?1:-1,$=f<g?1:-1;let Y=0;const ee=m+D;for(let fe=l,Ne=f;fe!==ee;fe+=D){const Ae=y?Ne:fe,Oe=y?fe:Ne;if(Y===1===this.image.get(Ae,Oe)){if(Y===2)return Ve.distance(fe,Ne,l,f);Y++}if(T+=S,T>0){if(Ne===g)break;Ne+=$,T-=b}}return Y===2?Ve.distance(m+D,g,l,f):NaN}findAlignmentInRegion(l,f,m,g){const y=Math.floor(g*l),b=Math.max(0,f-y),S=Math.min(this.image.getWidth()-1,f+y);if(S-b<l*3)throw new H("Alignment top exceeds estimated module size.");const T=Math.max(0,m-y),D=Math.min(this.image.getHeight()-1,m+y);if(D-T<l*3)throw new H("Alignment bottom exceeds estimated module size.");return new Yl(this.image,b,T,S-b,D-T,l,this.resultPointCallback).find()}}class vi{constructor(){this.decoder=new Yo}getDecoder(){return this.decoder}decode(l,f){let m,g;if(f!=null&&f.get(B.PURE_BARCODE)!==void 0){const T=vi.extractPureBits(l.getBlackMatrix());m=this.decoder.decodeBitMatrix(T,f),g=vi.NO_POINTS}else{const T=new Zo(l.getBlackMatrix()).detect(f);m=this.decoder.decodeBitMatrix(T.getBits(),f),g=T.getPoints()}m.getOther()instanceof Xl&&m.getOther().applyMirroredCorrection(g);const y=new ne(m.getText(),m.getRawBytes(),void 0,g,be.QR_CODE,void 0),b=m.getByteSegments();b!==null&&y.putMetadata(xe.BYTE_SEGMENTS,b);const S=m.getECLevel();return S!==null&&y.putMetadata(xe.ERROR_CORRECTION_LEVEL,S),m.hasStructuredAppend()&&(y.putMetadata(xe.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),y.putMetadata(xe.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),y}reset(){}static extractPureBits(l){const f=l.getTopLeftOnBit(),m=l.getBottomRightOnBit();if(f===null||m===null)throw new H;const g=this.moduleSize(f,l);let y=f[1],b=m[1],S=f[0],T=m[0];if(S>=T||y>=b)throw new H;if(b-y!==T-S&&(T=S+(b-y),T>=l.getWidth()))throw new H;const D=Math.round((T-S+1)/g),$=Math.round((b-y+1)/g);if(D<=0||$<=0)throw new H;if($!==D)throw new H;const Y=Math.floor(g/2);y+=Y,S+=Y;const ee=S+Math.floor((D-1)*g)-T;if(ee>0){if(ee>Y)throw new H;S-=ee}const fe=y+Math.floor(($-1)*g)-b;if(fe>0){if(fe>Y)throw new H;y-=fe}const Ne=new G(D,$);for(let Ae=0;Ae<$;Ae++){const Oe=y+Math.floor(Ae*g);for(let Fe=0;Fe<D;Fe++)l.get(S+Math.floor(Fe*g),Oe)&&Ne.set(Fe,Ae)}return Ne}static moduleSize(l,f){const m=f.getHeight(),g=f.getWidth();let y=l[0],b=l[1],S=!0,T=0;for(;y<g&&b<m;){if(S!==f.get(y,b)){if(++T===5)break;S=!S}y++,b++}if(y===g||b===m)throw new H;return(y-l[0])/7}}vi.NO_POINTS=new Array;class Ft{PDF417Common(){}static getBitCountSum(l){return Ve.sum(l)}static toIntArray(l){if(l==null||!l.length)return Ft.EMPTY_INT_ARRAY;const f=new Int32Array(l.length);let m=0;for(const g of l)f[m++]=g;return f}static getCodeword(l){const f=k.binarySearch(Ft.SYMBOL_TABLE,l&262143);return f<0?-1:(Ft.CODEWORD_TABLE[f]-1)%Ft.NUMBER_OF_CODEWORDS}}Ft.NUMBER_OF_CODEWORDS=929,Ft.MAX_CODEWORDS_IN_BARCODE=Ft.NUMBER_OF_CODEWORDS-1,Ft.MIN_ROWS_IN_BARCODE=3,Ft.MAX_ROWS_IN_BARCODE=90,Ft.MODULES_IN_CODEWORD=17,Ft.MODULES_IN_STOP_PATTERN=18,Ft.BARS_IN_MODULE=8,Ft.EMPTY_INT_ARRAY=new Int32Array([]),Ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Bf{constructor(l,f){this.bits=l,this.points=f}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(l,f,m){let g=l.getBlackMatrix(),y=Ht.detect(m,g);return y.length||(g=g.clone(),g.rotate180(),y=Ht.detect(m,g)),new Bf(g,y)}static detect(l,f){const m=new Array;let g=0,y=0,b=!1;for(;g<f.getHeight();){const S=Ht.findVertices(f,g,y);if(S[0]==null&&S[3]==null){if(!b)break;b=!1,y=0;for(const T of m)T[1]!=null&&(g=Math.trunc(Math.max(g,T[1].getY()))),T[3]!=null&&(g=Math.max(g,Math.trunc(T[3].getY())));g+=Ht.ROW_STEP;continue}if(b=!0,m.push(S),!l)break;S[2]!=null?(y=Math.trunc(S[2].getX()),g=Math.trunc(S[2].getY())):(y=Math.trunc(S[4].getX()),g=Math.trunc(S[4].getY()))}return m}static findVertices(l,f,m){const g=l.getHeight(),y=l.getWidth(),b=new Array(8);return Ht.copyToResult(b,Ht.findRowsWithPattern(l,g,y,f,m,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),b[4]!=null&&(m=Math.trunc(b[4].getX()),f=Math.trunc(b[4].getY())),Ht.copyToResult(b,Ht.findRowsWithPattern(l,g,y,f,m,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),b}static copyToResult(l,f,m){for(let g=0;g<m.length;g++)l[m[g]]=f[g]}static findRowsWithPattern(l,f,m,g,y,b){const S=new Array(4);let T=!1;const D=new Int32Array(b.length);for(;g<f;g+=Ht.ROW_STEP){let Y=Ht.findGuardPattern(l,y,g,m,!1,b,D);if(Y!=null){for(;g>0;){const ee=Ht.findGuardPattern(l,y,--g,m,!1,b,D);if(ee!=null)Y=ee;else{g++;break}}S[0]=new He(Y[0],g),S[1]=new He(Y[1],g),T=!0;break}}let $=g+1;if(T){let Y=0,ee=Int32Array.from([Math.trunc(S[0].getX()),Math.trunc(S[1].getX())]);for(;$<f;$++){const fe=Ht.findGuardPattern(l,ee[0],$,m,!1,b,D);if(fe!=null&&Math.abs(ee[0]-fe[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(ee[1]-fe[1])<Ht.MAX_PATTERN_DRIFT)ee=fe,Y=0;else{if(Y>Ht.SKIPPED_ROW_COUNT_MAX)break;Y++}}$-=Y+1,S[2]=new He(ee[0],$),S[3]=new He(ee[1],$)}return $-g<Ht.BARCODE_MIN_HEIGHT&&k.fill(S,null),S}static findGuardPattern(l,f,m,g,y,b,S){k.fillWithin(S,0,S.length,0);let T=f,D=0;for(;l.get(T,m)&&T>0&&D++<Ht.MAX_PIXEL_DRIFT;)T--;let $=T,Y=0,ee=b.length;for(let fe=y;$<g;$++)if(l.get($,m)!==fe)S[Y]++;else{if(Y===ee-1){if(Ht.patternMatchVariance(S,b,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([T,$]);T+=S[0]+S[1],j.arraycopy(S,2,S,0,Y-1),S[Y-1]=0,S[Y]=0,Y--}else Y++;S[Y]=1,fe=!fe}return Y===ee-1&&Ht.patternMatchVariance(S,b,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([T,$-1]):null}static patternMatchVariance(l,f,m){let g=l.length,y=0,b=0;for(let D=0;D<g;D++)y+=l[D],b+=f[D];if(y<b)return 1/0;let S=y/b;m*=S;let T=0;for(let D=0;D<g;D++){let $=l[D],Y=f[D]*S,ee=$>Y?$-Y:Y-$;if(ee>m)return 1/0;T+=ee}return T/y}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Vr{constructor(l,f){if(f.length===0)throw new p;this.field=l;let m=f.length;if(m>1&&f[0]===0){let g=1;for(;g<m&&f[g]===0;)g++;g===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-g),j.arraycopy(f,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=f}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let g=0;for(let y of this.coefficients)g=this.field.add(g,y);return g}let f=this.coefficients[0],m=this.coefficients.length;for(let g=1;g<m;g++)f=this.field.add(this.field.multiply(l,f),this.coefficients[g]);return f}add(l){if(!this.field.equals(l.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let f=this.coefficients,m=l.coefficients;if(f.length>m.length){let b=f;f=m,m=b}let g=new Int32Array(m.length),y=m.length-f.length;j.arraycopy(m,0,g,0,y);for(let b=y;b<m.length;b++)g[b]=this.field.add(f[b-y],m[b]);return new Vr(this.field,g)}subtract(l){if(!this.field.equals(l.field))throw new p("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof Vr?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new Vr(this.field,new Int32Array([0]));let f=this.coefficients,m=f.length,g=l.coefficients,y=g.length,b=new Int32Array(m+y-1);for(let S=0;S<m;S++){let T=f[S];for(let D=0;D<y;D++)b[S+D]=this.field.add(b[S+D],this.field.multiply(T,g[D]))}return new Vr(this.field,b)}negative(){let l=this.coefficients.length,f=new Int32Array(l);for(let m=0;m<l;m++)f[m]=this.field.subtract(0,this.coefficients[m]);return new Vr(this.field,f)}multiplyScalar(l){if(l===0)return new Vr(this.field,new Int32Array([0]));if(l===1)return this;let f=this.coefficients.length,m=new Int32Array(f);for(let g=0;g<f;g++)m[g]=this.field.multiply(this.coefficients[g],l);return new Vr(this.field,m)}multiplyByMonomial(l,f){if(l<0)throw new p;if(f===0)return new Vr(this.field,new Int32Array([0]));let m=this.coefficients.length,g=new Int32Array(m+l);for(let y=0;y<m;y++)g[y]=this.field.multiply(this.coefficients[y],f);return new Vr(this.field,g)}toString(){let l=new Q;for(let f=this.getDegree();f>=0;f--){let m=this.getCoefficient(f);m!==0&&(m<0?(l.append(" - "),m=-m):l.length()>0&&l.append(" + "),(f===0||m!==1)&&l.append(m),f!==0&&(f===1?l.append("x"):(l.append("x^"),l.append(f))))}return l.toString()}}class Ff{add(l,f){return(l+f)%this.modulus}subtract(l,f){return(this.modulus+l-f)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new p;return this.logTable[l]}inverse(l){if(l===0)throw new Ie;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,f){return l===0||f===0?0:this.expTable[(this.logTable[l]+this.logTable[f])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class Yc extends Ff{constructor(l,f){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let m=1;for(let g=0;g<l;g++)this.expTable[g]=m,m=m*f%l;for(let g=0;g<l-1;g++)this.logTable[this.expTable[g]]=g;this.zero=new Vr(this,new Int32Array([0])),this.one=new Vr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,f){if(l<0)throw new p;if(f===0)return this.zero;let m=new Int32Array(l+1);return m[0]=f,new Vr(this,m)}}Yc.PDF417_GF=new Yc(Ft.NUMBER_OF_CODEWORDS,3);class Jo{constructor(){this.field=Yc.PDF417_GF}decode(l,f,m){let g=new Vr(this.field,l),y=new Int32Array(f),b=!1;for(let Ne=f;Ne>0;Ne--){let Ae=g.evaluateAt(this.field.exp(Ne));y[f-Ne]=Ae,Ae!==0&&(b=!0)}if(!b)return 0;let S=this.field.getOne();if(m!=null)for(const Ne of m){let Ae=this.field.exp(l.length-1-Ne),Oe=new Vr(this.field,new Int32Array([this.field.subtract(0,Ae),1]));S=S.multiply(Oe)}let T=new Vr(this.field,y),D=this.runEuclideanAlgorithm(this.field.buildMonomial(f,1),T,f),$=D[0],Y=D[1],ee=this.findErrorLocations($),fe=this.findErrorMagnitudes(Y,$,ee);for(let Ne=0;Ne<ee.length;Ne++){let Ae=l.length-1-this.field.log(ee[Ne]);if(Ae<0)throw x.getChecksumInstance();l[Ae]=this.field.subtract(l[Ae],fe[Ne])}return ee.length}runEuclideanAlgorithm(l,f,m){if(l.getDegree()<f.getDegree()){let ee=l;l=f,f=ee}let g=l,y=f,b=this.field.getZero(),S=this.field.getOne();for(;y.getDegree()>=Math.round(m/2);){let ee=g,fe=b;if(g=y,b=S,g.isZero())throw x.getChecksumInstance();y=ee;let Ne=this.field.getZero(),Ae=g.getCoefficient(g.getDegree()),Oe=this.field.inverse(Ae);for(;y.getDegree()>=g.getDegree()&&!y.isZero();){let Fe=y.getDegree()-g.getDegree(),Ye=this.field.multiply(y.getCoefficient(y.getDegree()),Oe);Ne=Ne.add(this.field.buildMonomial(Fe,Ye)),y=y.subtract(g.multiplyByMonomial(Fe,Ye))}S=Ne.multiply(b).subtract(fe).negative()}let T=S.getCoefficient(0);if(T===0)throw x.getChecksumInstance();let D=this.field.inverse(T),$=S.multiply(D),Y=y.multiply(D);return[$,Y]}findErrorLocations(l){let f=l.getDegree(),m=new Int32Array(f),g=0;for(let y=1;y<this.field.getSize()&&g<f;y++)l.evaluateAt(y)===0&&(m[g]=this.field.inverse(y),g++);if(g!==f)throw x.getChecksumInstance();return m}findErrorMagnitudes(l,f,m){let g=f.getDegree(),y=new Int32Array(g);for(let D=1;D<=g;D++)y[g-D]=this.field.multiply(D,f.getCoefficient(D));let b=new Vr(this.field,y),S=m.length,T=new Int32Array(S);for(let D=0;D<S;D++){let $=this.field.inverse(m[D]),Y=this.field.subtract(0,l.evaluateAt($)),ee=this.field.inverse(b.evaluateAt($));T[D]=this.field.multiply(Y,ee)}return T}}class $s{constructor(l,f,m,g,y){l instanceof $s?this.constructor_2(l):this.constructor_1(l,f,m,g,y)}constructor_1(l,f,m,g,y){const b=f==null||m==null,S=g==null||y==null;if(b&&S)throw new H;b?(f=new He(0,g.getY()),m=new He(0,y.getY())):S&&(g=new He(l.getWidth()-1,f.getY()),y=new He(l.getWidth()-1,m.getY())),this.image=l,this.topLeft=f,this.bottomLeft=m,this.topRight=g,this.bottomRight=y,this.minX=Math.trunc(Math.min(f.getX(),m.getX())),this.maxX=Math.trunc(Math.max(g.getX(),y.getX())),this.minY=Math.trunc(Math.min(f.getY(),g.getY())),this.maxY=Math.trunc(Math.max(m.getY(),y.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,f){return l==null?f:f==null?l:new $s(l.image,l.topLeft,l.bottomLeft,f.topRight,f.bottomRight)}addMissingRows(l,f,m){let g=this.topLeft,y=this.bottomLeft,b=this.topRight,S=this.bottomRight;if(l>0){let T=m?this.topLeft:this.topRight,D=Math.trunc(T.getY()-l);D<0&&(D=0);let $=new He(T.getX(),D);m?g=$:b=$}if(f>0){let T=m?this.bottomLeft:this.bottomRight,D=Math.trunc(T.getY()+f);D>=this.image.getHeight()&&(D=this.image.getHeight()-1);let $=new He(T.getX(),D);m?y=$:S=$}return new $s(this.image,g,y,b,S)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Qo{constructor(l,f,m,g){this.columnCount=l,this.errorCorrectionLevel=g,this.rowCountUpperPart=f,this.rowCountLowerPart=m,this.rowCount=f+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class bi{constructor(){this.buffer=""}static form(l,f){let m=-1;function g(b,S,T,D,$,Y){if(b==="%%")return"%";if(f[++m]===void 0)return;b=D?parseInt(D.substr(1)):void 0;let ee=$?parseInt($.substr(1)):void 0,fe;switch(Y){case"s":fe=f[m];break;case"c":fe=f[m][0];break;case"f":fe=parseFloat(f[m]).toFixed(b);break;case"p":fe=parseFloat(f[m]).toPrecision(b);break;case"e":fe=parseFloat(f[m]).toExponential(b);break;case"x":fe=parseInt(f[m]).toString(ee||16);break;case"d":fe=parseFloat(parseInt(f[m],ee||10).toPrecision(b)).toFixed(0);break}fe=typeof fe=="object"?JSON.stringify(fe):(+fe).toString(ee);let Ne=parseInt(T),Ae=T&&T[0]+""=="0"?"0":" ";for(;fe.length<Ne;)fe=S!==void 0?fe+Ae:Ae+fe;return fe}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(y,g)}format(l,...f){this.buffer+=bi.form(l,f)}toString(){return this.buffer}}class wi{constructor(l){this.boundingBox=new $s(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let f=this.getCodeword(l);if(f!=null)return f;for(let m=1;m<wi.MAX_NEARBY_DISTANCE;m++){let g=this.imageRowToCodewordIndex(l)-m;if(g>=0&&(f=this.codewords[g],f!=null)||(g=this.imageRowToCodewordIndex(l)+m,g<this.codewords.length&&(f=this.codewords[g],f!=null)))return f}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,f){this.codewords[this.imageRowToCodewordIndex(l)]=f}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new bi;let f=0;for(const m of this.codewords){if(m==null){l.format("%3d:    |   %n",f++);continue}l.format("%3d: %3d|%3d%n",f++,m.getRowNumber(),m.getValue())}return l.toString()}}wi.MAX_NEARBY_DISTANCE=5;class el{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let f=this.values.get(l);f==null&&(f=0),f++,this.values.set(l,f)}getValue(){let l=-1,f=new Array;for(const[m,g]of this.values.entries()){const y={getKey:()=>m,getValue:()=>g};y.getValue()>l?(l=y.getValue(),f=[],f.push(y.getKey())):y.getValue()===l&&f.push(y.getKey())}return Ft.toIntArray(f)}getConfidence(l){return this.values.get(l)}}class Zl extends wi{constructor(l,f){super(l),this._isLeft=f}setRowNumbers(){for(let l of this.getCodewords())l!=null&&l.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let f=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(f,l);let m=this.getBoundingBox(),g=this._isLeft?m.getTopLeft():m.getTopRight(),y=this._isLeft?m.getBottomLeft():m.getBottomRight(),b=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=this.imageRowToCodewordIndex(Math.trunc(y.getY())),T=-1,D=1,$=0;for(let Y=b;Y<S;Y++){if(f[Y]==null)continue;let ee=f[Y],fe=ee.getRowNumber()-T;if(fe===0)$++;else if(fe===1)D=Math.max(D,$),$=1,T=ee.getRowNumber();else if(fe<0||ee.getRowNumber()>=l.getRowCount()||fe>Y)f[Y]=null;else{let Ne;D>2?Ne=(D-2)*fe:Ne=fe;let Ae=Ne>=Y;for(let Oe=1;Oe<=Ne&&!Ae;Oe++)Ae=f[Y-Oe]!=null;Ae?f[Y]=null:(T=ee.getRowNumber(),$=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let f=new Int32Array(l.getRowCount());for(let m of this.getCodewords())if(m!=null){let g=m.getRowNumber();if(g>=f.length)continue;f[g]++}return f}adjustIncompleteIndicatorColumnRowNumbers(l){let f=this.getBoundingBox(),m=this._isLeft?f.getTopLeft():f.getTopRight(),g=this._isLeft?f.getBottomLeft():f.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(m.getY())),b=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=this.getCodewords(),T=-1;for(let D=y;D<b;D++){if(S[D]==null)continue;let $=S[D];$.setRowNumberAsRowIndicatorColumn();let Y=$.getRowNumber()-T;Y===0||(Y===1?T=$.getRowNumber():$.getRowNumber()>=l.getRowCount()?S[D]=null:T=$.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),f=new el,m=new el,g=new el,y=new el;for(let S of l){if(S==null)continue;S.setRowNumberAsRowIndicatorColumn();let T=S.getValue()%30,D=S.getRowNumber();switch(this._isLeft||(D+=2),D%3){case 0:m.setValue(T*3+1);break;case 1:y.setValue(T/3),g.setValue(T%3);break;case 2:f.setValue(T+1);break}}if(f.getValue().length===0||m.getValue().length===0||g.getValue().length===0||y.getValue().length===0||f.getValue()[0]<1||m.getValue()[0]+g.getValue()[0]<Ft.MIN_ROWS_IN_BARCODE||m.getValue()[0]+g.getValue()[0]>Ft.MAX_ROWS_IN_BARCODE)return null;let b=new Qo(f.getValue()[0],m.getValue()[0],g.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(l,b),b}removeIncorrectCodewords(l,f){for(let m=0;m<l.length;m++){let g=l[m];if(l[m]==null)continue;let y=g.getValue()%30,b=g.getRowNumber();if(b>f.getRowCount()){l[m]=null;continue}switch(this._isLeft||(b+=2),b%3){case 0:y*3+1!==f.getRowCountUpperPart()&&(l[m]=null);break;case 1:(Math.trunc(y/3)!==f.getErrorCorrectionLevel()||y%3!==f.getRowCountLowerPart())&&(l[m]=null);break;case 2:y+1!==f.getColumnCount()&&(l[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Xi{constructor(l,f){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=f,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=Ft.MAX_CODEWORDS_IN_BARCODE,f;do f=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<f);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l!=null&&l.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let f=1;f<this.barcodeColumnCount+1;f++){let m=this.detectionResultColumns[f].getCodewords();for(let g=0;g<m.length;g++)m[g]!=null&&(m[g].hasValidRowNumber()||this.adjustRowNumbers(f,g,m))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),f=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<l.length;m++)if(l[m]!=null&&f[m]!=null&&l[m].getRowNumber()===f[m].getRowNumber())for(let g=1;g<=this.barcodeColumnCount;g++){let y=this.detectionResultColumns[g].getCodewords()[m];y!=null&&(y.setRowNumber(l[m].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[g].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,f=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<f.length;m++){if(f[m]==null)continue;let g=f[m].getRowNumber(),y=0;for(let b=this.barcodeColumnCount+1;b>0&&y<this.ADJUST_ROW_NUMBER_SKIP;b--){let S=this.detectionResultColumns[b].getCodewords()[m];S!=null&&(y=Xi.adjustRowNumberIfValid(g,y,S),S.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,f=this.detectionResultColumns[0].getCodewords();for(let m=0;m<f.length;m++){if(f[m]==null)continue;let g=f[m].getRowNumber(),y=0;for(let b=1;b<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;b++){let S=this.detectionResultColumns[b].getCodewords()[m];S!=null&&(y=Xi.adjustRowNumberIfValid(g,y,S),S.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,f,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(l)?(m.setRowNumber(l),f=0):++f),f}adjustRowNumbers(l,f,m){if(!this.detectionResultColumns[l-1])return;let g=m[f],y=this.detectionResultColumns[l-1].getCodewords(),b=y;this.detectionResultColumns[l+1]!=null&&(b=this.detectionResultColumns[l+1].getCodewords());let S=new Array(14);S[2]=y[f],S[3]=b[f],f>0&&(S[0]=m[f-1],S[4]=y[f-1],S[5]=b[f-1]),f>1&&(S[8]=m[f-2],S[10]=y[f-2],S[11]=b[f-2]),f<m.length-1&&(S[1]=m[f+1],S[6]=y[f+1],S[7]=b[f+1]),f<m.length-2&&(S[9]=m[f+2],S[12]=y[f+2],S[13]=b[f+2]);for(let T of S)if(Xi.adjustRowNumber(g,T))return}static adjustRowNumber(l,f){return f==null?!1:f.hasValidRowNumber()&&f.getBucket()===l.getBucket()?(l.setRowNumber(f.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,f){this.detectionResultColumns[l]=f}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let f=new bi;for(let m=0;m<l.getCodewords().length;m++){f.format("CW %3d:",m);for(let g=0;g<this.barcodeColumnCount+2;g++){if(this.detectionResultColumns[g]==null){f.format("    |   ");continue}let y=this.detectionResultColumns[g].getCodewords()[m];if(y==null){f.format("    |   ");continue}f.format(" %3d|%3d",y.getRowNumber(),y.getValue())}f.format("%n")}return f.toString()}}class Ws{constructor(l,f,m,g){this.rowNumber=Ws.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(f),this.bucket=Math.trunc(m),this.value=Math.trunc(g)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==Ws.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}Ws.BARCODE_ROW_UNKNOWN=-1;class Pn{static initialize(){for(let l=0;l<Ft.SYMBOL_TABLE.length;l++){let f=Ft.SYMBOL_TABLE[l],m=f&1;for(let g=0;g<Ft.BARS_IN_MODULE;g++){let y=0;for(;(f&1)===m;)y+=1,f>>=1;m=f&1,Pn.RATIOS_TABLE[l]||(Pn.RATIOS_TABLE[l]=new Array(Ft.BARS_IN_MODULE)),Pn.RATIOS_TABLE[l][Ft.BARS_IN_MODULE-g-1]=Math.fround(y/Ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let f=Pn.getDecodedCodewordValue(Pn.sampleBitCounts(l));return f!==-1?f:Pn.getClosestDecodedValue(l)}static sampleBitCounts(l){let f=Ve.sum(l),m=new Int32Array(Ft.BARS_IN_MODULE),g=0,y=0;for(let b=0;b<Ft.MODULES_IN_CODEWORD;b++){let S=f/(2*Ft.MODULES_IN_CODEWORD)+b*f/Ft.MODULES_IN_CODEWORD;y+l[g]<=S&&(y+=l[g],g++),m[g]++}return m}static getDecodedCodewordValue(l){let f=Pn.getBitValue(l);return Ft.getCodeword(f)===-1?-1:f}static getBitValue(l){let f=0;for(let m=0;m<l.length;m++)for(let g=0;g<l[m];g++)f=f<<1|(m%2===0?1:0);return Math.trunc(f)}static getClosestDecodedValue(l){let f=Ve.sum(l),m=new Array(Ft.BARS_IN_MODULE);if(f>1)for(let b=0;b<m.length;b++)m[b]=Math.fround(l[b]/f);let g=At.MAX_VALUE,y=-1;this.bSymbolTableReady||Pn.initialize();for(let b=0;b<Pn.RATIOS_TABLE.length;b++){let S=0,T=Pn.RATIOS_TABLE[b];for(let D=0;D<Ft.BARS_IN_MODULE;D++){let $=Math.fround(T[D]-m[D]);if(S+=Math.fround($*$),S>=g)break}S<g&&(g=S,y=Ft.SYMBOL_TABLE[b])}return y}}Pn.bSymbolTableReady=!1,Pn.RATIOS_TABLE=new Array(Ft.SYMBOL_TABLE.length).map(X=>new Array(Ft.BARS_IN_MODULE));class Jl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class tl{static parseLong(l,f=void 0){return parseInt(l,f)}}class Ql extends d{}Ql.kind="NullPointerException";class rl{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,f,m){if(l==null)throw new Ql;if(f<0||f>l.length||m<0||f+m>l.length||f+m<0)throw new N;if(m===0)return;for(let g=0;g<m;g++)this.write(l[f+g])}flush(){}close(){}}class nd extends d{}class ad extends rl{constructor(l=32){if(super(),this.count=0,l<0)throw new p("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let m=this.buf.length<<1;if(m-l<0&&(m=l),m<0){if(l<0)throw new nd;m=E.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,m)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,f,m){if(f<0||f>l.length||m<0||f+m-l.length>0)throw new N;this.ensureCapacity(this.count+m),j.arraycopy(l,f,this.buf,this.count,m),this.count+=m}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var cr;(function(X){X[X.ALPHA=0]="ALPHA",X[X.LOWER=1]="LOWER",X[X.MIXED=2]="MIXED",X[X.PUNCT=3]="PUNCT",X[X.ALPHA_SHIFT=4]="ALPHA_SHIFT",X[X.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(cr||(cr={}));function Ni(){if(typeof window<"u")return window.BigInt||null;if(typeof Hf<"u")return Hf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let nl;function qs(X){if(typeof nl>"u"&&(nl=Ni()),nl===null)throw new Error("BigInt is not supported!");return nl(X)}function al(){let X=[];X[0]=qs(1);let l=qs(900);X[1]=l;for(let f=2;f<16;f++)X[f]=X[f-1]*l;return X}class ze{static decode(l,f){let m=new Q(""),g=L.ISO8859_1;m.enableDecoding(g);let y=1,b=l[y++],S=new Jl;for(;y<l[0];){switch(b){case ze.TEXT_COMPACTION_MODE_LATCH:y=ze.textCompaction(l,y,m);break;case ze.BYTE_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:y=ze.byteCompaction(b,l,g,y,m);break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(l[y++]);break;case ze.NUMERIC_COMPACTION_MODE_LATCH:y=ze.numericCompaction(l,y,m);break;case ze.ECI_CHARSET:L.getCharacterSetECIByValue(l[y++]);break;case ze.ECI_GENERAL_PURPOSE:y+=2;break;case ze.ECI_USER_DEFINED:y++;break;case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=ze.decodeMacroBlock(l,y,S);break;case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:throw new F;default:y--,y=ze.textCompaction(l,y,m);break}if(y<l.length)b=l[y++];else throw F.getFormatInstance()}if(m.length()===0)throw F.getFormatInstance();let T=new le(null,m.toString(),null,f);return T.setOther(S),T}static decodeMacroBlock(l,f,m){if(f+ze.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw F.getFormatInstance();let g=new Int32Array(ze.NUMBER_OF_SEQUENCE_CODEWORDS);for(let S=0;S<ze.NUMBER_OF_SEQUENCE_CODEWORDS;S++,f++)g[S]=l[f];m.setSegmentIndex(E.parseInt(ze.decodeBase900toBase10(g,ze.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new Q;f=ze.textCompaction(l,f,y),m.setFileId(y.toString());let b=-1;for(l[f]===ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(b=f+1);f<l[0];)switch(l[f]){case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(f++,l[f]){case ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let S=new Q;f=ze.textCompaction(l,f+1,S),m.setFileName(S.toString());break;case ze.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new Q;f=ze.textCompaction(l,f+1,T),m.setSender(T.toString());break;case ze.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let D=new Q;f=ze.textCompaction(l,f+1,D),m.setAddressee(D.toString());break;case ze.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let $=new Q;f=ze.numericCompaction(l,f+1,$),m.setSegmentCount(E.parseInt($.toString()));break;case ze.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Y=new Q;f=ze.numericCompaction(l,f+1,Y),m.setTimestamp(tl.parseLong(Y.toString()));break;case ze.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ee=new Q;f=ze.numericCompaction(l,f+1,ee),m.setChecksum(E.parseInt(ee.toString()));break;case ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let fe=new Q;f=ze.numericCompaction(l,f+1,fe),m.setFileSize(tl.parseLong(fe.toString()));break;default:throw F.getFormatInstance()}break;case ze.MACRO_PDF417_TERMINATOR:f++,m.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(b!==-1){let S=f-b;m.isLastSegment()&&S--,m.setOptionalData(k.copyOfRange(l,b,b+S))}return f}static textCompaction(l,f,m){let g=new Int32Array((l[0]-f)*2),y=new Int32Array((l[0]-f)*2),b=0,S=!1;for(;f<l[0]&&!S;){let T=l[f++];if(T<ze.TEXT_COMPACTION_MODE_LATCH)g[b]=T/30,g[b+1]=T%30,b+=2;else switch(T){case ze.TEXT_COMPACTION_MODE_LATCH:g[b++]=ze.TEXT_COMPACTION_MODE_LATCH;break;case ze.BYTE_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.NUMERIC_COMPACTION_MODE_LATCH:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:f--,S=!0;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g[b]=ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=l[f++],y[b]=T,b++;break}}return ze.decodeTextCompaction(g,y,b,m),f}static decodeTextCompaction(l,f,m,g){let y=cr.ALPHA,b=cr.ALPHA,S=0;for(;S<m;){let T=l[S],D="";switch(y){case cr.ALPHA:if(T<26)D=String.fromCharCode(65+T);else switch(T){case 26:D=" ";break;case ze.LL:y=cr.LOWER;break;case ze.ML:y=cr.MIXED;break;case ze.PS:b=y,y=cr.PUNCT_SHIFT;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(f[S]);break;case ze.TEXT_COMPACTION_MODE_LATCH:y=cr.ALPHA;break}break;case cr.LOWER:if(T<26)D=String.fromCharCode(97+T);else switch(T){case 26:D=" ";break;case ze.AS:b=y,y=cr.ALPHA_SHIFT;break;case ze.ML:y=cr.MIXED;break;case ze.PS:b=y,y=cr.PUNCT_SHIFT;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(f[S]);break;case ze.TEXT_COMPACTION_MODE_LATCH:y=cr.ALPHA;break}break;case cr.MIXED:if(T<ze.PL)D=ze.MIXED_CHARS[T];else switch(T){case ze.PL:y=cr.PUNCT;break;case 26:D=" ";break;case ze.LL:y=cr.LOWER;break;case ze.AL:y=cr.ALPHA;break;case ze.PS:b=y,y=cr.PUNCT_SHIFT;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(f[S]);break;case ze.TEXT_COMPACTION_MODE_LATCH:y=cr.ALPHA;break}break;case cr.PUNCT:if(T<ze.PAL)D=ze.PUNCT_CHARS[T];else switch(T){case ze.PAL:y=cr.ALPHA;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(f[S]);break;case ze.TEXT_COMPACTION_MODE_LATCH:y=cr.ALPHA;break}break;case cr.ALPHA_SHIFT:if(y=b,T<26)D=String.fromCharCode(65+T);else switch(T){case 26:D=" ";break;case ze.TEXT_COMPACTION_MODE_LATCH:y=cr.ALPHA;break}break;case cr.PUNCT_SHIFT:if(y=b,T<ze.PAL)D=ze.PUNCT_CHARS[T];else switch(T){case ze.PAL:y=cr.ALPHA;break;case ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(f[S]);break;case ze.TEXT_COMPACTION_MODE_LATCH:y=cr.ALPHA;break}break}D!==""&&g.append(D),S++}}static byteCompaction(l,f,m,g,y){let b=new ad,S=0,T=0,D=!1;switch(l){case ze.BYTE_COMPACTION_MODE_LATCH:let $=new Int32Array(6),Y=f[g++];for(;g<f[0]&&!D;)switch($[S++]=Y,T=900*T+Y,Y=f[g++],Y){case ze.TEXT_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH:case ze.NUMERIC_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:g--,D=!0;break;default:if(S%5===0&&S>0){for(let ee=0;ee<6;++ee)b.write(Number(qs(T)>>qs(8*(5-ee))));T=0,S=0}break}g===f[0]&&Y<ze.TEXT_COMPACTION_MODE_LATCH&&($[S++]=Y);for(let ee=0;ee<S;ee++)b.write($[ee]);break;case ze.BYTE_COMPACTION_MODE_LATCH_6:for(;g<f[0]&&!D;){let ee=f[g++];if(ee<ze.TEXT_COMPACTION_MODE_LATCH)S++,T=900*T+ee;else switch(ee){case ze.TEXT_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH:case ze.NUMERIC_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:g--,D=!0;break}if(S%5===0&&S>0){for(let fe=0;fe<6;++fe)b.write(Number(qs(T)>>qs(8*(5-fe))));T=0,S=0}}break}return y.append(z.decode(b.toByteArray(),m)),g}static numericCompaction(l,f,m){let g=0,y=!1,b=new Int32Array(ze.MAX_NUMERIC_CODEWORDS);for(;f<l[0]&&!y;){let S=l[f++];if(f===l[0]&&(y=!0),S<ze.TEXT_COMPACTION_MODE_LATCH)b[g]=S,g++;else switch(S){case ze.TEXT_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH:case ze.BYTE_COMPACTION_MODE_LATCH_6:case ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ze.MACRO_PDF417_TERMINATOR:f--,y=!0;break}(g%ze.MAX_NUMERIC_CODEWORDS===0||S===ze.NUMERIC_COMPACTION_MODE_LATCH||y)&&g>0&&(m.append(ze.decodeBase900toBase10(b,g)),g=0)}return f}static decodeBase900toBase10(l,f){let m=qs(0);for(let y=0;y<f;y++)m+=ze.EXP900[f-y-1]*qs(l[y]);let g=m.toString();if(g.charAt(0)!=="1")throw new F;return g.substring(1)}}ze.TEXT_COMPACTION_MODE_LATCH=900,ze.BYTE_COMPACTION_MODE_LATCH=901,ze.NUMERIC_COMPACTION_MODE_LATCH=902,ze.BYTE_COMPACTION_MODE_LATCH_6=924,ze.ECI_USER_DEFINED=925,ze.ECI_GENERAL_PURPOSE=926,ze.ECI_CHARSET=927,ze.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ze.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ze.MACRO_PDF417_TERMINATOR=922,ze.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ze.MAX_NUMERIC_CODEWORDS=15,ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ze.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ze.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ze.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ze.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ze.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ze.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ze.PL=25,ze.LL=27,ze.AS=27,ze.ML=28,ze.AL=28,ze.PS=29,ze.PAL=29,ze.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ze.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ze.EXP900=Ni()?al():[],ze.NUMBER_OF_SEQUENCE_CODEWORDS=2;class R{constructor(){}static decode(l,f,m,g,y,b,S){let T=new $s(l,f,m,g,y),D=null,$=null,Y;for(let Ne=!0;;Ne=!1){if(f!=null&&(D=R.getRowIndicatorColumn(l,T,f,!0,b,S)),g!=null&&($=R.getRowIndicatorColumn(l,T,g,!1,b,S)),Y=R.merge(D,$),Y==null)throw H.getNotFoundInstance();let Ae=Y.getBoundingBox();if(Ne&&Ae!=null&&(Ae.getMinY()<T.getMinY()||Ae.getMaxY()>T.getMaxY()))T=Ae;else break}Y.setBoundingBox(T);let ee=Y.getBarcodeColumnCount()+1;Y.setDetectionResultColumn(0,D),Y.setDetectionResultColumn(ee,$);let fe=D!=null;for(let Ne=1;Ne<=ee;Ne++){let Ae=fe?Ne:ee-Ne;if(Y.getDetectionResultColumn(Ae)!==void 0)continue;let Oe;Ae===0||Ae===ee?Oe=new Zl(T,Ae===0):Oe=new wi(T),Y.setDetectionResultColumn(Ae,Oe);let Fe=-1,Ye=Fe;for(let et=T.getMinY();et<=T.getMaxY();et++){if(Fe=R.getStartColumn(Y,Ae,et,fe),Fe<0||Fe>T.getMaxX()){if(Ye===-1)continue;Fe=Ye}let Je=R.detectCodeword(l,T.getMinX(),T.getMaxX(),fe,Fe,et,b,S);Je!=null&&(Oe.setCodeword(et,Je),Ye=Fe,b=Math.min(b,Je.getWidth()),S=Math.max(S,Je.getWidth()))}}return R.createDecoderResult(Y)}static merge(l,f){if(l==null&&f==null)return null;let m=R.getBarcodeMetadata(l,f);if(m==null)return null;let g=$s.merge(R.adjustBoundingBox(l),R.adjustBoundingBox(f));return new Xi(m,g)}static adjustBoundingBox(l){if(l==null)return null;let f=l.getRowHeights();if(f==null)return null;let m=R.getMax(f),g=0;for(let S of f)if(g+=m-S,S>0)break;let y=l.getCodewords();for(let S=0;g>0&&y[S]==null;S++)g--;let b=0;for(let S=f.length-1;S>=0&&(b+=m-f[S],!(f[S]>0));S--);for(let S=y.length-1;b>0&&y[S]==null;S--)b--;return l.getBoundingBox().addMissingRows(g,b,l.isLeft())}static getMax(l){let f=-1;for(let m of l)f=Math.max(f,m);return f}static getBarcodeMetadata(l,f){let m;if(l==null||(m=l.getBarcodeMetadata())==null)return f==null?null:f.getBarcodeMetadata();let g;return f==null||(g=f.getBarcodeMetadata())==null?m:m.getColumnCount()!==g.getColumnCount()&&m.getErrorCorrectionLevel()!==g.getErrorCorrectionLevel()&&m.getRowCount()!==g.getRowCount()?null:m}static getRowIndicatorColumn(l,f,m,g,y,b){let S=new Zl(f,g);for(let T=0;T<2;T++){let D=T===0?1:-1,$=Math.trunc(Math.trunc(m.getX()));for(let Y=Math.trunc(Math.trunc(m.getY()));Y<=f.getMaxY()&&Y>=f.getMinY();Y+=D){let ee=R.detectCodeword(l,0,l.getWidth(),g,$,Y,y,b);ee!=null&&(S.setCodeword(Y,ee),g?$=ee.getStartX():$=ee.getEndX())}}return S}static adjustCodewordCount(l,f){let m=f[0][1],g=m.getValue(),y=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-R.getNumberOfECCodeWords(l.getBarcodeECLevel());if(g.length===0){if(y<1||y>Ft.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();m.setValue(y)}else g[0]!==y&&m.setValue(y)}static createDecoderResult(l){let f=R.createBarcodeMatrix(l);R.adjustCodewordCount(l,f);let m=new Array,g=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),y=[],b=new Array;for(let T=0;T<l.getBarcodeRowCount();T++)for(let D=0;D<l.getBarcodeColumnCount();D++){let $=f[T][D+1].getValue(),Y=T*l.getBarcodeColumnCount()+D;$.length===0?m.push(Y):$.length===1?g[Y]=$[0]:(b.push(Y),y.push($))}let S=new Array(y.length);for(let T=0;T<S.length;T++)S[T]=y[T];return R.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),g,Ft.toIntArray(m),Ft.toIntArray(b),S)}static createDecoderResultFromAmbiguousValues(l,f,m,g,y){let b=new Int32Array(g.length),S=100;for(;S-- >0;){for(let T=0;T<b.length;T++)f[g[T]]=y[T][b[T]];try{return R.decodeCodewords(f,l,m)}catch(T){if(!(T instanceof x))throw T}if(b.length===0)throw x.getChecksumInstance();for(let T=0;T<b.length;T++)if(b[T]<y[T].length-1){b[T]++;break}else if(b[T]=0,T===b.length-1)throw x.getChecksumInstance()}throw x.getChecksumInstance()}static createBarcodeMatrix(l){let f=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let g=0;g<f.length;g++)for(let y=0;y<f[g].length;y++)f[g][y]=new el;let m=0;for(let g of l.getDetectionResultColumns()){if(g!=null){for(let y of g.getCodewords())if(y!=null){let b=y.getRowNumber();if(b>=0){if(b>=f.length)continue;f[b][m].setValue(y.getValue())}}}m++}return f}static isValidBarcodeColumn(l,f){return f>=0&&f<=l.getBarcodeColumnCount()+1}static getStartColumn(l,f,m,g){let y=g?1:-1,b=null;if(R.isValidBarcodeColumn(l,f-y)&&(b=l.getDetectionResultColumn(f-y).getCodeword(m)),b!=null)return g?b.getEndX():b.getStartX();if(b=l.getDetectionResultColumn(f).getCodewordNearby(m),b!=null)return g?b.getStartX():b.getEndX();if(R.isValidBarcodeColumn(l,f-y)&&(b=l.getDetectionResultColumn(f-y).getCodewordNearby(m)),b!=null)return g?b.getEndX():b.getStartX();let S=0;for(;R.isValidBarcodeColumn(l,f-y);){f-=y;for(let T of l.getDetectionResultColumn(f).getCodewords())if(T!=null)return(g?T.getEndX():T.getStartX())+y*S*(T.getEndX()-T.getStartX());S++}return g?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,f,m,g,y,b,S,T){y=R.adjustCodewordStartColumn(l,f,m,g,y,b);let D=R.getModuleBitCount(l,f,m,g,y,b);if(D==null)return null;let $,Y=Ve.sum(D);if(g)$=y+Y;else{for(let Ne=0;Ne<D.length/2;Ne++){let Ae=D[Ne];D[Ne]=D[D.length-1-Ne],D[D.length-1-Ne]=Ae}$=y,y=$-Y}if(!R.checkCodewordSkew(Y,S,T))return null;let ee=Pn.getDecodedValue(D),fe=Ft.getCodeword(ee);return fe===-1?null:new Ws(y,$,R.getCodewordBucketNumber(ee),fe)}static getModuleBitCount(l,f,m,g,y,b){let S=y,T=new Int32Array(8),D=0,$=g?1:-1,Y=g;for(;(g?S<m:S>=f)&&D<T.length;)l.get(S,b)===Y?(T[D]++,S+=$):(D++,Y=!Y);return D===T.length||S===(g?m:f)&&D===T.length-1?T:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,f,m,g,y,b){let S=y,T=g?-1:1;for(let D=0;D<2;D++){for(;(g?S>=f:S<m)&&g===l.get(S,b);){if(Math.abs(y-S)>R.CODEWORD_SKEW_SIZE)return y;S+=T}T=-T,g=!g}return S}static checkCodewordSkew(l,f,m){return f-R.CODEWORD_SKEW_SIZE<=l&&l<=m+R.CODEWORD_SKEW_SIZE}static decodeCodewords(l,f,m){if(l.length===0)throw F.getFormatInstance();let g=1<<f+1,y=R.correctErrors(l,m,g);R.verifyCodewordCount(l,g);let b=ze.decode(l,""+f);return b.setErrorsCorrected(y),b.setErasures(m.length),b}static correctErrors(l,f,m){if(f!=null&&f.length>m/2+R.MAX_ERRORS||m<0||m>R.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return R.errorCorrection.decode(l,m,f)}static verifyCodewordCount(l,f){if(l.length<4)throw F.getFormatInstance();let m=l[0];if(m>l.length)throw F.getFormatInstance();if(m===0)if(f<l.length)l[0]=l.length-f;else throw F.getFormatInstance()}static getBitCountForCodeword(l){let f=new Int32Array(8),m=0,g=f.length-1;for(;!((l&1)!==m&&(m=l&1,g--,g<0));)f[g]++,l>>=1;return f}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return R.getCodewordBucketNumber(R.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let f=new bi;for(let m=0;m<l.length;m++){f.format("Row %2d: ",m);for(let g=0;g<l[m].length;g++){let y=l[m][g];y.getValue().length===0?f.format("        ",null):f.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}f.format("%n")}return f.toString()}}R.CODEWORD_SKEW_SIZE=2,R.MAX_ERRORS=3,R.MAX_EC_CODEWORDS=512,R.errorCorrection=new Jo;class Z{decode(l,f=null){let m=Z.decode(l,f,!1);if(m==null||m.length===0||m[0]==null)throw H.getNotFoundInstance();return m[0]}decodeMultiple(l,f=null){try{return Z.decode(l,f,!0)}catch(m){throw m instanceof F||m instanceof x?H.getNotFoundInstance():m}}static decode(l,f,m){const g=new Array,y=Ht.detectMultiple(l,f,m);for(const b of y.getPoints()){const S=R.decode(y.getBits(),b[4],b[5],b[6],b[7],Z.getMinCodewordWidth(b),Z.getMaxCodewordWidth(b)),T=new ne(S.getText(),S.getRawBytes(),void 0,b,be.PDF_417);T.putMetadata(xe.ERROR_CORRECTION_LEVEL,S.getECLevel());const D=S.getOther();D!=null&&T.putMetadata(xe.PDF417_EXTRA_METADATA,D),g.push(T)}return g.map(b=>b)}static getMaxWidth(l,f){return l==null||f==null?0:Math.trunc(Math.abs(l.getX()-f.getX()))}static getMinWidth(l,f){return l==null||f==null?E.MAX_VALUE:Math.trunc(Math.abs(l.getX()-f.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(Z.getMaxWidth(l[0],l[4]),Z.getMaxWidth(l[6],l[2])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN),Math.max(Z.getMaxWidth(l[1],l[5]),Z.getMaxWidth(l[7],l[3])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(Z.getMinWidth(l[0],l[4]),Z.getMinWidth(l[6],l[2])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN),Math.min(Z.getMinWidth(l[1],l[5]),Z.getMinWidth(l[7],l[3])*Ft.MODULES_IN_CODEWORD/Ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class me extends d{}me.kind="ReaderException";class je{constructor(l,f){this.verbose=l===!0,f&&this.setHints(f)}decode(l,f){return f&&this.setHints(f),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const f=!n(l)&&l.get(B.TRY_HARDER)===!0,m=n(l)?null:l.get(B.POSSIBLE_FORMATS),g=new Array;if(!n(m)){const y=m.some(b=>b===be.UPC_A||b===be.UPC_E||b===be.EAN_13||b===be.EAN_8||b===be.CODABAR||b===be.CODE_39||b===be.CODE_93||b===be.CODE_128||b===be.ITF||b===be.RSS_14||b===be.RSS_EXPANDED);y&&!f&&g.push(new Vi(l,this.verbose)),m.includes(be.QR_CODE)&&g.push(new vi),m.includes(be.DATA_MATRIX)&&g.push(new Xn),m.includes(be.AZTEC)&&g.push(new Et),m.includes(be.PDF_417)&&g.push(new Z),y&&f&&g.push(new Vi(l,this.verbose))}g.length===0&&(f||g.push(new Vi(l,this.verbose)),g.push(new vi),g.push(new Xn),g.push(new Et),g.push(new Z),f&&g.push(new Vi(l,this.verbose))),this.readers=g}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new me("No readers where selected, nothing can be read.");for(const f of this.readers)try{return f.decode(l,this.hints)}catch(m){if(m instanceof me)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class _e extends se{constructor(l=null,f=500){const m=new je;m.setHints(l),super(m,f)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class Ke extends se{constructor(l=500){super(new Z,l)}}class rt extends se{constructor(l=500){super(new vi,l)}}var pt;(function(X){X[X.ERROR_CORRECTION=0]="ERROR_CORRECTION",X[X.CHARACTER_SET=1]="CHARACTER_SET",X[X.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",X[X.MIN_SIZE=3]="MIN_SIZE",X[X.MAX_SIZE=4]="MAX_SIZE",X[X.MARGIN=5]="MARGIN",X[X.PDF417_COMPACT=6]="PDF417_COMPACT",X[X.PDF417_COMPACTION=7]="PDF417_COMPACTION",X[X.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",X[X.AZTEC_LAYERS=9]="AZTEC_LAYERS",X[X.QR_VERSION=10]="QR_VERSION"})(pt||(pt={}));var lt=pt;class Vt{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new ke(l,Int32Array.from([1])))}buildGenerator(l){const f=this.cachedGenerators;if(l>=f.length){let m=f[f.length-1];const g=this.field;for(let y=f.length;y<=l;y++){const b=m.multiply(new ke(g,Int32Array.from([1,g.exp(y-1+g.getGeneratorBase())])));f.push(b),m=b}}return f[l]}encode(l,f){if(f===0)throw new p("No error correction bytes");const m=l.length-f;if(m<=0)throw new p("No data bytes provided");const g=this.buildGenerator(f),y=new Int32Array(m);j.arraycopy(l,0,y,0,m);let b=new ke(this.field,y);b=b.multiplyByMonomial(f,1);const T=b.divide(g)[1].getCoefficients(),D=f-T.length;for(let $=0;$<D;$++)l[m+$]=0;j.arraycopy(T,0,l,m+D,T.length)}}class gt{constructor(){}static applyMaskPenaltyRule1(l){return gt.applyMaskPenaltyRule1Internal(l,!0)+gt.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let f=0;const m=l.getArray(),g=l.getWidth(),y=l.getHeight();for(let b=0;b<y-1;b++){const S=m[b];for(let T=0;T<g-1;T++){const D=S[T];D===S[T+1]&&D===m[b+1][T]&&D===m[b+1][T+1]&&f++}}return gt.N2*f}static applyMaskPenaltyRule3(l){let f=0;const m=l.getArray(),g=l.getWidth(),y=l.getHeight();for(let b=0;b<y;b++)for(let S=0;S<g;S++){const T=m[b];S+6<g&&T[S]===1&&T[S+1]===0&&T[S+2]===1&&T[S+3]===1&&T[S+4]===1&&T[S+5]===0&&T[S+6]===1&&(gt.isWhiteHorizontal(T,S-4,S)||gt.isWhiteHorizontal(T,S+7,S+11))&&f++,b+6<y&&m[b][S]===1&&m[b+1][S]===0&&m[b+2][S]===1&&m[b+3][S]===1&&m[b+4][S]===1&&m[b+5][S]===0&&m[b+6][S]===1&&(gt.isWhiteVertical(m,S,b-4,b)||gt.isWhiteVertical(m,S,b+7,b+11))&&f++}return f*gt.N3}static isWhiteHorizontal(l,f,m){f=Math.max(f,0),m=Math.min(m,l.length);for(let g=f;g<m;g++)if(l[g]===1)return!1;return!0}static isWhiteVertical(l,f,m,g){m=Math.max(m,0),g=Math.min(g,l.length);for(let y=m;y<g;y++)if(l[y][f]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let f=0;const m=l.getArray(),g=l.getWidth(),y=l.getHeight();for(let T=0;T<y;T++){const D=m[T];for(let $=0;$<g;$++)D[$]===1&&f++}const b=l.getHeight()*l.getWidth();return Math.floor(Math.abs(f*2-b)*10/b)*gt.N4}static getDataMaskBit(l,f,m){let g,y;switch(l){case 0:g=m+f&1;break;case 1:g=m&1;break;case 2:g=f%3;break;case 3:g=(m+f)%3;break;case 4:g=Math.floor(m/2)+Math.floor(f/3)&1;break;case 5:y=m*f,g=(y&1)+y%3;break;case 6:y=m*f,g=(y&1)+y%3&1;break;case 7:y=m*f,g=y%3+(m+f&1)&1;break;default:throw new p("Invalid mask pattern: "+l)}return g===0}static applyMaskPenaltyRule1Internal(l,f){let m=0;const g=f?l.getHeight():l.getWidth(),y=f?l.getWidth():l.getHeight(),b=l.getArray();for(let S=0;S<g;S++){let T=0,D=-1;for(let $=0;$<y;$++){const Y=f?b[S][$]:b[$][S];Y===D?T++:(T>=5&&(m+=gt.N1+(T-5)),T=1,D=Y)}T>=5&&(m+=gt.N1+(T-5))}return m}}gt.N1=3,gt.N2=3,gt.N3=40,gt.N4=10;class pr{constructor(l,f){this.width=l,this.height=f;const m=new Array(f);for(let g=0;g!==f;g++)m[g]=new Uint8Array(l);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(l,f){return this.bytes[f][l]}getArray(){return this.bytes}setNumber(l,f,m){this.bytes[f][l]=m}setBoolean(l,f,m){this.bytes[f][l]=m?1:0}clear(l){for(const f of this.bytes)k.fill(f,l)}equals(l){if(!(l instanceof pr))return!1;const f=l;if(this.width!==f.width||this.height!==f.height)return!1;for(let m=0,g=this.height;m<g;++m){const y=this.bytes[m],b=f.bytes[m];for(let S=0,T=this.width;S<T;++S)if(y[S]!==b[S])return!1}return!0}toString(){const l=new Q;for(let f=0,m=this.height;f<m;++f){const g=this.bytes[f];for(let y=0,b=this.width;y<b;++y)switch(g[y]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class kr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new Q;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<kr.NUM_MASK_PATTERNS}}kr.NUM_MASK_PATTERNS=8;class Kt extends d{}Kt.kind="WriterException";class ut{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,f,m,g,y){ut.clearMatrix(y),ut.embedBasicPatterns(m,y),ut.embedTypeInfo(f,g,y),ut.maybeEmbedVersionInfo(m,y),ut.embedDataBits(l,g,y)}static embedBasicPatterns(l,f){ut.embedPositionDetectionPatternsAndSeparators(f),ut.embedDarkDotAtLeftBottomCorner(f),ut.maybeEmbedPositionAdjustmentPatterns(l,f),ut.embedTimingPatterns(f)}static embedTypeInfo(l,f,m){const g=new _;ut.makeTypeInfoBits(l,f,g);for(let y=0,b=g.getSize();y<b;++y){const S=g.get(g.getSize()-1-y),T=ut.TYPE_INFO_COORDINATES[y],D=T[0],$=T[1];if(m.setBoolean(D,$,S),y<8){const Y=m.getWidth()-y-1;m.setBoolean(Y,8,S)}else{const ee=m.getHeight()-7+(y-8);m.setBoolean(8,ee,S)}}}static maybeEmbedVersionInfo(l,f){if(l.getVersionNumber()<7)return;const m=new _;ut.makeVersionInfoBits(l,m);let g=6*3-1;for(let y=0;y<6;++y)for(let b=0;b<3;++b){const S=m.get(g);g--,f.setBoolean(y,f.getHeight()-11+b,S),f.setBoolean(f.getHeight()-11+b,y,S)}}static embedDataBits(l,f,m){let g=0,y=-1,b=m.getWidth()-1,S=m.getHeight()-1;for(;b>0;){for(b===6&&(b-=1);S>=0&&S<m.getHeight();){for(let T=0;T<2;++T){const D=b-T;if(!ut.isEmpty(m.get(D,S)))continue;let $;g<l.getSize()?($=l.get(g),++g):$=!1,f!==255&&gt.getDataMaskBit(f,D,S)&&($=!$),m.setBoolean(D,S,$)}S+=y}y=-y,S+=y,b-=2}if(g!==l.getSize())throw new Kt("Not all bits consumed: "+g+"/"+l.getSize())}static findMSBSet(l){return 32-E.numberOfLeadingZeros(l)}static calculateBCHCode(l,f){if(f===0)throw new p("0 polynomial");const m=ut.findMSBSet(f);for(l<<=m-1;ut.findMSBSet(l)>=m;)l^=f<<ut.findMSBSet(l)-m;return l}static makeTypeInfoBits(l,f,m){if(!kr.isValidMaskPattern(f))throw new Kt("Invalid mask pattern");const g=l.getBits()<<3|f;m.appendBits(g,5);const y=ut.calculateBCHCode(g,ut.TYPE_INFO_POLY);m.appendBits(y,10);const b=new _;if(b.appendBits(ut.TYPE_INFO_MASK_PATTERN,15),m.xor(b),m.getSize()!==15)throw new Kt("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(l,f){f.appendBits(l.getVersionNumber(),6);const m=ut.calculateBCHCode(l.getVersionNumber(),ut.VERSION_INFO_POLY);if(f.appendBits(m,12),f.getSize()!==18)throw new Kt("should not happen but we got: "+f.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let f=8;f<l.getWidth()-8;++f){const m=(f+1)%2;ut.isEmpty(l.get(f,6))&&l.setNumber(f,6,m),ut.isEmpty(l.get(6,f))&&l.setNumber(6,f,m)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new Kt;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,f,m){for(let g=0;g<8;++g){if(!ut.isEmpty(m.get(l+g,f)))throw new Kt;m.setNumber(l+g,f,0)}}static embedVerticalSeparationPattern(l,f,m){for(let g=0;g<7;++g){if(!ut.isEmpty(m.get(l,f+g)))throw new Kt;m.setNumber(l,f+g,0)}}static embedPositionAdjustmentPattern(l,f,m){for(let g=0;g<5;++g){const y=ut.POSITION_ADJUSTMENT_PATTERN[g];for(let b=0;b<5;++b)m.setNumber(l+b,f+g,y[b])}}static embedPositionDetectionPattern(l,f,m){for(let g=0;g<7;++g){const y=ut.POSITION_DETECTION_PATTERN[g];for(let b=0;b<7;++b)m.setNumber(l+b,f+g,y[b])}}static embedPositionDetectionPatternsAndSeparators(l){const f=ut.POSITION_DETECTION_PATTERN[0].length;ut.embedPositionDetectionPattern(0,0,l),ut.embedPositionDetectionPattern(l.getWidth()-f,0,l),ut.embedPositionDetectionPattern(0,l.getWidth()-f,l);const m=8;ut.embedHorizontalSeparationPattern(0,m-1,l),ut.embedHorizontalSeparationPattern(l.getWidth()-m,m-1,l),ut.embedHorizontalSeparationPattern(0,l.getWidth()-m,l);const g=7;ut.embedVerticalSeparationPattern(g,0,l),ut.embedVerticalSeparationPattern(l.getHeight()-g-1,0,l),ut.embedVerticalSeparationPattern(g,l.getHeight()-g,l)}static maybeEmbedPositionAdjustmentPatterns(l,f){if(l.getVersionNumber()<2)return;const m=l.getVersionNumber()-1,g=ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let y=0,b=g.length;y!==b;y++){const S=g[y];if(S>=0)for(let T=0;T!==b;T++){const D=g[T];D>=0&&ut.isEmpty(f.get(D,S))&&ut.embedPositionAdjustmentPattern(D-2,S-2,f)}}}}ut.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ut.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ut.VERSION_INFO_POLY=7973,ut.TYPE_INFO_POLY=1335,ut.TYPE_INFO_MASK_PATTERN=21522;class Ln{constructor(l,f){this.dataBytes=l,this.errorCorrectionBytes=f}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Qt{constructor(){}static calculateMaskPenalty(l){return gt.applyMaskPenaltyRule1(l)+gt.applyMaskPenaltyRule2(l)+gt.applyMaskPenaltyRule3(l)+gt.applyMaskPenaltyRule4(l)}static encode(l,f,m=null){let g=Qt.DEFAULT_BYTE_MODE_ENCODING;const y=m!==null&&m.get(lt.CHARACTER_SET)!==void 0;y&&(g=m.get(lt.CHARACTER_SET).toString());const b=this.chooseMode(l,g),S=new _;if(b===Rt.BYTE&&(y||Qt.DEFAULT_BYTE_MODE_ENCODING!==g)){const et=L.getCharacterSetECIByName(g);et!==void 0&&this.appendECI(et,S)}this.appendModeInfo(b,S);const T=new _;this.appendBytes(l,b,T,g);let D;if(m!==null&&m.get(lt.QR_VERSION)!==void 0){const et=Number.parseInt(m.get(lt.QR_VERSION).toString(),10);D=mt.getVersionForNumber(et);const Je=this.calculateBitsNeeded(b,S,T,D);if(!this.willFit(Je,D,f))throw new Kt("Data too big for requested version")}else D=this.recommendVersion(f,b,S,T);const $=new _;$.appendBitArray(S);const Y=b===Rt.BYTE?T.getSizeInBytes():l.length;this.appendLengthInfo(Y,D,b,$),$.appendBitArray(T);const ee=D.getECBlocksForLevel(f),fe=D.getTotalCodewords()-ee.getTotalECCodewords();this.terminateBits(fe,$);const Ne=this.interleaveWithECBytes($,D.getTotalCodewords(),fe,ee.getNumBlocks()),Ae=new kr;Ae.setECLevel(f),Ae.setMode(b),Ae.setVersion(D);const Oe=D.getDimensionForVersion(),Fe=new pr(Oe,Oe),Ye=this.chooseMaskPattern(Ne,f,D,Fe);return Ae.setMaskPattern(Ye),ut.buildMatrix(Ne,f,D,Ye,Fe),Ae.setMatrix(Fe),Ae}static recommendVersion(l,f,m,g){const y=this.calculateBitsNeeded(f,m,g,mt.getVersionForNumber(1)),b=this.chooseVersion(y,l),S=this.calculateBitsNeeded(f,m,g,b);return this.chooseVersion(S,l)}static calculateBitsNeeded(l,f,m,g){return f.getSize()+l.getCharacterCountBits(g)+m.getSize()}static getAlphanumericCode(l){return l<Qt.ALPHANUMERIC_TABLE.length?Qt.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,f=null){if(L.SJIS.getName()===f&&this.isOnlyDoubleByteKanji(l))return Rt.KANJI;let m=!1,g=!1;for(let y=0,b=l.length;y<b;++y){const S=l.charAt(y);if(Qt.isDigit(S))m=!0;else if(this.getAlphanumericCode(S.charCodeAt(0))!==-1)g=!0;else return Rt.BYTE}return g?Rt.ALPHANUMERIC:m?Rt.NUMERIC:Rt.BYTE}static isOnlyDoubleByteKanji(l){let f;try{f=z.encode(l,L.SJIS)}catch{return!1}const m=f.length;if(m%2!==0)return!1;for(let g=0;g<m;g+=2){const y=f[g]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(l,f,m,g){let y=Number.MAX_SAFE_INTEGER,b=-1;for(let S=0;S<kr.NUM_MASK_PATTERNS;S++){ut.buildMatrix(l,f,m,S,g);let T=this.calculateMaskPenalty(g);T<y&&(y=T,b=S)}return b}static chooseVersion(l,f){for(let m=1;m<=40;m++){const g=mt.getVersionForNumber(m);if(Qt.willFit(l,g,f))return g}throw new Kt("Data too big")}static willFit(l,f,m){const g=f.getTotalCodewords(),b=f.getECBlocksForLevel(m).getTotalECCodewords(),S=g-b,T=(l+7)/8;return S>=T}static terminateBits(l,f){const m=l*8;if(f.getSize()>m)throw new Kt("data bits cannot fit in the QR Code"+f.getSize()+" > "+m);for(let b=0;b<4&&f.getSize()<m;++b)f.appendBit(!1);const g=f.getSize()&7;if(g>0)for(let b=g;b<8;b++)f.appendBit(!1);const y=l-f.getSizeInBytes();for(let b=0;b<y;++b)f.appendBits(b&1?17:236,8);if(f.getSize()!==m)throw new Kt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,f,m,g,y,b){if(g>=m)throw new Kt("Block ID too large");const S=l%m,T=m-S,D=Math.floor(l/m),$=D+1,Y=Math.floor(f/m),ee=Y+1,fe=D-Y,Ne=$-ee;if(fe!==Ne)throw new Kt("EC bytes mismatch");if(m!==T+S)throw new Kt("RS blocks mismatch");if(l!==(Y+fe)*T+(ee+Ne)*S)throw new Kt("Total bytes mismatch");g<T?(y[0]=Y,b[0]=fe):(y[0]=ee,b[0]=Ne)}static interleaveWithECBytes(l,f,m,g){if(l.getSizeInBytes()!==m)throw new Kt("Number of bits and data bytes does not match");let y=0,b=0,S=0;const T=new Array;for(let $=0;$<g;++$){const Y=new Int32Array(1),ee=new Int32Array(1);Qt.getNumDataBytesAndNumECBytesForBlockID(f,m,g,$,Y,ee);const fe=Y[0],Ne=new Uint8Array(fe);l.toBytes(8*y,Ne,0,fe);const Ae=Qt.generateECBytes(Ne,ee[0]);T.push(new Ln(Ne,Ae)),b=Math.max(b,fe),S=Math.max(S,Ae.length),y+=Y[0]}if(m!==y)throw new Kt("Data bytes does not match offset");const D=new _;for(let $=0;$<b;++$)for(const Y of T){const ee=Y.getDataBytes();$<ee.length&&D.appendBits(ee[$],8)}for(let $=0;$<S;++$)for(const Y of T){const ee=Y.getErrorCorrectionBytes();$<ee.length&&D.appendBits(ee[$],8)}if(f!==D.getSizeInBytes())throw new Kt("Interleaving error: "+f+" and "+D.getSizeInBytes()+" differ.");return D}static generateECBytes(l,f){const m=l.length,g=new Int32Array(m+f);for(let b=0;b<m;b++)g[b]=l[b]&255;new Vt(We.QR_CODE_FIELD_256).encode(g,f);const y=new Uint8Array(f);for(let b=0;b<f;b++)y[b]=g[m+b];return y}static appendModeInfo(l,f){f.appendBits(l.getBits(),4)}static appendLengthInfo(l,f,m,g){const y=m.getCharacterCountBits(f);if(l>=1<<y)throw new Kt(l+" is bigger than "+((1<<y)-1));g.appendBits(l,y)}static appendBytes(l,f,m,g){switch(f){case Rt.NUMERIC:Qt.appendNumericBytes(l,m);break;case Rt.ALPHANUMERIC:Qt.appendAlphanumericBytes(l,m);break;case Rt.BYTE:Qt.append8BitBytes(l,m,g);break;case Rt.KANJI:Qt.appendKanjiBytes(l,m);break;default:throw new Kt("Invalid mode: "+f)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const f=Qt.getDigit(l);return f>=0&&f<=9}static appendNumericBytes(l,f){const m=l.length;let g=0;for(;g<m;){const y=Qt.getDigit(l.charAt(g));if(g+2<m){const b=Qt.getDigit(l.charAt(g+1)),S=Qt.getDigit(l.charAt(g+2));f.appendBits(y*100+b*10+S,10),g+=3}else if(g+1<m){const b=Qt.getDigit(l.charAt(g+1));f.appendBits(y*10+b,7),g+=2}else f.appendBits(y,4),g++}}static appendAlphanumericBytes(l,f){const m=l.length;let g=0;for(;g<m;){const y=Qt.getAlphanumericCode(l.charCodeAt(g));if(y===-1)throw new Kt;if(g+1<m){const b=Qt.getAlphanumericCode(l.charCodeAt(g+1));if(b===-1)throw new Kt;f.appendBits(y*45+b,11),g+=2}else f.appendBits(y,6),g++}}static append8BitBytes(l,f,m){let g;try{g=z.encode(l,m)}catch(y){throw new Kt(y)}for(let y=0,b=g.length;y!==b;y++){const S=g[y];f.appendBits(S,8)}}static appendKanjiBytes(l,f){let m;try{m=z.encode(l,L.SJIS)}catch(y){throw new Kt(y)}const g=m.length;for(let y=0;y<g;y+=2){const b=m[y]&255,S=m[y+1]&255,T=b<<8&4294967295|S;let D=-1;if(T>=33088&&T<=40956?D=T-33088:T>=57408&&T<=60351&&(D=T-49472),D===-1)throw new Kt("Invalid byte sequence");const $=(D>>8)*192+(D&255);f.appendBits($,13)}}static appendECI(l,f){f.appendBits(Rt.ECI.getBits(),4),f.appendBits(l.getValue(),8)}}Qt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Qt.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class nn{write(l,f,m,g=null){if(l.length===0)throw new p("Found empty contents");if(f<0||m<0)throw new p("Requested dimensions are too small: "+f+"x"+m);let y=jr.L,b=nn.QUIET_ZONE_SIZE;g!==null&&(g.get(lt.ERROR_CORRECTION)!==void 0&&(y=jr.fromString(g.get(lt.ERROR_CORRECTION).toString())),g.get(lt.MARGIN)!==void 0&&(b=Number.parseInt(g.get(lt.MARGIN).toString(),10)));const S=Qt.encode(l,y,g);return this.renderResult(S,f,m,b)}writeToDom(l,f,m,g,y=null){typeof l=="string"&&(l=document.querySelector(l));const b=this.write(f,m,g,y);l&&l.appendChild(b)}renderResult(l,f,m,g){const y=l.getMatrix();if(y===null)throw new he;const b=y.getWidth(),S=y.getHeight(),T=b+g*2,D=S+g*2,$=Math.max(f,T),Y=Math.max(m,D),ee=Math.min(Math.floor($/T),Math.floor(Y/D)),fe=Math.floor(($-b*ee)/2),Ne=Math.floor((Y-S*ee)/2),Ae=this.createSVGElement($,Y);for(let Oe=0,Fe=Ne;Oe<S;Oe++,Fe+=ee)for(let Ye=0,et=fe;Ye<b;Ye++,et+=ee)if(y.get(Ye,Oe)===1){const Je=this.createSvgRectElement(et,Fe,ee,ee);Ae.appendChild(Je)}return Ae}createSVGElement(l,f){const m=document.createElementNS(nn.SVG_NS,"svg");return m.setAttributeNS(null,"height",l.toString()),m.setAttributeNS(null,"width",f.toString()),m}createSvgRectElement(l,f,m,g){const y=document.createElementNS(nn.SVG_NS,"rect");return y.setAttributeNS(null,"x",l.toString()),y.setAttributeNS(null,"y",f.toString()),y.setAttributeNS(null,"height",m.toString()),y.setAttributeNS(null,"width",g.toString()),y.setAttributeNS(null,"fill","#000000"),y}}nn.QUIET_ZONE_SIZE=4,nn.SVG_NS="http://www.w3.org/2000/svg";class na{encode(l,f,m,g,y){if(l.length===0)throw new p("Found empty contents");if(f!==be.QR_CODE)throw new p("Can only encode QR_CODE, but got "+f);if(m<0||g<0)throw new p(`Requested dimensions are too small: ${m}x${g}`);let b=jr.L,S=na.QUIET_ZONE_SIZE;y!==null&&(y.get(lt.ERROR_CORRECTION)!==void 0&&(b=jr.fromString(y.get(lt.ERROR_CORRECTION).toString())),y.get(lt.MARGIN)!==void 0&&(S=Number.parseInt(y.get(lt.MARGIN).toString(),10)));const T=Qt.encode(l,b,y);return na.renderResult(T,m,g,S)}static renderResult(l,f,m,g){const y=l.getMatrix();if(y===null)throw new he;const b=y.getWidth(),S=y.getHeight(),T=b+g*2,D=S+g*2,$=Math.max(f,T),Y=Math.max(m,D),ee=Math.min(Math.floor($/T),Math.floor(Y/D)),fe=Math.floor(($-b*ee)/2),Ne=Math.floor((Y-S*ee)/2),Ae=new G($,Y);for(let Oe=0,Fe=Ne;Oe<S;Oe++,Fe+=ee)for(let Ye=0,et=fe;Ye<b;Ye++,et+=ee)y.get(Ye,Oe)===1&&Ae.setRegion(et,Fe,ee,ee);return Ae}}na.QUIET_ZONE_SIZE=4;class Va{encode(l,f,m,g,y){let b;switch(f){case be.QR_CODE:b=new na;break;default:throw new p("No encoder available for format "+f)}return b.encode(l,f,m,g,y)}}class us extends de{constructor(l,f,m,g,y,b,S,T){if(super(b,S),this.yuvData=l,this.dataWidth=f,this.dataHeight=m,this.left=g,this.top=y,g+b>f||y+S>m)throw new p("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(b,S)}getRow(l,f){if(l<0||l>=this.getHeight())throw new p("Requested row is outside the image: "+l);const m=this.getWidth();(f==null||f.length<m)&&(f=new Uint8ClampedArray(m));const g=(l+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,g,f,0,m),f}getMatrix(){const l=this.getWidth(),f=this.getHeight();if(l===this.dataWidth&&f===this.dataHeight)return this.yuvData;const m=l*f,g=new Uint8ClampedArray(m);let y=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return j.arraycopy(this.yuvData,y,g,0,m),g;for(let b=0;b<f;b++){const S=b*l;j.arraycopy(this.yuvData,y,g,S,l),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(l,f,m,g){return new us(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+f,m,g,!1)}renderThumbnail(){const l=this.getWidth()/us.THUMBNAIL_SCALE_FACTOR,f=this.getHeight()/us.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(l*f),g=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let b=0;b<f;b++){const S=b*l;for(let T=0;T<l;T++){const D=g[y+T*us.THUMBNAIL_SCALE_FACTOR]&255;m[S+T]=4278190080|D*65793}y+=this.dataWidth*us.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/us.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/us.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,f){const m=this.yuvData;for(let g=0,y=this.top*this.dataWidth+this.left;g<f;g++,y+=this.dataWidth){const b=y+l/2;for(let S=y,T=y+l-1;S<b;S++,T--){const D=m[S];m[S]=m[T],m[T]=D}}}invert(){return new we(this)}}us.THUMBNAIL_SCALE_FACTOR=2;class No extends de{constructor(l,f,m,g,y,b,S){if(super(f,m),this.dataWidth=g,this.dataHeight=y,this.left=b,this.top=S,l.BYTES_PER_ELEMENT===4){const T=f*m,D=new Uint8ClampedArray(T);for(let $=0;$<T;$++){const Y=l[$],ee=Y>>16&255,fe=Y>>7&510,Ne=Y&255;D[$]=(ee+fe+Ne)/4&255}this.luminances=D}else this.luminances=l;if(g===void 0&&(this.dataWidth=f),y===void 0&&(this.dataHeight=m),b===void 0&&(this.left=0),S===void 0&&(this.top=0),this.left+f>this.dataWidth||this.top+m>this.dataHeight)throw new p("Crop rectangle does not fit within image data.")}getRow(l,f){if(l<0||l>=this.getHeight())throw new p("Requested row is outside the image: "+l);const m=this.getWidth();(f==null||f.length<m)&&(f=new Uint8ClampedArray(m));const g=(l+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,g,f,0,m),f}getMatrix(){const l=this.getWidth(),f=this.getHeight();if(l===this.dataWidth&&f===this.dataHeight)return this.luminances;const m=l*f,g=new Uint8ClampedArray(m);let y=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return j.arraycopy(this.luminances,y,g,0,m),g;for(let b=0;b<f;b++){const S=b*l;j.arraycopy(this.luminances,y,g,S,l),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(l,f,m,g){return new No(this.luminances,m,g,this.dataWidth,this.dataHeight,this.left+l,this.top+f)}invert(){return new we(this)}}class jo extends L{static forName(l){return this.getCharacterSetECIByName(l)}}class ji{}ji.ISO_8859_1=L.ISO8859_1;class Ao{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class Co{static singletonList(l){return[l]}static min(l,f){return l.sort(f)[0]}}class sl{constructor(l){this.previous=l}getPrevious(){return this.previous}}class wn extends sl{constructor(l,f,m){super(l),this.value=f,this.bitCount=m}appendTo(l,f){l.appendBits(this.value,this.bitCount)}add(l,f){return new wn(this,l,f)}addBinaryShift(l,f){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new wn(this,l,f)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+E.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class Yi extends wn{constructor(l,f,m){super(l,0,0),this.binaryShiftStart=f,this.binaryShiftByteCount=m}appendTo(l,f){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):m===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(f[this.binaryShiftStart+m],8)}addBinaryShift(l,f){return new Yi(this,l,f)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function il(X,l,f){return new Yi(X,l,f)}function Zi(X,l,f){return new wn(X,l,f)}const Zc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pr=0,Cs=1,aa=2,Jc=3,Nn=4,ol=new wn(null,0,0),ll=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Qc(X){for(let l of X)k.fill(l,-1);return X[Pr][Nn]=0,X[Cs][Nn]=0,X[Cs][Pr]=28,X[Jc][Nn]=0,X[aa][Nn]=0,X[aa][Pr]=15,X}const Ji=Qc(k.createInt32Array(6,6));class va{constructor(l,f,m,g){this.token=l,this.mode=f,this.binaryShiftByteCount=m,this.bitCount=g}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,f){let m=this.bitCount,g=this.token;if(l!==this.mode){let b=ll[this.mode][l];g=Zi(g,b&65535,b>>16),m+=b>>16}let y=l===aa?4:5;return g=Zi(g,f,y),new va(g,l,0,m+y)}shiftAndAppend(l,f){let m=this.token,g=this.mode===aa?4:5;return m=Zi(m,Ji[this.mode][l],g),m=Zi(m,f,5),new va(m,this.mode,0,this.bitCount+g+5)}addBinaryShiftChar(l){let f=this.token,m=this.mode,g=this.bitCount;if(this.mode===Nn||this.mode===aa){let S=ll[m][Pr];f=Zi(f,S&65535,S>>16),g+=S>>16,m=Pr}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,b=new va(f,m,this.binaryShiftByteCount+1,g+y);return b.binaryShiftByteCount===2078&&(b=b.endBinaryShift(l+1)),b}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let f=this.token;return f=il(f,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new va(f,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let f=this.bitCount+(ll[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?f+=va.calculateBinaryShiftCost(l)-va.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(f+=10),f<=l.bitCount}toBitArray(l){let f=[];for(let g=this.endBinaryShift(l.length).token;g!==null;g=g.getPrevious())f.unshift(g);let m=new _;for(const g of f)g.appendTo(m,l);return m}toString(){return q.format("%s bits=%d bytes=%d",Zc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}va.INITIAL_STATE=new va(ol,Pr,0,0);function ds(X){const l=q.getCharCode(" "),f=q.getCharCode("."),m=q.getCharCode(",");X[Pr][l]=1;const g=q.getCharCode("Z"),y=q.getCharCode("A");for(let ee=y;ee<=g;ee++)X[Pr][ee]=ee-y+2;X[Cs][l]=1;const b=q.getCharCode("z"),S=q.getCharCode("a");for(let ee=S;ee<=b;ee++)X[Cs][ee]=ee-S+2;X[aa][l]=1;const T=q.getCharCode("9"),D=q.getCharCode("0");for(let ee=D;ee<=T;ee++)X[aa][ee]=ee-D+2;X[aa][m]=12,X[aa][f]=13;const $=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ee=0;ee<$.length;ee++)X[Jc][q.getCharCode($[ee])]=ee;const Y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ee=0;ee<Y.length;ee++)q.getCharCode(Y[ee])>0&&(X[Nn][q.getCharCode(Y[ee])]=ee);return X}const Oa=ds(k.createInt32Array(5,256));class Ss{constructor(l){this.text=l}encode(){const l=q.getCharCode(" "),f=q.getCharCode(`
`);let m=Co.singletonList(va.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let b,S=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case q.getCharCode("\r"):b=S===f?2:0;break;case q.getCharCode("."):b=S===l?3:0;break;case q.getCharCode(","):b=S===l?4:0;break;case q.getCharCode(":"):b=S===l?5:0;break;default:b=0}b>0?(m=Ss.updateStateListForPair(m,y,b),y++):m=this.updateStateListForChar(m,y)}return Co.min(m,(y,b)=>y.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,f){const m=[];for(let g of l)this.updateStateForChar(g,f,m);return Ss.simplifyStates(m)}updateStateForChar(l,f,m){let g=this.text[f]&255,y=Oa[l.getMode()][g]>0,b=null;for(let S=0;S<=Nn;S++){let T=Oa[S][g];if(T>0){if(b==null&&(b=l.endBinaryShift(f)),!y||S===l.getMode()||S===aa){const D=b.latchAndAppend(S,T);m.push(D)}if(!y&&Ji[l.getMode()][S]>=0){const D=b.shiftAndAppend(S,T);m.push(D)}}}if(l.getBinaryShiftByteCount()>0||Oa[l.getMode()][g]===0){let S=l.addBinaryShiftChar(f);m.push(S)}}static updateStateListForPair(l,f,m){const g=[];for(let y of l)this.updateStateForPair(y,f,m,g);return this.simplifyStates(g)}static updateStateForPair(l,f,m,g){let y=l.endBinaryShift(f);if(g.push(y.latchAndAppend(Nn,m)),l.getMode()!==Nn&&g.push(y.shiftAndAppend(Nn,m)),m===3||m===4){let b=y.latchAndAppend(aa,16-m).latchAndAppend(aa,1);g.push(b)}if(l.getBinaryShiftByteCount()>0){let b=l.addBinaryShiftChar(f).addBinaryShiftChar(f+1);g.push(b)}}static simplifyStates(l){let f=[];for(const m of l){let g=!0;for(const y of f){if(y.isBetterThanOrEqualTo(m)){g=!1;break}m.isBetterThanOrEqualTo(y)&&(f=f.filter(b=>b!==y))}g&&f.push(m)}return f}}class tr{constructor(){}static encodeBytes(l){return tr.encode(l,tr.DEFAULT_EC_PERCENT,tr.DEFAULT_AZTEC_LAYERS)}static encode(l,f,m){let g=new Ss(l).encode(),y=E.truncDivision(g.getSize()*f,100)+11,b=g.getSize()+y,S,T,D,$,Y;if(m!==tr.DEFAULT_AZTEC_LAYERS){if(S=m<0,T=Math.abs(m),T>(S?tr.MAX_NB_BITS_COMPACT:tr.MAX_NB_BITS))throw new p(q.format("Illegal value %s for layers",m));D=tr.totalBitsInLayer(T,S),$=tr.WORD_SIZE[T];let Je=D-D%$;if(Y=tr.stuffBits(g,$),Y.getSize()+y>Je)throw new p("Data to large for user specified layer");if(S&&Y.getSize()>$*64)throw new p("Data to large for user specified layer")}else{$=0,Y=null;for(let Je=0;;Je++){if(Je>tr.MAX_NB_BITS)throw new p("Data too large for an Aztec code");if(S=Je<=3,T=S?Je+1:Je,D=tr.totalBitsInLayer(T,S),b>D)continue;(Y==null||$!==tr.WORD_SIZE[T])&&($=tr.WORD_SIZE[T],Y=tr.stuffBits(g,$));let Dt=D-D%$;if(!(S&&Y.getSize()>$*64)&&Y.getSize()+y<=Dt)break}}let ee=tr.generateCheckWords(Y,D,$),fe=Y.getSize()/$,Ne=tr.generateModeMessage(S,T,fe),Ae=(S?11:14)+T*4,Oe=new Int32Array(Ae),Fe;if(S){Fe=Ae;for(let Je=0;Je<Oe.length;Je++)Oe[Je]=Je}else{Fe=Ae+1+2*E.truncDivision(E.truncDivision(Ae,2)-1,15);let Je=E.truncDivision(Ae,2),Dt=E.truncDivision(Fe,2);for(let zt=0;zt<Je;zt++){let Zn=zt+E.truncDivision(zt,15);Oe[Je-zt-1]=Dt-Zn-1,Oe[Je+zt]=Dt+Zn+1}}let Ye=new G(Fe);for(let Je=0,Dt=0;Je<T;Je++){let zt=(T-Je)*4+(S?9:12);for(let Zn=0;Zn<zt;Zn++){let ba=Zn*2;for(let sa=0;sa<2;sa++)ee.get(Dt+ba+sa)&&Ye.set(Oe[Je*2+sa],Oe[Je*2+Zn]),ee.get(Dt+zt*2+ba+sa)&&Ye.set(Oe[Je*2+Zn],Oe[Ae-1-Je*2-sa]),ee.get(Dt+zt*4+ba+sa)&&Ye.set(Oe[Ae-1-Je*2-sa],Oe[Ae-1-Je*2-Zn]),ee.get(Dt+zt*6+ba+sa)&&Ye.set(Oe[Ae-1-Je*2-Zn],Oe[Je*2+sa])}Dt+=zt*8}if(tr.drawModeMessage(Ye,S,Fe,Ne),S)tr.drawBullsEye(Ye,E.truncDivision(Fe,2),5);else{tr.drawBullsEye(Ye,E.truncDivision(Fe,2),7);for(let Je=0,Dt=0;Je<E.truncDivision(Ae,2)-1;Je+=15,Dt+=16)for(let zt=E.truncDivision(Fe,2)&1;zt<Fe;zt+=2)Ye.set(E.truncDivision(Fe,2)-Dt,zt),Ye.set(E.truncDivision(Fe,2)+Dt,zt),Ye.set(zt,E.truncDivision(Fe,2)-Dt),Ye.set(zt,E.truncDivision(Fe,2)+Dt)}let et=new Ao;return et.setCompact(S),et.setSize(Fe),et.setLayers(T),et.setCodeWords(fe),et.setMatrix(Ye),et}static drawBullsEye(l,f,m){for(let g=0;g<m;g+=2)for(let y=f-g;y<=f+g;y++)l.set(y,f-g),l.set(y,f+g),l.set(f-g,y),l.set(f+g,y);l.set(f-m,f-m),l.set(f-m+1,f-m),l.set(f-m,f-m+1),l.set(f+m,f-m),l.set(f+m,f-m+1),l.set(f+m,f+m-1)}static generateModeMessage(l,f,m){let g=new _;return l?(g.appendBits(f-1,2),g.appendBits(m-1,6),g=tr.generateCheckWords(g,28,4)):(g.appendBits(f-1,5),g.appendBits(m-1,11),g=tr.generateCheckWords(g,40,4)),g}static drawModeMessage(l,f,m,g){let y=E.truncDivision(m,2);if(f)for(let b=0;b<7;b++){let S=y-3+b;g.get(b)&&l.set(S,y-5),g.get(b+7)&&l.set(y+5,S),g.get(20-b)&&l.set(S,y+5),g.get(27-b)&&l.set(y-5,S)}else for(let b=0;b<10;b++){let S=y-5+b+E.truncDivision(b,5);g.get(b)&&l.set(S,y-7),g.get(b+10)&&l.set(y+7,S),g.get(29-b)&&l.set(S,y+7),g.get(39-b)&&l.set(y-7,S)}}static generateCheckWords(l,f,m){let g=l.getSize()/m,y=new Vt(tr.getGF(m)),b=E.truncDivision(f,m),S=tr.bitsToWords(l,m,b);y.encode(S,b-g);let T=f%m,D=new _;D.appendBits(0,T);for(const $ of Array.from(S))D.appendBits($,m);return D}static bitsToWords(l,f,m){let g=new Int32Array(m),y,b;for(y=0,b=l.getSize()/f;y<b;y++){let S=0;for(let T=0;T<f;T++)S|=l.get(y*f+T)?1<<f-T-1:0;g[y]=S}return g}static getGF(l){switch(l){case 4:return We.AZTEC_PARAM;case 6:return We.AZTEC_DATA_6;case 8:return We.AZTEC_DATA_8;case 10:return We.AZTEC_DATA_10;case 12:return We.AZTEC_DATA_12;default:throw new p("Unsupported word size "+l)}}static stuffBits(l,f){let m=new _,g=l.getSize(),y=(1<<f)-2;for(let b=0;b<g;b+=f){let S=0;for(let T=0;T<f;T++)(b+T>=g||l.get(b+T))&&(S|=1<<f-1-T);(S&y)===y?(m.appendBits(S&y,f),b--):S&y?m.appendBits(S,f):(m.appendBits(S|1,f),b--)}return m}static totalBitsInLayer(l,f){return((f?88:112)+16*l)*l}}tr.DEFAULT_EC_PERCENT=33,tr.DEFAULT_AZTEC_LAYERS=0,tr.MAX_NB_BITS=32,tr.MAX_NB_BITS_COMPACT=4,tr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Hs{encode(l,f,m,g){return this.encodeWithHints(l,f,m,g,null)}encodeWithHints(l,f,m,g,y){let b=ji.ISO_8859_1,S=tr.DEFAULT_EC_PERCENT,T=tr.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(lt.CHARACTER_SET)&&(b=jo.forName(y.get(lt.CHARACTER_SET).toString())),y.has(lt.ERROR_CORRECTION)&&(S=E.parseInt(y.get(lt.ERROR_CORRECTION).toString())),y.has(lt.AZTEC_LAYERS)&&(T=E.parseInt(y.get(lt.AZTEC_LAYERS).toString()))),Hs.encodeLayers(l,f,m,g,b,S,T)}static encodeLayers(l,f,m,g,y,b,S){if(f!==be.AZTEC)throw new p("Can only encode AZTEC, but got "+f);let T=tr.encode(q.getBytes(l,y),b,S);return Hs.renderResult(T,m,g)}static renderResult(l,f,m){let g=l.getMatrix();if(g==null)throw new he;let y=g.getWidth(),b=g.getHeight(),S=Math.max(f,y),T=Math.max(m,b),D=Math.min(S/y,T/b),$=(S-y*D)/2,Y=(T-b*D)/2,ee=new G(S,T);for(let fe=0,Ne=Y;fe<b;fe++,Ne+=D)for(let Ae=0,Oe=$;Ae<y;Ae++,Oe+=D)g.get(Ae,fe)&&ee.setRegion(Oe,Ne,D,D);return ee}}r.AbstractExpandedDecoder=cs,r.ArgumentException=h,r.ArithmeticException=Ie,r.AztecCode=Ao,r.AztecCodeReader=Et,r.AztecCodeWriter=Hs,r.AztecDecoder=it,r.AztecDetector=qt,r.AztecDetectorResult=Ot,r.AztecEncoder=tr,r.AztecHighLevelEncoder=Ss,r.AztecPoint=ht,r.BarcodeFormat=be,r.Binarizer=w,r.BinaryBitmap=v,r.BitArray=_,r.BitMatrix=G,r.BitSource=fn,r.BrowserAztecCodeReader=$r,r.BrowserBarcodeReader=Gc,r.BrowserCodeReader=se,r.BrowserDatamatrixCodeReader=Ko,r.BrowserMultiFormatReader=_e,r.BrowserPDF417Reader=Ke,r.BrowserQRCodeReader=rt,r.BrowserQRCodeSvgWriter=nn,r.CharacterSetECI=L,r.ChecksumException=x,r.Code128Reader=qe,r.Code39Reader=jt,r.DataMatrixDecodedBitStreamParser=zs,r.DataMatrixReader=Xn,r.DecodeHintType=B,r.DecoderResult=le,r.DefaultGridSampler=Sr,r.DetectorResult=Xt,r.EAN13Reader=gr,r.EncodeHintType=lt,r.Exception=d,r.FormatException=F,r.GenericGF=We,r.GenericGFPoly=ke,r.GlobalHistogramBinarizer=ue,r.GridSampler=Yt,r.GridSamplerInstance=$t,r.HTMLCanvasElementLuminanceSource=Ee,r.HybridBinarizer=ye,r.ITFReader=Mt,r.IllegalArgumentException=p,r.IllegalStateException=he,r.InvertedLuminanceSource=we,r.LuminanceSource=de,r.MathUtils=Ve,r.MultiFormatOneDReader=Vi,r.MultiFormatReader=je,r.MultiFormatWriter=Va,r.NotFoundException=H,r.OneDReader=Ut,r.PDF417DecodedBitStreamParser=ze,r.PDF417DecoderErrorCorrection=Jo,r.PDF417Reader=Z,r.PDF417ResultMetadata=Jl,r.PerspectiveTransform=Lt,r.PlanarYUVLuminanceSource=us,r.QRCodeByteMatrix=pr,r.QRCodeDataMask=_a,r.QRCodeDecodedBitStreamParser=Hr,r.QRCodeDecoderErrorCorrectionLevel=jr,r.QRCodeDecoderFormatInformation=Yn,r.QRCodeEncoder=Qt,r.QRCodeEncoderQRCode=kr,r.QRCodeMaskUtil=gt,r.QRCodeMatrixUtil=ut,r.QRCodeMode=Rt,r.QRCodeReader=vi,r.QRCodeVersion=mt,r.QRCodeWriter=na,r.RGBLuminanceSource=No,r.RSS14Reader=Wr,r.RSSExpandedReader=tt,r.ReaderException=me,r.ReedSolomonDecoder=Ze,r.ReedSolomonEncoder=Vt,r.ReedSolomonException=Re,r.Result=ne,r.ResultMetadataType=xe,r.ResultPoint=He,r.StringUtils=q,r.UnsupportedOperationException=K,r.VideoInputDevice=ie,r.WhiteRectangleDetector=ar,r.WriterException=Kt,r.ZXingArrays=k,r.ZXingCharset=jo,r.ZXingInteger=E,r.ZXingStandardCharsets=ji,r.ZXingStringBuilder=Q,r.ZXingStringEncoding=z,r.ZXingSystem=j,r.createAbstractExpandedDecoder=rd,Object.defineProperty(r,"__esModule",{value:!0})})})(Bb,Bb.exports);var on=Bb.exports;const $se=Wo(on),Wse=wE({__proto__:null,default:$se},[on]);var IC=function(){function e(t,r,n){if(this.formatMap=new Map([[xt.QR_CODE,on.BarcodeFormat.QR_CODE],[xt.AZTEC,on.BarcodeFormat.AZTEC],[xt.CODABAR,on.BarcodeFormat.CODABAR],[xt.CODE_39,on.BarcodeFormat.CODE_39],[xt.CODE_93,on.BarcodeFormat.CODE_93],[xt.CODE_128,on.BarcodeFormat.CODE_128],[xt.DATA_MATRIX,on.BarcodeFormat.DATA_MATRIX],[xt.MAXICODE,on.BarcodeFormat.MAXICODE],[xt.ITF,on.BarcodeFormat.ITF],[xt.EAN_13,on.BarcodeFormat.EAN_13],[xt.EAN_8,on.BarcodeFormat.EAN_8],[xt.PDF_417,on.BarcodeFormat.PDF_417],[xt.RSS_14,on.BarcodeFormat.RSS_14],[xt.RSS_EXPANDED,on.BarcodeFormat.RSS_EXPANDED],[xt.UPC_A,on.BarcodeFormat.UPC_A],[xt.UPC_E,on.BarcodeFormat.UPC_E],[xt.UPC_EAN_EXTENSION,on.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Wse)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var s=this.createZXingFormats(t),i=new Map;i.set(on.DecodeHintType.POSSIBLE_FORMATS,s),i.set(on.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,s){try{n(r.decode(t))}catch(i){s(i)}})},e.prototype.decode=function(t){var r=new on.MultiFormatReader(this.verbose,this.hints),n=new on.HTMLCanvasElementLuminanceSource(t),s=new on.BinaryBitmap(new on.HybridBinarizer(n)),i=r.decode(s);return{text:i.text,format:zO.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,s){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,s=t;n<s.length;n++){var i=s[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),qse=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{d(n.next(h))}catch(p){o(p)}}function u(h){try{d(n.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((n=n.apply(e,t||[])).next())})},Hse=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(h){return u([d,h])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},TC=function(){function e(t,r,n){if(this.formatMap=new Map([[xt.QR_CODE,"qr_code"],[xt.AZTEC,"aztec"],[xt.CODABAR,"codabar"],[xt.CODE_39,"code_39"],[xt.CODE_93,"code_93"],[xt.CODE_128,"code_128"],[xt.DATA_MATRIX,"data_matrix"],[xt.ITF,"itf"],[xt.EAN_13,"ean_13"],[xt.EAN_8,"ean_8"],[xt.PDF_417,"pdf417"],[xt.UPC_A,"upc_a"],[xt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return qse(this,void 0,void 0,function(){var r,n;return Hse(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=s.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:zO.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,s=0,i=t;s<i.length;s++){var o=i[s],c=o.boundingBox.width*o.boundingBox.height;c>n&&(n=c,r=o)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,s=t;n<s.length;n++){var i=s[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,s){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),_C=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{d(n.next(h))}catch(p){o(p)}}function u(h){try{d(n.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((n=n.apply(e,t||[])).next())})},OC=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(h){return u([d,h])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Vse=function(){function e(t,r,n,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&TC.isSupported()?(this.primaryDecoder=new TC(t,n,s),this.secondaryDecoder=new IC(t,n,s)):this.primaryDecoder=new IC(t,n,s)}return e.prototype.decodeAsync=function(t){return _C(this,void 0,void 0,function(){var r;return OC(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return _C(this,void 0,void 0,function(){var r,n;return OC(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,s.sent()];case 3:if(n=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var s=n[r];t+=s}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),v3=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{d(n.next(h))}catch(p){o(p)}}function u(h){try{d(n.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((n=n.apply(e,t||[])).next())})},Xg=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(h){return u([d,h])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},WO=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),Gse=function(e){v3(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var s={advanced:[n]};return this.track.applyConstraints(s)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(WO),Kse=function(e){v3(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(Gse),Xse=function(e){v3(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(WO),Yse=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Kse(this.track)},e.prototype.torchFeature=function(){return new Xse(this.track)},e}(),Zse=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,s=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,s),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,s){return Kg(this,void 0,void 0,function(){var i,o;return Xg(this,function(c){switch(c.label){case 0:return i=new e(t,r,s),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:c.sent(),c.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Kg(this,void 0,void 0,function(){return Xg(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var s=t.mediaStream.getVideoTracks(),i=s.length,o=0;t.mediaStream.getVideoTracks().forEach(function(c){t.mediaStream.removeTrack(c),c.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new Yse(this.getFirstTrackOrFail())},e}(),Jse=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return Kg(this,void 0,void 0,function(){return Xg(this,function(s){return[2,Zse.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return Kg(this,void 0,void 0,function(){var r,n;return Xg(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=s.sent(),[2,new e(n)]}})})},e}(),RC=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{d(n.next(h))}catch(p){o(p)}}function u(h){try{d(n.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((n=n.apply(e,t||[])).next())})},DC=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(h){return u([d,h])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Qse=function(){function e(){}return e.failIfNotSupported=function(){return RC(this,void 0,void 0,function(){return DC(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return RC(this,void 0,void 0,function(){return DC(this,function(r){return[2,Jse.create(t)]})})},e}(),eie=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{d(n.next(h))}catch(p){o(p)}}function u(h){try{d(n.throw(h))}catch(p){o(p)}}function d(h){h.done?i(h.value):s(h.value).then(c,u)}d((n=n.apply(e,t||[])).next())})},tie=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(h){return u([d,h])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},rie=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Pd.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Pd.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return eie(this,void 0,void 0,function(){var t,r,n,s,i,o,c;return tie(this,function(u){switch(u.label){case 0:return t=function(d){for(var h=d.getVideoTracks(),p=0,v=h;p<v.length;p++){var x=v[p];x.enabled=!1,x.stop(),d.removeTrack(x)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=u.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=u.sent(),s=[],i=0,o=n;i<o.length;i++)c=o[i],c.kind==="videoinput"&&s.push({id:c.deviceId,label:c.label});return t(r),[2,s]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(i){for(var o=[],c=0,u=i;c<u.length;c++){var d=u[c];d.kind==="video"&&o.push({id:d.id,label:d.label})}t(o)},s=MediaStreamTrack;s.getSources(n)})},e}(),On;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(On||(On={}));var nie=function(){function e(){this.state=On.NOT_STARTED,this.onGoingTransactionNewState=On.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===On.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=On.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===On.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=On.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==On.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case On.UNKNOWN:throw"Transition from unknown is not allowed";case On.NOT_STARTED:this.failIfNewStateIs(t,[On.PAUSED]);break;case On.SCANNING:break;case On.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,s=r;n<s.length;n++){var i=s[n];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),aie=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===On.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==On.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===On.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===On.PAUSED},e}(),sie=function(){function e(){}return e.create=function(){return new aie(new nie)},e}(),iie=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ti=function(e){iie(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Fse),oie=function(){function e(t,r){this.logger=r,this.fps=ti.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ti.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?$O.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!gl(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),lie=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new zse(this.verbose),this.qrcode=new Vse(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=sie.create()}return e.prototype.start=function(t,r,n,s){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;s?o=s:o=this.verbose?this.logger.log:function(){};var c=oie.create(r,this.logger);this.clearElement();var u=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?u=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=u,h=document.getElementById(this.elementId);h.clientWidth?h.clientWidth:ti.DEFAULT_WIDTH,h.style.position="relative",this.shouldScan=!0,this.element=h;var p=this,v=this.stateManagerProxy.startTransition(On.SCANNING);return new Promise(function(x,w){var j=d?c.videoConstraints:p.createVideoConstraints(t);if(!j){v.cancel(),w("videoConstraints should be defined");return}var N={};(!d||c.aspectRatio)&&(N.aspectRatio=c.aspectRatio);var A={onRenderSurfaceReady:function(k,E){p.setupUi(k,E,c),p.isScanning=!0,p.foreverScan(c,n,o)}};Qse.failIfNotSupported().then(function(k){k.create(j).then(function(E){return E.render(i.element,N,A).then(function(_){p.renderedCamera=_,v.execute(),x(null)}).catch(function(_){v.cancel(),w(_)})}).catch(function(E){v.cancel(),w(Pd.errorGettingUserMedia(E))})}).catch(function(k){v.cancel(),w(Pd.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(On.PAUSED),this.showPausedState(),(gl(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(On.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(On.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var i=document.getElementById(ti.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),n(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),r.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(gl(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var c=o.width,u=o.height,d=document.getElementById(n.elementId),h=d.clientWidth?d.clientWidth:ti.DEFAULT_WIDTH,p=Math.max(d.clientHeight?d.clientHeight:u,ti.FILE_SCAN_MIN_HEIGHT),v=n.computeCanvasDrawConfig(c,u,h,p);if(r){var x=n.createCanvasElement(h,p,"qr-canvas-visible");x.style.display="inline-block",d.appendChild(x);var w=x.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=h,w.canvas.height=p,w.drawImage(o,0,0,c,u,v.x,v.y,v.width,v.height)}var j=ti.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(o.width,v.width),A=Math.max(o.height,v.height),k=N+2*j,E=A+2*j,_=n.createCanvasElement(k,E);d.appendChild(_);var O=_.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=k,O.canvas.height=E,O.drawImage(o,0,0,c,u,j,j,N,A);try{n.qrcode.decodeRobustlyAsync(_).then(function(B){s(PC.createFromQrcodeResult(B))}).catch(i)}catch(B){i("QR code parse error, error = ".concat(B))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return rie.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!$O.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[xt.QR_CODE,xt.AZTEC,xt.CODABAR,xt.CODE_39,xt.CODE_93,xt.CODE_128,xt.DATA_MATRIX,xt.MAXICODE,xt.ITF,xt.EAN_13,xt.EAN_8,xt.PDF_417,xt.RSS_14,xt.RSS_EXPANDED,xt.UPC_A,xt.UPC_E,xt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],s=0,i=t.formatsToSupport;s<i.length;s++){var o=i[s];Bse(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(gl(t))return!0;if(!gl(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(gl(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return gl(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var s=this,i=n.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,r,i),c=function(d){if(d<ti.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ti.MIN_QR_BOX_SIZE,"px.")},u=function(d){return d>t&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};c(o.width),c(o.height),o.width=u(o.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var s=gl(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(s);var i=this.toQrdimensions(t,r,s);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=r,c={x:0,y:0,width:t,height:r},u=o?this.getShadedRegionBounds(t,r,i):c,d=this.createCanvasElement(u.width,u.height),h={willReadFrequently:!0},p=d.getContext("2d",h);p.canvas.width=u.width,p.canvas.height=u.height,this.element.append(d),o&&this.possiblyInsertShadingElement(this.element,t,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=u,this.context=p,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Pd.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return t(s.text,PC.createFromQrcodeResult(s)),n.possiblyUpdateShaders(!0),!0}).catch(function(s){n.possiblyUpdateShaders(!1);var i=Pd.codeParseError(s);return r(i,Use.createFrom(i)),!1})},e.prototype.foreverScan=function(t,r,n){var s=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,c=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var u=this.qrRegion.width*o,d=this.qrRegion.height*c,h=this.qrRegion.x*o,p=this.qrRegion.y*c;this.context.drawImage(i,h,p,u,d,0,0,this.qrRegion.width,this.qrRegion.height);var v=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(t,r,n)},s.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(x){!x&&t.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(r,n).finally(function(){v()})):v()}).catch(function(x){s.logger.logError("Error happend while scanning context",x),v()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",s={user:!0,environment:!0},i="exact",o=function(w){if(w in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(w,"'")},c=Object.keys(t);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var u=Object.keys(t)[0];if(u!==r&&u!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(u===r){var d=t.facingMode;if(typeof d=="string"){if(o(d))return{facingMode:d}}else if(typeof d=="object")if(i in d){if(o(d["".concat(i)]))return{facingMode:{exact:d["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var h=typeof d;throw"Invalid type of 'facingMode' = ".concat(h)}}else{var p=t.deviceId;if(typeof p=="string")return{deviceId:p};if(typeof p=="object"){if(i in p)return{deviceId:{exact:p["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var v=typeof p;throw"Invalid type of 'deviceId' = ".concat(v)}}}var x=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(x)},e.prototype.computeCanvasDrawConfig=function(t,r,n,s){if(t<=n&&r<=s){var i=(n-t)/2,o=(s-r)/2;return{x:i,y:o,width:t,height:r}}else{var c=t,u=r;return t>n&&(r=n/t*r,t=n),r>s&&(t=s/r*t,r=s),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(u)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,s)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?ti.BORDER_SHADER_MATCH_COLOR:ti.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var s=t,i=r,o=document.createElement("canvas");return o.style.width="".concat(s,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=gl(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,s){if(!(r-s.width<1||n-s.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(r-s.width)/2,c=(n-s.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(ti.SHADED_REGION_ELEMENT_ID),r-s.width<11||n-s.height<11)this.hasBorderShaders=!1;else{var u=5,d=40;this.insertShaderBorders(i,d,u,-u,null,0,!0),this.insertShaderBorders(i,d,u,-u,null,0,!1),this.insertShaderBorders(i,d,u,null,-u,0,!0),this.insertShaderBorders(i,d,u,null,-u,0,!1),this.insertShaderBorders(i,u,d+u,-u,null,-u,!0),this.insertShaderBorders(i,u,d+u,null,-u,-u,!0),this.insertShaderBorders(i,u,d+u,-u,null,-u,!1),this.insertShaderBorders(i,u,d+u,null,-u,-u,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,r,n,s,i,o,c){var u=document.createElement("div");u.style.position="absolute",u.style.backgroundColor=ti.BORDER_SHADER_DEFAULT_COLOR,u.style.width="".concat(r,"px"),u.style.height="".concat(n,"px"),s!==null&&(u.style.top="".concat(s,"px")),i!==null&&(u.style.bottom="".concat(i,"px")),c?u.style.left="".concat(o,"px"):u.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(u),t.appendChild(u)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),LC;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(LC||(LC={}));const cie=()=>{const[e,t]=P.useState(!1),[r,n]=P.useState(null),[s,i]=P.useState(""),[o,c]=P.useState(!1),[u,d]=P.useState([]),[h,p]=P.useState(null),[v,x]=P.useState(0),[w,j]=P.useState(0),N=P.useRef(null),A="qr-reader",[k,E]=P.useState("scanner"),[_,O]=P.useState([]),[B,F]=P.useState([]),[U,L]=P.useState([]),[K,z]=P.useState(null),[q,Q]=P.useState(!1);P.useEffect(()=>()=>{N.current&&N.current.stop().catch(console.error)},[]);const G=async()=>{try{i(""),t(!0);const ne=new lie(A);N.current=ne,await ne.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},ue,()=>{})}catch{i("❌ Camera access denied. Please allow camera permission."),t(!1)}},H=async()=>{if(N.current)try{await N.current.stop(),N.current=null,t(!1)}catch(ne){console.error("Scanner stop error:",ne)}},ue=async ne=>{await H(),c(!0);try{const ve=await ye(ne);n(ve),d(be=>[ve,...be.slice(0,9)])}catch(ve){i(ve.message||"Failed to process scan")}finally{c(!1)}},ye=async ne=>{var Te,xe,le;if(ne.toUpperCase().includes("RACK")||ne.match(/^R-[A-Z]-\d+$/i)){const ke=(Te=(await Fo.getAll({search:ne})).racks)==null?void 0:Te.find(Ie=>Ie.code.toUpperCase()===ne.toUpperCase());if(ke)return{type:"rack",data:ke,rawCode:ne}}if(ne.includes("-BOX-")){const Ce=ne.split("-BOX-")[0],Ie=(xe=(await _c.getAll({search:Ce})).shipments)==null?void 0:xe.find(We=>We.qrCode&&Ce.includes(We.qrCode));if(Ie){const he=(await(await fetch(`/api/shipments/${Ie.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(Ze=>!Ze.rackId).length;return j(he),{type:"shipment",data:{...Ie,remainingBoxes:he},rawCode:ne}}}const be=(le=(await _c.getAll({search:ne})).shipments)==null?void 0:le.find(Ce=>Ce.referenceId.toUpperCase()===ne.toUpperCase());if(be){const Ie=(await(await fetch(`/api/shipments/${be.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(We=>!We.rackId).length;return j(Ie),{type:"shipment",data:{...be,remainingBoxes:Ie},rawCode:ne}}return{type:"unknown",data:null,rawCode:ne}},de=async()=>{if(!(!h||!r||r.type!=="rack")){if(!v||v<=0){i("Please enter how many boxes to assign");return}if(v>w){i(`Only ${w} boxes remaining!`);return}try{c(!0);const Te=(await(await fetch(`/api/shipments/${h.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(xe=>!xe.rackId).slice(0,v).map(xe=>xe.boxNumber);await fetch(`/api/shipments/${h.id}/assign-boxes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rackId:r.data.id,boxNumbers:Te})}),v===w&&await fetch(`/api/shipments/${h.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({status:"IN_STORAGE"})}),alert(`✅ ${v} boxes assigned to ${r.data.code}!
📊 Rack capacity updated. Check Racks page for current status.`),p(null),n(null),x(0),j(0)}catch(ne){i(ne.message||"Failed to assign")}finally{c(!1)}}},we=()=>{n(null),i(""),p(null)},Ee=async()=>{try{c(!0),console.log("Loading pending shipments...");const ne=localStorage.getItem("authToken"),ve=await fetch("/api/shipments?status=PENDING",{headers:{Authorization:`Bearer ${ne}`,"Content-Type":"application/json"}});if(ve.ok){const be=await ve.json();console.log("Loaded shipments:",be);const Te=be.shipments||be||[],le=(await Promise.all(Te.map(async Ce=>{try{const We=(await(await fetch(`/api/shipments/${Ce.id}/boxes`,{headers:{Authorization:`Bearer ${ne}`}})).json()).boxes.filter(Re=>!Re.rackId).length;return We>0?{...Ce,remainingBoxes:We}:null}catch{return Ce}}))).filter(Ce=>Ce!==null);console.log("Shipments with unassigned boxes:",le),O(le),F(le)}else console.error("Failed to load shipments:",ve.status),i(`Failed to load shipments: ${ve.status}`)}catch(ne){console.error("Error loading shipments:",ne),i("Failed to load shipments")}finally{c(!1)}},ie=async(ne,ve)=>{try{c(!0);const xe=(await(await fetch(`/api/shipments/${ne.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(le=>!le.rackId).length;n({type:"rack",data:ve,rawCode:ve.code}),p({...ne,remainingBoxes:xe}),j(xe),E("scanner"),Q(!1)}catch{i("Failed to load rack/shipment details")}finally{c(!1)}},V=async ne=>{console.log("🎯 Choose Rack clicked for shipment:",ne),console.log("📦 Current racks:",U),z(ne),Q(!0),console.log("✅ Rack selection enabled")},se=async()=>{try{console.log("Loading racks...");const ne=localStorage.getItem("authToken"),ve=await fetch("/api/racks",{headers:{Authorization:`Bearer ${ne}`,"Content-Type":"application/json"}});if(ve.ok){const be=await ve.json();console.log("Loaded racks response:",be);const Te=be.racks||be||[];console.log("Racks array:",Te),L(Array.isArray(Te)?Te:[])}else console.error("Failed to load racks:",ve.status),L([])}catch(ne){console.error("Error loading racks:",ne),L([])}};return P.useEffect(()=>{k==="list"&&(Ee(),se())},[k]),a.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"📱 Warehouse Scanner"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"مسح المستودع | مسح أو بحث يدوي"})]}),a.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-2 shadow-md border-2 border-gray-200",children:[a.jsxs("button",{onClick:()=>E("scanner"),className:`flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all ${k==="scanner"?"bg-primary-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["📸 QR Scanner",a.jsx("br",{}),a.jsx("span",{className:"text-sm font-normal",children:"مسح QR | الكاميرا"})]}),a.jsxs("button",{onClick:()=>E("list"),className:`flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all ${k==="list"?"bg-primary-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["📋 Pending List + Racks",a.jsx("br",{}),a.jsx("span",{className:"text-sm font-normal",children:"قائمة الانتظار | خريطة الرفوف"})]})]}),s&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-6 py-4 rounded-xl flex items-center gap-3",children:[a.jsx(ho,{className:"h-6 w-6 flex-shrink-0"}),a.jsx("span",{className:"flex-1",children:s}),a.jsx("button",{onClick:()=>i(""),className:"text-red-500 hover:text-red-700 text-xl",children:"✕"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[k==="scanner"&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-gray-200 overflow-hidden",children:[e&&a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-primary-600 mb-2",children:"📸 Scanning..."}),a.jsx("p",{className:"text-gray-600",children:"ضع رمز الاستجابة السريعة في الإطار"})]}),a.jsx("div",{id:A,className:"mx-auto"}),a.jsx("button",{onClick:H,className:"w-full py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold",children:"Stop Camera / إيقاف الكاميرا"})]}),!e&&!r&&!o&&a.jsxs("div",{className:"p-12 text-center space-y-6",children:[a.jsx("div",{className:"mx-auto w-64 h-64 border-4 border-dashed border-primary-300 rounded-3xl flex items-center justify-center bg-gradient-to-br from-primary-50 to-blue-50",children:a.jsx(Mo,{className:"h-32 w-32 text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ready to Scan"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"جاهز للمسح"})]}),a.jsxs("button",{onClick:G,className:"inline-flex items-center gap-3 px-10 py-5 bg-primary-600 text-white text-xl font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[a.jsx(H7,{className:"h-7 w-7"}),"Start Camera"]})]}),o&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Processing scan..."})]}),r&&!o&&a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(Sa,{className:"h-12 w-12 text-green-600"})}),a.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:"Scan Successful! ✅"}),a.jsx("p",{className:"text-gray-600 font-mono text-lg",children:r.rawCode})]}),r.type==="rack"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Rl,{className:"h-8 w-8 text-blue-600"}),a.jsx("h4",{className:"text-xl font-bold text-blue-900",children:"Rack Information"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Code:"}),a.jsx("p",{className:"font-bold",children:r.data.code})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Location:"}),a.jsx("p",{className:"font-bold",children:r.data.location})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Section:"}),a.jsx("p",{className:"font-bold",children:r.data.section})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Capacity:"}),a.jsxs("p",{className:"font-bold",children:[r.data.capacityUsed||0," / ",r.data.capacityTotal||0]})]})]}),h&&a.jsxs("div",{className:"mt-6 pt-6 border-t-2 border-blue-300",children:[a.jsxs("p",{className:"text-blue-900 font-semibold mb-4",children:['📦 Assign "',h.referenceId,'" to this rack?']}),a.jsxs("div",{className:"mb-4 bg-white p-4 rounded-lg border-2 border-blue-300",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"How Many Boxes to Assign? 📦"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:"1",max:w,value:v||"",onChange:ne=>x(parseInt(ne.target.value)||0),placeholder:`Max: ${w} boxes`,className:"flex-1 px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("button",{onClick:()=>x(w),className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold whitespace-nowrap",children:"📦 All"})]}),a.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["💡 Remaining: ",w,' boxes | Enter quantity or click "All" button']})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:de,disabled:o||!v,className:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-bold text-lg",children:"✅ Confirm Assignment"}),a.jsx("button",{onClick:()=>{p(null),x(0),j(0)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-bold",children:"Cancel"})]})]})]}),r.type==="shipment"&&a.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Bd,{className:"h-8 w-8 text-purple-600"}),a.jsx("h4",{className:"text-xl font-bold text-purple-900",children:"Shipment Information"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Reference:"}),a.jsx("p",{className:"font-bold",children:r.data.referenceId})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Client:"}),a.jsx("p",{className:"font-bold",children:r.data.clientName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Total Boxes:"}),a.jsx("p",{className:"font-bold",children:r.data.currentBoxCount})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Remaining:"}),a.jsxs("p",{className:"font-bold text-blue-600",children:[r.data.remainingBoxes||0," 📦"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Status:"}),a.jsx("p",{className:"font-bold",children:r.data.status})]})]}),(r.data.status==="PENDING"||r.data.remainingBoxes>0)&&a.jsx("div",{className:"mt-6 pt-6 border-t-2 border-purple-300",children:a.jsxs("button",{onClick:()=>{p(r.data),x(r.data.remainingBoxes||0),n(null),G()},className:"w-full py-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-bold text-lg",children:["📍 Scan Rack to Assign (",r.data.remainingBoxes," boxes left)"]})})]}),r.type==="unknown"&&a.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center",children:[a.jsx(ho,{className:"h-12 w-12 text-yellow-600 mx-auto mb-3"}),a.jsx("p",{className:"text-yellow-900 font-semibold text-lg",children:"QR code not found in system"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:we,className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold",children:"Clear"}),a.jsxs("button",{onClick:()=>{n(null),G()},className:"flex-1 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold flex items-center justify-center gap-2",children:[a.jsx(Jh,{className:"h-5 w-5"}),"Scan Again"]})]})]})]}),!1,k==="list"&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-gray-200",children:[a.jsxs("div",{className:"p-6 border-b-2 border-gray-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"📋 Pending Shipments"}),a.jsx("p",{className:"text-gray-600",children:"الشحنات في انتظار التخزين"})]}),o?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading shipments..."})]}):B.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Bd,{className:"h-24 w-24 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 text-xl font-semibold",children:"No Pending Shipments"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"لا توجد شحنات في الانتظار"}),a.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"Create a new shipment from Dashboard to see it here"})]}):a.jsx("div",{className:"divide-y-2 divide-gray-200",children:B.map(ne=>a.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl font-bold text-primary-600",children:ne.referenceId}),a.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-semibold rounded-full",children:"PENDING"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Client:"}),a.jsx("p",{className:"font-semibold text-gray-900",children:ne.clientName})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Boxes:"}),a.jsxs("p",{className:"font-semibold text-gray-900",children:[ne.totalBoxes||ne.currentBoxCount||0," 📦"]})]})]}),ne.notes&&a.jsxs("p",{className:"text-gray-600 text-sm",children:["📝 ",ne.notes]})]}),a.jsxs("button",{onClick:()=>V(ne),className:"px-8 py-4 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg hover:shadow-xl text-lg whitespace-nowrap",children:["📍 Choose Rack",a.jsx("br",{}),a.jsx("span",{className:"text-sm font-normal",children:"اختر الرف"})]})]}),q&&(K==null?void 0:K.id)===ne.id&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-300 rounded-xl",children:[a.jsx("h4",{className:"text-lg font-bold text-blue-900 mb-3",children:"🗺️ Select Rack | اختر الرف"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:U&&U.length>0?U.map(ve=>a.jsxs("button",{onClick:()=>ie(ne,ve),disabled:ve.status==="FULL",className:`
                                  p-3 rounded-lg font-bold text-xs transition-all text-left
                                  ${ve.status==="AVAILABLE"?"bg-green-500 hover:bg-green-600 text-white":ve.status==="FULL"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-600 text-white"}
                                `,children:[a.jsx("div",{className:"font-bold text-sm",children:ve.code}),a.jsxs("div",{className:"text-xs opacity-90 mt-1",children:["📦 ",ve.capacityUsed||0,"/",ve.capacityTotal||0]})]},ve.id)):a.jsx("p",{className:"col-span-full text-gray-500 text-center py-4",children:"No racks available"})}),a.jsx("button",{onClick:()=>Q(!1),className:"mt-3 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel | إلغاء"})]})]},ne.id))}),a.jsx("div",{className:"p-6 bg-gray-50 border-t-2 border-gray-200 text-center",children:a.jsx("button",{onClick:Ee,disabled:o,className:"px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 disabled:bg-gray-300 transition-colors",children:"🔄 Refresh List | تحديث القائمة"})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(yu,{className:"h-5 w-5"}),"Recent Scans"]}),a.jsx("div",{className:"space-y-2",children:u.length===0?a.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No scans yet"}):u.map((ne,ve)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[ne.type==="rack"?a.jsx(Rl,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}):ne.type==="shipment"?a.jsx(Bd,{className:"h-5 w-5 text-purple-500 flex-shrink-0"}):a.jsx(Mo,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"font-mono text-sm flex-1 truncate",children:ne.rawCode})]},ve))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"💡 Tips"}),a.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[a.jsx("li",{children:"• Scan shipment first"}),a.jsx("li",{children:"• Then scan rack to assign"}),a.jsx("li",{children:"• Keep QR code steady"}),a.jsx("li",{children:"• Good lighting helps"})]})]})]})]})]})},uie=()=>{const[e,t]=P.useState(""),[r,n]=P.useState(""),[s,i]=P.useState(!1),[o,c]=P.useState(!1),[u,d]=P.useState(""),[h,p]=P.useState(!1),[v,x]=P.useState({primaryColor:"#4F46E5",secondaryColor:"#7C3AED",showCompanyName:!0,logoSize:"medium"});P.useEffect(()=>{(async()=>{try{const N=await fetch("/api/company/branding");if(N.ok){const A=await N.json();console.log("✅ Loaded branding:",A.branding),x({name:A.branding.name,logo:A.branding.logoUrl||A.branding.logo,primaryColor:A.branding.primaryColor,secondaryColor:A.branding.secondaryColor,showCompanyName:A.branding.showCompanyName,logoSize:A.branding.logoSize||"medium"})}else console.log("⚠️ Failed to load branding, using defaults")}catch(N){console.log("⚠️ Error loading branding, using defaults:",N)}})()},[]);const w=async j=>{j.preventDefault(),c(!0),d("");try{const N=await Zre.login(e,r);console.log("Login successful:",N.user),console.log("Token saved, navigating to dashboard..."),await new Promise(A=>setTimeout(A,100)),window.location.href="/dashboard"}catch(N){d(N.message||"Invalid email or password"),console.error("Login error:",N),c(!1)}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden transition-colors duration-500",style:{background:`linear-gradient(135deg, ${v.primaryColor}15 0%, ${v.secondaryColor}15 100%)`},children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-0 -left-4 w-72 h-72 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob",style:{backgroundColor:`${v.primaryColor}30`}}),a.jsx("div",{className:"absolute top-0 -right-4 w-72 h-72 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000",style:{backgroundColor:`${v.secondaryColor}30`}}),a.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000",style:{backgroundColor:`${v.primaryColor}20`}})]}),a.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[a.jsxs("div",{className:"text-center animate-fade-in-down",children:[v.logo?a.jsx("div",{className:`mx-auto mb-4 flex items-center justify-center ${v.logoSize==="small"?"h-12":v.logoSize==="large"?"h-32":"h-20"}`,children:a.jsx("img",{src:v.logo,alt:"Company Logo",className:`object-contain ${v.logoSize==="small"?"max-h-12":v.logoSize==="large"?"max-h-32":"max-h-20"}`})}):a.jsx("div",{className:"mx-auto h-16 w-16 rounded-xl flex items-center justify-center mb-4 shadow-lg transition-all duration-300",style:{background:`linear-gradient(135deg, ${v.primaryColor} 0%, ${v.secondaryColor} 100%)`},children:a.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:v.showCompanyName&&v.name?v.name:"Warehouse Management"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your account"})]}),a.jsxs("form",{className:"mt-8 space-y-6 bg-white/80 backdrop-blur-xl p-8 rounded-2xl shadow-2xl border border-white/20 animate-fade-in-up",onSubmit:w,children:[u&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg animate-shake",children:u}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(b1,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:j=>t(j.target.value),className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@example.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(jF,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:j=>n(j.target.value),className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"••••••••"}),a.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:h?a.jsx(gF,{className:"h-5 w-5"}):a.jsx(j0,{className:"h-5 w-5"})})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:s,onChange:j=>i(j.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot password?"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",style:{background:o?`linear-gradient(135deg, ${v.primaryColor} 0%, ${v.secondaryColor} 100%)`:`linear-gradient(135deg, ${v.primaryColor} 0%, ${v.secondaryColor} 100%)`,opacity:o?.7:1},children:o?"Signing in...":"Sign in"})}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Contact your administrator"})]})})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-yellow-800 font-medium mb-1",children:"Demo Credentials:"}),a.jsx("p",{className:"text-xs text-yellow-700",children:"Email: admin@warehouse.com"}),a.jsx("p",{className:"text-xs text-yellow-700",children:"Password: admin123"})]})]})]})},die=()=>{const e=N0(),[t,r]=P.useState([]),[n,s]=P.useState(!0),[i,o]=P.useState(""),[c,u]=P.useState("all"),[d,h]=P.useState("all"),[p,v]=P.useState({total:0,totalAmount:0,paid:0,outstanding:0});P.useEffect(()=>{x()},[c,d,i]);const x=async()=>{try{s(!0);const N={};c!=="all"&&(N.status=c.toUpperCase()),d==="regular"?N.isWarehouseInvoice=!1:d==="warehouse"&&(N.isWarehouseInvoice=!0),i&&(N.search=i);const A=await Uo.getInvoices(N),k=Array.isArray(A)?A:A.invoices||[];r(k),w(k)}catch(N){console.error("Load invoices error:",N)}finally{s(!1)}},w=N=>{const A=N.length,k=N.reduce((O,B)=>O+parseFloat(B.totalAmount||0),0),E=N.filter(O=>(O.paymentStatus||O.status)==="PAID").length,_=N.filter(O=>(O.paymentStatus||O.status)!=="PAID").reduce((O,B)=>O+parseFloat(B.totalAmount||0)-parseFloat(B.paidAmount||0),0);v({total:A,totalAmount:k,paid:E,outstanding:_})},j=N=>{const A={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",PAID:"bg-green-100 text-green-800 border-green-300",PARTIAL:"bg-blue-100 text-blue-800 border-blue-300",OVERDUE:"bg-red-100 text-red-800 border-red-300",CANCELLED:"bg-gray-100 text-gray-800 border-gray-300"},k={PENDING:a.jsx(yu,{className:"h-4 w-4"}),PAID:a.jsx(Sa,{className:"h-4 w-4"}),PARTIAL:a.jsx(Lo,{className:"h-4 w-4"}),OVERDUE:a.jsx(ho,{className:"h-4 w-4"}),CANCELLED:a.jsx(ho,{className:"h-4 w-4"})};return a.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${A[N]||A.PENDING}`,children:[k[N],N]})};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoices"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage billing and payment tracking"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Invoices"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.total})]}),a.jsx(_s,{className:"h-10 w-10 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.totalAmount.toFixed(3)}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"KWD"})]}),a.jsx(Lo,{className:"h-10 w-10 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Paid"}),a.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:p.paid}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Invoices"})]}),a.jsx(Sa,{className:"h-10 w-10 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Outstanding"}),a.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:p.outstanding.toFixed(3)}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"KWD"})]}),a.jsx(yu,{className:"h-10 w-10 text-red-500"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(w1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by invoice number, client name...",value:i,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(t0,{className:"h-5 w-5 text-gray-400"}),a.jsxs("select",{value:c,onChange:N=>u(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"partial",children:"Partial"}),a.jsx("option",{value:"overdue",children:"Overdue"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pv,{className:"h-5 w-5 text-gray-400"}),a.jsxs("select",{value:d,onChange:N=>h(N.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"regular",children:"Regular Invoices"}),a.jsx("option",{value:"warehouse",children:"Warehouse Invoices"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shipment"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?a.jsx("tr",{children:a.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading invoices..."})]})}):t.length>0?t.map(N=>{var k;const A=parseFloat(N.totalAmount)-parseFloat(N.paidAmount||0);return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(_s,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-primary-600",children:N.invoiceNumber})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(N.invoiceDate).toLocaleDateString()}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.clientName}),a.jsx("div",{className:"text-xs text-gray-500",children:N.clientPhone})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:((k=N.shipment)==null?void 0:k.referenceId)||"N/A"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[parseFloat(N.totalAmount).toFixed(3)," KWD"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:[parseFloat(N.paidAmount||0).toFixed(3)," KWD"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:a.jsxs("span",{className:A>0?"text-red-600":"text-green-600",children:[A.toFixed(3)," KWD"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j(N.paymentStatus||N.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("button",{onClick:()=>e(`/invoices/${N.id}`),className:"text-primary-600 hover:text-primary-900",children:"View Details →"})})]},N.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:"No invoices found"})})})]})})})]})},fie=({isOpen:e,onClose:t,invoice:r,onSuccess:n})=>{const s=parseFloat(r.totalAmount)-parseFloat(r.paidAmount||0),[i,o]=P.useState({amount:s.toFixed(3),paymentMethod:"CASH",transactionReference:"",receiptNumber:"",paymentDate:new Date().toISOString().split("T")[0],notes:""}),[c,u]=P.useState(!1),[d,h]=P.useState(""),p=async x=>{x.preventDefault();const w=parseFloat(i.amount);if(isNaN(w)||w<=0){h("Please enter a valid amount");return}if(w>s){h(`Amount cannot exceed balance due (${s.toFixed(3)} KWD)`);return}try{u(!0),h(""),await Uo.recordPayment(r.id,{...i,amount:parseFloat(i.amount)});const j=parseFloat(i.amount),N=s-j;alert(`✅ PAYMENT RECORDED!

💰 Amount: ${j.toFixed(3)} KWD
📄 Method: ${i.paymentMethod}
📋 Invoice: ${r.invoiceNumber}

${N<=0?"✅ Invoice FULLY PAID!":`⚠️ Remaining Balance: ${N.toFixed(3)} KWD`}`),n(),t()}catch(j){h(j.message||"Failed to record payment")}finally{u(!1)}},v=s-parseFloat(i.amount||"0");return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record Payment"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Invoice: ",r.invoiceNumber]})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx($c,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6 bg-blue-50 border-b",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance Due"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[s.toFixed(3)," KWD"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"New Balance (After Payment)"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[v>=0?v.toFixed(3):"0.000"," KWD"]})]})]})}),a.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[d&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Amount ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",step:"0.001",value:i.amount,onChange:x=>o({...i,amount:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.000",required:!0,max:s,min:"0.001"}),a.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"KWD"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",s.toFixed(3)," KWD"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Method ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:i.paymentMethod,onChange:x=>o({...i,paymentMethod:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"CASH",children:"Cash"}),a.jsx("option",{value:"CARD",children:"Card"}),a.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),a.jsx("option",{value:"CHEQUE",children:"Cheque"}),a.jsx("option",{value:"OTHER",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Reference"}),a.jsx("input",{type:"text",value:i.transactionReference,onChange:x=>o({...i,transactionReference:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Bank ref, card last 4 digits, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),a.jsx("input",{type:"text",value:i.receiptNumber,onChange:x=>o({...i,receiptNumber:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"RCP-001"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:i.paymentDate,onChange:x=>o({...i,paymentDate:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),a.jsx("textarea",{value:i.notes,onChange:x=>o({...i,notes:x.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Additional payment details..."})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Payment Summary"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Invoice Total"}),a.jsxs("span",{className:"font-medium",children:[parseFloat(r.totalAmount).toFixed(3)," KWD"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Already Paid"}),a.jsxs("span",{className:"font-medium",children:[parseFloat(r.paidAmount||0).toFixed(3)," KWD"]})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[a.jsx("span",{className:"text-gray-600",children:"Current Payment"}),a.jsxs("span",{className:"font-bold text-green-600",children:[parseFloat(i.amount||"0").toFixed(3)," KWD"]})]}),a.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[a.jsx("span",{className:"text-gray-900 font-semibold",children:"Remaining Balance"}),a.jsxs("span",{className:"font-bold text-red-600",children:[v>=0?v.toFixed(3):"0.000"," KWD"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",disabled:c,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Recording...":"Record Payment"})]})]})]})}):null},hie="modulepreload",mie=function(e){return"/"+e},MC={},ny=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=mie(u),u in MC)return;MC[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":hie,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((v,x)=>{p.addEventListener("load",v),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};function Mr(e){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(e)}var po=Uint8Array,ii=Uint16Array,b3=Int32Array,w3=new po([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),N3=new po([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),BC=new po([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qO=function(e,t){for(var r=new ii(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new b3(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},HO=qO(w3,2),pie=HO.b,Fb=HO.r;pie[28]=258,Fb[258]=28;var gie=qO(N3,0),FC=gie.r,Ub=new ii(32768);for(var cn=0;cn<32768;++cn){var oc=(cn&43690)>>1|(cn&21845)<<1;oc=(oc&52428)>>2|(oc&13107)<<2,oc=(oc&61680)>>4|(oc&3855)<<4,Ub[cn]=((oc&65280)>>8|(oc&255)<<8)>>1}var Ih=function(e,t,r){for(var n=e.length,s=0,i=new ii(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new ii(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var c;if(r){c=new ii(1<<t);var u=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],h=t-e[s],p=o[e[s]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)c[Ub[p]>>u]=d}else for(c=new ii(n),s=0;s<n;++s)e[s]&&(c[s]=Ub[o[e[s]-1]++]>>15-e[s]);return c},qu=new po(288);for(var cn=0;cn<144;++cn)qu[cn]=8;for(var cn=144;cn<256;++cn)qu[cn]=9;for(var cn=256;cn<280;++cn)qu[cn]=7;for(var cn=280;cn<288;++cn)qu[cn]=8;var Yg=new po(32);for(var cn=0;cn<32;++cn)Yg[cn]=5;var xie=Ih(qu,9,0),yie=Ih(Yg,5,0),VO=function(e){return(e+7)/8|0},vie=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new po(e.subarray(t,r))},ml=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},lh=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},ay=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:KO,l:0};if(s==1){var o=new po(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(O,B){return O.f-B.f}),r.push({s:-1,f:25001});var c=r[0],u=r[1],d=0,h=1,p=2;for(r[0]={s:-1,f:c.f+u.f,l:c,r:u};h!=s-1;)c=r[r[d].f<r[p].f?d++:p++],u=r[d!=h&&r[d].f<r[p].f?d++:p++],r[h++]={s:-1,f:c.f+u.f,l:c,r:u};for(var v=i[0].s,n=1;n<s;++n)i[n].s>v&&(v=i[n].s);var x=new ii(v+1),w=zb(r[h-1],x,0);if(w>t){var n=0,j=0,N=w-t,A=1<<N;for(i.sort(function(B,F){return x[F.s]-x[B.s]||B.f-F.f});n<s;++n){var k=i[n].s;if(x[k]>t)j+=A-(1<<w-x[k]),x[k]=t;else break}for(j>>=N;j>0;){var E=i[n].s;x[E]<t?j-=1<<t-x[E]++-1:++n}for(;n>=0&&j;--n){var _=i[n].s;x[_]==t&&(--x[_],++j)}w=t}return{t:new po(x),l:w}},zb=function(e,t,r){return e.s==-1?Math.max(zb(e.l,t,r+1),zb(e.r,t,r+1)):t[e.s]=r},UC=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ii(++t),n=0,s=e[0],i=1,o=function(u){r[n++]=u},c=1;c<=t;++c)if(e[c]==s&&c!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[c]}return{c:r.subarray(0,n),n:t}},ch=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},GO=function(e,t,r){var n=r.length,s=VO(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},zC=function(e,t,r,n,s,i,o,c,u,d,h){ml(t,h++,r),++s[256];for(var p=ay(s,15),v=p.t,x=p.l,w=ay(i,15),j=w.t,N=w.l,A=UC(v),k=A.c,E=A.n,_=UC(j),O=_.c,B=_.n,F=new ii(19),U=0;U<k.length;++U)++F[k[U]&31];for(var U=0;U<O.length;++U)++F[O[U]&31];for(var L=ay(F,7),K=L.t,z=L.l,q=19;q>4&&!K[BC[q-1]];--q);var Q=d+5<<3,G=ch(s,qu)+ch(i,Yg)+o,H=ch(s,v)+ch(i,j)+o+14+3*q+ch(F,K)+2*F[16]+3*F[17]+7*F[18];if(u>=0&&Q<=G&&Q<=H)return GO(t,h,e.subarray(u,u+d));var ue,ye,de,we;if(ml(t,h,1+(H<G)),h+=2,H<G){ue=Ih(v,x,0),ye=v,de=Ih(j,N,0),we=j;var Ee=Ih(K,z,0);ml(t,h,E-257),ml(t,h+5,B-1),ml(t,h+10,q-4),h+=14;for(var U=0;U<q;++U)ml(t,h+3*U,K[BC[U]]);h+=3*q;for(var ie=[k,O],V=0;V<2;++V)for(var se=ie[V],U=0;U<se.length;++U){var ne=se[U]&31;ml(t,h,Ee[ne]),h+=K[ne],ne>15&&(ml(t,h,se[U]>>5&127),h+=se[U]>>12)}}else ue=xie,ye=qu,de=yie,we=Yg;for(var U=0;U<c;++U){var ve=n[U];if(ve>255){var ne=ve>>18&31;lh(t,h,ue[ne+257]),h+=ye[ne+257],ne>7&&(ml(t,h,ve>>23&31),h+=w3[ne]);var be=ve&31;lh(t,h,de[be]),h+=we[be],be>3&&(lh(t,h,ve>>5&8191),h+=N3[be])}else lh(t,h,ue[ve]),h+=ye[ve]}return lh(t,h,ue[256]),h+ye[256]},bie=new b3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),KO=new po(0),wie=function(e,t,r,n,s,i){var o=i.z||e.length,c=new po(n+o+5*(1+Math.ceil(o/7e3))+s),u=c.subarray(n,c.length-s),d=i.l,h=(i.r||0)&7;if(t){h&&(u[0]=i.r>>3);for(var p=bie[t-1],v=p>>13,x=p&8191,w=(1<<r)-1,j=i.p||new ii(32768),N=i.h||new ii(w+1),A=Math.ceil(r/3),k=2*A,E=function(Re){return(e[Re]^e[Re+1]<<A^e[Re+2]<<k)&w},_=new b3(25e3),O=new ii(288),B=new ii(32),F=0,U=0,L=i.i||0,K=0,z=i.w||0,q=0;L+2<o;++L){var Q=E(L),G=L&32767,H=N[Q];if(j[G]=H,N[Q]=G,z<=L){var ue=o-L;if((F>7e3||K>24576)&&(ue>423||!d)){h=zC(e,u,0,_,O,B,U,K,q,L-q,h),K=F=U=0,q=L;for(var ye=0;ye<286;++ye)O[ye]=0;for(var ye=0;ye<30;++ye)B[ye]=0}var de=2,we=0,Ee=x,ie=G-H&32767;if(ue>2&&Q==E(L-ie))for(var V=Math.min(v,ue)-1,se=Math.min(32767,L),ne=Math.min(258,ue);ie<=se&&--Ee&&G!=H;){if(e[L+de]==e[L+de-ie]){for(var ve=0;ve<ne&&e[L+ve]==e[L+ve-ie];++ve);if(ve>de){if(de=ve,we=ie,ve>V)break;for(var be=Math.min(ie,ve-2),Te=0,ye=0;ye<be;++ye){var xe=L-ie+ye&32767,le=j[xe],Ce=xe-le&32767;Ce>Te&&(Te=Ce,H=xe)}}}G=H,H=j[G],ie+=G-H&32767}if(we){_[K++]=268435456|Fb[de]<<18|FC[we];var ke=Fb[de]&31,Ie=FC[we]&31;U+=w3[ke]+N3[Ie],++O[257+ke],++B[Ie],z=L+de,++F}else _[K++]=e[L],++O[e[L]]}}for(L=Math.max(L,z);L<o;++L)_[K++]=e[L],++O[e[L]];h=zC(e,u,d,_,O,B,U,K,q,L-q,h),d||(i.r=h&7|u[h/8|0]<<3,h-=7,i.h=N,i.p=j,i.i=L,i.w=z)}else{for(var L=i.w||0;L<o+d;L+=65535){var We=L+65535;We>=o&&(u[h/8|0]=d,We=o),h=GO(u,h+1,e.subarray(L,We))}i.i=o}return vie(c,0,n+VO(h)+s)},XO=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var c=Math.min(o+2655,i);o<c;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Nie=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new po(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return wie(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},YO=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},jie=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=XO();s.p(t.dictionary),YO(e,2,s.d())}};function $b(e,t){t||(t={});var r=XO();r.p(e);var n=Nie(e,t,t.dictionary?6:2,4);return jie(n,t),YO(n,n.length-4,r.d()),n}var Aie=typeof TextDecoder<"u"&&new TextDecoder,Cie=0;try{Aie.decode(KO,{stream:!0}),Cie=1}catch{}function Sie(e){if(Array.isArray(e))return e}function Eie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,c=[],u=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(h){d=!0,s=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}}function $C(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kie(e,t){if(e){if(typeof e=="string")return $C(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$C(e,t):void 0}}function Pie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WC(e,t){return Sie(e)||Eie(e,t)||kie(e,t)||Pie()}function qC(e,t="utf8"){return new TextDecoder(t).decode(e)}const Iie=new TextEncoder;function Tie(e){return Iie.encode(e)}const _ie=1024*8,Oie=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),sy={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class j3{constructor(t=_ie,r={}){Ir(this,"buffer");Ir(this,"byteLength");Ir(this,"byteOffset");Ir(this,"length");Ir(this,"offset");Ir(this,"lastWrittenByte");Ir(this,"littleEndian");Ir(this,"_data");Ir(this,"_mark");Ir(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const s=r.offset?r.offset>>>0:0,i=t.byteLength-s;let o=s;(ArrayBuffer.isView(t)||t instanceof j3)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+s),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=sy[r].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===Oie&&r!=="uint8"&&r!=="int8"){const c=new Uint8Array(this.buffer.slice(s,s+n));c.reverse();const u=new sy[r](c.buffer);return this.offset+=n,u.reverse(),u}const o=new sy[r](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return qC(this.readBytes(t))}decodeText(t=1,r="utf8"){return qC(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Tie(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Df(e){let t=e.length;for(;--t>=0;)e[t]=0}const Rie=3,Die=258,ZO=29,Lie=256,Mie=Lie+1+ZO,JO=30,Bie=512,Fie=new Array((Mie+2)*2);Df(Fie);const Uie=new Array(JO*2);Df(Uie);const zie=new Array(Bie);Df(zie);const $ie=new Array(Die-Rie+1);Df($ie);const Wie=new Array(ZO);Df(Wie);const qie=new Array(JO);Df(qie);const Hie=(e,t,r,n)=>{let s=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+t[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var Wb=Hie;const Vie=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Gie=new Uint32Array(Vie()),Kie=(e,t,r,n)=>{const s=Gie,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1};var Eo=Kie,qb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},QO={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Xie=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Yie=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Xie(r,n)&&(e[n]=r[n])}}return e},Zie=e=>{let t=0;for(let n=0,s=e.length;n<s;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,s=0,i=e.length;n<i;n++){let o=e[n];r.set(o,s),s+=o.length}return r},eR={assign:Yie,flattenChunks:Zie};let tR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tR=!1}const p0=new Uint8Array(256);for(let e=0;e<256;e++)p0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;p0[254]=p0[254]=1;var Jie=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,s,i,o=e.length,c=0;for(s=0;s<o;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(c),i=0,s=0;i<c;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const Qie=(e,t)=>{if(t<65534&&e.subarray&&tR)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var eoe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let o=e[n++];if(o<128){i[s++]=o;continue}let c=p0[o];if(c>4){i[s++]=65533,n+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&n<r;)o=o<<6|e[n++]&63,c--;if(c>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return Qie(i,s)},toe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+p0[e[r]]>t?r:t},Hb={string2buf:Jie,buf2string:eoe,utf8border:toe};function roe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var noe=roe;const Gm=16209,aoe=16191;var soe=function(t,r){let n,s,i,o,c,u,d,h,p,v,x,w,j,N,A,k,E,_,O,B,F,U,L,K;const z=t.state;n=t.next_in,L=t.input,s=n+(t.avail_in-5),i=t.next_out,K=t.output,o=i-(r-t.avail_out),c=i+(t.avail_out-257),u=z.dmax,d=z.wsize,h=z.whave,p=z.wnext,v=z.window,x=z.hold,w=z.bits,j=z.lencode,N=z.distcode,A=(1<<z.lenbits)-1,k=(1<<z.distbits)-1;e:do{w<15&&(x+=L[n++]<<w,w+=8,x+=L[n++]<<w,w+=8),E=j[x&A];t:for(;;){if(_=E>>>24,x>>>=_,w-=_,_=E>>>16&255,_===0)K[i++]=E&65535;else if(_&16){O=E&65535,_&=15,_&&(w<_&&(x+=L[n++]<<w,w+=8),O+=x&(1<<_)-1,x>>>=_,w-=_),w<15&&(x+=L[n++]<<w,w+=8,x+=L[n++]<<w,w+=8),E=N[x&k];r:for(;;){if(_=E>>>24,x>>>=_,w-=_,_=E>>>16&255,_&16){if(B=E&65535,_&=15,w<_&&(x+=L[n++]<<w,w+=8,w<_&&(x+=L[n++]<<w,w+=8)),B+=x&(1<<_)-1,B>u){t.msg="invalid distance too far back",z.mode=Gm;break e}if(x>>>=_,w-=_,_=i-o,B>_){if(_=B-_,_>h&&z.sane){t.msg="invalid distance too far back",z.mode=Gm;break e}if(F=0,U=v,p===0){if(F+=d-_,_<O){O-=_;do K[i++]=v[F++];while(--_);F=i-B,U=K}}else if(p<_){if(F+=d+p-_,_-=p,_<O){O-=_;do K[i++]=v[F++];while(--_);if(F=0,p<O){_=p,O-=_;do K[i++]=v[F++];while(--_);F=i-B,U=K}}}else if(F+=p-_,_<O){O-=_;do K[i++]=v[F++];while(--_);F=i-B,U=K}for(;O>2;)K[i++]=U[F++],K[i++]=U[F++],K[i++]=U[F++],O-=3;O&&(K[i++]=U[F++],O>1&&(K[i++]=U[F++]))}else{F=i-B;do K[i++]=K[F++],K[i++]=K[F++],K[i++]=K[F++],O-=3;while(O>2);O&&(K[i++]=K[F++],O>1&&(K[i++]=K[F++]))}}else if(_&64){t.msg="invalid distance code",z.mode=Gm;break e}else{E=N[(E&65535)+(x&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){z.mode=aoe;break e}else{t.msg="invalid literal/length code",z.mode=Gm;break e}else{E=j[(E&65535)+(x&(1<<_)-1)];continue t}break}}while(n<s&&i<c);O=w>>3,n-=O,w-=O<<3,x&=(1<<w)-1,t.next_in=n,t.next_out=i,t.avail_in=n<s?5+(s-n):5-(n-s),t.avail_out=i<c?257+(c-i):257-(i-c),z.hold=x,z.bits=w};const cd=15,HC=852,VC=592,GC=0,iy=1,KC=2,ioe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ooe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),loe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),coe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uoe=(e,t,r,n,s,i,o,c)=>{const u=c.bits;let d=0,h=0,p=0,v=0,x=0,w=0,j=0,N=0,A=0,k=0,E,_,O,B,F,U=null,L;const K=new Uint16Array(cd+1),z=new Uint16Array(cd+1);let q=null,Q,G,H;for(d=0;d<=cd;d++)K[d]=0;for(h=0;h<n;h++)K[t[r+h]]++;for(x=u,v=cd;v>=1&&K[v]===0;v--);if(x>v&&(x=v),v===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,c.bits=1,0;for(p=1;p<v&&K[p]===0;p++);for(x<p&&(x=p),N=1,d=1;d<=cd;d++)if(N<<=1,N-=K[d],N<0)return-1;if(N>0&&(e===GC||v!==1))return-1;for(z[1]=0,d=1;d<cd;d++)z[d+1]=z[d]+K[d];for(h=0;h<n;h++)t[r+h]!==0&&(o[z[t[r+h]]++]=h);if(e===GC?(U=q=o,L=20):e===iy?(U=ioe,q=ooe,L=257):(U=loe,q=coe,L=0),k=0,h=0,d=p,F=i,w=x,j=0,O=-1,A=1<<x,B=A-1,e===iy&&A>HC||e===KC&&A>VC)return 1;for(;;){Q=d-j,o[h]+1<L?(G=0,H=o[h]):o[h]>=L?(G=q[o[h]-L],H=U[o[h]-L]):(G=96,H=0),E=1<<d-j,_=1<<w,p=_;do _-=E,s[F+(k>>j)+_]=Q<<24|G<<16|H|0;while(_!==0);for(E=1<<d-1;k&E;)E>>=1;if(E!==0?(k&=E-1,k+=E):k=0,h++,--K[d]===0){if(d===v)break;d=t[r+o[h]]}if(d>x&&(k&B)!==O){for(j===0&&(j=x),F+=p,w=d-j,N=1<<w;w+j<v&&(N-=K[w+j],!(N<=0));)w++,N<<=1;if(A+=1<<w,e===iy&&A>HC||e===KC&&A>VC)return 1;O=k&B,s[O]=x<<24|w<<16|F-i|0}}return k!==0&&(s[F+k]=d-j<<24|64<<16|0),c.bits=x,0};var Th=uoe;const doe=0,rR=1,nR=2,{Z_FINISH:XC,Z_BLOCK:foe,Z_TREES:Km,Z_OK:Hu,Z_STREAM_END:hoe,Z_NEED_DICT:moe,Z_STREAM_ERROR:$i,Z_DATA_ERROR:aR,Z_MEM_ERROR:sR,Z_BUF_ERROR:poe,Z_DEFLATED:YC}=QO,Px=16180,ZC=16181,JC=16182,QC=16183,eS=16184,tS=16185,rS=16186,nS=16187,aS=16188,sS=16189,Zg=16190,pl=16191,oy=16192,iS=16193,ly=16194,oS=16195,lS=16196,cS=16197,uS=16198,Xm=16199,Ym=16200,dS=16201,fS=16202,hS=16203,mS=16204,pS=16205,cy=16206,gS=16207,xS=16208,mn=16209,iR=16210,oR=16211,goe=852,xoe=592,yoe=15,voe=yoe,yS=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function boe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ed=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Px||t.mode>oR?1:0},lR=e=>{if(ed(e))return $i;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Px,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(goe),t.distcode=t.distdyn=new Int32Array(xoe),t.sane=1,t.back=-1,Hu},cR=e=>{if(ed(e))return $i;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,lR(e)},uR=(e,t)=>{let r;if(ed(e))return $i;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?$i:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,cR(e))},dR=(e,t)=>{if(!e)return $i;const r=new boe;e.state=r,r.strm=e,r.window=null,r.mode=Px;const n=uR(e,t);return n!==Hu&&(e.state=null),n},woe=e=>dR(e,voe);let vS=!0,uy,dy;const Noe=e=>{if(vS){uy=new Int32Array(512),dy=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Th(rR,e.lens,0,288,uy,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Th(nR,e.lens,0,32,dy,0,e.work,{bits:5}),vS=!1}e.lencode=uy,e.lenbits=9,e.distcode=dy,e.distbits=5},fR=(e,t,r,n)=>{let s;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(t.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},joe=(e,t)=>{let r,n,s,i,o,c,u,d,h,p,v,x,w,j,N=0,A,k,E,_,O,B,F,U;const L=new Uint8Array(4);let K,z;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ed(e)||!e.output||!e.input&&e.avail_in!==0)return $i;r=e.state,r.mode===pl&&(r.mode=oy),o=e.next_out,s=e.output,u=e.avail_out,i=e.next_in,n=e.input,c=e.avail_in,d=r.hold,h=r.bits,p=c,v=u,U=Hu;e:for(;;)switch(r.mode){case Px:if(r.wrap===0){r.mode=oy;break}for(;h<16;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,L[0]=d&255,L[1]=d>>>8&255,r.check=Eo(r.check,L,2,0),d=0,h=0,r.mode=ZC;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=mn;break}if((d&15)!==YC){e.msg="unknown compression method",r.mode=mn;break}if(d>>>=4,h-=4,F=(d&15)+8,r.wbits===0&&(r.wbits=F),F>15||F>r.wbits){e.msg="invalid window size",r.mode=mn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?sS:pl,d=0,h=0;break;case ZC:for(;h<16;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(r.flags=d,(r.flags&255)!==YC){e.msg="unknown compression method",r.mode=mn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=mn;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,r.check=Eo(r.check,L,2,0)),d=0,h=0,r.mode=JC;case JC:for(;h<32;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,L[2]=d>>>16&255,L[3]=d>>>24&255,r.check=Eo(r.check,L,4,0)),d=0,h=0,r.mode=QC;case QC:for(;h<16;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,r.check=Eo(r.check,L,2,0)),d=0,h=0,r.mode=eS;case eS:if(r.flags&1024){for(;h<16;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(L[0]=d&255,L[1]=d>>>8&255,r.check=Eo(r.check,L,2,0)),d=0,h=0}else r.head&&(r.head.extra=null);r.mode=tS;case tS:if(r.flags&1024&&(x=r.length,x>c&&(x=c),x&&(r.head&&(F=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+x),F)),r.flags&512&&r.wrap&4&&(r.check=Eo(r.check,n,x,i)),c-=x,i+=x,r.length-=x),r.length))break e;r.length=0,r.mode=rS;case rS:if(r.flags&2048){if(c===0)break e;x=0;do F=n[i+x++],r.head&&F&&r.length<65536&&(r.head.name+=String.fromCharCode(F));while(F&&x<c);if(r.flags&512&&r.wrap&4&&(r.check=Eo(r.check,n,x,i)),c-=x,i+=x,F)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=nS;case nS:if(r.flags&4096){if(c===0)break e;x=0;do F=n[i+x++],r.head&&F&&r.length<65536&&(r.head.comment+=String.fromCharCode(F));while(F&&x<c);if(r.flags&512&&r.wrap&4&&(r.check=Eo(r.check,n,x,i)),c-=x,i+=x,F)break e}else r.head&&(r.head.comment=null);r.mode=aS;case aS:if(r.flags&512){for(;h<16;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=mn;break}d=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=pl;break;case sS:for(;h<32;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}e.adler=r.check=yS(d),d=0,h=0,r.mode=Zg;case Zg:if(r.havedict===0)return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=c,r.hold=d,r.bits=h,moe;e.adler=r.check=1,r.mode=pl;case pl:if(t===foe||t===Km)break e;case oy:if(r.last){d>>>=h&7,h-=h&7,r.mode=cy;break}for(;h<3;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}switch(r.last=d&1,d>>>=1,h-=1,d&3){case 0:r.mode=iS;break;case 1:if(Noe(r),r.mode=Xm,t===Km){d>>>=2,h-=2;break e}break;case 2:r.mode=lS;break;case 3:e.msg="invalid block type",r.mode=mn}d>>>=2,h-=2;break;case iS:for(d>>>=h&7,h-=h&7;h<32;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=mn;break}if(r.length=d&65535,d=0,h=0,r.mode=ly,t===Km)break e;case ly:r.mode=oS;case oS:if(x=r.length,x){if(x>c&&(x=c),x>u&&(x=u),x===0)break e;s.set(n.subarray(i,i+x),o),c-=x,i+=x,u-=x,o+=x,r.length-=x;break}r.mode=pl;break;case lS:for(;h<14;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(r.nlen=(d&31)+257,d>>>=5,h-=5,r.ndist=(d&31)+1,d>>>=5,h-=5,r.ncode=(d&15)+4,d>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=mn;break}r.have=0,r.mode=cS;case cS:for(;r.have<r.ncode;){for(;h<3;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}r.lens[q[r.have++]]=d&7,d>>>=3,h-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,K={bits:r.lenbits},U=Th(doe,r.lens,0,19,r.lencode,0,r.work,K),r.lenbits=K.bits,U){e.msg="invalid code lengths set",r.mode=mn;break}r.have=0,r.mode=uS;case uS:for(;r.have<r.nlen+r.ndist;){for(;N=r.lencode[d&(1<<r.lenbits)-1],A=N>>>24,k=N>>>16&255,E=N&65535,!(A<=h);){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(E<16)d>>>=A,h-=A,r.lens[r.have++]=E;else{if(E===16){for(z=A+2;h<z;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(d>>>=A,h-=A,r.have===0){e.msg="invalid bit length repeat",r.mode=mn;break}F=r.lens[r.have-1],x=3+(d&3),d>>>=2,h-=2}else if(E===17){for(z=A+3;h<z;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}d>>>=A,h-=A,F=0,x=3+(d&7),d>>>=3,h-=3}else{for(z=A+7;h<z;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}d>>>=A,h-=A,F=0,x=11+(d&127),d>>>=7,h-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=mn;break}for(;x--;)r.lens[r.have++]=F}}if(r.mode===mn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=mn;break}if(r.lenbits=9,K={bits:r.lenbits},U=Th(rR,r.lens,0,r.nlen,r.lencode,0,r.work,K),r.lenbits=K.bits,U){e.msg="invalid literal/lengths set",r.mode=mn;break}if(r.distbits=6,r.distcode=r.distdyn,K={bits:r.distbits},U=Th(nR,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,K),r.distbits=K.bits,U){e.msg="invalid distances set",r.mode=mn;break}if(r.mode=Xm,t===Km)break e;case Xm:r.mode=Ym;case Ym:if(c>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=c,r.hold=d,r.bits=h,soe(e,v),o=e.next_out,s=e.output,u=e.avail_out,i=e.next_in,n=e.input,c=e.avail_in,d=r.hold,h=r.bits,r.mode===pl&&(r.back=-1);break}for(r.back=0;N=r.lencode[d&(1<<r.lenbits)-1],A=N>>>24,k=N>>>16&255,E=N&65535,!(A<=h);){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(k&&!(k&240)){for(_=A,O=k,B=E;N=r.lencode[B+((d&(1<<_+O)-1)>>_)],A=N>>>24,k=N>>>16&255,E=N&65535,!(_+A<=h);){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}d>>>=_,h-=_,r.back+=_}if(d>>>=A,h-=A,r.back+=A,r.length=E,k===0){r.mode=pS;break}if(k&32){r.back=-1,r.mode=pl;break}if(k&64){e.msg="invalid literal/length code",r.mode=mn;break}r.extra=k&15,r.mode=dS;case dS:if(r.extra){for(z=r.extra;h<z;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=fS;case fS:for(;N=r.distcode[d&(1<<r.distbits)-1],A=N>>>24,k=N>>>16&255,E=N&65535,!(A<=h);){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(!(k&240)){for(_=A,O=k,B=E;N=r.distcode[B+((d&(1<<_+O)-1)>>_)],A=N>>>24,k=N>>>16&255,E=N&65535,!(_+A<=h);){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}d>>>=_,h-=_,r.back+=_}if(d>>>=A,h-=A,r.back+=A,k&64){e.msg="invalid distance code",r.mode=mn;break}r.offset=E,r.extra=k&15,r.mode=hS;case hS:if(r.extra){for(z=r.extra;h<z;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=mn;break}r.mode=mS;case mS:if(u===0)break e;if(x=v-u,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=mn;break}x>r.wnext?(x-=r.wnext,w=r.wsize-x):w=r.wnext-x,x>r.length&&(x=r.length),j=r.window}else j=s,w=o-r.offset,x=r.length;x>u&&(x=u),u-=x,r.length-=x;do s[o++]=j[w++];while(--x);r.length===0&&(r.mode=Ym);break;case pS:if(u===0)break e;s[o++]=r.length,u--,r.mode=Ym;break;case cy:if(r.wrap){for(;h<32;){if(c===0)break e;c--,d|=n[i++]<<h,h+=8}if(v-=u,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?Eo(r.check,s,v,o-v):Wb(r.check,s,v,o-v)),v=u,r.wrap&4&&(r.flags?d:yS(d))!==r.check){e.msg="incorrect data check",r.mode=mn;break}d=0,h=0}r.mode=gS;case gS:if(r.wrap&&r.flags){for(;h<32;){if(c===0)break e;c--,d+=n[i++]<<h,h+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=mn;break}d=0,h=0}r.mode=xS;case xS:U=hoe;break e;case mn:U=aR;break e;case iR:return sR;case oR:default:return $i}return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=c,r.hold=d,r.bits=h,(r.wsize||v!==e.avail_out&&r.mode<mn&&(r.mode<cy||t!==XC))&&fR(e,e.output,e.next_out,v-e.avail_out),p-=e.avail_in,v-=e.avail_out,e.total_in+=p,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?Eo(r.check,s,v,e.next_out-v):Wb(r.check,s,v,e.next_out-v)),e.data_type=r.bits+(r.last?64:0)+(r.mode===pl?128:0)+(r.mode===Xm||r.mode===ly?256:0),(p===0&&v===0||t===XC)&&U===Hu&&(U=poe),U},Aoe=e=>{if(ed(e))return $i;let t=e.state;return t.window&&(t.window=null),e.state=null,Hu},Coe=(e,t)=>{if(ed(e))return $i;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Hu):$i},Soe=(e,t)=>{const r=t.length;let n,s,i;return ed(e)||(n=e.state,n.wrap!==0&&n.mode!==Zg)?$i:n.mode===Zg&&(s=1,s=Wb(s,t,r,0),s!==n.check)?aR:(i=fR(e,t,r,r),i?(n.mode=iR,sR):(n.havedict=1,Hu))};var Eoe=cR,koe=uR,Poe=lR,Ioe=woe,Toe=dR,_oe=joe,Ooe=Aoe,Roe=Coe,Doe=Soe,Loe="pako inflate (from Nodeca project)",vl={inflateReset:Eoe,inflateReset2:koe,inflateResetKeep:Poe,inflateInit:Ioe,inflateInit2:Toe,inflate:_oe,inflateEnd:Ooe,inflateGetHeader:Roe,inflateSetDictionary:Doe,inflateInfo:Loe};function Moe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Boe=Moe;const hR=Object.prototype.toString,{Z_NO_FLUSH:Foe,Z_FINISH:Uoe,Z_OK:g0,Z_STREAM_END:fy,Z_NEED_DICT:hy,Z_STREAM_ERROR:zoe,Z_DATA_ERROR:bS,Z_MEM_ERROR:$oe}=QO;function W0(e){this.options=eR.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new noe,this.strm.avail_out=0;let r=vl.inflateInit2(this.strm,t.windowBits);if(r!==g0)throw new Error(qb[r]);if(this.header=new Boe,vl.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Hb.string2buf(t.dictionary):hR.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=vl.inflateSetDictionary(this.strm,t.dictionary),r!==g0)))throw new Error(qb[r])}W0.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,o,c;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Uoe:Foe,hR.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=vl.inflate(r,o),i===hy&&s&&(i=vl.inflateSetDictionary(r,s),i===g0?i=vl.inflate(r,o):i===bS&&(i=hy));r.avail_in>0&&i===fy&&r.state.wrap>0&&e[r.next_in]!==0;)vl.inflateReset(r),i=vl.inflate(r,o);switch(i){case zoe:case bS:case hy:case $oe:return this.onEnd(i),this.ended=!0,!1}if(c=r.avail_out,r.next_out&&(r.avail_out===0||i===fy))if(this.options.to==="string"){let u=Hb.utf8border(r.output,r.next_out),d=r.next_out-u,h=Hb.buf2string(r.output,u);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(u,u+d),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===g0&&c===0)){if(i===fy)return i=vl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};W0.prototype.onData=function(e){this.chunks.push(e)};W0.prototype.onEnd=function(e){e===g0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=eR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Woe(e,t){const r=new W0(t);if(r.push(e),r.err)throw r.msg||qb[r.err];return r.result}var qoe=W0,Hoe=Woe,Voe={Inflate:qoe,inflate:Hoe};const{Inflate:Goe,inflate:Koe}=Voe;var wS=Goe,Xoe=Koe;const mR=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;mR[e]=t}const NS=4294967295;function Yoe(e,t,r){let n=e;for(let s=0;s<r;s++)n=mR[(n^t[s])&255]^n>>>8;return n}function Zoe(e,t){return(Yoe(NS,e,t)^NS)>>>0}function jS(e,t,r){const n=e.readUint32(),s=Zoe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function pR(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function gR(e,t,r,n){let s=0;for(;s<n;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-n]&255}function xR(e,t,r,n){let s=0;if(r.length===0)for(;s<n;s++)t[s]=e[s];else for(;s<n;s++)t[s]=e[s]+r[s]&255}function yR(e,t,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-s]>>1)&255}else{for(;i<s;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-s]+r[i]>>1)&255}}function vR(e,t,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-s]&255}else{for(;i<s;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+Joe(t[i-s],r[i],r[i-s])&255}}function Joe(e,t,r){const n=e+t-r,s=Math.abs(n-e),i=Math.abs(n-t),o=Math.abs(n-r);return s<=i&&s<=o?e:i<=o?t:r}function Qoe(e,t,r,n,s,i){switch(e){case 0:pR(t,r,s);break;case 1:gR(t,r,s,i);break;case 2:xR(t,r,n,s);break;case 3:yR(t,r,n,s,i);break;case 4:vR(t,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const ele=new Uint16Array([255]),tle=new Uint8Array(ele.buffer),rle=tle[0]===255;function nle(e){const{data:t,width:r,height:n,channels:s,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(i/8)*s,u=new Uint8Array(n*r*c);let d=0;for(let h=0;h<7;h++){const p=o[h],v=Math.ceil((r-p.x)/p.xStep),x=Math.ceil((n-p.y)/p.yStep);if(v<=0||x<=0)continue;const w=v*c,j=new Uint8Array(w);for(let N=0;N<x;N++){const A=t[d++],k=t.subarray(d,d+w);d+=w;const E=new Uint8Array(w);Qoe(A,k,E,j,w,c),j.set(E);for(let _=0;_<v;_++){const O=p.x+_*p.xStep,B=p.y+N*p.yStep;if(!(O>=r||B>=n))for(let F=0;F<c;F++)u[(B*r+O)*c+F]=E[_*c+F]}}}if(i===16){const h=new Uint16Array(u.buffer);if(rle)for(let p=0;p<h.length;p++)h[p]=ale(h[p]);return h}else return u}function ale(e){return(e&255)<<8|e>>8&255}const sle=new Uint16Array([255]),ile=new Uint8Array(sle.buffer),ole=ile[0]===255,lle=new Uint8Array(0);function AS(e){const{data:t,width:r,height:n,channels:s,depth:i}=e,o=Math.ceil(i/8)*s,c=Math.ceil(i/8*s*r),u=new Uint8Array(n*c);let d=lle,h=0,p,v;for(let x=0;x<n;x++){switch(p=t.subarray(h+1,h+1+c),v=u.subarray(x*c,(x+1)*c),t[h]){case 0:pR(p,v,c);break;case 1:gR(p,v,c,o);break;case 2:xR(p,v,d,c);break;case 3:yR(p,v,d,c,o);break;case 4:vR(p,v,d,c,o);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}d=v,h+=c+1}if(i===16){const x=new Uint16Array(u.buffer);if(ole)for(let w=0;w<x.length;w++)x[w]=cle(x[w]);return x}else return u}function cle(e){return(e&255)<<8|e>>8&255}const bp=Uint8Array.of(137,80,78,71,13,10,26,10);function CS(e){if(!ule(e.readBytes(bp.length)))throw new Error("wrong PNG signature")}function ule(e){if(e.length<bp.length)return!1;for(let t=0;t<bp.length;t++)if(e[t]!==bp[t])return!1;return!0}const dle="tEXt",fle=0,bR=new TextDecoder("latin1");function hle(e){if(ple(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const mle=/^[\u0000-\u00FF]*$/;function ple(e){if(!mle.test(e))throw new Error("invalid latin1 text")}function gle(e,t,r){const n=wR(t);e[n]=xle(t,r-n.length-1)}function wR(e){for(e.mark();e.readByte()!==fle;);const t=e.offset;e.reset();const r=bR.decode(e.readBytes(t-e.offset-1));return e.skip(1),hle(r),r}function xle(e,t){return bR.decode(e.readBytes(t))}const Js={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},my={UNKNOWN:-1,DEFLATE:0},SS={UNKNOWN:-1,ADAPTIVE:0},py={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Zm={NONE:0,BACKGROUND:1,PREVIOUS:2},gy={SOURCE:0,OVER:1};class yle extends j3{constructor(r,n={}){super(r);Ir(this,"_checkCrc");Ir(this,"_inflator");Ir(this,"_png");Ir(this,"_apng");Ir(this,"_end");Ir(this,"_hasPalette");Ir(this,"_palette");Ir(this,"_hasTransparency");Ir(this,"_transparency");Ir(this,"_compressionMethod");Ir(this,"_filterMethod");Ir(this,"_interlaceMethod");Ir(this,"_colorType");Ir(this,"_isAnimated");Ir(this,"_numberOfFrames");Ir(this,"_numberOfPlays");Ir(this,"_frames");Ir(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new wS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=my.UNKNOWN,this._filterMethod=SS.UNKNOWN,this._interlaceMethod=py.UNKNOWN,this._colorType=Js.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(CS(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(CS(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case dle:gle(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?jS(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?jS(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=vle(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case Js.GREYSCALE:s=1;break;case Js.TRUECOLOUR:s=3;break;case Js.INDEXED_COLOUR:s=1;break;case Js.GREYSCALE_ALPHA:s=2;break;case Js.TRUECOLOUR_ALPHA:s=4;break;case Js.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==my.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<n;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Js.GREYSCALE:case Js.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Js.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Js.UNKNOWN:case Js.GREYSCALE_ALPHA:case Js.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=wR(this),s=this.readUint8();if(s!==my.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:Xoe(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=AS({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case Zm.NONE:break;case Zm.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const c=(i*r.width+o)*this._png.channels;for(let u=0;u<this._png.channels;u++)s.data[c+u]=0}break;case Zm.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,i=(o,c)=>{const u=((o+n.yOffset)*this._png.width+n.xOffset+c)*this._png.channels,d=(o*n.width+c)*this._png.channels;return{index:u,frameIndex:d}};switch(n.blendOp){case gy.SOURCE:for(let o=0;o<n.height;o++)for(let c=0;c<n.width;c++){const{index:u,frameIndex:d}=i(o,c);for(let h=0;h<this._png.channels;h++)r.data[u+h]=n.data[d+h]}break;case gy.OVER:for(let o=0;o<n.height;o++)for(let c=0;c<n.width;c++){const{index:u,frameIndex:d}=i(o,c);for(let h=0;h<this._png.channels;h++){const p=n.data[d+this._png.channels-1]/s,v=h%(this._png.channels-1)===0?1:n.data[d+h],x=Math.floor(p*v+(1-p)*r.data[u+h]);r.data[u+h]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==SS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===py.NO_INTERLACE)this._png.data=AS({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===py.ADAM7)this._png.data=nle({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Zm.NONE,blendOp:gy.SOURCE,data:r}),this._inflator=new wS,this._writingDataChunks=!1}}function vle(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var ES;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(ES||(ES={}));function ble(e,t){return new yle(e,t).decode()}var Jt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function xy(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var Xr={log:xy,warn:function(e){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):xy.call(null,arguments))},error:function(e){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):xy(e))}};function yy(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){ou(n.response,t,r)},n.onerror=function(){Xr.error("could not download file")},n.send()}function kS(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Jm(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ou=Jt.saveAs||((typeof window>"u"?"undefined":Mr(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Jt.URL||Jt.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?kS(s.href)?yy(e,t,r):Jm(s,s.target="_blank"):Jm(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Jm(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(kS(e))yy(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Jm(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Mr(i)!=="object"&&(Xr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return yy(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(Jt.HTMLElement)||Jt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Mr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var h=c.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},c.readAsDataURL(e)}else{var u=Jt.URL||Jt.webkitURL,d=u.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function NR(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+c+u+d}}var wp=Jt.atob.bind(Jt),PS=Jt.btoa.bind(Jt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function vy(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=Za(r,n,s,i,t[0],7,-680876936),i=Za(i,r,n,s,t[1],12,-389564586),s=Za(s,i,r,n,t[2],17,606105819),n=Za(n,s,i,r,t[3],22,-1044525330),r=Za(r,n,s,i,t[4],7,-176418897),i=Za(i,r,n,s,t[5],12,1200080426),s=Za(s,i,r,n,t[6],17,-1473231341),n=Za(n,s,i,r,t[7],22,-45705983),r=Za(r,n,s,i,t[8],7,1770035416),i=Za(i,r,n,s,t[9],12,-1958414417),s=Za(s,i,r,n,t[10],17,-42063),n=Za(n,s,i,r,t[11],22,-1990404162),r=Za(r,n,s,i,t[12],7,1804603682),i=Za(i,r,n,s,t[13],12,-40341101),s=Za(s,i,r,n,t[14],17,-1502002290),r=Ja(r,n=Za(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Ja(i,r,n,s,t[6],9,-1069501632),s=Ja(s,i,r,n,t[11],14,643717713),n=Ja(n,s,i,r,t[0],20,-373897302),r=Ja(r,n,s,i,t[5],5,-701558691),i=Ja(i,r,n,s,t[10],9,38016083),s=Ja(s,i,r,n,t[15],14,-660478335),n=Ja(n,s,i,r,t[4],20,-405537848),r=Ja(r,n,s,i,t[9],5,568446438),i=Ja(i,r,n,s,t[14],9,-1019803690),s=Ja(s,i,r,n,t[3],14,-187363961),n=Ja(n,s,i,r,t[8],20,1163531501),r=Ja(r,n,s,i,t[13],5,-1444681467),i=Ja(i,r,n,s,t[2],9,-51403784),s=Ja(s,i,r,n,t[7],14,1735328473),r=Qa(r,n=Ja(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Qa(i,r,n,s,t[8],11,-2022574463),s=Qa(s,i,r,n,t[11],16,1839030562),n=Qa(n,s,i,r,t[14],23,-35309556),r=Qa(r,n,s,i,t[1],4,-1530992060),i=Qa(i,r,n,s,t[4],11,1272893353),s=Qa(s,i,r,n,t[7],16,-155497632),n=Qa(n,s,i,r,t[10],23,-1094730640),r=Qa(r,n,s,i,t[13],4,681279174),i=Qa(i,r,n,s,t[0],11,-358537222),s=Qa(s,i,r,n,t[3],16,-722521979),n=Qa(n,s,i,r,t[6],23,76029189),r=Qa(r,n,s,i,t[9],4,-640364487),i=Qa(i,r,n,s,t[12],11,-421815835),s=Qa(s,i,r,n,t[15],16,530742520),r=es(r,n=Qa(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=es(i,r,n,s,t[7],10,1126891415),s=es(s,i,r,n,t[14],15,-1416354905),n=es(n,s,i,r,t[5],21,-57434055),r=es(r,n,s,i,t[12],6,1700485571),i=es(i,r,n,s,t[3],10,-1894986606),s=es(s,i,r,n,t[10],15,-1051523),n=es(n,s,i,r,t[1],21,-2054922799),r=es(r,n,s,i,t[8],6,1873313359),i=es(i,r,n,s,t[15],10,-30611744),s=es(s,i,r,n,t[6],15,-1560198380),n=es(n,s,i,r,t[13],21,1309151649),r=es(r,n,s,i,t[4],6,-145523070),i=es(i,r,n,s,t[11],10,-1120210379),s=es(s,i,r,n,t[2],15,718787259),n=es(n,s,i,r,t[9],21,-343485551),e[0]=bc(r,e[0]),e[1]=bc(n,e[1]),e[2]=bc(s,e[2]),e[3]=bc(i,e[3])}function Ix(e,t,r,n,s,i){return t=bc(bc(t,e),bc(n,i)),bc(t<<s|t>>>32-s,r)}function Za(e,t,r,n,s,i,o){return Ix(t&r|~t&n,e,t,s,i,o)}function Ja(e,t,r,n,s,i,o){return Ix(t&n|r&~n,e,t,s,i,o)}function Qa(e,t,r,n,s,i,o){return Ix(t^r^n,e,t,s,i,o)}function es(e,t,r,n,s,i,o){return Ix(r^(t|~n),e,t,s,i,o)}function jR(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)vy(n,wle(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(vy(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,vy(n,s),n}function wle(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var IS="0123456789abcdef".split("");function Nle(e){for(var t="",r=0;r<4;r++)t+=IS[e>>8*r+4&15]+IS[e>>8*r&15];return t}function jle(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Vb(e){return jR(e).map(jle).join("")}var Ale=function(e){for(var t=0;t<e.length;t++)e[t]=Nle(e[t]);return e.join("")}(jR("hello"))!="5d41402abc4b2a76b9719d911017c592";function bc(e,t){if(Ale){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Gb(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),c=[],u=0;u<256;u++)c[u]=u;var d=0;for(u=0;u<256;u++){var h=c[u];d=(d+h+o.charCodeAt(u))%256,c[u]=c[d],c[d]=h}r=e,n=c}else c=n;var p=t.length,v=0,x=0,w="";for(u=0;u<p;u++)x=(x+(h=c[v=(v+1)%256]))%256,c[v]=c[x],c[x]=h,o=c[(c[v]+c[x])%256],w+=String.fromCharCode(t.charCodeAt(u)^o);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var TS={print:4,modify:8,copy:16,"annot-forms":32};function fd(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(c){if(TS.perm!==void 0)throw new Error("Invalid permission: "+c);s+=TS[c]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=Vb(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Gb(this.encryptionKey,this.padding)}function hd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[n]}return t}function _S(e){if(Mr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(c){Jt.console&&Xr.error("jsPDF PubSub Error",c.message,c)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Jg(e){if(!(this instanceof Jg))return new Jg(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function AR(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function lu(e,t,r,n,s){if(!(this instanceof lu))return new lu(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,AR.call(this,n,s)}function Id(e,t,r,n,s){if(!(this instanceof Id))return new Id(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,AR.call(this,n,s)}function Tt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],c=1,u=16,d="S",h=null;Mr(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),c=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(u=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,v={},x={internal:{},__private__:{}};x.__private__.PubSub=_S;var w="1.3",j=x.__private__.getPdfVersion=function(){return w};x.__private__.setPdfVersion=function(R){w=R};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return N};var A=x.__private__.getPageFormat=function(R){return N[R]};s=s||"a4";var k="compat",E="advanced",_=k;function O(){this.saveGraphicsState(),he(new Bt(qt,0,0,-qt,0,al()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),d="n",_=E}function B(){this.restoreGraphicsState(),d="S",_=k}var F=x.__private__.combineFontStyleAndFontWeight=function(R,Z){if(R=="bold"&&Z=="normal"||R=="bold"&&Z==400||R=="normal"&&Z=="italic"||R=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(R=Z==400||Z==="normal"?R==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||R!=="normal"?(Z==700?"bold":Z)+""+R:"bold"),R};x.advancedAPI=function(R){var Z=_===k;return Z&&O.call(this),typeof R!="function"||(R(this),Z&&B.call(this)),this},x.compatAPI=function(R){var Z=_===E;return Z&&B.call(this),typeof R!="function"||(R(this),Z&&O.call(this)),this},x.isAdvancedAPI=function(){return _===E};var U,L=function(R){if(_!==E)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=x.roundToPrecision=x.__private__.roundToPrecision=function(R,Z){var me=t||Z;if(isNaN(R)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(me).replace(/0+$/,"")};U=x.hpf=x.__private__.hpf=typeof u=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return K(R,u)}:u==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return K(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return K(R,16)};var z=x.f2=x.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return K(R,2)},q=x.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return K(R,3)},Q=x.scale=x.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return _===k?R*qt:_===E?R:void 0},G=function(R){return Q(function(Z){return _===k?al()-Z:_===E?Z:void 0}(R))};x.__private__.setPrecision=x.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(t=parseInt(R,10))};var H,ue="00000000000000000000000000000000",ye=x.__private__.getFileId=function(){return ue},de=x.__private__.setFileId=function(R){return ue=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(qr=new fd(h.userPermissions,h.userPassword,h.ownerPassword,ue)),ue};x.setFileId=function(R){return de(R),this},x.getFileId=function(){return ye()};var we=x.__private__.convertDateToPDFDate=function(R){var Z=R.getTimezoneOffset(),me=Z<0?"+":"-",je=Math.floor(Math.abs(Z/60)),_e=Math.abs(Z%60),Ke=[me,ne(je),"'",ne(_e),"'"].join("");return["D:",R.getFullYear(),ne(R.getMonth()+1),ne(R.getDate()),ne(R.getHours()),ne(R.getMinutes()),ne(R.getSeconds()),Ke].join("")},Ee=x.__private__.convertPDFDateToDate=function(R){var Z=parseInt(R.substr(2,4),10),me=parseInt(R.substr(6,2),10)-1,je=parseInt(R.substr(8,2),10),_e=parseInt(R.substr(10,2),10),Ke=parseInt(R.substr(12,2),10),rt=parseInt(R.substr(14,2),10);return new Date(Z,me,je,_e,Ke,rt,0)},ie=x.__private__.setCreationDate=function(R){var Z;if(R===void 0&&(R=new Date),R instanceof Date)Z=we(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=R}return H=Z},V=x.__private__.getCreationDate=function(R){var Z=H;return R==="jsDate"&&(Z=Ee(H)),Z};x.setCreationDate=function(R){return ie(R),this},x.getCreationDate=function(R){return V(R)};var se,ne=x.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},ve=x.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},be=0,Te=[],xe=[],le=0,Ce=[],ke=[],Ie=!1,We=xe;x.__private__.setCustomOutputDestination=function(R){Ie=!0,We=R};var Re=function(R){Ie||(We=R)};x.__private__.resetCustomOutputDestination=function(){Ie=!1,We=xe};var he=x.__private__.out=function(R){return R=R.toString(),le+=R.length+1,We.push(R),We},Ze=x.__private__.write=function(R){return he(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},ot=x.__private__.getArrayBuffer=function(R){for(var Z=R.length,me=new ArrayBuffer(Z),je=new Uint8Array(me);Z--;)je[Z]=R.charCodeAt(Z);return me},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return it};var Ve=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(R){return Ve=_===E?R/qt:R,this};var At,He=x.__private__.getFontSize=x.getFontSize=function(){return _===k?Ve:Ve*qt},Xt=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(R){return Xt=R,this},x.__private__.getR2L=x.getR2L=function(){return Xt};var Ot,ar=x.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))At=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');At=R}else At=parseInt(R,10)};x.__private__.getZoomMode=function(){return At};var Yt,Lt=x.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Ot=R};x.__private__.getPageMode=function(){return Ot};var Sr=x.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Yt=R};x.__private__.getLayoutMode=function(){return Yt},x.__private__.setDisplayMode=x.setDisplayMode=function(R,Z,me){return ar(R),Sr(Z),Lt(me),this};var $t={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(R){if(Object.keys($t).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return $t[R]},x.__private__.getDocumentProperties=function(){return $t},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(R){for(var Z in $t)$t.hasOwnProperty(Z)&&R[Z]&&($t[Z]=R[Z]);return this},x.__private__.setDocumentProperty=function(R,Z){if(Object.keys($t).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return $t[R]=Z};var ht,qt,Et,$r,Ut,qe={},jt={},Mt=[],ft={},sr={},Zt={},dn={},Wt=null,gr=0,Gt=[],br=new _S(x),ra=e.hotfixes||[],Vn={},Zr={},Pa=[],Bt=function R(Z,me,je,_e,Ke,rt){if(!(this instanceof R))return new R(Z,me,je,_e,Ke,rt);isNaN(Z)&&(Z=1),isNaN(me)&&(me=0),isNaN(je)&&(je=0),isNaN(_e)&&(_e=1),isNaN(Ke)&&(Ke=0),isNaN(rt)&&(rt=0),this._matrix=[Z,me,je,_e,Ke,rt]};Object.defineProperty(Bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Bt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(R)},Bt.prototype.multiply=function(R){var Z=R.sx*this.sx+R.shy*this.shx,me=R.sx*this.shy+R.shy*this.sy,je=R.shx*this.sx+R.sy*this.shx,_e=R.shx*this.shy+R.sy*this.sy,Ke=R.tx*this.sx+R.ty*this.shx+this.tx,rt=R.tx*this.shy+R.ty*this.sy+this.ty;return new Bt(Z,me,je,_e,Ke,rt)},Bt.prototype.decompose=function(){var R=this.sx,Z=this.shy,me=this.shx,je=this.sy,_e=this.tx,Ke=this.ty,rt=Math.sqrt(R*R+Z*Z),pt=(R/=rt)*me+(Z/=rt)*je;me-=R*pt,je-=Z*pt;var lt=Math.sqrt(me*me+je*je);return pt/=lt,R*(je/=lt)<Z*(me/=lt)&&(R=-R,Z=-Z,pt=-pt,rt=-rt),{scale:new Bt(rt,0,0,lt,0,0),translate:new Bt(1,0,0,1,_e,Ke),rotate:new Bt(R,Z,-Z,R,0,0),skew:new Bt(1,0,pt,1,0,0)}},Bt.prototype.toString=function(R){return this.join(" ")},Bt.prototype.inversed=function(){var R=this.sx,Z=this.shy,me=this.shx,je=this.sy,_e=this.tx,Ke=this.ty,rt=1/(R*je-Z*me),pt=je*rt,lt=-Z*rt,Vt=-me*rt,gt=R*rt;return new Bt(pt,lt,Vt,gt,-pt*_e-Vt*Ke,-lt*_e-gt*Ke)},Bt.prototype.applyToPoint=function(R){var Z=R.x*this.sx+R.y*this.shx+this.tx,me=R.x*this.shy+R.y*this.sy+this.ty;return new Pn(Z,me)},Bt.prototype.applyToRectangle=function(R){var Z=this.applyToPoint(R),me=this.applyToPoint(new Pn(R.x+R.w,R.y+R.h));return new Jl(Z.x,Z.y,me.x-Z.x,me.y-Z.y)},Bt.prototype.clone=function(){var R=this.sx,Z=this.shy,me=this.shx,je=this.sy,_e=this.tx,Ke=this.ty;return new Bt(R,Z,me,je,_e,Ke)},x.Matrix=Bt;var Gn=x.matrixMult=function(R,Z){return Z.multiply(R)},Hi=new Bt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Hi;var Kn=function(R,Z){if(!sr[R]){var me=(Z instanceof lu?"Sh":"P")+(Object.keys(ft).length+1).toString(10);Z.id=me,sr[R]=me,ft[me]=Z,br.publish("addPattern",Z)}};x.ShadingPattern=lu,x.TilingPattern=Id,x.addShadingPattern=function(R,Z){return L("addShadingPattern()"),Kn(R,Z),this},x.beginTilingPattern=function(R){L("beginTilingPattern()"),Ql(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},x.endTilingPattern=function(R,Z){L("endTilingPattern()"),Z.stream=ke[se].join(`
`),Kn(R,Z),br.publish("endTilingPattern",Z),Pa.pop().restore()};var Wa,dr=x.__private__.newObject=function(){var R=Jr();return Tr(R,!0),R},Jr=x.__private__.newObjectDeferred=function(){return be++,Te[be]=function(){return le},be},Tr=function(R,Z){return Z=typeof Z=="boolean"&&Z,Te[R]=le,Z&&he(R+" 0 obj"),R},dt=x.__private__.newAdditionalObject=function(){var R={objId:Jr(),content:""};return Ce.push(R),R},ls=Jr(),cs=Jr(),rn=x.__private__.decodeColorString=function(R){var Z=R.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length!==5||Z[4]!=="k"&&Z[4]!=="K"||(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var me=parseFloat(Z[0]);Z=[me,me,me,"r"]}for(var je="#",_e=0;_e<3;_e++)je+=("0"+Math.floor(255*parseFloat(Z[_e])).toString(16)).slice(-2);return je},xa=x.__private__.encodeColorString=function(R){var Z;typeof R=="string"&&(R={ch1:R});var me=R.ch1,je=R.ch2,_e=R.ch3,Ke=R.ch4,rt=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var pt=new NR(me);if(pt.ok)me=pt.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var lt=parseInt(me.substr(1),16);me=lt>>16&255,je=lt>>8&255,_e=255&lt}if(je===void 0||Ke===void 0&&me===je&&je===_e)Z=typeof me=="string"?me+" "+rt[0]:R.precision===2?z(me/255)+" "+rt[0]:q(me/255)+" "+rt[0];else if(Ke===void 0||Mr(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return["1.","1.","1.",rt[1]].join(" ");Z=typeof me=="string"?[me,je,_e,rt[1]].join(" "):R.precision===2?[z(me/255),z(je/255),z(_e/255),rt[1]].join(" "):[q(me/255),q(je/255),q(_e/255),rt[1]].join(" ")}else Z=typeof me=="string"?[me,je,_e,Ke,rt[2]].join(" "):R.precision===2?[z(me),z(je),z(_e),z(Ke),rt[2]].join(" "):[q(me),q(je),q(_e),q(Ke),rt[2]].join(" ");return Z},qa=x.__private__.getFilters=function(){return o},Ia=x.__private__.putStream=function(R){var Z=(R=R||{}).data||"",me=R.filters||qa(),je=R.alreadyAppliedFilters||[],_e=R.addLength1||!1,Ke=Z.length,rt=R.objectId,pt=function(Ln){return Ln};if(h!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(pt=qr.encryptor(rt,0));var lt={};me===!0&&(me=["FlateEncode"]);var Vt=R.additionalKeyValues||[],gt=(lt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(Z,me):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(je)?je.join(" "):je.toString());if(lt.data.length!==0&&(Vt.push({key:"Length",value:lt.data.length}),_e===!0&&Vt.push({key:"Length1",value:Ke})),gt.length!=0)if(gt.split("/").length-1==1)Vt.push({key:"Filter",value:gt});else{Vt.push({key:"Filter",value:"["+gt+"]"});for(var pr=0;pr<Vt.length;pr+=1)if(Vt[pr].key==="DecodeParms"){for(var kr=[],Kt=0;Kt<lt.reverseChain.split("/").length-1;Kt+=1)kr.push("null");kr.push(Vt[pr].value),Vt[pr].value="["+kr.join(" ")+"]"}}he("<<");for(var ut=0;ut<Vt.length;ut++)he("/"+Vt[ut].key+" "+Vt[ut].value);he(">>"),lt.data.length!==0&&(he("stream"),he(pt(lt.data)),he("endstream"))},ya=x.__private__.putPage=function(R){var Z=R.number,me=R.data,je=R.objId,_e=R.contentsObjId;Tr(je,!0),he("<</Type /Page"),he("/Parent "+R.rootDictionaryObjId+" 0 R"),he("/Resources "+R.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(U(R.mediaBox.bottomLeftX))+" "+parseFloat(U(R.mediaBox.bottomLeftY))+" "+U(R.mediaBox.topRightX)+" "+U(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&he("/CropBox ["+U(R.cropBox.bottomLeftX)+" "+U(R.cropBox.bottomLeftY)+" "+U(R.cropBox.topRightX)+" "+U(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&he("/BleedBox ["+U(R.bleedBox.bottomLeftX)+" "+U(R.bleedBox.bottomLeftY)+" "+U(R.bleedBox.topRightX)+" "+U(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&he("/TrimBox ["+U(R.trimBox.bottomLeftX)+" "+U(R.trimBox.bottomLeftY)+" "+U(R.trimBox.topRightX)+" "+U(R.trimBox.topRightY)+"]"),R.artBox!==null&&he("/ArtBox ["+U(R.artBox.bottomLeftX)+" "+U(R.artBox.bottomLeftY)+" "+U(R.artBox.topRightX)+" "+U(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&he("/UserUnit "+R.userUnit),br.publish("putPage",{objId:je,pageContext:Gt[Z],pageNumber:Z,page:me}),he("/Contents "+_e+" 0 R"),he(">>"),he("endobj");var Ke=me.join(`
`);return _===E&&(Ke+=`
Q`),Tr(_e,!0),Ia({data:Ke,filters:qa(),objectId:_e}),he("endobj"),je},xi=x.__private__.putPages=function(){var R,Z,me=[];for(R=1;R<=gr;R++)Gt[R].objId=Jr(),Gt[R].contentsObjId=Jr();for(R=1;R<=gr;R++)me.push(ya({number:R,data:ke[R],objId:Gt[R].objId,contentsObjId:Gt[R].contentsObjId,mediaBox:Gt[R].mediaBox,cropBox:Gt[R].cropBox,bleedBox:Gt[R].bleedBox,trimBox:Gt[R].trimBox,artBox:Gt[R].artBox,userUnit:Gt[R].userUnit,rootDictionaryObjId:ls,resourceDictionaryObjId:cs}));Tr(ls,!0),he("<</Type /Pages");var je="/Kids [";for(Z=0;Z<gr;Z++)je+=me[Z]+" 0 R ";he(je+"]"),he("/Count "+gr),he(">>"),he("endobj"),br.publish("postPutPages")},Go=function(R){br.publish("putFont",{font:R,out:he,newObject:dr,putStream:Ia}),R.isAlreadyPutted!==!0&&(R.objectNumber=dr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+hd(R.postScriptName)),he("/Subtype /Type1"),typeof R.encoding=="string"&&he("/Encoding /"+R.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},Ta=function(R){R.objectNumber=dr();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[U(R.x),U(R.y),U(R.x+R.width),U(R.y+R.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var me=R.pages[1].join(`
`);Ia({data:me,additionalKeyValues:Z,objectId:R.objectNumber}),he("endobj")},kn=function(R,Z){Z||(Z=21);var me=dr(),je=function(rt,pt){var lt,Vt=[],gt=1/(pt-1);for(lt=0;lt<1;lt+=gt)Vt.push(lt);if(Vt.push(1),rt[0].offset!=0){var pr={offset:0,color:rt[0].color};rt.unshift(pr)}if(rt[rt.length-1].offset!=1){var kr={offset:1,color:rt[rt.length-1].color};rt.push(kr)}for(var Kt="",ut=0,Ln=0;Ln<Vt.length;Ln++){for(lt=Vt[Ln];lt>rt[ut+1].offset;)ut++;var Qt=rt[ut].offset,nn=(lt-Qt)/(rt[ut+1].offset-Qt),na=rt[ut].color,Va=rt[ut+1].color;Kt+=ve(Math.round((1-nn)*na[0]+nn*Va[0]).toString(16))+ve(Math.round((1-nn)*na[1]+nn*Va[1]).toString(16))+ve(Math.round((1-nn)*na[2]+nn*Va[2]).toString(16))}return Kt.trim()}(R.colors,Z),_e=[];_e.push({key:"FunctionType",value:"0"}),_e.push({key:"Domain",value:"[0.0 1.0]"}),_e.push({key:"Size",value:"["+Z+"]"}),_e.push({key:"BitsPerSample",value:"8"}),_e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ia({data:je,additionalKeyValues:_e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),he("endobj"),R.objectNumber=dr(),he("<< /ShadingType "+R.type),he("/ColorSpace /DeviceRGB");var Ke="/Coords ["+U(parseFloat(R.coords[0]))+" "+U(parseFloat(R.coords[1]))+" ";R.type===2?Ke+=U(parseFloat(R.coords[2]))+" "+U(parseFloat(R.coords[3])):Ke+=U(parseFloat(R.coords[2]))+" "+U(parseFloat(R.coords[3]))+" "+U(parseFloat(R.coords[4]))+" "+U(parseFloat(R.coords[5])),he(Ke+="]"),R.matrix&&he("/Matrix ["+R.matrix.toString()+"]"),he("/Function "+me+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},Er=function(R,Z){var me=Jr(),je=dr();Z.push({resourcesOid:me,objectOid:je}),R.objectNumber=je;var _e=[];_e.push({key:"Type",value:"/Pattern"}),_e.push({key:"PatternType",value:"1"}),_e.push({key:"PaintType",value:"1"}),_e.push({key:"TilingType",value:"1"}),_e.push({key:"BBox",value:"["+R.boundingBox.map(U).join(" ")+"]"}),_e.push({key:"XStep",value:U(R.xStep)}),_e.push({key:"YStep",value:U(R.yStep)}),_e.push({key:"Resources",value:me+" 0 R"}),R.matrix&&_e.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),Ia({data:R.stream,additionalKeyValues:_e,objectId:R.objectNumber}),he("endobj")},rd=function(R){for(var Z in R.objectNumber=dr(),he("<<"),R)switch(Z){case"opacity":he("/ca "+z(R[Z]));break;case"stroke-opacity":he("/CA "+z(R[Z]))}he(">>"),he("endobj")},js=function(R){Tr(R.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Z in he("/Font <<"),qe)qe.hasOwnProperty(Z)&&(p===!1||p===!0&&v.hasOwnProperty(Z))&&he("/"+Z+" "+qe[Z].objectNumber+" 0 R");he(">>")}(),function(){if(Object.keys(ft).length>0){for(var Z in he("/Shading <<"),ft)ft.hasOwnProperty(Z)&&ft[Z]instanceof lu&&ft[Z].objectNumber>=0&&he("/"+Z+" "+ft[Z].objectNumber+" 0 R");br.publish("putShadingPatternDict"),he(">>")}}(),function(Z){if(Object.keys(ft).length>0){for(var me in he("/Pattern <<"),ft)ft.hasOwnProperty(me)&&ft[me]instanceof x.TilingPattern&&ft[me].objectNumber>=0&&ft[me].objectNumber<Z&&he("/"+me+" "+ft[me].objectNumber+" 0 R");br.publish("putTilingPatternDict"),he(">>")}}(R.objectOid),function(){if(Object.keys(Zt).length>0){var Z;for(Z in he("/ExtGState <<"),Zt)Zt.hasOwnProperty(Z)&&Zt[Z].objectNumber>=0&&he("/"+Z+" "+Zt[Z].objectNumber+" 0 R");br.publish("putGStateDict"),he(">>")}}(),function(){for(var Z in he("/XObject <<"),Vn)Vn.hasOwnProperty(Z)&&Vn[Z].objectNumber>=0&&he("/"+Z+" "+Vn[Z].objectNumber+" 0 R");br.publish("putXobjectDict"),he(">>")}(),he(">>"),he("endobj")},Kl=function(R){jt[R.fontName]=jt[R.fontName]||{},jt[R.fontName][R.fontStyle]=R.id},tt=function(R,Z,me,je,_e){var Ke={id:"F"+(Object.keys(qe).length+1).toString(10),postScriptName:R,fontName:Z,fontStyle:me,encoding:je,isStandardFont:_e||!1,metadata:{}};return br.publish("addFont",{font:Ke,instance:this}),qe[Ke.id]=Ke,Kl(Ke),Ke.id},As=x.__private__.pdfEscape=x.pdfEscape=function(R,Z){return function(me,je){var _e,Ke,rt,pt,lt,Vt,gt,pr,kr;if(rt=(je=je||{}).sourceEncoding||"Unicode",lt=je.outputEncoding,(je.autoencode||lt)&&qe[ht].metadata&&qe[ht].metadata[rt]&&qe[ht].metadata[rt].encoding&&(pt=qe[ht].metadata[rt].encoding,!lt&&qe[ht].encoding&&(lt=qe[ht].encoding),!lt&&pt.codePages&&(lt=pt.codePages[0]),typeof lt=="string"&&(lt=pt[lt]),lt)){for(gt=!1,Vt=[],_e=0,Ke=me.length;_e<Ke;_e++)(pr=lt[me.charCodeAt(_e)])?Vt.push(String.fromCharCode(pr)):Vt.push(me[_e]),Vt[_e].charCodeAt(0)>>8&&(gt=!0);me=Vt.join("")}for(_e=me.length;gt===void 0&&_e!==0;)me.charCodeAt(_e-1)>>8&&(gt=!0),_e--;if(!gt)return me;for(Vt=je.noBOM?[]:[254,255],_e=0,Ke=me.length;_e<Ke;_e++){if((kr=(pr=me.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+me+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vt.push(kr),Vt.push(pr-(kr<<8))}return String.fromCharCode.apply(void 0,Vt)}(R,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wr=x.__private__.beginPage=function(R){ke[++gr]=[],Gt[gr]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},xr(gr),Re(ke[se])},Vi=function(R,Z){var me,je,_e;switch(r=Z||r,typeof R=="string"&&(me=A(R.toLowerCase()),Array.isArray(me)&&(je=me[0],_e=me[1])),Array.isArray(R)&&(je=R[0]*qt,_e=R[1]*qt),isNaN(je)&&(je=s[0],_e=s[1]),(je>14400||_e>14400)&&(Xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),je=Math.min(14400,je),_e=Math.min(14400,_e)),s=[je,_e],r.substr(0,1)){case"l":_e>je&&(s=[_e,je]);break;case"p":je>_e&&(s=[_e,je])}Wr(s),Zo(Xc),he(Jo),Zl!==0&&he(Zl+" J"),Xi!==0&&he(Xi+" j"),br.publish("addPage",{pageNumber:gr})},Gc=function(R){R>0&&R<=gr&&(ke.splice(R,1),Gt.splice(R,1),gr--,se>gr&&(se=gr),this.setPage(se))},xr=function(R){R>0&&R<=gr&&(se=R)},mr=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return ke.length-1},lr=function(R,Z,me){var je,_e=void 0;return me=me||{},R=R!==void 0?R:qe[ht].fontName,Z=Z!==void 0?Z:qe[ht].fontStyle,je=R.toLowerCase(),jt[je]!==void 0&&jt[je][Z]!==void 0?_e=jt[je][Z]:jt[R]!==void 0&&jt[R][Z]!==void 0?_e=jt[R][Z]:me.disableWarning===!1&&Xr.warn("Unable to look up font label for font '"+R+"', '"+Z+"'. Refer to getFontList() for available fonts."),_e||me.noFallback||(_e=jt.times[Z])==null&&(_e=jt.times.normal),_e},bo=x.__private__.putInfo=function(){var R=dr(),Z=function(je){return je};for(var me in h!==null&&(Z=qr.encryptor(R,0)),he("<<"),he("/Producer ("+As(Z("jsPDF "+Tt.version))+")"),$t)$t.hasOwnProperty(me)&&$t[me]&&he("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+As(Z($t[me]))+")");he("/CreationDate ("+As(Z(H))+")"),he(">>"),he("endobj")},Kc=x.__private__.putCatalog=function(R){var Z=(R=R||{}).rootDictionaryObjId||ls;switch(dr(),he("<<"),he("/Type /Catalog"),he("/Pages "+Z+" 0 R"),At||(At="fullwidth"),At){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+At;me.substr(me.length-1)==="%"&&(At=parseInt(At)/100),typeof At=="number"&&he("/OpenAction [3 0 R /XYZ null null "+z(At)+"]")}switch(Yt||(Yt="continuous"),Yt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Ot&&he("/PageMode /"+Ot),br.publish("putCatalog"),he(">>"),he("endobj")},fn=x.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(be+1)),he("/Root "+be+" 0 R"),he("/Info "+(be-1)+" 0 R"),h!==null&&he("/Encrypt "+qr.oid+" 0 R"),he("/ID [ <"+ue+"> <"+ue+"> ]"),he(">>")},hn=x.__private__.putHeader=function(){he("%PDF-"+w),he("%ºß¬à")},zs=x.__private__.putXRef=function(){var R="0000000000";he("xref"),he("0 "+(be+1)),he("0000000000 65535 f ");for(var Z=1;Z<=be;Z++)typeof Te[Z]=="function"?he((R+Te[Z]()).slice(-10)+" 00000 n "):Te[Z]!==void 0?he((R+Te[Z]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},Gi=x.__private__.buildDocument=function(){var R;be=0,le=0,xe=[],Te=[],Ce=[],ls=Jr(),cs=Jr(),Re(xe),br.publish("buildDocument"),hn(),xi(),function(){br.publish("putAdditionalObjects");for(var me=0;me<Ce.length;me++){var je=Ce[me];Tr(je.objId,!0),he(je.content),he("endobj")}br.publish("postPutAdditionalObjects")}(),R=[],function(){for(var me in qe)qe.hasOwnProperty(me)&&(p===!1||p===!0&&v.hasOwnProperty(me))&&Go(qe[me])}(),function(){var me;for(me in Zt)Zt.hasOwnProperty(me)&&rd(Zt[me])}(),function(){for(var me in Vn)Vn.hasOwnProperty(me)&&Ta(Vn[me])}(),function(me){var je;for(je in ft)ft.hasOwnProperty(je)&&(ft[je]instanceof lu?kn(ft[je]):ft[je]instanceof Id&&Er(ft[je],me))}(R),br.publish("putResources"),R.forEach(js),js({resourcesOid:cs,objectOid:Number.MAX_SAFE_INTEGER}),br.publish("postPutResources"),h!==null&&(qr.oid=dr(),he("<<"),he("/Filter /Standard"),he("/V "+qr.v),he("/R "+qr.r),he("/U <"+qr.toHexString(qr.U)+">"),he("/O <"+qr.toHexString(qr.O)+">"),he("/P "+qr.P),he(">>"),he("endobj")),bo(),Kc();var Z=le;return zs(),fn(),he("startxref"),he(""+Z),he("%%EOF"),Re(ke[se]),xe.join(`
`)},Or=x.__private__.getBlob=function(R){return new Blob([ot(R)],{type:"application/pdf"})},Xn=x.output=x.__private__.output=(Wa=function(R,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",R){case void 0:return Gi();case"save":x.save(Z.filename);break;case"arraybuffer":return ot(Gi());case"blob":return Or(Gi());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(Or(Gi()))||void 0;Xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",je=Gi();try{me=PS(je)}catch{me=PS(unescape(encodeURIComponent(je)))}return"data:application/pdf;filename="+Z.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var _e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(_e=Z.pdfObjectUrl,Ke="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_e+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",pt=Jt.open();return pt!==null&&pt.document.write(rt),pt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',Vt=Jt.open();if(Vt!==null){Vt.document.write(lt);var gt=this;Vt.document.documentElement.querySelector("#pdfViewer").onload=function(){Vt.document.title=Z.filename,Vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gt.output("bloburl"))}}return Vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',kr=Jt.open();if(kr!==null&&(kr.document.write(pr),kr.document.title=Z.filename),kr||typeof safari>"u")return kr;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",Z);default:return null}},Wa.foo=function(){try{return Wa.apply(this,arguments)}catch(me){var R=me.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var Z="Error in function "+R.split(`
`)[0].split("<")[0]+": "+me.message;if(!Jt.console)throw new Error(Z);Jt.console.error(Z,me),Jt.alert&&alert(Z)}},Wa.foo.bar=Wa,Wa.foo),Ko=function(R){return Array.isArray(ra)===!0&&ra.indexOf(R)>-1};switch(n){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=Ko("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);qt=n}var qr=null;ie(),de();var jr=x.__private__.getPageInfo=x.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[R].objId,pageNumber:R,pageContext:Gt[R]}},Yn=x.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in Gt)if(Gt[Z].objId===R)break;return jr(Z)},Le=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Gt[se].objId,pageNumber:se,pageContext:Gt[se]}};x.addPage=function(){return Vi.apply(this,arguments),this},x.setPage=function(){return xr.apply(this,arguments),Re.call(this,ke[se]),this},x.insertPage=function(R){return this.addPage(),this.movePage(se,R),this},x.movePage=function(R,Z){var me,je;if(R>Z){me=ke[R],je=Gt[R];for(var _e=R;_e>Z;_e--)ke[_e]=ke[_e-1],Gt[_e]=Gt[_e-1];ke[Z]=me,Gt[Z]=je,this.setPage(Z)}else if(R<Z){me=ke[R],je=Gt[R];for(var Ke=R;Ke<Z;Ke++)ke[Ke]=ke[Ke+1],Gt[Ke]=Gt[Ke+1];ke[Z]=me,Gt[Z]=je,this.setPage(Z)}return this},x.deletePage=function(){return Gc.apply(this,arguments),this},x.__private__.text=x.text=function(R,Z,me,je,_e){var Ke,rt,pt,lt,Vt,gt,pr,kr,Kt,ut=(je=je||{}).scope||this;if(typeof R=="number"&&typeof Z=="number"&&(typeof me=="string"||Array.isArray(me))){var Ln=me;me=Z,Z=R,R=Ln}if(arguments[3]instanceof Bt==0?(pt=arguments[4],lt=arguments[5],Mr(pr=arguments[3])==="object"&&pr!==null||(typeof pt=="string"&&(lt=pt,pt=null),typeof pr=="string"&&(lt=pr,pr=null),typeof pr=="number"&&(pt=pr,pr=null),je={flags:pr,angle:pt,align:lt})):(L("The transform parameter of text() with a Matrix value"),Kt=_e),isNaN(Z)||isNaN(me)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return ut;var Qt,nn="",na=typeof je.lineHeightFactor=="number"?je.lineHeightFactor:Ki,Va=ut.internal.scaleFactor;function us(Ye){return Ye=Ye.split("	").join(Array(je.TabLen||9).join(" ")),As(Ye,pr)}function No(Ye){for(var et,Je=Ye.concat(),Dt=[],zt=Je.length;zt--;)typeof(et=Je.shift())=="string"?Dt.push(et):Array.isArray(Ye)&&(et.length===1||et[1]===void 0&&et[2]===void 0)?Dt.push(et[0]):Dt.push([et[0],et[1],et[2]]);return Dt}function jo(Ye,et){var Je;if(typeof Ye=="string")Je=et(Ye)[0];else if(Array.isArray(Ye)){for(var Dt,zt,Zn=Ye.concat(),ba=[],sa=Zn.length;sa--;)typeof(Dt=Zn.shift())=="string"?ba.push(et(Dt)[0]):Array.isArray(Dt)&&typeof Dt[0]=="string"&&(zt=et(Dt[0],Dt[1],Dt[2]),ba.push([zt[0],zt[1],zt[2]]));Je=ba}return Je}var ji=!1,Ao=!0;if(typeof R=="string")ji=!0;else if(Array.isArray(R)){var Co=R.concat();rt=[];for(var sl,wn=Co.length;wn--;)(typeof(sl=Co.shift())!="string"||Array.isArray(sl)&&typeof sl[0]!="string")&&(Ao=!1);ji=Ao}if(ji===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Yi=Ve/ut.internal.scaleFactor,il=Yi*(na-1);switch(je.baseline){case"bottom":me-=il;break;case"top":me+=Yi-il;break;case"hanging":me+=Yi-2*il;break;case"middle":me+=Yi/2-il}if((gt=je.maxWidth||0)>0&&(typeof R=="string"?R=ut.splitTextToSize(R,gt):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Ye,et){return Ye.concat(ut.splitTextToSize(et,gt))},[]))),Ke={text:R,x:Z,y:me,options:je,mutex:{pdfEscape:As,activeFontKey:ht,fonts:qe,activeFontSize:Ve}},br.publish("preProcessText",Ke),R=Ke.text,pt=(je=Ke.options).angle,Kt instanceof Bt==0&&pt&&typeof pt=="number"){pt*=Math.PI/180,je.rotationDirection===0&&(pt=-pt),_===E&&(pt=-pt);var Zi=Math.cos(pt),Zc=Math.sin(pt);Kt=new Bt(Zi,Zc,-Zc,Zi,0,0)}else pt&&pt instanceof Bt&&(Kt=pt);_!==E||Kt||(Kt=Hi),(Vt=je.charSpace||wi)!==void 0&&(nn+=U(Q(Vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(kr=je.horizontalScale)!==void 0&&(nn+=U(100*kr)+` Tz
`),je.lang;var Pr=-1,Cs=je.renderingMode!==void 0?je.renderingMode:je.stroke,aa=ut.internal.getCurrentPageInfo().pageContext;switch(Cs){case 0:case!1:case"fill":Pr=0;break;case 1:case!0:case"stroke":Pr=1;break;case 2:case"fillThenStroke":Pr=2;break;case 3:case"invisible":Pr=3;break;case 4:case"fillAndAddForClipping":Pr=4;break;case 5:case"strokeAndAddPathForClipping":Pr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pr=6;break;case 7:case"addToPathForClipping":Pr=7}var Jc=aa.usedRenderingMode!==void 0?aa.usedRenderingMode:-1;Pr!==-1?nn+=Pr+` Tr
`:Jc!==-1&&(nn+=`0 Tr
`),Pr!==-1&&(aa.usedRenderingMode=Pr),lt=je.align||"left";var Nn,ol=Ve*na,ll=ut.internal.pageSize.getWidth(),Qc=qe[ht];Vt=je.charSpace||wi,gt=je.maxWidth||0,pr=Object.assign({autoencode:!0,noBOM:!0},je.flags);var Ji=[],va=function(Ye){return ut.getStringUnitWidth(Ye,{font:Qc,charSpace:Vt,fontSize:Ve,doKerning:!1})*Ve/Va};if(Object.prototype.toString.call(R)==="[object Array]"){var ds;rt=No(R),lt!=="left"&&(Nn=rt.map(va));var Oa,Ss=0;if(lt==="right"){Z-=Nn[0],R=[],wn=rt.length;for(var tr=0;tr<wn;tr++)tr===0?(Oa=Ht(Z),ds=Vr(me)):(Oa=Q(Ss-Nn[tr]),ds=-ol),R.push([rt[tr],Oa,ds]),Ss=Nn[tr]}else if(lt==="center"){Z-=Nn[0]/2,R=[],wn=rt.length;for(var Hs=0;Hs<wn;Hs++)Hs===0?(Oa=Ht(Z),ds=Vr(me)):(Oa=Q((Ss-Nn[Hs])/2),ds=-ol),R.push([rt[Hs],Oa,ds]),Ss=Nn[Hs]}else if(lt==="left"){R=[],wn=rt.length;for(var X=0;X<wn;X++)R.push(rt[X])}else if(lt==="justify"&&Qc.encoding==="Identity-H"){R=[],wn=rt.length,gt=gt!==0?gt:ll;for(var l=0,f=0;f<wn;f++)if(ds=f===0?Vr(me):-ol,Oa=f===0?Ht(Z):l,f<wn-1){var m=Q((gt-Nn[f])/(rt[f].split(" ").length-1)),g=rt[f].split(" ");R.push([g[0]+" ",Oa,ds]),l=0;for(var y=1;y<g.length;y++){var b=(va(g[y-1]+" "+g[y])-va(g[y]))*Va+m;y==g.length-1?R.push([g[y],b,0]):R.push([g[y]+" ",b,0]),l-=b}}else R.push([rt[f],Oa,ds]);R.push(["",l,0])}else{if(lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],wn=rt.length,gt=gt!==0?gt:ll,f=0;f<wn;f++){ds=f===0?Vr(me):-ol,Oa=f===0?Ht(Z):0;var S=rt[f].split(" ").length-1,T=S>0?(gt-Nn[f])/S:0;f<wn-1?Ji.push(U(Q(T))):Ji.push(0),R.push([rt[f],Oa,ds])}}}(typeof je.R2L=="boolean"?je.R2L:Xt)===!0&&(R=jo(R,function(Ye,et,Je){return[Ye.split("").reverse().join(""),et,Je]})),Ke={text:R,x:Z,y:me,options:je,mutex:{pdfEscape:As,activeFontKey:ht,fonts:qe,activeFontSize:Ve}},br.publish("postProcessText",Ke),R=Ke.text,Qt=Ke.mutex.isHex||!1;var D=qe[ht].encoding;D!=="WinAnsiEncoding"&&D!=="StandardEncoding"||(R=jo(R,function(Ye,et,Je){return[us(Ye),et,Je]})),rt=No(R),R=[];for(var $,Y,ee,fe=Array.isArray(rt[0])?1:0,Ne="",Ae=function(Ye,et,Je){var Dt="";return Je instanceof Bt?(Je=typeof je.angle=="number"?Gn(Je,new Bt(1,0,0,1,Ye,et)):Gn(new Bt(1,0,0,1,Ye,et),Je),_===E&&(Je=Gn(new Bt(1,0,0,-1,0,0),Je)),Dt=Je.join(" ")+` Tm
`):Dt=U(Ye)+" "+U(et)+` Td
`,Dt},Oe=0;Oe<rt.length;Oe++){switch(Ne="",fe){case 1:ee=(Qt?"<":"(")+rt[Oe][0]+(Qt?">":")"),$=parseFloat(rt[Oe][1]),Y=parseFloat(rt[Oe][2]);break;case 0:ee=(Qt?"<":"(")+rt[Oe]+(Qt?">":")"),$=Ht(Z),Y=Vr(me)}Ji!==void 0&&Ji[Oe]!==void 0&&(Ne=Ji[Oe]+` Tw
`),Oe===0?R.push(Ne+Ae($,Y,Kt)+ee):fe===0?R.push(Ne+ee):fe===1&&R.push(Ne+Ae($,Y,Kt)+ee)}R=fe===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Fe=`BT
/`;return Fe+=ht+" "+Ve+` Tf
`,Fe+=U(Ve*na)+` TL
`,Fe+=Qo+`
`,Fe+=nn,Fe+=R,he(Fe+="ET"),v[ht]=!0,ut};var ce=x.__private__.clip=x.clip=function(R){return he(R==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ce("evenodd")},x.__private__.discardPath=x.discardPath=function(){return he("n"),this};var mt=x.__private__.isValidStyle=function(R){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(Z=!0),Z};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(R){return mt(R)&&(d=R),this};var bn=x.__private__.getStyle=x.getStyle=function(R){var Z=d;switch(R){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=R}return Z},_a=x.close=function(){return he("h"),this};x.stroke=function(){return he("S"),this},x.fill=function(R){return wo("f",R),this},x.fillEvenOdd=function(R){return wo("f*",R),this},x.fillStroke=function(R){return wo("B",R),this},x.fillStrokeEvenOdd=function(R){return wo("B*",R),this};var wo=function(R,Z){Mr(Z)==="object"?Rt(Z,R):he(R)},Xo=function(R){R===null||_===E&&R===void 0||(R=bn(R),he(R))};function Ha(R,Z,me,je,_e){var Ke=new Id(Z||this.boundingBox,me||this.xStep,je||this.yStep,this.gState,_e||this.matrix);Ke.stream=this.stream;var rt=R+"$$"+this.cloneIndex+++"$$";return Kn(rt,Ke),Ke}var Rt=function(R,Z){var me=sr[R.key],je=ft[me];if(je instanceof lu)he("q"),he(Hr(Z)),je.gState&&x.setGState(je.gState),he(R.matrix.toString()+" cm"),he("/"+me+" sh"),he("Q");else if(je instanceof Id){var _e=new Bt(1,0,0,-1,0,al());R.matrix&&(_e=_e.multiply(R.matrix||Hi),me=Ha.call(je,R.key,R.boundingBox,R.xStep,R.yStep,_e).id),he("q"),he("/Pattern cs"),he("/"+me+" scn"),je.gState&&x.setGState(je.gState),he(Z),he("Q")}},Hr=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xl=x.moveTo=function(R,Z){return he(U(Q(R))+" "+U(G(Z))+" m"),this},Yo=x.lineTo=function(R,Z){return he(U(Q(R))+" "+U(G(Z))+" l"),this},yi=x.curveTo=function(R,Z,me,je,_e,Ke){return he([U(Q(R)),U(G(Z)),U(Q(me)),U(G(je)),U(Q(_e)),U(G(Ke)),"c"].join(" ")),this};x.__private__.line=x.line=function(R,Z,me,je,_e){if(isNaN(R)||isNaN(Z)||isNaN(me)||isNaN(je)||!mt(_e))throw new Error("Invalid arguments passed to jsPDF.line");return _===k?this.lines([[me-R,je-Z]],R,Z,[1,1],_e||"S"):this.lines([[me-R,je-Z]],R,Z,[1,1]).stroke()},x.__private__.lines=x.lines=function(R,Z,me,je,_e,Ke){var rt,pt,lt,Vt,gt,pr,kr,Kt,ut,Ln,Qt,nn;if(typeof R=="number"&&(nn=me,me=Z,Z=R,R=nn),je=je||[1,1],Ke=Ke||!1,isNaN(Z)||isNaN(me)||!Array.isArray(R)||!Array.isArray(je)||!mt(_e)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xl(Z,me),rt=je[0],pt=je[1],Vt=R.length,Ln=Z,Qt=me,lt=0;lt<Vt;lt++)(gt=R[lt]).length===2?(Ln=gt[0]*rt+Ln,Qt=gt[1]*pt+Qt,Yo(Ln,Qt)):(pr=gt[0]*rt+Ln,kr=gt[1]*pt+Qt,Kt=gt[2]*rt+Ln,ut=gt[3]*pt+Qt,Ln=gt[4]*rt+Ln,Qt=gt[5]*pt+Qt,yi(pr,kr,Kt,ut,Ln,Qt));return Ke&&_a(),Xo(_e),this},x.path=function(R){for(var Z=0;Z<R.length;Z++){var me=R[Z],je=me.c;switch(me.op){case"m":Xl(je[0],je[1]);break;case"l":Yo(je[0],je[1]);break;case"c":yi.apply(this,je);break;case"h":_a()}}return this},x.__private__.rect=x.rect=function(R,Z,me,je,_e){if(isNaN(R)||isNaN(Z)||isNaN(me)||isNaN(je)||!mt(_e))throw new Error("Invalid arguments passed to jsPDF.rect");return _===k&&(je=-je),he([U(Q(R)),U(G(Z)),U(Q(me)),U(Q(je)),"re"].join(" ")),Xo(_e),this},x.__private__.triangle=x.triangle=function(R,Z,me,je,_e,Ke,rt){if(isNaN(R)||isNaN(Z)||isNaN(me)||isNaN(je)||isNaN(_e)||isNaN(Ke)||!mt(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-R,je-Z],[_e-me,Ke-je],[R-_e,Z-Ke]],R,Z,[1,1],rt,!0),this},x.__private__.roundedRect=x.roundedRect=function(R,Z,me,je,_e,Ke,rt){if(isNaN(R)||isNaN(Z)||isNaN(me)||isNaN(je)||isNaN(_e)||isNaN(Ke)||!mt(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pt=4/3*(Math.SQRT2-1);return _e=Math.min(_e,.5*me),Ke=Math.min(Ke,.5*je),this.lines([[me-2*_e,0],[_e*pt,0,_e,Ke-Ke*pt,_e,Ke],[0,je-2*Ke],[0,Ke*pt,-_e*pt,Ke,-_e,Ke],[2*_e-me,0],[-_e*pt,0,-_e,-Ke*pt,-_e,-Ke],[0,2*Ke-je],[0,-Ke*pt,_e*pt,-Ke,_e,-Ke]],R+_e,Z,[1,1],rt,!0),this},x.__private__.ellipse=x.ellipse=function(R,Z,me,je,_e){if(isNaN(R)||isNaN(Z)||isNaN(me)||isNaN(je)||!mt(_e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*me,rt=4/3*(Math.SQRT2-1)*je;return Xl(R+me,Z),yi(R+me,Z-rt,R+Ke,Z-je,R,Z-je),yi(R-Ke,Z-je,R-me,Z-rt,R-me,Z),yi(R-me,Z+rt,R-Ke,Z+je,R,Z+je),yi(R+Ke,Z+je,R+me,Z+rt,R+me,Z),Xo(_e),this},x.__private__.circle=x.circle=function(R,Z,me,je){if(isNaN(R)||isNaN(Z)||isNaN(me)||!mt(je))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,Z,me,me,je)},x.setFont=function(R,Z,me){return me&&(Z=F(Z,me)),ht=lr(R,Z,{disableWarning:!1}),this};var Yl=x.__private__.getFont=x.getFont=function(){return qe[lr.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var R,Z,me={};for(R in jt)if(jt.hasOwnProperty(R))for(Z in me[R]=[],jt[R])jt[R].hasOwnProperty(Z)&&me[R].push(Z);return me},x.addFont=function(R,Z,me,je,_e){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?_e=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(me=F(me,je)),tt.call(this,R,Z,me,_e=_e||"Identity-H")};var Ki,Xc=e.lineWidth||.200025,wt=x.__private__.getLineWidth=x.getLineWidth=function(){return Xc},Zo=x.__private__.setLineWidth=x.setLineWidth=function(R){return Xc=R,he(U(Q(R))+" w"),this};x.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(R,Z){if(R=R||[],Z=Z||0,isNaN(Z)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(me){return U(Q(me))}).join(" "),Z=U(Q(Z)),he("["+R+"] "+Z+" d"),this};var vi=x.__private__.getLineHeight=x.getLineHeight=function(){return Ve*Ki};x.__private__.getLineHeight=x.getLineHeight=function(){return Ve*Ki};var Ft=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Ki=R),this},Bf=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Ki};Ft(e.lineHeight);var Ht=x.__private__.getHorizontalCoordinate=function(R){return Q(R)},Vr=x.__private__.getVerticalCoordinate=function(R){return _===E?R:Gt[se].mediaBox.topRightY-Gt[se].mediaBox.bottomLeftY-Q(R)},Ff=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(R){return U(Ht(R))},Yc=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(R){return U(Vr(R))},Jo=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return rn(Jo)},x.__private__.setStrokeColor=x.setDrawColor=function(R,Z,me,je){return Jo=xa({ch1:R,ch2:Z,ch3:me,ch4:je,pdfColorType:"draw",precision:2}),he(Jo),this};var $s=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return rn($s)},x.__private__.setFillColor=x.setFillColor=function(R,Z,me,je){return $s=xa({ch1:R,ch2:Z,ch3:me,ch4:je,pdfColorType:"fill",precision:2}),he($s),this};var Qo=e.textColor||"0 g",bi=x.__private__.getTextColor=x.getTextColor=function(){return rn(Qo)};x.__private__.setTextColor=x.setTextColor=function(R,Z,me,je){return Qo=xa({ch1:R,ch2:Z,ch3:me,ch4:je,pdfColorType:"text",precision:3}),this};var wi=e.charSpace,el=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(wi||0)};x.__private__.setCharSpace=x.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return wi=R,this};var Zl=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(R){var Z=x.CapJoinStyles[R];if(Z===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zl=Z,he(Z+" J"),this};var Xi=0;x.__private__.setLineJoin=x.setLineJoin=function(R){var Z=x.CapJoinStyles[R];if(Z===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xi=Z,he(Z+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(U(Q(R))+" M"),this},x.GState=Jg,x.setGState=function(R){(R=typeof R=="string"?Zt[dn[R]]:Ws(null,R)).equals(Wt)||(he("/"+R.id+" gs"),Wt=R)};var Ws=function(R,Z){if(!R||!dn[R]){var me=!1;for(var je in Zt)if(Zt.hasOwnProperty(je)&&Zt[je].equals(Z)){me=!0;break}if(me)Z=Zt[je];else{var _e="GS"+(Object.keys(Zt).length+1).toString(10);Zt[_e]=Z,Z.id=_e}return R&&(dn[R]=Z.id),br.publish("addGState",Z),Z}};x.addGState=function(R,Z){return Ws(R,Z),this},x.saveGraphicsState=function(){return he("q"),Mt.push({key:ht,size:Ve,color:Qo}),this},x.restoreGraphicsState=function(){he("Q");var R=Mt.pop();return ht=R.key,Ve=R.size,Qo=R.color,Wt=null,this},x.setCurrentTransformationMatrix=function(R){return he(R.toString()+" cm"),this},x.comment=function(R){return he("#"+R),this};var Pn=function(R,Z){var me=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(Ke){isNaN(Ke)||(me=parseFloat(Ke))}});var je=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return je},set:function(Ke){isNaN(Ke)||(je=parseFloat(Ke))}});var _e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _e},set:function(Ke){_e=Ke.toString()}}),this},Jl=function(R,Z,me,je){Pn.call(this,R,Z),this.type="rect";var _e=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _e},set:function(rt){isNaN(rt)||(_e=parseFloat(rt))}});var Ke=je||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(rt){isNaN(rt)||(Ke=parseFloat(rt))}}),this},tl=function(){this.page=gr,this.currentPage=se,this.pages=ke.slice(0),this.pagesContext=Gt.slice(0),this.x=Et,this.y=$r,this.matrix=Ut,this.width=nd(se),this.height=cr(se),this.outputDestination=We,this.id="",this.objectNumber=-1};tl.prototype.restore=function(){gr=this.page,se=this.currentPage,Gt=this.pagesContext,ke=this.pages,Et=this.x,$r=this.y,Ut=this.matrix,ad(se,this.width),Ni(se,this.height),We=this.outputDestination};var Ql=function(R,Z,me,je,_e){Pa.push(new tl),gr=se=0,ke=[],Et=R,$r=Z,Ut=_e,Wr([me,je])};for(var rl in x.beginFormObject=function(R,Z,me,je,_e){return Ql(R,Z,me,je,_e),this},x.endFormObject=function(R){return function(Z){if(Zr[Z])Pa.pop().restore();else{var me=new tl,je="Xo"+(Object.keys(Vn).length+1).toString(10);me.id=je,Zr[Z]=je,Vn[je]=me,br.publish("addFormObject",me),Pa.pop().restore()}}(R),this},x.doFormObject=function(R,Z){var me=Vn[Zr[R]];return he("q"),he(Z.toString()+" cm"),he("/"+me.id+" Do"),he("Q"),this},x.getFormObject=function(R){var Z=Vn[Zr[R]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},x.save=function(R,Z){return R=R||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(ou(Or(Gi()),R),typeof ou.unload=="function"&&Jt.setTimeout&&setTimeout(ou.unload,911),this):new Promise(function(me,je){try{var _e=ou(Or(Gi()),R);typeof ou.unload=="function"&&Jt.setTimeout&&setTimeout(ou.unload,911),me(_e)}catch(Ke){je(Ke.message)}})},Tt.API)Tt.API.hasOwnProperty(rl)&&(rl==="events"&&Tt.API.events.length?function(R,Z){var me,je,_e;for(_e=Z.length-1;_e!==-1;_e--)me=Z[_e][0],je=Z[_e][1],R.subscribe.apply(R,[me].concat(typeof je=="function"?[je]:je))}(br,Tt.API.events):x[rl]=Tt.API[rl]);function nd(R){return Gt[R].mediaBox.topRightX-Gt[R].mediaBox.bottomLeftX}function ad(R,Z){Gt[R].mediaBox.topRightX=Z+Gt[R].mediaBox.bottomLeftX}function cr(R){return Gt[R].mediaBox.topRightY-Gt[R].mediaBox.bottomLeftY}function Ni(R,Z){Gt[R].mediaBox.topRightY=Z+Gt[R].mediaBox.bottomLeftY}var nl=x.getPageWidth=function(R){return nd(R=R||se)/qt},qs=x.setPageWidth=function(R,Z){ad(R,Z*qt)},al=x.getPageHeight=function(R){return cr(R=R||se)/qt},ze=x.setPageHeight=function(R,Z){Ni(R,Z*qt)};return x.internal={pdfEscape:As,getStyle:bn,getFont:Yl,getFontSize:He,getCharSpace:el,getTextColor:bi,getLineHeight:vi,getLineHeightFactor:Bf,getLineWidth:wt,write:Ze,getHorizontalCoordinate:Ht,getVerticalCoordinate:Vr,getCoordinateString:Ff,getVerticalCoordinateString:Yc,collections:{},newObject:dr,newAdditionalObject:dt,newObjectDeferred:Jr,newObjectDeferredBegin:Tr,getFilters:qa,putStream:Ia,events:br,scaleFactor:qt,pageSize:{getWidth:function(){return nl(se)},setWidth:function(R){qs(se,R)},getHeight:function(){return al(se)},setHeight:function(R){ze(se,R)}},encryptionOptions:h,encryption:qr,getEncryptor:function(R){return h!==null?qr.encryptor(R,0):function(Z){return Z}},output:Xn,getNumberOfPages:mr,pages:ke,out:he,f2:z,f3:q,getPageInfo:jr,getPageInfoByObjId:Yn,getCurrentPageInfo:Le,getPDFVersion:j,Point:Pn,Rectangle:Jl,Matrix:Bt,hasHotfix:Ko},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return nl(se)},set:function(R){qs(se,R)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return al(se)},set:function(R){ze(se,R)},enumerable:!0,configurable:!0}),(function(R){for(var Z=0,me=it.length;Z<me;Z++){var je=tt.call(this,R[Z][0],R[Z][1],R[Z][2],it[Z][3],!0);p===!1&&(v[je]=!0);var _e=R[Z][0].split("-");Kl({id:je,fontName:_e[0],fontStyle:_e[1]||""})}br.publish("addFonts",{fonts:qe,dictionary:jt})}).call(x,it),ht="F1",Vi(s,r),br.publish("initialized"),x}fd.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},fd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fd.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},fd.prototype.processOwnerPassword=function(e,t){return Gb(Vb(t).substr(0,5),e)},fd.prototype.encryptor=function(e,t){var r=Vb(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Gb(r,n)}},Jg.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Mr(e)!==Mr(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Tt.API={events:[]},Tt.version="3.0.3";var Rn=Tt.API,A3=1,td=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ud=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},er=function(e){return e.toFixed(2)},lc=function(e){return e.toFixed(5)};Rn.__acroform__={};var Us=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},OS=function(e){return e*A3},Po=function(e){var t=new SR,r=Nt.internal.getHeight(e)||0,n=Nt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(er(n)),Number(er(r))],t},Cle=Rn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Sle=Rn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Ele=Rn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},$n=Rn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ele(e,t-1)},Wn=Rn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cle(e,t-1)},qn=Rn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Sle(e,t-1)},kle=Rn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],c=e[3],u={};return u.lowerLeft_X=r(s)||0,u.lowerLeft_Y=n(i+c)||0,u.upperRight_X=r(s+o)||0,u.upperRight_Y=n(i)||0,[Number(er(u.lowerLeft_X)),Number(er(u.lowerLeft_Y)),Number(er(u.upperRight_X)),Number(er(u.upperRight_Y))]},Ple=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Kb(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+er(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Po(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Kb=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(z){return z.split(`
`)}):s.map(function(z){return[z]});var i=r,o=Nt.internal.getHeight(e)||0;o=o<0?-o:o;var c=Nt.internal.getWidth(e)||0;c=c<0?-c:c;var u=function(z,q,Q){if(z+1<s.length){var G=q+" "+s[z+1][0];return Qm(G,e,Q).width<=c-4}return!1};i++;e:for(;i>0;){t="",i--;var d,h,p=Qm("3",e,i).height,v=e.multiline?o-i:(o-p)/2,x=v+=2,w=0,j=0,N=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Qm(t,e,i=12).width+", FieldWidth:"+c+`
`;break}for(var A="",k=0,E=0;E<s.length;E++)if(s.hasOwnProperty(E)){var _=!1;if(s[E].length!==1&&N!==s[E].length-1){if((p+2)*(k+2)+2>o)continue e;A+=s[E][N],_=!0,j=E,E--}else{A=(A+=s[E][N]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var O=parseInt(E),B=u(O,A,i),F=E>=s.length-1;if(B&&!F){A+=" ",N=0;continue}if(B||F){if(F)j=O;else if(e.multiline&&(p+2)*(k+2)+2>o)continue e}else{if(!e.multiline||(p+2)*(k+2)+2>o)continue e;j=O}}for(var U="",L=w;L<=j;L++){var K=s[L];if(e.multiline){if(L===j){U+=K[N]+" ",N=(N+1)%K.length;continue}if(L===w){U+=K[K.length-1]+" ";continue}}U+=K[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,h=Qm(U,e,i).width,e.textAlign){case"right":d=c-h-2;break;case"center":d=(c-h)/2;break;default:d=2}t+=er(d)+" "+er(x)+` Td
`,t+="("+td(U)+`) Tj
`,t+=-er(d)+` 0 Td
`,x=-(i+2),h=0,w=_?j:j+1,k++,A=""}break}return n.text=t,n.fontSize=i,n},Qm=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Ile={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Tle=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},_le=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(xo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ile)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");A3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ER,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Tle(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var c=n[o],u=[],d=c.Rect;if(c.Rect&&(c.Rect=kle(c.Rect,s)),s.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Nt.createDefaultAppearanceStream(c),Mr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var h=Ple(c);u.push({key:"AP",value:"<</N "+h+">>"}),s.internal.acroformPlugin.xForms.push(h)}if(c.appearanceStreamContent){var p="";for(var v in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(v)){var x=c.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var o in x)if(x.hasOwnProperty(o)){var w=x[o];typeof w=="function"&&(w=w.call(s,c)),p+="/"+o+" "+w+" ",s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w)}}else typeof(w=x)=="function"&&(w=w.call(s,c)),p+="/"+o+" "+w,s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}s.internal.putStream({additionalKeyValues:u,objectId:c.objId}),s.internal.out("endobj")}i&&function(j,N){for(var A in j)if(j.hasOwnProperty(A)){var k=A,E=j[A];N.internal.newObjectDeferredBegin(E.objId,!0),Mr(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete j[k]}}(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},CR=Rn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Mr(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+td(n(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},by=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+td(n(e))+")"},Oo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Oo.prototype.toString=function(){return this.objId+" 0 R"},Oo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Oo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:CR(s,this.objId,this.scope)}):s instanceof Oo?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var SR=function(){Oo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Us(SR,Oo);var ER=function(){Oo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+td(r(e))+")"}},set:function(r){e=r}})};Us(ER,Oo);var xo=function e(){Oo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');t=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$n(t,3)},set:function(A){A?this.F=Wn(t,3):this.F=qn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');r=A}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(A){n=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(A){n[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(A){n[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(A){n[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(A){n[3]=A}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Qg)return;i="FieldObject"+e.FieldNum++}var A=function(k){return k};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+td(A(i))+")"},set:function(A){i=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(A){i=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(A){c=A}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(A){u=A}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/A3:d},set:function(A){d=A}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Qg||this instanceof Au))return by(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ja==0?by(v,this.objId,this.scope):v},set:function(A){A=A.toString(),v=this instanceof ja==0?A.substr(0,1)==="("?ud(A.substr(1,A.length-2)):ud(A):A}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja==1?ud(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof ja==1?"/"+A:A}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ja==0?by(x,this.objId,this.scope):x},set:function(A){A=A.toString(),x=this instanceof ja==0?A.substr(0,1)==="("?ud(A.substr(1,A.length-2)):ud(A):A}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ja==1?ud(x.substr(1,x.length-1)):x},set:function(A){A=A.toString(),x=this instanceof ja==1?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(A){A=!!A,j=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(A){w=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,1)},set:function(A){A?this.Ff=Wn(this.Ff,1):this.Ff=qn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,2)},set:function(A){A?this.Ff=Wn(this.Ff,2):this.Ff=qn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,3)},set:function(A){A?this.Ff=Wn(this.Ff,3):this.Ff=qn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');N=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(N){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};Us(xo,Oo);var zd=function(){xo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return CR(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,c){c||(c=1);for(var u,d=[];u=o.exec(i);)d.push(u[c]);return d}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,18)},set:function(r){r?this.Ff=Wn(this.Ff,18):this.Ff=qn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Wn(this.Ff,19):this.Ff=qn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,20)},set:function(r){r?(this.Ff=Wn(this.Ff,20),t.sort()):this.Ff=qn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,22)},set:function(r){r?this.Ff=Wn(this.Ff,22):this.Ff=qn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(r){r?this.Ff=Wn(this.Ff,23):this.Ff=qn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,27)},set:function(r){r?this.Ff=Wn(this.Ff,27):this.Ff=qn(this.Ff,27)}}),this.hasAppearanceStream=!1};Us(zd,xo);var $d=function(){zd.call(this),this.fontName="helvetica",this.combo=!1};Us($d,zd);var Wd=function(){$d.call(this),this.combo=!0};Us(Wd,$d);var Np=function(){Wd.call(this),this.edit=!0};Us(Np,Wd);var ja=function(){xo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,15)},set:function(r){r?this.Ff=Wn(this.Ff,15):this.Ff=qn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,16)},set:function(r){r?this.Ff=Wn(this.Ff,16):this.Ff=qn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,17)},set:function(r){r?this.Ff=Wn(this.Ff,17):this.Ff=qn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(r){r?this.Ff=Wn(this.Ff,26):this.Ff=qn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+td(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Mr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Us(ja,xo);var jp=function(){ja.call(this),this.pushButton=!0};Us(jp,ja);var qd=function(){ja.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Us(qd,ja);var Qg=function(){var e,t;xo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(c){return c};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+td(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Mr(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Nt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Us(Qg,xo),qd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},qd.prototype.createOption=function(e){var t=new Qg;return t.Parent=this,t.optionName=e,this.Kids.push(t),Ole.call(this.scope,t),t};var Ap=function(){ja.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Nt.CheckBox.createAppearanceStream()};Us(Ap,ja);var Au=function(){xo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,13)},set:function(t){t?this.Ff=Wn(this.Ff,13):this.Ff=qn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,21)},set:function(t){t?this.Ff=Wn(this.Ff,21):this.Ff=qn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,23)},set:function(t){t?this.Ff=Wn(this.Ff,23):this.Ff=qn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,24)},set:function(t){t?this.Ff=Wn(this.Ff,24):this.Ff=qn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,25)},set:function(t){t?this.Ff=Wn(this.Ff,25):this.Ff=qn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,26)},set:function(t){t?this.Ff=Wn(this.Ff,26):this.Ff=qn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Us(Au,xo);var Cp=function(){Au.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$n(this.Ff,14)},set:function(e){e?this.Ff=Wn(this.Ff,14):this.Ff=qn(this.Ff,14)}}),this.password=!0};Us(Cp,Au);var Nt={CheckBox:{createAppearanceStream:function(){return{N:{On:Nt.CheckBox.YesNormal},D:{On:Nt.CheckBox.YesPushDown,Off:Nt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Kb(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+er(Nt.internal.getWidth(e))+" "+er(Nt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+er(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Po(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=Nt.internal.getHeight(e),o=Nt.internal.getWidth(e),c=Kb(e,e.caption);return s.push("1 g"),s.push("0 0 "+er(o)+" "+er(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+er(o-1)+" "+er(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+er(c.fontSize)+" Tf "+n),s.push(c.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+er(Nt.internal.getWidth(e))+" "+er(Nt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Nt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Nt.RadioButton.Circle.YesNormal,t.D[e]=Nt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Nt.internal.getWidth(e)<=Nt.internal.getHeight(e)?Nt.internal.getWidth(e)/4:Nt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Nt.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+lc(Nt.internal.getWidth(e)/2)+" "+lc(Nt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Nt.internal.getWidth(e)<=Nt.internal.getHeight(e)?Nt.internal.getWidth(e)/4:Nt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Nt.internal.Bezier_C).toFixed(5)),o=Number((n*Nt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+lc(Nt.internal.getWidth(e)/2)+" "+lc(Nt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+lc(Nt.internal.getWidth(e)/2)+" "+lc(Nt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Nt.internal.getWidth(e)<=Nt.internal.getHeight(e)?Nt.internal.getWidth(e)/4:Nt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Nt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+lc(Nt.internal.getWidth(e)/2)+" "+lc(Nt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Nt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Nt.RadioButton.Cross.YesNormal,t.D[e]=Nt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Po(e);t.scope=e.scope;var r=[],n=Nt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+er(Nt.internal.getWidth(e)-2)+" "+er(Nt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(er(n.x1.x)+" "+er(n.x1.y)+" m"),r.push(er(n.x2.x)+" "+er(n.x2.y)+" l"),r.push(er(n.x4.x)+" "+er(n.x4.y)+" m"),r.push(er(n.x3.x)+" "+er(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=Nt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+er(Nt.internal.getWidth(e))+" "+er(Nt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+er(Nt.internal.getWidth(e)-2)+" "+er(Nt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(er(r.x1.x)+" "+er(r.x1.y)+" m"),n.push(er(r.x2.x)+" "+er(r.x2.y)+" l"),n.push(er(r.x4.x)+" "+er(r.x4.y)+" m"),n.push(er(r.x3.x)+" "+er(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Po(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+er(Nt.internal.getWidth(e))+" "+er(Nt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Nt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Nt.internal.getWidth(e),r=Nt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Nt.internal.getWidth=function(e){var t=0;return Mr(e)==="object"&&(t=OS(e.Rect[2])),t},Nt.internal.getHeight=function(e){var t=0;return Mr(e)==="object"&&(t=OS(e.Rect[3])),t};var Ole=Rn.addField=function(e){if(_le(this,e),!(e instanceof xo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Rn.AcroFormChoiceField=zd,Rn.AcroFormListBox=$d,Rn.AcroFormComboBox=Wd,Rn.AcroFormEditBox=Np,Rn.AcroFormButton=ja,Rn.AcroFormPushButton=jp,Rn.AcroFormRadioButton=qd,Rn.AcroFormCheckBox=Ap,Rn.AcroFormTextField=Au,Rn.AcroFormPasswordField=Cp,Rn.AcroFormAppearance=Nt,Rn.AcroForm={ChoiceField:zd,ListBox:$d,ComboBox:Wd,EditBox:Np,Button:ja,PushButton:jp,RadioButton:qd,CheckBox:Ap,TextField:Au,PasswordField:Cp,Appearance:Nt},Tt.AcroForm={ChoiceField:zd,ListBox:$d,ComboBox:Wd,EditBox:Np,Button:ja,PushButton:jp,RadioButton:qd,CheckBox:Ap,TextField:Au,PasswordField:Cp,Appearance:Nt};Tt.AcroForm;function kR(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(z,q){var Q,G,H,ue,ye,de=r;if((q=q||r)==="RGBA"||z.data!==void 0&&z.data instanceof Uint8ClampedArray&&"height"in z&&"width"in z)return"RGBA";if(B(z))for(ye in n)for(H=n[ye],Q=0;Q<H.length;Q+=1){for(ue=!0,G=0;G<H[Q].length;G+=1)if(H[Q][G]!==void 0&&H[Q][G]!==z[G]){ue=!1;break}if(ue===!0){de=ye;break}}else for(ye in n)for(H=n[ye],Q=0;Q<H.length;Q+=1){for(ue=!0,G=0;G<H[Q].length;G+=1)if(H[Q][G]!==void 0&&H[Q][G]!==z.charCodeAt(G)){ue=!1;break}if(ue===!0){de=ye;break}}return de===r&&q!==r&&(de=q),de},i=function z(q){for(var Q=this.internal.write,G=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:q.width}),ue.push({key:"Height",value:q.height}),q.colorSpace===A.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===A.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var ye="",de=0,we=q.transparency.length;de<we;de++)ye+=q.transparency[de]+" "+q.transparency[de]+" ";ue.push({key:"Mask",value:"["+ye+"]"})}q.sMask!==void 0&&ue.push({key:"SMask",value:q.objectId+1+" 0 R"});var Ee=q.filter!==void 0?["/"+q.filter]:void 0;if(G({data:q.data,additionalKeyValues:ue,alreadyAppliedFilters:Ee,objectId:q.objectId}),Q("endobj"),"sMask"in q&&q.sMask!==void 0){var ie,V=(ie=q.sMaskBitsPerComponent)!==null&&ie!==void 0?ie:q.bitsPerComponent,se={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:V,data:q.sMask};"filter"in q&&(se.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(V," /Columns ").concat(q.width),se.filter=q.filter),z.call(this,se)}if(q.colorSpace===A.INDEXED){var ne=this.internal.newObject();G({data:U(new Uint8Array(q.palette)),objectId:ne}),Q("endobj")}},o=function(){var z=this.internal.collections[t+"images"];for(var q in z)i.call(this,z[q])},c=function(){var z,q=this.internal.collections[t+"images"],Q=this.internal.write;for(var G in q)Q("/I"+(z=q[G]).index,z.objectId,"0","R")},u=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var z=this.internal.collections[t+"images"];return u.call(this),z},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(z){return typeof e["process"+z.toUpperCase()]=="function"},v=function(z){return Mr(z)==="object"&&z.nodeType===1},x=function(z,q){if(z.nodeName==="IMG"&&z.hasAttribute("src")){var Q=""+z.getAttribute("src");if(Q.indexOf("data:image/")===0)return wp(unescape(Q).split("base64,").pop());var G=e.loadFile(Q,!0);if(G!==void 0)return G}if(z.nodeName==="CANVAS"){if(z.width===0||z.height===0)throw new Error("Given canvas must have data. Canvas width: "+z.width+", height: "+z.height);var H;switch(q){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return wp(z.toDataURL(H,1).split("base64,").pop())}},w=function(z){var q=this.internal.collections[t+"images"];if(q){for(var Q in q)if(z===q[Q].alias)return q[Q]}},j=function(z,q,Q){return z||q||(z=-96,q=-96),z<0&&(z=-1*Q.width*72/z/this.internal.scaleFactor),q<0&&(q=-1*Q.height*72/q/this.internal.scaleFactor),z===0&&(z=q*Q.width/Q.height),q===0&&(q=z*Q.height/Q.width),[z,q]},N=function(z,q,Q,G,H,ue){var ye=j.call(this,Q,G,H),de=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,Ee=d.call(this);if(Q=ye[0],G=ye[1],Ee[H.index]=H,ue){ue*=Math.PI/180;var ie=Math.cos(ue),V=Math.sin(ue),se=function(ve){return ve.toFixed(4)},ne=[se(ie),se(V),se(-1*V),se(ie),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,de(z),we(q+G),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([de(Q),"0","0",de(G),"0","0","cm"].join(" "))):this.internal.write([de(Q),"0","0",de(G),de(z),we(q+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},A=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=e.__addimage__.sHashCode=function(z){var q,Q,G=0;if(typeof z=="string")for(Q=z.length,q=0;q<Q;q++)G=(G<<5)-G+z.charCodeAt(q),G|=0;else if(B(z))for(Q=z.byteLength/2,q=0;q<Q;q++)G=(G<<5)-G+z[q],G|=0;return G},_=e.__addimage__.validateStringAsBase64=function(z){(z=z||"").toString().trim();var q=!0;return z.length===0&&(q=!1),z.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(z.substr(0,z.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(z.substr(-2))===!1&&(q=!1),q},O=e.__addimage__.extractImageFromDataUrl=function(z){if(z==null||!(z=z.trim()).startsWith("data:"))return null;var q=z.indexOf(",");return q<0?null:z.substring(0,q).trim().endsWith("base64")?z.substring(q+1):null};e.__addimage__.isArrayBuffer=function(z){return z instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(z){return z instanceof Int8Array||z instanceof Uint8Array||z instanceof Uint8ClampedArray||z instanceof Int16Array||z instanceof Uint16Array||z instanceof Int32Array||z instanceof Uint32Array||z instanceof Float32Array||z instanceof Float64Array},F=e.__addimage__.binaryStringToUint8Array=function(z){for(var q=z.length,Q=new Uint8Array(q),G=0;G<q;G++)Q[G]=z.charCodeAt(G);return Q},U=e.__addimage__.arrayBufferToBinaryString=function(z){for(var q="",Q=B(z)?z:new Uint8Array(z),G=0;G<Q.length;G+=8192)q+=String.fromCharCode.apply(null,Q.subarray(G,G+8192));return q};e.addImage=function(){var z,q,Q,G,H,ue,ye,de,we;if(typeof arguments[1]=="number"?(q=r,Q=arguments[1],G=arguments[2],H=arguments[3],ue=arguments[4],ye=arguments[5],de=arguments[6],we=arguments[7]):(q=arguments[1],Q=arguments[2],G=arguments[3],H=arguments[4],ue=arguments[5],ye=arguments[6],de=arguments[7],we=arguments[8]),Mr(z=arguments[0])==="object"&&!v(z)&&"imageData"in z){var Ee=z;z=Ee.imageData,q=Ee.format||q||r,Q=Ee.x||Q||0,G=Ee.y||G||0,H=Ee.w||Ee.width||H,ue=Ee.h||Ee.height||ue,ye=Ee.alias||ye,de=Ee.compression||de,we=Ee.rotation||Ee.angle||we}var ie=this.internal.getFilters();if(de===void 0&&ie.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(Q)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var V=L.call(this,z,q,ye,de);return N.call(this,Q,G,H,ue,V,we),this};var L=function(z,q,Q,G){var H,ue,ye;if(typeof z=="string"&&s(z)===r){z=unescape(z);var de=K(z,!1);(de!==""||(de=e.loadFile(z,!0))!==void 0)&&(z=de)}if(v(z)&&(z=x(z,q)),q=s(z,q),!p(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((ye=Q)==null||ye.length===0)&&(Q=function(we){return typeof we=="string"||B(we)?E(we):B(we.data)?E(we.data):null}(z)),(H=w.call(this,Q))||(z instanceof Uint8Array||q==="RGBA"||(ue=z,z=F(z)),H=this["process"+q.toUpperCase()](z,h.call(this),Q,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in e.image_compression?we:k.NONE}(G),ue)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},K=e.__addimage__.convertBase64ToBinaryString=function(z,q){q=typeof q!="boolean"||q;var Q,G="";if(typeof z=="string"){var H;Q=(H=O(z))!==null&&H!==void 0?H:z;try{G=wp(Q)}catch(ue){if(q)throw _(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(z){var q,Q,G="";if(v(z)&&(z=x(z)),typeof z=="string"&&s(z)===r&&((G=K(z,!1))===""&&(G=e.loadFile(z)||""),z=G),Q=s(z),!p(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(z instanceof Uint8Array||(z=F(z)),!(q=this["process"+Q.toUpperCase()](z)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=Q,q}})(Tt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Tt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,h=!1,p=0;p<d.length&&!h;p++)switch((n=d[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<d.length;v++){n=d[v];var x=this.internal.pdfEscape,w=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(j.objId),k=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+x(A(n.contents))+")",i+=" /Popup "+N.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+x(A(k))+") >>",j.content=i;var E=j.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+E,n.open&&(i+=" /Open true"),i+=" >>",N.content=i,this.internal.write(j.objId,"0 R",N.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+c(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+x(w(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var O=this.annotations._nameMap[n.options.name];n.options.pageNumber=O.page,n.options.top=O.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+x(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var B=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(r),y:d(n),w:u(r+s),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,c,u=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var h=this.splitTextToSize(r,c).length;o=Math.ceil(d*h)}else c=u,o=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=u/2),i.align==="right"&&(n-=u),this.link(n,s-d,c,o,i),u},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Tt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},c=e.__arabicParser__.isArabicEndLetter=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length<=2},u=e.__arabicParser__.isArabicAlfLetter=function(j){return o(j)&&s.indexOf(j.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(j){var N=0,A=r,k="",E=0;for(N=0;N<j.length;N+=1)A[j.charCodeAt(N)]!==void 0?(E++,typeof(A=A[j.charCodeAt(N)])=="number"&&(k+=String.fromCharCode(A),A=r,E=0),N===j.length-1&&(A=r,k+=j.charAt(N-(E-1)),N-=E-1,E=0)):(A=r,k+=j.charAt(N-E),N-=E,E=0);return k};e.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(j,N,A){return o(j)?i(j)===!1?-1:!d(j)||!o(N)&&!o(A)||!o(A)&&c(N)||c(j)&&!o(N)||c(j)&&u(N)||c(j)&&c(N)?0:h(j)&&o(N)&&!c(N)&&o(A)&&d(A)?3:c(j)||!o(A)?1:2:-1},x=function(j){var N=0,A=0,k=0,E="",_="",O="",B=(j=j||"").split("\\s+"),F=[];for(N=0;N<B.length;N+=1){for(F.push(""),A=0;A<B[N].length;A+=1)E=B[N][A],_=B[N][A-1],O=B[N][A+1],o(E)?(k=v(E,_,O),F[N]+=k!==-1?String.fromCharCode(t[E.charCodeAt(0)][k]):E):F[N]+=E;F[N]=p(F[N])}return F.join(" ")},w=e.__arabicParser__.processArabic=e.processArabic=function(){var j,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(N)){var k=0;for(A=[],k=0;k<N.length;k+=1)Array.isArray(N[k])?A.push([x(N[k][0]),N[k][1],N[k][2]]):A.push([x(N[k])]);j=A}else j=x(N);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};e.events.push(["preProcessText",w])}(Tt.API),Tt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(c){o=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Tt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(j){v=j}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(j){w=j}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},e.getTextDimensions=function(u,d){n.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),p=d.font||this.getFont(),v=d.scaleFactor||this.internal.scaleFactor,x=0,w=0,j=0,N=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var A=d.maxWidth;A>0?typeof u=="string"?u=this.splitTextToSize(u,A):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(E,_){return E.concat(N.splitTextToSize(_,A))},[])):u=Array.isArray(u)?u:[u];for(var k=0;k<u.length;k++)x<(j=this.getStringUnitWidth(u[k],{font:p})*h)&&(x=j);return x!==0&&(w=u.length),{w:x/=v,h:Math.max((w*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,x&&v&&(this.printHeaderRow(u.lineNumber,!0),u.y+=v[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-h,u.y+h,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+h,{align:"center",baseline:"top",maxWidth:u.width-h-h}):this.text(u.text,u.x+h,u.y+h,{align:"left",baseline:"top",maxWidth:u.width-h-h})),this.internal.__cell__.lastCell=u,this};e.table=function(u,d,h,p,v){if(n.call(this),!h)throw new Error("No data for PDF table.");var x,w,j,N,A=[],k=[],E=[],_={},O={},B=[],F=[],U=(v=v||{}).autoSize||!1,L=v.printHeaders!==!1,K=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,z=v.margins||Object.assign({width:this.getPageWidth()},t),q=typeof v.padding=="number"?v.padding:3,Q=v.headerBackgroundColor||"#c8c8c8",G=v.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=z,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=G,this.setFontSize(K),p==null)k=A=Object.keys(h[0]),E=A.map(function(){return"left"});else if(Array.isArray(p)&&Mr(p[0])==="object")for(A=p.map(function(Ee){return Ee.name}),k=p.map(function(Ee){return Ee.prompt||Ee.name||""}),E=p.map(function(Ee){return Ee.align||"left"}),x=0;x<p.length;x+=1)O[p[x].name]=.7499990551181103*p[x].width;else Array.isArray(p)&&typeof p[0]=="string"&&(k=A=p,E=A.map(function(){return"left"}));if(U||Array.isArray(p)&&typeof p[0]=="string")for(x=0;x<A.length;x+=1){for(_[N=A[x]]=h.map(function(Ee){return Ee[N]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(k[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=_[N],this.setFont(void 0,"normal"),j=0;j<w.length;j+=1)B.push(this.getTextDimensions(w[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[N]=Math.max.apply(null,B)+q+q,B=[]}if(L){var H={};for(x=0;x<A.length;x+=1)H[A[x]]={},H[A[x]].text=k[x],H[A[x]].align=E[x];var ue=c.call(this,H,O);F=A.map(function(Ee){return new i(u,d,O[Ee],ue,H[Ee].text,void 0,H[Ee].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var ye=p.reduce(function(Ee,ie){return Ee[ie.name]=ie.align,Ee},{});for(x=0;x<h.length;x+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:x,data:h[x]},this);var de=c.call(this,h[x],O);for(j=0;j<A.length;j+=1){var we=h[x][A[j]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:x,col:j,data:we},this),o.call(this,new i(u,d,O[A[j]],de,we,x+2,ye[A[j]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var c=function(u,d){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(u).map(function(x){var w=u[x];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,d[x]-h-h)},this).map(function(x){return this.getLineHeightFactor()*x.length*p/v+h+h},this).reduce(function(x,w){return Math.max(x,w)},0)};e.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},e.printHeaderRow=function(u,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){h=this.internal.__cell__.tableHeaderRow[x].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=u;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(w)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}}(Tt.API);var PR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},IR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xb=kR(IR),TR=[100,200,300,400,500,600,700,800,900],Rle=kR(TR);function wy(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return PR[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),s=function(i){return typeof Xb[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function RS(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var Dle={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},DS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function LS(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function MS(e){return e.trimLeft()}function Lle(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Mle(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ep,BS,FS,dd,tp,US,zS,$S,Ny=["times"];function WS(e,t,r,n,s){var i=4,o=HS;switch(s){case Tt.API.image_compression.FAST:i=1,o=qS;break;case Tt.API.image_compression.MEDIUM:i=6,o=VS;break;case Tt.API.image_compression.SLOW:i=9,o=GS}e=function(u,d,h,p){for(var v,x=u.length/d,w=new Uint8Array(u.length+x),j=[Ble,qS,HS,VS,GS],N=0;N<x;N+=1){var A=N*d,k=u.subarray(A,A+d);if(p)w.set(p(k,h,v),A+N);else{for(var E=j.length,_=[],O=0;O<E;O+=1)_[O]=j[O](k,h,v);var B=Ule(_.concat());w.set(_[B],A+N)}v=k}return w}(e,t,Math.ceil(r*n/8),o);var c=$b(e,{level:i});return Tt.API.__addimage__.arrayBufferToBinaryString(c)}function Ble(e){var t=Array.apply([],e);return t.unshift(0),t}function qS(e,t){var r=e.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=e[s-t]||0;n[s+1]=e[s]-i+256&255}return n}function HS(e,t,r){var n=e.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;s[i+1]=e[i]-o+256&255}return s}function VS(e,t,r){var n=e.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var o=e[i-t]||0,c=r&&r[i]||0;s[i+1]=e[i]+256-(o+c>>>1)&255}return s}function GS(e,t,r){var n=e.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var o=Fle(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);s[i+1]=e[i]-o+256&255}return s}function Fle(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),s=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=s&&n<=i?e:s<=i?t:r}function Ule(e){var t=e.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function jy(e,t,r){var n=t*r,s=Math.floor(n/8),i=16-(n-8*s+r),o=(1<<r)-1;return _R(e,s)>>i&o}function KS(e,t,r,n){var s=r*n,i=Math.floor(s/8),o=16-(s-8*i+n),c=(1<<n)-1,u=(t&c)<<o;(function(d,h,p){if(h+1<d.byteLength)d.setUint16(h,p,!1);else{var v=p>>8&255;d.setUint8(h,v)}})(e,i,_R(e,i)&~(c<<o)&65535|u)}function _R(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function zle(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<1+(7&s);e[t++],e[t++];var c=null,u=null;i&&(c=t,u=o,t+=3*o);var d=!0,h=[],p=0,v=null,x=0,w=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,w=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((z=e[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=e[t++];p=e[t++]|e[t++]<<8,v=e[t++],1&j||(v=null),x=j>>2&7,t++;break;case 254:for(;;){if(!((z=e[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var N=e[t++]|e[t++]<<8,A=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,_=e[t++],O=_>>6&1,B=1<<1+(7&_),F=c,U=u,L=!1;_>>7&&(L=!0,F=t,U=B,t+=3*B);var K=t;for(t++;;){var z;if(!((z=e[t++])>=0))throw Error("Invalid block size");if(z===0)break;t+=z}h.push({x:N,y:A,width:k,height:E,has_local_palette:L,palette_offset:F,palette_size:U,data_offset:K,data_length:t-K,transparent_index:v,interlaced:!!O,delay:p,disposal:x});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return w},this.frameInfo=function(q){if(q<0||q>=h.length)throw new Error("Frame index out of range.");return h[q]},this.decodeAndBlitFrameBGRA=function(q,Q){var G=this.frameInfo(q),H=G.width*G.height,ue=new Uint8Array(H);XS(e,G.data_offset,ue,H);var ye=G.palette_offset,de=G.transparent_index;de===null&&(de=256);var we=G.width,Ee=r-we,ie=we,V=4*(G.y*r+G.x),se=4*((G.y+G.height)*r+G.x),ne=V,ve=4*Ee;G.interlaced===!0&&(ve+=4*r*7);for(var be=8,Te=0,xe=ue.length;Te<xe;++Te){var le=ue[Te];if(ie===0&&(ie=we,(ne+=ve)>=se&&(ve=4*Ee+4*r*(be-1),ne=V+(we+Ee)*(be<<1),be>>=1)),le===de)ne+=4;else{var Ce=e[ye+3*le],ke=e[ye+3*le+1],Ie=e[ye+3*le+2];Q[ne++]=Ie,Q[ne++]=ke,Q[ne++]=Ce,Q[ne++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(q,Q){var G=this.frameInfo(q),H=G.width*G.height,ue=new Uint8Array(H);XS(e,G.data_offset,ue,H);var ye=G.palette_offset,de=G.transparent_index;de===null&&(de=256);var we=G.width,Ee=r-we,ie=we,V=4*(G.y*r+G.x),se=4*((G.y+G.height)*r+G.x),ne=V,ve=4*Ee;G.interlaced===!0&&(ve+=4*r*7);for(var be=8,Te=0,xe=ue.length;Te<xe;++Te){var le=ue[Te];if(ie===0&&(ie=we,(ne+=ve)>=se&&(ve=4*Ee+4*r*(be-1),ne=V+(we+Ee)*(be<<1),be>>=1)),le===de)ne+=4;else{var Ce=e[ye+3*le],ke=e[ye+3*le+1],Ie=e[ye+3*le+2];Q[ne++]=Ce,Q[ne++]=ke,Q[ne++]=Ie,Q[ne++]=255}--ie}}}function XS(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,c=o+1,u=s+1,d=(1<<u)-1,h=0,p=0,v=0,x=e[t++],w=new Int32Array(4096),j=null;;){for(;h<16&&x!==0;)p|=e[t++]<<h,h+=8,x===1?x=e[t++]:--x;if(h<u)break;var N=p&d;if(p>>=u,h-=u,N!==i){if(N===o)break;for(var A=N<c?N:j,k=0,E=A;E>i;)E=w[E]>>8,++k;var _=E;if(v+k+(A!==N?1:0)>n)return void Xr.log("Warning, gif stream longer than expected.");r[v++]=_;var O=v+=k;for(A!==N&&(r[v++]=_),E=A;k--;)E=w[E],r[--O]=255&E,E>>=8;j!==null&&c<4096&&(w[c++]=j<<8|_,c>=d+1&&u<12&&(++u,d=d<<1|1)),j=N}else c=o+1,d=(1<<(u=s+1))-1,j=null}return v!==n&&Xr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ay(e){var t,r,n,s,i,o=Math.floor,c=new Array(64),u=new Array(64),d=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),x=new Array(64),w=new Array(64),j=[],N=0,A=7,k=new Array(64),E=new Array(64),_=new Array(64),O=new Array(256),B=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(V,se){for(var ne=0,ve=0,be=new Array,Te=1;Te<=16;Te++){for(var xe=1;xe<=V[Te];xe++)be[se[ve]]=[],be[se[ve]][0]=ne,be[se[ve]][1]=Te,ve++,ne++;ne*=2}return be}function ye(V){for(var se=V[0],ne=V[1]-1;ne>=0;)se&1<<ne&&(N|=1<<A),ne--,--A<0&&(N==255?(de(255),de(0)):de(N),A=7,N=0)}function de(V){j.push(V)}function we(V){de(V>>8&255),de(255&V)}function Ee(V,se,ne,ve,be){for(var Te,xe=be[0],le=be[240],Ce=function(Ve,At){var He,Xt,Ot,ar,Yt,Lt,Sr,$t,ht,qt,Et=0;for(ht=0;ht<8;++ht){He=Ve[Et],Xt=Ve[Et+1],Ot=Ve[Et+2],ar=Ve[Et+3],Yt=Ve[Et+4],Lt=Ve[Et+5],Sr=Ve[Et+6];var $r=He+($t=Ve[Et+7]),Ut=He-$t,qe=Xt+Sr,jt=Xt-Sr,Mt=Ot+Lt,ft=Ot-Lt,sr=ar+Yt,Zt=ar-Yt,dn=$r+sr,Wt=$r-sr,gr=qe+Mt,Gt=qe-Mt;Ve[Et]=dn+gr,Ve[Et+4]=dn-gr;var br=.707106781*(Gt+Wt);Ve[Et+2]=Wt+br,Ve[Et+6]=Wt-br;var ra=.382683433*((dn=Zt+ft)-(Gt=jt+Ut)),Vn=.5411961*dn+ra,Zr=1.306562965*Gt+ra,Pa=.707106781*(gr=ft+jt),Bt=Ut+Pa,Gn=Ut-Pa;Ve[Et+5]=Gn+Vn,Ve[Et+3]=Gn-Vn,Ve[Et+1]=Bt+Zr,Ve[Et+7]=Bt-Zr,Et+=8}for(Et=0,ht=0;ht<8;++ht){He=Ve[Et],Xt=Ve[Et+8],Ot=Ve[Et+16],ar=Ve[Et+24],Yt=Ve[Et+32],Lt=Ve[Et+40],Sr=Ve[Et+48];var Hi=He+($t=Ve[Et+56]),Kn=He-$t,Wa=Xt+Sr,dr=Xt-Sr,Jr=Ot+Lt,Tr=Ot-Lt,dt=ar+Yt,ls=ar-Yt,cs=Hi+dt,rn=Hi-dt,xa=Wa+Jr,qa=Wa-Jr;Ve[Et]=cs+xa,Ve[Et+32]=cs-xa;var Ia=.707106781*(qa+rn);Ve[Et+16]=rn+Ia,Ve[Et+48]=rn-Ia;var ya=.382683433*((cs=ls+Tr)-(qa=dr+Kn)),xi=.5411961*cs+ya,Go=1.306562965*qa+ya,Ta=.707106781*(xa=Tr+dr),kn=Kn+Ta,Er=Kn-Ta;Ve[Et+40]=Er+xi,Ve[Et+24]=Er-xi,Ve[Et+8]=kn+Go,Ve[Et+56]=kn-Go,Et++}for(ht=0;ht<64;++ht)qt=Ve[ht]*At[ht],x[ht]=qt>0?qt+.5|0:qt-.5|0;return x}(V,se),ke=0;ke<64;++ke)w[F[ke]]=Ce[ke];var Ie=w[0]-ne;ne=w[0],Ie==0?ye(ve[0]):(ye(ve[v[Te=32767+Ie]]),ye(p[Te]));for(var We=63;We>0&&w[We]==0;)We--;if(We==0)return ye(xe),ne;for(var Re,he=1;he<=We;){for(var Ze=he;w[he]==0&&he<=We;)++he;var ot=he-Ze;if(ot>=16){Re=ot>>4;for(var it=1;it<=Re;++it)ye(le);ot&=15}Te=32767+w[he],ye(be[(ot<<4)+v[Te]]),ye(p[Te]),he++}return We!=63&&ye(xe),ne}function ie(V){V=Math.min(Math.max(V,1),100),i!=V&&(function(se){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ve=0;ve<64;ve++){var be=o((ne[ve]*se+50)/100);be=Math.min(Math.max(be,1),255),c[F[ve]]=be}for(var Te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var le=o((Te[xe]*se+50)/100);le=Math.min(Math.max(le,1),255),u[F[xe]]=le}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,Ie=0;Ie<8;Ie++)for(var We=0;We<8;We++)d[ke]=1/(c[F[ke]]*Ce[Ie]*Ce[We]*8),h[ke]=1/(u[F[ke]]*Ce[Ie]*Ce[We]*8),ke++}(V<50?Math.floor(5e3/V):Math.floor(200-2*V)),i=V)}this.encode=function(V,se){se&&ie(se),j=new Array,N=0,A=7,we(65496),we(65504),we(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),we(1),we(1),de(0),de(0),function(){we(65499),we(132),de(0);for(var Xt=0;Xt<64;Xt++)de(c[Xt]);de(1);for(var Ot=0;Ot<64;Ot++)de(u[Ot])}(),function(Xt,Ot){we(65472),we(17),de(8),we(Ot),we(Xt),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)}(V.width,V.height),function(){we(65476),we(418),de(0);for(var Xt=0;Xt<16;Xt++)de(U[Xt+1]);for(var Ot=0;Ot<=11;Ot++)de(L[Ot]);de(16);for(var ar=0;ar<16;ar++)de(K[ar+1]);for(var Yt=0;Yt<=161;Yt++)de(z[Yt]);de(1);for(var Lt=0;Lt<16;Lt++)de(q[Lt+1]);for(var Sr=0;Sr<=11;Sr++)de(Q[Sr]);de(17);for(var $t=0;$t<16;$t++)de(G[$t+1]);for(var ht=0;ht<=161;ht++)de(H[ht])}(),we(65498),we(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var ne=0,ve=0,be=0;N=0,A=7,this.encode.displayName="_encode_";for(var Te,xe,le,Ce,ke,Ie,We,Re,he,Ze=V.data,ot=V.width,it=V.height,Ve=4*ot,At=0;At<it;){for(Te=0;Te<Ve;){for(ke=Ve*At+Te,We=-1,Re=0,he=0;he<64;he++)Ie=ke+(Re=he>>3)*Ve+(We=4*(7&he)),At+Re>=it&&(Ie-=Ve*(At+1+Re-it)),Te+We>=Ve&&(Ie-=Te+We-Ve+4),xe=Ze[Ie++],le=Ze[Ie++],Ce=Ze[Ie++],k[he]=(B[xe]+B[le+256|0]+B[Ce+512|0]>>16)-128,E[he]=(B[xe+768|0]+B[le+1024|0]+B[Ce+1280|0]>>16)-128,_[he]=(B[xe+1280|0]+B[le+1536|0]+B[Ce+1792|0]>>16)-128;ne=Ee(k,d,ne,t,n),ve=Ee(E,h,ve,r,s),be=Ee(_,h,be,r,s),Te+=32}At+=8}if(A>=0){var He=[];He[1]=A+1,He[0]=(1<<A+1)-1,ye(He)}return we(65497),new Uint8Array(j)},e=e||50,function(){for(var V=String.fromCharCode,se=0;se<256;se++)O[se]=V(se)}(),t=ue(U,L),r=ue(q,Q),n=ue(K,z),s=ue(G,H),function(){for(var V=1,se=2,ne=1;ne<=15;ne++){for(var ve=V;ve<se;ve++)v[32767+ve]=ne,p[32767+ve]=[],p[32767+ve][1]=ne,p[32767+ve][0]=ve;for(var be=-(se-1);be<=-V;be++)v[32767+be]=ne,p[32767+be]=[],p[32767+be][1]=ne,p[32767+be][0]=se-1+be;V<<=1,se<<=1}}(),function(){for(var V=0;V<256;V++)B[V]=19595*V,B[V+256|0]=38470*V,B[V+512|0]=7471*V+32768,B[V+768|0]=-11059*V,B[V+1024|0]=-21709*V,B[V+1280|0]=32768*V+8421375,B[V+1536|0]=-27439*V,B[V+1792|0]=-5329*V}(),ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function no(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YS(e){function t(L){if(!L)throw Error("assert :P")}function r(L,K,z){for(var q=0;4>q;q++)if(L[K+q]!=z.charCodeAt(q))return!0;return!1}function n(L,K,z,q,Q){for(var G=0;G<Q;G++)L[K+G]=z[q+G]}function s(L,K,z,q){for(var Q=0;Q<q;Q++)L[K+Q]=z}function i(L){return new Int32Array(L)}function o(L,K){for(var z=[],q=0;q<L;q++)z.push(new K);return z}function c(L,K){var z=[];return function q(Q,G,H){for(var ue=H[G],ye=0;ye<ue&&(Q.push(H.length>G+1?[]:new K),!(H.length<G+1));ye++)q(Q[ye],G+1,H)}(z,0,L),z}var u=function(){var L=this;function K(C,I){for(var M=1<<I-1>>>0;C&M;)M>>>=1;return M?(C&M-1)+M:C}function z(C,I,M,W,J){t(!(W%M));do C[I+(W-=M)]=J;while(0<W)}function q(C,I,M,W,J){if(t(2328>=J),512>=J)var te=i(512);else if((te=i(J))==null)return 0;return function(re,ae,oe,pe,Se,Be){var ge,Pe,De=ae,Ge=1<<oe,Me=i(16),Xe=i(16);for(t(Se!=0),t(pe!=null),t(re!=null),t(0<oe),Pe=0;Pe<Se;++Pe){if(15<pe[Pe])return 0;++Me[pe[Pe]]}if(Me[0]==Se)return 0;for(Xe[1]=0,ge=1;15>ge;++ge){if(Me[ge]>1<<ge)return 0;Xe[ge+1]=Xe[ge]+Me[ge]}for(Pe=0;Pe<Se;++Pe)ge=pe[Pe],0<pe[Pe]&&(Be[Xe[ge]++]=Pe);if(Xe[15]==1)return(pe=new Q).g=0,pe.value=Be[0],z(re,De,1,Ge,pe),Ge;var Qe,at=-1,nt=Ge-1,It=0,bt=1,ir=1,Ct=1<<oe;for(Pe=0,ge=1,Se=2;ge<=oe;++ge,Se<<=1){if(bt+=ir<<=1,0>(ir-=Me[ge]))return 0;for(;0<Me[ge];--Me[ge])(pe=new Q).g=ge,pe.value=Be[Pe++],z(re,De+It,Se,Ct,pe),It=K(It,ge)}for(ge=oe+1,Se=2;15>=ge;++ge,Se<<=1){if(bt+=ir<<=1,0>(ir-=Me[ge]))return 0;for(;0<Me[ge];--Me[ge]){if(pe=new Q,(It&nt)!=at){for(De+=Ct,Qe=1<<(at=ge)-oe;15>at&&!(0>=(Qe-=Me[at]));)++at,Qe<<=1;Ge+=Ct=1<<(Qe=at-oe),re[ae+(at=It&nt)].g=Qe+oe,re[ae+at].value=De-ae-at}pe.g=ge-oe,pe.value=Be[Pe++],z(re,De+(It>>oe),Se,Ct,pe),It=K(It,ge)}}return bt!=2*Xe[15]-1?0:Ge}(C,I,M,W,J,te)}function Q(){this.value=this.g=0}function G(){this.value=this.g=0}function H(){this.G=o(5,Q),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(va,G)}function ue(C,I,M,W){t(C!=null),t(I!=null),t(2147483648>W),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=I,C.pa=M,C.Jd=I,C.Yc=M+W,C.Zc=4<=W?M+W-4+1:M,xe(C)}function ye(C,I){for(var M=0;0<I--;)M|=Ce(C,128)<<I;return M}function de(C,I){var M=ye(C,I);return le(C)?-M:M}function we(C,I,M,W){var J,te=0;for(t(C!=null),t(I!=null),t(4294967288>W),C.Sb=W,C.Ra=0,C.u=0,C.h=0,4<W&&(W=4),J=0;J<W;++J)te+=I[M+J]<<8*J;C.Ra=te,C.bb=W,C.oa=I,C.pa=M}function Ee(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<Ss-8>>>0,++C.bb,C.u-=8;ve(C)&&(C.h=1,C.u=0)}function ie(C,I){if(t(0<=I),!C.h&&I<=Oa){var M=ne(C)&ds[I];return C.u+=I,Ee(C),M}return C.h=1,C.u=0}function V(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(C){return C.Ra>>>(C.u&Ss-1)>>>0}function ve(C){return t(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>Ss}function be(C,I){C.u=I,C.h=ve(C)}function Te(C){C.u>=tr&&(t(C.u>=tr),Ee(C))}function xe(C){t(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(t(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function le(C){return ye(C,1)}function Ce(C,I){var M=C.Ca;0>C.b&&xe(C);var W=C.b,J=M*I>>>8,te=(C.I>>>W>J)+0;for(te?(M-=J,C.I-=J+1<<W>>>0):M=J+1,W=M,J=0;256<=W;)J+=8,W>>=8;return W=7^J+Hs[W],C.b-=W,C.Ca=(M<<W)-1,te}function ke(C,I,M){C[I+0]=M>>24&255,C[I+1]=M>>16&255,C[I+2]=M>>8&255,C[I+3]=255&M}function Ie(C,I){return C[I+0]|C[I+1]<<8}function We(C,I){return Ie(C,I)|C[I+2]<<16}function Re(C,I){return Ie(C,I)|Ie(C,I+2)<<16}function he(C,I){var M=1<<I;return t(C!=null),t(0<I),C.X=i(M),C.X==null?0:(C.Mb=32-I,C.Xa=I,1)}function Ze(C,I){t(C!=null),t(I!=null),t(C.Xa==I.Xa),n(I.X,0,C.X,0,1<<I.Xa)}function ot(){this.X=[],this.Xa=this.Mb=0}function it(C,I,M,W){t(M!=null),t(W!=null);var J=M[0],te=W[0];return J==0&&(J=(C*te+I/2)/I),te==0&&(te=(I*J+C/2)/C),0>=J||0>=te?0:(M[0]=J,W[0]=te,1)}function Ve(C,I){return C+(1<<I)-1>>>I}function At(C,I){return((4278255360&C)+(4278255360&I)>>>0&4278255360)+((16711935&C)+(16711935&I)>>>0&16711935)>>>0}function He(C,I){L[I]=function(M,W,J,te,re,ae,oe){var pe;for(pe=0;pe<re;++pe){var Se=L[C](ae[oe+pe-1],J,te+pe);ae[oe+pe]=At(M[W+pe],Se)}}}function Xt(){this.ud=this.hd=this.jd=0}function Ot(C,I){return((4278124286&(C^I))>>>1)+(C&I)>>>0}function ar(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function Yt(C,I){return ar(C+(C-I+.5>>1))}function Lt(C,I,M){return Math.abs(I-M)-Math.abs(C-M)}function Sr(C,I,M,W,J,te,re){for(W=te[re-1],M=0;M<J;++M)te[re+M]=W=At(C[I+M],W)}function $t(C,I,M,W,J){var te;for(te=0;te<M;++te){var re=C[I+te],ae=re>>8&255,oe=16711935&(oe=(oe=16711935&re)+((ae<<16)+ae));W[J+te]=(4278255360&re)+oe>>>0}}function ht(C,I){I.jd=255&C,I.hd=C>>8&255,I.ud=C>>16&255}function qt(C,I,M,W,J,te){var re;for(re=0;re<W;++re){var ae=I[M+re],oe=ae>>>8,pe=ae,Se=255&(Se=(Se=ae>>>16)+((C.jd<<24>>24)*(oe<<24>>24)>>>5));pe=255&(pe=(pe+=(C.hd<<24>>24)*(oe<<24>>24)>>>5)+((C.ud<<24>>24)*(Se<<24>>24)>>>5)),J[te+re]=(4278255360&ae)+(Se<<16)+pe}}function Et(C,I,M,W,J){L[I]=function(te,re,ae,oe,pe,Se,Be,ge,Pe){for(oe=Be;oe<ge;++oe)for(Be=0;Be<Pe;++Be)pe[Se++]=J(ae[W(te[re++])])},L[C]=function(te,re,ae,oe,pe,Se,Be){var ge=8>>te.b,Pe=te.Ea,De=te.K[0],Ge=te.w;if(8>ge)for(te=(1<<te.b)-1,Ge=(1<<ge)-1;re<ae;++re){var Me,Xe=0;for(Me=0;Me<Pe;++Me)Me&te||(Xe=W(oe[pe++])),Se[Be++]=J(De[Xe&Ge]),Xe>>=ge}else L["VP8LMapColor"+M](oe,pe,De,Ge,Se,Be,re,ae,Pe)}}function $r(C,I,M,W,J){for(M=I+M;I<M;){var te=C[I++];W[J++]=te>>16&255,W[J++]=te>>8&255,W[J++]=255&te}}function Ut(C,I,M,W,J){for(M=I+M;I<M;){var te=C[I++];W[J++]=te>>16&255,W[J++]=te>>8&255,W[J++]=255&te,W[J++]=te>>24&255}}function qe(C,I,M,W,J){for(M=I+M;I<M;){var te=(re=C[I++])>>16&240|re>>12&15,re=240&re|re>>28&15;W[J++]=te,W[J++]=re}}function jt(C,I,M,W,J){for(M=I+M;I<M;){var te=(re=C[I++])>>16&248|re>>13&7,re=re>>5&224|re>>3&31;W[J++]=te,W[J++]=re}}function Mt(C,I,M,W,J){for(M=I+M;I<M;){var te=C[I++];W[J++]=255&te,W[J++]=te>>8&255,W[J++]=te>>16&255}}function ft(C,I,M,W,J,te){if(te==0)for(M=I+M;I<M;)ke(W,((te=C[I++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),J+=32;else n(W,J,C,I,M)}function sr(C,I){L[I][0]=L[C+"0"],L[I][1]=L[C+"1"],L[I][2]=L[C+"2"],L[I][3]=L[C+"3"],L[I][4]=L[C+"4"],L[I][5]=L[C+"5"],L[I][6]=L[C+"6"],L[I][7]=L[C+"7"],L[I][8]=L[C+"8"],L[I][9]=L[C+"9"],L[I][10]=L[C+"10"],L[I][11]=L[C+"11"],L[I][12]=L[C+"12"],L[I][13]=L[C+"13"],L[I][14]=L[C+"0"],L[I][15]=L[C+"0"]}function Zt(C){return C==Fx||C==Ux||C==em||C==zx}function dn(){this.eb=[],this.size=this.A=this.fb=0}function Wt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dn,this.f.kb=new Wt,this.sd=null}function Gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function br(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ra(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function Vn(C,I){var M=C.T,W=I.ba.f.RGBA,J=W.eb,te=W.fb+C.ka*W.A,re=Ci[I.ba.S],ae=C.y,oe=C.O,pe=C.f,Se=C.N,Be=C.ea,ge=C.W,Pe=I.cc,De=I.dc,Ge=I.Mc,Me=I.Nc,Xe=C.ka,Qe=C.ka+C.T,at=C.U,nt=at+1>>1;for(Xe==0?re(ae,oe,null,null,pe,Se,Be,ge,pe,Se,Be,ge,J,te,null,null,at):(re(I.ec,I.fc,ae,oe,Pe,De,Ge,Me,pe,Se,Be,ge,J,te-W.A,J,te,at),++M);Xe+2<Qe;Xe+=2)Pe=pe,De=Se,Ge=Be,Me=ge,Se+=C.Rc,ge+=C.Rc,te+=2*W.A,re(ae,(oe+=2*C.fa)-C.fa,ae,oe,Pe,De,Ge,Me,pe,Se,Be,ge,J,te-W.A,J,te,at);return oe+=C.fa,C.j+Qe<C.o?(n(I.ec,I.fc,ae,oe,at),n(I.cc,I.dc,pe,Se,nt),n(I.Mc,I.Nc,Be,ge,nt),M--):1&Qe||re(ae,oe,null,null,pe,Se,Be,ge,pe,Se,Be,ge,J,te+W.A,null,null,at),M}function Zr(C,I,M){var W=C.F,J=[C.J];if(W!=null){var te=C.U,re=I.ba.S,ae=re==Q0||re==em;I=I.ba.f.RGBA;var oe=[0],pe=C.ka;oe[0]=C.T,C.Kb&&(pe==0?--oe[0]:(--pe,J[0]-=C.width),C.j+C.ka+C.T==C.o&&(oe[0]=C.o-C.j-pe));var Se=I.eb;pe=I.fb+pe*I.A,C=P3(W,J[0],C.width,te,oe,Se,pe+(ae?0:3),I.A),t(M==oe),C&&Zt(re)&&eu(Se,pe,ae,te,oe,I.A)}return 0}function Pa(C){var I=C.ma,M=I.ba.S,W=11>M,J=M==Z0||M==J0||M==Q0||M==Bx||M==12||Zt(M);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!ll(I.Oa,C,J?11:12))return 0;if(J&&Zt(M)&&us(),C.da)alert("todo:use_scaling");else{if(W){if(I.Ib=ra,C.Kb){if(M=C.U+1>>1,I.memory=i(C.U+2*M),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+C.U,I.Mc=I.cc,I.Nc=I.dc+M,I.Ib=Vn,us()}}else alert("todo:EmitYUV");J&&(I.Jb=Zr,W&&na())}if(W&&!H3){for(C=0;256>C;++C)DD[C]=89858*(C-128)+rm>>tm,BD[C]=-22014*(C-128)+rm,MD[C]=-45773*(C-128),LD[C]=113618*(C-128)+rm>>tm;for(C=zf;C<qx;++C)I=76283*(C-16)+rm>>tm,FD[C-zf]=Pr(I,255),UD[C-zf]=Pr(I+8>>4,15);H3=1}return 1}function Bt(C){var I=C.ma,M=C.U,W=C.T;return t(!(1&C.ka)),0>=M||0>=W?0:(M=I.Ib(C,I),I.Jb!=null&&I.Jb(C,I,M),I.Dc+=M,1)}function Gn(C){C.ma.memory=null}function Hi(C,I,M,W){return ie(C,8)!=47?0:(I[0]=ie(C,14)+1,M[0]=ie(C,14)+1,W[0]=ie(C,1),ie(C,3)!=0?0:!C.h)}function Kn(C,I){if(4>C)return C+1;var M=C-2>>1;return(2+(1&C)<<M)+ie(I,M)+1}function Wa(C,I){return 120<I?I-120:1<=(M=((M=wD[I-1])>>4)*C+(8-(15&M)))?M:1;var M}function dr(C,I,M){var W=ne(M),J=C[I+=255&W].g-8;return 0<J&&(be(M,M.u+8),W=ne(M),I+=C[I].value,I+=W&(1<<J)-1),be(M,M.u+C[I].g),C[I].value}function Jr(C,I,M){return M.g+=C.g,M.value+=C.value<<I>>>0,t(8>=M.g),C.g}function Tr(C,I,M){var W=C.xc;return t((I=W==0?0:C.vc[C.md*(M>>W)+(I>>W)])<C.Wb),C.Ya[I]}function dt(C,I,M,W){var J=C.ab,te=C.c*I,re=C.C;I=re+I;var ae=M,oe=W;for(W=C.Ta,M=C.Ua;0<J--;){var pe=C.gc[J],Se=re,Be=I,ge=ae,Pe=oe,De=(oe=W,ae=M,pe.Ea);switch(t(Se<Be),t(Be<=pe.nc),pe.hc){case 2:f(ge,Pe,(Be-Se)*De,oe,ae);break;case 0:var Ge=Se,Me=Be,Xe=oe,Qe=ae,at=(Ct=pe).Ea;Ge==0&&(X(ge,Pe,null,null,1,Xe,Qe),Sr(ge,Pe+1,0,0,at-1,Xe,Qe+1),Pe+=at,Qe+=at,++Ge);for(var nt=1<<Ct.b,It=nt-1,bt=Ve(at,Ct.b),ir=Ct.K,Ct=Ct.w+(Ge>>Ct.b)*bt;Ge<Me;){var yr=ir,ia=Ct,or=1;for(l(ge,Pe,Xe,Qe-at,1,Xe,Qe);or<at;){var St=(or&~It)+nt;St>at&&(St=at),(0,S[yr[ia++]>>8&15])(ge,Pe+ +or,Xe,Qe+or-at,St-or,Xe,Qe+or),or=St}Pe+=at,Qe+=at,++Ge&It||(Ct+=bt)}Be!=pe.nc&&n(oe,ae-De,oe,ae+(Be-Se-1)*De,De);break;case 1:for(De=ge,Me=Pe,at=(ge=pe.Ea)-(Qe=ge&~(Xe=(Pe=1<<pe.b)-1)),Ge=Ve(ge,pe.b),nt=pe.K,pe=pe.w+(Se>>pe.b)*Ge;Se<Be;){for(It=nt,bt=pe,ir=new Xt,Ct=Me+Qe,yr=Me+ge;Me<Ct;)ht(It[bt++],ir),T(ir,De,Me,Pe,oe,ae),Me+=Pe,ae+=Pe;Me<yr&&(ht(It[bt++],ir),T(ir,De,Me,at,oe,ae),Me+=at,ae+=at),++Se&Xe||(pe+=Ge)}break;case 3:if(ge==oe&&Pe==ae&&0<pe.b){for(Me=oe,ge=De=ae+(Be-Se)*De-(Qe=(Be-Se)*Ve(pe.Ea,pe.b)),Pe=oe,Xe=ae,Ge=[],Qe=(at=Qe)-1;0<=Qe;--Qe)Ge[Qe]=Pe[Xe+Qe];for(Qe=at-1;0<=Qe;--Qe)Me[ge+Qe]=Ge[Qe];m(pe,Se,Be,oe,De,oe,ae)}else m(pe,Se,Be,ge,Pe,oe,ae)}ae=W,oe=M}oe!=M&&n(W,M,ae,oe,te)}function ls(C,I){var M=C.V,W=C.Ba+C.c*C.C,J=I-C.C;if(t(I<=C.l.o),t(16>=J),0<J){var te=C.l,re=C.Ta,ae=C.Ua,oe=te.width;if(dt(C,J,M,W),J=ae=[ae],t((M=C.C)<(W=I)),t(te.v<te.va),W>te.o&&(W=te.o),M<te.j){var pe=te.j-M;M=te.j,J[0]+=pe*oe}if(M>=W?M=0:(J[0]+=4*te.v,te.ka=M-te.j,te.U=te.va-te.v,te.T=W-M,M=1),M){if(ae=ae[0],11>(M=C.ca).S){var Se=M.f.RGBA,Be=(W=M.S,J=te.U,te=te.T,pe=Se.eb,Se.A),ge=te;for(Se=Se.fb+C.Ma*Se.A;0<ge--;){var Pe=re,De=ae,Ge=J,Me=pe,Xe=Se;switch(W){case Y0:D(Pe,De,Ge,Me,Xe);break;case Z0:$(Pe,De,Ge,Me,Xe);break;case Fx:$(Pe,De,Ge,Me,Xe),eu(Me,Xe,0,Ge,1,0);break;case L3:fe(Pe,De,Ge,Me,Xe);break;case J0:ft(Pe,De,Ge,Me,Xe,1);break;case Ux:ft(Pe,De,Ge,Me,Xe,1),eu(Me,Xe,0,Ge,1,0);break;case Q0:ft(Pe,De,Ge,Me,Xe,0);break;case em:ft(Pe,De,Ge,Me,Xe,0),eu(Me,Xe,1,Ge,1,0);break;case Bx:Y(Pe,De,Ge,Me,Xe);break;case zx:Y(Pe,De,Ge,Me,Xe),k3(Me,Xe,Ge,1,0);break;case M3:ee(Pe,De,Ge,Me,Xe);break;default:t(0)}ae+=oe,Se+=Be}C.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");t(C.Ma<=M.height)}}C.C=I,t(C.C<=C.i)}function cs(C){var I;if(0<C.ua)return 0;for(I=0;I<C.Wb;++I){var M=C.Ya[I].G,W=C.Ya[I].H;if(0<M[1][W[1]+0].g||0<M[2][W[2]+0].g||0<M[3][W[3]+0].g)return 0}return 1}function rn(C,I,M,W,J,te){if(C.Z!=0){var re=C.qd,ae=C.rd;for(t(tc[C.Z]!=null);I<M;++I)tc[C.Z](re,ae,W,J,W,J,te),re=W,ae=J,J+=te;C.qd=re,C.rd=ae}}function xa(C,I){var M=C.l.ma,W=M.Z==0||M.Z==1?C.l.j:C.C;if(W=C.C<W?W:C.C,t(I<=C.l.o),I>W){var J=C.l.width,te=M.ca,re=M.tb+J*W,ae=C.V,oe=C.Ba+C.c*W,pe=C.gc;t(C.ab==1),t(pe[0].hc==3),y(pe[0],W,I,ae,oe,te,re),rn(M,W,I,te,re,J)}C.C=C.Ma=I}function qa(C,I,M,W,J,te,re){var ae=C.$/W,oe=C.$%W,pe=C.m,Se=C.s,Be=M+C.$,ge=Be;J=M+W*J;var Pe=M+W*te,De=280+Se.ua,Ge=C.Pb?ae:16777216,Me=0<Se.ua?Se.Wa:null,Xe=Se.wc,Qe=Be<Pe?Tr(Se,oe,ae):null;t(C.C<te),t(Pe<=J);var at=!1;e:for(;;){for(;at||Be<Pe;){var nt=0;if(ae>=Ge){var It=Be-M;t((Ge=C).Pb),Ge.wd=Ge.m,Ge.xd=It,0<Ge.s.ua&&Ze(Ge.s.Wa,Ge.s.vb),Ge=ae+jD}if(oe&Xe||(Qe=Tr(Se,oe,ae)),t(Qe!=null),Qe.Qb&&(I[Be]=Qe.qb,at=!0),!at)if(Te(pe),Qe.jc){nt=pe,It=I;var bt=Be,ir=Qe.pd[ne(nt)&va-1];t(Qe.jc),256>ir.g?(be(nt,nt.u+ir.g),It[bt]=ir.value,nt=0):(be(nt,nt.u+ir.g-256),t(256<=ir.value),nt=ir.value),nt==0&&(at=!0)}else nt=dr(Qe.G[0],Qe.H[0],pe);if(pe.h)break;if(at||256>nt){if(!at)if(Qe.nd)I[Be]=(Qe.qb|nt<<8)>>>0;else{if(Te(pe),at=dr(Qe.G[1],Qe.H[1],pe),Te(pe),It=dr(Qe.G[2],Qe.H[2],pe),bt=dr(Qe.G[3],Qe.H[3],pe),pe.h)break;I[Be]=(bt<<24|at<<16|nt<<8|It)>>>0}if(at=!1,++Be,++oe>=W&&(oe=0,++ae,re!=null&&ae<=te&&!(ae%16)&&re(C,ae),Me!=null))for(;ge<Be;)nt=I[ge++],Me.X[(506832829*nt&4294967295)>>>Me.Mb]=nt}else if(280>nt){if(nt=Kn(nt-256,pe),It=dr(Qe.G[4],Qe.H[4],pe),Te(pe),It=Wa(W,It=Kn(It,pe)),pe.h)break;if(Be-M<It||J-Be<nt)break e;for(bt=0;bt<nt;++bt)I[Be+bt]=I[Be+bt-It];for(Be+=nt,oe+=nt;oe>=W;)oe-=W,++ae,re!=null&&ae<=te&&!(ae%16)&&re(C,ae);if(t(Be<=J),oe&Xe&&(Qe=Tr(Se,oe,ae)),Me!=null)for(;ge<Be;)nt=I[ge++],Me.X[(506832829*nt&4294967295)>>>Me.Mb]=nt}else{if(!(nt<De))break e;for(at=nt-280,t(Me!=null);ge<Be;)nt=I[ge++],Me.X[(506832829*nt&4294967295)>>>Me.Mb]=nt;nt=Be,t(!(at>>>(It=Me).Xa)),I[nt]=It.X[at],at=!0}at||t(pe.h==ve(pe))}if(C.Pb&&pe.h&&Be<J)t(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&Ze(C.s.vb,C.s.Wa);else{if(pe.h)break e;re!=null&&re(C,ae>te?te:ae),C.a=0,C.$=Be-M}return 1}return C.a=3,0}function Ia(C){t(C!=null),C.vc=null,C.yc=null,C.Ya=null;var I=C.Wa;I!=null&&(I.X=null),C.vb=null,t(C!=null)}function ya(){var C=new lt;return C==null?null:(C.a=0,C.xb=U3,sr("Predictor","VP8LPredictors"),sr("Predictor","VP8LPredictors_C"),sr("PredictorAdd","VP8LPredictorsAdd"),sr("PredictorAdd","VP8LPredictorsAdd_C"),f=$t,T=qt,D=$r,$=Ut,Y=qe,ee=jt,fe=Mt,L.VP8LMapColor32b=g,L.VP8LMapColor8b=b,C)}function xi(C,I,M,W,J){var te=1,re=[C],ae=[I],oe=W.m,pe=W.s,Se=null,Be=0;e:for(;;){if(M)for(;te&&ie(oe,1);){var ge=re,Pe=ae,De=W,Ge=1,Me=De.m,Xe=De.gc[De.ab],Qe=ie(Me,2);if(De.Oc&1<<Qe)te=0;else{switch(De.Oc|=1<<Qe,Xe.hc=Qe,Xe.Ea=ge[0],Xe.nc=Pe[0],Xe.K=[null],++De.ab,t(4>=De.ab),Qe){case 0:case 1:Xe.b=ie(Me,3)+2,Ge=xi(Ve(Xe.Ea,Xe.b),Ve(Xe.nc,Xe.b),0,De,Xe.K),Xe.K=Xe.K[0];break;case 3:var at,nt=ie(Me,8)+1,It=16<nt?0:4<nt?1:2<nt?2:3;if(ge[0]=Ve(Xe.Ea,It),Xe.b=It,at=Ge=xi(nt,1,0,De,Xe.K)){var bt,ir=nt,Ct=Xe,yr=1<<(8>>Ct.b),ia=i(yr);if(ia==null)at=0;else{var or=Ct.K[0],St=Ct.w;for(ia[0]=Ct.K[0][0],bt=1;bt<1*ir;++bt)ia[bt]=At(or[St+bt],ia[bt-1]);for(;bt<4*yr;++bt)ia[bt]=0;Ct.K[0]=null,Ct.K[0]=ia,at=1}}Ge=at;break;case 2:break;default:t(0)}te=Ge}}if(re=re[0],ae=ae[0],te&&ie(oe,1)&&!(te=1<=(Be=ie(oe,4))&&11>=Be)){W.a=3;break e}var ct;if(ct=te)t:{var Mn,rr,vr,an=W,Ra=re,fs=ae,In=Be,Ka=M,hs=an.m,oa=an.s,wr=[null],Rr=1,Tn=0,Dr=ND[In];r:for(;;){if(Ka&&ie(hs,1)){var Da=ie(hs,3)+2,eo=Ve(Ra,Da),Bn=Ve(fs,Da),Es=eo*Bn;if(!xi(eo,Bn,0,an,wr))break r;for(wr=wr[0],oa.xc=Da,Mn=0;Mn<Es;++Mn){var Gr=wr[Mn]>>8&65535;wr[Mn]=Gr,Gr>=Rr&&(Rr=Gr+1)}}if(hs.h)break r;for(rr=0;5>rr;++rr){var la=B3[rr];!rr&&0<In&&(la+=1<<In),Tn<la&&(Tn=la)}var Gs=o(Rr*Dr,Q),ms=Rr,Ks=o(ms,H);if(Ks==null)var Xs=null;else t(65536>=ms),Xs=Ks;var ks=i(Tn);if(Xs==null||ks==null||Gs==null){an.a=1;break r}var Ys=Gs;for(Mn=vr=0;Mn<Rr;++Mn){var Qr=Xs[Mn],Zs=Qr.G,to=Qr.H,tu=0,fl=1,La=0;for(rr=0;5>rr;++rr){la=B3[rr],Zs[rr]=Ys,to[rr]=vr,!rr&&0<In&&(la+=1<<In);a:{var am,Hx=la,sm=an,$f=ks,WD=Ys,qD=vr,Vx=0,rc=sm.m,HD=ie(rc,1);if(s($f,0,0,Hx),HD){var VD=ie(rc,1)+1,GD=ie(rc,1),K3=ie(rc,GD==0?1:8);$f[K3]=1,VD==2&&($f[K3=ie(rc,8)]=1);var im=1}else{var X3=i(19),Y3=ie(rc,4)+4;if(19<Y3){sm.a=3;var om=0;break a}for(am=0;am<Y3;++am)X3[bD[am]]=ie(rc,3);var Gx=void 0,Wf=void 0,Z3=sm,KD=X3,lm=Hx,J3=$f,Kx=0,nc=Z3.m,Q3=8,e4=o(128,Q);n:for(;q(e4,0,7,KD,19);){if(ie(nc,1)){var XD=2+2*ie(nc,3);if((Gx=2+ie(nc,XD))>lm)break n}else Gx=lm;for(Wf=0;Wf<lm&&Gx--;){Te(nc);var t4=e4[0+(127&ne(nc))];be(nc,nc.u+t4.g);var sd=t4.value;if(16>sd)J3[Wf++]=sd,sd!=0&&(Q3=sd);else{var YD=sd==16,r4=sd-16,ZD=yD[r4],n4=ie(nc,xD[r4])+ZD;if(Wf+n4>lm)break n;for(var JD=YD?Q3:0;0<n4--;)J3[Wf++]=JD}}Kx=1;break n}Kx||(Z3.a=3),im=Kx}(im=im&&!rc.h)&&(Vx=q(WD,qD,8,$f,Hx)),im&&Vx!=0?om=Vx:(sm.a=3,om=0)}if(om==0)break r;if(fl&&vD[rr]==1&&(fl=Ys[vr].g==0),tu+=Ys[vr].g,vr+=om,3>=rr){var qf,Xx=ks[0];for(qf=1;qf<la;++qf)ks[qf]>Xx&&(Xx=ks[qf]);La+=Xx}}if(Qr.nd=fl,Qr.Qb=0,fl&&(Qr.qb=(Zs[3][to[3]+0].value<<24|Zs[1][to[1]+0].value<<16|Zs[2][to[2]+0].value)>>>0,tu==0&&256>Zs[0][to[0]+0].value&&(Qr.Qb=1,Qr.qb+=Zs[0][to[0]+0].value<<8)),Qr.jc=!Qr.Qb&&6>La,Qr.jc){var cm,hl=Qr;for(cm=0;cm<va;++cm){var ac=cm,sc=hl.pd[ac],um=hl.G[0][hl.H[0]+ac];256<=um.value?(sc.g=um.g+256,sc.value=um.value):(sc.g=0,sc.value=0,ac>>=Jr(um,8,sc),ac>>=Jr(hl.G[1][hl.H[1]+ac],16,sc),ac>>=Jr(hl.G[2][hl.H[2]+ac],0,sc),Jr(hl.G[3][hl.H[3]+ac],24,sc))}}}oa.vc=wr,oa.Wb=Rr,oa.Ya=Xs,oa.yc=Gs,ct=1;break t}ct=0}if(!(te=ct)){W.a=3;break e}if(0<Be){if(pe.ua=1<<Be,!he(pe.Wa,Be)){W.a=1,te=0;break e}}else pe.ua=0;var Yx=W,a4=re,QD=ae,Zx=Yx.s,Jx=Zx.xc;if(Yx.c=a4,Yx.i=QD,Zx.md=Ve(a4,Jx),Zx.wc=Jx==0?-1:(1<<Jx)-1,M){W.xb=ID;break e}if((Se=i(re*ae))==null){W.a=1,te=0;break e}te=(te=qa(W,Se,0,re,ae,ae,null))&&!oe.h;break e}return te?(J!=null?J[0]=Se:(t(Se==null),t(M)),W.$=0,M||Ia(pe)):Ia(pe),te}function Go(C,I){var M=C.c*C.i,W=M+I+16*I;return t(C.c<=I),C.V=i(W),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+M+I,1)}function Ta(C,I){var M=C.C,W=I-M,J=C.V,te=C.Ba+C.c*M;for(t(I<=C.l.o);0<W;){var re=16<W?16:W,ae=C.l.ma,oe=C.l.width,pe=oe*re,Se=ae.ca,Be=ae.tb+oe*M,ge=C.Ta,Pe=C.Ua;dt(C,re,J,te),I3(ge,Pe,Se,Be,pe),rn(ae,M,M+re,Se,Be,oe),W-=re,J+=re*C.c,M+=re}t(M==I),C.C=C.Ma=I}function kn(){this.ub=this.yd=this.td=this.Rb=0}function Er(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rd(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function js(){this.Yb=function(){var C=[];return function I(M,W,J){for(var te=J[W],re=0;re<te&&(M.push(J.length>W+1?[]:0),!(J.length<W+1));re++)I(M[re],W+1,J)}(C,0,[3,11]),C}()}function Kl(){this.jb=i(3),this.Wc=c([4,8],js),this.Xc=c([4,17],js)}function tt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function As(){this.ld=this.La=this.dd=this.tc=0}function Wr(){this.Na=this.la=0}function Vi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xr(){this.uc=this.M=this.Nb=0,this.wa=Array(new As),this.Y=0,this.ya=Array(new Gc),this.aa=0,this.l=new bo}function mr(){this.y=i(16),this.f=i(8),this.ea=i(8)}function lr(){this.cb=this.a=0,this.sc="",this.m=new V,this.Od=new kn,this.Kc=new Er,this.ed=new tt,this.Qa=new rd,this.Ic=this.$c=this.Aa=0,this.D=new xr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,V),this.ia=0,this.pb=o(4,Vi),this.Pa=new Kl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new mr),this.Hd=0,this.rb=Array(new Wr),this.sb=0,this.wa=Array(new As),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gc),this.L=this.aa=0,this.gd=c([4,2],As),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kc(){var C=new lr;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,Uf||(Uf=Gi)),C}function fn(C,I,M){return C.a==0&&(C.a=I,C.sc=M,C.cb=0),0}function hn(C,I,M){return 3<=M&&C[I+0]==157&&C[I+1]==1&&C[I+2]==42}function zs(C,I){if(C==null)return 0;if(C.a=0,C.sc="OK",I==null)return fn(C,2,"null VP8Io passed to VP8GetHeaders()");var M=I.data,W=I.w,J=I.ha;if(4>J)return fn(C,7,"Truncated header.");var te=M[W+0]|M[W+1]<<8|M[W+2]<<16,re=C.Od;if(re.Rb=!(1&te),re.td=te>>1&7,re.yd=te>>4&1,re.ub=te>>5,3<re.td)return fn(C,3,"Incorrect keyframe parameters.");if(!re.yd)return fn(C,4,"Frame not displayable.");W+=3,J-=3;var ae=C.Kc;if(re.Rb){if(7>J)return fn(C,7,"cannot parse picture header");if(!hn(M,W,J))return fn(C,3,"Bad code word");ae.c=16383&(M[W+4]<<8|M[W+3]),ae.Td=M[W+4]>>6,ae.i=16383&(M[W+6]<<8|M[W+5]),ae.Ud=M[W+6]>>6,W+=7,J-=7,C.za=ae.c+15>>4,C.Ub=ae.i+15>>4,I.width=ae.c,I.height=ae.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,s((te=C.Pa).jb,0,255,te.jb.length),t((te=C.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,s(te.Zb,0,0,te.Zb.length),s(te.Lb,0,0,te.Lb)}if(re.ub>J)return fn(C,7,"bad partition length");ue(te=C.m,M,W,re.ub),W+=re.ub,J-=re.ub,re.Rb&&(ae.Ld=le(te),ae.Kd=le(te)),ae=C.Qa;var oe,pe=C.Pa;if(t(te!=null),t(ae!=null),ae.Cb=le(te),ae.Cb){if(ae.Bb=le(te),le(te)){for(ae.Fb=le(te),oe=0;4>oe;++oe)ae.Zb[oe]=le(te)?de(te,7):0;for(oe=0;4>oe;++oe)ae.Lb[oe]=le(te)?de(te,6):0}if(ae.Bb)for(oe=0;3>oe;++oe)pe.jb[oe]=le(te)?ye(te,8):255}else ae.Bb=0;if(te.Ka)return fn(C,3,"cannot parse segment header");if((ae=C.ed).zd=le(te),ae.Tb=ye(te,6),ae.wb=ye(te,3),ae.Pc=le(te),ae.Pc&&le(te)){for(pe=0;4>pe;++pe)le(te)&&(ae.vd[pe]=de(te,6));for(pe=0;4>pe;++pe)le(te)&&(ae.od[pe]=de(te,6))}if(C.L=ae.Tb==0?0:ae.zd?1:2,te.Ka)return fn(C,3,"cannot parse filter header");var Se=J;if(J=oe=W,W=oe+Se,ae=Se,C.Xb=(1<<ye(C.m,2))-1,Se<3*(pe=C.Xb))M=7;else{for(oe+=3*pe,ae-=3*pe,Se=0;Se<pe;++Se){var Be=M[J+0]|M[J+1]<<8|M[J+2]<<16;Be>ae&&(Be=ae),ue(C.Jc[+Se],M,oe,Be),oe+=Be,ae-=Be,J+=3}ue(C.Jc[+pe],M,oe,ae),M=oe<W?0:5}if(M!=0)return fn(C,M,"cannot parse partitions");for(M=ye(oe=C.m,7),J=le(oe)?de(oe,4):0,W=le(oe)?de(oe,4):0,ae=le(oe)?de(oe,4):0,pe=le(oe)?de(oe,4):0,oe=le(oe)?de(oe,4):0,Se=C.Qa,Be=0;4>Be;++Be){if(Se.Cb){var ge=Se.Zb[Be];Se.Fb||(ge+=M)}else{if(0<Be){C.pb[Be]=C.pb[0];continue}ge=M}var Pe=C.pb[Be];Pe.Sc[0]=$x[Pr(ge+J,127)],Pe.Sc[1]=Wx[Pr(ge+0,127)],Pe.Eb[0]=2*$x[Pr(ge+W,127)],Pe.Eb[1]=101581*Wx[Pr(ge+ae,127)]>>16,8>Pe.Eb[1]&&(Pe.Eb[1]=8),Pe.Qc[0]=$x[Pr(ge+pe,117)],Pe.Qc[1]=Wx[Pr(ge+oe,127)],Pe.lc=ge+oe}if(!re.Rb)return fn(C,4,"Not a key frame.");for(le(te),re=C.Pa,M=0;4>M;++M){for(J=0;8>J;++J)for(W=0;3>W;++W)for(ae=0;11>ae;++ae)pe=Ce(te,kD[M][J][W][ae])?ye(te,8):SD[M][J][W][ae],re.Wc[M][J].Yb[W][ae]=pe;for(J=0;17>J;++J)re.Xc[M][J]=re.Wc[M][PD[J]]}return C.kc=le(te),C.kc&&(C.Bd=ye(te,8)),C.cb=1}function Gi(C,I,M,W,J,te,re){var ae=I[J].Yb[M];for(M=0;16>J;++J){if(!Ce(C,ae[M+0]))return J;for(;!Ce(C,ae[M+1]);)if(ae=I[++J].Yb[0],M=0,J==16)return 16;var oe=I[J+1].Yb;if(Ce(C,ae[M+2])){var pe=C,Se=0;if(Ce(pe,(ge=ae)[(Be=M)+3]))if(Ce(pe,ge[Be+6])){for(ae=0,Be=2*(Se=Ce(pe,ge[Be+8]))+(ge=Ce(pe,ge[Be+9+Se])),Se=0,ge=AD[Be];ge[ae];++ae)Se+=Se+Ce(pe,ge[ae]);Se+=3+(8<<Be)}else Ce(pe,ge[Be+7])?(Se=7+2*Ce(pe,165),Se+=Ce(pe,145)):Se=5+Ce(pe,159);else Se=Ce(pe,ge[Be+4])?3+Ce(pe,ge[Be+5]):2;ae=oe[2]}else Se=1,ae=oe[1];oe=re+CD[J],0>(pe=C).b&&xe(pe);var Be,ge=pe.b,Pe=(Be=pe.Ca>>1)-(pe.I>>ge)>>31;--pe.b,pe.Ca+=Pe,pe.Ca|=1,pe.I-=(Be+1&Pe)<<ge,te[oe]=((Se^Pe)-Pe)*W[(0<J)+0]}return 16}function Or(C){var I=C.rb[C.sb-1];I.la=0,I.Na=0,s(C.zc,0,0,C.zc.length),C.ja=0}function Xn(C,I,M,W,J){J=C[I+M+32*W]+(J>>3),C[I+M+32*W]=-256&J?0>J?0:255:J}function Ko(C,I,M,W,J,te){Xn(C,I,0,M,W+J),Xn(C,I,1,M,W+te),Xn(C,I,2,M,W-te),Xn(C,I,3,M,W-J)}function qr(C){return(20091*C>>16)+C}function jr(C,I,M,W){var J,te=0,re=i(16);for(J=0;4>J;++J){var ae=C[I+0]+C[I+8],oe=C[I+0]-C[I+8],pe=(35468*C[I+4]>>16)-qr(C[I+12]),Se=qr(C[I+4])+(35468*C[I+12]>>16);re[te+0]=ae+Se,re[te+1]=oe+pe,re[te+2]=oe-pe,re[te+3]=ae-Se,te+=4,I++}for(J=te=0;4>J;++J)ae=(C=re[te+0]+4)+re[te+8],oe=C-re[te+8],pe=(35468*re[te+4]>>16)-qr(re[te+12]),Xn(M,W,0,0,ae+(Se=qr(re[te+4])+(35468*re[te+12]>>16))),Xn(M,W,1,0,oe+pe),Xn(M,W,2,0,oe-pe),Xn(M,W,3,0,ae-Se),te++,W+=32}function Yn(C,I,M,W){var J=C[I+0]+4,te=35468*C[I+4]>>16,re=qr(C[I+4]),ae=35468*C[I+1]>>16;Ko(M,W,0,J+re,C=qr(C[I+1]),ae),Ko(M,W,1,J+te,C,ae),Ko(M,W,2,J-te,C,ae),Ko(M,W,3,J-re,C,ae)}function Le(C,I,M,W,J){jr(C,I,M,W),J&&jr(C,I+16,M,W+4)}function ce(C,I,M,W){Ae(C,I+0,M,W,1),Ae(C,I+32,M,W+128,1)}function mt(C,I,M,W){var J;for(C=C[I+0]+4,J=0;4>J;++J)for(I=0;4>I;++I)Xn(M,W,I,J,C)}function bn(C,I,M,W){C[I+0]&&Ye(C,I+0,M,W),C[I+16]&&Ye(C,I+16,M,W+4),C[I+32]&&Ye(C,I+32,M,W+128),C[I+48]&&Ye(C,I+48,M,W+128+4)}function _a(C,I,M,W){var J,te=i(16);for(J=0;4>J;++J){var re=C[I+0+J]+C[I+12+J],ae=C[I+4+J]+C[I+8+J],oe=C[I+4+J]-C[I+8+J],pe=C[I+0+J]-C[I+12+J];te[0+J]=re+ae,te[8+J]=re-ae,te[4+J]=pe+oe,te[12+J]=pe-oe}for(J=0;4>J;++J)re=(C=te[0+4*J]+3)+te[3+4*J],ae=te[1+4*J]+te[2+4*J],oe=te[1+4*J]-te[2+4*J],pe=C-te[3+4*J],M[W+0]=re+ae>>3,M[W+16]=pe+oe>>3,M[W+32]=re-ae>>3,M[W+48]=pe-oe>>3,W+=64}function wo(C,I,M){var W,J=I-32,te=Vs,re=255-C[J-1];for(W=0;W<M;++W){var ae,oe=te,pe=re+C[I-1];for(ae=0;ae<M;++ae)C[I+ae]=oe[pe+C[J+ae]];I+=32}}function Xo(C,I){wo(C,I,4)}function Ha(C,I){wo(C,I,8)}function Rt(C,I){wo(C,I,16)}function Hr(C,I){var M;for(M=0;16>M;++M)n(C,I+32*M,C,I-32,16)}function Xl(C,I){var M;for(M=16;0<M;--M)s(C,I,C[I-1],16),I+=32}function Yo(C,I,M){var W;for(W=0;16>W;++W)s(I,M+32*W,C,16)}function yi(C,I){var M,W=16;for(M=0;16>M;++M)W+=C[I-1+32*M]+C[I+M-32];Yo(W>>5,C,I)}function Yl(C,I){var M,W=8;for(M=0;16>M;++M)W+=C[I-1+32*M];Yo(W>>4,C,I)}function Ki(C,I){var M,W=8;for(M=0;16>M;++M)W+=C[I+M-32];Yo(W>>4,C,I)}function Xc(C,I){Yo(128,C,I)}function wt(C,I,M){return C+2*I+M+2>>2}function Zo(C,I){var M,W=I-32;for(W=new Uint8Array([wt(C[W-1],C[W+0],C[W+1]),wt(C[W+0],C[W+1],C[W+2]),wt(C[W+1],C[W+2],C[W+3]),wt(C[W+2],C[W+3],C[W+4])]),M=0;4>M;++M)n(C,I+32*M,W,0,W.length)}function vi(C,I){var M=C[I-1],W=C[I-1+32],J=C[I-1+64],te=C[I-1+96];ke(C,I+0,16843009*wt(C[I-1-32],M,W)),ke(C,I+32,16843009*wt(M,W,J)),ke(C,I+64,16843009*wt(W,J,te)),ke(C,I+96,16843009*wt(J,te,te))}function Ft(C,I){var M,W=4;for(M=0;4>M;++M)W+=C[I+M-32]+C[I-1+32*M];for(W>>=3,M=0;4>M;++M)s(C,I+32*M,W,4)}function Bf(C,I){var M=C[I-1+0],W=C[I-1+32],J=C[I-1+64],te=C[I-1-32],re=C[I+0-32],ae=C[I+1-32],oe=C[I+2-32],pe=C[I+3-32];C[I+0+96]=wt(W,J,C[I-1+96]),C[I+1+96]=C[I+0+64]=wt(M,W,J),C[I+2+96]=C[I+1+64]=C[I+0+32]=wt(te,M,W),C[I+3+96]=C[I+2+64]=C[I+1+32]=C[I+0+0]=wt(re,te,M),C[I+3+64]=C[I+2+32]=C[I+1+0]=wt(ae,re,te),C[I+3+32]=C[I+2+0]=wt(oe,ae,re),C[I+3+0]=wt(pe,oe,ae)}function Ht(C,I){var M=C[I+1-32],W=C[I+2-32],J=C[I+3-32],te=C[I+4-32],re=C[I+5-32],ae=C[I+6-32],oe=C[I+7-32];C[I+0+0]=wt(C[I+0-32],M,W),C[I+1+0]=C[I+0+32]=wt(M,W,J),C[I+2+0]=C[I+1+32]=C[I+0+64]=wt(W,J,te),C[I+3+0]=C[I+2+32]=C[I+1+64]=C[I+0+96]=wt(J,te,re),C[I+3+32]=C[I+2+64]=C[I+1+96]=wt(te,re,ae),C[I+3+64]=C[I+2+96]=wt(re,ae,oe),C[I+3+96]=wt(ae,oe,oe)}function Vr(C,I){var M=C[I-1+0],W=C[I-1+32],J=C[I-1+64],te=C[I-1-32],re=C[I+0-32],ae=C[I+1-32],oe=C[I+2-32],pe=C[I+3-32];C[I+0+0]=C[I+1+64]=te+re+1>>1,C[I+1+0]=C[I+2+64]=re+ae+1>>1,C[I+2+0]=C[I+3+64]=ae+oe+1>>1,C[I+3+0]=oe+pe+1>>1,C[I+0+96]=wt(J,W,M),C[I+0+64]=wt(W,M,te),C[I+0+32]=C[I+1+96]=wt(M,te,re),C[I+1+32]=C[I+2+96]=wt(te,re,ae),C[I+2+32]=C[I+3+96]=wt(re,ae,oe),C[I+3+32]=wt(ae,oe,pe)}function Ff(C,I){var M=C[I+0-32],W=C[I+1-32],J=C[I+2-32],te=C[I+3-32],re=C[I+4-32],ae=C[I+5-32],oe=C[I+6-32],pe=C[I+7-32];C[I+0+0]=M+W+1>>1,C[I+1+0]=C[I+0+64]=W+J+1>>1,C[I+2+0]=C[I+1+64]=J+te+1>>1,C[I+3+0]=C[I+2+64]=te+re+1>>1,C[I+0+32]=wt(M,W,J),C[I+1+32]=C[I+0+96]=wt(W,J,te),C[I+2+32]=C[I+1+96]=wt(J,te,re),C[I+3+32]=C[I+2+96]=wt(te,re,ae),C[I+3+64]=wt(re,ae,oe),C[I+3+96]=wt(ae,oe,pe)}function Yc(C,I){var M=C[I-1+0],W=C[I-1+32],J=C[I-1+64],te=C[I-1+96];C[I+0+0]=M+W+1>>1,C[I+2+0]=C[I+0+32]=W+J+1>>1,C[I+2+32]=C[I+0+64]=J+te+1>>1,C[I+1+0]=wt(M,W,J),C[I+3+0]=C[I+1+32]=wt(W,J,te),C[I+3+32]=C[I+1+64]=wt(J,te,te),C[I+3+64]=C[I+2+64]=C[I+0+96]=C[I+1+96]=C[I+2+96]=C[I+3+96]=te}function Jo(C,I){var M=C[I-1+0],W=C[I-1+32],J=C[I-1+64],te=C[I-1+96],re=C[I-1-32],ae=C[I+0-32],oe=C[I+1-32],pe=C[I+2-32];C[I+0+0]=C[I+2+32]=M+re+1>>1,C[I+0+32]=C[I+2+64]=W+M+1>>1,C[I+0+64]=C[I+2+96]=J+W+1>>1,C[I+0+96]=te+J+1>>1,C[I+3+0]=wt(ae,oe,pe),C[I+2+0]=wt(re,ae,oe),C[I+1+0]=C[I+3+32]=wt(M,re,ae),C[I+1+32]=C[I+3+64]=wt(W,M,re),C[I+1+64]=C[I+3+96]=wt(J,W,M),C[I+1+96]=wt(te,J,W)}function $s(C,I){var M;for(M=0;8>M;++M)n(C,I+32*M,C,I-32,8)}function Qo(C,I){var M;for(M=0;8>M;++M)s(C,I,C[I-1],8),I+=32}function bi(C,I,M){var W;for(W=0;8>W;++W)s(I,M+32*W,C,8)}function wi(C,I){var M,W=8;for(M=0;8>M;++M)W+=C[I+M-32]+C[I-1+32*M];bi(W>>4,C,I)}function el(C,I){var M,W=4;for(M=0;8>M;++M)W+=C[I+M-32];bi(W>>3,C,I)}function Zl(C,I){var M,W=4;for(M=0;8>M;++M)W+=C[I-1+32*M];bi(W>>3,C,I)}function Xi(C,I){bi(128,C,I)}function Ws(C,I,M){var W=C[I-M],J=C[I+0],te=3*(J-W)+Mx[1020+C[I-2*M]-C[I+M]],re=X0[112+(te+4>>3)];C[I-M]=Vs[255+W+X0[112+(te+3>>3)]],C[I+0]=Vs[255+J-re]}function Pn(C,I,M,W){var J=C[I+0],te=C[I+M];return Ai[255+C[I-2*M]-C[I-M]]>W||Ai[255+te-J]>W}function Jl(C,I,M,W){return 4*Ai[255+C[I-M]-C[I+0]]+Ai[255+C[I-2*M]-C[I+M]]<=W}function tl(C,I,M,W,J){var te=C[I-3*M],re=C[I-2*M],ae=C[I-M],oe=C[I+0],pe=C[I+M],Se=C[I+2*M],Be=C[I+3*M];return 4*Ai[255+ae-oe]+Ai[255+re-pe]>W?0:Ai[255+C[I-4*M]-te]<=J&&Ai[255+te-re]<=J&&Ai[255+re-ae]<=J&&Ai[255+Be-Se]<=J&&Ai[255+Se-pe]<=J&&Ai[255+pe-oe]<=J}function Ql(C,I,M,W){var J=2*W+1;for(W=0;16>W;++W)Jl(C,I+W,M,J)&&Ws(C,I+W,M)}function rl(C,I,M,W){var J=2*W+1;for(W=0;16>W;++W)Jl(C,I+W*M,1,J)&&Ws(C,I+W*M,1)}function nd(C,I,M,W){var J;for(J=3;0<J;--J)Ql(C,I+=4*M,M,W)}function ad(C,I,M,W){var J;for(J=3;0<J;--J)rl(C,I+=4,M,W)}function cr(C,I,M,W,J,te,re,ae){for(te=2*te+1;0<J--;){if(tl(C,I,M,te,re))if(Pn(C,I,M,ae))Ws(C,I,M);else{var oe=C,pe=I,Se=M,Be=oe[pe-2*Se],ge=oe[pe-Se],Pe=oe[pe+0],De=oe[pe+Se],Ge=oe[pe+2*Se],Me=27*(Qe=Mx[1020+3*(Pe-ge)+Mx[1020+Be-De]])+63>>7,Xe=18*Qe+63>>7,Qe=9*Qe+63>>7;oe[pe-3*Se]=Vs[255+oe[pe-3*Se]+Qe],oe[pe-2*Se]=Vs[255+Be+Xe],oe[pe-Se]=Vs[255+ge+Me],oe[pe+0]=Vs[255+Pe-Me],oe[pe+Se]=Vs[255+De-Xe],oe[pe+2*Se]=Vs[255+Ge-Qe]}I+=W}}function Ni(C,I,M,W,J,te,re,ae){for(te=2*te+1;0<J--;){if(tl(C,I,M,te,re))if(Pn(C,I,M,ae))Ws(C,I,M);else{var oe=C,pe=I,Se=M,Be=oe[pe-Se],ge=oe[pe+0],Pe=oe[pe+Se],De=X0[112+(4+(Ge=3*(ge-Be))>>3)],Ge=X0[112+(Ge+3>>3)],Me=De+1>>1;oe[pe-2*Se]=Vs[255+oe[pe-2*Se]+Me],oe[pe-Se]=Vs[255+Be+Ge],oe[pe+0]=Vs[255+ge-De],oe[pe+Se]=Vs[255+Pe-Me]}I+=W}}function nl(C,I,M,W,J,te){cr(C,I,M,1,16,W,J,te)}function qs(C,I,M,W,J,te){cr(C,I,1,M,16,W,J,te)}function al(C,I,M,W,J,te){var re;for(re=3;0<re;--re)Ni(C,I+=4*M,M,1,16,W,J,te)}function ze(C,I,M,W,J,te){var re;for(re=3;0<re;--re)Ni(C,I+=4,1,M,16,W,J,te)}function R(C,I,M,W,J,te,re,ae){cr(C,I,J,1,8,te,re,ae),cr(M,W,J,1,8,te,re,ae)}function Z(C,I,M,W,J,te,re,ae){cr(C,I,1,J,8,te,re,ae),cr(M,W,1,J,8,te,re,ae)}function me(C,I,M,W,J,te,re,ae){Ni(C,I+4*J,J,1,8,te,re,ae),Ni(M,W+4*J,J,1,8,te,re,ae)}function je(C,I,M,W,J,te,re,ae){Ni(C,I+4,1,J,8,te,re,ae),Ni(M,W+4,1,J,8,te,re,ae)}function _e(){this.ba=new gr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new br,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ke(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function pt(){this.ua=0,this.Wa=new ot,this.vb=new ot,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new Q}function lt(){this.xb=this.a=0,this.l=new bo,this.ca=new gr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new se,this.Pb=0,this.wd=new se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new pt,this.ab=0,this.gc=o(4,rt),this.Oc=0}function Vt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gt(C,I,M,W,J,te,re){for(C=C==null?0:C[I+0],I=0;I<re;++I)J[te+I]=C+M[W+I]&255,C=J[te+I]}function pr(C,I,M,W,J,te,re){var ae;if(C==null)gt(null,null,M,W,J,te,re);else for(ae=0;ae<re;++ae)J[te+ae]=C[I+ae]+M[W+ae]&255}function kr(C,I,M,W,J,te,re){if(C==null)gt(null,null,M,W,J,te,re);else{var ae,oe=C[I+0],pe=oe,Se=oe;for(ae=0;ae<re;++ae)pe=Se+(oe=C[I+ae])-pe,Se=M[W+ae]+(-256&pe?0>pe?0:255:pe)&255,pe=oe,J[te+ae]=Se}}function Kt(C,I,M,W){var J=I.width,te=I.o;if(t(C!=null&&I!=null),0>M||0>=W||M+W>te)return null;if(!C.Cc){if(C.ga==null){var re;if(C.ga=new Vt,(re=C.ga==null)||(re=I.width*I.o,t(C.Gb.length==0),C.Gb=i(re),C.Uc=0,C.Gb==null?re=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,re=1),re=!re),!re){re=C.ga;var ae=C.Fa,oe=C.P,pe=C.qc,Se=C.mb,Be=C.nb,ge=oe+1,Pe=pe-1,De=re.l;if(t(ae!=null&&Se!=null&&I!=null),tc[0]=null,tc[1]=gt,tc[2]=pr,tc[3]=kr,re.ca=Se,re.tb=Be,re.c=I.width,re.i=I.height,t(0<re.c&&0<re.i),1>=pe)I=0;else if(re.$a=3&ae[oe+0],re.Z=ae[oe+0]>>2&3,re.Lc=ae[oe+0]>>4&3,oe=ae[oe+0]>>6&3,0>re.$a||1<re.$a||4<=re.Z||1<re.Lc||oe)I=0;else if(De.put=Bt,De.ac=Pa,De.bc=Gn,De.ma=re,De.width=I.width,De.height=I.height,De.Da=I.Da,De.v=I.v,De.va=I.va,De.j=I.j,De.o=I.o,re.$a)e:{t(re.$a==1),I=ya();t:for(;;){if(I==null){I=0;break e}if(t(re!=null),re.mc=I,I.c=re.c,I.i=re.i,I.l=re.l,I.l.ma=re,I.l.width=re.c,I.l.height=re.i,I.a=0,we(I.m,ae,ge,Pe),!xi(re.c,re.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&cs(I.s)?(re.ic=1,ae=I.c*I.i,I.Ta=null,I.Ua=0,I.V=i(ae),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(re.ic=0,I=Go(I,re.c)),!I))break t;I=1;break e}re.mc=null,I=0}else I=Pe>=re.c*re.i;re=!I}if(re)return null;C.ga.Lc!=1?C.Ga=0:W=te-M}t(C.ga!=null),t(M+W<=te);e:{if(I=(ae=C.ga).c,te=ae.l.o,ae.$a==0){if(ge=C.rc,Pe=C.Vc,De=C.Fa,oe=C.P+1+M*I,pe=C.mb,Se=C.nb+M*I,t(oe<=C.P+C.qc),ae.Z!=0)for(t(tc[ae.Z]!=null),re=0;re<W;++re)tc[ae.Z](ge,Pe,De,oe,pe,Se,I),ge=pe,Pe=Se,Se+=I,oe+=I;else for(re=0;re<W;++re)n(pe,Se,De,oe,I),ge=pe,Pe=Se,Se+=I,oe+=I;C.rc=ge,C.Vc=Pe}else{if(t(ae.mc!=null),I=M+W,t((re=ae.mc)!=null),t(I<=re.i),re.C>=I)I=1;else if(ae.ic||na(),ae.ic){ae=re.V,ge=re.Ba,Pe=re.c;var Ge=re.i,Me=(De=1,oe=re.$/Pe,pe=re.$%Pe,Se=re.m,Be=re.s,re.$),Xe=Pe*Ge,Qe=Pe*I,at=Be.wc,nt=Me<Qe?Tr(Be,pe,oe):null;t(Me<=Xe),t(I<=Ge),t(cs(Be));t:for(;;){for(;!Se.h&&Me<Qe;){if(pe&at||(nt=Tr(Be,pe,oe)),t(nt!=null),Te(Se),256>(Ge=dr(nt.G[0],nt.H[0],Se)))ae[ge+Me]=Ge,++Me,++pe>=Pe&&(pe=0,++oe<=I&&!(oe%16)&&xa(re,oe));else{if(!(280>Ge)){De=0;break t}Ge=Kn(Ge-256,Se);var It,bt=dr(nt.G[4],nt.H[4],Se);if(Te(Se),!(Me>=(bt=Wa(Pe,bt=Kn(bt,Se)))&&Xe-Me>=Ge)){De=0;break t}for(It=0;It<Ge;++It)ae[ge+Me+It]=ae[ge+Me+It-bt];for(Me+=Ge,pe+=Ge;pe>=Pe;)pe-=Pe,++oe<=I&&!(oe%16)&&xa(re,oe);Me<Qe&&pe&at&&(nt=Tr(Be,pe,oe))}t(Se.h==ve(Se))}xa(re,oe>I?I:oe);break t}!De||Se.h&&Me<Xe?(De=0,re.a=Se.h?5:3):re.$=Me,I=De}else I=qa(re,re.V,re.Ba,re.c,re.i,I,Ta);if(!I){W=0;break e}}M+W>=te&&(C.Cc=1),W=1}if(!W)return null;if(C.Cc&&((W=C.ga)!=null&&(W.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+M*J}function ut(C,I,M,W,J,te){for(;0<J--;){var re,ae=C,oe=I+(M?1:0),pe=C,Se=I+(M?0:3);for(re=0;re<W;++re){var Be=pe[Se+4*re];Be!=255&&(Be*=32897,ae[oe+4*re+0]=ae[oe+4*re+0]*Be>>23,ae[oe+4*re+1]=ae[oe+4*re+1]*Be>>23,ae[oe+4*re+2]=ae[oe+4*re+2]*Be>>23)}I+=te}}function Ln(C,I,M,W,J){for(;0<W--;){var te;for(te=0;te<M;++te){var re=C[I+2*te+0],ae=15&(pe=C[I+2*te+1]),oe=4369*ae,pe=(240&pe|pe>>4)*oe>>16;C[I+2*te+0]=(240&re|re>>4)*oe>>16&240|(15&re|re<<4)*oe>>16>>4&15,C[I+2*te+1]=240&pe|ae}I+=J}}function Qt(C,I,M,W,J,te,re,ae){var oe,pe,Se=255;for(pe=0;pe<J;++pe){for(oe=0;oe<W;++oe){var Be=C[I+oe];te[re+4*oe]=Be,Se&=Be}I+=M,re+=ae}return Se!=255}function nn(C,I,M,W,J){var te;for(te=0;te<J;++te)M[W+te]=C[I+te]>>8}function na(){eu=ut,k3=Ln,P3=Qt,I3=nn}function Va(C,I,M){L[C]=function(W,J,te,re,ae,oe,pe,Se,Be,ge,Pe,De,Ge,Me,Xe,Qe,at){var nt,It=at-1>>1,bt=ae[oe+0]|pe[Se+0]<<16,ir=Be[ge+0]|Pe[De+0]<<16;t(W!=null);var Ct=3*bt+ir+131074>>2;for(I(W[J+0],255&Ct,Ct>>16,Ge,Me),te!=null&&(Ct=3*ir+bt+131074>>2,I(te[re+0],255&Ct,Ct>>16,Xe,Qe)),nt=1;nt<=It;++nt){var yr=ae[oe+nt]|pe[Se+nt]<<16,ia=Be[ge+nt]|Pe[De+nt]<<16,or=bt+yr+ir+ia+524296,St=or+2*(yr+ir)>>3;Ct=St+bt>>1,bt=(or=or+2*(bt+ia)>>3)+yr>>1,I(W[J+2*nt-1],255&Ct,Ct>>16,Ge,Me+(2*nt-1)*M),I(W[J+2*nt-0],255&bt,bt>>16,Ge,Me+(2*nt-0)*M),te!=null&&(Ct=or+ir>>1,bt=St+ia>>1,I(te[re+2*nt-1],255&Ct,Ct>>16,Xe,Qe+(2*nt-1)*M),I(te[re+2*nt+0],255&bt,bt>>16,Xe,Qe+(2*nt+0)*M)),bt=yr,ir=ia}1&at||(Ct=3*bt+ir+131074>>2,I(W[J+at-1],255&Ct,Ct>>16,Ge,Me+(at-1)*M),te!=null&&(Ct=3*ir+bt+131074>>2,I(te[re+at-1],255&Ct,Ct>>16,Xe,Qe+(at-1)*M)))}}function us(){Ci[Y0]=TD,Ci[Z0]=z3,Ci[L3]=_D,Ci[J0]=$3,Ci[Q0]=W3,Ci[Bx]=q3,Ci[M3]=OD,Ci[Fx]=z3,Ci[Ux]=$3,Ci[em]=W3,Ci[zx]=q3}function No(C){return C&-16384?0>C?0:255:C>>RD}function jo(C,I){return No((19077*C>>8)+(26149*I>>8)-14234)}function ji(C,I,M){return No((19077*C>>8)-(6419*I>>8)-(13320*M>>8)+8708)}function Ao(C,I){return No((19077*C>>8)+(33050*I>>8)-17685)}function Co(C,I,M,W,J){W[J+0]=jo(C,M),W[J+1]=ji(C,I,M),W[J+2]=Ao(C,I)}function sl(C,I,M,W,J){W[J+0]=Ao(C,I),W[J+1]=ji(C,I,M),W[J+2]=jo(C,M)}function wn(C,I,M,W,J){var te=ji(C,I,M);I=te<<3&224|Ao(C,I)>>3,W[J+0]=248&jo(C,M)|te>>5,W[J+1]=I}function Yi(C,I,M,W,J){var te=240&Ao(C,I)|15;W[J+0]=240&jo(C,M)|ji(C,I,M)>>4,W[J+1]=te}function il(C,I,M,W,J){W[J+0]=255,Co(C,I,M,W,J+1)}function Zi(C,I,M,W,J){sl(C,I,M,W,J),W[J+3]=255}function Zc(C,I,M,W,J){Co(C,I,M,W,J),W[J+3]=255}function Pr(C,I){return 0>C?0:C>I?I:C}function Cs(C,I,M){L[C]=function(W,J,te,re,ae,oe,pe,Se,Be){for(var ge=Se+(-2&Be)*M;Se!=ge;)I(W[J+0],te[re+0],ae[oe+0],pe,Se),I(W[J+1],te[re+0],ae[oe+0],pe,Se+M),J+=2,++re,++oe,Se+=2*M;1&Be&&I(W[J+0],te[re+0],ae[oe+0],pe,Se)}}function aa(C,I,M){return M==0?C==0?I==0?6:5:I==0?4:0:M}function Jc(C,I,M,W,J){switch(C>>>30){case 3:Ae(I,M,W,J,0);break;case 2:Oe(I,M,W,J);break;case 1:Ye(I,M,W,J)}}function Nn(C,I){var M,W,J=I.M,te=I.Nb,re=C.oc,ae=C.pc+40,oe=C.oc,pe=C.pc+584,Se=C.oc,Be=C.pc+600;for(M=0;16>M;++M)re[ae+32*M-1]=129;for(M=0;8>M;++M)oe[pe+32*M-1]=129,Se[Be+32*M-1]=129;for(0<J?re[ae-1-32]=oe[pe-1-32]=Se[Be-1-32]=129:(s(re,ae-32-1,127,21),s(oe,pe-32-1,127,9),s(Se,Be-32-1,127,9)),W=0;W<C.za;++W){var ge=I.ya[I.aa+W];if(0<W){for(M=-1;16>M;++M)n(re,ae+32*M-4,re,ae+32*M+12,4);for(M=-1;8>M;++M)n(oe,pe+32*M-4,oe,pe+32*M+4,4),n(Se,Be+32*M-4,Se,Be+32*M+4,4)}var Pe=C.Gd,De=C.Hd+W,Ge=ge.ad,Me=ge.Hc;if(0<J&&(n(re,ae-32,Pe[De].y,0,16),n(oe,pe-32,Pe[De].f,0,8),n(Se,Be-32,Pe[De].ea,0,8)),ge.Za){var Xe=re,Qe=ae-32+16;for(0<J&&(W>=C.za-1?s(Xe,Qe,Pe[De].y[15],4):n(Xe,Qe,Pe[De+1].y,0,4)),M=0;4>M;M++)Xe[Qe+128+M]=Xe[Qe+256+M]=Xe[Qe+384+M]=Xe[Qe+0+M];for(M=0;16>M;++M,Me<<=2)Xe=re,Qe=ae+V3[M],Qi[ge.Ob[M]](Xe,Qe),Jc(Me,Ge,16*+M,Xe,Qe)}else if(Xe=aa(W,J,ge.Ob[0]),ec[Xe](re,ae),Me!=0)for(M=0;16>M;++M,Me<<=2)Jc(Me,Ge,16*+M,re,ae+V3[M]);for(M=ge.Gc,Xe=aa(W,J,ge.Dd),dl[Xe](oe,pe),dl[Xe](Se,Be),Me=Ge,Xe=oe,Qe=pe,255&(ge=0|M)&&(170&ge?Fe(Me,256,Xe,Qe):et(Me,256,Xe,Qe)),ge=Se,Me=Be,255&(M>>=8)&&(170&M?Fe(Ge,320,ge,Me):et(Ge,320,ge,Me)),J<C.Ub-1&&(n(Pe[De].y,0,re,ae+480,16),n(Pe[De].f,0,oe,pe+224,8),n(Pe[De].ea,0,Se,Be+224,8)),M=8*te*C.B,Pe=C.sa,De=C.ta+16*W+16*te*C.R,Ge=C.qa,ge=C.ra+8*W+M,Me=C.Ha,Xe=C.Ia+8*W+M,M=0;16>M;++M)n(Pe,De+M*C.R,re,ae+32*M,16);for(M=0;8>M;++M)n(Ge,ge+M*C.B,oe,pe+32*M,8),n(Me,Xe+M*C.B,Se,Be+32*M,8)}}function ol(C,I,M,W,J,te,re,ae,oe){var pe=[0],Se=[0],Be=0,ge=oe!=null?oe.kd:0,Pe=oe??new Ke;if(C==null||12>M)return 7;Pe.data=C,Pe.w=I,Pe.ha=M,I=[I],M=[M],Pe.gb=[Pe.gb];e:{var De=I,Ge=M,Me=Pe.gb;if(t(C!=null),t(Ge!=null),t(Me!=null),Me[0]=0,12<=Ge[0]&&!r(C,De[0],"RIFF")){if(r(C,De[0]+8,"WEBP")){Me=3;break e}var Xe=Re(C,De[0]+4);if(12>Xe||4294967286<Xe){Me=3;break e}if(ge&&Xe>Ge[0]-8){Me=7;break e}Me[0]=Xe,De[0]+=12,Ge[0]-=12}Me=0}if(Me!=0)return Me;for(Xe=0<Pe.gb[0],M=M[0];;){e:{var Qe=C;Ge=I,Me=M;var at=pe,nt=Se,It=De=[0];if((Ct=Be=[Be])[0]=0,8>Me[0])Me=7;else{if(!r(Qe,Ge[0],"VP8X")){if(Re(Qe,Ge[0]+4)!=10){Me=3;break e}if(18>Me[0]){Me=7;break e}var bt=Re(Qe,Ge[0]+8),ir=1+We(Qe,Ge[0]+12);if(2147483648<=ir*(Qe=1+We(Qe,Ge[0]+15))){Me=3;break e}It!=null&&(It[0]=bt),at!=null&&(at[0]=ir),nt!=null&&(nt[0]=Qe),Ge[0]+=18,Me[0]-=18,Ct[0]=1}Me=0}}if(Be=Be[0],De=De[0],Me!=0)return Me;if(Ge=!!(2&De),!Xe&&Be)return 3;if(te!=null&&(te[0]=!!(16&De)),re!=null&&(re[0]=Ge),ae!=null&&(ae[0]=0),re=pe[0],De=Se[0],Be&&Ge&&oe==null){Me=0;break}if(4>M){Me=7;break}if(Xe&&Be||!Xe&&!Be&&!r(C,I[0],"ALPH")){M=[M],Pe.na=[Pe.na],Pe.P=[Pe.P],Pe.Sa=[Pe.Sa];e:{bt=C,Me=I,Xe=M;var Ct=Pe.gb;at=Pe.na,nt=Pe.P,It=Pe.Sa,ir=22,t(bt!=null),t(Xe!=null),Qe=Me[0];var yr=Xe[0];for(t(at!=null),t(It!=null),at[0]=null,nt[0]=null,It[0]=0;;){if(Me[0]=Qe,Xe[0]=yr,8>yr){Me=7;break e}var ia=Re(bt,Qe+4);if(4294967286<ia){Me=3;break e}var or=8+ia+1&-2;if(ir+=or,0<Ct&&ir>Ct){Me=3;break e}if(!r(bt,Qe,"VP8 ")||!r(bt,Qe,"VP8L")){Me=0;break e}if(yr[0]<or){Me=7;break e}r(bt,Qe,"ALPH")||(at[0]=bt,nt[0]=Qe+8,It[0]=ia),Qe+=or,yr-=or}}if(M=M[0],Pe.na=Pe.na[0],Pe.P=Pe.P[0],Pe.Sa=Pe.Sa[0],Me!=0)break}M=[M],Pe.Ja=[Pe.Ja],Pe.xa=[Pe.xa];e:if(Ct=C,Me=I,Xe=M,at=Pe.gb[0],nt=Pe.Ja,It=Pe.xa,bt=Me[0],Qe=!r(Ct,bt,"VP8 "),ir=!r(Ct,bt,"VP8L"),t(Ct!=null),t(Xe!=null),t(nt!=null),t(It!=null),8>Xe[0])Me=7;else{if(Qe||ir){if(Ct=Re(Ct,bt+4),12<=at&&Ct>at-12){Me=3;break e}if(ge&&Ct>Xe[0]-8){Me=7;break e}nt[0]=Ct,Me[0]+=8,Xe[0]-=8,It[0]=ir}else It[0]=5<=Xe[0]&&Ct[bt+0]==47&&!(Ct[bt+4]>>5),nt[0]=Xe[0];Me=0}if(M=M[0],Pe.Ja=Pe.Ja[0],Pe.xa=Pe.xa[0],I=I[0],Me!=0)break;if(4294967286<Pe.Ja)return 3;if(ae==null||Ge||(ae[0]=Pe.xa?2:1),re=[re],De=[De],Pe.xa){if(5>M){Me=7;break}ae=re,ge=De,Ge=te,C==null||5>M?C=0:5<=M&&C[I+0]==47&&!(C[I+4]>>5)?(Xe=[0],Ct=[0],at=[0],we(nt=new se,C,I,M),Hi(nt,Xe,Ct,at)?(ae!=null&&(ae[0]=Xe[0]),ge!=null&&(ge[0]=Ct[0]),Ge!=null&&(Ge[0]=at[0]),C=1):C=0):C=0}else{if(10>M){Me=7;break}ae=De,C==null||10>M||!hn(C,I+3,M-3)?C=0:(ge=C[I+0]|C[I+1]<<8|C[I+2]<<16,Ge=16383&(C[I+7]<<8|C[I+6]),C=16383&(C[I+9]<<8|C[I+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=Pe.Ja||!Ge||!C?C=0:(re&&(re[0]=Ge),ae&&(ae[0]=C),C=1))}if(!C||(re=re[0],De=De[0],Be&&(pe[0]!=re||Se[0]!=De)))return 3;oe!=null&&(oe[0]=Pe,oe.offset=I-oe.w,t(4294967286>I-oe.w),t(oe.offset==oe.ha-M));break}return Me==0||Me==7&&Be&&oe==null?(te!=null&&(te[0]|=Pe.na!=null&&0<Pe.na.length),W!=null&&(W[0]=re),J!=null&&(J[0]=De),0):Me}function ll(C,I,M){var W=I.width,J=I.height,te=0,re=0,ae=W,oe=J;if(I.Da=C!=null&&0<C.Da,I.Da&&(ae=C.cd,oe=C.bd,te=C.v,re=C.j,11>M||(te&=-2,re&=-2),0>te||0>re||0>=ae||0>=oe||te+ae>W||re+oe>J))return 0;if(I.v=te,I.j=re,I.va=te+ae,I.o=re+oe,I.U=ae,I.T=oe,I.da=C!=null&&0<C.da,I.da){if(!it(ae,oe,M=[C.ib],te=[C.hb]))return 0;I.ib=M[0],I.hb=te[0]}return I.ob=C!=null&&C.ob,I.Kb=C==null||!C.Sd,I.da&&(I.ob=I.ib<3*W/4&&I.hb<3*J/4,I.Kb=0),1}function Qc(C){if(C==null)return 2;if(11>C.S){var I=C.f.RGBA;I.fb+=(C.height-1)*I.A,I.A=-I.A}else I=C.f.kb,C=C.height,I.O+=(C-1)*I.fa,I.fa=-I.fa,I.N+=(C-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(C-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(C-1)*I.lb,I.lb=-I.lb);return 0}function Ji(C,I,M,W){if(W==null||0>=C||0>=I)return 2;if(M!=null){if(M.Da){var J=M.cd,te=M.bd,re=-2&M.v,ae=-2&M.j;if(0>re||0>ae||0>=J||0>=te||re+J>C||ae+te>I)return 2;C=J,I=te}if(M.da){if(!it(C,I,J=[M.ib],te=[M.hb]))return 2;C=J[0],I=te[0]}}W.width=C,W.height=I;e:{var oe=W.width,pe=W.height;if(C=W.S,0>=oe||0>=pe||!(C>=Y0&&13>C))C=2;else{if(0>=W.Rd&&W.sd==null){re=te=J=I=0;var Se=(ae=oe*G3[C])*pe;if(11>C||(te=(pe+1)/2*(I=(oe+1)/2),C==12&&(re=(J=oe)*pe)),(pe=i(Se+2*te+re))==null){C=1;break e}W.sd=pe,11>C?((oe=W.f.RGBA).eb=pe,oe.fb=0,oe.A=ae,oe.size=Se):((oe=W.f.kb).y=pe,oe.O=0,oe.fa=ae,oe.Fd=Se,oe.f=pe,oe.N=0+Se,oe.Ab=I,oe.Cd=te,oe.ea=pe,oe.W=0+Se+te,oe.Db=I,oe.Ed=te,C==12&&(oe.F=pe,oe.J=0+Se+2*te),oe.Tc=re,oe.lb=J)}if(I=1,J=W.S,te=W.width,re=W.height,J>=Y0&&13>J)if(11>J)C=W.f.RGBA,I&=(ae=Math.abs(C.A))*(re-1)+te<=C.size,I&=ae>=te*G3[J],I&=C.eb!=null;else{C=W.f.kb,ae=(te+1)/2,Se=(re+1)/2,oe=Math.abs(C.fa),pe=Math.abs(C.Ab);var Be=Math.abs(C.Db),ge=Math.abs(C.lb),Pe=ge*(re-1)+te;I&=oe*(re-1)+te<=C.Fd,I&=pe*(Se-1)+ae<=C.Cd,I=(I&=Be*(Se-1)+ae<=C.Ed)&oe>=te&pe>=ae&Be>=ae,I&=C.y!=null,I&=C.f!=null,I&=C.ea!=null,J==12&&(I&=ge>=te,I&=Pe<=C.Tc,I&=C.F!=null)}else I=0;C=I?0:2}}return C!=0||M!=null&&M.fd&&(C=Qc(W)),C}var va=64,ds=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Oa=24,Ss=32,tr=8,Hs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(C){return C},L.Predictor2=function(C,I,M){return I[M+0]},L.Predictor3=function(C,I,M){return I[M+1]},L.Predictor4=function(C,I,M){return I[M-1]},L.Predictor5=function(C,I,M){return Ot(Ot(C,I[M+1]),I[M+0])},L.Predictor6=function(C,I,M){return Ot(C,I[M-1])},L.Predictor7=function(C,I,M){return Ot(C,I[M+0])},L.Predictor8=function(C,I,M){return Ot(I[M-1],I[M+0])},L.Predictor9=function(C,I,M){return Ot(I[M+0],I[M+1])},L.Predictor10=function(C,I,M){return Ot(Ot(C,I[M-1]),Ot(I[M+0],I[M+1]))},L.Predictor11=function(C,I,M){var W=I[M+0];return 0>=Lt(W>>24&255,C>>24&255,(I=I[M-1])>>24&255)+Lt(W>>16&255,C>>16&255,I>>16&255)+Lt(W>>8&255,C>>8&255,I>>8&255)+Lt(255&W,255&C,255&I)?W:C},L.Predictor12=function(C,I,M){var W=I[M+0];return(ar((C>>24&255)+(W>>24&255)-((I=I[M-1])>>24&255))<<24|ar((C>>16&255)+(W>>16&255)-(I>>16&255))<<16|ar((C>>8&255)+(W>>8&255)-(I>>8&255))<<8|ar((255&C)+(255&W)-(255&I)))>>>0},L.Predictor13=function(C,I,M){var W=I[M-1];return(Yt((C=Ot(C,I[M+0]))>>24&255,W>>24&255)<<24|Yt(C>>16&255,W>>16&255)<<16|Yt(C>>8&255,W>>8&255)<<8|Yt(255&C,255&W))>>>0};var X=L.PredictorAdd0;L.PredictorAdd1=Sr,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var l=L.PredictorAdd2;Et("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),Et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var f,m=L.ColorIndexInverseTransform,g=L.MapARGB,y=L.VP8LColorIndexInverseTransformAlpha,b=L.MapAlpha,S=L.VP8LPredictorsAdd=[];S.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var T,D,$,Y,ee,fe,Ne,Ae,Oe,Fe,Ye,et,Je,Dt,zt,Zn,ba,sa,_r,Jn,Ga,cl,ul,K0,eu,k3,P3,I3,T3=i(511),_3=i(2041),O3=i(225),R3=i(767),D3=0,Mx=_3,X0=O3,Vs=R3,Ai=T3,Y0=0,Z0=1,L3=2,J0=3,Q0=4,Bx=5,M3=6,Fx=7,Ux=8,em=9,zx=10,xD=[2,3,7],yD=[3,3,11],B3=[280,256,256,256,40],vD=[0,1,1,1,0],bD=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wD=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ND=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jD=8,$x=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Wx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Uf=null,AD=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],CD=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],F3=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],SD=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ED=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],kD=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],PD=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ec=[],Qi=[],dl=[],ID=1,U3=2,tc=[],Ci=[];Va("UpsampleRgbLinePair",Co,3),Va("UpsampleBgrLinePair",sl,3),Va("UpsampleRgbaLinePair",Zc,4),Va("UpsampleBgraLinePair",Zi,4),Va("UpsampleArgbLinePair",il,4),Va("UpsampleRgba4444LinePair",Yi,2),Va("UpsampleRgb565LinePair",wn,2);var TD=L.UpsampleRgbLinePair,_D=L.UpsampleBgrLinePair,z3=L.UpsampleRgbaLinePair,$3=L.UpsampleBgraLinePair,W3=L.UpsampleArgbLinePair,q3=L.UpsampleRgba4444LinePair,OD=L.UpsampleRgb565LinePair,tm=16,rm=1<<tm-1,zf=-227,qx=482,RD=6,H3=0,DD=i(256),LD=i(256),MD=i(256),BD=i(256),FD=i(qx-zf),UD=i(qx-zf);Cs("YuvToRgbRow",Co,3),Cs("YuvToBgrRow",sl,3),Cs("YuvToRgbaRow",Zc,4),Cs("YuvToBgraRow",Zi,4),Cs("YuvToArgbRow",il,4),Cs("YuvToRgba4444Row",Yi,2),Cs("YuvToRgb565Row",wn,2);var V3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nm=[0,2,8],zD=[8,7,6,4,4,2,2,2,1,1,1,1],$D=1;this.WebPDecodeRGBA=function(C,I,M,W,J){var te=Z0,re=new _e,ae=new gr;re.ba=ae,ae.S=te,ae.width=[ae.width],ae.height=[ae.height];var oe=ae.width,pe=ae.height,Se=new Gt;if(Se==null||C==null)var Be=2;else t(Se!=null),Be=ol(C,I,M,Se.width,Se.height,Se.Pd,Se.Qd,Se.format,null);if(Be!=0?oe=0:(oe!=null&&(oe[0]=Se.width[0]),pe!=null&&(pe[0]=Se.height[0]),oe=1),oe){ae.width=ae.width[0],ae.height=ae.height[0],W!=null&&(W[0]=ae.width),J!=null&&(J[0]=ae.height);e:{if(W=new bo,(J=new Ke).data=C,J.w=I,J.ha=M,J.kd=1,I=[0],t(J!=null),((C=ol(J.data,J.w,J.ha,null,null,null,I,null,J))==0||C==7)&&I[0]&&(C=4),(I=C)==0){if(t(re!=null),W.data=J.data,W.w=J.w+J.offset,W.ha=J.ha-J.offset,W.put=Bt,W.ac=Pa,W.bc=Gn,W.ma=re,J.xa){if((C=ya())==null){re=1;break e}if(function(ge,Pe){var De=[0],Ge=[0],Me=[0];t:for(;;){if(ge==null)return 0;if(Pe==null)return ge.a=2,0;if(ge.l=Pe,ge.a=0,we(ge.m,Pe.data,Pe.w,Pe.ha),!Hi(ge.m,De,Ge,Me)){ge.a=3;break t}if(ge.xb=U3,Pe.width=De[0],Pe.height=Ge[0],!xi(De[0],Ge[0],1,ge,null))break t;return 1}return t(ge.a!=0),0}(C,W)){if(W=(I=Ji(W.width,W.height,re.Oa,re.ba))==0){t:{W=C;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((M=W.l)!=null),t((J=M.ma)!=null),W.xb!=0){if(W.ca=J.ba,W.tb=J.tb,t(W.ca!=null),!ll(J.Oa,M,J0)){W.a=2;break r}if(!Go(W,M.width)||M.da)break r;if((M.da||Zt(W.ca.S))&&na(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&na()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!he(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!qa(W,W.V,W.Ba,W.c,W.i,M.o,ls))break r;J.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(I=C.a)}else I=C.a}else{if((C=new Kc)==null){re=1;break e}if(C.Fa=J.na,C.P=J.P,C.qc=J.Sa,zs(C,W)){if((I=Ji(W.width,W.height,re.Oa,re.ba))==0){if(C.Aa=0,M=re.Oa,t((J=C)!=null),M!=null){if(0<(oe=0>(oe=M.Md)?0:100<oe?255:255*oe/100)){for(pe=Se=0;4>pe;++pe)12>(Be=J.pb[pe]).lc&&(Be.ia=oe*zD[0>Be.lc?0:Be.lc]>>3),Se|=Be.ia;Se&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=M.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}(function(ge,Pe){if(ge==null)return 0;if(Pe==null)return fn(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!zs(ge,Pe))return 0;if(t(ge.cb),Pe.ac==null||Pe.ac(Pe)){Pe.ob&&(ge.L=0);var De=nm[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=Pe.v-De>>4,ge.zb=Pe.j-De>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=Pe.o+15+De>>4,ge.Hb=Pe.va+15+De>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var Ge=ge.ed;for(De=0;4>De;++De){var Me;if(ge.Qa.Cb){var Xe=ge.Qa.Lb[De];ge.Qa.Fb||(Xe+=Ge.Tb)}else Xe=Ge.Tb;for(Me=0;1>=Me;++Me){var Qe=ge.gd[De][Me],at=Xe;if(Ge.Pc&&(at+=Ge.vd[0],Me&&(at+=Ge.od[0])),0<(at=0>at?0:63<at?63:at)){var nt=at;0<Ge.wb&&(nt=4<Ge.wb?nt>>2:nt>>1)>9-Ge.wb&&(nt=9-Ge.wb),1>nt&&(nt=1),Qe.dd=nt,Qe.tc=2*at+nt,Qe.ld=40<=at?2:15<=at?1:0}else Qe.tc=0;Qe.La=Me}}}De=0}else fn(ge,6,"Frame setup failed"),De=ge.a;if(De=De==0){if(De){ge.$c=0,0<ge.Aa||(ge.Ic=$D);t:{De=ge.Ic,Ge=4*(nt=ge.za);var It=32*nt,bt=nt+1,ir=0<ge.L?nt*(0<ge.Aa?2:1):0,Ct=(ge.Aa==2?2:1)*nt;if((Qe=Ge+832+(Me=3*(16*De+nm[ge.L])/2*It)+(Xe=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=Qe)De=0;else{if(Qe>ge.Vb){if(ge.Vb=0,ge.Ec=i(Qe),ge.Fc=0,ge.Ec==null){De=fn(ge,1,"no memory during frame initialization.");break t}ge.Vb=Qe}Qe=ge.Ec,at=ge.Fc,ge.Ac=Qe,ge.Bc=at,at+=Ge,ge.Gd=o(It,mr),ge.Hd=0,ge.rb=o(bt+1,Wr),ge.sb=1,ge.wa=ir?o(ir,As):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=nt),t(!0),ge.oc=Qe,ge.pc=at,at+=832,ge.ya=o(Ct,Gc),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=nt),ge.R=16*nt,ge.B=8*nt,nt=(It=nm[ge.L])*ge.R,It=It/2*ge.B,ge.sa=Qe,ge.ta=at+nt,ge.qa=ge.sa,ge.ra=ge.ta+16*De*ge.R+It,ge.Ha=ge.qa,ge.Ia=ge.ra+8*De*ge.B+It,ge.$c=0,at+=Me,ge.mb=Xe?Qe:null,ge.nb=Xe?at:null,t(at+Xe<=ge.Fc+ge.Vb),Or(ge),s(ge.Ac,ge.Bc,0,Ge),De=1}}if(De){if(Pe.ka=0,Pe.y=ge.sa,Pe.O=ge.ta,Pe.f=ge.qa,Pe.N=ge.ra,Pe.ea=ge.Ha,Pe.Vd=ge.Ia,Pe.fa=ge.R,Pe.Rc=ge.B,Pe.F=null,Pe.J=0,!D3){for(De=-255;255>=De;++De)T3[255+De]=0>De?-De:De;for(De=-1020;1020>=De;++De)_3[1020+De]=-128>De?-128:127<De?127:De;for(De=-112;112>=De;++De)O3[112+De]=-16>De?-16:15<De?15:De;for(De=-255;510>=De;++De)R3[255+De]=0>De?0:255<De?255:De;D3=1}Ne=_a,Ae=Le,Fe=ce,Ye=mt,et=bn,Oe=Yn,Je=nl,Dt=qs,zt=R,Zn=Z,ba=al,sa=ze,_r=me,Jn=je,Ga=Ql,cl=rl,ul=nd,K0=ad,Qi[0]=Ft,Qi[1]=Xo,Qi[2]=Zo,Qi[3]=vi,Qi[4]=Bf,Qi[5]=Vr,Qi[6]=Ht,Qi[7]=Ff,Qi[8]=Jo,Qi[9]=Yc,ec[0]=yi,ec[1]=Rt,ec[2]=Hr,ec[3]=Xl,ec[4]=Yl,ec[5]=Ki,ec[6]=Xc,dl[0]=wi,dl[1]=Ha,dl[2]=$s,dl[3]=Qo,dl[4]=Zl,dl[5]=el,dl[6]=Xi,De=1}else De=0}De&&(De=function(yr,ia){for(yr.M=0;yr.M<yr.Va;++yr.M){var or,St=yr.Jc[yr.M&yr.Xb],ct=yr.m,Mn=yr;for(or=0;or<Mn.za;++or){var rr=ct,vr=Mn,an=vr.Ac,Ra=vr.Bc+4*or,fs=vr.zc,In=vr.ya[vr.aa+or];if(vr.Qa.Bb?In.$b=Ce(rr,vr.Pa.jb[0])?2+Ce(rr,vr.Pa.jb[2]):Ce(rr,vr.Pa.jb[1]):In.$b=0,vr.kc&&(In.Ad=Ce(rr,vr.Bd)),In.Za=!Ce(rr,145)+0,In.Za){var Ka=In.Ob,hs=0;for(vr=0;4>vr;++vr){var oa,wr=fs[0+vr];for(oa=0;4>oa;++oa){wr=ED[an[Ra+oa]][wr];for(var Rr=F3[Ce(rr,wr[0])];0<Rr;)Rr=F3[2*Rr+Ce(rr,wr[Rr])];wr=-Rr,an[Ra+oa]=wr}n(Ka,hs,an,Ra,4),hs+=4,fs[0+vr]=wr}}else wr=Ce(rr,156)?Ce(rr,128)?1:3:Ce(rr,163)?2:0,In.Ob[0]=wr,s(an,Ra,wr,4),s(fs,0,wr,4);In.Dd=Ce(rr,142)?Ce(rr,114)?Ce(rr,183)?1:3:2:0}if(Mn.m.Ka)return fn(yr,7,"Premature end-of-partition0 encountered.");for(;yr.ja<yr.za;++yr.ja){if(Mn=St,rr=(ct=yr).rb[ct.sb-1],an=ct.rb[ct.sb+ct.ja],or=ct.ya[ct.aa+ct.ja],Ra=ct.kc?or.Ad:0)rr.la=an.la=0,or.Za||(rr.Na=an.Na=0),or.Hc=0,or.Gc=0,or.ia=0;else{var Tn,Dr;if(rr=an,an=Mn,Ra=ct.Pa.Xc,fs=ct.ya[ct.aa+ct.ja],In=ct.pb[fs.$b],vr=fs.ad,Ka=0,hs=ct.rb[ct.sb-1],wr=oa=0,s(vr,Ka,0,384),fs.Za)var Da=0,eo=Ra[3];else{Rr=i(16);var Bn=rr.Na+hs.Na;if(Bn=Uf(an,Ra[1],Bn,In.Eb,0,Rr,0),rr.Na=hs.Na=(0<Bn)+0,1<Bn)Ne(Rr,0,vr,Ka);else{var Es=Rr[0]+3>>3;for(Rr=0;256>Rr;Rr+=16)vr[Ka+Rr]=Es}Da=1,eo=Ra[0]}var Gr=15&rr.la,la=15&hs.la;for(Rr=0;4>Rr;++Rr){var Gs=1&la;for(Es=Dr=0;4>Es;++Es)Gr=Gr>>1|(Gs=(Bn=Uf(an,eo,Bn=Gs+(1&Gr),In.Sc,Da,vr,Ka))>Da)<<7,Dr=Dr<<2|(3<Bn?3:1<Bn?2:vr[Ka+0]!=0),Ka+=16;Gr>>=4,la=la>>1|Gs<<7,oa=(oa<<8|Dr)>>>0}for(eo=Gr,Da=la>>4,Tn=0;4>Tn;Tn+=2){for(Dr=0,Gr=rr.la>>4+Tn,la=hs.la>>4+Tn,Rr=0;2>Rr;++Rr){for(Gs=1&la,Es=0;2>Es;++Es)Bn=Gs+(1&Gr),Gr=Gr>>1|(Gs=0<(Bn=Uf(an,Ra[2],Bn,In.Qc,0,vr,Ka)))<<3,Dr=Dr<<2|(3<Bn?3:1<Bn?2:vr[Ka+0]!=0),Ka+=16;Gr>>=2,la=la>>1|Gs<<5}wr|=Dr<<4*Tn,eo|=Gr<<4<<Tn,Da|=(240&la)<<Tn}rr.la=eo,hs.la=Da,fs.Hc=oa,fs.Gc=wr,fs.ia=43690&wr?0:In.ia,Ra=!(oa|wr)}if(0<ct.L&&(ct.wa[ct.Y+ct.ja]=ct.gd[or.$b][or.Za],ct.wa[ct.Y+ct.ja].La|=!Ra),Mn.Ka)return fn(yr,7,"Premature end-of-file encountered.")}if(Or(yr),ct=ia,Mn=1,or=(St=yr).D,rr=0<St.L&&St.M>=St.zb&&St.M<=St.Va,St.Aa==0)t:{if(or.M=St.M,or.uc=rr,Nn(St,or),Mn=1,or=(Dr=St.D).Nb,rr=(wr=nm[St.L])*St.R,an=wr/2*St.B,Rr=16*or*St.R,Es=8*or*St.B,Ra=St.sa,fs=St.ta-rr+Rr,In=St.qa,vr=St.ra-an+Es,Ka=St.Ha,hs=St.Ia-an+Es,la=(Gr=Dr.M)==0,oa=Gr>=St.Va-1,St.Aa==2&&Nn(St,Dr),Dr.uc)for(Gs=(Bn=St).D.M,t(Bn.D.uc),Dr=Bn.yb;Dr<Bn.Hb;++Dr){Da=Dr,eo=Gs;var ms=(Ks=(La=Bn).D).Nb;Tn=La.R;var Ks=Ks.wa[Ks.Y+Da],Xs=La.sa,ks=La.ta+16*ms*Tn+16*Da,Ys=Ks.dd,Qr=Ks.tc;if(Qr!=0)if(t(3<=Qr),La.L==1)0<Da&&cl(Xs,ks,Tn,Qr+4),Ks.La&&K0(Xs,ks,Tn,Qr),0<eo&&Ga(Xs,ks,Tn,Qr+4),Ks.La&&ul(Xs,ks,Tn,Qr);else{var Zs=La.B,to=La.qa,tu=La.ra+8*ms*Zs+8*Da,fl=La.Ha,La=La.Ia+8*ms*Zs+8*Da;ms=Ks.ld,0<Da&&(Dt(Xs,ks,Tn,Qr+4,Ys,ms),Zn(to,tu,fl,La,Zs,Qr+4,Ys,ms)),Ks.La&&(sa(Xs,ks,Tn,Qr,Ys,ms),Jn(to,tu,fl,La,Zs,Qr,Ys,ms)),0<eo&&(Je(Xs,ks,Tn,Qr+4,Ys,ms),zt(to,tu,fl,La,Zs,Qr+4,Ys,ms)),Ks.La&&(ba(Xs,ks,Tn,Qr,Ys,ms),_r(to,tu,fl,La,Zs,Qr,Ys,ms))}}if(St.ia&&alert("todo:DitherRow"),ct.put!=null){if(Dr=16*Gr,Gr=16*(Gr+1),la?(ct.y=St.sa,ct.O=St.ta+Rr,ct.f=St.qa,ct.N=St.ra+Es,ct.ea=St.Ha,ct.W=St.Ia+Es):(Dr-=wr,ct.y=Ra,ct.O=fs,ct.f=In,ct.N=vr,ct.ea=Ka,ct.W=hs),oa||(Gr-=wr),Gr>ct.o&&(Gr=ct.o),ct.F=null,ct.J=null,St.Fa!=null&&0<St.Fa.length&&Dr<Gr&&(ct.J=Kt(St,ct,Dr,Gr-Dr),ct.F=St.mb,ct.F==null&&ct.F.length==0)){Mn=fn(St,3,"Could not decode alpha data.");break t}Dr<ct.j&&(wr=ct.j-Dr,Dr=ct.j,t(!(1&wr)),ct.O+=St.R*wr,ct.N+=St.B*(wr>>1),ct.W+=St.B*(wr>>1),ct.F!=null&&(ct.J+=ct.width*wr)),Dr<Gr&&(ct.O+=ct.v,ct.N+=ct.v>>1,ct.W+=ct.v>>1,ct.F!=null&&(ct.J+=ct.v),ct.ka=Dr-ct.j,ct.U=ct.va-ct.v,ct.T=Gr-Dr,Mn=ct.put(ct))}or+1!=St.Ic||oa||(n(St.sa,St.ta-rr,Ra,fs+16*St.R,rr),n(St.qa,St.ra-an,In,vr+8*St.B,an),n(St.Ha,St.Ia-an,Ka,hs+8*St.B,an))}if(!Mn)return fn(yr,6,"Output aborted.")}return 1}(ge,Pe)),Pe.bc!=null&&Pe.bc(Pe),De&=1}return De?(ge.cb=0,De):0})(C,W)||(I=C.a)}}else I=C.a}I==0&&re.Oa!=null&&re.Oa.fd&&(I=Qc(re.ba))}re=I}te=re!=0?null:11>te?ae.f.RGBA.eb:ae.f.kb.y}else te=null;return te};var G3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(L,K){for(var z="",q=0;q<4;q++)z+=String.fromCharCode(L[K++]);return z}function h(L,K){return L[K+0]|L[K+1]<<8}function p(L,K){return(L[K+0]|L[K+1]<<8|L[K+2]<<16)>>>0}function v(L,K){return(L[K+0]|L[K+1]<<8|L[K+2]<<16|L[K+3]<<24)>>>0}new u;var x=[0],w=[0],j=[],N=new u,A=e,k=function(L,K){var z={},q=0,Q=!1,G=0,H=0;if(z.frames=[],!function(V,se){for(var ne=0;ne<4;ne++)if(V[se+ne]!="RIFF".charCodeAt(ne))return!0;return!1}(L,K)){for(v(L,K+=4),K+=8;K<L.length;){var ue=d(L,K),ye=v(L,K+=4);K+=4;var de=ye+(1&ye);switch(ue){case"VP8 ":case"VP8L":z.frames[q]===void 0&&(z.frames[q]={}),(ie=z.frames[q]).src_off=Q?H:K-8,ie.src_size=G+ye+8,q++,Q&&(Q=!1,G=0,H=0);break;case"VP8X":(ie=z.header={}).feature_flags=L[K];var we=K+4;ie.canvas_width=1+p(L,we),we+=3,ie.canvas_height=1+p(L,we),we+=3;break;case"ALPH":Q=!0,G=de+8,H=K-8;break;case"ANIM":(ie=z.header).bgcolor=v(L,K),we=K+4,ie.loop_count=h(L,we),we+=2;break;case"ANMF":var Ee,ie;(ie=z.frames[q]={}).offset_x=2*p(L,K),K+=3,ie.offset_y=2*p(L,K),K+=3,ie.width=1+p(L,K),K+=3,ie.height=1+p(L,K),K+=3,ie.duration=p(L,K),K+=3,Ee=L[K++],ie.dispose=1&Ee,ie.blend=Ee>>1&1}ue!="ANMF"&&(K+=de)}return z}}(A,0);k.response=A,k.rgbaoutput=!0,k.dataurl=!1;var E=k.header?k.header:null,_=k.frames?k.frames:null;if(E){E.loop_counter=E.loop_count,x=[E.canvas_height],w=[E.canvas_width];for(var O=0;O<_.length&&_[O].blend!=0;O++);}var B=_[0],F=N.WebPDecodeRGBA(A,B.src_off,B.src_size,w,x);B.rgba=F,B.imgwidth=w[0],B.imgheight=x[0];for(var U=0;U<w[0]*x[0]*4;U++)j[U]=F[U];return this.width=w,this.height=x,this.data=j,this}(function(e){var t,r,n,s,i,o,c,u,d,h=function(V){return V=V||{},this.isStrokeTransparent=V.isStrokeTransparent||!1,this.strokeOpacity=V.strokeOpacity||1,this.strokeStyle=V.strokeStyle||"#000000",this.fillStyle=V.fillStyle||"#000000",this.isFillTransparent=V.isFillTransparent||!1,this.fillOpacity=V.fillOpacity||1,this.font=V.font||"10px sans-serif",this.textBaseline=V.textBaseline||"alphabetic",this.textAlign=V.textAlign||"left",this.lineWidth=V.lineWidth||1,this.lineJoin=V.lineJoin||"miter",this.lineCap=V.lineCap||"butt",this.path=V.path||[],this.transform=V.transform!==void 0?V.transform.clone():new u,this.globalCompositeOperation=V.globalCompositeOperation||"normal",this.globalAlpha=V.globalAlpha||1,this.clip_path=V.clip_path||[],this.currentPoint=V.currentPoint||new o,this.miterLimit=V.miterLimit||10,this.lastPoint=V.lastPoint||new o,this.lineDashOffset=V.lineDashOffset||0,this.lineDash=V.lineDash||[],this.margin=V.margin||[0,0,0,0],this.prevPageLastElemOffset=V.prevPageLastElemOffset||0,this.ignoreClearRect=typeof V.ignoreClearRect!="boolean"||V.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,d=new h}]);var p=function(V){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var se=V;Object.defineProperty(this,"pdf",{get:function(){return se}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(Re){ne=!!Re}});var ve=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ve},set:function(Re){ve=!!Re}});var be=0;Object.defineProperty(this,"posX",{get:function(){return be},set:function(Re){isNaN(Re)||(be=Re)}});var Te=0;Object.defineProperty(this,"posY",{get:function(){return Te},set:function(Re){isNaN(Re)||(Te=Re)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Re){var he;typeof Re=="number"?he=[Re,Re,Re,Re]:((he=new Array(4))[0]=Re[0],he[1]=Re.length>=2?Re[1]:he[0],he[2]=Re.length>=3?Re[2]:he[0],he[3]=Re.length>=4?Re[3]:he[1]),d.margin=he}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Re){xe=Re}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(Re){le=Re}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(Re){Ce=Re}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Re){Re instanceof h&&(d=Re)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Re){d.path=Re}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Re){ke=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var he;he=v(Re),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var he=v(Re);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var Ie=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(Re){Ie=null,We=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var he;if(this.ctx.font=Re,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var Ze=he[1];he[2];var ot=he[3],it=he[4];he[5];var Ve=he[6],At=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(it)[2];it=Math.floor(At==="px"?parseFloat(it)*this.pdf.internal.scaleFactor:At==="em"?parseFloat(it)*this.pdf.getFontSize():parseFloat(it)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(it);var He=function(qt){var Et,$r,Ut=[],qe=qt.trim();if(qe==="")return Ny;if(qe in DS)return[DS[qe]];for(;qe!=="";){switch($r=null,Et=(qe=MS(qe)).charAt(0)){case'"':case"'":$r=Lle(qe.substring(1),Et);break;default:$r=Mle(qe)}if($r===null||(Ut.push($r[0]),(qe=MS($r[1]))!==""&&qe.charAt(0)!==","))return Ny;qe=qe.replace(/^,/,"")}return Ut}(Ve);if(this.fontFaces){var Xt=function(qt,Et){if(Ie===null){var $r=function(Ut){var qe=[];return Object.keys(Ut).forEach(function(jt){Ut[jt].forEach(function(Mt){var ft=null;switch(Mt){case"bold":ft={family:jt,weight:"bold"};break;case"italic":ft={family:jt,style:"italic"};break;case"bolditalic":ft={family:jt,weight:"bold",style:"italic"};break;case"":case"normal":ft={family:jt}}ft!==null&&(ft.ref={name:jt,style:Mt},qe.push(ft))})}),qe}(qt.getFontList());Ie=function(Ut){for(var qe={},jt=0;jt<Ut.length;++jt){var Mt=wy(Ut[jt]),ft=Mt.family,sr=Mt.stretch,Zt=Mt.style,dn=Mt.weight;qe[ft]=qe[ft]||{},qe[ft][sr]=qe[ft][sr]||{},qe[ft][sr][Zt]=qe[ft][sr][Zt]||{},qe[ft][sr][Zt][dn]=Mt}return qe}($r.concat(Et))}return Ie}(this.pdf,this.fontFaces),Ot=He.map(function(qt){return{family:qt,stretch:"normal",weight:ot,style:Ze}}),ar=function(qt,Et,$r){for(var Ut=($r=$r||{}).defaultFontFamily||"times",qe=Object.assign({},Dle,$r.genericFontFamilies||{}),jt=null,Mt=null,ft=0;ft<Et.length;++ft)if(qe[(jt=wy(Et[ft])).family]&&(jt.family=qe[jt.family]),qt.hasOwnProperty(jt.family)){Mt=qt[jt.family];break}if(!(Mt=Mt||qt[Ut]))throw new Error("Could not find a font-family for the rule '"+LS(jt)+"' and default family '"+Ut+"'.");if(Mt=function(sr,Zt){if(Zt[sr])return Zt[sr];var dn=Xb[sr],Wt=dn<=Xb.normal?-1:1,gr=RS(Zt,IR,dn,Wt);if(!gr)throw new Error("Could not find a matching font-stretch value for "+sr);return gr}(jt.stretch,Mt),Mt=function(sr,Zt){if(Zt[sr])return Zt[sr];for(var dn=PR[sr],Wt=0;Wt<dn.length;++Wt)if(Zt[dn[Wt]])return Zt[dn[Wt]];throw new Error("Could not find a matching font-style for "+sr)}(jt.style,Mt),!(Mt=function(sr,Zt){if(Zt[sr])return Zt[sr];if(sr===400&&Zt[500])return Zt[500];if(sr===500&&Zt[400])return Zt[400];var dn=Rle[sr],Wt=RS(Zt,TR,dn,sr<400?-1:1);if(!Wt)throw new Error("Could not find a matching font-weight for value "+sr);return Wt}(jt.weight,Mt)))throw new Error("Failed to resolve a font for the rule '"+LS(jt)+"'.");return Mt}(Xt,Ot);this.pdf.setFont(ar.ref.name,ar.ref.style)}else{var Yt="";(ot==="bold"||parseInt(ot,10)>=700||Ze==="bold")&&(Yt="bold"),Ze==="italic"&&(Yt+="italic"),Yt.length===0&&(Yt="normal");for(var Lt="",Sr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$t=0;$t<He.length;$t++){if(this.pdf.internal.getFont(He[$t],Yt,{noFallback:!0,disableWarning:!0})!==void 0){Lt=He[$t];break}if(Yt==="bolditalic"&&this.pdf.internal.getFont(He[$t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=He[$t],Yt="bold";else if(this.pdf.internal.getFont(He[$t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=He[$t],Yt="normal";break}}if(Lt===""){for(var ht=0;ht<He.length;ht++)if(Sr[He[ht]]){Lt=Sr[He[ht]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,Yt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};p.prototype.setLineDash=function(V){this.lineDash=V},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){_.call(this,"fill",!1)},p.prototype.stroke=function(){_.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(V,se){if(isNaN(V)||isNaN(se))throw Xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new o(V,se));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(V,se)},p.prototype.closePath=function(){var V=new o(0,0),se=0;for(se=this.path.length-1;se!==-1;se--)if(this.path[se].type==="begin"&&Mr(this.path[se+1])==="object"&&typeof this.path[se+1].x=="number"){V=new o(this.path[se+1].x,this.path[se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(V.x,V.y)},p.prototype.lineTo=function(V,se){if(isNaN(V)||isNaN(se))throw Xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new o(V,se));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},p.prototype.quadraticCurveTo=function(V,se,ne,ve){if(isNaN(ne)||isNaN(ve)||isNaN(V)||isNaN(se))throw Xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var be=this.ctx.transform.applyToPoint(new o(ne,ve)),Te=this.ctx.transform.applyToPoint(new o(V,se));this.path.push({type:"qct",x1:Te.x,y1:Te.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},p.prototype.bezierCurveTo=function(V,se,ne,ve,be,Te){if(isNaN(be)||isNaN(Te)||isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve))throw Xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(be,Te)),le=this.ctx.transform.applyToPoint(new o(V,se)),Ce=this.ctx.transform.applyToPoint(new o(ne,ve));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:Ce.x,y2:Ce.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},p.prototype.arc=function(V,se,ne,ve,be,Te){if(isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve)||isNaN(be))throw Xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Te=!!Te,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(V,se));V=xe.x,se=xe.y;var le=this.ctx.transform.applyToPoint(new o(0,ne)),Ce=this.ctx.transform.applyToPoint(new o(0,0));ne=Math.sqrt(Math.pow(le.x-Ce.x,2)+Math.pow(le.y-Ce.y,2))}Math.abs(be-ve)>=2*Math.PI&&(ve=0,be=2*Math.PI),this.path.push({type:"arc",x:V,y:se,radius:ne,startAngle:ve,endAngle:be,counterclockwise:Te})},p.prototype.arcTo=function(V,se,ne,ve,be){throw new Error("arcTo not implemented.")},p.prototype.rect=function(V,se,ne,ve){if(isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve))throw Xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(V,se),this.lineTo(V+ne,se),this.lineTo(V+ne,se+ve),this.lineTo(V,se+ve),this.lineTo(V,se),this.lineTo(V+ne,se),this.lineTo(V,se)},p.prototype.fillRect=function(V,se,ne,ve){if(isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve))throw Xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var be={};this.lineCap!=="butt"&&(be.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(be.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(V,se,ne,ve),this.fill(),be.hasOwnProperty("lineCap")&&(this.lineCap=be.lineCap),be.hasOwnProperty("lineJoin")&&(this.lineJoin=be.lineJoin)}},p.prototype.strokeRect=function(V,se,ne,ve){if(isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve))throw Xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(V,se,ne,ve),this.stroke())},p.prototype.clearRect=function(V,se,ne,ve){if(isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve))throw Xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(V,se,ne,ve))},p.prototype.save=function(V){V=typeof V!="boolean"||V;for(var se=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(se),V){this.ctx.fontSize=this.pdf.internal.getFontSize();var ve=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ve}},p.prototype.restore=function(V){V=typeof V!="boolean"||V;for(var se=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(se),V&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(V){var se,ne,ve,be;if(V.isCanvasGradient===!0&&(V=V.getColor()),!V)return{r:0,g:0,b:0,a:0,style:V};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(V))se=0,ne=0,ve=0,be=0;else{var Te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(V);if(Te!==null)se=parseInt(Te[1]),ne=parseInt(Te[2]),ve=parseInt(Te[3]),be=1;else if((Te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(V))!==null)se=parseInt(Te[1]),ne=parseInt(Te[2]),ve=parseInt(Te[3]),be=parseFloat(Te[4]);else{if(be=1,typeof V=="string"&&V.charAt(0)!=="#"){var xe=new NR(V);V=xe.ok?xe.toHex():"#000000"}V.length===4?(se=V.substring(1,2),se+=se,ne=V.substring(2,3),ne+=ne,ve=V.substring(3,4),ve+=ve):(se=V.substring(1,3),ne=V.substring(3,5),ve=V.substring(5,7)),se=parseInt(se,16),ne=parseInt(ne,16),ve=parseInt(ve,16)}}return{r:se,g:ne,b:ve,a:be,style:V}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(V,se,ne,ve){if(isNaN(se)||isNaN(ne)||typeof V!="string")throw Xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ve=isNaN(ve)?void 0:ve,!x.call(this)){var be=de(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;q.call(this,{text:V,x:se,y:ne,scale:Te,angle:be,align:this.textAlign,maxWidth:ve})}},p.prototype.strokeText=function(V,se,ne,ve){if(isNaN(se)||isNaN(ne)||typeof V!="string")throw Xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){ve=isNaN(ve)?void 0:ve;var be=de(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;q.call(this,{text:V,x:se,y:ne,scale:Te,renderingMode:"stroke",angle:be,align:this.textAlign,maxWidth:ve})}},p.prototype.measureText=function(V){if(typeof V!="string")throw Xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var se=this.pdf,ne=this.pdf.internal.scaleFactor,ve=se.internal.getFontSize(),be=se.getStringUnitWidth(V)*ve/se.internal.scaleFactor;return new function(Te){var xe=(Te=Te||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this}({width:be*=Math.round(96*ne/72*1e4)/1e4})},p.prototype.scale=function(V,se){if(isNaN(V)||isNaN(se))throw Xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new u(V,0,0,se,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},p.prototype.rotate=function(V){if(isNaN(V))throw Xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var se=new u(Math.cos(V),Math.sin(V),-Math.sin(V),Math.cos(V),0,0);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.translate=function(V,se){if(isNaN(V)||isNaN(se))throw Xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new u(1,0,0,1,V,se);this.ctx.transform=this.ctx.transform.multiply(ne)},p.prototype.transform=function(V,se,ne,ve,be,Te){if(isNaN(V)||isNaN(se)||isNaN(ne)||isNaN(ve)||isNaN(be)||isNaN(Te))throw Xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new u(V,se,ne,ve,be,Te);this.ctx.transform=this.ctx.transform.multiply(xe)},p.prototype.setTransform=function(V,se,ne,ve,be,Te){V=isNaN(V)?1:V,se=isNaN(se)?0:se,ne=isNaN(ne)?0:ne,ve=isNaN(ve)?1:ve,be=isNaN(be)?0:be,Te=isNaN(Te)?0:Te,this.ctx.transform=new u(V,se,ne,ve,be,Te)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(V,se,ne,ve,be,Te,xe,le,Ce){var ke=this.pdf.getImageProperties(V),Ie=1,We=1,Re=1,he=1;ve!==void 0&&le!==void 0&&(Re=le/ve,he=Ce/be,Ie=ke.width/ve*le/ve,We=ke.height/be*Ce/be),Te===void 0&&(Te=se,xe=ne,se=0,ne=0),ve!==void 0&&le===void 0&&(le=ve,Ce=be),ve===void 0&&le===void 0&&(le=ke.width,Ce=ke.height);for(var Ze,ot=this.ctx.transform.decompose(),it=de(ot.rotate.shx),Ve=new u,At=(Ve=(Ve=(Ve=Ve.multiply(ot.translate)).multiply(ot.skew)).multiply(ot.scale)).applyToRectangle(new c(Te-se*Re,xe-ne*he,ve*Ie,be*We)),He=N.call(this,At),Xt=[],Ot=0;Ot<He.length;Ot+=1)Xt.indexOf(He[Ot])===-1&&Xt.push(He[Ot]);if(E(Xt),this.autoPaging)for(var ar=Xt[0],Yt=Xt[Xt.length-1],Lt=ar;Lt<Yt+1;Lt++){this.pdf.setPage(Lt);var Sr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$t=Lt===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=Lt===1?0:ht+(Lt-2)*qt;if(this.ctx.clip_path.length!==0){var $r=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ze,this.posX+this.margin[3],-Et+$t+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=$r}var Ut=JSON.parse(JSON.stringify(At));Ut=k([Ut],this.posX+this.margin[3],-Et+$t+this.ctx.prevPageLastElemOffset)[0];var qe=(Lt>ar||Lt<Yt)&&j.call(this);qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sr,qt,null).clip().discardPath()),this.pdf.addImage(V,"JPEG",Ut.x,Ut.y,Ut.w,Ut.h,null,null,it),qe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(V,"JPEG",At.x,At.y,At.w,At.h,null,null,it)};var N=function(V,se,ne){var ve=[];se=se||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var be=this.posY+this.ctx.prevPageLastElemOffset;switch(V.type){default:case"mt":case"lt":ve.push(Math.floor((V.y+be)/ne)+1);break;case"arc":ve.push(Math.floor((V.y+be-V.radius)/ne)+1),ve.push(Math.floor((V.y+be+V.radius)/ne)+1);break;case"qct":var Te=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x,V.y);ve.push(Math.floor((Te.y+be)/ne)+1),ve.push(Math.floor((Te.y+Te.h+be)/ne)+1);break;case"bct":var xe=Ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x2,V.y2,V.x,V.y);ve.push(Math.floor((xe.y+be)/ne)+1),ve.push(Math.floor((xe.y+xe.h+be)/ne)+1);break;case"rect":ve.push(Math.floor((V.y+be)/ne)+1),ve.push(Math.floor((V.y+V.h+be)/ne)+1)}for(var le=0;le<ve.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<ve[le];)A.call(this);return ve},A=function(){var V=this.fillStyle,se=this.strokeStyle,ne=this.font,ve=this.lineCap,be=this.lineWidth,Te=this.lineJoin;this.pdf.addPage(),this.fillStyle=V,this.strokeStyle=se,this.font=ne,this.lineCap=ve,this.lineWidth=be,this.lineJoin=Te},k=function(V,se,ne){for(var ve=0;ve<V.length;ve++)switch(V[ve].type){case"bct":V[ve].x2+=se,V[ve].y2+=ne;case"qct":V[ve].x1+=se,V[ve].y1+=ne;default:V[ve].x+=se,V[ve].y+=ne}return V},E=function(V){return V.sort(function(se,ne){return se-ne})},_=function(V,se){for(var ne,ve,be=this.fillStyle,Te=this.strokeStyle,xe=this.lineCap,le=this.lineWidth,Ce=Math.abs(le*this.ctx.transform.scaleX),ke=this.lineJoin,Ie=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),Re=[],he=0;he<We.length;he++)if(We[he].x!==void 0)for(var Ze=N.call(this,We[he]),ot=0;ot<Ze.length;ot+=1)Re.indexOf(Ze[ot])===-1&&Re.push(Ze[ot]);for(var it=0;it<Re.length;it++)for(;this.pdf.internal.getNumberOfPages()<Re[it];)A.call(this);if(E(Re),this.autoPaging)for(var Ve=Re[0],At=Re[Re.length-1],He=Ve;He<At+1;He++){this.pdf.setPage(He),this.fillStyle=be,this.strokeStyle=Te,this.lineCap=xe,this.lineWidth=Ce,this.lineJoin=ke;var Xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=He===1?this.posY+this.margin[0]:this.margin[0],ar=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Lt=He===1?0:ar+(He-2)*Yt;if(this.ctx.clip_path.length!==0){var Sr=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ne,this.posX+this.margin[3],-Lt+Ot+this.ctx.prevPageLastElemOffset),O.call(this,V,!0),this.path=Sr}if(ve=JSON.parse(JSON.stringify(Ie)),this.path=k(ve,this.posX+this.margin[3],-Lt+Ot+this.ctx.prevPageLastElemOffset),se===!1||He===0){var $t=(He>Ve||He<At)&&j.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xt,Yt,null).clip().discardPath()),O.call(this,V,se),$t&&this.pdf.restoreGraphicsState()}this.lineWidth=le}else this.lineWidth=Ce,O.call(this,V,se),this.lineWidth=le;this.path=Ie},O=function(V,se){if((V!=="stroke"||se||!w.call(this))&&(V==="stroke"||se||!x.call(this))){for(var ne,ve,be=[],Te=this.path,xe=0;xe<Te.length;xe++){var le=Te[xe];switch(le.type){case"begin":be.push({begin:!0});break;case"close":be.push({close:!0});break;case"mt":be.push({start:le,deltas:[],abs:[]});break;case"lt":var Ce=be.length;if(Te[xe-1]&&!isNaN(Te[xe-1].x)&&(ne=[le.x-Te[xe-1].x,le.y-Te[xe-1].y],Ce>0)){for(;Ce>=0;Ce--)if(be[Ce-1].close!==!0&&be[Ce-1].begin!==!0){be[Ce-1].deltas.push(ne),be[Ce-1].abs.push(le);break}}break;case"bct":ne=[le.x1-Te[xe-1].x,le.y1-Te[xe-1].y,le.x2-Te[xe-1].x,le.y2-Te[xe-1].y,le.x-Te[xe-1].x,le.y-Te[xe-1].y],be[be.length-1].deltas.push(ne);break;case"qct":var ke=Te[xe-1].x+2/3*(le.x1-Te[xe-1].x),Ie=Te[xe-1].y+2/3*(le.y1-Te[xe-1].y),We=le.x+2/3*(le.x1-le.x),Re=le.y+2/3*(le.y1-le.y),he=le.x,Ze=le.y;ne=[ke-Te[xe-1].x,Ie-Te[xe-1].y,We-Te[xe-1].x,Re-Te[xe-1].y,he-Te[xe-1].x,Ze-Te[xe-1].y],be[be.length-1].deltas.push(ne);break;case"arc":be.push({deltas:[],abs:[],arc:!0}),Array.isArray(be[be.length-1].abs)&&be[be.length-1].abs.push(le)}}ve=se?null:V==="stroke"?"stroke":"fill";for(var ot=!1,it=0;it<be.length;it++)if(be[it].arc)for(var Ve=be[it].abs,At=0;At<Ve.length;At++){var He=Ve[At];He.type==="arc"?U.call(this,He.x,He.y,He.radius,He.startAngle,He.endAngle,He.counterclockwise,void 0,se,!ot):Q.call(this,He.x,He.y),ot=!0}else if(be[it].close===!0)this.pdf.internal.out("h"),ot=!1;else if(be[it].begin!==!0){var Xt=be[it].start.x,Ot=be[it].start.y;G.call(this,be[it].deltas,Xt,Ot),ot=!0}ve&&L.call(this,ve),se&&K.call(this)}},B=function(V){var se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return V-ne;case"top":return V+se-ne;case"hanging":return V+se-2*ne;case"middle":return V+se/2-ne;default:return V}},F=function(V){return V+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var V=function(){};return V.colorStops=[],V.addColorStop=function(se,ne){this.colorStops.push([se,ne])},V.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},V.isCanvasGradient=!0,V},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(V,se,ne,ve,be,Te,xe,le,Ce){for(var ke=ue.call(this,ne,ve,be,Te),Ie=0;Ie<ke.length;Ie++){var We=ke[Ie];Ie===0&&(Ce?z.call(this,We.x1+V,We.y1+se):Q.call(this,We.x1+V,We.y1+se)),H.call(this,V,se,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}le?K.call(this):L.call(this,xe)},L=function(V){switch(V){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},z=function(V,se){this.pdf.internal.out(r(V)+" "+n(se)+" m")},q=function(V){var se;switch(V.align){case"right":case"end":se="right";break;case"center":se="center";break;default:se="left"}var ne=this.pdf.getTextDimensions(V.text),ve=B.call(this,V.y),be=F.call(this,ve)-ne.h,Te=this.ctx.transform.applyToPoint(new o(V.x,ve)),xe=this.ctx.transform.decompose(),le=new u;le=(le=(le=le.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Ce,ke,Ie,We=this.ctx.transform.applyToRectangle(new c(V.x,ve,ne.w,ne.h)),Re=le.applyToRectangle(new c(V.x,be,ne.w,ne.h)),he=N.call(this,Re),Ze=[],ot=0;ot<he.length;ot+=1)Ze.indexOf(he[ot])===-1&&Ze.push(he[ot]);if(E(Ze),this.autoPaging)for(var it=Ze[0],Ve=Ze[Ze.length-1],At=it;At<Ve+1;At++){this.pdf.setPage(At);var He=At===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[2],ar=Ot-this.margin[0],Yt=this.pdf.internal.pageSize.width-this.margin[1],Lt=Yt-this.margin[3],Sr=At===1?0:Xt+(At-2)*ar;if(this.ctx.clip_path.length!==0){var $t=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ce,this.posX+this.margin[3],-1*Sr+He),O.call(this,"fill",!0),this.path=$t}var ht=k([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Sr+He+this.ctx.prevPageLastElemOffset)[0];V.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*V.scale),Ie=this.lineWidth,this.lineWidth=Ie*V.scale);var qt=this.autoPaging!=="text";if(qt||ht.y+ht.h<=Ot){if(qt||ht.y>=He&&ht.x<=Yt){var Et=qt?V.text:this.pdf.splitTextToSize(V.text,V.maxWidth||Yt-ht.x)[0],$r=k([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Sr+He+this.ctx.prevPageLastElemOffset)[0],Ut=qt&&(At>it||At<Ve)&&j.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,ar,null).clip().discardPath()),this.pdf.text(Et,$r.x,$r.y,{angle:V.angle,align:se,renderingMode:V.renderingMode}),Ut&&this.pdf.restoreGraphicsState()}}else ht.y<Ot&&(this.ctx.prevPageLastElemOffset+=Ot-ht.y);V.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=Ie)}else V.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*V.scale),Ie=this.lineWidth,this.lineWidth=Ie*V.scale),this.pdf.text(V.text,Te.x+this.posX,Te.y+this.posY,{angle:V.angle,align:se,renderingMode:V.renderingMode,maxWidth:V.maxWidth}),V.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=Ie)},Q=function(V,se,ne,ve){ne=ne||0,ve=ve||0,this.pdf.internal.out(r(V+ne)+" "+n(se+ve)+" l")},G=function(V,se,ne){return this.pdf.lines(V,se,ne,null,null)},H=function(V,se,ne,ve,be,Te,xe,le){this.pdf.internal.out([t(s(ne+V)),t(i(ve+se)),t(s(be+V)),t(i(Te+se)),t(s(xe+V)),t(i(le+se)),"c"].join(" "))},ue=function(V,se,ne,ve){for(var be=2*Math.PI,Te=Math.PI/2;se>ne;)se-=be;var xe=Math.abs(ne-se);xe<be&&ve&&(xe=be-xe);for(var le=[],Ce=ve?-1:1,ke=se;xe>1e-5;){var Ie=ke+Ce*Math.min(xe,Te);le.push(ye.call(this,V,ke,Ie)),xe-=Math.abs(Ie-ke),ke=Ie}return le},ye=function(V,se,ne){var ve=(ne-se)/2,be=V*Math.cos(ve),Te=V*Math.sin(ve),xe=be,le=-Te,Ce=xe*xe+le*le,ke=Ce+xe*be+le*Te,Ie=4/3*(Math.sqrt(2*Ce*ke)-ke)/(xe*Te-le*be),We=xe-Ie*le,Re=le+Ie*xe,he=We,Ze=-Re,ot=ve+se,it=Math.cos(ot),Ve=Math.sin(ot);return{x1:V*Math.cos(se),y1:V*Math.sin(se),x2:We*it-Re*Ve,y2:We*Ve+Re*it,x3:he*it-Ze*Ve,y3:he*Ve+Ze*it,x4:V*Math.cos(ne),y4:V*Math.sin(ne)}},de=function(V){return 180*V/Math.PI},we=function(V,se,ne,ve,be,Te){var xe=V+.5*(ne-V),le=se+.5*(ve-se),Ce=be+.5*(ne-be),ke=Te+.5*(ve-Te),Ie=Math.min(V,be,xe,Ce),We=Math.max(V,be,xe,Ce),Re=Math.min(se,Te,le,ke),he=Math.max(se,Te,le,ke);return new c(Ie,Re,We-Ie,he-Re)},Ee=function(V,se,ne,ve,be,Te,xe,le){var Ce,ke,Ie,We,Re,he,Ze,ot,it,Ve,At,He,Xt,Ot,ar=ne-V,Yt=ve-se,Lt=be-ne,Sr=Te-ve,$t=xe-be,ht=le-Te;for(ke=0;ke<41;ke++)it=(Ze=(Ie=V+(Ce=ke/40)*ar)+Ce*((Re=ne+Ce*Lt)-Ie))+Ce*(Re+Ce*(be+Ce*$t-Re)-Ze),Ve=(ot=(We=se+Ce*Yt)+Ce*((he=ve+Ce*Sr)-We))+Ce*(he+Ce*(Te+Ce*ht-he)-ot),ke==0?(At=it,He=Ve,Xt=it,Ot=Ve):(At=Math.min(At,it),He=Math.min(He,Ve),Xt=Math.max(Xt,it),Ot=Math.max(Ot,Ve));return new c(Math.round(At),Math.round(He),Math.round(Xt-At),Math.round(Ot-He))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var V,se,ne=(V=this.ctx.lineDash,se=this.ctx.lineDashOffset,JSON.stringify({lineDash:V,lineDashOffset:se}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Tt.API),function(e){var t=function(o){var c,u,d,h,p,v,x,w,j,N;for(u=[],d=0,h=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;h>d;d+=4)(p=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(v=(p=((p=((p=((p=(p-(N=p%85))/85)-(j=p%85))/85)-(w=p%85))/85)-(x=p%85))/85)%85,u.push(v+33,x+33,w+33,j+33,N+33)):u.push(122);return function(A,k){for(var E=k;E>0;E--)A.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var c,u,d,h,p,v=String,x="length",w=255,j="charCodeAt",N="slice",A="replace";for(o[N](-2),o=o[N](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),d=[],h=0,p=(o+=c="uuuuu"[N](o[x]%5||5))[x];p>h;h+=5)u=52200625*(o[j](h)-33)+614125*(o[j](h+1)-33)+7225*(o[j](h+2)-33)+85*(o[j](h+3)-33)+(o[j](h+4)-33),d.push(w&u>>24,w&u>>16,w&u>>8,w&u);return function(k,E){for(var _=E;_>0;_--)k.pop()}(d,c[x]),v.fromCharCode.apply(v,d)},n=function(o){return o.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",d=0;d<o.length;d+=2)u+=String.fromCharCode("0x"+(o[d]+o[d+1]));return u},i=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return(c=$b(c)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};e.processDataByFilters=function(o,c){var u=0,d=o||"",h=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}}(Tt.API),function(e){e.loadFile=function(t,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var c=void 0;try{c=function(u,d,h){var p=new XMLHttpRequest,v=0,x=function(w){var j=w.length,N=[],A=String.fromCharCode;for(v=0;v<j;v+=1)N.push(A(255&w.charCodeAt(v)));return N.join("")};if(p.open("GET",u,!d),p.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(p.onload=function(){p.status===200?h(x(this.responseText)):h(void 0)}),p.send(null),d&&p.status===200)return x(p.responseText)}(s,i,o)}catch{}return c}(t,r,n)},e.loadImageFile=e.loadFile}(Tt.API),function(e){function t(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):ny(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):ny(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=Mr(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(c,u){var d=document.createElement(c);for(var h in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[h]=u.style[h];return d},i=function c(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(c(p,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h},o=function c(u){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),h=c.convert(Promise.resolve(),d);return(h=h.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c),u){case"string":return this.then(r).then(function(d){return this.set({src:s("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(u){var d=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var x=0;x<h.length;++x){var w=h[x],j=w.src.find(function(N){return N.format==="truetype"});j&&d.addFont(j.url,w.ref.name,w.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,d.context2d.save(!0),u(this.prop.container,v)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var d=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(d):d})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(c=c||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,d,h){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,d,h){return this.setProgress(c?this.progress.val+c:null,u||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(c,u){var d=this;return this.thenCore(c,u,function(h,p){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return d.updateProgress(null,h),v}).then(h,p).then(function(v){return d.updateProgress(1),v})})},o.prototype.thenCore=function(c,u,d){d=d||Promise.prototype.then;var h=this;c&&(c=c.bind(h)),u&&(u=u.bind(h));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),v=d.call(p,c,u);return o.convert(v,h.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(d){u=u.thenCore(d)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Tt.getPageSize=function(c,u,d){if(Mr(c)==="object"){var h=c;c=h.orientation,u=h.unit||u,d=h.format||d}u=u||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var p,v=(""+d).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+u}var w,j=0,N=0;if(x.hasOwnProperty(v))j=x[v][1]/p,N=x[v][0]/p;else try{j=d[1],N=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",N>j&&(w=N,N=j,j=w);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",j>N&&(w=N,N=j,j=w)}return{width:N,height:j,unit:u,k:p,orientation:c}},e.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(wy):null;var d=new o(u);return u.worker?d:d.from(c).doCallback()}}(Tt.API),Tt.API.addJS=function(e){return FS=e,this.internal.events.subscribe("postPutResources",function(){ep=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ep+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),BS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+FS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ep!==void 0&&BS!==void 0&&this.internal.out("/Names <</JavaScript "+ep+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],c=n.exec(o);if(c!=null){var u=c[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(i=0;i<d;i++){var p=r.internal.newObject();h.push(p);var v=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<h.length;i++)r.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var c=this.count=this.count_r({count:0},o);if(c>0&&this.line("/Count "+c),o.options&&o.options.pageNumber){var u=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(Tt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,c){var u,d=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,u=function(p){for(var v,x=256*p.charCodeAt(4)+p.charCodeAt(5),w=p.length,j={width:0,height:0,numcomponents:1},N=4;N<w;N+=2){if(N+=x,t.indexOf(p.charCodeAt(N+1))!==-1){v=256*p.charCodeAt(N+5)+p.charCodeAt(N+6),j={width:256*p.charCodeAt(N+7)+p.charCodeAt(N+8),height:v,numcomponents:p.charCodeAt(N+9)};break}x=256*p.charCodeAt(N+2)+p.charCodeAt(N+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}h={data:r,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:d,index:n,alias:s}}return h}}(Tt.API),Tt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,i=ble(e,{checkCrc:!0}),o=i.width,c=i.height,u=i.channels,d=i.palette,h=i.depth;s=d&&u===1?function(U){for(var L=U.width,K=U.height,z=U.data,q=U.palette,Q=U.depth,G=!1,H=[],ue=[],ye=void 0,de=!1,we=0,Ee=0;Ee<q.length;Ee++){var ie=WC(q[Ee],4),V=ie[0],se=ie[1],ne=ie[2],ve=ie[3];H.push(V,se,ne),ve!=null&&(ve===0?(we++,ue.length<1&&ue.push(Ee)):ve<255&&(de=!0))}if(de||we>1){G=!0,ue=void 0;var be=L*K;ye=new Uint8Array(be);for(var Te=new DataView(z.buffer),xe=0;xe<be;xe++){var le=jy(Te,xe,Q),Ce=WC(q[le],4)[3];ye[xe]=Ce}}else we===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:z,alphaBytes:ye,needSMask:G,palette:H,mask:ue}}(i):u===2||u===4?function(U){for(var L=U.data,K=U.width,z=U.height,q=U.channels,Q=U.depth,G=q===2?"DeviceGray":"DeviceRGB",H=q-1,ue=K*z,ye=H,de=ue*ye,we=1*ue,Ee=Math.ceil(de*Q/8),ie=Math.ceil(we*Q/8),V=new Uint8Array(Ee),se=new Uint8Array(ie),ne=new DataView(L.buffer),ve=new DataView(V.buffer),be=new DataView(se.buffer),Te=!1,xe=0;xe<ue;xe++){for(var le=xe*q,Ce=0;Ce<ye;Ce++)KS(ve,jy(ne,le+Ce,Q),xe*ye+Ce,Q);var ke=jy(ne,le+ye,Q);ke<(1<<Q)-1&&(Te=!0),KS(be,ke,1*xe,Q)}return{colorSpace:G,colorsPerPixel:H,sMaskBitsPerComponent:Te?Q:void 0,colorBytes:V,alphaBytes:se,needSMask:Te}}(i):function(U){var L=U.data,K=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:K,colorsPerPixel:K==="DeviceGray"?1:3,colorBytes:L instanceof Uint16Array?function(z){for(var q=z.length,Q=new Uint8Array(2*q),G=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),H=0;H<q;H++)G.setUint16(2*H,z[H],!1);return Q}(L):L,needSMask:!1}}(i);var p,v,x,w=s,j=w.colorSpace,N=w.colorsPerPixel,A=w.sMaskBitsPerComponent,k=w.colorBytes,E=w.alphaBytes,_=w.needSMask,O=w.palette,B=w.mask,F=null;return n!==Tt.API.image_compression.NONE&&typeof $b=="function"?(F=function(U){var L;switch(U){case Tt.API.image_compression.FAST:L=11;break;case Tt.API.image_compression.MEDIUM:L=13;break;case Tt.API.image_compression.SLOW:L=14;break;default:L=12}return L}(n),p=this.decode.FLATE_DECODE,v="/Predictor ".concat(F," /Colors ").concat(N," /BitsPerComponent ").concat(h," /Columns ").concat(o),e=WS(k,Math.ceil(o*N*h/8),N,h,n),_&&(x=WS(E,Math.ceil(o*A/8),1,A,n))):(p=void 0,v=void 0,e=k,_&&(x=E)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:p,decodeParameters:v,transparency:B,palette:O,sMask:x,predictor:F,width:o,height:c,bitsPerComponent:h,sMaskBitsPerComponent:A,colorSpace:j}}},function(e){e.processGIF89A=function(t,r,n,s){var i=new zle(t),o=i.width,c=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:o,height:c},h=new Ay(100).encode(d,100);return e.processJPEG.call(this,h,r,n,s)},e.processGIF87A=e.processGIF89A}(Tt.API),no.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},no.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Xr.log("bit decode error:"+r)}},no.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,c=0;c<8&&8*s+c<this.width;c++){var u=this.palette[i>>7-c&1];this.data[o+4*c]=u.blue,this.data[o+4*c+1]=u.green,this.data[o+4*c+2]=u.red,this.data[o+4*c+3]=255}r!==0&&(this.pos+=4-r)}},no.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,c=i>>4,u=15&i,d=this.palette[c];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[u],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},no.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},no.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&t)/t*255|0,u=(i>>10&t)/t*255|0,d=i>>15?255:0,h=n*this.width*4+4*s;this.data[h]=u,this.data[h+1]=c,this.data[h+2]=o,this.data[h+3]=d}this.pos+=e}},no.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&t)/t*255|0,u=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,h=s*this.width*4+4*i;this.data[h]=d,this.data[h+1]=u,this.data[h+2]=c,this.data[h+3]=255}this.pos+=e}},no.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},no.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=i,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=o}},no.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var i=new no(t,!1),o=i.width,c=i.height,u={data:i.getData(),width:o,height:c},d=new Ay(100).encode(u,100);return e.processJPEG.call(this,d,r,n,s)}}(Tt.API),YS.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var i=new YS(t),o=i.width,c=i.height,u={data:i.getData(),width:o,height:c},d=new Ay(100).encode(u,100);return e.processJPEG.call(this,d,r,n,s)}}(Tt.API),Tt.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),c=0,u=0,d=0;d<s;d+=4){var h=n[d],p=n[d+1],v=n[d+2],x=n[d+3];i[c++]=h,i[c++]=p,i[c++]=v,o[u++]=x}var w=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:w,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Tt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},dd=Tt.API,tp=dd.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:s.metadata.Unicode.widths,u=c.fof?c.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,h=d.fof?d.fof:1,p=t.doKerning!==!1,v=0,x=e.length,w=0,j=c[0]||u,N=[];for(r=0;r<x;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?N.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(v=p&&Mr(d[n])==="object"&&!isNaN(parseInt(d[n][w],10))?d[n][w]/h:0,N.push((c[n]||j)/u+v)),w=n;return N},US=dd.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return dd.processArabic&&(e=dd.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:tp.apply(this,arguments).reduce(function(i,o){return i+o},0)},zS=function(e,t,r,n){for(var s=[],i=0,o=e.length,c=0;i!==o&&c+t[i]<r;)c+=t[i],i++;s.push(e.slice(0,i));var u=i;for(c=0;i!==o;)c+t[i]>n&&(s.push(e.slice(u,i)),c=0,u=i),c+=t[i],i++;return u!==i&&s.push(e.slice(u,i)),s},$S=function(e,t,r){r||(r={});var n,s,i,o,c,u,d,h=[],p=[h],v=r.textIndent||0,x=0,w=0,j=e.split(" "),N=tp.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var A=Array(u).join(" "),k=[];j.map(function(_){(_=_.split(/\s*\n/)).length>1?k=k.concat(_.map(function(O,B){return(B&&O.length?`
`:"")+O})):k.push(_[0])}),j=k,u=US.apply(this,[A,r])}for(i=0,o=j.length;i<o;i++){var E=0;if(n=j[i],u&&n[0]==`
`&&(n=n.substr(1),E=1),v+x+(w=(s=tp.apply(this,[n,r])).reduce(function(_,O){return _+O},0))>t||E){if(w>t){for(c=zS.apply(this,[n,s,t-(v+x),t]),h.push(c.shift()),h=[c.pop()];c.length;)p.push([c.shift()]);w=s.slice(n.length-(h[0]?h[0].length:0)).reduce(function(_,O){return _+O},0)}else h=[n];p.push(h),v=w+u,x=N}else h.push(n),v+=x+w,x=N}return d=u?function(_,O){return(O?A:"")+_.join(" ")}:function(_){return _.join(" ")},p.map(d)},dd.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle),v="Unicode";return p.metadata[v]?{widths:p.metadata[v].widths||{0:1},kerning:p.metadata[v].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var c,u,d=[];for(c=0,u=n.length;c<u;c++)d=d.concat($S.apply(this,[n[c],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=t[i],s[t[i]]=r[i];var o=function(v){return"0x"+parseInt(v,10).toString(16)},c=e.__fontmetrics__.compress=function(v){var x,w,j,N,A=["{"];for(var k in v){if(x=v[k],isNaN(parseInt(k,10))?w="'"+k+"'":(k=parseInt(k,10),w=(w=o(k).slice(2)).slice(0,-1)+s[w.slice(-1)]),typeof x=="number")x<0?(j=o(x).slice(3),N="-"):(j=o(x).slice(2),N=""),j=N+j.slice(0,-1)+s[j.slice(-1)];else{if(Mr(x)!=="object")throw new Error("Don't know what to do with value type "+Mr(x)+".");j=c(x)}A.push(w+j)}return A.push("}"),A.join("")},u=e.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,w,j,N,A={},k=1,E=A,_=[],O="",B="",F=v.length-1,U=1;U<F;U+=1)(N=v[U])=="'"?x?(j=x.join(""),x=void 0):x=[]:x?x.push(N):N=="{"?(_.push([E,j]),E={},j=void 0):N=="}"?((w=_.pop())[0][w[1]]=E,j=void 0,E=w[0]):N=="-"?k=-1:j===void 0?n.hasOwnProperty(N)?(O+=n[N],j=parseInt(O,16)*k,k=1,O=""):O+=N:n.hasOwnProperty(N)?(B+=n[N],E[j]=parseInt(B,16)*k,k=1,j=void 0,B=""):B+=N;return A},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(v){var x=v.font,w=p.Unicode[x.postScriptName];w&&(x.metadata.Unicode={},x.metadata.Unicode.widths=w.widths,x.metadata.Unicode.kerning=w.kerning);var j=h.Unicode[x.postScriptName];j&&(x.metadata.Unicode.encoding=j,x.encoding=j.codePages[0])}])}(Tt.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(wp(c)),o.metadata=e.API.TTFFont.open(c),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(Tt),Tt.API.addSvgAsImage=function(e,t,r,n,s,i,o,c){if(isNaN(t)||isNaN(r))throw Xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=s;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Jt.canvg?Promise.resolve(Jt.canvg):ny(()=>import("./index.es-CaJaDbee.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(d,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),t,r,n,s,o,c)})},Tt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},Tt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(o),u=[],d=0,h=0,p=0;function v(w,j){var N,A=!1;for(N=0;N<w.length;N+=1)w[N]===j&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=c.length;for(p=0;p<x;p+=1)r[c[p]].value=r[c[p]].defaultValue,r[c[p]].explicitSet=!1}if(Mr(e)==="object"){for(s in e)if(i=e[s],v(c,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&v(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")u.push(String(i[d]-1));else if(i[d].length>1){for(h=0;h<i[d].length;h+=1)typeof i[d][h]!="number"&&(n=!1);n===!0&&u.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+u.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,j=[];for(w in r)r[w].explicitSet===!0&&(r[w].type==="name"?j.push("/"+w+" /"+r[w].value):j.push("/"+w+" "+r[w].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+c.length+s.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+c+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Tt.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var c,u=o.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],p=0,v=i.length;p<v;++p){if(c=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(c),o.metadata.toUnicode[c]=i.charCodeAt(p),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(o.metadata.widthOfGlyph(c),10)])),c=="0")return h.join("");c=c.toString(16),h.push(d[4-c.length],c)}return h.join("")},n=function(i){var o,c,u,d,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,v=(c=Object.keys(i).sort(function(x,w){return x-w})).length;p<v;p++)o=c[p],u.length>=100&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+d+">"));return u.length&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var c=o.font,u=o.out,d=o.newObject,h=o.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="Identity-H"){for(var p=c.metadata.Unicode.widths,v=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",w=0;w<v.length;w++)x+=String.fromCharCode(v[w]);var j=d();h({data:x,addLength1:!0,objectId:j}),u("endobj");var N=d();h({data:n(c.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var A=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+hd(c.fontName)),u("/FontFile2 "+j+" 0 R"),u("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var k=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+hd(c.fontName)),u("/FontDescriptor "+A+" 0 R"),u("/W "+e.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+N+" 0 R"),u("/BaseFont /"+hd(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+k+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var c=o.font,u=o.out,d=o.newObject,h=o.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var p=c.metadata.rawData,v="",x=0;x<p.length;x++)v+=String.fromCharCode(p[x]);var w=d();h({data:v,addLength1:!0,objectId:w}),u("endobj");var j=d();h({data:n(c.metadata.toUnicode),addLength1:!0,objectId:j}),u("endobj");var N=d();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+w+" 0 R"),u("/Flags 96"),u("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+hd(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=d();for(var A=0;A<c.metadata.hmtx.widths.length;A++)c.metadata.hmtx.widths[A]=parseInt(c.metadata.hmtx.widths[A]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+hd(c.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,c=i.text||"",u=i.x,d=i.y,h=i.options||{},p=i.mutex||{},v=p.pdfEscape,x=p.activeFontKey,w=p.fonts,j=x,N="",A=0,k="",E=w[j].encoding;if(w[j].encoding!=="Identity-H")return{text:c,x:u,y:d,options:h,mutex:p};for(k=c,j=x,Array.isArray(c)&&(k=c[0]),A=0;A<k.length;A+=1)w[j].metadata.hasOwnProperty("cmap")&&(o=w[j].metadata.cmap.unicode.codeMap[k[A].charCodeAt(0)]),o||k[A].charCodeAt(0)<256&&w[j].metadata.hasOwnProperty("Unicode")?N+=k[A]:N+="";var _="";return parseInt(j.slice(1))<14||E==="WinAnsiEncoding"?_=v(N,j).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(_=r(N,w[j])),p.isHex=!0,{text:_,x:u,y:d,options:h,mutex:p}};t.events.push(["postProcessText",function(i){var o=i.text||"",c=[],u={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?c.push([s(Object.assign({},u,{text:o[d][0]})).text,o[d][1],o[d][2]]):c.push(s(Object.assign({},u,{text:o[d]})).text);i.text=c}else i.text=s(Object.assign({},u,{text:o})).text}])}(Tt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Tt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,c,u,d,h,p=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,E=0;this.__bidiEngine__={};var _=function(z){var q=z.charCodeAt(),Q=q>>8,G=j[Q];return G!==void 0?p[256*G+(255&q)]:Q===252||Q===253?"AL":A.test(Q)?"L":Q===8?"R":"N"},O=function(z){for(var q,Q=0;Q<z.length;Q++){if((q=_(z.charAt(Q)))==="L")return!1;if(q==="R")return!0}return!1},B=function(z,q,Q,G){var H,ue,ye,de,we=q[G];switch(we){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"N":case"AN":break;case"EN":k&&(we="AN");break;case"AL":k=!0,we="R";break;case"WS":case"BN":we="N";break;case"CS":G<1||G+1>=q.length||(H=Q[G-1])!=="EN"&&H!=="AN"||(ue=q[G+1])!=="EN"&&ue!=="AN"?we="N":k&&(ue="AN"),we=ue===H?ue:"N";break;case"ES":we=(H=G>0?Q[G-1]:"B")==="EN"&&G+1<q.length&&q[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&Q[G-1]==="EN"){we="EN";break}if(k){we="N";break}for(ye=G+1,de=q.length;ye<de&&q[ye]==="ET";)ye++;we=ye<de&&q[ye]==="EN"?"EN":"N";break;case"NSM":if(o&&!c){for(de=q.length,ye=G+1;ye<de&&q[ye]==="NSM";)ye++;if(ye<de){var Ee=z[G],ie=Ee>=1425&&Ee<=2303||Ee===64286;if(H=q[ye],ie&&(H==="R"||H==="AL")){we="R";break}}}we=G<1||(H=q[G-1])==="B"?"N":Q[G-1];break;case"B":k=!1,s=!0,we=E;break;case"S":i=!0,we="N"}return we},F=function(z,q,Q){var G=z.split("");return Q&&U(G,Q,{hiLevel:E}),G.reverse(),q&&q.reverse(),G.join("")},U=function(z,q,Q){var G,H,ue,ye,de,we=-1,Ee=z.length,ie=0,V=[],se=E?x:v,ne=[];for(k=!1,s=!1,i=!1,H=0;H<Ee;H++)ne[H]=_(z[H]);for(ue=0;ue<Ee;ue++){if(de=ie,V[ue]=B(z,ne,V,ue),G=240&(ie=se[de][w[V[ue]]]),ie&=15,q[ue]=ye=se[ie][5],G>0)if(G===16){for(H=we;H<ue;H++)q[H]=1;we=-1}else we=-1;if(se[ie][6])we===-1&&(we=ue);else if(we>-1){for(H=we;H<ue;H++)q[H]=ye;we=-1}ne[ue]==="B"&&(q[ue]=0),Q.hiLevel|=ye}i&&function(ve,be,Te){for(var xe=0;xe<Te;xe++)if(ve[xe]==="S"){be[xe]=E;for(var le=xe-1;le>=0&&ve[le]==="WS";le--)be[le]=E}}(ne,q,Ee)},L=function(z,q,Q,G,H){if(!(H.hiLevel<z)){if(z===1&&E===1&&!s)return q.reverse(),void(Q&&Q.reverse());for(var ue,ye,de,we,Ee=q.length,ie=0;ie<Ee;){if(G[ie]>=z){for(de=ie+1;de<Ee&&G[de]>=z;)de++;for(we=ie,ye=de-1;we<ye;we++,ye--)ue=q[we],q[we]=q[ye],q[ye]=ue,Q&&(ue=Q[we],Q[we]=Q[ye],Q[ye]=ue);ie=de}ie++}}},K=function(z,q,Q){var G=z.split(""),H={hiLevel:E};return Q||(Q=[]),U(G,Q,H),function(ue,ye,de){if(de.hiLevel!==0&&h)for(var we,Ee=0;Ee<ue.length;Ee++)ye[Ee]===1&&(we=N.indexOf(ue[Ee]))>=0&&(ue[Ee]=N[we+1])}(G,Q,H),L(2,G,q,Q,H),L(1,G,q,Q,H),G.join("")};return this.__bidiEngine__.doBidiReorder=function(z,q,Q){if(function(H,ue){if(ue)for(var ye=0;ye<H.length;ye++)ue[ye]=ye;c===void 0&&(c=O(H)),d===void 0&&(d=O(H))}(z,q),o||!u||d)if(o&&u&&c^d)E=c?1:0,z=F(z,q,Q);else if(!o&&u&&d)E=c?1:0,z=K(z,q,Q),z=F(z,q);else if(!o||c||u||d){if(o&&!u&&c^d)z=F(z,q),c?(E=0,z=K(z,q,Q)):(E=1,z=K(z,q,Q),z=F(z,q));else if(o&&c&&!u&&d)E=1,z=K(z,q,Q),z=F(z,q);else if(!o&&!u&&c^d){var G=h;c?(E=1,z=K(z,q,Q),E=0,h=!1,z=K(z,q,Q),h=G):(E=0,z=K(z,q,Q),z=F(z,q),E=1,h=!1,z=K(z,q,Q),h=G,z=F(z,q))}}else E=0,z=K(z,q,Q);else E=c?1:0,z=K(z,q,Q);return z},this.__bidiEngine__.setOptions=function(z){z&&(o=z.isInputVisual,u=z.isOutputVisual,c=z.isInputRtl,d=z.isOutputRtl,h=z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var c=0;for(o=[],c=0;c<s.length;c+=1)Object.prototype.toString.call(s[c])==="[object Array]"?o.push([r.doBidiReorder(s[c][0]),s[c][1],s[c][2]]):o.push([r.doBidiReorder(s[c])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(Tt),Tt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Mc(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new rce(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new $le(this.contents),this.head=new qle(this),this.name=new Xle(this),this.cmap=new OR(this),this.toUnicode={},this.hhea=new Hle(this),this.maxp=new Yle(this),this.hmtx=new Zle(this),this.post=new Gle(this),this.os2=new Vle(this),this.loca=new tce(this),this.glyf=new Jle(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,c,u,d;for(d=[],o=0,c=(u=this.bbox).length;o<c;o++)t=u[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,c;for(o=0,i=0,c=(t=""+t).length;0<=c?i<c:i>c;i=0<=c?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var yo,Mc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,c,u;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^c)+(255^u)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*c+u},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),$le=function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,c,u,d,h,p,v,x,w,j;for(j in x=Object.keys(r).length,u=Math.log(2),p=16*Math.floor(Math.log(x)/u),o=Math.floor(p/u),h=16*x-p,(s=new Mc).writeInt(this.scalarType),s.writeShort(x),s.writeShort(p),s.writeShort(o),s.writeShort(h),i=16*x,d=s.pos+i,c=null,w=[],r)for(v=r[j],s.writeString(j),s.writeInt(e(v)),s.writeInt(d),s.writeInt(v.length),w=w.concat(v),j==="head"&&(c=d),d+=v.length;d%4;)w.push(0),d++;return s.write(w),n=2981146554-e(s.data),s.pos=c+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=RR.call(r);r.length%4;)r.push(0);for(i=new Mc(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t}(),Wle={}.hasOwnProperty,Vo=function(e,t){for(var r in t)Wle.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};yo=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var qle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Mc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),ZS=function(){function e(t,r){var n,s,i,o,c,u,d,h,p,v,x,w,j,N,A,k,E;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(x=t.readUInt16(),v=x/2,t.pos+=6,i=function(){var _,O;for(O=[],u=_=0;0<=v?_<v:_>v;u=0<=v?++_:--_)O.push(t.readUInt16());return O}(),t.pos+=2,j=function(){var _,O;for(O=[],u=_=0;0<=v?_<v:_>v;u=0<=v?++_:--_)O.push(t.readUInt16());return O}(),d=function(){var _,O;for(O=[],u=_=0;0<=v?_<v:_>v;u=0<=v?++_:--_)O.push(t.readUInt16());return O}(),h=function(){var _,O;for(O=[],u=_=0;0<=v?_<v:_>v;u=0<=v?++_:--_)O.push(t.readUInt16());return O}(),s=(this.length-t.pos+this.offset)/2,c=function(){var _,O;for(O=[],u=_=0;0<=s?_<s:_>s;u=0<=s?++_:--_)O.push(t.readUInt16());return O}(),u=A=0,E=i.length;A<E;u=++A)for(N=i[u],n=k=w=j[u];w<=N?k<=N:k>=N;n=w<=N?++k:--k)h[u]===0?o=n+d[u]:(o=c[h[u]/2+(n-w)-(v-u)]||0)!==0&&(o+=d[u]),this.codeMap[n]=65535&o}t.pos=p}return e.encode=function(t,r){var n,s,i,o,c,u,d,h,p,v,x,w,j,N,A,k,E,_,O,B,F,U,L,K,z,q,Q,G,H,ue,ye,de,we,Ee,ie,V,se,ne,ve,be,Te,xe,le,Ce,ke,Ie;switch(G=new Mc,o=Object.keys(t).sort(function(We,Re){return We-Re}),r){case"macroman":for(j=0,N=function(){var We=[];for(w=0;w<256;++w)We.push(0);return We}(),k={0:0},i={},H=0,we=o.length;H<we;H++)k[le=t[s=o[H]]]==null&&(k[le]=++j),i[s]={old:t[s],new:k[t[s]]},N[s]=k[t[s]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(N),{charMap:i,subtable:G.data,maxGlyphID:j+1};case"unicode":for(q=[],p=[],E=0,k={},n={},A=d=null,ue=0,Ee=o.length;ue<Ee;ue++)k[O=t[s=o[ue]]]==null&&(k[O]=++E),n[s]={old:O,new:k[O]},c=k[O]-s,A!=null&&c===d||(A&&p.push(A),q.push(s),d=c),A=s;for(A&&p.push(A),p.push(65535),q.push(65535),K=2*(L=q.length),U=2*Math.pow(Math.log(L)/Math.LN2,2),v=Math.log(U/2)/Math.LN2,F=2*L-U,u=[],B=[],x=[],w=ye=0,ie=q.length;ye<ie;w=++ye){if(z=q[w],h=p[w],z===65535){u.push(0),B.push(0);break}if(z-(Q=n[z].new)>=32768)for(u.push(0),B.push(2*(x.length+L-w)),s=de=z;z<=h?de<=h:de>=h;s=z<=h?++de:--de)x.push(n[s].new);else u.push(Q-z),B.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*L+2*x.length),G.writeUInt16(0),G.writeUInt16(K),G.writeUInt16(U),G.writeUInt16(v),G.writeUInt16(F),Te=0,V=p.length;Te<V;Te++)s=p[Te],G.writeUInt16(s);for(G.writeUInt16(0),xe=0,se=q.length;xe<se;xe++)s=q[xe],G.writeUInt16(s);for(Ce=0,ne=u.length;Ce<ne;Ce++)c=u[Ce],G.writeUInt16(c);for(ke=0,ve=B.length;ke<ve;ke++)_=B[ke],G.writeUInt16(_);for(Ie=0,be=x.length;Ie<be;Ie++)j=x[Ie],G.writeUInt16(j);return{charMap:n,subtable:G.data,maxGlyphID:E+1}}},e}(),OR=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new ZS(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,s;return r==null&&(r="macroman"),n=ZS.encode(t,r),(s=new Mc).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},e}(),Hle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Vle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Gle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),Kle=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Xle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,s,i,o,c,u,d,h,p,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},i=h=0,p=n.length;h<p;i=++h)s=n[i],t.pos=s.offset,d=t.readString(s.length),o=new Kle(d,s),u[v=s.nameID]==null&&(u[v]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Yle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Zle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,s,i,o,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)h.push(t.readInt16());return h}(),this.widths=(function(){var d,h,p,v;for(v=[],d=0,h=(p=this.metrics).length;d<h;d++)i=p[d],v.push(i.advance);return v}).call(this),n=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(n));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),RR=[].slice,Jle=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,s,i,o,c,u,d,h,p;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(s=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(c=new Mc(r.read(s))).readShort(),d=c.readShort(),p=c.readShort(),u=c.readShort(),h=c.readShort(),this.cache[t]=o===-1?new ece(c,d,p,u,h):new Qle(c,o,d,p,u,h),this.cache[t]))},e.prototype.encode=function(t,r,n){var s,i,o,c,u;for(o=[],i=[],c=0,u=r.length;c<u;c++)s=t[r[c]],i.push(o.length),s&&(o=o.concat(s.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),Qle=function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ece=function(){function e(t,r,n,s,i){var o,c;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;c=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&c;)o.pos+=1&c?4:2,128&c?o.pos+=8:64&c?o.pos+=4:8&c&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Mc(RR.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),tce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Vo(e,yo),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<n.length;++o)if(n[o]=s,i<r.length&&r[i]==o){++i,n[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*n.length),h=0;h<n.length;++h)d[4*h+3]=255&n[h],d[4*h+2]=(65280&n[h])>>8,d[4*h+1]=(16711680&n[h])>>16,d[4*h]=(4278190080&n[h])>>24;return d},e}(),rce=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,c,u;for(s={},o=0,c=t.length;o<c;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in u=this.glyphsFor(r))n=u[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,c,u,d,h,p,v,x,w,j,N,A;for(s in n=OR.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),x={0:0},A=n.charMap)x[(u=A[s]).old]=u.new;for(w in v=n.maxGlyphID,o)w in x||(x[w]=v++);return h=function(k){var E,_;for(E in _={},k)_[k[E]]=E;return _}(x),p=Object.keys(h).sort(function(k,E){return k-E}),j=function(){var k,E,_;for(_=[],k=0,E=p.length;k<E;k++)c=p[k],_.push(h[c]);return _}(),i=this.font.glyf.encode(o,j,x),d=this.font.loca.encode(i.offsets,j),N={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},e}();Tt.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var c,u,d;for(d=[],c=0,u=r.length;c<u;c++)n=r[c],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function DR(e,t,r,n,s){n=n||{};var i=1.15,o=s.internal.scaleFactor,c=s.internal.getFontSize()/o,u=s.getLineHeightFactor?s.getLineHeightFactor():i,d=c*u,h=/\r\n|\r|\n/g,p="",v=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof e=="string"?e.split(h):e,v=p.length||1),r+=c*(2-i),n.valign==="middle"?r-=v/2*d:n.valign==="bottom"&&(r-=v*d),n.halign==="center"||n.halign==="right"){var x=c;if(n.halign==="center"&&(x*=.5),p&&v>=1){for(var w=0;w<p.length;w++)s.text(p[w],t-s.getStringUnitWidth(p[w])*x,r),r+=d;return s}t-=s.getStringUnitWidth(e)*x}return n.halign==="justify"?s.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(e,t,r),s}var JS={},Hd=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:JS=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,s,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),c=o.fontStyle,u=o.fontName;if(t.font&&(u=t.font),t.fontStyle){c=t.fontStyle;var d=this.getFontList()[u];d&&d.indexOf(c)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),c=d[0])}if(this.jsPDFDocument.setFont(u,c),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var h=e.unifyColor(t.fillColor);h&&(n=this.jsPDFDocument).setFillColor.apply(n,h),h=e.unifyColor(t.textColor),h&&(s=this.jsPDFDocument).setTextColor.apply(s,h),h=e.unifyColor(t.lineColor),h&&(i=this.jsPDFDocument).setDrawColor.apply(i,h),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,s,i){return this.jsPDFDocument.rect(t,r,n,s,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return JS||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Yb=function(e,t){return Yb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Yb(e,t)};function LR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yb(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var MR=function(e){LR(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function nce(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ace(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function e1(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],s=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return s}function BR(e,t,r,n){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var o=FR(s,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function FR(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Tx(e,t){var r,n,s,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(s=e.right)!==null&&s!==void 0?s:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function UR(e,t){var r=Tx(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function sce(e,t,r,n,s){var i={},o=1.3333333333333333,c=Cy(t,function(E){return s.getComputedStyle(E).backgroundColor});c!=null&&(i.fillColor=c);var u=Cy(t,function(E){return s.getComputedStyle(E).color});u!=null&&(i.textColor=u);var d=oce(n,r);d&&(i.cellPadding=d);var h="borderTopColor",p=o*r,v=n.borderTopWidth;if(n.borderBottomWidth===v&&n.borderRightWidth===v&&n.borderLeftWidth===v){var x=(parseFloat(v)||0)/p;x&&(i.lineWidth=x)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},i.lineWidth.top||(i.lineWidth.right?h="borderRightColor":i.lineWidth.bottom?h="borderBottomColor":i.lineWidth.left&&(h="borderLeftColor"));var w=Cy(t,function(E){return s.getComputedStyle(E)[h]});w!=null&&(i.lineColor=w);var j=["left","right","center","justify"];j.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),j=["middle","bottom","top"],j.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var N=parseInt(n.fontSize||"");isNaN(N)||(i.fontSize=N/o);var A=ice(n);A&&(i.fontStyle=A);var k=(n.fontFamily||"").toLowerCase();return e.indexOf(k)!==-1&&(i.font=k),i}function ice(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function Cy(e,t){var r=zR(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function zR(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:zR(e.parentElement,t):r}function oce(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(c){return parseInt(c||"0")/n}),o=Tx(i,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}function $R(e,t,r,n,s){var i,o;n===void 0&&(n=!1),s===void 0&&(s=!1);var c;typeof t=="string"?c=r.document.querySelector(t):c=t;var u=Object.keys(e.getFontList()),d=e.scaleFactor(),h=[],p=[],v=[];if(!c)return console.error("Html table could not be found with input: ",t),{head:h,body:p,foot:v};for(var x=0;x<c.rows.length;x++){var w=c.rows[x],j=(o=(i=w==null?void 0:w.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),N=lce(u,d,r,w,n,s);N&&(j==="thead"?h.push(N):j==="tfoot"?v.push(N):p.push(N))}return{head:h,body:p,foot:v}}function lce(e,t,r,n,s,i){for(var o=new MR(n),c=0;c<n.cells.length;c++){var u=n.cells[c],d=r.getComputedStyle(u);if(s||d.display!=="none"){var h=void 0;i&&(h=sce(e,u,t,d,r)),o.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:h,_element:u,content:cce(u)})}}var p=r.getComputedStyle(n);if(o.length>0&&(s||p.display!=="none"))return o}function cce(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function uce(e,t,r){for(var n=0,s=[e,t,r];n<s.length;n++){var i=s[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Sl(e,t,r,n,s){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var c=arguments[o];if(c!=null)for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(i[u]=c[u])}return i}function dce(e,t){var r=new Hd(e),n=r.getDocumentOptions(),s=r.getGlobalOptions();uce(s,n,t);var i=Sl({},s,n,t),o;typeof window<"u"&&(o=window);var c=fce(s,n,t),u=hce(s,n,t),d=mce(r,i),h=gce(r,i,o);return{id:t.tableId,content:h,hooks:u,styles:c,settings:d}}function fce(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(u){if(u==="columnStyles"){var d=e[u],h=t[u],p=r[u];n.columnStyles=Sl({},d,h,p)}else{var v=[e,t,r],x=v.map(function(w){return w[u]||{}});n[u]=Sl({},x[0],x[1],x[2])}},i=0,o=Object.keys(n);i<o.length;i++){var c=o[i];s(c)}return n}function hce(e,t,r){for(var n=[e,t,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var c=o[i];c.didParseCell&&s.didParseCell.push(c.didParseCell),c.willDrawCell&&s.willDrawCell.push(c.willDrawCell),c.didDrawCell&&s.didDrawCell.push(c.didDrawCell),c.willDrawPage&&s.willDrawPage.push(c.willDrawPage),c.didDrawPage&&s.didDrawPage.push(c.didDrawPage)}return s}function mce(e,t){var r,n,s,i,o,c,u,d,h,p,v,x,w=Tx(t.margin,40/e.scaleFactor()),j=(r=pce(e,t.startY))!==null&&r!==void 0?r:w.top,N;t.showFoot===!0?N="everyPage":t.showFoot===!1?N="never":N=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var A;t.showHead===!0?A="everyPage":t.showHead===!1?A="never":A=(s=t.showHead)!==null&&s!==void 0?s:"everyPage";var k=(i=t.useCss)!==null&&i!==void 0?i:!1,E=t.theme||(k?"plain":"striped"),_=!!t.horizontalPageBreak,O=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(c=t.includeHiddenHtml)!==null&&c!==void 0?c:!1,useCss:k,theme:E,startY:j,margin:w,pageBreak:(u=t.pageBreak)!==null&&u!==void 0?u:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(h=t.tableWidth)!==null&&h!==void 0?h:"auto",showHead:A,showFoot:N,tableLineWidth:(p=t.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(v=t.tableLineColor)!==null&&v!==void 0?v:200,horizontalPageBreak:_,horizontalPageBreakRepeat:O,horizontalPageBreakBehaviour:(x=t.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function pce(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),s=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===s}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function gce(e,t,r){var n=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var c=$R(e,t.html,r,o,t.useCss)||{};n=c.head||n,s=c.body||n,i=c.foot||n}else console.error("Cannot parse html in non browser environment")}var u=t.columns||xce(n,s,i);return{columns:u,head:n,body:s,foot:i}}function xce(e,t,r){var n=e[0]||t[0]||r[0]||[],s=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,c;Array.isArray(n)?c=n[parseInt(i)]:c=n[i],typeof c=="object"&&!Array.isArray(c)&&(o=(c==null?void 0:c.colSpan)||1);for(var u=0;u<o;u++){var d=void 0;Array.isArray(n)?d=s.length:d=i+(u>0?"_".concat(u):"");var h={dataKey:d};s.push(h)}}),s}var Zb=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),yce=function(e){LR(t,e);function t(r,n,s,i,o,c){var u=e.call(this,r,n,c)||this;return u.cell=s,u.row=i,u.column=o,u.section=i.section,u}return t}(Zb),vce=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,s,i,o){for(var c=0,u=r;c<u.length;c++){var d=u[c],h=new yce(t,this,n,s,i,o),p=d(h)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var i=s[n];i(new Zb(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var i=s[n];i(new Zb(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),WR=function(){function e(t,r,n,s,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof MR&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,s){var i;return Math.max(n,((i=r.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(s,i){var o=n.cells[i.index];if(!o)return 0;var c=r.getLineHeight(o.styles.fontSize),u=o.padding("vertical"),d=u+c;return d>s?d:s},0)},e}(),qR=function(){function e(t,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(s=t.content)!==null&&s!==void 0?s:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",c=/\r\n|\r|\n/g;this.text=o.split(c)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/t*r,i=n*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Tx(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),bce=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,s=t.allRows();n<s.length;n++){var i=s[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function wce(e,t){Nce(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var s=t.getWidth(e.pageSize().width)-n;s&&(s=Jb(r,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=Jb(r,s,function(i){return i.minWidth})),s=Math.abs(s),!t.settings.horizontalPageBreak&&s>.1/e.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),Ace(t),Cce(t,e),jce(t)}function Nce(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,s=UR(e,t);t.allRows().forEach(function(i){for(var o=0,c=t.columns;o<c.length;o++){var u=c[o],d=i.cells[u.index];if(d){var h=t.hooks.didParseCell;t.callCellHooks(e,h,d,i,u,null);var p=d.padding("horizontal");d.contentWidth=e1(d.text,d.styles,e)+p;var v=e1(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=v+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var x=10/r;d.minWidth=d.styles.minCellWidth||x,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,c=t.columns;o<c.length;o++){var u=c[o],d=i.cells[u.index];if(d&&d.colSpan===1)u.wrappedWidth=Math.max(u.wrappedWidth,d.wrappedWidth),u.minWidth=Math.max(u.minWidth,d.minWidth),u.minReadableWidth=Math.max(u.minReadableWidth,d.minReadableWidth);else{var h=t.styles.columnStyles[u.dataKey]||t.styles.columnStyles[u.index]||{},p=h.cellWidth||h.minCellWidth;p&&typeof p=="number"&&(u.minWidth=p,u.wrappedWidth=p)}d&&(d.colSpan>1&&!u.minWidth&&(u.minWidth=d.minWidth),d.colSpan>1&&!u.wrappedWidth&&(u.wrappedWidth=d.minWidth))}})}function Jb(e,t,r){for(var n=t,s=e.reduce(function(x,w){return x+w.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],c=o.wrappedWidth/s,u=n*c,d=o.width+u,h=r(o),p=d<h?h:d;t-=p-o.width,o.width=p}if(t=Math.round(t*1e10)/1e10,t){var v=e.filter(function(x){return t<0?x.width>r(x):!0});v.length&&(t=Jb(v,t,r))}return t}function jce(e){for(var t={},r=1,n=e.allRows(),s=0;s<n.length;s++)for(var i=n[s],o=0,c=e.columns;o<c.length;o++){var u=c[o],d=t[u.index];if(r>1)r--,delete i.cells[u.index];else if(d)d.cell.height+=i.height,r=d.cell.colSpan,delete i.cells[u.index],d.left--,d.left<=1&&delete t[u.index];else{var h=i.cells[u.index];if(!h)continue;if(h.height=i.height,h.rowSpan>1){var p=n.length-s,v=h.rowSpan>p?p:h.rowSpan;t[u.index]={cell:h,left:v,row:i}}}}}function Ace(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],s=null,i=0,o=0,c=0;c<e.columns.length;c++){var u=e.columns[c];if(o-=1,o>1&&e.columns[c+1])i+=u.width,delete n.cells[u.index];else if(s){var d=s;delete n.cells[u.index],s=null,d.width=u.width+i}else{var d=n.cells[u.index];if(!d)continue;if(o=d.colSpan,i=0,d.colSpan>1){s=d,i+=u.width;continue}d.width=u.width+i}}}function Cce(e,t){for(var r={count:0,height:0},n=0,s=e.allRows();n<s.length;n++){for(var i=s[n],o=0,c=e.columns;o<c.length;o++){var u=c[o],d=i.cells[u.index];if(d){t.applyStyles(d.styles,!0);var h=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,h+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=QS(d.text,h,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=QS(d.text,h,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var p=d.styles.overflow(d.text,h);typeof p=="string"?d.text=[p]:d.text=p}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var v=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<v*d.rowSpan?r={height:v,count:d.rowSpan}:r&&r.count>0&&r.height>v&&(v=r.height),v>i.height&&(i.height=v)}}r.count--}}function QS(e,t,r,n,s){return e.map(function(i){return Sce(i,t,r,n,s)})}function Sce(e,t,r,n,s){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=e1(e,r,n))return e;for(;t<e1(e+s,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}function Ece(e,t){var r=new Hd(e),n=kce(t,r.scaleFactor()),s=new vce(t,n);return wce(r,s),r.applyStyles(r.userStyles),s}function kce(e,t){var r=e.content,n=Ice(r.columns);if(r.head.length===0){var s=eE(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=eE(n,"foot");s&&r.foot.push(s)}var i=e.settings.theme,o=e.styles;return{columns:n,head:Sy("head",r.head,n,o,i,t),body:Sy("body",r.body,n,o,i,t),foot:Sy("foot",r.foot,n,o,i,t)}}function Sy(e,t,r,n,s,i){var o={},c=t.map(function(u,d){for(var h=0,p={},v=0,x=0,w=0,j=r;w<j.length;w++){var N=j[w];if(o[N.index]==null||o[N.index].left===0)if(x===0){var A=void 0;Array.isArray(u)?A=u[N.index-v-h]:A=u[N.dataKey];var k={};typeof A=="object"&&!Array.isArray(A)&&(k=(A==null?void 0:A.styles)||{});var E=Tce(e,N,d,s,n,i,k),_=new qR(A,E,e);p[N.dataKey]=_,p[N.index]=_,x=_.colSpan-1,o[N.index]={left:_.rowSpan-1,times:x}}else x--,v++;else o[N.index].left--,x=o[N.index].times,h++}return new WR(u,d,e,p)});return c}function eE(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var s=Pce(t,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function Pce(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Ice(e){return e.map(function(t,r){var n,s;return typeof t=="object"?s=(n=t.dataKey)!==null&&n!==void 0?n:r:s=r,new bce(s,t,r)})}function Tce(e,t,r,n,s,i,o){var c=ace(n),u;e==="head"?u=s.headStyles:e==="body"?u=s.bodyStyles:e==="foot"&&(u=s.footStyles);var d=Sl({},c.table,c[e],s.styles,u),h=s.columnStyles[t.dataKey]||s.columnStyles[t.index]||{},p=e==="body"?h:{},v=e==="body"&&r%2===0?Sl({},c.alternateRow,s.alternateRowStyles):{},x=nce(i),w=Sl({},x,d,v,p);return Sl(w,o)}function _ce(e,t,r){var n;r===void 0&&(r={});var s=UR(e,t),i=new Map,o=[],c=[],u=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?u=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(u=[t.settings.horizontalPageBreakRepeat]),u.forEach(function(v){var x=t.columns.find(function(w){return w.dataKey===v||w.index===v});x&&!i.has(x.index)&&(i.set(x.index,!0),o.push(x.index),c.push(t.columns[x.index]),s-=x.wrappedWidth)});for(var d=!0,h=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;h<t.columns.length;){if(i.has(h)){h++;continue}var p=t.columns[h].wrappedWidth;if(d||s>=p)d=!1,o.push(h),c.push(t.columns[h]),s-=p;else break;h++}return{colIndexes:o,columns:c,lastIndex:h-1}}function Oce(e,t){for(var r=[],n=0;n<t.columns.length;n++){var s=_ce(e,t,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function Rce(e,t){var r=t.settings,n=r.startY,s=r.margin,i={x:s.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),c=n+s.bottom+o;if(r.pageBreak==="avoid"){var u=t.body,d=u.reduce(function(v,x){return v+x.height},0);c+=d}var h=new Hd(e);(r.pageBreak==="always"||r.startY!=null&&c>h.pageSize().height)&&(VR(h),i.y=s.top),t.callWillDrawPageHooks(h,i);var p=Sl({},i);t.startPageNumber=h.pageNumber(),r.horizontalPageBreak?Dce(h,t,p,i):(h.applyStyles(h.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(v){return Ul(h,t,v,i,t.columns)}),h.applyStyles(h.userStyles),t.body.forEach(function(v,x){var w=x===t.body.length-1;t1(h,t,v,w,p,i,t.columns)}),h.applyStyles(h.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(v){return Ul(h,t,v,i,t.columns)})),BR(h,t,p,i),t.callEndPageHooks(h,i),t.finalY=i.y,e.lastAutoTable=t,h.applyStyles(h.userStyles)}function Dce(e,t,r,n){var s=Oce(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(d,h){e.applyStyles(e.userStyles),h>0?_h(e,t,r,n,d.columns,!0):tE(e,t,n,d.columns),Lce(e,t,r,n,d.columns),Ey(e,t,n,d.columns)});else for(var o=-1,c=s[0],u=function(){var d=o;if(c){e.applyStyles(e.userStyles);var h=c.columns;o>=0?_h(e,t,r,n,h,!0):tE(e,t,n,h),d=rE(e,t,o+1,n,h),Ey(e,t,n,h)}var p=d-o;s.slice(1).forEach(function(v){e.applyStyles(e.userStyles),_h(e,t,r,n,v.columns,!0),rE(e,t,o+1,n,v.columns,p),Ey(e,t,n,v.columns)}),o=d};o<t.body.length-1;)u()}function tE(e,t,r,n){var s=t.settings;e.applyStyles(e.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&t.head.forEach(function(i){return Ul(e,t,i,r,n)})}function Lce(e,t,r,n,s){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var c=o===t.body.length-1;t1(e,t,i,c,r,n,s)})}function rE(e,t,r,n,s,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),c=-1;return t.body.slice(r,o).forEach(function(u,d){var h=r+d===t.body.length-1,p=HR(e,t,h,n);u.canEntireRowFit(p,s)&&(Ul(e,t,u,n,s),c=r+d)}),c}function Ey(e,t,r,n){var s=t.settings;e.applyStyles(e.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&t.foot.forEach(function(i){return Ul(e,t,i,r,n)})}function Mce(e,t,r){var n=r.getLineHeight(e.styles.fontSize),s=e.padding("vertical"),i=Math.floor((t-s)/n);return Math.max(0,i)}function Bce(e,t,r,n){var s={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,c=r.columns;o<c.length;o++){var u=c[o],d=e.cells[u.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var h=new qR(d.raw,d.styles,d.section);h=Sl(h,d),h.text=[];var p=Mce(d,t,n);d.text.length>p&&(h.text=d.text.splice(p,d.text.length));var v=n.scaleFactor(),x=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(v,x),d.contentHeight>=t&&(d.contentHeight=t,h.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),h.contentHeight=h.getContentHeight(v,x),h.contentHeight>i&&(i=h.contentHeight),s[u.index]=h}}var w=new WR(e.raw,-1,e.section,s,!0);w.height=i;for(var j=0,N=r.columns;j<N.length;j++){var u=N[j],h=w.cells[u.index];h&&(h.height=w.height);var d=e.cells[u.index];d&&(d.height=e.height)}return w}function Fce(e,t,r,n){var s=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,c=s-o;t.section==="body"&&(c-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var u=t.getMinimumRowHeight(n.columns,e),d=u<r;if(u>c)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var h=t.hasRowSpan(n.columns),p=t.getMaxCellHeight(n.columns)>c;return p?(h&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(h||n.settings.rowPageBreak==="avoid")}function t1(e,t,r,n,s,i,o){var c=HR(e,t,n,i);if(r.canEntireRowFit(c,o))Ul(e,t,r,i,o);else if(Fce(e,r,c,t)){var u=Bce(r,c,t,e);Ul(e,t,r,i,o),_h(e,t,s,i,o),t1(e,t,u,n,s,i,o)}else _h(e,t,s,i,o),t1(e,t,r,n,s,i,o)}function Ul(e,t,r,n,s){n.x=t.settings.margin.left;for(var i=0,o=s;i<o.length;i++){var c=o[i],u=r.cells[c.index];if(!u){n.x+=c.width;continue}e.applyStyles(u.styles),u.x=n.x,u.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,u,r,c,n);if(d===!1){n.x+=c.width;continue}Uce(e,u,n);var h=u.getTextPos();DR(u.text,h.x,h.y,{halign:u.styles.halign,valign:u.styles.valign,maxWidth:Math.ceil(u.width-u.padding("left")-u.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,u,r,c,n),n.x+=c.width}n.y+=r.height}function Uce(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=FR(n.lineWidth,n.fillColor);s&&e.rect(t.x,r.y,t.width,t.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),zce(e,t,r,n.lineWidth))}function zce(e,t,r,n){var s,i,o,c;n.top&&(s=r.x,i=r.y,o=r.x+t.width,c=r.y,n.right&&(o+=.5*n.right),n.left&&(s-=.5*n.left),u(n.top,s,i,o,c)),n.bottom&&(s=r.x,i=r.y+t.height,o=r.x+t.width,c=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(s-=.5*n.left),u(n.bottom,s,i,o,c)),n.left&&(s=r.x,i=r.y,o=r.x,c=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(c+=.5*n.bottom),u(n.left,s,i,o,c)),n.right&&(s=r.x+t.width,i=r.y,o=r.x+t.width,c=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(c+=.5*n.bottom),u(n.right,s,i,o,c));function u(d,h,p,v,x){e.getDocument().setLineWidth(d),e.getDocument().line(h,p,v,x,"S")}}function HR(e,t,r,n){var s=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(s+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-s}function _h(e,t,r,n,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(c){return Ul(e,t,c,n,s)}),t.callEndPageHooks(e,n);var o=t.settings.margin;BR(e,t,r,n),VR(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(c){return Ul(e,t,c,n,s)}),e.applyStyles(e.userStyles))}function VR(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function $ce(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],s=dce(this,n),i=Ece(this,s);return Rce(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,s){DR(t,r,n,s,this)},e.API.autoTableSetDefaults=function(t){return Hd.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Hd.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Hd(this),i=$R(s,t,window,r,!1),o=i.head,c=i.body,u=((n=o[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:u,rows:c,data:c}}}var ky;try{if(typeof window<"u"&&window){var nE=window,aE=nE.jsPDF||((ky=nE.jspdf)===null||ky===void 0?void 0:ky.jsPDF);aE&&$ce(aE)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Wce=(e,t)=>{const r=new Tt,n=t.primaryColor||"#2563eb",s=r.internal.pageSize.getWidth(),i=r.internal.pageSize.getHeight();let o=20;const u=(w=>{const j=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(w);return j?{r:parseInt(j[1],16),g:parseInt(j[2],16),b:parseInt(j[3],16)}:{r:37,g:99,b:235}})(n);r.setFillColor(u.r,u.g,u.b),r.rect(0,0,s,40,"F"),t.logoUrl,r.setTextColor(255,255,255),r.setFontSize(28),r.setFont("helvetica","bold"),r.text("INVOICE",s-15,25,{align:"right"}),r.setFontSize(12),r.setFont("helvetica","normal"),r.text(e.invoiceNumber,s-15,33,{align:"right"}),r.setTextColor(0,0,0),o=50,r.setFontSize(10),r.setFont("helvetica","bold"),r.text("FROM:",15,o),r.setFont("helvetica","normal"),o+=6,r.text(t.companyName||"Company Name",15,o),o+=5,t.address&&(r.setFontSize(9),r.text(t.address,15,o),o+=5),t.phone&&(r.text(`Tel: ${t.phone}`,15,o),o+=5),t.email&&r.text(`Email: ${t.email}`,15,o),o=50,r.setFontSize(10),r.setFont("helvetica","bold"),r.text("BILL TO:",s-80,o),r.setFont("helvetica","normal"),o+=6,r.text(e.clientName,s-80,o),o+=5,r.setFontSize(9),r.text(`Tel: ${e.clientPhone}`,s-80,o),o+=5,e.clientEmail&&(r.text(`Email: ${e.clientEmail}`,s-80,o),o+=5),e.shipment&&r.text(`Shipment: ${e.shipment.referenceId}`,s-80,o),o=90,r.setFillColor(240,240,240),r.rect(15,o,s-30,20,"F"),r.setFontSize(9),r.setFont("helvetica","bold"),r.text("Invoice Date:",20,o+8),r.text("Due Date:",70,o+8),r.text("Status:",120,o+8),r.setFont("helvetica","normal"),r.text(new Date(e.invoiceDate).toLocaleDateString(),20,o+15),r.text(new Date(e.dueDate).toLocaleDateString(),70,o+15);const d=e.status==="PAID"?[34,197,94]:e.status==="PARTIAL"?[59,130,246]:e.status==="OVERDUE"?[239,68,68]:[234,179,8];r.setFillColor(d[0],d[1],d[2]),r.setTextColor(255,255,255),r.roundedRect(120,o+10,25,6,2,2,"F"),r.text(e.status,132.5,o+14,{align:"center"}),r.setTextColor(0,0,0),o=120;const h=e.lineItems.map(w=>[w.description+(w.notes?`
${w.notes}`:""),w.quantity.toString(),`${parseFloat(w.unitPrice).toFixed(3)} KWD`,`${parseFloat(w.taxAmount||"0").toFixed(3)} KWD`,`${parseFloat(w.amount).toFixed(3)} KWD`]);r.autoTable({startY:o,head:[["Description","Qty","Unit Price","Tax","Amount"]],body:h,theme:"striped",headStyles:{fillColor:[u.r,u.g,u.b],textColor:[255,255,255],fontStyle:"bold",fontSize:10},styles:{fontSize:9,cellPadding:5},columnStyles:{0:{cellWidth:80},1:{halign:"center",cellWidth:20},2:{halign:"right",cellWidth:30},3:{halign:"right",cellWidth:25},4:{halign:"right",cellWidth:30}}}),o=r.lastAutoTable.finalY+10;const p=s-70;r.setFontSize(10),r.text("Subtotal:",p,o,{align:"right"}),r.text(`${parseFloat(e.subtotal).toFixed(3)} KWD`,s-15,o,{align:"right"}),o+=7,r.text("Tax:",p,o,{align:"right"}),r.text(`${parseFloat(e.taxAmount||"0").toFixed(3)} KWD`,s-15,o,{align:"right"}),o+=10,r.setDrawColor(u.r,u.g,u.b),r.setLineWidth(.5),r.line(p-10,o-3,s-15,o-3),r.setFont("helvetica","bold"),r.setFontSize(12),r.text("Total:",p,o,{align:"right"}),r.text(`${parseFloat(e.totalAmount).toFixed(3)} KWD`,s-15,o,{align:"right"});const v=parseFloat(e.totalAmount)-parseFloat(e.paidAmount||"0");if(o+=7,r.setFontSize(10),r.setFont("helvetica","normal"),r.text("Paid:",p,o,{align:"right"}),r.setTextColor(34,197,94),r.text(`${parseFloat(e.paidAmount||"0").toFixed(3)} KWD`,s-15,o,{align:"right"}),o+=7,r.setTextColor(0,0,0),r.text("Balance Due:",p,o,{align:"right"}),r.setTextColor(v>0?239:34,v>0?68:197,v>0?68:94),r.text(`${v.toFixed(3)} KWD`,s-15,o,{align:"right"}),r.setTextColor(0,0,0),e.payments&&e.payments.length>0){o+=15,r.setFont("helvetica","bold"),r.setFontSize(11),r.text("Payment History",15,o),o+=5;const w=e.payments.map(j=>[new Date(j.paymentDate).toLocaleDateString(),j.paymentMethod,j.transactionReference||"N/A",`${parseFloat(j.amount).toFixed(3)} KWD`]);r.autoTable({startY:o,head:[["Date","Method","Reference","Amount"]],body:w,theme:"plain",headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold",fontSize:9},styles:{fontSize:9,cellPadding:4}}),o=r.lastAutoTable.finalY+10}t.bankDetails&&o<i-60&&(o+=10,r.setFillColor(240,248,255),r.rect(15,o,s-30,30,"F"),o+=7,r.setFontSize(10),r.setFont("helvetica","bold"),r.text("Bank Details",20,o),o+=6,r.setFont("helvetica","normal"),r.setFontSize(8),t.bankDetails.split(`
`).forEach(j=>{r.text(j,20,o),o+=4})),t.termsAndConditions&&o<i-40&&(o+=10,r.setFontSize(9),r.setFont("helvetica","bold"),r.text("Terms & Conditions",15,o),o+=5,r.setFont("helvetica","normal"),r.setFontSize(7),t.termsAndConditions.split(`
`).slice(0,3).forEach(j=>{r.text(j,15,o),o+=4})),r.setFontSize(8),r.setTextColor(128,128,128),r.text("Thank you for your business!",s/2,i-15,{align:"center"}),r.text(`Generated on ${new Date().toLocaleDateString()}`,s/2,i-10,{align:"center"});const x=`Invoice-${e.invoiceNumber}-${new Date().toISOString().split("T")[0]}.pdf`;r.save(x)},qce=()=>{var O,B;const{id:e}=aB(),t=N0(),[r,n]=P.useState(null),[s,i]=P.useState(null),[o,c]=P.useState(null),[u,d]=P.useState(!0),[h,p]=P.useState(!1),[v,x]=P.useState(!1);P.useEffect(()=>{w()},[e]);const w=async()=>{try{d(!0);const[F,U,L]=await Promise.all([Uo.getInvoice(e),Uo.getSettings(),fetch("/api/template-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then(K=>K.json()).catch(()=>({settings:null}))]);n(F.invoice||F),i(U.settings||U),c(L.settings)}catch(F){console.error("Load invoice error:",F)}finally{d(!1)}},j=F=>{const U={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",PAID:"bg-green-100 text-green-800 border-green-300",PARTIAL:"bg-blue-100 text-blue-800 border-blue-300",OVERDUE:"bg-red-100 text-red-800 border-red-300",CANCELLED:"bg-gray-100 text-gray-800 border-gray-300"},L={PENDING:a.jsx(yu,{className:"h-5 w-5"}),PAID:a.jsx(Sa,{className:"h-5 w-5"}),PARTIAL:a.jsx(Lo,{className:"h-5 w-5"}),OVERDUE:a.jsx(yu,{className:"h-5 w-5"}),CANCELLED:a.jsx(yu,{className:"h-5 w-5"})};return a.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold border ${U[F]||U.PENDING}`,children:[L[F],F]})},N=()=>{window.print()},A=async()=>{if(!(!r||!s))try{x(!0),await new Promise(F=>setTimeout(F,500)),Wce(r,s)}catch(F){console.error("PDF generation error:",F),alert("Failed to generate PDF. Please try again.")}finally{x(!1)}},k=()=>{const F=(o==null?void 0:o.qrCodePosition)||"TOP_RIGHT",U={TOP_RIGHT:"top-4 right-4",TOP_LEFT:"top-4 left-4",BOTTOM_RIGHT:"bottom-4 right-4",BOTTOM_LEFT:"bottom-4 left-4"};return U[F]||U.TOP_RIGHT};if(u)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!r)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("p",{className:"text-gray-600",children:"Invoice not found"})});const E=parseFloat(r.totalAmount)-parseFloat(r.paidAmount||0),_=parseFloat(r.paidAmount||0)/parseFloat(r.totalAmount)*100;return a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsx("div",{className:"max-w-5xl mx-auto mb-6 print:hidden",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>t("/invoices"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[a.jsx(LB,{className:"h-5 w-5"}),"Back to Invoices"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[E>0&&a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[a.jsx(Lo,{className:"h-5 w-5"}),"Record Payment"]}),a.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[a.jsx(_u,{className:"h-5 w-5"}),"Print"]}),a.jsx("button",{onClick:A,disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-700"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(RB,{className:"h-5 w-5"}),"Download PDF"]})}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[a.jsx(b1,{className:"h-5 w-5"}),"Send Email"]})]})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden relative",children:[(o==null?void 0:o.showQRCode)&&r&&a.jsx("div",{className:`absolute ${k()} z-10 bg-white p-2 rounded-lg shadow-md print:block`,children:a.jsx(f3,{value:`INV-${r.invoiceNumber||r.id}`,size:(o==null?void 0:o.qrCodeSize)||100,level:"M",includeMargin:!0})}),a.jsxs("div",{className:"p-8 border-b-4",style:{borderColor:(o==null?void 0:o.invoicePrimaryColor)||(s==null?void 0:s.primaryColor)||"#2563eb",backgroundColor:`${(o==null?void 0:o.invoicePrimaryColor)||(s==null?void 0:s.primaryColor)||"#2563eb"}08`},children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[(o==null?void 0:o.invoiceShowLogo)!==!1&&((o==null?void 0:o.companyLogo)||(s==null?void 0:s.logoUrl))&&a.jsx("img",{src:(o==null?void 0:o.companyLogo)||s.logoUrl,alt:"Company Logo",className:"h-16 mb-4"}),a.jsx("h1",{className:"text-3xl font-bold",style:{color:(o==null?void 0:o.invoicePrimaryColor)||(s==null?void 0:s.primaryColor)||"#2563eb"},children:(o==null?void 0:o.invoiceTitle)||"INVOICE"}),a.jsx("p",{className:"text-gray-600 mt-1",children:r.invoiceNumber}),(o==null?void 0:o.companyName)&&a.jsx("p",{className:"text-gray-700 font-semibold mt-2",children:o.companyName}),(o==null?void 0:o.invoiceShowAddress)!==!1&&(o==null?void 0:o.companyAddress)&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.companyAddress}),(o==null?void 0:o.invoiceShowPhone)!==!1&&(o==null?void 0:o.companyPhone)&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",o.companyPhone]}),(o==null?void 0:o.invoiceShowEmail)!==!1&&(o==null?void 0:o.companyEmail)&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Email: ",o.companyEmail]})]}),a.jsx("div",{children:j(r.status)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-8 mt-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Invoice Date"}),a.jsx("p",{className:"text-gray-900 font-semibold",children:new Date(r.invoiceDate).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Due Date"}),a.jsx("p",{className:"text-gray-900 font-semibold",children:new Date(r.dueDate).toLocaleDateString()})]})]})]}),a.jsxs("div",{className:"p-8 grid grid-cols-2 gap-8 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"From"}),a.jsx("p",{className:"text-gray-900 font-semibold",children:(s==null?void 0:s.companyName)||"Company Name"}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:(s==null?void 0:s.address)||""}),a.jsx("p",{className:"text-gray-600 text-sm",children:(s==null?void 0:s.phone)||""}),a.jsx("p",{className:"text-gray-600 text-sm",children:(s==null?void 0:s.email)||""})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Bill To"}),a.jsx("p",{className:"text-gray-900 font-semibold",children:r.clientName}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:r.clientPhone}),r.clientEmail&&a.jsx("p",{className:"text-gray-600 text-sm",children:r.clientEmail}),r.shipment&&a.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Shipment Reference"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.shipment.referenceId}),r.shipment.rackLocations&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Rack Locations"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.shipment.rackLocations})]})]})]})]}),r.shipment&&a.jsxs("div",{className:"p-8 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",style:{color:(o==null?void 0:o.invoicePrimaryColor)||(s==null?void 0:s.primaryColor)||"#2563eb"},children:[a.jsx("span",{children:"📦"})," Shipment Details & Box Distribution"]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Shipment ID"}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.shipment.qrCode||r.shipment.id})]}),a.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Total Boxes"}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.shipment.originalBoxCount||((O=r.shipment.boxes)==null?void 0:O.length)||0})]}),a.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Arrival Date"}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.shipment.arrivalDate?new Date(r.shipment.arrivalDate).toLocaleDateString():r.shipment.receivedDate?new Date(r.shipment.receivedDate).toLocaleDateString():"N/A"})]}),a.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Days Stored"}),a.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:[r.shipment.arrivalDate||r.shipment.receivedDate?Math.ceil((new Date().getTime()-new Date(r.shipment.arrivalDate||r.shipment.receivedDate).getTime())/(1e3*3600*24)):0," days"]})]})]}),r.shipment.boxes&&r.shipment.boxes.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"📍 Box Distribution by Rack Location:"}),(()=>{const F={};return r.shipment.boxes.forEach(U=>{if(U.rackId&&U.rack){const L=U.rack.code;F[L]||(F[L]=[]),F[L].push(U)}else F.Unassigned||(F.Unassigned=[]),F.Unassigned.push(U)}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(F).map(([U,L])=>{var q;const K=U==="Unassigned",z=(q=L[0])==null?void 0:q.rack;return a.jsxs("div",{className:`border-2 rounded-lg p-3 bg-white ${K?"border-yellow-300":"border-green-300"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[K?"⏳":"🗄️"," ",K?"Unassigned":`Rack ${U}`]}),a.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${K?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[L.length," box",L.length!==1?"es":""]})]})}),!K&&(z==null?void 0:z.location)&&a.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["📍 ",z.location]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:L.map(Q=>a.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 border border-gray-300 rounded text-xs font-mono font-semibold text-gray-700",title:`Box #${Q.boxNumber} - ${Q.status}`,children:["#",Q.boxNumber]},Q.id))})]},U)})})})(),a.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Total Racks"}),a.jsx("p",{className:"text-base font-bold text-gray-800",children:Object.keys(r.shipment.boxes.reduce((F,U)=>(U.rackId&&(F[U.rackId]=!0),F),{})).length})]}),a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Assigned"}),a.jsx("p",{className:"text-base font-bold text-green-600",children:r.shipment.boxes.filter(F=>F.rackId).length})]}),a.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Unassigned"}),a.jsx("p",{className:"text-base font-bold text-yellow-600",children:r.shipment.boxes.filter(F=>!F.rackId).length})]})]})]})]}),a.jsxs("div",{className:"p-8 border-b",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-gray-200",children:[a.jsx("th",{className:"text-left py-3 text-sm font-semibold text-gray-700",children:"Description"}),a.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Qty"}),a.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Unit Price"}),a.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Tax"}),a.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Amount"})]})}),a.jsx("tbody",{children:(B=r.lineItems)==null?void 0:B.map((F,U)=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsxs("td",{className:"py-4 text-gray-900",children:[a.jsx("div",{className:"font-medium",children:F.description}),F.notes&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:F.notes})]}),a.jsx("td",{className:"py-4 text-right text-gray-900",children:F.quantity}),a.jsx("td",{className:"py-4 text-right text-gray-900",children:parseFloat(F.unitPrice).toFixed(3)}),a.jsx("td",{className:"py-4 text-right text-gray-900",children:parseFloat(F.taxAmount||0).toFixed(3)}),a.jsx("td",{className:"py-4 text-right text-gray-900 font-semibold",children:parseFloat(F.amount).toFixed(3)})]},U))})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsxs("div",{className:"w-80",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal"}),a.jsxs("span",{className:"text-gray-900 font-semibold",children:[parseFloat(r.subtotal).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Tax"}),a.jsxs("span",{className:"text-gray-900 font-semibold",children:[parseFloat(r.taxAmount||0).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),a.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-300",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),a.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[parseFloat(r.totalAmount).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]})]})})]}),a.jsxs("div",{className:"p-8 bg-gray-50 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Status"}),a.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[parseFloat(r.totalAmount).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Paid Amount"}),a.jsxs("p",{className:"text-xl font-bold text-green-600",children:[parseFloat(r.paidAmount||0).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Balance Due"}),a.jsxs("p",{className:"text-xl font-bold text-red-600",children:[E.toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${_}%`}})}),a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[_.toFixed(1),"% Paid"]})]}),r.payments&&r.payments.length>0&&a.jsxs("div",{className:"p-8 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment History"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Method"}),a.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Reference"}),a.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700",children:"Amount"})]})}),a.jsx("tbody",{children:r.payments.map(F=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-3 text-gray-900",children:new Date(F.paymentDate).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 text-gray-900",children:F.paymentMethod}),a.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:F.transactionReference||"N/A"}),a.jsxs("td",{className:"px-4 py-3 text-right text-green-600 font-semibold",children:[parseFloat(F.amount).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]},F.id))})]})})]}),(s==null?void 0:s.bankDetails)&&a.jsxs("div",{className:"p-8 border-b bg-blue-50",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bank Details"}),a.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:s.bankDetails})]}),((o==null?void 0:o.invoiceTerms)||(s==null?void 0:s.termsAndConditions))&&a.jsxs("div",{className:"p-8 bg-gray-50",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:(o==null?void 0:o.invoicePrimaryColor)||(s==null?void 0:s.primaryColor)||"#2563eb"},children:"Terms & Conditions"}),a.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-line",children:(o==null?void 0:o.invoiceTerms)||s.termsAndConditions})]}),(o==null?void 0:o.invoiceShowFooter)!==!1&&a.jsxs("div",{className:"p-8 text-center border-t",children:[a.jsx("p",{className:"text-sm text-gray-700 font-semibold mb-2",children:(o==null?void 0:o.invoiceFooterText)||"Thank you for your business!"}),(o==null?void 0:o.companyWebsite)&&a.jsx("p",{className:"text-xs text-gray-500",children:o.companyWebsite})]})]}),a.jsx(fie,{isOpen:h,onClose:()=>p(!1),invoice:r,onSuccess:w})]})},Hce=({isOpen:e,onClose:t,onSuccess:r})=>{const[n,s]=P.useState({title:"",category:"MAINTENANCE",amount:"",currency:"KWD",description:"",expenseDate:new Date().toISOString().split("T")[0]}),[i,o]=P.useState([]),[c,u]=P.useState({}),[d,h]=P.useState(!1),[p,v]=P.useState("");P.useEffect(()=>{e&&x()},[e]);const x=async()=>{try{const N=await fetch("/api/custom-fields?section=EXPENSE",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(N.ok){const A=await N.json(),k=A.customFields||A,E=Array.isArray(k)?k.filter(O=>O.isActive):[];o(E);const _={};E.forEach(O=>{_[O.id]=""}),u(_)}}catch(N){console.error("Failed to load custom fields:",N)}},w=async N=>{var A;if(N.preventDefault(),v(""),!n.title.trim()){v("Title is required");return}if(!n.amount||parseFloat(n.amount)<=0){v("Valid amount is required");return}try{h(!0);const k=await Ed.create({...n,amount:parseFloat(n.amount)}),E=((A=k.expense)==null?void 0:A.id)||k.id;if(i.length>0){const _=Object.entries(c).filter(([O,B])=>B!=="").map(([O,B])=>({customFieldId:O,fieldValue:B}));if(_.length>0)try{await fetch(`/api/custom-field-values/EXPENSE/${E}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:_})})}catch(O){console.error("Failed to save custom field values:",O)}}r(),j()}catch(k){v(k.message||"Failed to create expense")}finally{h(!1)}},j=()=>{s({title:"",category:"MAINTENANCE",amount:"",currency:"KWD",description:"",expenseDate:new Date().toISOString().split("T")[0]}),v(""),t()};return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:j}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:"Add New Expense"}),a.jsx("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors",children:a.jsx($c,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:w,className:"px-6 py-4",children:[p&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.title,onChange:N=>s({...n,title:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Warehouse Rent - October",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:n.category,onChange:N=>s({...n,category:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"FUEL",children:"Fuel"}),a.jsx("option",{value:"MATERIALS",children:"Materials"}),a.jsx("option",{value:"SALARIES",children:"Salaries"}),a.jsx("option",{value:"RENT",children:"Rent"}),a.jsx("option",{value:"UTILITIES",children:"Utilities"}),a.jsx("option",{value:"OTHER",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",step:"0.01",min:"0",value:n.amount,onChange:N=>s({...n,amount:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"0.00",required:!0}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"KWD"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Expense Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:n.expenseDate,onChange:N=>s({...n,expenseDate:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:n.description,onChange:N=>s({...n,description:N.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional details about this expense..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Receipt / Attachment"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx("div",{className:"text-gray-400 mb-2",children:a.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),a.jsx("p",{className:"text-sm text-gray-500",children:"Photo upload coming soon"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, JPG, PNG up to 10MB"})]})]})]}),i.length>0&&a.jsxs("div",{className:"mt-4 border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(N=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[N.fieldName,N.isRequired&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),N.fieldType==="TEXT"&&a.jsx("input",{type:"text",value:c[N.id]||"",onChange:A=>u(k=>({...k,[N.id]:A.target.value})),required:N.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${N.fieldName.toLowerCase()}`}),N.fieldType==="NUMBER"&&a.jsx("input",{type:"number",value:c[N.id]||"",onChange:A=>u(k=>({...k,[N.id]:A.target.value})),required:N.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${N.fieldName.toLowerCase()}`}),N.fieldType==="DATE"&&a.jsx("input",{type:"date",value:c[N.id]||"",onChange:A=>u(k=>({...k,[N.id]:A.target.value})),required:N.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),N.fieldType==="DROPDOWN"&&N.fieldOptions&&a.jsxs("select",{value:c[N.id]||"",onChange:A=>u(k=>({...k,[N.id]:A.target.value})),required:N.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const A=JSON.parse(N.fieldOptions);return Array.isArray(A)?A.map(k=>a.jsx("option",{value:k,children:k},k)):[]}catch{return N.fieldOptions.split(",").map(A=>a.jsx("option",{value:A.trim(),children:A.trim()},A.trim()))}})()]}),N.fieldType==="CHECKBOX"&&a.jsxs("div",{className:"flex items-center h-10",children:[a.jsx("input",{type:"checkbox",checked:c[N.id]==="true",onChange:A=>u(k=>({...k,[N.id]:A.target.checked?"true":"false"})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},N.id))})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:d,children:d?"Creating...":"Create Expense"})]})]})]})]})}):null},Vce=({isOpen:e,onClose:t,onSuccess:r,expense:n})=>{const[s,i]=P.useState({title:"",category:"MAINTENANCE",amount:"",currency:"KWD",description:"",expenseDate:"",status:"PENDING"}),[o,c]=P.useState([]),[u,d]=P.useState({}),[h,p]=P.useState(!1),[v,x]=P.useState("");P.useEffect(()=>{var A;n&&(i({title:n.title||"",category:n.category||"MAINTENANCE",amount:((A=n.amount)==null?void 0:A.toString())||"",currency:n.currency||"KWD",description:n.description||"",expenseDate:n.expenseDate?new Date(n.expenseDate).toISOString().split("T")[0]:"",status:n.status||"PENDING"}),w())},[n]);const w=async()=>{if(n!=null&&n.id)try{const A=await fetch("/api/custom-fields?section=EXPENSE",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(A.ok){const k=await A.json(),E=k.customFields||k,_=Array.isArray(E)?E.filter(B=>B.isActive):[];c(_);const O=await fetch(`/api/custom-field-values/EXPENSE/${n.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(O.ok){const B=await O.json(),F=B.customFieldValues||B,U={};Array.isArray(F)&&F.forEach(L=>{U[L.customFieldId]=L.fieldValue}),d(U)}}}catch(A){console.error("Failed to load custom fields:",A)}},j=async A=>{if(A.preventDefault(),x(""),!s.title.trim()){x("Title is required");return}if(!s.amount||parseFloat(s.amount)<=0){x("Valid amount is required");return}try{if(p(!0),await Ed.update(n.id,{...s,amount:parseFloat(s.amount)}),o.length>0){const k=Object.entries(u).filter(([E,_])=>_!=="").map(([E,_])=>({customFieldId:E,fieldValue:_}));if(k.length>0)try{await fetch(`/api/custom-field-values/EXPENSE/${n.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:k})})}catch(E){console.error("Failed to save custom field values:",E)}}r(),N()}catch(k){x(k.message||"Failed to update expense")}finally{p(!1)}},N=()=>{x(""),t()};return!e||!n?null:a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:N}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-semibold text-white",children:"Edit Expense"}),a.jsx("button",{onClick:N,className:"text-white hover:text-gray-200 transition-colors",children:a.jsx($c,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:j,className:"px-6 py-4",children:[v&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:v}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:s.title,onChange:A=>i({...s,title:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Warehouse Rent - October",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:s.category,onChange:A=>i({...s,category:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"FUEL",children:"Fuel"}),a.jsx("option",{value:"MATERIALS",children:"Materials"}),a.jsx("option",{value:"SALARIES",children:"Salaries"}),a.jsx("option",{value:"RENT",children:"Rent"}),a.jsx("option",{value:"UTILITIES",children:"Utilities"}),a.jsx("option",{value:"OTHER",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",step:"0.01",min:"0",value:s.amount,onChange:A=>i({...s,amount:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"0.00",required:!0}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"KWD"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Expense Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:s.expenseDate,onChange:A=>i({...s,expenseDate:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:s.status,onChange:A=>i({...s,status:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"PENDING",children:"Pending"}),a.jsx("option",{value:"APPROVED",children:"Approved"}),a.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:A=>i({...s,description:A.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional details about this expense..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Receipt / Attachment"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx("div",{className:"text-gray-400 mb-2",children:a.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),a.jsx("p",{className:"text-sm text-gray-500",children:"Photo upload coming soon"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, JPG, PNG up to 10MB"})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsxs("p",{className:"text-sm text-blue-700",children:["Created on ",new Date(n.createdAt).toLocaleDateString(),n.approvedBy&&a.jsxs(a.Fragment,{children:[" • Approved by user ",n.approvedBy]})]})})]})})]}),o.length>0&&a.jsxs("div",{className:"mt-4 border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"✨ Custom Fields"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(A=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A.fieldName,A.isRequired&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),A.fieldType==="TEXT"&&a.jsx("input",{type:"text",value:u[A.id]||"",onChange:k=>d(E=>({...E,[A.id]:k.target.value})),required:A.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${A.fieldName.toLowerCase()}`}),A.fieldType==="NUMBER"&&a.jsx("input",{type:"number",value:u[A.id]||"",onChange:k=>d(E=>({...E,[A.id]:k.target.value})),required:A.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${A.fieldName.toLowerCase()}`}),A.fieldType==="DATE"&&a.jsx("input",{type:"date",value:u[A.id]||"",onChange:k=>d(E=>({...E,[A.id]:k.target.value})),required:A.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),A.fieldType==="DROPDOWN"&&A.fieldOptions&&a.jsxs("select",{value:u[A.id]||"",onChange:k=>d(E=>({...E,[A.id]:k.target.value})),required:A.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const k=JSON.parse(A.fieldOptions);return Array.isArray(k)?k.map(E=>a.jsx("option",{value:E,children:E},E)):[]}catch{return A.fieldOptions.split(",").map(k=>a.jsx("option",{value:k.trim(),children:k.trim()},k.trim()))}})()]}),A.fieldType==="CHECKBOX"&&a.jsxs("div",{className:"flex items-center h-10",children:[a.jsx("input",{type:"checkbox",checked:u[A.id]==="true",onChange:k=>d(E=>({...E,[A.id]:k.target.checked?"true":"false"})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},A.id))})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:h,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,children:h?"Updating...":"Update Expense"})]})]})]})]})})},Gce=()=>{const[e,t]=P.useState([]),[r,n]=P.useState(null),[s,i]=P.useState(!0),[o,c]=P.useState(""),[u,d]=P.useState(""),[h,p]=P.useState(""),[v,x]=P.useState(""),[w,j]=P.useState(!1),[N,A]=P.useState(null);P.useEffect(()=>{k()},[h,v,u]);const k=async()=>{try{i(!0);const U={};h&&(U.category=h),v&&(U.status=v),u&&(U.search=u);const L=await Ed.getAll(U);t(L.expenses),n(L.summary)}catch(U){c(U.message)}finally{i(!1)}},E=async U=>{if(window.confirm("Are you sure you want to delete this expense?"))try{await Ed.delete(U),k()}catch(L){alert("Failed to delete expense: "+L.message)}},_=async U=>{try{await Ed.updateStatus(U,"APPROVED"),k()}catch(L){alert("Failed to approve expense: "+L.message)}},O=async U=>{try{await Ed.updateStatus(U,"REJECTED"),k()}catch(L){alert("Failed to reject expense: "+L.message)}},B=U=>{const L={PENDING:{bg:"bg-yellow-100",text:"text-yellow-800",icon:yu},APPROVED:{bg:"bg-green-100",text:"text-green-800",icon:Sa},REJECTED:{bg:"bg-red-100",text:"text-red-800",icon:ho}},K=L[U]||L.PENDING,z=K.icon;return a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K.bg} ${K.text}`,children:[a.jsx(z,{className:"w-4 h-4 mr-1"}),U]})},F=U=>{const L={MAINTENANCE:"bg-blue-100 text-blue-800",FUEL:"bg-green-100 text-green-800",MATERIALS:"bg-purple-100 text-purple-800",SALARIES:"bg-yellow-100 text-yellow-800",RENT:"bg-red-100 text-red-800",UTILITIES:"bg-indigo-100 text-indigo-800",OTHER:"bg-gray-100 text-gray-800"};return L[U]||L.OTHER};return s?a.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading expenses..."})]})}):o?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Error loading expenses: ",o]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Expenses"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage company expenses"})]}),a.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[a.jsx(Tu,{className:"h-5 w-5 mr-2"}),"Add Expense"]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Total Expenses"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:[r.total.toFixed(2)," ",r.currency]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.count," expenses"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Pending"}),a.jsxs("div",{className:"text-2xl font-bold text-yellow-600 mt-1",children:[r.pending.toFixed(2)," ",r.currency]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Awaiting approval"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Approved"}),a.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-1",children:[r.approved.toFixed(2)," ",r.currency]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Verified expenses"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:"This Month"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:[r.total.toFixed(2)," ",r.currency]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current period"})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(w1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search expenses...",value:u,onChange:U=>d(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(t0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsxs("select",{value:h,onChange:U=>p(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"",children:"All Categories"}),a.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),a.jsx("option",{value:"FUEL",children:"Fuel"}),a.jsx("option",{value:"MATERIALS",children:"Materials"}),a.jsx("option",{value:"SALARIES",children:"Salaries"}),a.jsx("option",{value:"RENT",children:"Rent"}),a.jsx("option",{value:"UTILITIES",children:"Utilities"}),a.jsx("option",{value:"OTHER",children:"Other"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(t0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsxs("select",{value:v,onChange:U=>x(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"PENDING",children:"Pending"}),a.jsx("option",{value:"APPROVED",children:"Approved"}),a.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expense"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-lg font-medium",children:"No expenses found"}),a.jsx("p",{className:"text-sm mt-1",children:"Create your first expense to get started"})]})})}):e.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.title}),U.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:U.description})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium ${F(U.category)}`,children:U.category})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[U.amount.toFixed(2)," ",U.currency]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(U.expenseDate).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B(U.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[U.status==="PENDING"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>_(U.id),className:"text-green-600 hover:text-green-900",title:"Approve",children:a.jsx(Sa,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>O(U.id),className:"text-red-600 hover:text-red-900",title:"Reject",children:a.jsx(ho,{className:"h-5 w-5"})})]}),a.jsx("button",{onClick:()=>A(U),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:a.jsx(jf,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>E(U.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:a.jsx(Ou,{className:"h-5 w-5"})})]})})]},U.id))})]})}),a.jsx(Hce,{isOpen:w,onClose:()=>j(!1),onSuccess:()=>{j(!1),k()}}),a.jsx(Vce,{isOpen:!!N,onClose:()=>A(null),onSuccess:()=>{A(null),k()},expense:N})]})},Kce=()=>{const[e,t]=P.useState(null),[r,n]=P.useState(!0),[s,i]=P.useState(!1),[o,c]=P.useState("company"),[u,d]=P.useState(null),[h,p]=P.useState(!1);P.useEffect(()=>{v()},[]);const v=async()=>{try{const E=await(await fetch("/api/template-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();t(E.settings||x())}catch(k){console.error("Failed to load settings:",k),t(x())}finally{n(!1)}},x=()=>({companyName:"QGO Cargo",companyAddress:"Kuwait",companyPhone:"+965 XXXX XXXX",companyEmail:"info@qgocargo.com",companyWebsite:"www.qgocargo.com",invoiceTitle:"TAX INVOICE",releaseNoteTitle:"SHIPMENT RELEASE NOTE",invoicePrimaryColor:"#2563eb",releasePrimaryColor:"#1e40af",currencySymbol:"KD"}),w=async()=>{i(!0);try{await fetch("/api/template-settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)}),alert("Settings saved successfully!")}catch(k){console.error("Failed to save settings:",k),alert("Failed to save settings")}finally{i(!1)}},j=(k,E)=>{t(_=>({..._,[k]:E}))},N=async()=>{if(u){p(!0);try{const k=new FormData;k.append("logo",u);const _=await(await fetch("/api/upload/logo",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:k})).json();_.success&&_.fullUrl?(j("companyLogo",_.fullUrl),d(null),alert("Logo uploaded successfully!")):alert("Failed to upload logo: "+(_.error||"Unknown error"))}catch(k){console.error("Upload error:",k),alert("Failed to upload logo")}finally{p(!1)}}};if(r)return a.jsx("div",{className:"p-8",children:"Loading..."});const A=[{id:"company",name:"Company Info",icon:Iv},{id:"invoice",name:"Invoice Template",icon:_s},{id:"release",name:"Release Note",icon:_s},{id:"colors",name:"Colors & Styling",icon:N1},{id:"advanced",name:"Advanced",icon:Iv}];return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Settings"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Customize invoice and release note templates"})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:A.map(k=>a.jsxs("button",{onClick:()=>c(k.id),className:`
                flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm
                ${o===k.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:[a.jsx(k.icon,{className:"h-5 w-5"}),k.name]},k.id))})}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o==="company"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Company Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo"}),e.companyLogo&&a.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:a.jsx("img",{src:e.companyLogo,alt:"Logo",className:"h-20 w-auto",onError:k=>{k.currentTarget.src="https://via.placeholder.com/150x60?text=Invalid+Image"}})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:k=>{var E;return d(((E=k.target.files)==null?void 0:E[0])||null)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),a.jsx("button",{onClick:N,disabled:!u||h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"inline-block animate-spin mr-2",children:"⏳"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_v,{className:"h-5 w-5 inline mr-2"}),"Upload"]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OR"})})]}),a.jsx("input",{type:"url",value:e.companyLogo||"",onChange:k=>j("companyLogo",k.target.value),placeholder:"Paste logo URL (e.g., https://example.com/logo.png)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Accepted formats: JPG, PNG, GIF, SVG, WebP • Max size: 5MB"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),a.jsx("input",{type:"text",value:e.companyName||"",onChange:k=>j("companyName",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a.jsx("textarea",{value:e.companyAddress||"",onChange:k=>j("companyAddress",k.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"text",value:e.companyPhone||"",onChange:k=>j("companyPhone",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:e.companyEmail||"",onChange:k=>j("companyEmail",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),a.jsx("input",{type:"text",value:e.companyWebsite||"",onChange:k=>j("companyWebsite",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License/Registration No."}),a.jsx("input",{type:"text",value:e.companyLicense||"",onChange:k=>j("companyLicense",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),o==="invoice"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Invoice Template"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Title"}),a.jsx("input",{type:"text",value:e.invoiceTitle||"TAX INVOICE",onChange:k=>j("invoiceTitle",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Style"}),a.jsxs("select",{value:e.invoiceTemplateType||"STANDARD",onChange:k=>j("invoiceTemplateType",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"STANDARD",children:"Standard"}),a.jsx("option",{value:"MODERN",children:"Modern"}),a.jsx("option",{value:"MINIMAL",children:"Minimal"}),a.jsx("option",{value:"CLASSIC",children:"Classic"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Display Elements"}),a.jsx("div",{className:"space-y-2",children:[{key:"invoiceShowLogo",label:"Show Company Logo"},{key:"invoiceShowAddress",label:"Show Address"},{key:"invoiceShowPhone",label:"Show Phone"},{key:"invoiceShowEmail",label:"Show Email"},{key:"invoiceShowWebsite",label:"Show Website"},{key:"invoiceShowLicense",label:"Show License Number"},{key:"invoiceShowFooter",label:"Show Footer"}].map(k=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e[k.key]!==!1,onChange:E=>j(k.key,E.target.checked),className:"rounded border-gray-300 text-primary-600"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:k.label})]},k.key))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Terms & Conditions"}),a.jsx("textarea",{value:e.invoiceTerms||"",onChange:k=>j("invoiceTerms",k.target.value),rows:6,placeholder:"Enter default terms and conditions for invoices...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),a.jsx("input",{type:"text",value:e.invoiceFooterText||"",onChange:k=>j("invoiceFooterText",k.target.value),placeholder:"Thank you for your business!",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),o==="release"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Release Note Template"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Note Title"}),a.jsx("input",{type:"text",value:e.releaseNoteTitle||"SHIPMENT RELEASE NOTE",onChange:k=>j("releaseNoteTitle",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Style"}),a.jsxs("select",{value:e.releaseNoteTemplate||"PROFESSIONAL",onChange:k=>j("releaseNoteTemplate",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"PROFESSIONAL",children:"Professional"}),a.jsx("option",{value:"COMPACT",children:"Compact"}),a.jsx("option",{value:"DETAILED",children:"Detailed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Display Sections"}),a.jsx("div",{className:"space-y-2",children:[{key:"releaseNoteShowLogo",label:"Show Company Logo"},{key:"releaseShowShipment",label:"Show Shipment Details"},{key:"releaseShowStorage",label:"Show Storage Information"},{key:"releaseShowItems",label:"Show Items Released"},{key:"releaseShowCollector",label:"Show Collector Information"},{key:"releaseShowCharges",label:"Show Charges & Payment"},{key:"releaseShowPhotos",label:"Show Release Photos"},{key:"releaseShowTerms",label:"Show Terms & Conditions"},{key:"releaseShowSignatures",label:"Show Signature Spaces"}].map(k=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e[k.key]!==!1,onChange:E=>j(k.key,E.target.checked),className:"rounded border-gray-300 text-primary-600"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:k.label})]},k.key))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms & Conditions"}),a.jsx("textarea",{value:e.releaseTerms||"",onChange:k=>j("releaseTerms",k.target.value),rows:6,placeholder:"Enter terms and conditions for release notes...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),a.jsx("input",{type:"text",value:e.releaseFooterText||"",onChange:k=>j("releaseFooterText",k.target.value),placeholder:"Thank you for choosing our services!",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),o==="colors"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Colors & Styling"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Invoice Colors"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:e.invoicePrimaryColor||"#2563eb",onChange:k=>j("invoicePrimaryColor",k.target.value),className:"h-10 w-20"}),a.jsx("input",{type:"text",value:e.invoicePrimaryColor||"#2563eb",onChange:k=>j("invoicePrimaryColor",k.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Header Background"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:e.invoiceHeaderBg||"#2563eb",onChange:k=>j("invoiceHeaderBg",k.target.value),className:"h-10 w-20"}),a.jsx("input",{type:"text",value:e.invoiceHeaderBg||"#2563eb",onChange:k=>j("invoiceHeaderBg",k.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Release Note Colors"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:e.releasePrimaryColor||"#1e40af",onChange:k=>j("releasePrimaryColor",k.target.value),className:"h-10 w-20"}),a.jsx("input",{type:"text",value:e.releasePrimaryColor||"#1e40af",onChange:k=>j("releasePrimaryColor",k.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Header Background"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:e.releaseNoteHeaderBg||"#1e40af",onChange:k=>j("releaseNoteHeaderBg",k.target.value),className:"h-10 w-20"}),a.jsx("input",{type:"text",value:e.releaseNoteHeaderBg||"#1e40af",onChange:k=>j("releaseNoteHeaderBg",k.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Font Size"}),a.jsxs("select",{value:e.invoiceFontSize||"MEDIUM",onChange:k=>j("invoiceFontSize",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"SMALL",children:"Small"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"LARGE",children:"Large"})]})]})]}),o==="advanced"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Advanced Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol"}),a.jsx("input",{type:"text",value:e.currencySymbol||"KD",onChange:k=>j("currencySymbol",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Position"}),a.jsxs("select",{value:e.currencyPosition||"AFTER",onChange:k=>j("currencyPosition",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"BEFORE",children:"Before ($ 100)"}),a.jsx("option",{value:"AFTER",children:"After (100 KD)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),a.jsxs("select",{value:e.dateFormat||"MMM dd, yyyy",onChange:k=>j("dateFormat",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"MMM dd, yyyy",children:"Oct 13, 2025"}),a.jsx("option",{value:"dd/MM/yyyy",children:"13/10/2025"}),a.jsx("option",{value:"yyyy-MM-dd",children:"2025-10-13"}),a.jsx("option",{value:"dd MMMM yyyy",children:"13 October 2025"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),a.jsxs("select",{value:e.timeFormat||"hh:mm a",onChange:k=>j("timeFormat",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"hh:mm a",children:"03:30 PM"}),a.jsx("option",{value:"HH:mm",children:"15:30"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paper Size"}),a.jsxs("select",{value:e.invoicePaperSize||"A4",onChange:k=>j("invoicePaperSize",k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[a.jsx("option",{value:"A4",children:"A4 (210 × 297 mm)"}),a.jsx("option",{value:"LETTER",children:"Letter (8.5 × 11 in)"}),a.jsx("option",{value:"A5",children:"A5 (148 × 210 mm)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Print Margins (mm)"}),a.jsx("div",{className:"grid grid-cols-4 gap-4",children:["Top","Bottom","Left","Right"].map(k=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:k}),a.jsx("input",{type:"number",value:e[`printMargin${k}`]||10,onChange:E=>j(`printMargin${k}`,parseInt(E.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]},k))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Signature Settings"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e.requireStaffSignature!==!1,onChange:k=>j("requireStaffSignature",k.target.checked),className:"rounded border-gray-300 text-primary-600"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Require Staff Signature"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:e.requireClientSignature!==!1,onChange:k=>j("requireClientSignature",k.target.checked),className:"rounded border-gray-300 text-primary-600"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Require Client Signature"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",checked:e.showQRCode===!0,onChange:k=>j("showQRCode",k.target.checked),className:"rounded border-gray-300 text-primary-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Show QR Code on Documents"})]}),e.showQRCode&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Position"}),a.jsxs("select",{value:e.qrCodePosition||"TOP_RIGHT",onChange:k=>j("qrCodePosition",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[a.jsx("option",{value:"TOP_RIGHT",children:"Top Right"}),a.jsx("option",{value:"TOP_LEFT",children:"Top Left"}),a.jsx("option",{value:"BOTTOM_RIGHT",children:"Bottom Right"}),a.jsx("option",{value:"BOTTOM_LEFT",children:"Bottom Left"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size (px)"}),a.jsx("input",{type:"number",value:e.qrCodeSize||100,onChange:k=>j("qrCodeSize",parseInt(k.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]})]})]}),a.jsxs("div",{className:"mt-8 flex items-center justify-between pt-6 border-t",children:[a.jsxs("button",{className:"flex items-center gap-2 text-primary-600 hover:text-primary-700",children:[a.jsx(j0,{className:"h-5 w-5"}),"Preview Templates"]}),a.jsx("button",{onClick:w,disabled:s,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Sa,{className:"h-5 w-5"}),"Save Settings"]})})]})]})]})};function GR(e,t){return function(){return e.apply(t,arguments)}}const{toString:Xce}=Object.prototype,{getPrototypeOf:C3}=Object,{iterator:_x,toStringTag:KR}=Symbol,Ox=(e=>t=>{const r=Xce.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),vo=e=>(e=e.toLowerCase(),t=>Ox(t)===e),Rx=e=>t=>typeof t===e,{isArray:Lf}=Array,gf=Rx("undefined");function q0(e){return e!==null&&!gf(e)&&e.constructor!==null&&!gf(e.constructor)&&Ms(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const XR=vo("ArrayBuffer");function Yce(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&XR(e.buffer),t}const Zce=Rx("string"),Ms=Rx("function"),YR=Rx("number"),H0=e=>e!==null&&typeof e=="object",Jce=e=>e===!0||e===!1,Sp=e=>{if(Ox(e)!=="object")return!1;const t=C3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(KR in e)&&!(_x in e)},Qce=e=>{if(!H0(e)||q0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},eue=vo("Date"),tue=vo("File"),rue=vo("Blob"),nue=vo("FileList"),aue=e=>H0(e)&&Ms(e.pipe),sue=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ms(e.append)&&((t=Ox(e))==="formdata"||t==="object"&&Ms(e.toString)&&e.toString()==="[object FormData]"))},iue=vo("URLSearchParams"),[oue,lue,cue,uue]=["ReadableStream","Request","Response","Headers"].map(vo),due=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function V0(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Lf(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(q0(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(n=0;n<o;n++)c=i[n],t.call(null,e[c],c,e)}}function ZR(e,t){if(q0(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const pu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,JR=e=>!gf(e)&&e!==pu;function Qb(){const{caseless:e,skipUndefined:t}=JR(this)&&this||{},r={},n=(s,i)=>{const o=e&&ZR(r,i)||i;Sp(r[o])&&Sp(s)?r[o]=Qb(r[o],s):Sp(s)?r[o]=Qb({},s):Lf(s)?r[o]=s.slice():(!t||!gf(s))&&(r[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&V0(arguments[s],n);return r}const fue=(e,t,r,{allOwnKeys:n}={})=>(V0(t,(s,i)=>{r&&Ms(s)?e[i]=GR(s,r):e[i]=s},{allOwnKeys:n}),e),hue=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),mue=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},pue=(e,t,r,n)=>{let s,i,o;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=r!==!1&&C3(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},gue=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},xue=e=>{if(!e)return null;if(Lf(e))return e;let t=e.length;if(!YR(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},yue=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&C3(Uint8Array)),vue=(e,t)=>{const n=(e&&e[_x]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},bue=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},wue=vo("HTMLFormElement"),Nue=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),sE=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),jue=vo("RegExp"),QR=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};V0(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},Aue=e=>{QR(e,(t,r)=>{if(Ms(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ms(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Cue=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Lf(e)?n(e):n(String(e).split(t)),r},Sue=()=>{},Eue=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function kue(e){return!!(e&&Ms(e.append)&&e[KR]==="FormData"&&e[_x])}const Pue=e=>{const t=new Array(10),r=(n,s)=>{if(H0(n)){if(t.indexOf(n)>=0)return;if(q0(n))return n;if(!("toJSON"in n)){t[s]=n;const i=Lf(n)?[]:{};return V0(n,(o,c)=>{const u=r(o,s+1);!gf(u)&&(i[c]=u)}),t[s]=void 0,i}}return n};return r(e,0)},Iue=vo("AsyncFunction"),Tue=e=>e&&(H0(e)||Ms(e))&&Ms(e.then)&&Ms(e.catch),eD=((e,t)=>e?setImmediate:t?((r,n)=>(pu.addEventListener("message",({source:s,data:i})=>{s===pu&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),pu.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ms(pu.postMessage)),_ue=typeof queueMicrotask<"u"?queueMicrotask.bind(pu):typeof process<"u"&&process.nextTick||eD,Oue=e=>e!=null&&Ms(e[_x]),$e={isArray:Lf,isArrayBuffer:XR,isBuffer:q0,isFormData:sue,isArrayBufferView:Yce,isString:Zce,isNumber:YR,isBoolean:Jce,isObject:H0,isPlainObject:Sp,isEmptyObject:Qce,isReadableStream:oue,isRequest:lue,isResponse:cue,isHeaders:uue,isUndefined:gf,isDate:eue,isFile:tue,isBlob:rue,isRegExp:jue,isFunction:Ms,isStream:aue,isURLSearchParams:iue,isTypedArray:yue,isFileList:nue,forEach:V0,merge:Qb,extend:fue,trim:due,stripBOM:hue,inherits:mue,toFlatObject:pue,kindOf:Ox,kindOfTest:vo,endsWith:gue,toArray:xue,forEachEntry:vue,matchAll:bue,isHTMLForm:wue,hasOwnProperty:sE,hasOwnProp:sE,reduceDescriptors:QR,freezeMethods:Aue,toObjectSet:Cue,toCamelCase:Nue,noop:Sue,toFiniteNumber:Eue,findKey:ZR,global:pu,isContextDefined:JR,isSpecCompliantForm:kue,toJSONObject:Pue,isAsyncFn:Iue,isThenable:Tue,setImmediate:eD,asap:_ue,isIterable:Oue};function nr(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}$e.inherits(nr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$e.toJSONObject(this.config),code:this.code,status:this.status}}});const tD=nr.prototype,rD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rD[e]={value:e}});Object.defineProperties(nr,rD);Object.defineProperty(tD,"isAxiosError",{value:!0});nr.from=(e,t,r,n,s,i)=>{const o=Object.create(tD);$e.toFlatObject(e,o,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const c=e&&e.message?e.message:"Error",u=t==null&&e?e.code:t;return nr.call(o,c,u,r,n,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Rue=null;function ew(e){return $e.isPlainObject(e)||$e.isArray(e)}function nD(e){return $e.endsWith(e,"[]")?e.slice(0,-2):e}function iE(e,t,r){return e?e.concat(t).map(function(s,i){return s=nD(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function Due(e){return $e.isArray(e)&&!e.some(ew)}const Lue=$e.toFlatObject($e,{},null,function(t){return/^is[A-Z]/.test(t)});function Dx(e,t,r){if(!$e.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=$e.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,N){return!$e.isUndefined(N[j])});const n=r.metaTokens,s=r.visitor||h,i=r.dots,o=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&$e.isSpecCompliantForm(t);if(!$e.isFunction(s))throw new TypeError("visitor must be a function");function d(w){if(w===null)return"";if($e.isDate(w))return w.toISOString();if($e.isBoolean(w))return w.toString();if(!u&&$e.isBlob(w))throw new nr("Blob is not supported. Use a Buffer instead.");return $e.isArrayBuffer(w)||$e.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function h(w,j,N){let A=w;if(w&&!N&&typeof w=="object"){if($e.endsWith(j,"{}"))j=n?j:j.slice(0,-2),w=JSON.stringify(w);else if($e.isArray(w)&&Due(w)||($e.isFileList(w)||$e.endsWith(j,"[]"))&&(A=$e.toArray(w)))return j=nD(j),A.forEach(function(E,_){!($e.isUndefined(E)||E===null)&&t.append(o===!0?iE([j],_,i):o===null?j:j+"[]",d(E))}),!1}return ew(w)?!0:(t.append(iE(N,j,i),d(w)),!1)}const p=[],v=Object.assign(Lue,{defaultVisitor:h,convertValue:d,isVisitable:ew});function x(w,j){if(!$e.isUndefined(w)){if(p.indexOf(w)!==-1)throw Error("Circular reference detected in "+j.join("."));p.push(w),$e.forEach(w,function(A,k){(!($e.isUndefined(A)||A===null)&&s.call(t,A,$e.isString(k)?k.trim():k,j,v))===!0&&x(A,j?j.concat(k):[k])}),p.pop()}}if(!$e.isObject(e))throw new TypeError("data must be an object");return x(e),t}function oE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function S3(e,t){this._pairs=[],e&&Dx(e,this,t)}const aD=S3.prototype;aD.append=function(t,r){this._pairs.push([t,r])};aD.toString=function(t){const r=t?function(n){return t.call(this,n,oE)}:oE;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Mue(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function sD(e,t,r){if(!t)return e;const n=r&&r.encode||Mue;$e.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=$e.isURLSearchParams(t)?t.toString():new S3(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class lE{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$e.forEach(this.handlers,function(n){n!==null&&t(n)})}}const iD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bue=typeof URLSearchParams<"u"?URLSearchParams:S3,Fue=typeof FormData<"u"?FormData:null,Uue=typeof Blob<"u"?Blob:null,zue={isBrowser:!0,classes:{URLSearchParams:Bue,FormData:Fue,Blob:Uue},protocols:["http","https","file","blob","url","data"]},E3=typeof window<"u"&&typeof document<"u",tw=typeof navigator=="object"&&navigator||void 0,$ue=E3&&(!tw||["ReactNative","NativeScript","NS"].indexOf(tw.product)<0),Wue=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",que=E3&&window.location.href||"http://localhost",Hue=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:E3,hasStandardBrowserEnv:$ue,hasStandardBrowserWebWorkerEnv:Wue,navigator:tw,origin:que},Symbol.toStringTag,{value:"Module"})),as={...Hue,...zue};function Vue(e,t){return Dx(e,new as.classes.URLSearchParams,{visitor:function(r,n,s,i){return as.isNode&&$e.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Gue(e){return $e.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Kue(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function oD(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=r.length;return o=!o&&$e.isArray(s)?s.length:o,u?($e.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!c):((!s[o]||!$e.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&$e.isArray(s[o])&&(s[o]=Kue(s[o])),!c)}if($e.isFormData(e)&&$e.isFunction(e.entries)){const r={};return $e.forEachEntry(e,(n,s)=>{t(Gue(n),s,r,0)}),r}return null}function Xue(e,t,r){if($e.isString(e))try{return(t||JSON.parse)(e),$e.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const G0={transitional:iD,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=$e.isObject(t);if(i&&$e.isHTMLForm(t)&&(t=new FormData(t)),$e.isFormData(t))return s?JSON.stringify(oD(t)):t;if($e.isArrayBuffer(t)||$e.isBuffer(t)||$e.isStream(t)||$e.isFile(t)||$e.isBlob(t)||$e.isReadableStream(t))return t;if($e.isArrayBufferView(t))return t.buffer;if($e.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Vue(t,this.formSerializer).toString();if((c=$e.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Dx(c?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Xue(t)):t}],transformResponse:[function(t){const r=this.transitional||G0.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if($e.isResponse(t)||$e.isReadableStream(t))return t;if(t&&$e.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?nr.from(c,nr.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:as.classes.FormData,Blob:as.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$e.forEach(["delete","get","head","post","put","patch"],e=>{G0.headers[e]={}});const Yue=$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zue=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&Yue[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},cE=Symbol("internals");function uh(e){return e&&String(e).trim().toLowerCase()}function Ep(e){return e===!1||e==null?e:$e.isArray(e)?e.map(Ep):String(e)}function Jue(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Que=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Py(e,t,r,n,s){if($e.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!$e.isString(t)){if($e.isString(n))return t.indexOf(n)!==-1;if($e.isRegExp(n))return n.test(t)}}function ede(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function tde(e,t){const r=$e.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let Bs=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(c,u,d){const h=uh(u);if(!h)throw new Error("header name must be a non-empty string");const p=$e.findKey(s,h);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||u]=Ep(c))}const o=(c,u)=>$e.forEach(c,(d,h)=>i(d,h,u));if($e.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if($e.isString(t)&&(t=t.trim())&&!Que(t))o(Zue(t),r);else if($e.isObject(t)&&$e.isIterable(t)){let c={},u,d;for(const h of t){if(!$e.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[d=h[0]]=(u=c[d])?$e.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}o(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=uh(t),t){const n=$e.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return Jue(s);if($e.isFunction(r))return r.call(this,s,n);if($e.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=uh(t),t){const n=$e.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Py(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=uh(o),o){const c=$e.findKey(n,o);c&&(!r||Py(n,n[c],c,r))&&(delete n[c],s=!0)}}return $e.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||Py(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return $e.forEach(this,(s,i)=>{const o=$e.findKey(n,i);if(o){r[o]=Ep(s),delete r[i];return}const c=t?ede(i):String(i).trim();c!==i&&delete r[i],r[c]=Ep(s),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return $e.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&$e.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[cE]=this[cE]={accessors:{}}).accessors,s=this.prototype;function i(o){const c=uh(o);n[c]||(tde(s,o),n[c]=!0)}return $e.isArray(t)?t.forEach(i):i(t),this}};Bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$e.reduceDescriptors(Bs.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});$e.freezeMethods(Bs);function Iy(e,t){const r=this||G0,n=t||r,s=Bs.from(n.headers);let i=n.data;return $e.forEach(e,function(c){i=c.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function lD(e){return!!(e&&e.__CANCEL__)}function Mf(e,t,r){nr.call(this,e??"canceled",nr.ERR_CANCELED,t,r),this.name="CanceledError"}$e.inherits(Mf,nr,{__CANCEL__:!0});function cD(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new nr("Request failed with status code "+r.status,[nr.ERR_BAD_REQUEST,nr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function rde(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function nde(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(u){const d=Date.now(),h=n[i];o||(o=d),r[s]=u,n[s]=d;let p=i,v=0;for(;p!==s;)v+=r[p++],p=p%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const x=h&&d-h;return x?Math.round(v*1e3/x):void 0}}function ade(e,t){let r=0,n=1e3/t,s,i;const o=(d,h=Date.now())=>{r=h,s=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const h=Date.now(),p=h-r;p>=n?o(d,h):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},n-p)))},()=>s&&o(s)]}const r1=(e,t,r=3)=>{let n=0;const s=nde(50,250);return ade(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-n,d=s(u),h=o<=c;n=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:d||void 0,estimated:d&&c&&h?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(p)},r)},uE=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},dE=e=>(...t)=>$e.asap(()=>e(...t)),sde=as.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,as.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(as.origin),as.navigator&&/(msie|trident)/i.test(as.navigator.userAgent)):()=>!0,ide=as.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];$e.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),$e.isString(n)&&o.push("path="+n),$e.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ode(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function lde(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function uD(e,t,r){let n=!ode(t);return e&&(n||r==!1)?lde(e,t):t}const fE=e=>e instanceof Bs?{...e}:e;function Vu(e,t){t=t||{};const r={};function n(d,h,p,v){return $e.isPlainObject(d)&&$e.isPlainObject(h)?$e.merge.call({caseless:v},d,h):$e.isPlainObject(h)?$e.merge({},h):$e.isArray(h)?h.slice():h}function s(d,h,p,v){if($e.isUndefined(h)){if(!$e.isUndefined(d))return n(void 0,d,p,v)}else return n(d,h,p,v)}function i(d,h){if(!$e.isUndefined(h))return n(void 0,h)}function o(d,h){if($e.isUndefined(h)){if(!$e.isUndefined(d))return n(void 0,d)}else return n(void 0,h)}function c(d,h,p){if(p in t)return n(d,h);if(p in e)return n(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,h,p)=>s(fE(d),fE(h),p,!0)};return $e.forEach(Object.keys({...e,...t}),function(h){const p=u[h]||s,v=p(e[h],t[h],h);$e.isUndefined(v)&&p!==c||(r[h]=v)}),r}const dD=e=>{const t=Vu({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:c}=t;if(t.headers=o=Bs.from(o),t.url=sD(uD(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),$e.isFormData(r)){if(as.hasStandardBrowserEnv||as.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if($e.isFunction(r.getHeaders)){const u=r.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([h,p])=>{d.includes(h.toLowerCase())&&o.set(h,p)})}}if(as.hasStandardBrowserEnv&&(n&&$e.isFunction(n)&&(n=n(t)),n||n!==!1&&sde(t.url))){const u=s&&i&&ide.read(i);u&&o.set(s,u)}return t},cde=typeof XMLHttpRequest<"u",ude=cde&&function(e){return new Promise(function(r,n){const s=dD(e);let i=s.data;const o=Bs.from(s.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:d}=s,h,p,v,x,w;function j(){x&&x(),w&&w(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let N=new XMLHttpRequest;N.open(s.method.toUpperCase(),s.url,!0),N.timeout=s.timeout;function A(){if(!N)return;const E=Bs.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),O={data:!c||c==="text"||c==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:E,config:e,request:N};cD(function(F){r(F),j()},function(F){n(F),j()},O),N=null}"onloadend"in N?N.onloadend=A:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(A)},N.onabort=function(){N&&(n(new nr("Request aborted",nr.ECONNABORTED,e,N)),N=null)},N.onerror=function(_){const O=_&&_.message?_.message:"Network Error",B=new nr(O,nr.ERR_NETWORK,e,N);B.event=_||null,n(B),N=null},N.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||iD;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),n(new nr(_,O.clarifyTimeoutError?nr.ETIMEDOUT:nr.ECONNABORTED,e,N)),N=null},i===void 0&&o.setContentType(null),"setRequestHeader"in N&&$e.forEach(o.toJSON(),function(_,O){N.setRequestHeader(O,_)}),$e.isUndefined(s.withCredentials)||(N.withCredentials=!!s.withCredentials),c&&c!=="json"&&(N.responseType=s.responseType),d&&([v,w]=r1(d,!0),N.addEventListener("progress",v)),u&&N.upload&&([p,x]=r1(u),N.upload.addEventListener("progress",p),N.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(h=E=>{N&&(n(!E||E.type?new Mf(null,e,N):E),N.abort(),N=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const k=rde(s.url);if(k&&as.protocols.indexOf(k)===-1){n(new nr("Unsupported protocol "+k+":",nr.ERR_BAD_REQUEST,e));return}N.send(i||null)})},dde=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(d){if(!s){s=!0,c();const h=d instanceof Error?d:this.reason;n.abort(h instanceof nr?h:new Mf(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,i(new nr(`timeout ${t} of ms exceeded`,nr.ETIMEDOUT))},t);const c=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:u}=n;return u.unsubscribe=()=>$e.asap(c),u}},fde=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},hde=async function*(e,t){for await(const r of mde(e))yield*fde(r,t)},mde=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},hE=(e,t,r,n)=>{const s=hde(e,t);let i=0,o,c=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:d,value:h}=await s.next();if(d){c(),u.close();return}let p=h.byteLength;if(r){let v=i+=p;r(v)}u.enqueue(new Uint8Array(h))}catch(d){throw c(d),d}},cancel(u){return c(u),s.return()}},{highWaterMark:2})},mE=64*1024,{isFunction:rp}=$e,pde=(({Request:e,Response:t})=>({Request:e,Response:t}))($e.global),{ReadableStream:pE,TextEncoder:gE}=$e.global,xE=(e,...t)=>{try{return!!e(...t)}catch{return!1}},gde=e=>{e=$e.merge.call({skipUndefined:!0},pde,e);const{fetch:t,Request:r,Response:n}=e,s=t?rp(t):typeof fetch=="function",i=rp(r),o=rp(n);if(!s)return!1;const c=s&&rp(pE),u=s&&(typeof gE=="function"?(w=>j=>w.encode(j))(new gE):async w=>new Uint8Array(await new r(w).arrayBuffer())),d=i&&c&&xE(()=>{let w=!1;const j=new r(as.origin,{body:new pE,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!j}),h=o&&c&&xE(()=>$e.isReadableStream(new n("").body)),p={stream:h&&(w=>w.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!p[w]&&(p[w]=(j,N)=>{let A=j&&j[w];if(A)return A.call(j);throw new nr(`Response type '${w}' is not supported`,nr.ERR_NOT_SUPPORT,N)})});const v=async w=>{if(w==null)return 0;if($e.isBlob(w))return w.size;if($e.isSpecCompliantForm(w))return(await new r(as.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if($e.isArrayBufferView(w)||$e.isArrayBuffer(w))return w.byteLength;if($e.isURLSearchParams(w)&&(w=w+""),$e.isString(w))return(await u(w)).byteLength},x=async(w,j)=>{const N=$e.toFiniteNumber(w.getContentLength());return N??v(j)};return async w=>{let{url:j,method:N,data:A,signal:k,cancelToken:E,timeout:_,onDownloadProgress:O,onUploadProgress:B,responseType:F,headers:U,withCredentials:L="same-origin",fetchOptions:K}=dD(w),z=t||fetch;F=F?(F+"").toLowerCase():"text";let q=dde([k,E&&E.toAbortSignal()],_),Q=null;const G=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let H;try{if(B&&d&&N!=="get"&&N!=="head"&&(H=await x(U,A))!==0){let ie=new r(j,{method:"POST",body:A,duplex:"half"}),V;if($e.isFormData(A)&&(V=ie.headers.get("content-type"))&&U.setContentType(V),ie.body){const[se,ne]=uE(H,r1(dE(B)));A=hE(ie.body,mE,se,ne)}}$e.isString(L)||(L=L?"include":"omit");const ue=i&&"credentials"in r.prototype,ye={...K,signal:q,method:N.toUpperCase(),headers:U.normalize().toJSON(),body:A,duplex:"half",credentials:ue?L:void 0};Q=i&&new r(j,ye);let de=await(i?z(Q,K):z(j,ye));const we=h&&(F==="stream"||F==="response");if(h&&(O||we&&G)){const ie={};["status","statusText","headers"].forEach(ve=>{ie[ve]=de[ve]});const V=$e.toFiniteNumber(de.headers.get("content-length")),[se,ne]=O&&uE(V,r1(dE(O),!0))||[];de=new n(hE(de.body,mE,se,()=>{ne&&ne(),G&&G()}),ie)}F=F||"text";let Ee=await p[$e.findKey(p,F)||"text"](de,w);return!we&&G&&G(),await new Promise((ie,V)=>{cD(ie,V,{data:Ee,headers:Bs.from(de.headers),status:de.status,statusText:de.statusText,config:w,request:Q})})}catch(ue){throw G&&G(),ue&&ue.name==="TypeError"&&/Load failed|fetch/i.test(ue.message)?Object.assign(new nr("Network Error",nr.ERR_NETWORK,w,Q),{cause:ue.cause||ue}):nr.from(ue,ue&&ue.code,w,Q)}}},xde=new Map,fD=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o=i.length,c=o,u,d,h=xde;for(;c--;)u=i[c],d=h.get(u),d===void 0&&h.set(u,d=c?new Map:gde(t)),h=d;return d};fD();const rw={http:Rue,xhr:ude,fetch:{get:fD}};$e.forEach(rw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yE=e=>`- ${e}`,yde=e=>$e.isFunction(e)||e===null||e===!1,hD={getAdapter:(e,t)=>{e=$e.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){n=e[o];let c;if(s=n,!yde(n)&&(s=rw[(c=String(n)).toLowerCase()],s===void 0))throw new nr(`Unknown adapter '${c}'`);if(s&&($e.isFunction(s)||(s=s.get(t))))break;i[c||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map(yE).join(`
`):" "+yE(o[0]):"as no adapter specified";throw new nr("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s},adapters:rw};function Ty(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mf(null,e)}function vE(e){return Ty(e),e.headers=Bs.from(e.headers),e.data=Iy.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hD.getAdapter(e.adapter||G0.adapter,e)(e).then(function(n){return Ty(e),n.data=Iy.call(e,e.transformResponse,n),n.headers=Bs.from(n.headers),n},function(n){return lD(n)||(Ty(e),n&&n.response&&(n.response.data=Iy.call(e,e.transformResponse,n.response),n.response.headers=Bs.from(n.response.headers))),Promise.reject(n)})}const mD="1.12.2",Lx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Lx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const bE={};Lx.transitional=function(t,r,n){function s(i,o){return"[Axios v"+mD+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(t===!1)throw new nr(s(o," has been removed"+(r?" in "+r:"")),nr.ERR_DEPRECATED);return r&&!bE[o]&&(bE[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};Lx.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function vde(e,t,r){if(typeof e!="object")throw new nr("options must be an object",nr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const c=e[i],u=c===void 0||o(c,i,e);if(u!==!0)throw new nr("option "+i+" must be "+u,nr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new nr("Unknown option "+i,nr.ERR_BAD_OPTION)}}const kp={assertOptions:vde,validators:Lx},ko=kp.validators;let Cu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new lE,response:new lE}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Vu(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&kp.assertOptions(n,{silentJSONParsing:ko.transitional(ko.boolean),forcedJSONParsing:ko.transitional(ko.boolean),clarifyTimeoutError:ko.transitional(ko.boolean)},!1),s!=null&&($e.isFunction(s)?r.paramsSerializer={serialize:s}:kp.assertOptions(s,{encode:ko.function,serialize:ko.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),kp.assertOptions(r,{baseUrl:ko.spelling("baseURL"),withXsrfToken:ko.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&$e.merge(i.common,i[r.method]);i&&$e.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),r.headers=Bs.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(u=u&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const d=[];this.interceptors.response.forEach(function(j){d.push(j.fulfilled,j.rejected)});let h,p=0,v;if(!u){const w=[vE.bind(this),void 0];for(w.unshift(...c),w.push(...d),v=w.length,h=Promise.resolve(r);p<v;)h=h.then(w[p++],w[p++]);return h}v=c.length;let x=r;for(;p<v;){const w=c[p++],j=c[p++];try{x=w(x)}catch(N){j.call(this,N);break}}try{h=vE.call(this,x)}catch(w){return Promise.reject(w)}for(p=0,v=d.length;p<v;)h=h.then(d[p++],d[p++]);return h}getUri(t){t=Vu(this.defaults,t);const r=uD(t.baseURL,t.url,t.allowAbsoluteUrls);return sD(r,t.params,t.paramsSerializer)}};$e.forEach(["delete","get","head","options"],function(t){Cu.prototype[t]=function(r,n){return this.request(Vu(n||{},{method:t,url:r,data:(n||{}).data}))}});$e.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,c){return this.request(Vu(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Cu.prototype[t]=r(),Cu.prototype[t+"Form"]=r(!0)});let bde=class pD{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,c){n.reason||(n.reason=new Mf(i,o,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new pD(function(s){t=s}),cancel:t}}};function wde(e){return function(r){return e.apply(null,r)}}function Nde(e){return $e.isObject(e)&&e.isAxiosError===!0}const nw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nw).forEach(([e,t])=>{nw[t]=e});function gD(e){const t=new Cu(e),r=GR(Cu.prototype.request,t);return $e.extend(r,Cu.prototype,t,{allOwnKeys:!0}),$e.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return gD(Vu(e,s))},r}const Br=gD(G0);Br.Axios=Cu;Br.CanceledError=Mf;Br.CancelToken=bde;Br.isCancel=lD;Br.VERSION=mD;Br.toFormData=Dx;Br.AxiosError=nr;Br.Cancel=Br.CanceledError;Br.all=function(t){return Promise.all(t)};Br.spread=wde;Br.isAxiosError=Nde;Br.mergeConfig=Vu;Br.AxiosHeaders=Bs;Br.formToJSON=e=>oD($e.isHTMLForm(e)?new FormData(e):e);Br.getAdapter=hD.getAdapter;Br.HttpStatusCode=nw;Br.default=Br;const{Axios:ofe,AxiosError:lfe,CanceledError:cfe,isCancel:ufe,CancelToken:dfe,VERSION:ffe,all:hfe,Cancel:mfe,isAxiosError:pfe,spread:gfe,toFormData:xfe,AxiosHeaders:yfe,HttpStatusCode:vfe,formToJSON:bfe,getAdapter:wfe,mergeConfig:Nfe}=Br,jde=()=>{const[e,t]=P.useState("personal"),[r,n]=P.useState(null),[s,i]=P.useState(null),[o,c]=P.useState(!0),[u,d]=P.useState(!1),[h,p]=P.useState(null),[v,x]=P.useState({name:"",phone:"",skills:"",position:"",department:""}),[w,j]=P.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[N,A]=P.useState("");P.useEffect(()=>{k(),E()},[]);const k=async()=>{try{const L=localStorage.getItem("authToken"),K=await Br.get("/api/users/profile/me",{headers:{Authorization:`Bearer ${L}`}});if(K.data.success){const z=K.data.data;n(z),x({name:z.name||"",phone:z.phone||"",skills:z.skills||"",position:z.position||"",department:z.department||""}),A(z.avatar||"")}}catch(L){console.error("Failed to fetch profile:",L),_("error","Failed to load profile")}finally{c(!1)}},E=async()=>{try{const L=localStorage.getItem("authToken"),K=await Br.get("/api/users/profile/stats",{headers:{Authorization:`Bearer ${L}`}});K.data.success&&i(K.data.data.stats)}catch(L){console.error("Failed to fetch stats:",L)}},_=(L,K)=>{p({type:L,text:K}),setTimeout(()=>p(null),5e3)},O=async L=>{var K,z;L.preventDefault(),d(!0);try{const q=localStorage.getItem("authToken"),Q=await Br.put("/api/users/profile/me",v,{headers:{Authorization:`Bearer ${q}`}});Q.data.success&&(n(Q.data.data),_("success","Profile updated successfully!"))}catch(q){console.error("Failed to update profile:",q),_("error",((z=(K=q.response)==null?void 0:K.data)==null?void 0:z.error)||"Failed to update profile")}finally{d(!1)}},B=async L=>{var K,z;if(L.preventDefault(),w.newPassword!==w.confirmPassword){_("error","New passwords do not match");return}if(w.newPassword.length<6){_("error","Password must be at least 6 characters long");return}d(!0);try{const q=localStorage.getItem("authToken");(await Br.put("/api/users/profile/password",{currentPassword:w.currentPassword,newPassword:w.newPassword},{headers:{Authorization:`Bearer ${q}`}})).data.success&&(j({currentPassword:"",newPassword:"",confirmPassword:""}),_("success","Password changed successfully!"))}catch(q){console.error("Failed to change password:",q),_("error",((z=(K=q.response)==null?void 0:K.data)==null?void 0:z.error)||"Failed to change password")}finally{d(!1)}},F=async()=>{var L,K;if(!N.trim()){_("error","Please enter an avatar URL");return}d(!0);try{const z=localStorage.getItem("authToken");(await Br.put("/api/users/profile/avatar",{avatar:N},{headers:{Authorization:`Bearer ${z}`}})).data.success&&(r&&n({...r,avatar:N}),_("success","Avatar updated successfully!"))}catch(z){console.error("Failed to update avatar:",z),_("error",((K=(L=z.response)==null?void 0:L.data)==null?void 0:K.error)||"Failed to update avatar")}finally{d(!1)}},U=L=>{switch(L){case"ADMIN":return"bg-red-100 text-red-800";case"MANAGER":return"bg-green-100 text-green-800";case"WORKER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 h-32"}),a.jsxs("div",{className:"px-6 pb-6",children:[a.jsxs("div",{className:"flex items-end -mt-16 mb-4",children:[a.jsxs("div",{className:"relative",children:[r.avatar?a.jsx("img",{src:r.avatar,alt:r.name,className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}):a.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-gray-200 flex items-center justify-center",children:a.jsx(ry,{className:"w-16 h-16 text-gray-400"})}),a.jsx("button",{onClick:()=>t("personal"),className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:a.jsx(Sx,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"ml-6 flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),a.jsx("p",{className:"text-gray-600",children:r.email}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${U(r.role)}`,children:r.role}),r.position&&a.jsxs("span",{className:"text-gray-600 text-sm",children:["• ",r.position]}),r.department&&a.jsxs("span",{className:"text-gray-600 text-sm",children:["• ",r.department]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center gap-4",children:[r.company.logo?a.jsx("img",{src:r.company.logo,alt:r.company.name,className:"w-12 h-12 object-contain"}):a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center",children:a.jsx(wC,{className:"w-6 h-6 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:r.company.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Plan: ",r.company.plan]})]})]})]})]}),h&&a.jsx("div",{className:`px-4 py-3 rounded-lg border ${h.type==="success"?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:h.text}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsxs("button",{onClick:()=>t("personal"),className:`px-6 py-3 border-b-2 font-medium text-sm ${e==="personal"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(ry,{className:"w-4 h-4 inline mr-2"}),"Personal Info"]}),a.jsxs("button",{onClick:()=>t("security"),className:`px-6 py-3 border-b-2 font-medium text-sm ${e==="security"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(AC,{className:"w-4 h-4 inline mr-2"}),"Security"]}),a.jsxs("button",{onClick:()=>t("activity"),className:`px-6 py-3 border-b-2 font-medium text-sm ${e==="activity"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Rb,{className:"w-4 h-4 inline mr-2"}),"Activity"]})]})}),a.jsxs("div",{className:"p-6",children:[e==="personal"&&a.jsxs("form",{onSubmit:O,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(ry,{className:"w-4 h-4 inline mr-1"}),"Full Name"]}),a.jsx("input",{type:"text",value:v.name,onChange:L=>x({...v,name:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(qae,{className:"w-4 h-4 inline mr-1"}),"Email"]}),a.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Kae,{className:"w-4 h-4 inline mr-1"}),"Phone"]}),a.jsx("input",{type:"tel",value:v.phone,onChange:L=>x({...v,phone:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(bC,{className:"w-4 h-4 inline mr-1"}),"Position"]}),a.jsx("input",{type:"text",value:v.position,onChange:L=>x({...v,position:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Warehouse Manager"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(wC,{className:"w-4 h-4 inline mr-1"}),"Department"]}),a.jsx("input",{type:"text",value:v.department,onChange:L=>x({...v,department:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Operations"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Db,{className:"w-4 h-4 inline mr-1"}),"Role"]}),a.jsx("input",{type:"text",value:r.role,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role can only be changed by admins"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),a.jsx("textarea",{value:v.skills,onChange:L=>x({...v,skills:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"e.g., Forklift, Inventory Management, Safety Certified"})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Avatar"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"url",value:N,onChange:L=>A(L.target.value),placeholder:"Enter avatar URL",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("button",{type:"button",onClick:F,disabled:u,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Update Avatar"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[a.jsxs("button",{type:"button",onClick:()=>k(),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(ci,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),a.jsxs("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(ju,{className:"w-4 h-4 inline mr-2"}),u?"Saving...":"Save Changes"]})]})]}),e==="security"&&a.jsxs("form",{onSubmit:B,className:"space-y-6 max-w-2xl",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),a.jsx("input",{type:"password",value:w.currentPassword,onChange:L=>j({...w,currentPassword:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:w.newPassword,onChange:L=>j({...w,newPassword:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:w.confirmPassword,onChange:L=>j({...w,confirmPassword:L.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:6})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-800 font-semibold mb-2",children:"Password Requirements:"}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"At least 6 characters long"}),a.jsx("li",{children:"Use a mix of letters and numbers"}),a.jsx("li",{children:"Avoid common passwords"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[a.jsxs("button",{type:"button",onClick:()=>j({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(ci,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),a.jsxs("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[a.jsx(AC,{className:"w-4 h-4 inline mr-2"}),u?"Changing...":"Change Password"]})]})]}),e==="activity"&&s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Rack Activities"}),a.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:s.rackActivities})]}),a.jsx(Rb,{className:"w-12 h-12 text-blue-400"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Job Assignments"}),a.jsx("p",{className:"text-3xl font-bold text-green-900 mt-2",children:s.jobAssignments})]}),a.jsx(bC,{className:"w-12 h-12 text-green-400"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Days Active"}),a.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:s.daysSinceJoined})]}),a.jsx(y3,{className:"w-12 h-12 text-purple-400"})]})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Account Created:"}),a.jsx("span",{className:"font-medium",children:new Date(r.createdAt).toLocaleDateString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),a.jsx("span",{className:"font-medium",children:new Date(r.updatedAt).toLocaleDateString()})]}),s.lastLoginAt&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Last Login:"}),a.jsx("span",{className:"font-medium",children:new Date(s.lastLoginAt).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Account Status:"}),a.jsx("span",{className:`font-medium ${r.isActive?"text-green-600":"text-red-600"}`,children:r.isActive?"Active":"Inactive"})]})]})]})]})]})]})]}):a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"Failed to load profile"})},Ade=["ADMIN","MANAGER","WORKER"],Cde={ADMIN:"bg-red-100 text-red-800 border-red-200",MANAGER:"bg-green-100 text-green-800 border-green-200",WORKER:"bg-blue-100 text-blue-800 border-blue-200"},Sde=()=>{const[e,t]=P.useState("MANAGER"),[r,n]=P.useState([]),[s,i]=P.useState({}),[o,c]=P.useState([]),[u,d]=P.useState(new Set),[h,p]=P.useState(!0),[v,x]=P.useState(!1),[w,j]=P.useState(null);P.useEffect(()=>{N()},[]),P.useEffect(()=>{e&&A(e)},[e]);const N=async()=>{try{const U=localStorage.getItem("authToken"),L=await Br.get("/api/permissions",{headers:{Authorization:`Bearer ${U}`}});L.data.success&&(n(L.data.data.permissions),i(L.data.data.grouped))}catch(U){console.error("Failed to fetch permissions:",U),B("error","Failed to load permissions")}finally{p(!1)}},A=async U=>{try{const L=localStorage.getItem("authToken"),K=await Br.get(`/api/permissions/role/${U}`,{headers:{Authorization:`Bearer ${L}`}});if(K.data.success){c(K.data.data.permissions);const z=new Set(K.data.data.permissions.map(q=>q.permissionId));d(z)}}catch(L){console.error("Failed to fetch role permissions:",L),B("error","Failed to load role permissions")}},k=U=>{if(e==="ADMIN"){B("error","ADMIN role has full access and cannot be modified");return}const L=new Set(u);L.has(U)?L.delete(U):L.add(U),d(L)},E=U=>{if(e==="ADMIN"){B("error","ADMIN role has full access and cannot be modified");return}const L=s[U]||[],K=L.every(q=>u.has(q.id)),z=new Set(u);L.forEach(q=>{K?z.delete(q.id):z.add(q.id)}),d(z)},_=async()=>{var U,L;if(e==="ADMIN"){B("error","ADMIN role has full access and cannot be modified");return}x(!0);try{const K=localStorage.getItem("authToken");(await Br.put(`/api/permissions/role/${e}/bulk`,{permissionIds:Array.from(u)},{headers:{Authorization:`Bearer ${K}`}})).data.success&&(B("success",`Permissions updated for ${e}!`),await A(e))}catch(K){console.error("Failed to update permissions:",K),B("error",((L=(U=K.response)==null?void 0:U.data)==null?void 0:L.message)||"Failed to update permissions")}finally{x(!1)}},O=()=>{A(e),B("success","Changes discarded")},B=(U,L)=>{j({type:U,text:L}),setTimeout(()=>j(null),5e3)},F=()=>u.size;return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(Db,{className:"w-6 h-6 mr-2 text-blue-600"}),"Role & Permission Management"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Configure what each role can see and do in the system"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Permissions:"}),a.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[F(),"/",r.length]})]})]})}),w&&a.jsx("div",{className:`px-4 py-3 rounded-lg border ${w.type==="success"?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:w.text}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex",children:Ade.map(U=>a.jsx("button",{onClick:()=>t(U),className:`flex-1 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${e===U?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Db,{className:"w-4 h-4"}),a.jsx("span",{children:U})]})},U))})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:`border-2 rounded-lg p-4 mb-6 ${Cde[e]}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-lg",children:["Configuring: ",e]}),a.jsxs("p",{className:"text-sm mt-1",children:[e==="ADMIN"&&"Full system access - cannot be modified",e==="MANAGER"&&"Operational control - can manage daily tasks",e==="WORKER"&&"Limited access - basic operational tasks"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Vg,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:[o.length," permissions assigned"]})]})]})}),a.jsx("div",{className:"space-y-4",children:Object.entries(s).map(([U,L])=>{const K=L.every(q=>u.has(q.id)),z=L.some(q=>u.has(q.id));return a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>E(U),disabled:e==="ADMIN",className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${e==="ADMIN"?"bg-gray-200 border-gray-300 cursor-not-allowed":K?"bg-blue-600 border-blue-600":z?"bg-blue-300 border-blue-300":"border-gray-300 hover:border-blue-400"}`,children:[K&&a.jsx(NC,{className:"w-3 h-3 text-white"}),!K&&z&&a.jsx("div",{className:"w-2 h-0.5 bg-white"})]}),a.jsx("h4",{className:"font-semibold text-gray-900",children:U.replace(/_/g," ")})]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[L.filter(q=>u.has(q.id)).length," / ",L.length]})]}),a.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:L.map(q=>a.jsx("button",{onClick:()=>k(q.id),disabled:e==="ADMIN",className:`px-4 py-2 rounded-lg border-2 font-medium text-sm transition-all ${e==="ADMIN"?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":u.has(q.id)?"bg-blue-600 border-blue-600 text-white hover:bg-blue-700":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.has(q.id)&&a.jsx(NC,{className:"w-4 h-4"}),q.action]})},q.id))})]},U)})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t",children:[a.jsxs("button",{onClick:O,disabled:e==="ADMIN"||v,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Jae,{className:"w-4 h-4 inline mr-2"}),"Reset Changes"]}),a.jsxs("button",{onClick:_,disabled:e==="ADMIN"||v,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ju,{className:"w-4 h-4 inline mr-2"}),v?"Saving...":"Save Changes"]})]}),e==="ADMIN"&&a.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg",children:a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:"Note:"})," ADMIN role has full system access by default and cannot be modified. To restrict admin permissions, consider creating a custom MANAGER role instead."]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Permission Actions"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"VIEW"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Read and view data"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"CREATE"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Create new records"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"EDIT"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Modify existing data"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"DELETE"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Remove records"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"APPROVE"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Approve requests"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"EXPORT"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Export data files"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:"MANAGE"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Full control"})]})]})]})]})},Ede=()=>{const[e,t]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState("materials"),[o,c]=P.useState(!1),[u,d]=P.useState({sku:"",name:"",category:"",unit:"PCS",minStockLevel:0});P.useEffect(()=>{h(),p()},[]);const h=async()=>{try{const x=await fetch("/api/materials",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(x.ok){const w=await x.json();t(w)}}catch(x){console.error("Failed to fetch materials:",x)}},p=async()=>{try{const x=await fetch("/api/materials/issues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(x.ok){const w=await x.json();n(w)}}catch(x){console.error("Failed to fetch issues:",x)}},v=async x=>{x.preventDefault();try{(await fetch("/api/materials",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(u)})).ok&&(c(!1),d({sku:"",name:"",category:"",unit:"PCS",minStockLevel:0}),h())}catch(w){console.error("Failed to add material:",w)}};return a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"mb-4",children:"Materials Management"}),a.jsxs("div",{className:"mb-4",style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("button",{onClick:()=>i("materials"),style:{padding:"10px 20px",backgroundColor:s==="materials"?"#007bff":"transparent",color:s==="materials"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Materials Catalog"}),a.jsx("button",{onClick:()=>i("issues"),style:{padding:"10px 20px",backgroundColor:s==="issues"?"#007bff":"transparent",color:s==="issues"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Material Issues"}),a.jsx("button",{onClick:()=>i("returns"),style:{padding:"10px 20px",backgroundColor:s==="returns"?"#007bff":"transparent",color:s==="returns"?"white":"black",border:"none",cursor:"pointer"},children:"Material Returns & Damage"})]}),s==="materials"&&a.jsxs("div",{children:[a.jsx("button",{onClick:()=>c(!o),style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"20px"},children:o?"Cancel":"Add Material"}),o&&a.jsx("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"4px",marginBottom:"20px"},children:a.jsxs("form",{onSubmit:v,children:[a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"SKU"}),a.jsx("input",{type:"text",required:!0,value:u.sku,onChange:x=>d({...u,sku:x.target.value}),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Name"}),a.jsx("input",{type:"text",required:!0,value:u.name,onChange:x=>d({...u,name:x.target.value}),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Category"}),a.jsx("input",{type:"text",required:!0,value:u.category,onChange:x=>d({...u,category:x.target.value}),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),a.jsx("button",{type:"submit",style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Create Material"})]})}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"SKU"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Name"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Category"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Unit"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Min Stock"})]})}),a.jsx("tbody",{children:e.map(x=>a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:x.sku}),a.jsx("td",{style:{padding:"12px"},children:x.name}),a.jsx("td",{style:{padding:"12px"},children:x.category}),a.jsx("td",{style:{padding:"12px"},children:x.unit}),a.jsx("td",{style:{padding:"12px"},children:x.minStockLevel})]},x.id))})]}),e.length===0&&a.jsx("p",{style:{textAlign:"center",color:"#6c757d",marginTop:"20px"},children:"No materials found. Create one to get started!"})]}),s==="issues"&&a.jsxs("div",{children:[a.jsx("h5",{style:{marginBottom:"20px"},children:"Material Issues (Allocations to Jobs)"}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Material"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Quantity"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Total Cost"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job ID"})]})}),a.jsx("tbody",{children:r.map(x=>{var w;return a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:(w=x.material)==null?void 0:w.name}),a.jsx("td",{style:{padding:"12px"},children:x.quantity}),a.jsxs("td",{style:{padding:"12px"},children:[x.totalCost.toFixed(2)," KWD"]}),a.jsx("td",{style:{padding:"12px"},children:x.jobId})]},x.id)})})]}),r.length===0&&a.jsx("p",{style:{textAlign:"center",color:"#6c757d",marginTop:"20px"},children:"No material issues recorded yet."})]}),s==="returns"&&a.jsxs("div",{children:[a.jsx("h5",{style:{marginBottom:"20px"},children:"Material Returns & Damage Tracking"}),a.jsx("p",{style:{color:"#6c757d"},children:"Track material returns after job completion and record damage."}),a.jsx("div",{style:{padding:"20px",backgroundColor:"#e7f3ff",borderRadius:"4px",marginTop:"20px"},children:a.jsx("p",{children:"📋 Coming soon: Return request form and damage photo upload"})})]})]})},kde=()=>{const[e,t]=P.useState(null),[r,n]=P.useState([]),[s,i]=P.useState("summary"),[o,c]=P.useState(!1);P.useEffect(()=>{u()},[]);const u=async()=>{c(!0);try{const[h,p]=await Promise.all([fetch("/api/reports/profitability",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/reports/material-costs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(h.ok){const v=await h.json();t(v)}if(p.ok){const v=await p.json();n(v)}}catch(h){console.error("Failed to fetch reports:",h)}finally{c(!1)}},d=h=>`${h.toFixed(2)} KWD`;return a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"mb-4",children:"Job Reports & Financial Analytics"}),a.jsxs("div",{className:"mb-4",style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("button",{onClick:()=>i("summary"),style:{padding:"10px 20px",backgroundColor:s==="summary"?"#007bff":"transparent",color:s==="summary"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Profitability Summary"}),a.jsx("button",{onClick:()=>i("details"),style:{padding:"10px 20px",backgroundColor:s==="details"?"#007bff":"transparent",color:s==="details"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Cost Breakdown"}),a.jsx("button",{onClick:()=>i("costs"),style:{padding:"10px 20px",backgroundColor:s==="costs"?"#007bff":"transparent",color:s==="costs"?"white":"black",border:"none",cursor:"pointer"},children:"Material Costs"})]}),o?a.jsx("p",{children:"Loading reports..."}):a.jsxs(a.Fragment,{children:[s==="summary"&&e&&a.jsx("div",{children:a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #28a745"},children:[a.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Total Revenue"}),a.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#28a745"},children:d(e.totalRevenue)})]}),a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #dc3545"},children:[a.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Total Costs"}),a.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3545"},children:d(e.totalCosts)})]}),a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:`4px solid ${e.totalProfit>=0?"#28a745":"#dc3545"}`},children:[a.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Total Profit"}),a.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:e.totalProfit>=0?"#28a745":"#dc3545"},children:d(e.totalProfit)})]}),a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #007bff"},children:[a.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Avg Profit Margin"}),a.jsxs("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#007bff"},children:[e.avgProfitMargin.toFixed(1),"%"]})]}),a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #17a2b8"},children:[a.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Jobs Tracked"}),a.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#17a2b8"},children:e.jobCount})]})]})}),s==="details"&&e&&a.jsxs("div",{children:[a.jsx("h5",{style:{marginBottom:"20px"},children:"Cost Breakdown"}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Cost Category"}),a.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Amount"}),a.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"% of Total"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:"Materials"}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:d(e.breakdown.materials)}),a.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.materials/e.totalCosts*100).toFixed(1):0,"%"]})]}),a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:"Labor"}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:d(e.breakdown.labor)}),a.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.labor/e.totalCosts*100).toFixed(1):0,"%"]})]}),a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:"Damage Loss"}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:d(e.breakdown.damage)}),a.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.damage/e.totalCosts*100).toFixed(1):0,"%"]})]}),a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:"Other"}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:d(e.breakdown.other)}),a.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.other/e.totalCosts*100).toFixed(1):0,"%"]})]}),a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",fontWeight:"bold"},children:[a.jsx("td",{style:{padding:"12px"},children:"Total Costs"}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:d(e.totalCosts)}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:"100%"})]})]})]})]}),s==="costs"&&a.jsxs("div",{children:[a.jsx("h5",{style:{marginBottom:"20px"},children:"Material Cost Details"}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Material"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"SKU"}),a.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Quantity"}),a.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Total Cost"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job"})]})}),a.jsx("tbody",{children:r.map((h,p)=>a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:h.materialName}),a.jsx("td",{style:{padding:"12px"},children:h.materialSku}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:h.quantity}),a.jsx("td",{style:{padding:"12px",textAlign:"right"},children:d(h.totalCost)}),a.jsx("td",{style:{padding:"12px"},children:h.jobCode})]},p))})]}),r.length===0&&a.jsx("p",{style:{textAlign:"center",color:"#6c757d",marginTop:"20px"},children:"No material costs recorded yet."})]})]})]})},Pde=()=>{var k;const[e,t]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState("plugins"),[o,c]=P.useState(!1),[u,d]=P.useState(null),[h,p]=P.useState({name:"",version:"1.0.0",description:""});P.useEffect(()=>{v()},[]);const v=async()=>{c(!0);try{const E=await fetch("/api/plugins",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(E.ok){const _=await E.json();t(_)}}catch(E){console.error("Failed to fetch plugins:",E)}finally{c(!1)}},x=async E=>{try{const _=await fetch(`/api/plugins/${E}/logs`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(_.ok){const O=await _.json();n(O)}}catch(_){console.error("Failed to fetch plugin logs:",_)}},w=async E=>{E.preventDefault(),c(!0);try{(await fetch("/api/plugins",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(h)})).ok?(alert("Plugin installed successfully"),p({name:"",version:"1.0.0",description:""}),i("plugins"),v()):alert("Failed to install plugin")}catch(_){console.error("Installation error:",_),alert("Error installing plugin")}finally{c(!1)}},j=async(E,_)=>{try{(await fetch(`/api/plugins/${E}/${_?"activate":"deactivate"}`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?v():alert("Failed to update plugin")}catch(O){console.error("Error:",O)}},N=async E=>{if(window.confirm("Are you sure you want to uninstall this plugin?"))try{(await fetch(`/api/plugins/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?(alert("Plugin uninstalled successfully"),v()):alert("Failed to uninstall plugin")}catch(_){console.error("Error:",_)}},A=E=>{switch(E){case"ACTIVE":return"#28a745";case"DISABLED":return"#ffc107";case"ERROR":return"#dc3545";default:return"#6c757d"}};return a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"mb-4",children:"Plugin System Management"}),a.jsxs("div",{className:"mb-4",style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("button",{onClick:()=>i("plugins"),style:{padding:"10px 20px",backgroundColor:s==="plugins"?"#007bff":"transparent",color:s==="plugins"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Installed Plugins"}),a.jsx("button",{onClick:()=>i("install"),style:{padding:"10px 20px",backgroundColor:s==="install"?"#007bff":"transparent",color:s==="install"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Install Plugin"}),a.jsx("button",{onClick:()=>{i("logs"),u&&x(u)},style:{padding:"10px 20px",backgroundColor:s==="logs"?"#007bff":"transparent",color:s==="logs"?"white":"black",border:"none",cursor:"pointer"},children:"Audit Logs"})]}),o&&a.jsx("p",{children:"Loading..."}),s==="plugins"&&!o&&a.jsx("div",{children:e.length===0?a.jsx("p",{style:{color:"#6c757d"},children:"No plugins installed yet."}):a.jsx("div",{style:{display:"grid",gap:"15px"},children:e.map(E=>a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",borderLeft:`4px solid ${A(E.status)}`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[a.jsxs("div",{children:[a.jsx("h5",{style:{marginBottom:"5px"},children:E.name}),a.jsxs("small",{style:{color:"#6c757d"},children:["Version ",E.version," • Installed: ",new Date(E.installDate).toLocaleDateString()]})]}),a.jsx("span",{style:{backgroundColor:A(E.status),color:"white",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:E.status})]}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("button",{onClick:()=>j(E.id,E.status!=="ACTIVE"),style:{padding:"8px 12px",backgroundColor:E.status==="ACTIVE"?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:E.status==="ACTIVE"?"Disable":"Enable"}),a.jsx("button",{onClick:()=>{d(E.id),i("logs"),x(E.id)},style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View Logs"}),a.jsx("button",{onClick:()=>N(E.id),style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Uninstall"})]})]},E.id))})}),s==="install"&&a.jsxs("form",{onSubmit:w,style:{maxWidth:"500px"},children:[a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Plugin Name *"}),a.jsx("input",{type:"text",required:!0,value:h.name,onChange:E=>p({...h,name:E.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"},placeholder:"e.g., Advanced Reporting"})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Version"}),a.jsx("input",{type:"text",value:h.version,onChange:E=>p({...h,version:E.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"},placeholder:"1.0.0"})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Description"}),a.jsx("textarea",{value:h.description,onChange:E=>p({...h,description:E.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box",minHeight:"100px"},placeholder:"Plugin description and features..."})]}),a.jsx("button",{type:"submit",disabled:o,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",fontWeight:"bold",opacity:o?.6:1},children:o?"Installing...":"Install Plugin"})]}),s==="logs"&&a.jsx("div",{children:u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:"20px"},children:a.jsxs("h5",{children:["Plugin: ",(k=e.find(E=>E.id===u))==null?void 0:k.name]})}),r.length===0?a.jsx("p",{style:{color:"#6c757d"},children:"No logs available for this plugin."}):a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Timestamp"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Action"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Performed By"}),a.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Details"})]})}),a.jsx("tbody",{children:r.map(E=>a.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[a.jsx("td",{style:{padding:"12px"},children:new Date(E.timestamp).toLocaleString()}),a.jsx("td",{style:{padding:"12px"},children:a.jsx("span",{style:{backgroundColor:E.action==="INSTALLED"?"#28a745":E.action==="ACTIVATED"?"#17a2b8":E.action==="DEACTIVATED"?"#ffc107":E.action==="UNINSTALLED"?"#dc3545":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:E.action})}),a.jsx("td",{style:{padding:"12px"},children:E.performedBy}),a.jsx("td",{style:{padding:"12px",color:"#6c757d"},children:E.details||"-"})]},E.id))})]})]})})]})},Ide=()=>{const[e,t]=P.useState([]),[r,n]=P.useState([]),[s,i]=P.useState("PENDING"),[o,c]=P.useState("ALL"),[u,d]=P.useState(null),[h,p]=P.useState(""),[v,x]=P.useState(!1);P.useEffect(()=>{w()},[]),P.useEffect(()=>{j()},[e,s,o]);const w=async()=>{x(!0);try{const _=await fetch("/api/materials/approvals",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(_.ok){const O=await _.json();t(O)}}catch(_){console.error("Failed to fetch approvals:",_)}finally{x(!1)}},j=()=>{let _=e;s!=="ALL"&&(_=_.filter(O=>O.status===s)),o!=="ALL"&&(_=_.filter(O=>O.approvalType===o)),n(_)},N=async _=>{try{(await fetch(`/api/materials/approvals/${_}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({decision:"APPROVED",notes:h})})).ok?(alert("Approval recorded successfully"),d(null),p(""),w()):alert("Failed to record approval")}catch(O){console.error("Error:",O)}},A=async _=>{try{(await fetch(`/api/materials/approvals/${_}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({decision:"REJECTED",notes:h})})).ok?(alert("Rejection recorded successfully"),d(null),p(""),w()):alert("Failed to record rejection")}catch(O){console.error("Error:",O)}},k=_=>({DAMAGE:"#dc3545",PREMIUM_MATERIAL:"#007bff",QUANTITY_VARIATION:"#ffc107"})[_]||"#6c757d",E=_=>({PENDING:"#ffc107",APPROVED:"#28a745",REJECTED:"#dc3545"})[_]||"#6c757d";return a.jsxs("div",{className:"p-4",children:[a.jsx("h2",{className:"mb-4",children:"Approval Workflow Management"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Status"}),a.jsxs("select",{value:s,onChange:_=>i(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px"},children:[a.jsx("option",{value:"ALL",children:"All Statuses"}),a.jsx("option",{value:"PENDING",children:"Pending"}),a.jsx("option",{value:"APPROVED",children:"Approved"}),a.jsx("option",{value:"REJECTED",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Type"}),a.jsxs("select",{value:o,onChange:_=>c(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px"},children:[a.jsx("option",{value:"ALL",children:"All Types"}),a.jsx("option",{value:"DAMAGE",children:"Damage Claims"}),a.jsx("option",{value:"PREMIUM_MATERIAL",children:"Premium Materials"}),a.jsx("option",{value:"QUANTITY_VARIATION",children:"Quantity Variations"})]})]}),a.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:a.jsx("button",{onClick:w,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Refresh"})})]}),v?a.jsx("p",{children:"Loading approvals..."}):r.length===0?a.jsx("p",{style:{color:"#6c757d"},children:"No approvals found."}):a.jsx("div",{style:{display:"grid",gap:"15px"},children:r.map(_=>a.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",borderLeft:`4px solid ${E(_.status)}`},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[a.jsxs("div",{children:[a.jsx("h5",{style:{marginBottom:"5px"},children:_.materialName}),a.jsxs("small",{style:{color:"#6c757d"},children:["SKU: ",_.materialSku," • Category: ",_.category,_.jobCode&&` • Job: ${_.jobCode}`]})]}),a.jsxs("div",{style:{display:"flex",gap:"10px"},children:[a.jsx("span",{style:{backgroundColor:k(_.approvalType),color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:_.approvalType.replace(/_/g," ")}),a.jsx("span",{style:{backgroundColor:E(_.status),color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:_.status})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"15px"},children:[a.jsxs("div",{children:[a.jsx("small",{style:{color:"#6c757d"},children:"Quantity"}),a.jsxs("p",{style:{fontWeight:"bold",margin:"3px 0"},children:[_.quantity," units"]})]}),a.jsxs("div",{children:[a.jsx("small",{style:{color:"#6c757d"},children:"Estimated Cost"}),a.jsxs("p",{style:{fontWeight:"bold",margin:"3px 0"},children:[_.estimatedCost.toFixed(2)," KWD"]})]}),a.jsxs("div",{children:[a.jsx("small",{style:{color:"#6c757d"},children:"Requested By"}),a.jsx("p",{style:{fontWeight:"bold",margin:"3px 0"},children:_.requestedBy})]}),a.jsxs("div",{children:[a.jsx("small",{style:{color:"#6c757d"},children:"Requested At"}),a.jsx("p",{style:{fontWeight:"bold",margin:"3px 0"},children:new Date(_.requestedAt).toLocaleDateString()})]})]}),_.status==="PENDING"&&a.jsx("button",{onClick:()=>d(_),style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Review & Decide"}),_.status!=="PENDING"&&a.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#e9ecef",borderRadius:"4px"},children:[a.jsxs("small",{style:{color:"#6c757d"},children:[a.jsx("strong",{children:"Decision:"})," ",_.status," by ",_.approvedBy," on"," ",_.approvedAt?new Date(_.approvedAt).toLocaleString():"N/A"]}),_.decisionNotes&&a.jsxs("p",{style:{margin:"5px 0",color:"#495057"},children:[a.jsx("strong",{children:"Notes:"})," ",_.decisionNotes]})]})]},_.id))}),u&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>d(null),children:a.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[a.jsx("h4",{style:{marginBottom:"15px"},children:"Review Approval Request"}),a.jsxs("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:[a.jsxs("small",{style:{color:"#6c757d"},children:[a.jsx("strong",{children:u.materialName})," (",u.materialSku,")"]}),a.jsxs("p",{style:{margin:"5px 0",fontWeight:"bold"},children:[u.quantity," units • ",u.estimatedCost.toFixed(2)," KWD"]})]}),a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Decision Notes"}),a.jsx("textarea",{value:h,onChange:_=>p(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box",minHeight:"80px"},placeholder:"Enter approval or rejection notes..."})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[a.jsx("button",{onClick:()=>d(null),style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Cancel"}),a.jsx("button",{onClick:()=>A(u.id),style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Reject"}),a.jsx("button",{onClick:()=>N(u.id),style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Approve"})]})]})})]})},Tde=({isOpen:e,onClose:t,materialId:r,materialName:n})=>{const[s,i]=P.useState([]),[o,c]=P.useState(!1),[u,d]=P.useState({currentStock:0,totalPurchased:0,totalIssued:0,totalReturned:0,totalDamaged:0});P.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{c(!0);try{const v=await(await fetch(`/api/materials/${r}/history`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();i(v.transactions),d(v.summary)}catch(p){console.error("Failed to load transaction history:",p)}finally{c(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Wu,{className:"w-6 h-6"}),"Transaction History"]}),a.jsx("p",{className:"text-blue-100 mt-1",children:n})]}),a.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2",children:a.jsx(ci,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 bg-gray-50 border-b",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Stock"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.currentStock})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Purchased"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",u.totalPurchased]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Issued"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["-",u.totalIssued]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Returned"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",u.totalReturned]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Damaged"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.totalDamaged})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transactions..."})]}):s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Wu,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):a.jsx("div",{className:"space-y-4",children:s.map(p=>a.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.type==="PURCHASE"&&a.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:a.jsx(CC,{className:"w-5 h-5 text-green-600"})}),p.type==="ISSUE"&&a.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:a.jsx(Lb,{className:"w-5 h-5 text-orange-600"})}),p.type==="RETURN"&&a.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:a.jsx(CC,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-lg",children:[p.type==="PURCHASE"&&"Stock Purchase",p.type==="ISSUE"&&"Material Issued",p.type==="RETURN"&&"Material Returned",p.type==="ADJUSTMENT"&&"Stock Adjustment"]}),a.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2 mt-1",children:[a.jsx(y3,{className:"w-4 h-4"}),new Date(p.date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),a.jsxs("div",{className:"ml-14 space-y-1",children:[p.details.jobCode&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Job:"})," ",a.jsx("span",{className:"text-blue-600",children:p.details.jobCode}),p.details.jobTitle&&` - ${p.details.jobTitle}`]}),p.details.purchaseOrderNo&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"PO:"})," ",p.details.purchaseOrderNo]}),p.details.supplier&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Supplier:"})," ",p.details.supplier]}),p.details.rack&&a.jsxs("p",{className:"text-sm flex items-center gap-1",children:[a.jsx(BO,{className:"w-3 h-3"}),a.jsx("span",{className:"font-medium",children:"Rack:"})," ",p.details.rack]}),p.details.unitCost&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"Unit Cost:"})," ₹",p.details.unitCost.toFixed(2)]}),p.details.notes&&a.jsx("p",{className:"text-sm text-gray-600 italic",children:p.details.notes})]})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsxs("p",{className:`text-2xl font-bold ${p.type==="PURCHASE"||p.type==="RETURN"?"text-green-600":"text-orange-600"}`,children:[p.type==="PURCHASE"||p.type==="RETURN"?"+":"-",p.quantity]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Balance: ",a.jsx("span",{className:"font-semibold text-gray-700",children:p.balanceAfter})]})]})]})},p.id))})}),a.jsx("div",{className:"border-t p-4 bg-gray-50 flex justify-end",children:a.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})}):null},_de=()=>{const[e,t]=P.useState("materials"),[r,n]=P.useState([]),[s,i]=P.useState([]),[o,c]=P.useState([]),[u,d]=P.useState(!1),[h,p]=P.useState(""),[v,x]=P.useState(!1),[w,j]=P.useState(null),[N,A]=P.useState(!1),[k,E]=P.useState({name:"",parentId:"",description:""}),[_,O]=P.useState(!1),[B,F]=P.useState({sku:"",name:"",description:"",categoryId:"",unit:"PCS",minStockLevel:5,unitCost:0,sellingPrice:0}),[U,L]=P.useState(!1),[K,z]=P.useState({materialId:"",batchNumber:"",quantityReceived:0,unitCost:0,sellingPrice:0});P.useEffect(()=>{if(!localStorage.getItem("authToken")){console.warn("No token found, redirecting to login"),window.location.href="/login";return}Q(),G()},[]);const q=()=>{const ie=localStorage.getItem("authToken");return ie?{Authorization:`Bearer ${ie}`,"Content-Type":"application/json"}:null},Q=async()=>{try{const ie=q();if(!ie){window.location.href="/login";return}const V=await fetch("/api/materials/categories",{headers:ie});if(V.status===401||V.status===403){console.error("Authentication failed - invalid or expired token"),alert("Your session has expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(V.ok){const se=await V.json();n(se)}else console.error("Failed to fetch categories:",V.status)}catch(ie){console.error("Failed to fetch categories:",ie)}},G=async()=>{try{d(!0);const ie=q();if(!ie){window.location.href="/login";return}const V=await fetch("/api/materials",{headers:ie});if(V.status===401||V.status===403){console.error("Authentication failed - invalid or expired token"),alert("Your session has expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(V.ok){const se=await V.json();i(se)}else console.error("Failed to fetch materials:",V.status)}catch(ie){console.error("Failed to fetch materials:",ie)}finally{d(!1)}},H=async ie=>{try{const V=ie?`/api/materials/${ie}/stock`:"/api/materials/stock/all",se=await fetch(V,{headers:q()});if(se.ok){const ne=await se.json();c(ne)}}catch(V){console.error("Failed to fetch stock:",V)}},ue=async ie=>{ie.preventDefault();try{const V=await fetch("/api/materials/categories",{method:"POST",headers:q(),body:JSON.stringify(k)});if(V.status===401||V.status===403){alert("Session expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(V.ok)alert("Category added successfully!"),A(!1),E({name:"",parentId:"",description:""}),Q();else{const se=await V.json();alert(se.error||"Failed to add category")}}catch{alert("Failed to add category")}},ye=async ie=>{ie.preventDefault();try{const V=await fetch("/api/materials",{method:"POST",headers:q(),body:JSON.stringify(B)});if(V.status===401||V.status===403){alert("Session expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(V.ok)alert("Material added successfully!"),O(!1),F({sku:"",name:"",description:"",categoryId:"",unit:"PCS",minStockLevel:5,unitCost:0,sellingPrice:0}),G();else{const se=await V.json();alert(se.error||"Failed to add material")}}catch{alert("Failed to add material")}},de=async ie=>{ie.preventDefault();try{const V=await fetch("/api/materials/stock",{method:"POST",headers:q(),body:JSON.stringify(K)});if(V.ok)alert("Stock added successfully!"),L(!1),z({materialId:"",batchNumber:"",quantityReceived:0,unitCost:0,sellingPrice:0}),G(),H();else{const se=await V.json();alert(se.error||"Failed to add stock")}}catch{alert("Failed to add stock")}},we=(ie,V=0)=>ie.map(se=>a.jsxs("div",{style:{marginLeft:`${V*20}px`},className:"border-l-2 border-gray-200 pl-4 my-2",children:[a.jsx("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ty,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:se.name}),a.jsx("p",{className:"text-sm text-gray-500",children:se.description}),se._count&&a.jsxs("span",{className:"text-xs text-gray-400",children:[se._count.materials," materials"]})]})]})}),se.children&&se.children.length>0&&we(se.children,V+1)]},se.id)),Ee=s.filter(ie=>ie.name.toLowerCase().includes(h.toLowerCase())||ie.sku.toLowerCase().includes(h.toLowerCase()));return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Material Management"})}),a.jsxs("div",{className:"flex gap-4 mb-6 border-b",children:[a.jsxs("button",{onClick:()=>t("categories"),className:`px-6 py-3 font-semibold transition ${e==="categories"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(ty,{className:"w-5 h-5 inline mr-2"}),"Categories"]}),a.jsxs("button",{onClick:()=>t("materials"),className:`px-6 py-3 font-semibold transition ${e==="materials"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(Wu,{className:"w-5 h-5 inline mr-2"}),"Materials"]}),a.jsxs("button",{onClick:()=>{t("stock"),H()},className:`px-6 py-3 font-semibold transition ${e==="stock"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[a.jsx(vae,{className:"w-5 h-5 inline mr-2"}),"Stock Batches"]})]}),e==="categories"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Material Categories"}),a.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[a.jsx(vp,{className:"w-5 h-5"}),"Add Category"]})]}),N&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"New Category"}),a.jsx("button",{onClick:()=>A(!1),children:a.jsx(ci,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category Name *"}),a.jsx("input",{type:"text",required:!0,value:k.name,onChange:ie=>E({...k,name:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Boxes, Tape, Bubble Wrap"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parent Category"}),a.jsxs("select",{value:k.parentId,onChange:ie=>E({...k,parentId:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"-- Root Category --"}),r.map(ie=>a.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),a.jsx("textarea",{value:k.description,onChange:ie=>E({...k,description:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:3})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[a.jsx(ju,{className:"w-4 h-4 inline mr-2"}),"Save Category"]}),a.jsx("button",{type:"button",onClick:()=>A(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ty,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{children:"No categories yet. Add your first category to organize materials."})]}):we(r)})]}),e==="materials"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("div",{className:"flex-1 mr-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(tse,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search materials...",value:h,onChange:ie=>p(ie.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})}),a.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[a.jsx(vp,{className:"w-5 h-5"}),"Add Material"]})]}),_&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"New Material"}),a.jsx("button",{onClick:()=>O(!1),children:a.jsx(ci,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:ye,className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU *"}),a.jsx("input",{type:"text",required:!0,value:B.sku,onChange:ie=>F({...B,sku:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"MAT-001"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material Name *"}),a.jsx("input",{type:"text",required:!0,value:B.name,onChange:ie=>F({...B,name:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Large Moving Box"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),a.jsx("textarea",{value:B.description,onChange:ie=>F({...B,description:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Optional description...",rows:2})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category *"}),a.jsxs("select",{required:!0,value:B.categoryId,onChange:ie=>F({...B,categoryId:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"-- Select Category --"}),r.map(ie=>a.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit"}),a.jsxs("select",{value:B.unit,onChange:ie=>F({...B,unit:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"PCS",children:"Pieces"}),a.jsx("option",{value:"ROLL",children:"Roll"}),a.jsx("option",{value:"BOX",children:"Box"}),a.jsx("option",{value:"KG",children:"Kilogram"}),a.jsx("option",{value:"METER",children:"Meter"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Min Stock Level *"}),a.jsx("input",{type:"number",required:!0,min:"0",value:B.minStockLevel,onChange:ie=>F({...B,minStockLevel:ie.target.value===""?0:parseInt(ie.target.value)||0}),className:"w-full border rounded-lg px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit Cost (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:B.unitCost,onChange:ie=>F({...B,unitCost:ie.target.value===""?0:parseFloat(ie.target.value)||0}),className:"w-full border rounded-lg px-3 py-2"})]}),a.jsx("div",{className:"col-span-2",children:a.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 w-full",children:[a.jsx(ju,{className:"w-4 h-4 inline mr-2"}),"Save Material"]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):Ee.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No materials found. Add your first material to get started."})}):Ee.map(ie=>{var V;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:ie.sku}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ie.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:((V=ie.materialCategory)==null?void 0:V.name)||"Uncategorized"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("span",{className:`font-bold ${ie.totalQuantity<ie.minStockLevel?"text-red-600":"text-green-600"}`,children:ie.totalQuantity}),ie.totalQuantity<ie.minStockLevel&&a.jsx(kae,{className:"w-4 h-4 inline ml-2 text-red-600"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ie.unit}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${ie.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:ie.isActive?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>{j(ie),x(!0)},className:"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[a.jsx(zae,{className:"w-4 h-4"}),"History"]})})]},ie.id)})})]})})]}),e==="stock"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Stock Management"}),a.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[a.jsx(vp,{className:"w-5 h-5"}),"Add Stock"]})]}),U&&a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Add Stock Batch"}),a.jsx("button",{onClick:()=>L(!1),children:a.jsx(ci,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:de,className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material *"}),a.jsxs("select",{required:!0,value:K.materialId,onChange:ie=>z({...K,materialId:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"-- Select Material --"}),s.map(ie=>a.jsxs("option",{value:ie.id,children:[ie.sku," - ",ie.name]},ie.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Batch Number *"}),a.jsx("input",{type:"text",required:!0,value:K.batchNumber,onChange:ie=>z({...K,batchNumber:ie.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"BATCH-001"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity *"}),a.jsx("input",{type:"number",required:!0,min:"1",value:K.quantityReceived,onChange:ie=>z({...K,quantityReceived:ie.target.value===""?0:parseInt(ie.target.value)||0}),className:"w-full border rounded-lg px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit Cost (KWD)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:K.unitCost,onChange:ie=>z({...K,unitCost:ie.target.value===""?0:parseFloat(ie.target.value)||0}),className:"w-full border rounded-lg px-3 py-2"})]}),a.jsx("div",{className:"col-span-2",children:a.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 w-full",children:[a.jsx(ju,{className:"w-4 h-4 inline mr-2"}),"Add Stock"]})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch #"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Received"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Remaining"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Cost"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No stock batches found."})}):o.map(ie=>{var V,se;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:ie.batchNumber}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:((V=ie.material)==null?void 0:V.name)||((se=s.find(ne=>ne.id===ie.materialId))==null?void 0:se.name)||"Unknown"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ie.quantityPurchased||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:ie.quantityRemaining===0?"text-red-600":"text-green-600",children:ie.quantityRemaining})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[ie.unitCost.toFixed(2)," KWD"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(ie.purchaseDate).toLocaleDateString()})]},ie.id)})})]})})]}),a.jsx(Tde,{isOpen:v,onClose:()=>x(!1),materialId:(w==null?void 0:w.id)||"",materialName:(w==null?void 0:w.name)||""})]})},Ode=()=>{const[e,t]=P.useState("overview"),[r,n]=P.useState(!1),[s,i]=P.useState({start:"",end:""}),[o,c]=P.useState(null),[u,d]=P.useState([]),[h,p]=P.useState(null),[v,x]=P.useState(null),[w,j]=P.useState([]),[N,A]=P.useState(null);P.useEffect(()=>{k()},[e,s]);const k=async()=>{n(!0);const B={Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"};try{switch(e){case"overview":case"stock":const U=await(await fetch("/api/materials/reports/stock-summary",{headers:B})).json();c(U);break;case"low-stock":const K=await(await fetch("/api/materials/reports/low-stock",{headers:B})).json();d(K.lowStockAlerts||[]);break;case"consumption":const z=`/api/materials/reports/consumption?startDate=${s.start}&endDate=${s.end}`,Q=await(await fetch(z,{headers:B})).json();p(Q);break;case"purchases":const G=`/api/materials/reports/purchase-history?startDate=${s.start}&endDate=${s.end}`,ue=await(await fetch(G,{headers:B})).json();x(ue);break;case"vendors":const de=await(await fetch("/api/materials/reports/vendor-performance",{headers:B})).json();j(de.vendors||[]);break;case"valuation":const Ee=await(await fetch("/api/materials/reports/valuation",{headers:B})).json();A(Ee);break}}catch(F){console.error("Failed to load report:",F)}finally{n(!1)}},E=(O,B)=>{const F=[Object.keys(O[0]).join(","),...O.map(z=>Object.values(z).join(","))].join(`
`),U=new Blob([F],{type:"text/csv"}),L=window.URL.createObjectURL(U),K=document.createElement("a");K.href=L,K.download=`${B}-${new Date().toISOString().split("T")[0]}.csv`,K.click()},_=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6"];return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Material Reports & Analytics"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",value:s.start,onChange:O=>i({...s,start:O.target.value}),className:"border rounded px-3 py-2"}),a.jsx("input",{type:"date",value:s.end,onChange:O=>i({...s,end:O.target.value}),className:"border rounded px-3 py-2"}),a.jsxs("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[a.jsx(Fae,{className:"w-4 h-4"}),"Apply Filter"]})]})]}),a.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:Rb},{id:"stock",label:"Stock Summary",icon:Wu},{id:"low-stock",label:"Low Stock Alerts",icon:Hg},{id:"consumption",label:"Consumption",icon:Lb},{id:"purchases",label:"Purchase History",icon:ase},{id:"vendors",label:"Vendor Performance",icon:Vg},{id:"valuation",label:"Stock Valuation",icon:jC}].map(O=>a.jsxs("button",{onClick:()=>t(O.id),className:`flex items-center gap-2 px-4 py-2 rounded whitespace-nowrap ${e===O.id?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[a.jsx(O.icon,{className:"w-4 h-4"}),O.label]},O.id))}),r?a.jsx("div",{className:"text-center py-12",children:"Loading report data..."}):a.jsxs(a.Fragment,{children:[e==="overview"&&o&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Total Materials"}),a.jsx("p",{className:"text-2xl font-bold",children:o.totals.totalMaterials})]}),a.jsx(Wu,{className:"w-10 h-10 text-blue-600"})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Low Stock Items"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.totals.lowStockItems})]}),a.jsx(Hg,{className:"w-10 h-10 text-orange-600"})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Out of Stock"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.totals.outOfStockItems})]}),a.jsx(Lb,{className:"w-10 h-10 text-red-600"})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Total Value"}),a.jsxs("p",{className:"text-2xl font-bold",children:[o.totals.totalValue.toFixed(2)," KWD"]})]}),a.jsx(jC,{className:"w-10 h-10 text-green-600"})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stock by Category"}),a.jsx(Yv,{width:"100%",height:300,children:a.jsxs(iO,{children:[a.jsx(n3,{data:o.summary.reduce((O,B)=>{const F=O.find(U=>U.category===B.category);return F?F.value+=B.totalQuantity:O.push({category:B.category,value:B.totalQuantity}),O},[]),dataKey:"value",nameKey:"category",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:o.summary.map((O,B)=>a.jsx(Rf,{fill:_[B%_.length]},`cell-${B}`))}),a.jsx(vb,{}),a.jsx(af,{})]})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stock Value by Material"}),a.jsx(Yv,{width:"100%",height:300,children:a.jsxs(Bre,{data:o.summary.slice(0,10),children:[a.jsx(W_,{strokeDasharray:"3 3"}),a.jsx(q_,{dataKey:"sku"}),a.jsx(H_,{}),a.jsx(vb,{}),a.jsx(af,{}),a.jsx(L_,{dataKey:"totalValue",fill:"#4F46E5"})]})})]})]})]}),e==="stock"&&o&&a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsxs("div",{className:"p-4 flex justify-between items-center border-b",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Stock Summary Report"}),a.jsxs("button",{onClick:()=>E(o.summary,"stock-summary"),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:[a.jsx(Ex,{className:"w-4 h-4"}),"Export CSV"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Min Level"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Value (KWD)"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.summary.map(O=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.sku}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.category}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.totalQuantity," ",O.unit]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.minStockLevel}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${O.stockStatus==="ADEQUATE"?"bg-green-100 text-green-800":O.stockStatus==="LOW"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:O.stockStatus})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.totalValue.toFixed(2)," KWD"]})]},O.id))})]})})]}),e==="low-stock"&&a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("h2",{className:"text-xl font-bold text-red-600",children:["Low Stock Alerts (",u.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Current Stock"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Min Stock"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shortfall"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Suggested Reorder"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(O=>a.jsxs("tr",{className:"bg-red-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.sku}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-bold",children:[O.currentStock," ",O.unit]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.minStock}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:O.shortfall}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:[O.suggestedReorderQty," ",O.unit]})]},O.id))})]})})]}),e==="consumption"&&h&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Material Consumption Report"}),a.jsxs("p",{className:"text-gray-600",children:["Total Usage Records: ",h.totalRecords]})]}),e==="purchases"&&v&&a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Purchase History"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"border p-4 rounded",children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Total Purchases"}),a.jsx("p",{className:"text-2xl font-bold",children:v.summary.totalPurchases})]}),a.jsxs("div",{className:"border p-4 rounded",children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Total Quantity"}),a.jsx("p",{className:"text-2xl font-bold",children:v.summary.totalQuantity})]}),a.jsxs("div",{className:"border p-4 rounded",children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Total Amount"}),a.jsxs("p",{className:"text-2xl font-bold",children:[v.summary.totalAmount.toFixed(2)," KWD"]})]})]})]}),e==="vendors"&&w.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-xl font-bold",children:"Vendor Performance Report"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vendor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rating"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Purchases"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Cost"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(O=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:["⭐ ",O.rating.toFixed(1)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.totalPurchases}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.totalAmount.toFixed(2)," KWD"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.avgUnitCost.toFixed(2)," KWD"]})]},O.id))})]})})]}),e==="valuation"&&N&&a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold",children:["Stock Valuation Report (",N.valuationMethod,")"]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-gray-500 text-sm",children:"Total Inventory Value"}),a.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[N.totalValue.toFixed(2)," KWD"]})]})]})})]})]})},Rde=()=>{const[e,t]=P.useState([]),[r,n]=P.useState(null),[s,i]=P.useState(!1),[o,c]=P.useState(null),[u,d]=P.useState({startDate:"",endDate:"",materialId:""});P.useEffect(()=>{h()},[]);const h=async()=>{i(!0);try{const x=new URLSearchParams;u.startDate&&x.append("startDate",u.startDate),u.endDate&&x.append("endDate",u.endDate),u.materialId&&x.append("materialId",u.materialId);const j=await(await fetch(`/api/reports/damages?${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();t(j.damages),n(j.summary)}catch(x){console.error("Failed to load damage report:",x)}finally{i(!1)}},p=()=>{window.print()},v=()=>{const x=["Date","Job Code","Material","SKU","Quantity","Reason","Value","Recorded By"],w=e.map(E=>[new Date(E.recordedAt).toLocaleDateString(),E.job.jobCode,E.material.name,E.material.sku,E.quantity,E.reason,E.estimatedValue.toFixed(2),E.recordedBy.name]),j=[x,...w].map(E=>E.join(",")).join(`
`),N=new Blob([j],{type:"text/csv"}),A=window.URL.createObjectURL(N),k=document.createElement("a");k.href=A,k.download=`damage-report-${new Date().toISOString().split("T")[0]}.csv`,k.click()};return a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 print:mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(Hg,{className:"w-8 h-8 text-red-600"}),"Damage Report"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Complete record of damaged materials with photos and job details"})]}),a.jsxs("div",{className:"flex gap-2 print:hidden",children:[a.jsxs("button",{onClick:p,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[a.jsx(FO,{className:"w-4 h-4"}),"Print"]}),a.jsxs("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[a.jsx(Ex,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),r&&a.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6 print:mb-4",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-red-700 font-medium mb-1",children:"Total Damaged Items"}),a.jsx("p",{className:"text-3xl font-bold text-red-600",children:r.totalItems})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-orange-700 font-medium mb-1",children:"Estimated Value Loss"}),a.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[r.totalValue.toFixed(2)," KWD"]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-yellow-700 font-medium mb-1",children:"Most Damaged"}),a.jsx("p",{className:"text-lg font-bold text-yellow-600",children:r.mostDamagedMaterial})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"Recent Damage"}),a.jsx("p",{className:"text-lg font-bold text-blue-600",children:new Date(r.recentDamageDate).toLocaleDateString()})]})]}),a.jsx("div",{className:"bg-white border rounded-lg p-4 mb-6 print:hidden",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:u.startDate,onChange:x=>d({...u,startDate:x.target.value}),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:u.endDate,onChange:x=>d({...u,endDate:x.target.value}),className:"w-full border rounded px-3 py-2"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:h,className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Apply Filters"})})]})}),a.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading damage records..."})]}):e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Hg,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No damage records found"})]}):a.jsx("div",{className:"divide-y",children:e.map(x=>a.jsx("div",{className:"p-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Wu,{className:"w-5 h-5 text-red-600"}),x.material.name]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",x.material.sku]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[x.quantity," ",x.material.unit]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[x.estimatedValue.toFixed(2)," KWD"]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-3",children:[a.jsx("p",{className:"font-semibold text-blue-900 mb-1",children:"Job Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Job Code:"}),a.jsx("span",{className:"ml-2 font-medium text-blue-700",children:x.job.jobCode})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Title:"}),a.jsx("span",{className:"ml-2 font-medium",children:x.job.jobTitle})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(BO,{className:"w-3 h-3 inline mr-1"}),a.jsx("span",{className:"text-gray-700",children:x.job.jobAddress})]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Damage Reason:"}),a.jsx("p",{className:"text-gray-800 bg-yellow-50 border border-yellow-200 rounded p-2",children:x.reason})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(y3,{className:"w-4 h-4"}),new Date(x.recordedAt).toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Rae,{className:"w-4 h-4"}),"Recorded by: ",x.recordedBy.name]})]})]}),a.jsxs("div",{className:"w-64",children:[a.jsxs("p",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(Sx,{className:"w-4 h-4"}),"Damage Photos (",x.photoUrls.length,")"]}),x.photoUrls.length>0?a.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.photoUrls.map((w,j)=>a.jsx("div",{className:"aspect-square border rounded overflow-hidden cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>c(w),children:a.jsx("img",{src:w,alt:`Damage ${j+1}`,className:"w-full h-full object-cover"})},j))}):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No photos available"})]})]})},x.id))})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 print:hidden",onClick:()=>c(null),children:a.jsx("div",{className:"max-w-4xl max-h-[90vh] p-4",children:a.jsx("img",{src:o,alt:"Damage",className:"max-w-full max-h-full object-contain"})})}),a.jsx("style",{children:`
        @media print {
          .print\\:hidden {
            display: none !important;
          }
          .print\\:mb-4 {
            margin-bottom: 1rem !important;
          }
        }
      `})]})},Dde=P.createContext(void 0),Lde=({children:e})=>{const[t,r]=P.useState([]),[n,s]=P.useState(!0),i=async()=>{try{const j=localStorage.getItem("authToken");if(!j){r([]),s(!1);return}const N=await Br.get("/api/permissions/my-permissions",{headers:{Authorization:`Bearer ${j}`}});N.data.success&&r(N.data.data.permissions)}catch(j){console.error("Failed to fetch permissions:",j),r([])}finally{s(!1)}};P.useEffect(()=>{i()},[]);const o=(j,N)=>t.some(A=>A.resource===j&&A.action===N),c=j=>o(j,"VIEW"),u=j=>o(j,"CREATE"),d=j=>o(j,"EDIT"),h=j=>o(j,"DELETE"),p=j=>o(j,"APPROVE"),v=j=>o(j,"EXPORT"),x=j=>o(j,"MANAGE"),w=async()=>{s(!0),await i()};return a.jsx(Dde.Provider,{value:{permissions:t,loading:n,hasPermission:o,canView:c,canCreate:u,canEdit:d,canDelete:h,canApprove:p,canExport:v,canManage:x,refreshPermissions:w},children:e})},ca=({children:e,allowedRoles:t=[],redirectTo:r="/scanner"})=>{const n=localStorage.getItem("user");if(!n)return a.jsx(Md,{to:"/login",replace:!0});try{const i=JSON.parse(n).role;return t.length===0?a.jsx(a.Fragment,{children:e}):t.includes(i)?a.jsx(a.Fragment,{children:e}):a.jsx(Md,{to:r,replace:!0})}catch{return localStorage.removeItem("authToken"),localStorage.removeItem("user"),a.jsx(Md,{to:"/login",replace:!0})}};function Mde(){const[e,t]=P.useState(!1),[r,n]=P.useState(!0);return P.useEffect(()=>{(()=>{const i=oO(),o=localStorage.getItem("user");if(i&&o)try{JSON.parse(o),t(!0)}catch{localStorage.removeItem("authToken"),localStorage.removeItem("user"),t(!1)}else t(!1);n(!1)})()},[]),r?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):a.jsx(Lde,{children:a.jsx(kB,{children:a.jsxs(wB,{children:[a.jsx(Kr,{path:"/login",element:a.jsx(uie,{})}),a.jsxs(Kr,{path:"/",element:e?a.jsx(ZF,{}):a.jsx(Md,{to:"/login",replace:!0}),children:[a.jsx(Kr,{index:!0,element:a.jsx(Md,{to:"/dashboard",replace:!0})}),a.jsx(Kr,{path:"dashboard",element:a.jsx(tne,{})}),a.jsx(Kr,{path:"shipments",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(oae,{})})}),a.jsx(Kr,{path:"racks",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(uae,{})})}),a.jsx(Kr,{path:"materials",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(_de,{})})}),a.jsx(Kr,{path:"material-reports",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(Ode,{})})}),a.jsx(Kr,{path:"damage-report",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(Rde,{})})}),a.jsx(Kr,{path:"moving-jobs",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(Nse,{})})}),a.jsx(Kr,{path:"jobs-management",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(lO,{})})}),a.jsx(Kr,{path:"materials-management",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(Ede,{})})}),a.jsx(Kr,{path:"job-reports",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(kde,{})})}),a.jsx(Kr,{path:"plugin-system",element:a.jsx(ca,{allowedRoles:["ADMIN"],children:a.jsx(Pde,{})})}),a.jsx(Kr,{path:"approvals",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(Ide,{})})}),a.jsx(Kr,{path:"invoices",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(die,{})})}),a.jsx(Kr,{path:"invoices/:id",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(qce,{})})}),a.jsx(Kr,{path:"expenses",element:a.jsx(ca,{allowedRoles:["ADMIN","MANAGER"],children:a.jsx(Gce,{})})}),a.jsx(Kr,{path:"settings",element:a.jsx(ca,{allowedRoles:["ADMIN"],children:a.jsx(Mse,{})})}),a.jsx(Kr,{path:"settings/templates",element:a.jsx(ca,{allowedRoles:["ADMIN"],children:a.jsx(Kce,{})})}),a.jsx(Kr,{path:"admin/roles",element:a.jsx(ca,{allowedRoles:["ADMIN"],children:a.jsx(Sde,{})})}),a.jsx(Kr,{path:"scanner",element:a.jsx(cie,{})}),a.jsx(Kr,{path:"profile",element:a.jsx(jde,{})}),a.jsx(Kr,{path:"my-jobs",element:a.jsx(ca,{allowedRoles:["WORKER"],children:a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"My Jobs"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Your assigned moving jobs will appear here"})]})})}),a.jsx(Kr,{path:"my-tasks",element:a.jsx(ca,{allowedRoles:["WORKER"],children:a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"My Tasks"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Your current tasks and assignments"})]})})})]}),a.jsx(Kr,{path:"*",element:a.jsx(Md,{to:"/scanner",replace:!0})})]})})})}const Bde=_y.createRoot(document.getElementById("root"));Bde.render(a.jsx(Un.StrictMode,{children:a.jsx(Mde,{})}));export{Mr as _,Hf as c,Wo as g};
