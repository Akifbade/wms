var oL=Object.defineProperty;var lL=(e,t,r)=>t in e?oL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _r=(e,t,r)=>lL(e,typeof t!="symbol"?t+"":t,r);function kE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var PE={exports:{}},c1={},TE={exports:{}},xr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0=Symbol.for("react.element"),cL=Symbol.for("react.portal"),dL=Symbol.for("react.fragment"),uL=Symbol.for("react.strict_mode"),hL=Symbol.for("react.profiler"),fL=Symbol.for("react.provider"),mL=Symbol.for("react.context"),pL=Symbol.for("react.forward_ref"),gL=Symbol.for("react.suspense"),xL=Symbol.for("react.memo"),yL=Symbol.for("react.lazy"),uj=Symbol.iterator;function bL(e){return e===null||typeof e!="object"?null:(e=uj&&e[uj]||e["@@iterator"],typeof e=="function"?e:null)}var IE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_E=Object.assign,OE={};function wh(e,t,r){this.props=e,this.context=t,this.refs=OE,this.updater=r||IE}wh.prototype.isReactComponent={};wh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RE(){}RE.prototype=wh.prototype;function dw(e,t,r){this.props=e,this.context=t,this.refs=OE,this.updater=r||IE}var uw=dw.prototype=new RE;uw.constructor=dw;_E(uw,wh.prototype);uw.isPureReactComponent=!0;var hj=Array.isArray,DE=Object.prototype.hasOwnProperty,hw={current:null},LE={key:!0,ref:!0,__self:!0,__source:!0};function ME(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)DE.call(t,n)&&!LE.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:w0,type:e,key:i,ref:o,props:a,_owner:hw.current}}function vL(e,t){return{$$typeof:w0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fw(e){return typeof e=="object"&&e!==null&&e.$$typeof===w0}function wL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fj=/\/+/g;function ay(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wL(""+e.key):t.toString(36)}function op(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case w0:case cL:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+ay(o,0):n,hj(a)?(r="",e!=null&&(r=e.replace(fj,"$&/")+"/"),op(a,t,r,"",function(u){return u})):a!=null&&(fw(a)&&(a=vL(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(fj,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",hj(e))for(var c=0;c<e.length;c++){i=e[c];var d=n+ay(i,c);o+=op(i,t,r,d,a)}else if(d=bL(e),typeof d=="function")for(e=d.call(e),c=0;!(i=e.next()).done;)i=i.value,d=n+ay(i,c++),o+=op(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function pm(e,t,r){if(e==null)return e;var n=[],a=0;return op(e,n,"","",function(i){return t.call(r,i,a++)}),n}function NL(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wa={current:null},lp={transition:null},jL={ReactCurrentDispatcher:wa,ReactCurrentBatchConfig:lp,ReactCurrentOwner:hw};function BE(){throw Error("act(...) is not supported in production builds of React.")}xr.Children={map:pm,forEach:function(e,t,r){pm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return pm(e,function(){t++}),t},toArray:function(e){return pm(e,function(t){return t})||[]},only:function(e){if(!fw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xr.Component=wh;xr.Fragment=dL;xr.Profiler=hL;xr.PureComponent=dw;xr.StrictMode=uL;xr.Suspense=gL;xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jL;xr.act=BE;xr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_E({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=hw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)DE.call(t,d)&&!LE.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:w0,type:e.type,key:a,ref:i,props:n,_owner:o}};xr.createContext=function(e){return e={$$typeof:mL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fL,_context:e},e.Consumer=e};xr.createElement=ME;xr.createFactory=function(e){var t=ME.bind(null,e);return t.type=e,t};xr.createRef=function(){return{current:null}};xr.forwardRef=function(e){return{$$typeof:pL,render:e}};xr.isValidElement=fw;xr.lazy=function(e){return{$$typeof:yL,_payload:{_status:-1,_result:e},_init:NL}};xr.memo=function(e,t){return{$$typeof:xL,type:e,compare:t===void 0?null:t}};xr.startTransition=function(e){var t=lp.transition;lp.transition={};try{e()}finally{lp.transition=t}};xr.unstable_act=BE;xr.useCallback=function(e,t){return wa.current.useCallback(e,t)};xr.useContext=function(e){return wa.current.useContext(e)};xr.useDebugValue=function(){};xr.useDeferredValue=function(e){return wa.current.useDeferredValue(e)};xr.useEffect=function(e,t){return wa.current.useEffect(e,t)};xr.useId=function(){return wa.current.useId()};xr.useImperativeHandle=function(e,t,r){return wa.current.useImperativeHandle(e,t,r)};xr.useInsertionEffect=function(e,t){return wa.current.useInsertionEffect(e,t)};xr.useLayoutEffect=function(e,t){return wa.current.useLayoutEffect(e,t)};xr.useMemo=function(e,t){return wa.current.useMemo(e,t)};xr.useReducer=function(e,t,r){return wa.current.useReducer(e,t,r)};xr.useRef=function(e){return wa.current.useRef(e)};xr.useState=function(e){return wa.current.useState(e)};xr.useSyncExternalStore=function(e,t,r){return wa.current.useSyncExternalStore(e,t,r)};xr.useTransition=function(){return wa.current.useTransition()};xr.version="18.3.1";TE.exports=xr;var A=TE.exports;const $n=Vo(A),FE=kE({__proto__:null,default:$n},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CL=A,AL=Symbol.for("react.element"),SL=Symbol.for("react.fragment"),EL=Object.prototype.hasOwnProperty,kL=CL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PL={key:!0,ref:!0,__self:!0,__source:!0};function UE(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)EL.call(t,n)&&!PL.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:AL,type:e,key:i,ref:o,props:a,_owner:kL.current}}c1.Fragment=SL;c1.jsx=UE;c1.jsxs=UE;PE.exports=c1;var s=PE.exports,M2={},$E={exports:{}},fi={},zE={exports:{}},WE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(oe,ye){var we=oe.length;oe.push(ye);e:for(;0<we;){var te=we-1>>>1,G=oe[te];if(0<a(G,ye))oe[te]=ye,oe[we]=G,we=te;else break e}}function r(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var ye=oe[0],we=oe.pop();if(we!==ye){oe[0]=we;e:for(var te=0,G=oe.length,Q=G>>>1;te<Q;){var le=2*(te+1)-1,ve=oe[le],xe=le+1,ke=oe[xe];if(0>a(ve,we))xe<G&&0>a(ke,ve)?(oe[te]=ke,oe[xe]=we,te=xe):(oe[te]=ve,oe[le]=we,te=le);else if(xe<G&&0>a(ke,we))oe[te]=ke,oe[xe]=we,te=xe;else break e}}return ye}function a(oe,ye){var we=oe.sortIndex-ye.sortIndex;return we!==0?we:oe.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],u=[],f=1,p=null,b=3,x=!1,N=!1,j=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(oe){for(var ye=r(u);ye!==null;){if(ye.callback===null)n(u);else if(ye.startTime<=oe)n(u),ye.sortIndex=ye.expirationTime,t(d,ye);else break;ye=r(u)}}function _(oe){if(j=!1,k(oe),!N)if(r(d)!==null)N=!0,me(O);else{var ye=r(u);ye!==null&&se(_,ye.startTime-oe)}}function O(oe,ye){N=!1,j&&(j=!1,C(U),U=-1),x=!0;var we=b;try{for(k(ye),p=r(d);p!==null&&(!(p.expirationTime>ye)||oe&&!M());){var te=p.callback;if(typeof te=="function"){p.callback=null,b=p.priorityLevel;var G=te(p.expirationTime<=ye);ye=e.unstable_now(),typeof G=="function"?p.callback=G:p===r(d)&&n(d),k(ye)}else n(d);p=r(d)}if(p!==null)var Q=!0;else{var le=r(u);le!==null&&se(_,le.startTime-ye),Q=!1}return Q}finally{p=null,b=we,x=!1}}var $=!1,F=null,U=-1,R=5,z=-1;function M(){return!(e.unstable_now()-z<R)}function W(){if(F!==null){var oe=e.unstable_now();z=oe;var ye=!0;try{ye=F(!0,oe)}finally{ye?J():($=!1,F=null)}}else $=!1}var J;if(typeof P=="function")J=function(){P(W)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,V=K.port2;K.port1.onmessage=W,J=function(){V.postMessage(null)}}else J=function(){w(W,0)};function me(oe){F=oe,$||($=!0,J())}function se(oe,ye){U=w(function(){oe(e.unstable_now())},ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){N||x||(N=!0,me(O))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(oe){switch(b){case 1:case 2:case 3:var ye=3;break;default:ye=b}var we=b;b=ye;try{return oe()}finally{b=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,ye){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var we=b;b=oe;try{return ye()}finally{b=we}},e.unstable_scheduleCallback=function(oe,ye,we){var te=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?te+we:te):we=te,oe){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=we+G,oe={id:f++,callback:ye,priorityLevel:oe,startTime:we,expirationTime:G,sortIndex:-1},we>te?(oe.sortIndex=we,t(u,oe),r(d)===null&&oe===r(u)&&(j?(C(U),U=-1):j=!0,se(_,we-te))):(oe.sortIndex=G,t(d,oe),N||x||(N=!0,me(O))),oe},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(oe){var ye=b;return function(){var we=b;b=ye;try{return oe.apply(this,arguments)}finally{b=we}}}})(WE);zE.exports=WE;var TL=zE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IL=A,ui=TL;function ft(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qE=new Set,Mf={};function Zd(e,t){Yu(e,t),Yu(e+"Capture",t)}function Yu(e,t){for(Mf[e]=t,e=0;e<t.length;e++)qE.add(t[e])}var Ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B2=Object.prototype.hasOwnProperty,_L=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mj={},pj={};function OL(e){return B2.call(pj,e)?!0:B2.call(mj,e)?!1:_L.test(e)?pj[e]=!0:(mj[e]=!0,!1)}function RL(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DL(e,t,r,n){if(t===null||typeof t>"u"||RL(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Na(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ws[e]=new Na(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ws[t]=new Na(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ws[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ws[e]=new Na(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ws[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ws[e]=new Na(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ws[e]=new Na(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ws[e]=new Na(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ws[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)});var mw=/[\-:]([a-z])/g;function pw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mw,pw);Ws[t]=new Na(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mw,pw);Ws[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mw,pw);Ws[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ws[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)});Ws.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ws[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)});function gw(e,t,r,n){var a=Ws.hasOwnProperty(t)?Ws[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DL(t,r,a,n)&&(r=null),n||a===null?OL(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Wl=IL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gm=Symbol.for("react.element"),yu=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),F2=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),VE=Symbol.for("react.context"),yw=Symbol.for("react.forward_ref"),U2=Symbol.for("react.suspense"),$2=Symbol.for("react.suspense_list"),bw=Symbol.for("react.memo"),uc=Symbol.for("react.lazy"),GE=Symbol.for("react.offscreen"),gj=Symbol.iterator;function Xh(e){return e===null||typeof e!="object"?null:(e=gj&&e[gj]||e["@@iterator"],typeof e=="function"?e:null)}var En=Object.assign,iy;function pf(e){if(iy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);iy=t&&t[1]||""}return`
`+iy+e}var oy=!1;function ly(e,t){if(!e||oy)return"";oy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{oy=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?pf(e):""}function LL(e){switch(e.tag){case 5:return pf(e.type);case 16:return pf("Lazy");case 13:return pf("Suspense");case 19:return pf("SuspenseList");case 0:case 2:case 15:return e=ly(e.type,!1),e;case 11:return e=ly(e.type.render,!1),e;case 1:return e=ly(e.type,!0),e;default:return""}}function z2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bu:return"Fragment";case yu:return"Portal";case F2:return"Profiler";case xw:return"StrictMode";case U2:return"Suspense";case $2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case VE:return(e.displayName||"Context")+".Consumer";case HE:return(e._context.displayName||"Context")+".Provider";case yw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bw:return t=e.displayName||null,t!==null?t:z2(e.type)||"Memo";case uc:t=e._payload,e=e._init;try{return z2(e(t))}catch{}}return null}function ML(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z2(t);case 8:return t===xw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BL(e){var t=KE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xm(e){e._valueTracker||(e._valueTracker=BL(e))}function XE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=KE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function _p(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function W2(e,t){var r=t.checked;return En({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function xj(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Dc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function YE(e,t){t=t.checked,t!=null&&gw(e,"checked",t,!1)}function q2(e,t){YE(e,t);var r=Dc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H2(e,t.type,r):t.hasOwnProperty("defaultValue")&&H2(e,t.type,Dc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yj(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function H2(e,t,r){(t!=="number"||_p(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gf=Array.isArray;function Du(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Dc(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function V2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ft(91));return En({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ft(92));if(gf(r)){if(1<r.length)throw Error(ft(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Dc(r)}}function ZE(e,t){var r=Dc(t.value),n=Dc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function vj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function JE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?JE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ym,QE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ym=ym||document.createElement("div"),ym.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ym.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FL=["Webkit","ms","Moz","O"];Object.keys(Nf).forEach(function(e){FL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nf[t]=Nf[e]})});function e8(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Nf.hasOwnProperty(e)&&Nf[e]?(""+t).trim():t+"px"}function t8(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=e8(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var UL=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K2(e,t){if(t){if(UL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ft(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ft(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ft(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ft(62))}}function X2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y2=null;function vw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Z2=null,Lu=null,Mu=null;function wj(e){if(e=C0(e)){if(typeof Z2!="function")throw Error(ft(280));var t=e.stateNode;t&&(t=m1(t),Z2(e.stateNode,e.type,t))}}function r8(e){Lu?Mu?Mu.push(e):Mu=[e]:Lu=e}function n8(){if(Lu){var e=Lu,t=Mu;if(Mu=Lu=null,wj(e),t)for(e=0;e<t.length;e++)wj(t[e])}}function s8(e,t){return e(t)}function a8(){}var cy=!1;function i8(e,t,r){if(cy)return e(t,r);cy=!0;try{return s8(e,t,r)}finally{cy=!1,(Lu!==null||Mu!==null)&&(a8(),n8())}}function Ff(e,t){var r=e.stateNode;if(r===null)return null;var n=m1(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ft(231,t,typeof r));return r}var J2=!1;if(Ol)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){J2=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{J2=!1}function $L(e,t,r,n,a,i,o,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var jf=!1,Op=null,Rp=!1,Q2=null,zL={onError:function(e){jf=!0,Op=e}};function WL(e,t,r,n,a,i,o,c,d){jf=!1,Op=null,$L.apply(zL,arguments)}function qL(e,t,r,n,a,i,o,c,d){if(WL.apply(this,arguments),jf){if(jf){var u=Op;jf=!1,Op=null}else throw Error(ft(198));Rp||(Rp=!0,Q2=u)}}function Jd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function o8(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Nj(e){if(Jd(e)!==e)throw Error(ft(188))}function HL(e){var t=e.alternate;if(!t){if(t=Jd(e),t===null)throw Error(ft(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Nj(a),e;if(i===n)return Nj(a),t;i=i.sibling}throw Error(ft(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o)throw Error(ft(189))}}if(r.alternate!==n)throw Error(ft(190))}if(r.tag!==3)throw Error(ft(188));return r.stateNode.current===r?e:t}function l8(e){return e=HL(e),e!==null?c8(e):null}function c8(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c8(e);if(t!==null)return t;e=e.sibling}return null}var d8=ui.unstable_scheduleCallback,jj=ui.unstable_cancelCallback,VL=ui.unstable_shouldYield,GL=ui.unstable_requestPaint,zn=ui.unstable_now,KL=ui.unstable_getCurrentPriorityLevel,ww=ui.unstable_ImmediatePriority,u8=ui.unstable_UserBlockingPriority,Dp=ui.unstable_NormalPriority,XL=ui.unstable_LowPriority,h8=ui.unstable_IdlePriority,d1=null,Bo=null;function YL(e){if(Bo&&typeof Bo.onCommitFiberRoot=="function")try{Bo.onCommitFiberRoot(d1,e,void 0,(e.current.flags&128)===128)}catch{}}var mo=Math.clz32?Math.clz32:QL,ZL=Math.log,JL=Math.LN2;function QL(e){return e>>>=0,e===0?32:31-(ZL(e)/JL|0)|0}var bm=64,vm=4194304;function xf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lp(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?n=xf(c):(i&=o,i!==0&&(n=xf(i)))}else o=r&~a,o!==0?n=xf(o):i!==0&&(n=xf(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-mo(t),a=1<<r,n|=e[r],t&=~a;return n}function e9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t9(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-mo(i),c=1<<o,d=a[o];d===-1?(!(c&r)||c&n)&&(a[o]=e9(c,t)):d<=t&&(e.expiredLanes|=c),i&=~c}}function eb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function f8(){var e=bm;return bm<<=1,!(bm&4194240)&&(bm=64),e}function dy(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function N0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mo(t),e[t]=r}function r9(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-mo(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Nw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-mo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var $r=0;function m8(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var p8,jw,g8,x8,y8,tb=!1,wm=[],jc=null,Cc=null,Ac=null,Uf=new Map,$f=new Map,pc=[],n9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cj(e,t){switch(e){case"focusin":case"focusout":jc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Ac=null;break;case"pointerover":case"pointerout":Uf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(t.pointerId)}}function Zh(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=C0(t),t!==null&&jw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function s9(e,t,r,n,a){switch(t){case"focusin":return jc=Zh(jc,e,t,r,n,a),!0;case"dragenter":return Cc=Zh(Cc,e,t,r,n,a),!0;case"mouseover":return Ac=Zh(Ac,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Uf.set(i,Zh(Uf.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,$f.set(i,Zh($f.get(i)||null,e,t,r,n,a)),!0}return!1}function b8(e){var t=md(e.target);if(t!==null){var r=Jd(t);if(r!==null){if(t=r.tag,t===13){if(t=o8(r),t!==null){e.blockedOn=t,y8(e.priority,function(){g8(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Y2=n,r.target.dispatchEvent(n),Y2=null}else return t=C0(r),t!==null&&jw(t),e.blockedOn=r,!1;t.shift()}return!0}function Aj(e,t,r){cp(e)&&r.delete(t)}function a9(){tb=!1,jc!==null&&cp(jc)&&(jc=null),Cc!==null&&cp(Cc)&&(Cc=null),Ac!==null&&cp(Ac)&&(Ac=null),Uf.forEach(Aj),$f.forEach(Aj)}function Jh(e,t){e.blockedOn===t&&(e.blockedOn=null,tb||(tb=!0,ui.unstable_scheduleCallback(ui.unstable_NormalPriority,a9)))}function zf(e){function t(a){return Jh(a,e)}if(0<wm.length){Jh(wm[0],e);for(var r=1;r<wm.length;r++){var n=wm[r];n.blockedOn===e&&(n.blockedOn=null)}}for(jc!==null&&Jh(jc,e),Cc!==null&&Jh(Cc,e),Ac!==null&&Jh(Ac,e),Uf.forEach(t),$f.forEach(t),r=0;r<pc.length;r++)n=pc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<pc.length&&(r=pc[0],r.blockedOn===null);)b8(r),r.blockedOn===null&&pc.shift()}var Bu=Wl.ReactCurrentBatchConfig,Mp=!0;function i9(e,t,r,n){var a=$r,i=Bu.transition;Bu.transition=null;try{$r=1,Cw(e,t,r,n)}finally{$r=a,Bu.transition=i}}function o9(e,t,r,n){var a=$r,i=Bu.transition;Bu.transition=null;try{$r=4,Cw(e,t,r,n)}finally{$r=a,Bu.transition=i}}function Cw(e,t,r,n){if(Mp){var a=rb(e,t,r,n);if(a===null)vy(e,t,n,Bp,r),Cj(e,n);else if(s9(a,e,t,r,n))n.stopPropagation();else if(Cj(e,n),t&4&&-1<n9.indexOf(e)){for(;a!==null;){var i=C0(a);if(i!==null&&p8(i),i=rb(e,t,r,n),i===null&&vy(e,t,n,Bp,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else vy(e,t,n,null,r)}}var Bp=null;function rb(e,t,r,n){if(Bp=null,e=vw(n),e=md(e),e!==null)if(t=Jd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=o8(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bp=e,null}function v8(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KL()){case ww:return 1;case u8:return 4;case Dp:case XL:return 16;case h8:return 536870912;default:return 16}default:return 16}}var yc=null,Aw=null,dp=null;function w8(){if(dp)return dp;var e,t=Aw,r=t.length,n,a="value"in yc?yc.value:yc.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return dp=a.slice(e,1<n?1-n:void 0)}function up(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nm(){return!0}function Sj(){return!1}function mi(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nm:Sj,this.isPropagationStopped=Sj,this}return En(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nm)},persist:function(){},isPersistent:Nm}),t}var Nh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sw=mi(Nh),j0=En({},Nh,{view:0,detail:0}),l9=mi(j0),uy,hy,Qh,u1=En({},j0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ew,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qh&&(Qh&&e.type==="mousemove"?(uy=e.screenX-Qh.screenX,hy=e.screenY-Qh.screenY):hy=uy=0,Qh=e),uy)},movementY:function(e){return"movementY"in e?e.movementY:hy}}),Ej=mi(u1),c9=En({},u1,{dataTransfer:0}),d9=mi(c9),u9=En({},j0,{relatedTarget:0}),fy=mi(u9),h9=En({},Nh,{animationName:0,elapsedTime:0,pseudoElement:0}),f9=mi(h9),m9=En({},Nh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),p9=mi(m9),g9=En({},Nh,{data:0}),kj=mi(g9),x9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=b9[e])?!!t[e]:!1}function Ew(){return v9}var w9=En({},j0,{key:function(e){if(e.key){var t=x9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=up(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?y9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ew,charCode:function(e){return e.type==="keypress"?up(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?up(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),N9=mi(w9),j9=En({},u1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pj=mi(j9),C9=En({},j0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ew}),A9=mi(C9),S9=En({},Nh,{propertyName:0,elapsedTime:0,pseudoElement:0}),E9=mi(S9),k9=En({},u1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),P9=mi(k9),T9=[9,13,27,32],kw=Ol&&"CompositionEvent"in window,Cf=null;Ol&&"documentMode"in document&&(Cf=document.documentMode);var I9=Ol&&"TextEvent"in window&&!Cf,N8=Ol&&(!kw||Cf&&8<Cf&&11>=Cf),Tj=" ",Ij=!1;function j8(e,t){switch(e){case"keyup":return T9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vu=!1;function _9(e,t){switch(e){case"compositionend":return C8(t);case"keypress":return t.which!==32?null:(Ij=!0,Tj);case"textInput":return e=t.data,e===Tj&&Ij?null:e;default:return null}}function O9(e,t){if(vu)return e==="compositionend"||!kw&&j8(e,t)?(e=w8(),dp=Aw=yc=null,vu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return N8&&t.locale!=="ko"?null:t.data;default:return null}}var R9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _j(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!R9[e.type]:t==="textarea"}function A8(e,t,r,n){r8(n),t=Fp(t,"onChange"),0<t.length&&(r=new Sw("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Af=null,Wf=null;function D9(e){L8(e,0)}function h1(e){var t=ju(e);if(XE(t))return e}function L9(e,t){if(e==="change")return t}var S8=!1;if(Ol){var my;if(Ol){var py="oninput"in document;if(!py){var Oj=document.createElement("div");Oj.setAttribute("oninput","return;"),py=typeof Oj.oninput=="function"}my=py}else my=!1;S8=my&&(!document.documentMode||9<document.documentMode)}function Rj(){Af&&(Af.detachEvent("onpropertychange",E8),Wf=Af=null)}function E8(e){if(e.propertyName==="value"&&h1(Wf)){var t=[];A8(t,Wf,e,vw(e)),i8(D9,t)}}function M9(e,t,r){e==="focusin"?(Rj(),Af=t,Wf=r,Af.attachEvent("onpropertychange",E8)):e==="focusout"&&Rj()}function B9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return h1(Wf)}function F9(e,t){if(e==="click")return h1(t)}function U9(e,t){if(e==="input"||e==="change")return h1(t)}function $9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var go=typeof Object.is=="function"?Object.is:$9;function qf(e,t){if(go(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!B2.call(t,a)||!go(e[a],t[a]))return!1}return!0}function Dj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lj(e,t){var r=Dj(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Dj(r)}}function k8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?k8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function P8(){for(var e=window,t=_p();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_p(e.document)}return t}function Pw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function z9(e){var t=P8(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&k8(r.ownerDocument.documentElement,r)){if(n!==null&&Pw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Lj(r,i);var o=Lj(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var W9=Ol&&"documentMode"in document&&11>=document.documentMode,wu=null,nb=null,Sf=null,sb=!1;function Mj(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sb||wu==null||wu!==_p(n)||(n=wu,"selectionStart"in n&&Pw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sf&&qf(Sf,n)||(Sf=n,n=Fp(nb,"onSelect"),0<n.length&&(t=new Sw("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=wu)))}function jm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Nu={animationend:jm("Animation","AnimationEnd"),animationiteration:jm("Animation","AnimationIteration"),animationstart:jm("Animation","AnimationStart"),transitionend:jm("Transition","TransitionEnd")},gy={},T8={};Ol&&(T8=document.createElement("div").style,"AnimationEvent"in window||(delete Nu.animationend.animation,delete Nu.animationiteration.animation,delete Nu.animationstart.animation),"TransitionEvent"in window||delete Nu.transitionend.transition);function f1(e){if(gy[e])return gy[e];if(!Nu[e])return e;var t=Nu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in T8)return gy[e]=t[r];return e}var I8=f1("animationend"),_8=f1("animationiteration"),O8=f1("animationstart"),R8=f1("transitionend"),D8=new Map,Bj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wc(e,t){D8.set(e,t),Zd(t,[e])}for(var xy=0;xy<Bj.length;xy++){var yy=Bj[xy],q9=yy.toLowerCase(),H9=yy[0].toUpperCase()+yy.slice(1);Wc(q9,"on"+H9)}Wc(I8,"onAnimationEnd");Wc(_8,"onAnimationIteration");Wc(O8,"onAnimationStart");Wc("dblclick","onDoubleClick");Wc("focusin","onFocus");Wc("focusout","onBlur");Wc(R8,"onTransitionEnd");Yu("onMouseEnter",["mouseout","mouseover"]);Yu("onMouseLeave",["mouseout","mouseover"]);Yu("onPointerEnter",["pointerout","pointerover"]);Yu("onPointerLeave",["pointerout","pointerover"]);Zd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V9=new Set("cancel close invalid load scroll toggle".split(" ").concat(yf));function Fj(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qL(n,t,void 0,e),e.currentTarget=null}function L8(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==i&&a.isPropagationStopped())break e;Fj(a,c,u),i=d}else for(o=0;o<n.length;o++){if(c=n[o],d=c.instance,u=c.currentTarget,c=c.listener,d!==i&&a.isPropagationStopped())break e;Fj(a,c,u),i=d}}}if(Rp)throw e=Q2,Rp=!1,Q2=null,e}function on(e,t){var r=t[cb];r===void 0&&(r=t[cb]=new Set);var n=e+"__bubble";r.has(n)||(M8(t,e,2,!1),r.add(n))}function by(e,t,r){var n=0;t&&(n|=4),M8(r,e,n,t)}var Cm="_reactListening"+Math.random().toString(36).slice(2);function Hf(e){if(!e[Cm]){e[Cm]=!0,qE.forEach(function(r){r!=="selectionchange"&&(V9.has(r)||by(r,!1,e),by(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Cm]||(t[Cm]=!0,by("selectionchange",!1,t))}}function M8(e,t,r,n){switch(v8(t)){case 1:var a=i9;break;case 4:a=o9;break;default:a=Cw}r=a.bind(null,t,r,e),a=void 0,!J2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function vy(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=md(c),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}c=c.parentNode}}n=n.return}i8(function(){var u=i,f=vw(r),p=[];e:{var b=D8.get(e);if(b!==void 0){var x=Sw,N=e;switch(e){case"keypress":if(up(r)===0)break e;case"keydown":case"keyup":x=N9;break;case"focusin":N="focus",x=fy;break;case"focusout":N="blur",x=fy;break;case"beforeblur":case"afterblur":x=fy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ej;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=d9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=A9;break;case I8:case _8:case O8:x=f9;break;case R8:x=E9;break;case"scroll":x=l9;break;case"wheel":x=P9;break;case"copy":case"cut":case"paste":x=p9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Pj}var j=(t&4)!==0,w=!j&&e==="scroll",C=j?b!==null?b+"Capture":null:b;j=[];for(var P=u,k;P!==null;){k=P;var _=k.stateNode;if(k.tag===5&&_!==null&&(k=_,C!==null&&(_=Ff(P,C),_!=null&&j.push(Vf(P,_,k)))),w)break;P=P.return}0<j.length&&(b=new x(b,N,null,r,f),p.push({event:b,listeners:j}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",b&&r!==Y2&&(N=r.relatedTarget||r.fromElement)&&(md(N)||N[Rl]))break e;if((x||b)&&(b=f.window===f?f:(b=f.ownerDocument)?b.defaultView||b.parentWindow:window,x?(N=r.relatedTarget||r.toElement,x=u,N=N?md(N):null,N!==null&&(w=Jd(N),N!==w||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=u),x!==N)){if(j=Ej,_="onMouseLeave",C="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(j=Pj,_="onPointerLeave",C="onPointerEnter",P="pointer"),w=x==null?b:ju(x),k=N==null?b:ju(N),b=new j(_,P+"leave",x,r,f),b.target=w,b.relatedTarget=k,_=null,md(f)===u&&(j=new j(C,P+"enter",N,r,f),j.target=k,j.relatedTarget=w,_=j),w=_,x&&N)t:{for(j=x,C=N,P=0,k=j;k;k=du(k))P++;for(k=0,_=C;_;_=du(_))k++;for(;0<P-k;)j=du(j),P--;for(;0<k-P;)C=du(C),k--;for(;P--;){if(j===C||C!==null&&j===C.alternate)break t;j=du(j),C=du(C)}j=null}else j=null;x!==null&&Uj(p,b,x,j,!1),N!==null&&w!==null&&Uj(p,w,N,j,!0)}}e:{if(b=u?ju(u):window,x=b.nodeName&&b.nodeName.toLowerCase(),x==="select"||x==="input"&&b.type==="file")var O=L9;else if(_j(b))if(S8)O=U9;else{O=B9;var $=M9}else(x=b.nodeName)&&x.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(O=F9);if(O&&(O=O(e,u))){A8(p,O,r,f);break e}$&&$(e,b,u),e==="focusout"&&($=b._wrapperState)&&$.controlled&&b.type==="number"&&H2(b,"number",b.value)}switch($=u?ju(u):window,e){case"focusin":(_j($)||$.contentEditable==="true")&&(wu=$,nb=u,Sf=null);break;case"focusout":Sf=nb=wu=null;break;case"mousedown":sb=!0;break;case"contextmenu":case"mouseup":case"dragend":sb=!1,Mj(p,r,f);break;case"selectionchange":if(W9)break;case"keydown":case"keyup":Mj(p,r,f)}var F;if(kw)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else vu?j8(e,r)&&(U="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(N8&&r.locale!=="ko"&&(vu||U!=="onCompositionStart"?U==="onCompositionEnd"&&vu&&(F=w8()):(yc=f,Aw="value"in yc?yc.value:yc.textContent,vu=!0)),$=Fp(u,U),0<$.length&&(U=new kj(U,e,null,r,f),p.push({event:U,listeners:$}),F?U.data=F:(F=C8(r),F!==null&&(U.data=F)))),(F=I9?_9(e,r):O9(e,r))&&(u=Fp(u,"onBeforeInput"),0<u.length&&(f=new kj("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:u}),f.data=F))}L8(p,t)})}function Vf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fp(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ff(e,r),i!=null&&n.unshift(Vf(e,i,a)),i=Ff(e,t),i!=null&&n.push(Vf(e,i,a))),e=e.return}return n}function du(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uj(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var c=r,d=c.alternate,u=c.stateNode;if(d!==null&&d===n)break;c.tag===5&&u!==null&&(c=u,a?(d=Ff(r,i),d!=null&&o.unshift(Vf(r,d,c))):a||(d=Ff(r,i),d!=null&&o.push(Vf(r,d,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var G9=/\r\n?/g,K9=/\u0000|\uFFFD/g;function $j(e){return(typeof e=="string"?e:""+e).replace(G9,`
`).replace(K9,"")}function Am(e,t,r){if(t=$j(t),$j(e)!==t&&r)throw Error(ft(425))}function Up(){}var ab=null,ib=null;function ob(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lb=typeof setTimeout=="function"?setTimeout:void 0,X9=typeof clearTimeout=="function"?clearTimeout:void 0,zj=typeof Promise=="function"?Promise:void 0,Y9=typeof queueMicrotask=="function"?queueMicrotask:typeof zj<"u"?function(e){return zj.resolve(null).then(e).catch(Z9)}:lb;function Z9(e){setTimeout(function(){throw e})}function wy(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),zf(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);zf(t)}function Sc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jh=Math.random().toString(36).slice(2),Do="__reactFiber$"+jh,Gf="__reactProps$"+jh,Rl="__reactContainer$"+jh,cb="__reactEvents$"+jh,J9="__reactListeners$"+jh,Q9="__reactHandles$"+jh;function md(e){var t=e[Do];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rl]||r[Do]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Wj(e);e!==null;){if(r=e[Do])return r;e=Wj(e)}return t}e=r,r=e.parentNode}return null}function C0(e){return e=e[Do]||e[Rl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ju(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ft(33))}function m1(e){return e[Gf]||null}var db=[],Cu=-1;function qc(e){return{current:e}}function hn(e){0>Cu||(e.current=db[Cu],db[Cu]=null,Cu--)}function rn(e,t){Cu++,db[Cu]=e.current,e.current=t}var Lc={},oa=qc(Lc),Da=qc(!1),Od=Lc;function Zu(e,t){var r=e.type.contextTypes;if(!r)return Lc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function La(e){return e=e.childContextTypes,e!=null}function $p(){hn(Da),hn(oa)}function qj(e,t,r){if(oa.current!==Lc)throw Error(ft(168));rn(oa,t),rn(Da,r)}function B8(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ft(108,ML(e)||"Unknown",a));return En({},r,n)}function zp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lc,Od=oa.current,rn(oa,e),rn(Da,Da.current),!0}function Hj(e,t,r){var n=e.stateNode;if(!n)throw Error(ft(169));r?(e=B8(e,t,Od),n.__reactInternalMemoizedMergedChildContext=e,hn(Da),hn(oa),rn(oa,e)):hn(Da),rn(Da,r)}var wl=null,p1=!1,Ny=!1;function F8(e){wl===null?wl=[e]:wl.push(e)}function eM(e){p1=!0,F8(e)}function Hc(){if(!Ny&&wl!==null){Ny=!0;var e=0,t=$r;try{var r=wl;for($r=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wl=null,p1=!1}catch(a){throw wl!==null&&(wl=wl.slice(e+1)),d8(ww,Hc),a}finally{$r=t,Ny=!1}}return null}var Au=[],Su=0,Wp=null,qp=0,Ii=[],_i=0,Rd=null,Al=1,Sl="";function od(e,t){Au[Su++]=qp,Au[Su++]=Wp,Wp=e,qp=t}function U8(e,t,r){Ii[_i++]=Al,Ii[_i++]=Sl,Ii[_i++]=Rd,Rd=e;var n=Al;e=Sl;var a=32-mo(n)-1;n&=~(1<<a),r+=1;var i=32-mo(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Al=1<<32-mo(t)+a|r<<a|n,Sl=i+e}else Al=1<<i|r<<a|n,Sl=e}function Tw(e){e.return!==null&&(od(e,1),U8(e,1,0))}function Iw(e){for(;e===Wp;)Wp=Au[--Su],Au[Su]=null,qp=Au[--Su],Au[Su]=null;for(;e===Rd;)Rd=Ii[--_i],Ii[_i]=null,Sl=Ii[--_i],Ii[_i]=null,Al=Ii[--_i],Ii[_i]=null}var li=null,ii=null,xn=!1,uo=null;function $8(e,t){var r=Ri(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Vj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,li=e,ii=Sc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,li=e,ii=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rd!==null?{id:Al,overflow:Sl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ri(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,li=e,ii=null,!0):!1;default:return!1}}function ub(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hb(e){if(xn){var t=ii;if(t){var r=t;if(!Vj(e,t)){if(ub(e))throw Error(ft(418));t=Sc(r.nextSibling);var n=li;t&&Vj(e,t)?$8(n,r):(e.flags=e.flags&-4097|2,xn=!1,li=e)}}else{if(ub(e))throw Error(ft(418));e.flags=e.flags&-4097|2,xn=!1,li=e}}}function Gj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;li=e}function Sm(e){if(e!==li)return!1;if(!xn)return Gj(e),xn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ob(e.type,e.memoizedProps)),t&&(t=ii)){if(ub(e))throw z8(),Error(ft(418));for(;t;)$8(e,t),t=Sc(t.nextSibling)}if(Gj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ft(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ii=Sc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ii=null}}else ii=li?Sc(e.stateNode.nextSibling):null;return!0}function z8(){for(var e=ii;e;)e=Sc(e.nextSibling)}function Ju(){ii=li=null,xn=!1}function _w(e){uo===null?uo=[e]:uo.push(e)}var tM=Wl.ReactCurrentBatchConfig;function ef(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ft(309));var n=r.stateNode}if(!n)throw Error(ft(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ft(284));if(!r._owner)throw Error(ft(290,e))}return e}function Em(e,t){throw e=Object.prototype.toString.call(t),Error(ft(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Kj(e){var t=e._init;return t(e._payload)}function W8(e){function t(C,P){if(e){var k=C.deletions;k===null?(C.deletions=[P],C.flags|=16):k.push(P)}}function r(C,P){if(!e)return null;for(;P!==null;)t(C,P),P=P.sibling;return null}function n(C,P){for(C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function a(C,P){return C=Tc(C,P),C.index=0,C.sibling=null,C}function i(C,P,k){return C.index=k,e?(k=C.alternate,k!==null?(k=k.index,k<P?(C.flags|=2,P):k):(C.flags|=2,P)):(C.flags|=1048576,P)}function o(C){return e&&C.alternate===null&&(C.flags|=2),C}function c(C,P,k,_){return P===null||P.tag!==6?(P=Py(k,C.mode,_),P.return=C,P):(P=a(P,k),P.return=C,P)}function d(C,P,k,_){var O=k.type;return O===bu?f(C,P,k.props.children,_,k.key):P!==null&&(P.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===uc&&Kj(O)===P.type)?(_=a(P,k.props),_.ref=ef(C,P,k),_.return=C,_):(_=yp(k.type,k.key,k.props,null,C.mode,_),_.ref=ef(C,P,k),_.return=C,_)}function u(C,P,k,_){return P===null||P.tag!==4||P.stateNode.containerInfo!==k.containerInfo||P.stateNode.implementation!==k.implementation?(P=Ty(k,C.mode,_),P.return=C,P):(P=a(P,k.children||[]),P.return=C,P)}function f(C,P,k,_,O){return P===null||P.tag!==7?(P=jd(k,C.mode,_,O),P.return=C,P):(P=a(P,k),P.return=C,P)}function p(C,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Py(""+P,C.mode,k),P.return=C,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case gm:return k=yp(P.type,P.key,P.props,null,C.mode,k),k.ref=ef(C,null,P),k.return=C,k;case yu:return P=Ty(P,C.mode,k),P.return=C,P;case uc:var _=P._init;return p(C,_(P._payload),k)}if(gf(P)||Xh(P))return P=jd(P,C.mode,k,null),P.return=C,P;Em(C,P)}return null}function b(C,P,k,_){var O=P!==null?P.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return O!==null?null:c(C,P,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case gm:return k.key===O?d(C,P,k,_):null;case yu:return k.key===O?u(C,P,k,_):null;case uc:return O=k._init,b(C,P,O(k._payload),_)}if(gf(k)||Xh(k))return O!==null?null:f(C,P,k,_,null);Em(C,k)}return null}function x(C,P,k,_,O){if(typeof _=="string"&&_!==""||typeof _=="number")return C=C.get(k)||null,c(P,C,""+_,O);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gm:return C=C.get(_.key===null?k:_.key)||null,d(P,C,_,O);case yu:return C=C.get(_.key===null?k:_.key)||null,u(P,C,_,O);case uc:var $=_._init;return x(C,P,k,$(_._payload),O)}if(gf(_)||Xh(_))return C=C.get(k)||null,f(P,C,_,O,null);Em(P,_)}return null}function N(C,P,k,_){for(var O=null,$=null,F=P,U=P=0,R=null;F!==null&&U<k.length;U++){F.index>U?(R=F,F=null):R=F.sibling;var z=b(C,F,k[U],_);if(z===null){F===null&&(F=R);break}e&&F&&z.alternate===null&&t(C,F),P=i(z,P,U),$===null?O=z:$.sibling=z,$=z,F=R}if(U===k.length)return r(C,F),xn&&od(C,U),O;if(F===null){for(;U<k.length;U++)F=p(C,k[U],_),F!==null&&(P=i(F,P,U),$===null?O=F:$.sibling=F,$=F);return xn&&od(C,U),O}for(F=n(C,F);U<k.length;U++)R=x(F,C,U,k[U],_),R!==null&&(e&&R.alternate!==null&&F.delete(R.key===null?U:R.key),P=i(R,P,U),$===null?O=R:$.sibling=R,$=R);return e&&F.forEach(function(M){return t(C,M)}),xn&&od(C,U),O}function j(C,P,k,_){var O=Xh(k);if(typeof O!="function")throw Error(ft(150));if(k=O.call(k),k==null)throw Error(ft(151));for(var $=O=null,F=P,U=P=0,R=null,z=k.next();F!==null&&!z.done;U++,z=k.next()){F.index>U?(R=F,F=null):R=F.sibling;var M=b(C,F,z.value,_);if(M===null){F===null&&(F=R);break}e&&F&&M.alternate===null&&t(C,F),P=i(M,P,U),$===null?O=M:$.sibling=M,$=M,F=R}if(z.done)return r(C,F),xn&&od(C,U),O;if(F===null){for(;!z.done;U++,z=k.next())z=p(C,z.value,_),z!==null&&(P=i(z,P,U),$===null?O=z:$.sibling=z,$=z);return xn&&od(C,U),O}for(F=n(C,F);!z.done;U++,z=k.next())z=x(F,C,U,z.value,_),z!==null&&(e&&z.alternate!==null&&F.delete(z.key===null?U:z.key),P=i(z,P,U),$===null?O=z:$.sibling=z,$=z);return e&&F.forEach(function(W){return t(C,W)}),xn&&od(C,U),O}function w(C,P,k,_){if(typeof k=="object"&&k!==null&&k.type===bu&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case gm:e:{for(var O=k.key,$=P;$!==null;){if($.key===O){if(O=k.type,O===bu){if($.tag===7){r(C,$.sibling),P=a($,k.props.children),P.return=C,C=P;break e}}else if($.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===uc&&Kj(O)===$.type){r(C,$.sibling),P=a($,k.props),P.ref=ef(C,$,k),P.return=C,C=P;break e}r(C,$);break}else t(C,$);$=$.sibling}k.type===bu?(P=jd(k.props.children,C.mode,_,k.key),P.return=C,C=P):(_=yp(k.type,k.key,k.props,null,C.mode,_),_.ref=ef(C,P,k),_.return=C,C=_)}return o(C);case yu:e:{for($=k.key;P!==null;){if(P.key===$)if(P.tag===4&&P.stateNode.containerInfo===k.containerInfo&&P.stateNode.implementation===k.implementation){r(C,P.sibling),P=a(P,k.children||[]),P.return=C,C=P;break e}else{r(C,P);break}else t(C,P);P=P.sibling}P=Ty(k,C.mode,_),P.return=C,C=P}return o(C);case uc:return $=k._init,w(C,P,$(k._payload),_)}if(gf(k))return N(C,P,k,_);if(Xh(k))return j(C,P,k,_);Em(C,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,P!==null&&P.tag===6?(r(C,P.sibling),P=a(P,k),P.return=C,C=P):(r(C,P),P=Py(k,C.mode,_),P.return=C,C=P),o(C)):r(C,P)}return w}var Qu=W8(!0),q8=W8(!1),Hp=qc(null),Vp=null,Eu=null,Ow=null;function Rw(){Ow=Eu=Vp=null}function Dw(e){var t=Hp.current;hn(Hp),e._currentValue=t}function fb(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fu(e,t){Vp=e,Ow=Eu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_a=!0),e.firstContext=null)}function Fi(e){var t=e._currentValue;if(Ow!==e)if(e={context:e,memoizedValue:t,next:null},Eu===null){if(Vp===null)throw Error(ft(308));Eu=e,Vp.dependencies={lanes:0,firstContext:e}}else Eu=Eu.next=e;return t}var pd=null;function Lw(e){pd===null?pd=[e]:pd.push(e)}function H8(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Lw(t)):(r.next=a.next,a.next=r),t.interleaved=r,Dl(e,n)}function Dl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var hc=!1;function Mw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ec(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ar&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Dl(e,r)}return a=n.interleaved,a===null?(t.next=t,Lw(n)):(t.next=a.next,a.next=t),n.interleaved=t,Dl(e,r)}function hp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nw(e,r)}}function Xj(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gp(e,t,r,n){var a=e.updateQueue;hc=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,u=d.next;d.next=null,o===null?i=u:o.next=u,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(i!==null){var p=a.baseState;o=0,f=u=d=null,c=i;do{var b=c.lane,x=c.eventTime;if((n&b)===b){f!==null&&(f=f.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=e,j=c;switch(b=t,x=r,j.tag){case 1:if(N=j.payload,typeof N=="function"){p=N.call(x,p,b);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,b=typeof N=="function"?N.call(x,p,b):N,b==null)break e;p=En({},p,b);break e;case 2:hc=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,b=a.effects,b===null?a.effects=[c]:b.push(c))}else x={eventTime:x,lane:b,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=x,d=p):f=f.next=x,o|=b;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;b=c,c=b.next,b.next=null,a.lastBaseUpdate=b,a.shared.pending=null}}while(!0);if(f===null&&(d=p),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ld|=o,e.lanes=o,e.memoizedState=p}}function Yj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ft(191,a));a.call(n)}}}var A0={},Fo=qc(A0),Kf=qc(A0),Xf=qc(A0);function gd(e){if(e===A0)throw Error(ft(174));return e}function Bw(e,t){switch(rn(Xf,t),rn(Kf,e),rn(Fo,A0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=G2(t,e)}hn(Fo),rn(Fo,t)}function eh(){hn(Fo),hn(Kf),hn(Xf)}function G8(e){gd(Xf.current);var t=gd(Fo.current),r=G2(t,e.type);t!==r&&(rn(Kf,e),rn(Fo,r))}function Fw(e){Kf.current===e&&(hn(Fo),hn(Kf))}var Cn=qc(0);function Kp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jy=[];function Uw(){for(var e=0;e<jy.length;e++)jy[e]._workInProgressVersionPrimary=null;jy.length=0}var fp=Wl.ReactCurrentDispatcher,Cy=Wl.ReactCurrentBatchConfig,Dd=0,Sn=null,hs=null,Cs=null,Xp=!1,Ef=!1,Yf=0,rM=0;function Ys(){throw Error(ft(321))}function $w(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!go(e[r],t[r]))return!1;return!0}function zw(e,t,r,n,a,i){if(Dd=i,Sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fp.current=e===null||e.memoizedState===null?iM:oM,e=r(n,a),Ef){i=0;do{if(Ef=!1,Yf=0,25<=i)throw Error(ft(301));i+=1,Cs=hs=null,t.updateQueue=null,fp.current=lM,e=r(n,a)}while(Ef)}if(fp.current=Yp,t=hs!==null&&hs.next!==null,Dd=0,Cs=hs=Sn=null,Xp=!1,t)throw Error(ft(300));return e}function Ww(){var e=Yf!==0;return Yf=0,e}function Ro(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cs===null?Sn.memoizedState=Cs=e:Cs=Cs.next=e,Cs}function Ui(){if(hs===null){var e=Sn.alternate;e=e!==null?e.memoizedState:null}else e=hs.next;var t=Cs===null?Sn.memoizedState:Cs.next;if(t!==null)Cs=t,hs=e;else{if(e===null)throw Error(ft(310));hs=e,e={memoizedState:hs.memoizedState,baseState:hs.baseState,baseQueue:hs.baseQueue,queue:hs.queue,next:null},Cs===null?Sn.memoizedState=Cs=e:Cs=Cs.next=e}return Cs}function Zf(e,t){return typeof t=="function"?t(e):t}function Ay(e){var t=Ui(),r=t.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=e;var n=hs,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=o=null,d=null,u=i;do{var f=u.lane;if((Dd&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=p,o=n):d=d.next=p,Sn.lanes|=f,Ld|=f}u=u.next}while(u!==null&&u!==i);d===null?o=n:d.next=c,go(n,t.memoizedState)||(_a=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Sn.lanes|=i,Ld|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sy(e){var t=Ui(),r=t.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);go(i,t.memoizedState)||(_a=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function K8(){}function X8(e,t){var r=Sn,n=Ui(),a=t(),i=!go(n.memoizedState,a);if(i&&(n.memoizedState=a,_a=!0),n=n.queue,qw(J8.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Cs!==null&&Cs.memoizedState.tag&1){if(r.flags|=2048,Jf(9,Z8.bind(null,r,n,a,t),void 0,null),Es===null)throw Error(ft(349));Dd&30||Y8(r,t,a)}return a}function Y8(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Z8(e,t,r,n){t.value=r,t.getSnapshot=n,Q8(t)&&e7(e)}function J8(e,t,r){return r(function(){Q8(t)&&e7(e)})}function Q8(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!go(e,r)}catch{return!0}}function e7(e){var t=Dl(e,1);t!==null&&po(t,e,1,-1)}function Zj(e){var t=Ro();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:e},t.queue=e,e=e.dispatch=aM.bind(null,Sn,e),[t.memoizedState,e]}function Jf(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function t7(){return Ui().memoizedState}function mp(e,t,r,n){var a=Ro();Sn.flags|=e,a.memoizedState=Jf(1|t,r,void 0,n===void 0?null:n)}function g1(e,t,r,n){var a=Ui();n=n===void 0?null:n;var i=void 0;if(hs!==null){var o=hs.memoizedState;if(i=o.destroy,n!==null&&$w(n,o.deps)){a.memoizedState=Jf(t,r,i,n);return}}Sn.flags|=e,a.memoizedState=Jf(1|t,r,i,n)}function Jj(e,t){return mp(8390656,8,e,t)}function qw(e,t){return g1(2048,8,e,t)}function r7(e,t){return g1(4,2,e,t)}function n7(e,t){return g1(4,4,e,t)}function s7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a7(e,t,r){return r=r!=null?r.concat([e]):null,g1(4,4,s7.bind(null,t,e),r)}function Hw(){}function i7(e,t){var r=Ui();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$w(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function o7(e,t){var r=Ui();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$w(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function l7(e,t,r){return Dd&21?(go(r,t)||(r=f8(),Sn.lanes|=r,Ld|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=r)}function nM(e,t){var r=$r;$r=r!==0&&4>r?r:4,e(!0);var n=Cy.transition;Cy.transition={};try{e(!1),t()}finally{$r=r,Cy.transition=n}}function c7(){return Ui().memoizedState}function sM(e,t,r){var n=Pc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},d7(e))u7(t,r);else if(r=H8(e,t,r,n),r!==null){var a=va();po(r,e,n,a),h7(r,t,n)}}function aM(e,t,r){var n=Pc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(d7(e))u7(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,r);if(a.hasEagerState=!0,a.eagerState=c,go(c,o)){var d=t.interleaved;d===null?(a.next=a,Lw(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=H8(e,t,a,n),r!==null&&(a=va(),po(r,e,n,a),h7(r,t,n))}}function d7(e){var t=e.alternate;return e===Sn||t!==null&&t===Sn}function u7(e,t){Ef=Xp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function h7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Nw(e,r)}}var Yp={readContext:Fi,useCallback:Ys,useContext:Ys,useEffect:Ys,useImperativeHandle:Ys,useInsertionEffect:Ys,useLayoutEffect:Ys,useMemo:Ys,useReducer:Ys,useRef:Ys,useState:Ys,useDebugValue:Ys,useDeferredValue:Ys,useTransition:Ys,useMutableSource:Ys,useSyncExternalStore:Ys,useId:Ys,unstable_isNewReconciler:!1},iM={readContext:Fi,useCallback:function(e,t){return Ro().memoizedState=[e,t===void 0?null:t],e},useContext:Fi,useEffect:Jj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,mp(4194308,4,s7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mp(4194308,4,e,t)},useInsertionEffect:function(e,t){return mp(4,2,e,t)},useMemo:function(e,t){var r=Ro();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ro();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=sM.bind(null,Sn,e),[n.memoizedState,e]},useRef:function(e){var t=Ro();return e={current:e},t.memoizedState=e},useState:Zj,useDebugValue:Hw,useDeferredValue:function(e){return Ro().memoizedState=e},useTransition:function(){var e=Zj(!1),t=e[0];return e=nM.bind(null,e[1]),Ro().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Sn,a=Ro();if(xn){if(r===void 0)throw Error(ft(407));r=r()}else{if(r=t(),Es===null)throw Error(ft(349));Dd&30||Y8(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Jj(J8.bind(null,n,i,e),[e]),n.flags|=2048,Jf(9,Z8.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ro(),t=Es.identifierPrefix;if(xn){var r=Sl,n=Al;r=(n&~(1<<32-mo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=rM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oM={readContext:Fi,useCallback:i7,useContext:Fi,useEffect:qw,useImperativeHandle:a7,useInsertionEffect:r7,useLayoutEffect:n7,useMemo:o7,useReducer:Ay,useRef:t7,useState:function(){return Ay(Zf)},useDebugValue:Hw,useDeferredValue:function(e){var t=Ui();return l7(t,hs.memoizedState,e)},useTransition:function(){var e=Ay(Zf)[0],t=Ui().memoizedState;return[e,t]},useMutableSource:K8,useSyncExternalStore:X8,useId:c7,unstable_isNewReconciler:!1},lM={readContext:Fi,useCallback:i7,useContext:Fi,useEffect:qw,useImperativeHandle:a7,useInsertionEffect:r7,useLayoutEffect:n7,useMemo:o7,useReducer:Sy,useRef:t7,useState:function(){return Sy(Zf)},useDebugValue:Hw,useDeferredValue:function(e){var t=Ui();return hs===null?t.memoizedState=e:l7(t,hs.memoizedState,e)},useTransition:function(){var e=Sy(Zf)[0],t=Ui().memoizedState;return[e,t]},useMutableSource:K8,useSyncExternalStore:X8,useId:c7,unstable_isNewReconciler:!1};function lo(e,t){if(e&&e.defaultProps){t=En({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function mb(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:En({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var x1={isMounted:function(e){return(e=e._reactInternals)?Jd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=va(),a=Pc(e),i=Tl(n,a);i.payload=t,r!=null&&(i.callback=r),t=Ec(e,i,a),t!==null&&(po(t,e,a,n),hp(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=va(),a=Pc(e),i=Tl(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ec(e,i,a),t!==null&&(po(t,e,a,n),hp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=va(),n=Pc(e),a=Tl(r,n);a.tag=2,t!=null&&(a.callback=t),t=Ec(e,a,n),t!==null&&(po(t,e,n,r),hp(t,e,n))}};function Qj(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!qf(r,n)||!qf(a,i):!0}function f7(e,t,r){var n=!1,a=Lc,i=t.contextType;return typeof i=="object"&&i!==null?i=Fi(i):(a=La(t)?Od:oa.current,n=t.contextTypes,i=(n=n!=null)?Zu(e,a):Lc),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=x1,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function e4(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&x1.enqueueReplaceState(t,t.state,null)}function pb(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Mw(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Fi(i):(i=La(t)?Od:oa.current,a.context=Zu(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(mb(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&x1.enqueueReplaceState(a,a.state,null),Gp(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function th(e,t){try{var r="",n=t;do r+=LL(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ey(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var cM=typeof WeakMap=="function"?WeakMap:Map;function m7(e,t,r){r=Tl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Jp||(Jp=!0,Sb=n),gb(e,t)},r}function p7(e,t,r){r=Tl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){gb(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){gb(e,t),typeof n!="function"&&(kc===null?kc=new Set([this]):kc.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function t4(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new cM;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=jM.bind(null,e,t,r),t.then(e,e))}function r4(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function n4(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Tl(-1,1),t.tag=2,Ec(r,t,1))),r.lanes|=1),e)}var dM=Wl.ReactCurrentOwner,_a=!1;function ga(e,t,r,n){t.child=e===null?q8(t,null,r,n):Qu(t,e.child,r,n)}function s4(e,t,r,n,a){r=r.render;var i=t.ref;return Fu(t,a),n=zw(e,t,r,n,i,a),r=Ww(),e!==null&&!_a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ll(e,t,a)):(xn&&r&&Tw(t),t.flags|=1,ga(e,t,n,a),t.child)}function a4(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Qw(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,g7(e,t,i,n,a)):(e=yp(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:qf,r(o,n)&&e.ref===t.ref)return Ll(e,t,a)}return t.flags|=1,e=Tc(i,n),e.ref=t.ref,e.return=t,t.child=e}function g7(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(qf(i,n)&&e.ref===t.ref)if(_a=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(_a=!0);else return t.lanes=e.lanes,Ll(e,t,a)}return xb(e,t,r,n,a)}function x7(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Pu,ni),ni|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rn(Pu,ni),ni|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,rn(Pu,ni),ni|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,rn(Pu,ni),ni|=n;return ga(e,t,a,r),t.child}function y7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xb(e,t,r,n,a){var i=La(r)?Od:oa.current;return i=Zu(t,i),Fu(t,a),r=zw(e,t,r,n,i,a),n=Ww(),e!==null&&!_a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ll(e,t,a)):(xn&&n&&Tw(t),t.flags|=1,ga(e,t,r,a),t.child)}function i4(e,t,r,n,a){if(La(r)){var i=!0;zp(t)}else i=!1;if(Fu(t,a),t.stateNode===null)pp(e,t),f7(t,r,n),pb(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Fi(u):(u=La(r)?Od:oa.current,u=Zu(t,u));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||d!==u)&&e4(t,o,n,u),hc=!1;var b=t.memoizedState;o.state=b,Gp(t,n,o,a),d=t.memoizedState,c!==n||b!==d||Da.current||hc?(typeof f=="function"&&(mb(t,r,f,n),d=t.memoizedState),(c=hc||Qj(t,r,c,n,b,d,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=u,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,V8(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:lo(t.type,c),o.props=u,p=t.pendingProps,b=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=Fi(d):(d=La(r)?Od:oa.current,d=Zu(t,d));var x=r.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||b!==d)&&e4(t,o,n,d),hc=!1,b=t.memoizedState,o.state=b,Gp(t,n,o,a);var N=t.memoizedState;c!==p||b!==N||Da.current||hc?(typeof x=="function"&&(mb(t,r,x,n),N=t.memoizedState),(u=hc||Qj(t,r,u,n,b,N,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,N,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,N,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=N),o.props=n,o.state=N,o.context=d,n=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),n=!1)}return yb(e,t,r,n,i,a)}function yb(e,t,r,n,a,i){y7(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Hj(t,r,!1),Ll(e,t,i);n=t.stateNode,dM.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Qu(t,e.child,null,i),t.child=Qu(t,null,c,i)):ga(e,t,c,i),t.memoizedState=n.state,a&&Hj(t,r,!0),t.child}function b7(e){var t=e.stateNode;t.pendingContext?qj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qj(e,t.context,!1),Bw(e,t.containerInfo)}function o4(e,t,r,n,a){return Ju(),_w(a),t.flags|=256,ga(e,t,r,n),t.child}var bb={dehydrated:null,treeContext:null,retryLane:0};function vb(e){return{baseLanes:e,cachePool:null,transitions:null}}function v7(e,t,r){var n=t.pendingProps,a=Cn.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),rn(Cn,a&1),e===null)return hb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=v1(o,n,0,null),e=jd(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=vb(r),t.memoizedState=bb,e):Vw(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return uM(e,t,o,n,c,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Tc(a,d),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=Tc(c,i):(i=jd(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?vb(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=bb,n}return i=e.child,e=i.sibling,n=Tc(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Vw(e,t){return t=v1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function km(e,t,r,n){return n!==null&&_w(n),Qu(t,e.child,null,r),e=Vw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uM(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Ey(Error(ft(422))),km(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=v1({mode:"visible",children:n.children},a,0,null),i=jd(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Qu(t,e.child,null,o),t.child.memoizedState=vb(o),t.memoizedState=bb,i);if(!(t.mode&1))return km(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(ft(419)),n=Ey(i,n,void 0),km(e,t,o,n)}if(c=(o&e.childLanes)!==0,_a||c){if(n=Es,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Dl(e,a),po(n,e,a,-1))}return Jw(),n=Ey(Error(ft(421))),km(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=CM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ii=Sc(a.nextSibling),li=t,xn=!0,uo=null,e!==null&&(Ii[_i++]=Al,Ii[_i++]=Sl,Ii[_i++]=Rd,Al=e.id,Sl=e.overflow,Rd=t),t=Vw(t,n.children),t.flags|=4096,t)}function l4(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fb(e.return,t,r)}function ky(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function w7(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(ga(e,t,n.children,r),n=Cn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&l4(e,r,t);else if(e.tag===19)l4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rn(Cn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Kp(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ky(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Kp(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ky(t,!0,r,null,i);break;case"together":ky(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ll(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ld|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ft(153));if(t.child!==null){for(e=t.child,r=Tc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Tc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function hM(e,t,r){switch(t.tag){case 3:b7(t),Ju();break;case 5:G8(t);break;case 1:La(t.type)&&zp(t);break;case 4:Bw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;rn(Hp,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(rn(Cn,Cn.current&1),t.flags|=128,null):r&t.child.childLanes?v7(e,t,r):(rn(Cn,Cn.current&1),e=Ll(e,t,r),e!==null?e.sibling:null);rn(Cn,Cn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return w7(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rn(Cn,Cn.current),n)break;return null;case 22:case 23:return t.lanes=0,x7(e,t,r)}return Ll(e,t,r)}var N7,wb,j7,C7;N7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wb=function(){};j7=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,gd(Fo.current);var i=null;switch(r){case"input":a=W2(e,a),n=W2(e,n),i=[];break;case"select":a=En({},a,{value:void 0}),n=En({},n,{value:void 0}),i=[];break;case"textarea":a=V2(e,a),n=V2(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Up)}K2(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var d=n[u];if(c=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(i||(i=[]),i.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mf.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&on("scroll",e),i||c===d||(i=[])):(i=i||[]).push(u,d))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};C7=function(e,t,r,n){r!==n&&(t.flags|=4)};function tf(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zs(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function fM(e,t,r){var n=t.pendingProps;switch(Iw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(t),null;case 1:return La(t.type)&&$p(),Zs(t),null;case 3:return n=t.stateNode,eh(),hn(Da),hn(oa),Uw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,uo!==null&&(Pb(uo),uo=null))),wb(e,t),Zs(t),null;case 5:Fw(t);var a=gd(Xf.current);if(r=t.type,e!==null&&t.stateNode!=null)j7(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ft(166));return Zs(t),null}if(e=gd(Fo.current),Sm(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Do]=t,n[Gf]=i,e=(t.mode&1)!==0,r){case"dialog":on("cancel",n),on("close",n);break;case"iframe":case"object":case"embed":on("load",n);break;case"video":case"audio":for(a=0;a<yf.length;a++)on(yf[a],n);break;case"source":on("error",n);break;case"img":case"image":case"link":on("error",n),on("load",n);break;case"details":on("toggle",n);break;case"input":xj(n,i),on("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},on("invalid",n);break;case"textarea":bj(n,i),on("invalid",n)}K2(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&Am(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Am(n.textContent,c,e),a=["children",""+c]):Mf.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&on("scroll",n)}switch(r){case"input":xm(n),yj(n,i,!0);break;case"textarea":xm(n),vj(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Up)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Do]=t,e[Gf]=n,N7(e,t,!1,!1),t.stateNode=e;e:{switch(o=X2(r,n),r){case"dialog":on("cancel",e),on("close",e),a=n;break;case"iframe":case"object":case"embed":on("load",e),a=n;break;case"video":case"audio":for(a=0;a<yf.length;a++)on(yf[a],e);a=n;break;case"source":on("error",e),a=n;break;case"img":case"image":case"link":on("error",e),on("load",e),a=n;break;case"details":on("toggle",e),a=n;break;case"input":xj(e,n),a=W2(e,n),on("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=En({},n,{value:void 0}),on("invalid",e);break;case"textarea":bj(e,n),a=V2(e,n),on("invalid",e);break;default:a=n}K2(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?t8(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&QE(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Bf(e,d):typeof d=="number"&&Bf(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mf.hasOwnProperty(i)?d!=null&&i==="onScroll"&&on("scroll",e):d!=null&&gw(e,i,d,o))}switch(r){case"input":xm(e),yj(e,n,!1);break;case"textarea":xm(e),vj(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Dc(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Du(e,!!n.multiple,i,!1):n.defaultValue!=null&&Du(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Up)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zs(t),null;case 6:if(e&&t.stateNode!=null)C7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ft(166));if(r=gd(Xf.current),gd(Fo.current),Sm(t)){if(n=t.stateNode,r=t.memoizedProps,n[Do]=t,(i=n.nodeValue!==r)&&(e=li,e!==null))switch(e.tag){case 3:Am(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Am(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Do]=t,t.stateNode=n}return Zs(t),null;case 13:if(hn(Cn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xn&&ii!==null&&t.mode&1&&!(t.flags&128))z8(),Ju(),t.flags|=98560,i=!1;else if(i=Sm(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ft(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ft(317));i[Do]=t}else Ju(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zs(t),i=!1}else uo!==null&&(Pb(uo),uo=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Cn.current&1?ms===0&&(ms=3):Jw())),t.updateQueue!==null&&(t.flags|=4),Zs(t),null);case 4:return eh(),wb(e,t),e===null&&Hf(t.stateNode.containerInfo),Zs(t),null;case 10:return Dw(t.type._context),Zs(t),null;case 17:return La(t.type)&&$p(),Zs(t),null;case 19:if(hn(Cn),i=t.memoizedState,i===null)return Zs(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)tf(i,!1);else{if(ms!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Kp(e),o!==null){for(t.flags|=128,tf(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rn(Cn,Cn.current&1|2),t.child}e=e.sibling}i.tail!==null&&zn()>rh&&(t.flags|=128,n=!0,tf(i,!1),t.lanes=4194304)}else{if(!n)if(e=Kp(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xn)return Zs(t),null}else 2*zn()-i.renderingStartTime>rh&&r!==1073741824&&(t.flags|=128,n=!0,tf(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=zn(),t.sibling=null,r=Cn.current,rn(Cn,n?r&1|2:r&1),t):(Zs(t),null);case 22:case 23:return Zw(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ni&1073741824&&(Zs(t),t.subtreeFlags&6&&(t.flags|=8192)):Zs(t),null;case 24:return null;case 25:return null}throw Error(ft(156,t.tag))}function mM(e,t){switch(Iw(t),t.tag){case 1:return La(t.type)&&$p(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eh(),hn(Da),hn(oa),Uw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fw(t),null;case 13:if(hn(Cn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ft(340));Ju()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hn(Cn),null;case 4:return eh(),null;case 10:return Dw(t.type._context),null;case 22:case 23:return Zw(),null;case 24:return null;default:return null}}var Pm=!1,na=!1,pM=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function ku(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ln(e,t,n)}else r.current=null}function Nb(e,t,r){try{r()}catch(n){Ln(e,t,n)}}var c4=!1;function gM(e,t){if(ab=Mp,e=P8(),Pw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,u=0,f=0,p=e,b=null;t:for(;;){for(var x;p!==r||a!==0&&p.nodeType!==3||(c=o+a),p!==i||n!==0&&p.nodeType!==3||(d=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)b=p,p=x;for(;;){if(p===e)break t;if(b===r&&++u===a&&(c=o),b===i&&++f===n&&(d=o),(x=p.nextSibling)!==null)break;p=b,b=p.parentNode}p=x}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(ib={focusedElem:e,selectionRange:r},Mp=!1,Pt=t;Pt!==null;)if(t=Pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Pt=e;else for(;Pt!==null;){t=Pt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,w=N.memoizedState,C=t.stateNode,P=C.getSnapshotBeforeUpdate(t.elementType===t.type?j:lo(t.type,j),w);C.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var k=t.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ft(163))}}catch(_){Ln(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Pt=e;break}Pt=t.return}return N=c4,c4=!1,N}function kf(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Nb(t,r,i)}a=a.next}while(a!==n)}}function y1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function jb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function A7(e){var t=e.alternate;t!==null&&(e.alternate=null,A7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Do],delete t[Gf],delete t[cb],delete t[J9],delete t[Q9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function S7(e){return e.tag===5||e.tag===3||e.tag===4}function d4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||S7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cb(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Up));else if(n!==4&&(e=e.child,e!==null))for(Cb(e,t,r),e=e.sibling;e!==null;)Cb(e,t,r),e=e.sibling}function Ab(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ab(e,t,r),e=e.sibling;e!==null;)Ab(e,t,r),e=e.sibling}var Fs=null,co=!1;function lc(e,t,r){for(r=r.child;r!==null;)E7(e,t,r),r=r.sibling}function E7(e,t,r){if(Bo&&typeof Bo.onCommitFiberUnmount=="function")try{Bo.onCommitFiberUnmount(d1,r)}catch{}switch(r.tag){case 5:na||ku(r,t);case 6:var n=Fs,a=co;Fs=null,lc(e,t,r),Fs=n,co=a,Fs!==null&&(co?(e=Fs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fs.removeChild(r.stateNode));break;case 18:Fs!==null&&(co?(e=Fs,r=r.stateNode,e.nodeType===8?wy(e.parentNode,r):e.nodeType===1&&wy(e,r),zf(e)):wy(Fs,r.stateNode));break;case 4:n=Fs,a=co,Fs=r.stateNode.containerInfo,co=!0,lc(e,t,r),Fs=n,co=a;break;case 0:case 11:case 14:case 15:if(!na&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Nb(r,t,o),a=a.next}while(a!==n)}lc(e,t,r);break;case 1:if(!na&&(ku(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){Ln(r,t,c)}lc(e,t,r);break;case 21:lc(e,t,r);break;case 22:r.mode&1?(na=(n=na)||r.memoizedState!==null,lc(e,t,r),na=n):lc(e,t,r);break;default:lc(e,t,r)}}function u4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new pM),t.forEach(function(n){var a=AM.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function io(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Fs=c.stateNode,co=!1;break e;case 3:Fs=c.stateNode.containerInfo,co=!0;break e;case 4:Fs=c.stateNode.containerInfo,co=!0;break e}c=c.return}if(Fs===null)throw Error(ft(160));E7(i,o,a),Fs=null,co=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){Ln(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)k7(t,e),t=t.sibling}function k7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(io(t,e),To(e),n&4){try{kf(3,e,e.return),y1(3,e)}catch(j){Ln(e,e.return,j)}try{kf(5,e,e.return)}catch(j){Ln(e,e.return,j)}}break;case 1:io(t,e),To(e),n&512&&r!==null&&ku(r,r.return);break;case 5:if(io(t,e),To(e),n&512&&r!==null&&ku(r,r.return),e.flags&32){var a=e.stateNode;try{Bf(a,"")}catch(j){Ln(e,e.return,j)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&YE(a,i),X2(c,o);var u=X2(c,i);for(o=0;o<d.length;o+=2){var f=d[o],p=d[o+1];f==="style"?t8(a,p):f==="dangerouslySetInnerHTML"?QE(a,p):f==="children"?Bf(a,p):gw(a,f,p,u)}switch(c){case"input":q2(a,i);break;case"textarea":ZE(a,i);break;case"select":var b=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Du(a,!!i.multiple,x,!1):b!==!!i.multiple&&(i.defaultValue!=null?Du(a,!!i.multiple,i.defaultValue,!0):Du(a,!!i.multiple,i.multiple?[]:"",!1))}a[Gf]=i}catch(j){Ln(e,e.return,j)}}break;case 6:if(io(t,e),To(e),n&4){if(e.stateNode===null)throw Error(ft(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(j){Ln(e,e.return,j)}}break;case 3:if(io(t,e),To(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{zf(t.containerInfo)}catch(j){Ln(e,e.return,j)}break;case 4:io(t,e),To(e);break;case 13:io(t,e),To(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Xw=zn())),n&4&&u4(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(na=(u=na)||f,io(t,e),na=u):io(t,e),To(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Pt=e,f=e.child;f!==null;){for(p=Pt=f;Pt!==null;){switch(b=Pt,x=b.child,b.tag){case 0:case 11:case 14:case 15:kf(4,b,b.return);break;case 1:ku(b,b.return);var N=b.stateNode;if(typeof N.componentWillUnmount=="function"){n=b,r=b.return;try{t=n,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(j){Ln(n,r,j)}}break;case 5:ku(b,b.return);break;case 22:if(b.memoizedState!==null){f4(p);continue}}x!==null?(x.return=b,Pt=x):f4(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{a=p.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,d=p.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=e8("display",o))}catch(j){Ln(e,e.return,j)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(j){Ln(e,e.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:io(t,e),To(e),n&4&&u4(e);break;case 21:break;default:io(t,e),To(e)}}function To(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(S7(r)){var n=r;break e}r=r.return}throw Error(ft(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Bf(a,""),n.flags&=-33);var i=d4(e);Ab(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,c=d4(e);Cb(e,c,o);break;default:throw Error(ft(161))}}catch(d){Ln(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xM(e,t,r){Pt=e,P7(e)}function P7(e,t,r){for(var n=(e.mode&1)!==0;Pt!==null;){var a=Pt,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Pm;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||na;c=Pm;var u=na;if(Pm=o,(na=d)&&!u)for(Pt=a;Pt!==null;)o=Pt,d=o.child,o.tag===22&&o.memoizedState!==null?m4(a):d!==null?(d.return=o,Pt=d):m4(a);for(;i!==null;)Pt=i,P7(i),i=i.sibling;Pt=a,Pm=c,na=u}h4(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Pt=i):h4(e)}}function h4(e){for(;Pt!==null;){var t=Pt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:na||y1(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!na)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:lo(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Yj(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Yj(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&zf(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ft(163))}na||t.flags&512&&jb(t)}catch(b){Ln(t,t.return,b)}}if(t===e){Pt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Pt=r;break}Pt=t.return}}function f4(e){for(;Pt!==null;){var t=Pt;if(t===e){Pt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Pt=r;break}Pt=t.return}}function m4(e){for(;Pt!==null;){var t=Pt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{y1(4,t)}catch(d){Ln(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){Ln(t,a,d)}}var i=t.return;try{jb(t)}catch(d){Ln(t,i,d)}break;case 5:var o=t.return;try{jb(t)}catch(d){Ln(t,o,d)}}}catch(d){Ln(t,t.return,d)}if(t===e){Pt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Pt=c;break}Pt=t.return}}var yM=Math.ceil,Zp=Wl.ReactCurrentDispatcher,Gw=Wl.ReactCurrentOwner,Li=Wl.ReactCurrentBatchConfig,Ar=0,Es=null,ts=null,zs=0,ni=0,Pu=qc(0),ms=0,Qf=null,Ld=0,b1=0,Kw=0,Pf=null,Ia=null,Xw=0,rh=1/0,vl=null,Jp=!1,Sb=null,kc=null,Tm=!1,bc=null,Qp=0,Tf=0,Eb=null,gp=-1,xp=0;function va(){return Ar&6?zn():gp!==-1?gp:gp=zn()}function Pc(e){return e.mode&1?Ar&2&&zs!==0?zs&-zs:tM.transition!==null?(xp===0&&(xp=f8()),xp):(e=$r,e!==0||(e=window.event,e=e===void 0?16:v8(e.type)),e):1}function po(e,t,r,n){if(50<Tf)throw Tf=0,Eb=null,Error(ft(185));N0(e,r,n),(!(Ar&2)||e!==Es)&&(e===Es&&(!(Ar&2)&&(b1|=r),ms===4&&gc(e,zs)),Ma(e,n),r===1&&Ar===0&&!(t.mode&1)&&(rh=zn()+500,p1&&Hc()))}function Ma(e,t){var r=e.callbackNode;t9(e,t);var n=Lp(e,e===Es?zs:0);if(n===0)r!==null&&jj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jj(r),t===1)e.tag===0?eM(p4.bind(null,e)):F8(p4.bind(null,e)),Y9(function(){!(Ar&6)&&Hc()}),r=null;else{switch(m8(n)){case 1:r=ww;break;case 4:r=u8;break;case 16:r=Dp;break;case 536870912:r=h8;break;default:r=Dp}r=M7(r,T7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function T7(e,t){if(gp=-1,xp=0,Ar&6)throw Error(ft(327));var r=e.callbackNode;if(Uu()&&e.callbackNode!==r)return null;var n=Lp(e,e===Es?zs:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=eg(e,n);else{t=n;var a=Ar;Ar|=2;var i=_7();(Es!==e||zs!==t)&&(vl=null,rh=zn()+500,Nd(e,t));do try{wM();break}catch(c){I7(e,c)}while(!0);Rw(),Zp.current=i,Ar=a,ts!==null?t=0:(Es=null,zs=0,t=ms)}if(t!==0){if(t===2&&(a=eb(e),a!==0&&(n=a,t=kb(e,a))),t===1)throw r=Qf,Nd(e,0),gc(e,n),Ma(e,zn()),r;if(t===6)gc(e,n);else{if(a=e.current.alternate,!(n&30)&&!bM(a)&&(t=eg(e,n),t===2&&(i=eb(e),i!==0&&(n=i,t=kb(e,i))),t===1))throw r=Qf,Nd(e,0),gc(e,n),Ma(e,zn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ft(345));case 2:ld(e,Ia,vl);break;case 3:if(gc(e,n),(n&130023424)===n&&(t=Xw+500-zn(),10<t)){if(Lp(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){va(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=lb(ld.bind(null,e,Ia,vl),t);break}ld(e,Ia,vl);break;case 4:if(gc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-mo(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=zn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*yM(n/1960))-n,10<n){e.timeoutHandle=lb(ld.bind(null,e,Ia,vl),n);break}ld(e,Ia,vl);break;case 5:ld(e,Ia,vl);break;default:throw Error(ft(329))}}}return Ma(e,zn()),e.callbackNode===r?T7.bind(null,e):null}function kb(e,t){var r=Pf;return e.current.memoizedState.isDehydrated&&(Nd(e,t).flags|=256),e=eg(e,t),e!==2&&(t=Ia,Ia=r,t!==null&&Pb(t)),e}function Pb(e){Ia===null?Ia=e:Ia.push.apply(Ia,e)}function bM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!go(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gc(e,t){for(t&=~Kw,t&=~b1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-mo(t),n=1<<r;e[r]=-1,t&=~n}}function p4(e){if(Ar&6)throw Error(ft(327));Uu();var t=Lp(e,0);if(!(t&1))return Ma(e,zn()),null;var r=eg(e,t);if(e.tag!==0&&r===2){var n=eb(e);n!==0&&(t=n,r=kb(e,n))}if(r===1)throw r=Qf,Nd(e,0),gc(e,t),Ma(e,zn()),r;if(r===6)throw Error(ft(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ld(e,Ia,vl),Ma(e,zn()),null}function Yw(e,t){var r=Ar;Ar|=1;try{return e(t)}finally{Ar=r,Ar===0&&(rh=zn()+500,p1&&Hc())}}function Md(e){bc!==null&&bc.tag===0&&!(Ar&6)&&Uu();var t=Ar;Ar|=1;var r=Li.transition,n=$r;try{if(Li.transition=null,$r=1,e)return e()}finally{$r=n,Li.transition=r,Ar=t,!(Ar&6)&&Hc()}}function Zw(){ni=Pu.current,hn(Pu)}function Nd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,X9(r)),ts!==null)for(r=ts.return;r!==null;){var n=r;switch(Iw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$p();break;case 3:eh(),hn(Da),hn(oa),Uw();break;case 5:Fw(n);break;case 4:eh();break;case 13:hn(Cn);break;case 19:hn(Cn);break;case 10:Dw(n.type._context);break;case 22:case 23:Zw()}r=r.return}if(Es=e,ts=e=Tc(e.current,null),zs=ni=t,ms=0,Qf=null,Kw=b1=Ld=0,Ia=Pf=null,pd!==null){for(t=0;t<pd.length;t++)if(r=pd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}pd=null}return e}function I7(e,t){do{var r=ts;try{if(Rw(),fp.current=Yp,Xp){for(var n=Sn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Xp=!1}if(Dd=0,Cs=hs=Sn=null,Ef=!1,Yf=0,Gw.current=null,r===null||r.return===null){ms=1,Qf=t,ts=null;break}e:{var i=e,o=r.return,c=r,d=t;if(t=zs,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var b=f.alternate;b?(f.updateQueue=b.updateQueue,f.memoizedState=b.memoizedState,f.lanes=b.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=r4(o);if(x!==null){x.flags&=-257,n4(x,o,c,i,t),x.mode&1&&t4(i,u,t),t=x,d=u;var N=t.updateQueue;if(N===null){var j=new Set;j.add(d),t.updateQueue=j}else N.add(d);break e}else{if(!(t&1)){t4(i,u,t),Jw();break e}d=Error(ft(426))}}else if(xn&&c.mode&1){var w=r4(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),n4(w,o,c,i,t),_w(th(d,c));break e}}i=d=th(d,c),ms!==4&&(ms=2),Pf===null?Pf=[i]:Pf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var C=m7(i,d,t);Xj(i,C);break e;case 1:c=d;var P=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof P.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(kc===null||!kc.has(k)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=p7(i,c,t);Xj(i,_);break e}}i=i.return}while(i!==null)}R7(r)}catch(O){t=O,ts===r&&r!==null&&(ts=r=r.return);continue}break}while(!0)}function _7(){var e=Zp.current;return Zp.current=Yp,e===null?Yp:e}function Jw(){(ms===0||ms===3||ms===2)&&(ms=4),Es===null||!(Ld&268435455)&&!(b1&268435455)||gc(Es,zs)}function eg(e,t){var r=Ar;Ar|=2;var n=_7();(Es!==e||zs!==t)&&(vl=null,Nd(e,t));do try{vM();break}catch(a){I7(e,a)}while(!0);if(Rw(),Ar=r,Zp.current=n,ts!==null)throw Error(ft(261));return Es=null,zs=0,ms}function vM(){for(;ts!==null;)O7(ts)}function wM(){for(;ts!==null&&!VL();)O7(ts)}function O7(e){var t=L7(e.alternate,e,ni);e.memoizedProps=e.pendingProps,t===null?R7(e):ts=t,Gw.current=null}function R7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=mM(r,t),r!==null){r.flags&=32767,ts=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ms=6,ts=null;return}}else if(r=fM(r,t,ni),r!==null){ts=r;return}if(t=t.sibling,t!==null){ts=t;return}ts=t=e}while(t!==null);ms===0&&(ms=5)}function ld(e,t,r){var n=$r,a=Li.transition;try{Li.transition=null,$r=1,NM(e,t,r,n)}finally{Li.transition=a,$r=n}return null}function NM(e,t,r,n){do Uu();while(bc!==null);if(Ar&6)throw Error(ft(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ft(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(r9(e,i),e===Es&&(ts=Es=null,zs=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Tm||(Tm=!0,M7(Dp,function(){return Uu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Li.transition,Li.transition=null;var o=$r;$r=1;var c=Ar;Ar|=4,Gw.current=null,gM(e,r),k7(r,e),z9(ib),Mp=!!ab,ib=ab=null,e.current=r,xM(r),GL(),Ar=c,$r=o,Li.transition=i}else e.current=r;if(Tm&&(Tm=!1,bc=e,Qp=a),i=e.pendingLanes,i===0&&(kc=null),YL(r.stateNode),Ma(e,zn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Jp)throw Jp=!1,e=Sb,Sb=null,e;return Qp&1&&e.tag!==0&&Uu(),i=e.pendingLanes,i&1?e===Eb?Tf++:(Tf=0,Eb=e):Tf=0,Hc(),null}function Uu(){if(bc!==null){var e=m8(Qp),t=Li.transition,r=$r;try{if(Li.transition=null,$r=16>e?16:e,bc===null)var n=!1;else{if(e=bc,bc=null,Qp=0,Ar&6)throw Error(ft(331));var a=Ar;for(Ar|=4,Pt=e.current;Pt!==null;){var i=Pt,o=i.child;if(Pt.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(Pt=u;Pt!==null;){var f=Pt;switch(f.tag){case 0:case 11:case 15:kf(8,f,i)}var p=f.child;if(p!==null)p.return=f,Pt=p;else for(;Pt!==null;){f=Pt;var b=f.sibling,x=f.return;if(A7(f),f===u){Pt=null;break}if(b!==null){b.return=x,Pt=b;break}Pt=x}}}var N=i.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var w=j.sibling;j.sibling=null,j=w}while(j!==null)}}Pt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Pt=o;else e:for(;Pt!==null;){if(i=Pt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kf(9,i,i.return)}var C=i.sibling;if(C!==null){C.return=i.return,Pt=C;break e}Pt=i.return}}var P=e.current;for(Pt=P;Pt!==null;){o=Pt;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,Pt=k;else e:for(o=P;Pt!==null;){if(c=Pt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:y1(9,c)}}catch(O){Ln(c,c.return,O)}if(c===o){Pt=null;break e}var _=c.sibling;if(_!==null){_.return=c.return,Pt=_;break e}Pt=c.return}}if(Ar=a,Hc(),Bo&&typeof Bo.onPostCommitFiberRoot=="function")try{Bo.onPostCommitFiberRoot(d1,e)}catch{}n=!0}return n}finally{$r=r,Li.transition=t}}return!1}function g4(e,t,r){t=th(r,t),t=m7(e,t,1),e=Ec(e,t,1),t=va(),e!==null&&(N0(e,1,t),Ma(e,t))}function Ln(e,t,r){if(e.tag===3)g4(e,e,r);else for(;t!==null;){if(t.tag===3){g4(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kc===null||!kc.has(n))){e=th(r,e),e=p7(t,e,1),t=Ec(t,e,1),e=va(),t!==null&&(N0(t,1,e),Ma(t,e));break}}t=t.return}}function jM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=va(),e.pingedLanes|=e.suspendedLanes&r,Es===e&&(zs&r)===r&&(ms===4||ms===3&&(zs&130023424)===zs&&500>zn()-Xw?Nd(e,0):Kw|=r),Ma(e,t)}function D7(e,t){t===0&&(e.mode&1?(t=vm,vm<<=1,!(vm&130023424)&&(vm=4194304)):t=1);var r=va();e=Dl(e,t),e!==null&&(N0(e,t,r),Ma(e,r))}function CM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),D7(e,r)}function AM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ft(314))}n!==null&&n.delete(t),D7(e,r)}var L7;L7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Da.current)_a=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _a=!1,hM(e,t,r);_a=!!(e.flags&131072)}else _a=!1,xn&&t.flags&1048576&&U8(t,qp,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;pp(e,t),e=t.pendingProps;var a=Zu(t,oa.current);Fu(t,r),a=zw(null,t,n,e,a,r);var i=Ww();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(n)?(i=!0,zp(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Mw(t),a.updater=x1,t.stateNode=a,a._reactInternals=t,pb(t,n,e,r),t=yb(null,t,n,!0,i,r)):(t.tag=0,xn&&i&&Tw(t),ga(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(pp(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=EM(n),e=lo(n,e),a){case 0:t=xb(null,t,n,e,r);break e;case 1:t=i4(null,t,n,e,r);break e;case 11:t=s4(null,t,n,e,r);break e;case 14:t=a4(null,t,n,lo(n.type,e),r);break e}throw Error(ft(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lo(n,a),xb(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lo(n,a),i4(e,t,n,a,r);case 3:e:{if(b7(t),e===null)throw Error(ft(387));n=t.pendingProps,i=t.memoizedState,a=i.element,V8(e,t),Gp(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=th(Error(ft(423)),t),t=o4(e,t,n,r,a);break e}else if(n!==a){a=th(Error(ft(424)),t),t=o4(e,t,n,r,a);break e}else for(ii=Sc(t.stateNode.containerInfo.firstChild),li=t,xn=!0,uo=null,r=q8(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ju(),n===a){t=Ll(e,t,r);break e}ga(e,t,n,r)}t=t.child}return t;case 5:return G8(t),e===null&&hb(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,ob(n,a)?o=null:i!==null&&ob(n,i)&&(t.flags|=32),y7(e,t),ga(e,t,o,r),t.child;case 6:return e===null&&hb(t),null;case 13:return v7(e,t,r);case 4:return Bw(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Qu(t,null,n,r):ga(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lo(n,a),s4(e,t,n,a,r);case 7:return ga(e,t,t.pendingProps,r),t.child;case 8:return ga(e,t,t.pendingProps.children,r),t.child;case 12:return ga(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,rn(Hp,n._currentValue),n._currentValue=o,i!==null)if(go(i.value,o)){if(i.children===a.children&&!Da.current){t=Ll(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var d=c.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=Tl(-1,r&-r),d.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),fb(i.return,r,t),c.lanes|=r;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ft(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),fb(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ga(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Fu(t,r),a=Fi(a),n=n(a),t.flags|=1,ga(e,t,n,r),t.child;case 14:return n=t.type,a=lo(n,t.pendingProps),a=lo(n.type,a),a4(e,t,n,a,r);case 15:return g7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lo(n,a),pp(e,t),t.tag=1,La(n)?(e=!0,zp(t)):e=!1,Fu(t,r),f7(t,n,a),pb(t,n,a,r),yb(null,t,n,!0,e,r);case 19:return w7(e,t,r);case 22:return x7(e,t,r)}throw Error(ft(156,t.tag))};function M7(e,t){return d8(e,t)}function SM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(e,t,r,n){return new SM(e,t,r,n)}function Qw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function EM(e){if(typeof e=="function")return Qw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yw)return 11;if(e===bw)return 14}return 2}function Tc(e,t){var r=e.alternate;return r===null?(r=Ri(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yp(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Qw(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case bu:return jd(r.children,a,i,t);case xw:o=8,a|=8;break;case F2:return e=Ri(12,r,t,a|2),e.elementType=F2,e.lanes=i,e;case U2:return e=Ri(13,r,t,a),e.elementType=U2,e.lanes=i,e;case $2:return e=Ri(19,r,t,a),e.elementType=$2,e.lanes=i,e;case GE:return v1(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case HE:o=10;break e;case VE:o=9;break e;case yw:o=11;break e;case bw:o=14;break e;case uc:o=16,n=null;break e}throw Error(ft(130,e==null?e:typeof e,""))}return t=Ri(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function jd(e,t,r,n){return e=Ri(7,e,n,t),e.lanes=r,e}function v1(e,t,r,n){return e=Ri(22,e,n,t),e.elementType=GE,e.lanes=r,e.stateNode={isHidden:!1},e}function Py(e,t,r){return e=Ri(6,e,null,t),e.lanes=r,e}function Ty(e,t,r){return t=Ri(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kM(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dy(0),this.expirationTimes=dy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dy(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function e5(e,t,r,n,a,i,o,c,d){return e=new kM(e,t,r,c,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ri(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mw(i),e}function PM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function B7(e){if(!e)return Lc;e=e._reactInternals;e:{if(Jd(e)!==e||e.tag!==1)throw Error(ft(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ft(171))}if(e.tag===1){var r=e.type;if(La(r))return B8(e,r,t)}return t}function F7(e,t,r,n,a,i,o,c,d){return e=e5(r,n,!0,e,a,i,o,c,d),e.context=B7(null),r=e.current,n=va(),a=Pc(r),i=Tl(n,a),i.callback=t??null,Ec(r,i,a),e.current.lanes=a,N0(e,a,n),Ma(e,n),e}function w1(e,t,r,n){var a=t.current,i=va(),o=Pc(a);return r=B7(r),t.context===null?t.context=r:t.pendingContext=r,t=Tl(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ec(a,t,o),e!==null&&(po(e,a,o,i),hp(e,a,o)),o}function tg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function x4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function t5(e,t){x4(e,t),(e=e.alternate)&&x4(e,t)}function TM(){return null}var U7=typeof reportError=="function"?reportError:function(e){console.error(e)};function r5(e){this._internalRoot=e}N1.prototype.render=r5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ft(409));w1(e,t,null,null)};N1.prototype.unmount=r5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Md(function(){w1(null,e,null,null)}),t[Rl]=null}};function N1(e){this._internalRoot=e}N1.prototype.unstable_scheduleHydration=function(e){if(e){var t=x8();e={blockedOn:null,target:e,priority:t};for(var r=0;r<pc.length&&t!==0&&t<pc[r].priority;r++);pc.splice(r,0,e),r===0&&b8(e)}};function n5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function j1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function y4(){}function IM(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=tg(o);i.call(u)}}var o=F7(t,n,e,0,null,!1,!1,"",y4);return e._reactRootContainer=o,e[Rl]=o.current,Hf(e.nodeType===8?e.parentNode:e),Md(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var u=tg(d);c.call(u)}}var d=e5(e,0,!1,null,null,!1,!1,"",y4);return e._reactRootContainer=d,e[Rl]=d.current,Hf(e.nodeType===8?e.parentNode:e),Md(function(){w1(t,d,r,n)}),d}function C1(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var d=tg(o);c.call(d)}}w1(t,o,e,a)}else o=IM(r,t,e,a,n);return tg(o)}p8=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xf(t.pendingLanes);r!==0&&(Nw(t,r|1),Ma(t,zn()),!(Ar&6)&&(rh=zn()+500,Hc()))}break;case 13:Md(function(){var n=Dl(e,1);if(n!==null){var a=va();po(n,e,1,a)}}),t5(e,1)}};jw=function(e){if(e.tag===13){var t=Dl(e,134217728);if(t!==null){var r=va();po(t,e,134217728,r)}t5(e,134217728)}};g8=function(e){if(e.tag===13){var t=Pc(e),r=Dl(e,t);if(r!==null){var n=va();po(r,e,t,n)}t5(e,t)}};x8=function(){return $r};y8=function(e,t){var r=$r;try{return $r=e,t()}finally{$r=r}};Z2=function(e,t,r){switch(t){case"input":if(q2(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=m1(n);if(!a)throw Error(ft(90));XE(n),q2(n,a)}}}break;case"textarea":ZE(e,r);break;case"select":t=r.value,t!=null&&Du(e,!!r.multiple,t,!1)}};s8=Yw;a8=Md;var _M={usingClientEntryPoint:!1,Events:[C0,ju,m1,r8,n8,Yw]},rf={findFiberByHostInstance:md,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OM={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=l8(e),e===null?null:e.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||TM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Im.isDisabled&&Im.supportsFiber)try{d1=Im.inject(OM),Bo=Im}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_M;fi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n5(t))throw Error(ft(200));return PM(e,t,null,r)};fi.createRoot=function(e,t){if(!n5(e))throw Error(ft(299));var r=!1,n="",a=U7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=e5(e,1,!1,null,null,r,!1,n,a),e[Rl]=t.current,Hf(e.nodeType===8?e.parentNode:e),new r5(t)};fi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ft(188)):(e=Object.keys(e).join(","),Error(ft(268,e)));return e=l8(t),e=e===null?null:e.stateNode,e};fi.flushSync=function(e){return Md(e)};fi.hydrate=function(e,t,r){if(!j1(t))throw Error(ft(200));return C1(null,e,t,!0,r)};fi.hydrateRoot=function(e,t,r){if(!n5(e))throw Error(ft(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=U7;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=F7(t,null,e,1,r??null,a,!1,i,o),e[Rl]=t.current,Hf(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new N1(t)};fi.render=function(e,t,r){if(!j1(t))throw Error(ft(200));return C1(null,e,t,!1,r)};fi.unmountComponentAtNode=function(e){if(!j1(e))throw Error(ft(40));return e._reactRootContainer?(Md(function(){C1(null,null,e,!1,function(){e._reactRootContainer=null,e[Rl]=null})}),!0):!1};fi.unstable_batchedUpdates=Yw;fi.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!j1(r))throw Error(ft(200));if(e==null||e._reactInternals===void 0)throw Error(ft(38));return C1(e,t,r,!1,n)};fi.version="18.3.1-next-f1338f8080-20240426";function $7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($7)}catch(e){console.error(e)}}$7(),$E.exports=fi;var s5=$E.exports,b4=s5;M2.createRoot=b4.createRoot,M2.hydrateRoot=b4.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e0.apply(this,arguments)}var vc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vc||(vc={}));const v4="popstate";function RM(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:c}=n.location;return Tb("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:rg(a)}return LM(t,r,null,e)}function Vn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z7(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DM(){return Math.random().toString(36).substr(2,8)}function w4(e,t){return{usr:e.state,key:e.key,idx:t}}function Tb(e,t,r,n){return r===void 0&&(r=null),e0({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ch(t):t,{state:r,key:t&&t.key||n||DM()})}function rg(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ch(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function LM(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,c=vc.Pop,d=null,u=f();u==null&&(u=0,o.replaceState(e0({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=vc.Pop;let w=f(),C=w==null?null:w-u;u=w,d&&d({action:c,location:j.location,delta:C})}function b(w,C){c=vc.Push;let P=Tb(j.location,w,C);u=f()+1;let k=w4(P,u),_=j.createHref(P);try{o.pushState(k,"",_)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(_)}i&&d&&d({action:c,location:j.location,delta:1})}function x(w,C){c=vc.Replace;let P=Tb(j.location,w,C);u=f();let k=w4(P,u),_=j.createHref(P);o.replaceState(k,"",_),i&&d&&d({action:c,location:j.location,delta:0})}function N(w){let C=a.location.origin!=="null"?a.location.origin:a.location.href,P=typeof w=="string"?w:rg(w);return P=P.replace(/ $/,"%20"),Vn(C,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,C)}let j={get action(){return c},get location(){return e(a,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(v4,p),d=w,()=>{a.removeEventListener(v4,p),d=null}},createHref(w){return t(a,w)},createURL:N,encodeLocation(w){let C=N(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:b,replace:x,go(w){return o.go(w)}};return j}var N4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(N4||(N4={}));function MM(e,t,r){return r===void 0&&(r="/"),BM(e,t,r)}function BM(e,t,r,n){let a=typeof t=="string"?Ch(t):t,i=a5(a.pathname||"/",r);if(i==null)return null;let o=W7(e);FM(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=ZM(i);c=KM(o[d],u)}return c}function W7(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Vn(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let u=Ic([n,d.relativePath]),f=r.concat(d);i.children&&i.children.length>0&&(Vn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),W7(i.children,t,f,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:VM(u,i.index),routesMeta:f})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,o);else for(let d of q7(i.path))a(i,o,d)}),t}function q7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=q7(n.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function FM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:GM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const UM=/^:[\w-]+$/,$M=3,zM=2,WM=1,qM=10,HM=-2,j4=e=>e==="*";function VM(e,t){let r=e.split("/"),n=r.length;return r.some(j4)&&(n+=HM),t&&(n+=zM),r.filter(a=>!j4(a)).reduce((a,i)=>a+(UM.test(i)?$M:i===""?WM:qM),n)}function GM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function KM(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],u=c===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=XM({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),b=d.route;if(!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Ic([i,p.pathname]),pathnameBase:tB(Ic([i,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(i=Ic([i,p.pathnameBase]))}return o}function XM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=YM(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((u,f,p)=>{let{paramName:b,isOptional:x}=f;if(b==="*"){let j=c[p]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const N=c[p];return x&&!N?u[b]=void 0:u[b]=(N||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function YM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),z7(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function ZM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return z7(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function a5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function JM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Ch(e):e;return{pathname:r?r.startsWith("/")?r:QM(r,t):t,search:rB(n),hash:nB(a)}}function QM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Iy(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function i5(e,t){let r=eB(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function o5(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Ch(e):(a=e0({},e),Vn(!a.pathname||!a.pathname.includes("?"),Iy("?","pathname","search",a)),Vn(!a.pathname||!a.pathname.includes("#"),Iy("#","pathname","hash",a)),Vn(!a.search||!a.search.includes("#"),Iy("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=r;else{let p=t.length-1;if(!n&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),p-=1;a.pathname=b.join("/")}c=p>=0?t[p]:"/"}let d=JM(a,c),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const Ic=e=>e.join("/").replace(/\/\/+/g,"/"),tB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const H7=["post","put","patch","delete"];new Set(H7);const aB=["get",...H7];new Set(aB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t0(){return t0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t0.apply(this,arguments)}const l5=A.createContext(null),iB=A.createContext(null),Vc=A.createContext(null),A1=A.createContext(null),Go=A.createContext({outlet:null,matches:[],isDataRoute:!1}),V7=A.createContext(null);function oB(e,t){let{relative:r}=t===void 0?{}:t;Ah()||Vn(!1);let{basename:n,navigator:a}=A.useContext(Vc),{hash:i,pathname:o,search:c}=K7(e,{relative:r}),d=o;return n!=="/"&&(d=o==="/"?n:Ic([n,o])),a.createHref({pathname:d,search:c,hash:i})}function Ah(){return A.useContext(A1)!=null}function Sh(){return Ah()||Vn(!1),A.useContext(A1).location}function G7(e){A.useContext(Vc).static||A.useLayoutEffect(e)}function S0(){let{isDataRoute:e}=A.useContext(Go);return e?jB():lB()}function lB(){Ah()||Vn(!1);let e=A.useContext(l5),{basename:t,future:r,navigator:n}=A.useContext(Vc),{matches:a}=A.useContext(Go),{pathname:i}=Sh(),o=JSON.stringify(i5(a,r.v7_relativeSplatPath)),c=A.useRef(!1);return G7(()=>{c.current=!0}),A.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){n.go(u);return}let p=o5(u,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Ic([t,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[t,n,o,i,e])}const cB=A.createContext(null);function dB(e){let t=A.useContext(Go).outlet;return t&&A.createElement(cB.Provider,{value:e},t)}function uB(){let{matches:e}=A.useContext(Go),t=e[e.length-1];return t?t.params:{}}function K7(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=A.useContext(Vc),{matches:a}=A.useContext(Go),{pathname:i}=Sh(),o=JSON.stringify(i5(a,n.v7_relativeSplatPath));return A.useMemo(()=>o5(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function hB(e,t){return fB(e,t)}function fB(e,t,r,n){Ah()||Vn(!1);let{navigator:a}=A.useContext(Vc),{matches:i}=A.useContext(Go),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=Sh(),f;if(t){var p;let w=typeof t=="string"?Ch(t):t;d==="/"||(p=w.pathname)!=null&&p.startsWith(d)||Vn(!1),f=w}else f=u;let b=f.pathname||"/",x=b;if(d!=="/"){let w=d.replace(/^\//,"").split("/");x="/"+b.replace(/^\//,"").split("/").slice(w.length).join("/")}let N=MM(e,{pathname:x}),j=yB(N&&N.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Ic([d,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Ic([d,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&j?A.createElement(A1.Provider,{value:{location:t0({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:vc.Pop}},j):j}function mB(){let e=NB(),t=sB(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:a},r):null,null)}const pB=A.createElement(mB,null);class gB extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?A.createElement(Go.Provider,{value:this.props.routeContext},A.createElement(V7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xB(e){let{routeContext:t,match:r,children:n}=e,a=A.useContext(l5);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(Go.Provider,{value:t},n)}function yB(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,c=(a=r)==null?void 0:a.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Vn(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:b,errors:x}=r,N=p.route.loader&&b[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||N){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,p,b)=>{let x,N=!1,j=null,w=null;r&&(x=c&&p.route.id?c[p.route.id]:void 0,j=p.route.errorElement||pB,d&&(u<0&&b===0?(CB("route-fallback"),N=!0,w=null):u===b&&(N=!0,w=p.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,b+1)),P=()=>{let k;return x?k=j:N?k=w:p.route.Component?k=A.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=f,A.createElement(xB,{match:p,routeContext:{outlet:f,matches:C,isDataRoute:r!=null},children:k})};return r&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?A.createElement(gB,{location:r.location,revalidation:r.revalidation,component:j,error:x,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}var X7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(X7||{}),Y7=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Y7||{});function bB(e){let t=A.useContext(l5);return t||Vn(!1),t}function vB(e){let t=A.useContext(iB);return t||Vn(!1),t}function wB(e){let t=A.useContext(Go);return t||Vn(!1),t}function Z7(e){let t=wB(),r=t.matches[t.matches.length-1];return r.route.id||Vn(!1),r.route.id}function NB(){var e;let t=A.useContext(V7),r=vB(),n=Z7();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function jB(){let{router:e}=bB(X7.UseNavigateStable),t=Z7(Y7.UseNavigateStable),r=A.useRef(!1);return G7(()=>{r.current=!0}),A.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,t0({fromRouteId:t},i)))},[e,t])}const C4={};function CB(e,t,r){C4[e]||(C4[e]=!0)}function AB(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $u(e){let{to:t,replace:r,state:n,relative:a}=e;Ah()||Vn(!1);let{future:i,static:o}=A.useContext(Vc),{matches:c}=A.useContext(Go),{pathname:d}=Sh(),u=S0(),f=o5(t,i5(c,i.v7_relativeSplatPath),d,a==="path"),p=JSON.stringify(f);return A.useEffect(()=>u(JSON.parse(p),{replace:r,state:n,relative:a}),[u,p,a,r,n]),null}function SB(e){return dB(e.context)}function Vr(e){Vn(!1)}function EB(e){let{basename:t="/",children:r=null,location:n,navigationType:a=vc.Pop,navigator:i,static:o=!1,future:c}=e;Ah()&&Vn(!1);let d=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:d,navigator:i,static:o,future:t0({v7_relativeSplatPath:!1},c)}),[d,c,i,o]);typeof n=="string"&&(n=Ch(n));let{pathname:f="/",search:p="",hash:b="",state:x=null,key:N="default"}=n,j=A.useMemo(()=>{let w=a5(f,d);return w==null?null:{location:{pathname:w,search:p,hash:b,state:x,key:N},navigationType:a}},[d,f,p,b,x,N,a]);return j==null?null:A.createElement(Vc.Provider,{value:u},A.createElement(A1.Provider,{children:r,value:j}))}function kB(e){let{children:t,location:r}=e;return hB(Ib(t),r)}new Promise(()=>{});function Ib(e,t){t===void 0&&(t=[]);let r=[];return A.Children.forEach(e,(n,a)=>{if(!A.isValidElement(n))return;let i=[...t,a];if(n.type===A.Fragment){r.push.apply(r,Ib(n.props.children,i));return}n.type!==Vr&&Vn(!1),!n.props.index||!n.props.children||Vn(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ib(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_b.apply(this,arguments)}function PB(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function TB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IB(e,t){return e.button===0&&(!t||t==="_self")&&!TB(e)}const _B=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],OB="6";try{window.__reactRouterVersion=OB}catch{}const RB="startTransition",A4=FE[RB];function DB(e){let{basename:t,children:r,future:n,window:a}=e,i=A.useRef();i.current==null&&(i.current=RM({window:a,v5Compat:!0}));let o=i.current,[c,d]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},f=A.useCallback(p=>{u&&A4?A4(()=>d(p)):d(p)},[d,u]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>AB(n),[n]),A.createElement(EB,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:n})}const LB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bf=A.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:c,target:d,to:u,preventScrollReset:f,viewTransition:p}=t,b=PB(t,_B),{basename:x}=A.useContext(Vc),N,j=!1;if(typeof u=="string"&&MB.test(u)&&(N=u,LB))try{let k=new URL(window.location.href),_=u.startsWith("//")?new URL(k.protocol+u):new URL(u),O=a5(_.pathname,x);_.origin===k.origin&&O!=null?u=O+_.search+_.hash:j=!0}catch{}let w=oB(u,{relative:a}),C=BB(u,{replace:o,state:c,target:d,preventScrollReset:f,relative:a,viewTransition:p});function P(k){n&&n(k),k.defaultPrevented||C(k)}return A.createElement("a",_b({},b,{href:N||w,onClick:j||i?n:P,ref:r,target:d}))});var S4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(S4||(S4={}));var E4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(E4||(E4={}));function BB(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:c}=t===void 0?{}:t,d=S0(),u=Sh(),f=K7(e,{relative:o});return A.useCallback(p=>{if(IB(p,r)){p.preventDefault();let b=n!==void 0?n:rg(u)===rg(f);d(e,{replace:b,state:a,preventScrollReset:i,relative:o,viewTransition:c})}},[u,d,f,n,a,r,e,i,o,c])}function FB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const zu=A.forwardRef(FB);function UB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const $B=A.forwardRef(UB);function zB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const WB=A.forwardRef(zB);function qB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const r0=A.forwardRef(qB);function HB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Ob=A.forwardRef(HB);function VB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const GB=A.forwardRef(VB);function KB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const XB=A.forwardRef(KB);function YB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const n0=A.forwardRef(YB);function ZB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const JB=A.forwardRef(ZB);function QB({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const c5=A.forwardRef(QB);function eF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const Cd=A.forwardRef(eF);function tF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const J7=A.forwardRef(tF);function rF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const nF=A.forwardRef(rF);function sF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const ng=A.forwardRef(sF);function aF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const s0=A.forwardRef(aF);function iF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const oF=A.forwardRef(iF);function lF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const k4=A.forwardRef(lF);function cF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Gn=A.forwardRef(cF);function dF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ad=A.forwardRef(dF);function uF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Rb=A.forwardRef(uF);function hF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Q7=A.forwardRef(hF);function fF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Wo=A.forwardRef(fF);function mF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Uo=A.forwardRef(mF);function pF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const ek=A.forwardRef(pF);function gF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const P4=A.forwardRef(gF);function xF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const yF=A.forwardRef(xF);function bF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Oa=A.forwardRef(bF);function vF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const S1=A.forwardRef(vF);function wF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const NF=A.forwardRef(wF);function jF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const sg=A.forwardRef(jF);function CF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const AF=A.forwardRef(CF);function SF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const E0=A.forwardRef(SF);function EF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const a0=A.forwardRef(EF);function kF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const PF=A.forwardRef(kF);function TF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Db=A.forwardRef(TF);function IF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Lb=A.forwardRef(IF);function _F({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const OF=A.forwardRef(_F);function RF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const E1=A.forwardRef(RF);function DF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const ag=A.forwardRef(DF);function LF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}const MF=A.forwardRef(LF);function BF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const k1=A.forwardRef(BF);function FF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Qd=A.forwardRef(FF);function UF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const tk=A.forwardRef(UF);function $F({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const i0=A.forwardRef($F);function zF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Mc=A.forwardRef(zF);function WF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Bc=A.forwardRef(WF);function qF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const Mi=A.forwardRef(qF);function HF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"}))}const VF=A.forwardRef(HF);function GF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const ig=A.forwardRef(GF);function KF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z"}))}const XF=A.forwardRef(KF);function YF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Mb=A.forwardRef(YF);function ZF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Fc=A.forwardRef(ZF);function JF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const _c=A.forwardRef(JF);function QF({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const eU=A.forwardRef(QF);function tU({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const nh=A.forwardRef(tU);function rU({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const T4=A.forwardRef(rU);function nU({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const rk=A.forwardRef(nU);function sU({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const xo=A.forwardRef(sU);function aU({title:e,titleId:t,...r},n){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?A.createElement("title",{id:t},e):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const $i=A.forwardRef(aU),iU={ADMIN:[{name:"Dashboard",href:"/dashboard",icon:Db},{name:"Shipments",href:"/shipments",icon:zu},{name:"Racks",href:"/racks",icon:Wo},{name:"Materials",href:"/materials",icon:Oa},{name:"Material Reports",href:"/material-reports",icon:s0},{name:"Damage Report",href:"/damage-report",icon:sg},{name:"Moving Jobs",href:"/moving-jobs",icon:_c},{name:"Invoices",href:"/invoices",icon:Oa},{name:"Expenses",href:"/expenses",icon:n0},{name:"Scanner",href:"/scanner",icon:Mi},{name:"Settings",href:"/settings",icon:Rb}],MANAGER:[{name:"Dashboard",href:"/dashboard",icon:Db},{name:"Shipments",href:"/shipments",icon:zu},{name:"Racks",href:"/racks",icon:Wo},{name:"Materials",href:"/materials",icon:Oa},{name:"Material Reports",href:"/material-reports",icon:s0},{name:"Damage Report",href:"/damage-report",icon:sg},{name:"Moving Jobs",href:"/moving-jobs",icon:_c},{name:"Invoices",href:"/invoices",icon:Oa},{name:"Expenses",href:"/expenses",icon:n0},{name:"Scanner",href:"/scanner",icon:Mi}],WORKER:[{name:"My Jobs",href:"/my-jobs",icon:_c},{name:"QR Scanner",href:"/scanner",icon:Mi},{name:"My Tasks",href:"/my-tasks",icon:zu}]},oU=[{name:"Role Management",href:"/admin/roles",icon:ig}],lU=()=>{var d,u,f,p,b,x,N,j,w;const[e,t]=A.useState(!1),[r,n]=A.useState(null),a=Sh(),i=S0();A.useEffect(()=>{const C=localStorage.getItem("user");if(C)try{const P=JSON.parse(C);n(P),P.role==="WORKER"&&a.pathname==="/dashboard"&&i("/scanner",{replace:!0})}catch{console.error("Failed to parse user data")}},[a.pathname,i]);const o=C=>a.pathname.startsWith(C),c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i("/login")};return s.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>t(!1)}),s.jsxs("div",{className:`
          fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
          ${e?"translate-x-0":"-translate-x-full"}
        `,children:[s.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:s.jsx(Wo,{className:"h-5 w-5 text-white"})}),s.jsx("span",{className:"text-xl font-bold text-gray-900",children:"WMS"})]}),s.jsx("button",{onClick:()=>t(!1),className:"lg:hidden text-gray-500 hover:text-gray-700",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:[(r==null?void 0:r.role)&&((d=iU[r.role])==null?void 0:d.map(C=>{const P=C.icon,k=o(C.href);return s.jsxs(bf,{to:C.href,className:`
                  flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors
                  ${k?"bg-primary-50 text-primary-700 border-l-4 border-primary-600":"text-gray-700 hover:bg-gray-100"}
                `,onClick:()=>t(!1),children:[s.jsx(P,{className:`mr-3 h-5 w-5 ${k?"text-primary-600":"text-gray-400"}`}),C.name]},C.name)})),(r==null?void 0:r.role)==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pt-4 pb-2",children:s.jsx("p",{className:"px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Admin"})}),oU.map(C=>{const P=C.icon,k=o(C.href),_=C.href==="/admin/ai-testing";return s.jsxs(bf,{to:C.href,className:`
                      flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors
                      ${k?_?"bg-purple-50 text-purple-700 border-l-4 border-purple-600":"bg-red-50 text-red-700 border-l-4 border-red-600":"text-gray-700 hover:bg-gray-100"}
                    `,onClick:()=>t(!1),children:[s.jsx(P,{className:`mr-3 h-5 w-5 ${k?_?"text-purple-600":"text-red-600":"text-gray-400"}`}),C.name]},C.name)})]})]}),s.jsxs("div",{className:"border-t border-gray-200 p-4 space-y-3",children:[s.jsxs(bf,{to:"/profile",className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors",onClick:()=>t(!1),children:[s.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-primary-600 font-medium",children:((f=(u=r==null?void 0:r.name)==null?void 0:u.charAt(0))==null?void 0:f.toUpperCase())||"U"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(r==null?void 0:r.name)||"User"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:(r==null?void 0:r.email)||"user@demo.com"}),s.jsx("p",{className:"text-xs text-primary-600 font-medium",children:"View Profile "})]})]}),s.jsxs("button",{onClick:c,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[s.jsx(Ob,{className:"mr-3 h-5 w-5"}),"Logout"]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("header",{className:"bg-white shadow-sm z-30",children:s.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[s.jsx("button",{onClick:()=>t(!0),className:"lg:hidden text-gray-500 hover:text-gray-700",children:s.jsx(JB,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1 flex items-center justify-end space-x-4",children:[s.jsxs("div",{className:"hidden md:flex items-center gap-2 px-2 py-1 rounded-lg border border-gray-200 bg-gray-50 text-xs text-gray-600",title:`Environment: ${((b=(p=import.meta)==null?void 0:p.env)==null?void 0:b.MODE)||"dev"}`,children:[s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-emerald-500"}),(((N=(x=import.meta)==null?void 0:x.env)==null?void 0:N.MODE)||"dev").toUpperCase()]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsxs("span",{children:["v",((w=(j=import.meta)==null?void 0:j.env)==null?void 0:w.VITE_APP_VERSION)||`dev-${new Date().toISOString().slice(0,10)}`]}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsx("span",{children:new Date().toLocaleString()})]}),s.jsx("div",{className:"hidden md:block",children:s.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),s.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600",children:[s.jsx(c5,{className:"h-6 w-6"}),s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),s.jsxs(bf,{to:"/profile",className:"flex items-center space-x-2 px-3 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"View Profile",children:[s.jsx(eU,{className:"h-8 w-8"}),s.jsx("span",{className:"hidden md:inline text-sm font-medium",children:(r==null?void 0:r.name)||"Profile"})]}),s.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",title:"Logout",children:[s.jsx(Ob,{className:"h-5 w-5"}),s.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsx(SB,{})})]})]})};function nk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=nk(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function zr(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=nk(e))&&(n&&(n+=" "),n+=t);return n}var cU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function d5(e){if(typeof e!="string")return!1;var t=cU;return t.includes(e)}var dU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function sk(e){if(typeof e!="string")return!1;var t=dU;return t.includes(e)}function ak(e){return typeof e=="string"&&e.startsWith("data-")}function yo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return sk(n)||ak(n)});return Object.fromEntries(t)}function o0(e){if(e==null)return null;if(A.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return yo(t)}return typeof e=="object"&&!Array.isArray(e)?yo(e):null}function zi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return sk(n)||ak(n)||d5(n)});return Object.fromEntries(t)}var uU=["children","width","height","viewBox","className","style","title","desc"];function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bb.apply(null,arguments)}function hU(e,t){if(e==null)return{};var r,n,a=fU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var u5=A.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:c,title:d,desc:u}=e,f=hU(e,uU),p=i||{width:n,height:a,x:0,y:0},b=zr("recharts-surface",o);return A.createElement("svg",Bb({},zi(f),{className:b,width:n,height:a,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),A.createElement("title",null,d),A.createElement("desc",null,u),r)}),mU=["children","className"];function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fb.apply(null,arguments)}function pU(e,t){if(e==null)return{};var r,n,a=gU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ua=A.forwardRef((e,t)=>{var{children:r,className:n}=e,a=pU(e,mU),i=zr("recharts-layer",n);return A.createElement("g",Fb({className:i},zi(a),{ref:t}),r)}),ik=A.createContext(null),xU=()=>A.useContext(ik);function tn(e){return function(){return e}}const ok=Math.cos,og=Math.sin,vo=Math.sqrt,lg=Math.PI,P1=2*lg,Ub=Math.PI,$b=2*Ub,cd=1e-6,yU=$b-cd;function lk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function bU(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lk;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class vU{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lk:bU(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-t,u=a-r,f=o-t,p=c-r,b=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(b>cd)if(!(Math.abs(p*d-u*f)>cd)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,N=a-c,j=d*d+u*u,w=x*x+N*N,C=Math.sqrt(j),P=Math.sqrt(b),k=i*Math.tan((Ub-Math.acos((j+b-w)/(2*C*P)))/2),_=k/P,O=k/C;Math.abs(_-1)>cd&&this._append`L${t+_*f},${r+_*p}`,this._append`A${i},${i},0,0,${+(p*x>f*N)},${this._x1=t+O*d},${this._y1=r+O*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),u=t+c,f=r+d,p=1^o,b=o?a-i:i-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>cd||Math.abs(this._y1-f)>cd)&&this._append`L${u},${f}`,n&&(b<0&&(b=b%$b+$b),b>yU?this._append`A${n},${n},0,1,${p},${t-c},${r-d}A${n},${n},0,1,${p},${this._x1=u},${this._y1=f}`:b>cd&&this._append`A${n},${n},0,${+(b>=Ub)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function h5(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new vU(t)}function f5(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function T1(e){return new ck(e)}function dk(e){return e[0]}function uk(e){return e[1]}function hk(e,t){var r=tn(!0),n=null,a=T1,i=null,o=h5(c);e=typeof e=="function"?e:e===void 0?dk:tn(e),t=typeof t=="function"?t:t===void 0?uk:tn(t);function c(d){var u,f=(d=f5(d)).length,p,b=!1,x;for(n==null&&(i=a(x=o())),u=0;u<=f;++u)!(u<f&&r(p=d[u],u,d))===b&&((b=!b)?i.lineStart():i.lineEnd()),b&&i.point(+e(p,u,d),+t(p,u,d));if(x)return i=null,x+""||null}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:tn(+d),c):e},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:tn(+d),c):t},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:tn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function _m(e,t,r){var n=null,a=tn(!0),i=null,o=T1,c=null,d=h5(u);e=typeof e=="function"?e:e===void 0?dk:tn(+e),t=typeof t=="function"?t:tn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?uk:tn(+r);function u(p){var b,x,N,j=(p=f5(p)).length,w,C=!1,P,k=new Array(j),_=new Array(j);for(i==null&&(c=o(P=d())),b=0;b<=j;++b){if(!(b<j&&a(w=p[b],b,p))===C)if(C=!C)x=b,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),N=b-1;N>=x;--N)c.point(k[N],_[N]);c.lineEnd(),c.areaEnd()}C&&(k[b]=+e(w,b,p),_[b]=+t(w,b,p),c.point(n?+n(w,b,p):k[b],r?+r(w,b,p):_[b]))}if(P)return c=null,P+""||null}function f(){return hk().defined(a).curve(o).context(i)}return u.x=function(p){return arguments.length?(e=typeof p=="function"?p:tn(+p),n=null,u):e},u.x0=function(p){return arguments.length?(e=typeof p=="function"?p:tn(+p),u):e},u.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:tn(+p),u):n},u.y=function(p){return arguments.length?(t=typeof p=="function"?p:tn(+p),r=null,u):t},u.y0=function(p){return arguments.length?(t=typeof p=="function"?p:tn(+p),u):t},u.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:tn(+p),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(p){return arguments.length?(a=typeof p=="function"?p:tn(!!p),u):a},u.curve=function(p){return arguments.length?(o=p,i!=null&&(c=o(i)),u):o},u.context=function(p){return arguments.length?(p==null?i=c=null:c=o(i=p),u):i},u}class fk{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function wU(e){return new fk(e,!0)}function NU(e){return new fk(e,!1)}const m5={draw(e,t){const r=vo(t/lg);e.moveTo(r,0),e.arc(0,0,r,0,P1)}},jU={draw(e,t){const r=vo(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},mk=vo(1/3),CU=mk*2,AU={draw(e,t){const r=vo(t/CU),n=r*mk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},SU={draw(e,t){const r=vo(t),n=-r/2;e.rect(n,n,r,r)}},EU=.8908130915292852,pk=og(lg/10)/og(7*lg/10),kU=og(P1/10)*pk,PU=-ok(P1/10)*pk,TU={draw(e,t){const r=vo(t*EU),n=kU*r,a=PU*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=P1*i/5,c=ok(o),d=og(o);e.lineTo(d*r,-c*r),e.lineTo(c*n-d*a,d*n+c*a)}e.closePath()}},_y=vo(3),IU={draw(e,t){const r=-vo(t/(_y*3));e.moveTo(0,r*2),e.lineTo(-_y*r,-r),e.lineTo(_y*r,-r),e.closePath()}},Ei=-.5,ki=vo(3)/2,zb=1/vo(12),_U=(zb/2+1)*3,OU={draw(e,t){const r=vo(t/_U),n=r/2,a=r*zb,i=n,o=r*zb+r,c=-i,d=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(c,d),e.lineTo(Ei*n-ki*a,ki*n+Ei*a),e.lineTo(Ei*i-ki*o,ki*i+Ei*o),e.lineTo(Ei*c-ki*d,ki*c+Ei*d),e.lineTo(Ei*n+ki*a,Ei*a-ki*n),e.lineTo(Ei*i+ki*o,Ei*o-ki*i),e.lineTo(Ei*c+ki*d,Ei*d-ki*c),e.closePath()}};function RU(e,t){let r=null,n=h5(a);e=typeof e=="function"?e:tn(e||m5),t=typeof t=="function"?t:tn(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:tn(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:tn(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function cg(){}function dg(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function gk(e){this._context=e}gk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DU(e){return new gk(e)}function xk(e){this._context=e}xk.prototype={areaStart:cg,areaEnd:cg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LU(e){return new xk(e)}function yk(e){this._context=e}yk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MU(e){return new yk(e)}function bk(e){this._context=e}bk.prototype={areaStart:cg,areaEnd:cg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function BU(e){return new bk(e)}function I4(e){return e<0?-1:1}function _4(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(I4(i)+I4(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function O4(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Oy(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,c=(i-n)/3;e._context.bezierCurveTo(n+c,a+c*t,i-c,o-c*r,i,o)}function ug(e){this._context=e}ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Oy(this,this._t0,O4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Oy(this,O4(this,r=_4(this,e,t)),r);break;default:Oy(this,this._t0,r=_4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function vk(e){this._context=new wk(e)}(vk.prototype=Object.create(ug.prototype)).point=function(e,t){ug.prototype.point.call(this,t,e)};function wk(e){this._context=e}wk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function FU(e){return new ug(e)}function UU(e){return new vk(e)}function Nk(e){this._context=e}Nk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=R4(e),a=R4(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function R4(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function $U(e){return new Nk(e)}function I1(e,t){this._context=e,this._t=t}I1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function zU(e){return new I1(e,.5)}function WU(e){return new I1(e,0)}function qU(e){return new I1(e,1)}function sh(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,c=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Wb(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function HU(e,t){return e[t]}function VU(e){const t=[];return t.key=e,t}function GU(){var e=tn([]),t=Wb,r=sh,n=HU;function a(i){var o=Array.from(e.apply(this,arguments),VU),c,d=o.length,u=-1,f;for(const p of i)for(c=0,++u;c<d;++c)(o[c][u]=[0,+n(p,o[c].key,u,i)]).data=p;for(c=0,f=f5(t(o));c<d;++c)o[f[c]].index=c;return r(o,f),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:tn(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:tn(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Wb:typeof i=="function"?i:tn(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??sh,a):r},a}function KU(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}sh(e,t)}}function XU(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=e[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}sh(e,t)}}function YU(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,u=0;c<o;++c){for(var f=e[t[c]],p=f[n][1]||0,b=f[n-1][1]||0,x=(p-b)/2,N=0;N<c;++N){var j=e[t[N]],w=j[n][1]||0,C=j[n-1][1]||0;x+=w-C}d+=p,u+=x*p}a[n-1][1]+=a[n-1][0]=r,d&&(r-=u/d)}a[n-1][1]+=a[n-1][0]=r,sh(e,t)}}var _1={},jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(jk);var p5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(p5);var O1={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(O1);var R1={},Ck={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Ck);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck,r=O1;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],o=a.length;if(o===0)return i;let c=0,d="",u="",f=!1;for(a.charCodeAt(0)===46&&(i.push(""),c++);c<o;){const p=a[c];u?p==="\\"&&c+1<o?(c++,d+=a[c]):p===u?u="":d+=p:f?p==='"'||p==="'"?u=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,c++}return d&&i.push(d),i}e.toPath=n})(R1);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jk,r=p5,n=O1,a=R1;function i(c,d,u){if(c==null)return u;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return u;const f=c[d];return f===void 0?r.isDeepKey(d)?i(c,a.toPath(d),u):u:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=c[d];return f===void 0?u:f}default:{if(Array.isArray(d))return o(c,d,u);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return u;const f=c[d];return f===void 0?u:f}}}function o(c,d,u){if(d.length===0)return u;let f=c;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return u;f=f[d[p]]}return f===void 0?u:f}e.get=i})(_1);var ZU=_1.get;const Bd=Vo(ZU);var Ss=e=>e===0?0:e>0?1:-1,Wi=e=>typeof e=="number"&&e!=+e,Ml=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,zt=e=>(typeof e=="number"||e instanceof Number)&&!Wi(e),qo=e=>zt(e)||typeof e=="string",JU=0,l0=e=>{var t=++JU;return"".concat(e||"").concat(t)},ia=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!zt(t)&&typeof t!="string")return n;var i;if(Ml(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Wi(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},Ak=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function $s(e,t,r){return zt(e)&&zt(t)?e+r*(t-e):t}function QU(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Bd(n,t))===r)}var ks=e=>e===null||typeof e>"u",k0=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),e$=["type","size","sizeType"];function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qb.apply(null,arguments)}function D4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function L4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D4(Object(r),!0).forEach(function(n){t$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t$(e,t,r){return(t=r$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r$(e){var t=n$(e,"string");return typeof t=="symbol"?t:t+""}function n$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s$(e,t){if(e==null)return{};var r,n,a=a$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function a$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sk={symbolCircle:m5,symbolCross:jU,symbolDiamond:AU,symbolSquare:SU,symbolStar:TU,symbolTriangle:IU,symbolWye:OU},i$=Math.PI/180,o$=e=>{var t="symbol".concat(k0(e));return Sk[t]||m5},l$=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*i$;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},c$=(e,t)=>{Sk["symbol".concat(k0(e))]=t},g5=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=s$(e,e$),i=L4(L4({},a),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var c=()=>{var b=o$(o),x=RU().type(b).size(l$(r,n,o)),N=x();if(N!==null)return N},{className:d,cx:u,cy:f}=i,p=zi(i);return u===+u&&f===+f&&r===+r?A.createElement("path",qb({},p,{className:zr("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(f,")"),d:c()})):null};g5.registerSymbol=c$;var d$=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(A.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{d5(a)&&(n[a]=i=>r[a](r,i))}),n},u$=(e,t,r)=>n=>(e(t,r,n),null),P0=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];d5(a)&&typeof i=="function"&&(n||(n={}),n[a]=u$(i,t,r))}),n};function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hb.apply(null,arguments)}function M4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(r),!0).forEach(function(n){x5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x5(e,t,r){return(t=f$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e){var t=m$(e,"string");return typeof t=="symbol"?t:t+""}function m$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pi=32;class y5 extends A.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Pi/2,i=Pi/6,o=Pi/3,c=t.inactive?n:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return A.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Pi,y2:a,className:"recharts-legend-icon"});if(d==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Pi,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(d==="rect")return A.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Pi/8,"h").concat(Pi,"v").concat(Pi*3/4,"h").concat(-Pi,"z"),className:"recharts-legend-icon"});if(A.isValidElement(t.legendIcon)){var u=h$({},t);return delete u.legendIcon,A.cloneElement(t.legendIcon,u)}return A.createElement(g5,{fill:c,cx:a,cy:a,size:Pi,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:o}=this.props,c={x:0,y:0,width:Pi,height:Pi},d={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((f,p)=>{var b=f.formatter||a,x=zr({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:f.inactive});if(f.type==="none")return null;var N=f.inactive?i:f.color,j=b?b(f.value,f,p):f.value;return A.createElement("li",Hb({className:x,style:d,key:"legend-item-".concat(p)},P0(this.props,f,p)),A.createElement(u5,{width:r,height:r,viewBox:c,style:u,"aria-label":"".concat(j," legend icon")},this.renderIcon(f,o)),A.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},j))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}x5(y5,"displayName","Legend");x5(y5,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ek={},kk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],c=n(o);a.has(c)||a.set(c,o)}return Array.from(a.values())}e.uniqBy=t})(kk);var b5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(b5);var Pk={},D1={},Tk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Tk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tk;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(D1);var Ik={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Ik);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D1,r=Ik;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Pk);var _k={},Ok={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_1;function r(n){return function(a){return t.get(a,n)}}e.property=r})(Ok);var Rk={},Ry={},Dy={},v5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(v5);var w5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(w5);var N5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(N5);var B4;function p$(){return B4||(B4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j5(),r=v5,n=w5,a=N5;function i(p,b,x){return typeof x!="function"?t.isMatch(p,b):o(p,b,function N(j,w,C,P,k,_){const O=x(j,w,C,P,k,_);return O!==void 0?!!O:o(j,w,N,_)},new Map)}function o(p,b,x,N){if(b===p)return!0;switch(typeof b){case"object":return c(p,b,x,N);case"function":return Object.keys(b).length>0?o(p,{...b},x,N):a.eq(p,b);default:return r.isObject(p)?typeof b=="string"?b==="":!0:a.eq(p,b)}}function c(p,b,x,N){if(b==null)return!0;if(Array.isArray(b))return u(p,b,x,N);if(b instanceof Map)return d(p,b,x,N);if(b instanceof Set)return f(p,b,x,N);const j=Object.keys(b);if(p==null)return j.length===0;if(j.length===0)return!0;if(N&&N.has(b))return N.get(b)===p;N&&N.set(b,p);try{for(let w=0;w<j.length;w++){const C=j[w];if(!n.isPrimitive(p)&&!(C in p)||b[C]===void 0&&p[C]!==void 0||b[C]===null&&p[C]!==null||!x(p[C],b[C],C,p,b,N))return!1}return!0}finally{N&&N.delete(b)}}function d(p,b,x,N){if(b.size===0)return!0;if(!(p instanceof Map))return!1;for(const[j,w]of b.entries()){const C=p.get(j);if(x(C,w,j,p,b,N)===!1)return!1}return!0}function u(p,b,x,N){if(b.length===0)return!0;if(!Array.isArray(p))return!1;const j=new Set;for(let w=0;w<b.length;w++){const C=b[w];let P=!1;for(let k=0;k<p.length;k++){if(j.has(k))continue;const _=p[k];let O=!1;if(x(_,C,w,p,b,N)&&(O=!0),O){j.add(k),P=!0;break}}if(!P)return!1}return!0}function f(p,b,x,N){return b.size===0?!0:p instanceof Set?u([...p],[...b],x,N):!1}e.isMatchWith=i,e.isSetMatch=f}(Dy)),Dy}var F4;function j5(){return F4||(F4=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p$();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(Ry)),Ry}var Dk={},C5={},Lk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Lk);var A5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(A5);var S5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",c="[object Date]",d="[object Map]",u="[object Set]",f="[object Array]",p="[object Function]",b="[object ArrayBuffer]",x="[object Object]",N="[object Error]",j="[object DataView]",w="[object Uint8Array]",C="[object Uint8ClampedArray]",P="[object Uint16Array]",k="[object Uint32Array]",_="[object BigUint64Array]",O="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",U="[object BigInt64Array]",R="[object Float32Array]",z="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=b,e.arrayTag=f,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=_,e.booleanTag=a,e.dataViewTag=j,e.dateTag=c,e.errorTag=N,e.float32ArrayTag=R,e.float64ArrayTag=z,e.functionTag=p,e.int16ArrayTag=$,e.int32ArrayTag=F,e.int8ArrayTag=O,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=P,e.uint32ArrayTag=k,e.uint8ArrayTag=w,e.uint8ClampedArrayTag=C})(S5);var Mk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Mk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lk,r=A5,n=S5,a=w5,i=Mk;function o(f,p){return c(f,void 0,f,new Map,p)}function c(f,p,b,x=new Map,N=void 0){const j=N==null?void 0:N(f,p,b,x);if(j!==void 0)return j;if(a.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const w=new Array(f.length);x.set(f,w);for(let C=0;C<f.length;C++)w[C]=c(f[C],C,b,x,N);return Object.hasOwn(f,"index")&&(w.index=f.index),Object.hasOwn(f,"input")&&(w.input=f.input),w}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const w=new RegExp(f.source,f.flags);return w.lastIndex=f.lastIndex,w}if(f instanceof Map){const w=new Map;x.set(f,w);for(const[C,P]of f)w.set(C,c(P,C,b,x,N));return w}if(f instanceof Set){const w=new Set;x.set(f,w);for(const C of f)w.add(c(C,void 0,b,x,N));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const w=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,w);for(let C=0;C<f.length;C++)w[C]=c(f[C],C,b,x,N);return w}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const w=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,w),d(w,f,b,x,N),w}if(typeof File<"u"&&f instanceof File){const w=new File([f],f.name,{type:f.type});return x.set(f,w),d(w,f,b,x,N),w}if(typeof Blob<"u"&&f instanceof Blob){const w=new Blob([f],{type:f.type});return x.set(f,w),d(w,f,b,x,N),w}if(f instanceof Error){const w=new f.constructor;return x.set(f,w),w.message=f.message,w.name=f.name,w.stack=f.stack,w.cause=f.cause,d(w,f,b,x,N),w}if(f instanceof Boolean){const w=new Boolean(f.valueOf());return x.set(f,w),d(w,f,b,x,N),w}if(f instanceof Number){const w=new Number(f.valueOf());return x.set(f,w),d(w,f,b,x,N),w}if(f instanceof String){const w=new String(f.valueOf());return x.set(f,w),d(w,f,b,x,N),w}if(typeof f=="object"&&u(f)){const w=Object.create(Object.getPrototypeOf(f));return x.set(f,w),d(w,f,b,x,N),w}return f}function d(f,p,b=f,x,N){const j=[...Object.keys(p),...t.getSymbols(p)];for(let w=0;w<j.length;w++){const C=j[w],P=Object.getOwnPropertyDescriptor(f,C);(P==null||P.writable)&&(f[C]=c(p[C],C,b,x,N))}}function u(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=c,e.copyProperties=d})(C5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Dk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j5(),r=Dk;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(Rk);var Bk={},Fk={},Uk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5,r=S5;function n(a,i){return t.cloneDeepWith(a,(o,c,d,u)=>{const f=i==null?void 0:i(o,c,d,u);if(f!==void 0)return f;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(p,a),p}case r.argumentsTag:{const p={};return t.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(Uk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uk;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Fk);var $k={},E5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(E5);var zk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A5;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(zk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p5,r=E5,n=zk,a=R1;function i(o,c){let d;if(Array.isArray(c)?d=c:typeof c=="string"&&t.isDeepKey(c)&&(o==null?void 0:o[c])==null?d=a.toPath(c):d=[c],d.length===0)return!1;let u=o;for(let f=0;f<d.length;f++){const p=d[f];if((u==null||!Object.hasOwn(u,p))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(p)&&p<u.length))return!1;u=u[p]}return!0}e.has=i})($k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j5(),r=O1,n=Fk,a=_1,i=$k;function o(c,d){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return d=n.cloneDeep(d),function(u){const f=a.get(u,c);return f===void 0?i.has(u,c):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=o})(Bk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b5,r=Ok,n=Rk,a=Bk;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(_k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kk,r=b5,n=Pk,a=_k;function i(o,c=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(c)):[]}e.uniqBy=i})(Ek);var g$=Ek.uniqBy;const U4=Vo(g$);function Wk(e,t,r){return t===!0?U4(e,r):typeof t=="function"?U4(e,t):e}var qk={exports:{}},Hk={},Vk={exports:{}},Gk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah=A;function x$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var y$=typeof Object.is=="function"?Object.is:x$,b$=ah.useState,v$=ah.useEffect,w$=ah.useLayoutEffect,N$=ah.useDebugValue;function j$(e,t){var r=t(),n=b$({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return w$(function(){a.value=r,a.getSnapshot=t,Ly(a)&&i({inst:a})},[e,r,t]),v$(function(){return Ly(a)&&i({inst:a}),e(function(){Ly(a)&&i({inst:a})})},[e]),N$(r),r}function Ly(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!y$(e,r)}catch{return!0}}function C$(e,t){return t()}var A$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?C$:j$;Gk.useSyncExternalStore=ah.useSyncExternalStore!==void 0?ah.useSyncExternalStore:A$;Vk.exports=Gk;var S$=Vk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L1=A,E$=S$;function k$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P$=typeof Object.is=="function"?Object.is:k$,T$=E$.useSyncExternalStore,I$=L1.useRef,_$=L1.useEffect,O$=L1.useMemo,R$=L1.useDebugValue;Hk.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=I$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=O$(function(){function d(x){if(!u){if(u=!0,f=x,x=n(x),a!==void 0&&o.hasValue){var N=o.value;if(a(N,x))return p=N}return p=x}if(N=p,P$(f,x))return N;var j=n(x);return a!==void 0&&a(N,j)?(f=x,N):(f=x,p=j)}var u=!1,f,p,b=r===void 0?null:r;return[function(){return d(t())},b===null?void 0:function(){return d(b())}]},[t,r,n,a]);var c=T$(e,i[0],i[1]);return _$(function(){o.hasValue=!0,o.value=c},[c]),R$(c),c};qk.exports=Hk;var D$=qk.exports,k5=A.createContext(null),L$=e=>e,bn=()=>{var e=A.useContext(k5);return e?e.store.dispatch:L$},bp=()=>{},M$=()=>bp,B$=(e,t)=>e===t;function Ft(e){var t=A.useContext(k5);return D$.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:M$,t?t.store.getState:bp,t?t.store.getState:bp,t?e:bp,B$)}function F$(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function U$(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function $$(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var $4=e=>Array.isArray(e)?e:[e];function z$(e){const t=Array.isArray(e[0])?e[0]:e;return $$(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function W$(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var q$=class{constructor(e){this.value=e}deref(){return this.value}},H$=typeof WeakRef<"u"?WeakRef:q$,V$=0,z4=1;function Om(){return{s:V$,v:void 0,o:null,p:null}}function Kk(e,t={}){let r=Om();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var p;let c=r;const{length:d}=arguments;for(let b=0,x=d;b<x;b++){const N=arguments[b];if(typeof N=="function"||typeof N=="object"&&N!==null){let j=c.o;j===null&&(c.o=j=new WeakMap);const w=j.get(N);w===void 0?(c=Om(),j.set(N,c)):c=w}else{let j=c.p;j===null&&(c.p=j=new Map);const w=j.get(N);w===void 0?(c=Om(),j.set(N,c)):c=w}}const u=c;let f;if(c.s===z4)f=c.v;else if(f=e.apply(null,arguments),i++,n){const b=((p=a==null?void 0:a.deref)==null?void 0:p.call(a))??a;b!=null&&n(b,f)&&(f=b,i!==0&&i--),a=typeof f=="object"&&f!==null||typeof f=="function"?new H$(f):f}return u.s=z4,u.v=f,f}return o.clearCache=()=>{r=Om(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function G$(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,c,d={},u=a.pop();typeof u=="object"&&(d=u,u=a.pop()),F$(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...r,...d},{memoize:p,memoizeOptions:b=[],argsMemoize:x=Kk,argsMemoizeOptions:N=[]}=f,j=$4(b),w=$4(N),C=z$(a),P=p(function(){return i++,u.apply(null,arguments)},...j),k=x(function(){o++;const O=W$(C,arguments);return c=P.apply(null,O),c},...w);return Object.assign(k,{resultFunc:u,memoizedResultFunc:P,dependencies:C,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var He=G$(Kk),K$=Object.assign((e,t=He)=>{U$(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,c,d)=>(o[r[d]]=c,o),{}))},{withTypes:()=>K$}),Xk={},Yk={},Zk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),c=t(a);if(o===c&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?c-o:o-c}return 0};e.compareValues=r})(Zk);var Jk={},P5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(P5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P5,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(Jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zk,r=Jk,n=R1;function a(i,o,c,d){if(i==null)return[];c=d?void 0:c,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(x=>String(x));const u=(x,N)=>{let j=x;for(let w=0;w<N.length&&j!=null;++w)j=j[N[w]];return j},f=(x,N)=>N==null||x==null?N:typeof x=="object"&&"key"in x?Object.hasOwn(N,x.key)?N[x.key]:u(N,x.path):typeof x=="function"?x(N):Array.isArray(x)?u(N,x):typeof N=="object"?N[x]:N,p=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(N=>f(N,x))})).slice().sort((x,N)=>{for(let j=0;j<p.length;j++){const w=t.compareValues(x.criteria[j],N.criteria[j],c[j]);if(w!==0)return w}return 0}).map(x=>x.original)}e.orderBy=a})(Yk);var Qk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(c,d)=>{for(let u=0;u<c.length;u++){const f=c[u];Array.isArray(f)&&d<i?o(f,d+1):a.push(f)}};return o(r,0),a}e.flatten=t})(Qk);var T5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E5,r=D1,n=v5,a=N5;function i(o,c,d){return n.isObject(d)&&(typeof c=="number"&&r.isArrayLike(d)&&t.isIndex(c)&&c<d.length||typeof c=="string"&&c in d)?a.eq(d[c],o):!1}e.isIterateeCall=i})(T5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yk,r=Qk,n=T5;function a(i,...o){const c=o.length;return c>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(Xk);var X$=Xk.sortBy;const M1=Vo(X$);var eP=e=>e.legend.settings,Y$=e=>e.legend.size,Z$=e=>e.legend.payload,J$=He([Z$,eP],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?M1(n,r):n});function Q$(){return Ft(J$)}var Rm=1;function tP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=A.useState({height:0,left:0,top:0,width:0}),n=A.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Rm||Math.abs(o.left-t.left)>Rm||Math.abs(o.top-t.top)>Rm||Math.abs(o.width-t.width)>Rm)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Bs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ez=typeof Symbol=="function"&&Symbol.observable||"@@observable",W4=ez,My=()=>Math.random().toString(36).substring(7).split("").join("."),tz={INIT:`@@redux/INIT${My()}`,REPLACE:`@@redux/REPLACE${My()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${My()}`},hg=tz;function I5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function rP(e,t,r){if(typeof e!="function")throw new Error(Bs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bs(1));return r(rP)(e,t)}let n=e,a=t,i=new Map,o=i,c=0,d=!1;function u(){o===i&&(o=new Map,i.forEach((w,C)=>{o.set(C,w)}))}function f(){if(d)throw new Error(Bs(3));return a}function p(w){if(typeof w!="function")throw new Error(Bs(4));if(d)throw new Error(Bs(5));let C=!0;u();const P=c++;return o.set(P,w),function(){if(C){if(d)throw new Error(Bs(6));C=!1,u(),o.delete(P),i=null}}}function b(w){if(!I5(w))throw new Error(Bs(7));if(typeof w.type>"u")throw new Error(Bs(8));if(typeof w.type!="string")throw new Error(Bs(17));if(d)throw new Error(Bs(9));try{d=!0,a=n(a,w)}finally{d=!1}return(i=o).forEach(P=>{P()}),w}function x(w){if(typeof w!="function")throw new Error(Bs(10));n=w,b({type:hg.REPLACE})}function N(){const w=p;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Bs(11));function P(){const _=C;_.next&&_.next(f())}return P(),{unsubscribe:w(P)}},[W4](){return this}}}return b({type:hg.INIT}),{dispatch:b,subscribe:p,getState:f,replaceReducer:x,[W4]:N}}function rz(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hg.INIT})>"u")throw new Error(Bs(12));if(typeof r(void 0,{type:hg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bs(13))})}function nP(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{rz(r)}catch(i){a=i}return function(o={},c){if(a)throw a;let d=!1;const u={};for(let f=0;f<n.length;f++){const p=n[f],b=r[p],x=o[p],N=b(x,c);if(typeof N>"u")throw c&&c.type,new Error(Bs(14));u[p]=N,d=d||N!==x}return d=d||n.length!==Object.keys(o).length,d?u:o}}function fg(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function nz(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Bs(15))};const o={getState:a.getState,dispatch:(d,...u)=>i(d,...u)},c=e.map(d=>d(o));return i=fg(...c)(a.dispatch),{...a,dispatch:i}}}function sP(e){return I5(e)&&"type"in e&&typeof e.type=="string"}var aP=Symbol.for("immer-nothing"),q4=Symbol.for("immer-draftable"),hi=Symbol.for("immer-state");function ho(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ih=Object.getPrototypeOf;function Fd(e){return!!e&&!!e[hi]}function Bl(e){var t;return e?iP(e)||Array.isArray(e)||!!e[q4]||!!((t=e.constructor)!=null&&t[q4])||T0(e)||F1(e):!1}var sz=Object.prototype.constructor.toString();function iP(e){if(!e||typeof e!="object")return!1;const t=ih(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===sz}function mg(e,t){B1(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function B1(e){const t=e[hi];return t?t.type_:Array.isArray(e)?1:T0(e)?2:F1(e)?3:0}function Vb(e,t){return B1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function oP(e,t,r){const n=B1(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function az(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function T0(e){return e instanceof Map}function F1(e){return e instanceof Set}function dd(e){return e.copy_||e.base_}function Gb(e,t){if(T0(e))return new Map(e);if(F1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=iP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[hi];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(ih(e),n)}else{const n=ih(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function _5(e,t=!1){return U1(e)||Fd(e)||!Bl(e)||(B1(e)>1&&Object.defineProperties(e,{set:{value:Dm},add:{value:Dm},clear:{value:Dm},delete:{value:Dm}}),Object.freeze(e),t&&Object.values(e).forEach(r=>_5(r,!0))),e}function Dm(){ho(2)}function U1(e){return Object.isFrozen(e)}var iz={};function Ud(e){const t=iz[e];return t||ho(0,e),t}var c0;function lP(){return c0}function oz(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function H4(e,t){t&&(Ud("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kb(e){Xb(e),e.drafts_.forEach(lz),e.drafts_=null}function Xb(e){e===c0&&(c0=e.parent_)}function V4(e){return c0=oz(c0,e)}function lz(e){const t=e[hi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function G4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[hi].modified_&&(Kb(t),ho(4)),Bl(e)&&(e=pg(t,e),t.parent_||gg(t,e)),t.patches_&&Ud("Patches").generateReplacementPatches_(r[hi].base_,e,t.patches_,t.inversePatches_)):e=pg(t,r,[]),Kb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==aP?e:void 0}function pg(e,t,r){if(U1(t))return t;const n=t[hi];if(!n)return mg(t,(a,i)=>K4(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return gg(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),mg(i,(c,d)=>K4(e,n,a,c,d,r,o)),gg(e,a,!1),r&&e.patches_&&Ud("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function K4(e,t,r,n,a,i,o){if(Fd(a)){const c=i&&t&&t.type_!==3&&!Vb(t.assigned_,n)?i.concat(n):void 0,d=pg(e,a,c);if(oP(r,n,d),Fd(d))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Bl(a)&&!U1(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;pg(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(T0(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&gg(e,a)}}function gg(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_5(t,r)}function cz(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:lP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=O5;r&&(a=[n],i=d0);const{revoke:o,proxy:c}=Proxy.revocable(a,i);return n.draft_=c,n.revoke_=o,c}var O5={get(e,t){if(t===hi)return e;const r=dd(e);if(!Vb(r,t))return dz(e,r,t);const n=r[t];return e.finalized_||!Bl(n)?n:n===By(e.base_,t)?(Fy(e),e.copy_[t]=Zb(n,e)):n},has(e,t){return t in dd(e)},ownKeys(e){return Reflect.ownKeys(dd(e))},set(e,t,r){const n=cP(dd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=By(dd(e),t),i=a==null?void 0:a[hi];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(az(r,a)&&(r!==void 0||Vb(e.base_,t)))return!0;Fy(e),Yb(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return By(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Fy(e),Yb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=dd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ho(11)},getPrototypeOf(e){return ih(e.base_)},setPrototypeOf(){ho(12)}},d0={};mg(O5,(e,t)=>{d0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});d0.deleteProperty=function(e,t){return d0.set.call(this,e,t,void 0)};d0.set=function(e,t,r){return O5.set.call(this,e[0],t,r,e[0])};function By(e,t){const r=e[hi];return(r?dd(r):e)[t]}function dz(e,t,r){var a;const n=cP(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function cP(e,t){if(!(t in e))return;let r=ih(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ih(r)}}function Yb(e){e.modified_||(e.modified_=!0,e.parent_&&Yb(e.parent_))}function Fy(e){e.copy_||(e.copy_=Gb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var uz=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(d=i,...u){return o.produce(d,f=>r.call(this,f,...u))}}typeof r!="function"&&ho(6),n!==void 0&&typeof n!="function"&&ho(7);let a;if(Bl(t)){const i=V4(this),o=Zb(t,void 0);let c=!0;try{a=r(o),c=!1}finally{c?Kb(i):Xb(i)}return H4(i,n),G4(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===aP&&(a=void 0),this.autoFreeze_&&_5(a,!0),n){const i=[],o=[];Ud("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else ho(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,d=>t(d,...c));let n,a;return[this.produce(t,r,(o,c)=>{n=o,a=c}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Bl(e)||ho(8),Fd(e)&&(e=Il(e));const t=V4(this),r=Zb(e,void 0);return r[hi].isManual_=!0,Xb(t),r}finishDraft(e,t){const r=e&&e[hi];(!r||!r.isManual_)&&ho(9);const{scope_:n}=r;return H4(n,t),G4(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ud("Patches").applyPatches_;return Fd(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Zb(e,t){const r=T0(e)?Ud("MapSet").proxyMap_(e,t):F1(e)?Ud("MapSet").proxySet_(e,t):cz(e,t);return(t?t.scope_:lP()).drafts_.push(r),r}function Il(e){return Fd(e)||ho(10,e),dP(e)}function dP(e){if(!Bl(e)||U1(e))return e;const t=e[hi];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Gb(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Gb(e,!0);return mg(r,(n,a)=>{oP(r,n,dP(a))}),t&&(t.finalized_=!1),r}var hz=new uz,uP=hz.produce;function hP(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var fz=hP(),mz=hP,pz=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fg:fg.apply(null,arguments)};function qi(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(ci(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>sP(n)&&n.type===e,r}var fP=class vf extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vf.prototype)}static get[Symbol.species](){return vf}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vf(...t[0].concat(this)):new vf(...t.concat(this))}};function X4(e){return Bl(e)?uP(e,()=>{}):e}function Lm(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function gz(e){return typeof e=="boolean"}var xz=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new fP;return r&&(gz(r)?o.push(fz):o.push(mz(r.extraArgument))),o},mP="RTK_autoBatch",xa=()=>e=>({payload:e,meta:{[mP]:!0}}),Y4=e=>t=>{setTimeout(t,e)},pP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const c=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Y4(10):e.type==="callback"?e.queueNotification:Y4(e.timeout),u=()=>{o=!1,i&&(i=!1,c.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>a&&f(),b=n.subscribe(p);return c.add(f),()=>{b(),c.delete(f)}},dispatch(f){var p;try{return a=!((p=f==null?void 0:f.meta)!=null&&p[mP]),i=!a,i&&(o||(o=!0,d(u))),n.dispatch(f)}finally{a=!0}}})},yz=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new fP(e);return n&&a.push(pP(typeof n=="object"?n:void 0)),a};function bz(e){const t=xz(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(I5(r))c=nP(r);else throw new Error(ci(1));let d;typeof n=="function"?d=n(t):d=t();let u=fg;a&&(u=pz({trace:!1,...typeof a=="object"&&a}));const f=nz(...d),p=yz(f);let b=typeof o=="function"?o(p):p();const x=u(...b);return rP(c,i,x)}function gP(e){const t={},r=[];let n;const a={addCase(i,o){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(ci(28));if(c in t)throw new Error(ci(29));return t[c]=o,a},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function vz(e){return typeof e=="function"}function wz(e,t){let[r,n,a]=gP(t),i;if(vz(e))i=()=>X4(e());else{const c=X4(e);i=()=>c}function o(c=i(),d){let u=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[a]),u.reduce((f,p)=>{if(p)if(Fd(f)){const x=p(f,d);return x===void 0?f:x}else{if(Bl(f))return uP(f,b=>p(b,d));{const b=p(f,d);if(b===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return f},c)}return o.getInitialState=i,o}var Nz="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",jz=(e=21)=>{let t="",r=e;for(;r--;)t+=Nz[Math.random()*64|0];return t},Cz=Symbol.for("rtk-slice-createasyncthunk");function Az(e,t){return`${e}/${t}`}function Sz({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Cz];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(ci(11));const c=(typeof a.reducers=="function"?a.reducers(kz()):a.reducers)||{},d=Object.keys(c),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(_,O){const $=typeof _=="string"?_:_.type;if(!$)throw new Error(ci(12));if($ in u.sliceCaseReducersByType)throw new Error(ci(13));return u.sliceCaseReducersByType[$]=O,f},addMatcher(_,O){return u.sliceMatchers.push({matcher:_,reducer:O}),f},exposeAction(_,O){return u.actionCreators[_]=O,f},exposeCaseReducer(_,O){return u.sliceCaseReducersByName[_]=O,f}};d.forEach(_=>{const O=c[_],$={reducerName:_,type:Az(i,_),createNotation:typeof a.reducers=="function"};Tz(O)?_z($,O,f,t):Pz($,O,f)});function p(){const[_={},O=[],$=void 0]=typeof a.extraReducers=="function"?gP(a.extraReducers):[a.extraReducers],F={..._,...u.sliceCaseReducersByType};return wz(a.initialState,U=>{for(let R in F)U.addCase(R,F[R]);for(let R of u.sliceMatchers)U.addMatcher(R.matcher,R.reducer);for(let R of O)U.addMatcher(R.matcher,R.reducer);$&&U.addDefaultCase($)})}const b=_=>_,x=new Map,N=new WeakMap;let j;function w(_,O){return j||(j=p()),j(_,O)}function C(){return j||(j=p()),j.getInitialState()}function P(_,O=!1){function $(U){let R=U[_];return typeof R>"u"&&O&&(R=Lm(N,$,C)),R}function F(U=b){const R=Lm(x,O,()=>new WeakMap);return Lm(R,U,()=>{const z={};for(const[M,W]of Object.entries(a.selectors??{}))z[M]=Ez(W,U,()=>Lm(N,U,C),O);return z})}return{reducerPath:_,getSelectors:F,get selectors(){return F($)},selectSlice:$}}const k={name:i,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:C,...P(o),injectInto(_,{reducerPath:O,...$}={}){const F=O??o;return _.inject({reducerPath:F,reducer:w},$),{...k,...P(F,!0)}}};return k}}function Ez(e,t,r,n){function a(i,...o){let c=t(i);return typeof c>"u"&&n&&(c=r()),e(c,...o)}return a.unwrapped=e,a}var pi=Sz();function kz(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Pz({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!Iz(n))throw new Error(ci(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?qi(e,o):qi(e))}function Tz(e){return e._reducerDefinitionType==="asyncThunk"}function Iz(e){return e._reducerDefinitionType==="reducerWithPrepare"}function _z({type:e,reducerName:t},r,n,a){if(!a)throw new Error(ci(18));const{payloadCreator:i,fulfilled:o,pending:c,rejected:d,settled:u,options:f}=r,p=a(e,i,f);n.exposeAction(t,p),o&&n.addCase(p.fulfilled,o),c&&n.addCase(p.pending,c),d&&n.addCase(p.rejected,d),u&&n.addMatcher(p.settled,u),n.exposeCaseReducer(t,{fulfilled:o||Mm,pending:c||Mm,rejected:d||Mm,settled:u||Mm})}function Mm(){}var Oz="task",xP="listener",yP="completed",R5="cancelled",Rz=`task-${R5}`,Dz=`task-${yP}`,Jb=`${xP}-${R5}`,Lz=`${xP}-${yP}`,$1=class{constructor(e){_r(this,"name","TaskAbortError");_r(this,"message");this.code=e,this.message=`${Oz} ${R5} (reason: ${e})`}},D5=(e,t)=>{if(typeof e!="function")throw new TypeError(ci(32))},xg=()=>{},bP=(e,t=xg)=>(e.catch(t),e),vP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Sd=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ed=e=>{if(e.aborted){const{reason:t}=e;throw new $1(t)}};function wP(e,t){let r=xg;return new Promise((n,a)=>{const i=()=>a(new $1(e.reason));if(e.aborted){i();return}r=vP(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=xg})}var Mz=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof $1?"cancelled":"rejected",error:r}}finally{t==null||t()}},yg=e=>t=>bP(wP(e,t).then(r=>(Ed(e),r))),NP=e=>{const t=yg(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Wu}=Object,Z4={},z1="listenerMiddleware",Bz=(e,t)=>{const r=n=>vP(e,()=>Sd(n,e.reason));return(n,a)=>{D5(n);const i=new AbortController;r(i);const o=Mz(async()=>{Ed(e),Ed(i.signal);const c=await n({pause:yg(i.signal),delay:NP(i.signal),signal:i.signal});return Ed(i.signal),c},()=>Sd(i,Dz));return a!=null&&a.autoJoin&&t.push(o.catch(xg)),{result:yg(e)(o),cancel(){Sd(i,Rz)}}}},Fz=(e,t)=>{const r=async(n,a)=>{Ed(t);let i=()=>{};const c=[new Promise((d,u)=>{let f=e({predicate:n,effect:(p,b)=>{b.unsubscribe(),d([p,b.getState(),b.getOriginalState()])}});i=()=>{f(),u()}})];a!=null&&c.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await wP(t,Promise.race(c));return Ed(t),d}finally{i()}};return(n,a)=>bP(r(n,a))},jP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=qi(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(ci(21));return D5(i),{predicate:a,type:t,effect:i}},CP=Wu(e=>{const{type:t,predicate:r,effect:n}=jP(e);return{id:jz(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ci(22))}}},{withTypes:()=>CP}),J4=(e,t)=>{const{type:r,effect:n,predicate:a}=jP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Qb=e=>{e.pending.forEach(t=>{Sd(t,Jb)})},Uz=e=>()=>{e.forEach(Qb),e.clear()},Q4=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},AP=Wu(qi(`${z1}/add`),{withTypes:()=>AP}),$z=qi(`${z1}/removeAll`),SP=Wu(qi(`${z1}/remove`),{withTypes:()=>SP}),zz=(...e)=>{console.error(`${z1}/error`,...e)},I0=(e={})=>{const t=new Map,{extra:r,onError:n=zz}=e;D5(n);const a=f=>(f.unsubscribe=()=>t.delete(f.id),t.set(f.id,f),p=>{f.unsubscribe(),p!=null&&p.cancelActive&&Qb(f)}),i=f=>{const p=J4(t,f)??CP(f);return a(p)};Wu(i,{withTypes:()=>i});const o=f=>{const p=J4(t,f);return p&&(p.unsubscribe(),f.cancelActive&&Qb(p)),!!p};Wu(o,{withTypes:()=>o});const c=async(f,p,b,x)=>{const N=new AbortController,j=Fz(i,N.signal),w=[];try{f.pending.add(N),await Promise.resolve(f.effect(p,Wu({},b,{getOriginalState:x,condition:(C,P)=>j(C,P).then(Boolean),take:j,delay:NP(N.signal),pause:yg(N.signal),extra:r,signal:N.signal,fork:Bz(N.signal,w),unsubscribe:f.unsubscribe,subscribe:()=>{t.set(f.id,f)},cancelActiveListeners:()=>{f.pending.forEach((C,P,k)=>{C!==N&&(Sd(C,Jb),k.delete(C))})},cancel:()=>{Sd(N,Jb),f.pending.delete(N)},throwIfCancelled:()=>{Ed(N.signal)}})))}catch(C){C instanceof $1||Q4(n,C,{raisedBy:"effect"})}finally{await Promise.all(w),Sd(N,Lz),f.pending.delete(N)}},d=Uz(t);return{middleware:f=>p=>b=>{if(!sP(b))return p(b);if(AP.match(b))return i(b.payload);if($z.match(b)){d();return}if(SP.match(b))return o(b.payload);let x=f.getState();const N=()=>{if(x===Z4)throw new Error(ci(23));return x};let j;try{if(j=p(b),t.size>0){const w=f.getState(),C=Array.from(t.values());for(const P of C){let k=!1;try{k=P.predicate(b,w,x)}catch(_){k=!1,Q4(n,_,{raisedBy:"predicate"})}k&&c(P,b,f,N)}}}finally{x=Z4}return j},startListening:i,stopListening:o,clearListeners:d}};function ci(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wz={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},EP=pi({name:"chartLayout",initialState:Wz,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:qz,setLayout:Hz,setChartSize:Vz,setScale:Gz}=EP.actions,Kz=EP.reducer;function e6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(r),!0).forEach(function(n){Xz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xz(e,t,r){return(t=Yz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yz(e){var t=Zz(e,"string");return typeof t=="symbol"?t:t+""}function Zz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bg=Math.PI/180,Jz=e=>e*180/Math.PI,rs=(e,t,r,n)=>({x:e+Math.cos(-bg*n)*r,y:t+Math.sin(-bg*n)*r}),kP=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Qz=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},eW=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=Qz({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var c=(r-a)/o,d=Math.acos(c);return n>i&&(d=2*Math.PI-d),{radius:o,angle:Jz(d),angleInRadian:d}},tW=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},rW=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},nW=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=eW({x:r,y:n},t),{innerRadius:o,outerRadius:c}=t;if(a<o||a>c||a===0)return null;var{startAngle:d,endAngle:u}=tW(t),f=i,p;if(d<=u){for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}else{for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}return p?t6(t6({},t),{},{radius:a,angle:rW(f,t)}):null};function PP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function r6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r6(Object(r),!0).forEach(function(n){sW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sW(e,t,r){return(t=aW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aW(e){var t=iW(e,"string");return typeof t=="symbol"?t:t+""}function iW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function An(e,t,r){return ks(e)||ks(t)?r:qo(t)?Bd(e,t,r):typeof t=="function"?t(e):r}var oW=(e,t,r,n,a)=>{var i,o=-1,c=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<c;d++){var u=d>0?r[d-1].coordinate:r[c-1].coordinate,f=r[d].coordinate,p=d>=c-1?r[0].coordinate:r[d+1].coordinate,b=void 0;if(Ss(f-u)!==Ss(p-f)){var x=[];if(Ss(p-f)===Ss(a[1]-a[0])){b=p;var N=f+a[1]-a[0];x[0]=Math.min(N,(N+u)/2),x[1]=Math.max(N,(N+u)/2)}else{b=u;var j=p+a[1]-a[0];x[0]=Math.min(f,(j+f)/2),x[1]=Math.max(f,(j+f)/2)}var w=[Math.min(f,(b+f)/2),Math.max(f,(b+f)/2)];if(e>w[0]&&e<=w[1]||e>=x[0]&&e<=x[1]){({index:o}=r[d]);break}}else{var C=Math.min(u,p),P=Math.max(u,p);if(e>(C+f)/2&&e<=(P+f)/2){({index:o}=r[d]);break}}}else if(t){for(var k=0;k<c;k++)if(k===0&&e<=(t[k].coordinate+t[k+1].coordinate)/2||k>0&&k<c-1&&e>(t[k].coordinate+t[k-1].coordinate)/2&&e<=(t[k].coordinate+t[k+1].coordinate)/2||k===c-1&&e>(t[k].coordinate+t[k-1].coordinate)/2){({index:o}=t[k]);break}}return o},lW=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:c}=t;if((c==="vertical"||c==="horizontal"&&o==="middle")&&i!=="center"&&zt(e[i]))return Oi(Oi({},e),{},{[i]:e[i]+(n||0)});if((c==="horizontal"||c==="vertical"&&i==="center")&&o!=="middle"&&zt(e[o]))return Oi(Oi({},e),{},{[o]:e[o]+(a||0)})}return e},eu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",TP=(e,t,r,n)=>{if(n)return e.map(c=>c.coordinate);var a,i,o=e.map(c=>(c.coordinate===t&&(a=!0),c.coordinate===r&&(i=!0),c.coordinate));return a||o.push(t),i||o.push(r),o},IP=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:c,isCategorical:d,categoricalDomain:u,tickCount:f,ticks:p,niceTicks:b,axisType:x}=e;if(!o)return null;var N=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,j=a==="category"&&o.bandwidth?o.bandwidth()/N:0;if(j=x==="angleAxis"&&i&&i.length>=2?Ss(i[0]-i[1])*2*j:j,p||b){var w=(p||b||[]).map((C,P)=>{var k=n?n.indexOf(C):C;return{coordinate:o(k)+j,value:C,offset:j,index:P}});return w.filter(C=>!Wi(C.coordinate))}return d&&u?u.map((C,P)=>({coordinate:o(C)+j,value:C,index:P,offset:j})):o.ticks&&f!=null?o.ticks(f).map((C,P)=>({coordinate:o(C)+j,value:C,offset:j,index:P})):o.domain().map((C,P)=>({coordinate:o(C)+j,value:n?n[C]:C,index:P,offset:j}))},n6=1e-4,cW=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-n6,i=Math.max(n[0],n[1])+n6,o=e(t[0]),c=e(t[r-1]);(o<a||o>i||c<a||c>i)&&e.domain([t[0],t[r-1]])}},dW=(e,t)=>{if(!t||t.length!==2||!zt(t[0])||!zt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!zt(e[0])||e[0]<r)&&(a[0]=r),(!zt(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},uW=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var c=Wi(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+c,i=e[o][r][1])}},hW=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=Wi(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},fW={sign:uW,expand:KU,none:sh,silhouette:XU,wiggle:YU,positive:hW},mW=(e,t,r)=>{var n=fW[r],a=GU().keys(t).value((i,o)=>+An(i,o,0)).order(Wb).offset(n);return a(e)};function pW(e){return e==null?void 0:String(e)}var s6=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var c=An(i,t.dataKey,t.scale.domain()[o]);return ks(c)?null:t.scale(c)-a/2+n},gW=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},xW=e=>{var t=e.flat(2).filter(zt);return[Math.min(...t),Math.max(...t)]},yW=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],bW=(e,t,r)=>{if(e!=null)return yW(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,c=o.reduce((d,u)=>{var f=PP(u,t,r),p=xW(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},a6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,i6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,L5=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=M1(t,f=>f.coordinate),i=1/0,o=1,c=a.length;o<c;o++){var d=a[o],u=a[o-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function o6(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return Oi(Oi({},t),{},{dataKey:r,payload:n,value:a,name:i})}function W1(e,t){if(e)return String(e);if(typeof t=="string")return t}function vW(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?nW({x:e,y:t},n):null}var wW=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return Oi(Oi(Oi({},n),rs(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var c=a.coordinate,{angle:d}=n;return Oi(Oi(Oi({},n),rs(n.cx,n.cy,c,d)),{},{angle:d,radius:c})}return{x:0,y:0}},NW=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ql=e=>e.layout.width,Hl=e=>e.layout.height,jW=e=>e.layout.scale,_P=e=>e.layout.margin,q1=He(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),H1=He(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),OP="data-recharts-item-index",RP="data-recharts-item-data-key",_0=60;function l6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l6(Object(r),!0).forEach(function(n){CW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CW(e,t,r){return(t=AW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AW(e){var t=SW(e,"string");return typeof t=="symbol"?t:t+""}function SW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EW=e=>e.brush.height;function kW(e){var t=H1(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:_0;return r+a}return r},0)}function PW(e){var t=H1(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:_0;return r+a}return r},0)}function TW(e){var t=q1(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function IW(e){var t=q1(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ps=He([ql,Hl,_P,EW,kW,PW,TW,IW,eP,Y$],(e,t,r,n,a,i,o,c,d,u)=>{var f={left:(r.left||0)+a,right:(r.right||0)+i},p={top:(r.top||0)+o,bottom:(r.bottom||0)+c},b=Bm(Bm({},p),f),x=b.bottom;b.bottom+=n,b=lW(b,d,u);var N=e-b.left-b.right,j=t-b.top-b.bottom;return Bm(Bm({brushBottom:x},b),{},{width:Math.max(N,0),height:Math.max(j,0)})}),_W=He(ps,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),M5=He(ql,Hl,(e,t)=>({x:0,y:0,width:e,height:t})),OW=A.createContext(null),gi=()=>A.useContext(OW)!=null,V1=e=>e.brush,G1=He([V1,ps,_P],(e,t,r)=>({height:e.height,x:zt(e.x)?e.x:t.left,y:zt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:zt(e.width)?e.width:t.width})),DP={},LP={},MP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let o,c=null;const d=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),f=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},p=()=>{u&&f(),j()};let b=null;const x=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,p()},n)},N=()=>{b!==null&&(clearTimeout(b),b=null)},j=()=>{N(),o=void 0,c=null},w=()=>{f()},C=function(...P){if(a!=null&&a.aborted)return;o=this,c=P;const k=b==null;x(),d&&k&&f()};return C.schedule=x,C.cancel=j,C.flush=w,a==null||a.addEventListener("abort",j,{once:!0}),C}e.debounce=t})(MP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MP;function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:c=!0,maxWait:d}=i,u=Array(2);o&&(u[0]="leading"),c&&(u[1]="trailing");let f,p=null;const b=t.debounce(function(...j){f=n.apply(this,j),p=null},a,{edges:u}),x=function(...j){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,j),p=Date.now(),b.cancel(),b.schedule(),f):(b.apply(this,j),f)},N=()=>(b.flush(),f);return x.cancel=b.cancel,x.flush=N,x}e.debounce=r})(LP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP;function r(n,a=0,i={}){const{leading:o=!0,trailing:c=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:c})}e.throttle=r})(DP);var RW=DP.throttle;const DW=Vo(RW);var vg=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},BP=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:o}=r,c=Ml(n)?e:Number(n),d=Ml(a)?t:Number(a);return i&&i>0&&(c?d=c/i:d&&(c=d*i),o&&d>o&&(d=o)),{calculatedWidth:c,calculatedHeight:d}},LW={width:0,height:0,overflow:"visible"},MW={width:0,overflowX:"visible"},BW={height:0,overflowY:"visible"},FW={},UW=e=>{var{width:t,height:r}=e,n=Ml(t),a=Ml(r);return n&&a?LW:n?MW:a?BW:FW};function $W(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function la(e){return Number.isFinite(e)}function oh(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ev.apply(null,arguments)}function c6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function d6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(r),!0).forEach(function(n){zW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zW(e,t,r){return(t=WW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WW(e){var t=qW(e,"string");return typeof t=="symbol"?t:t+""}function qW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FP=A.createContext({width:-1,height:-1});function UP(e){var{children:t,width:r,height:n}=e,a=A.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:A.createElement(FP.Provider,{value:a},t)}var B5=()=>A.useContext(FP),HW=A.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:o=0,minHeight:c,maxHeight:d,children:u,debounce:f=0,id:p,className:b,onResize:x,style:N={}}=e,j=A.useRef(null),w=A.useRef();w.current=x,A.useImperativeHandle(t,()=>j.current);var[C,P]=A.useState({containerWidth:n.width,containerHeight:n.height}),k=A.useCallback((U,R)=>{P(z=>{var M=Math.round(U),W=Math.round(R);return z.containerWidth===M&&z.containerHeight===W?z:{containerWidth:M,containerHeight:W}})},[]);A.useEffect(()=>{var U=W=>{var J,{width:K,height:V}=W[0].contentRect;k(K,V),(J=w.current)===null||J===void 0||J.call(w,K,V)};f>0&&(U=DW(U,f,{trailing:!0,leading:!1}));var R=new ResizeObserver(U),{width:z,height:M}=j.current.getBoundingClientRect();return k(z,M),R.observe(j.current),()=>{R.disconnect()}},[k,f]);var{containerWidth:_,containerHeight:O}=C;vg(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:$,calculatedHeight:F}=BP(_,O,{width:a,height:i,aspect:r,maxHeight:d});return vg($>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,F,a,i,o,c,r),A.createElement("div",{id:p?"".concat(p):void 0,className:zr("recharts-responsive-container",b),style:d6(d6({},N),{},{width:a,height:i,minWidth:o,minHeight:c,maxHeight:d}),ref:j},A.createElement("div",{style:UW({width:a,height:i})},A.createElement(UP,{width:$,height:F},u)))}),tv=A.forwardRef((e,t)=>{var r=B5();if(oh(r.width)&&oh(r.height))return e.children;var{width:n,height:a}=$W({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=BP(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return zt(i)&&zt(o)?A.createElement(UP,{width:i,height:o},e.children):A.createElement(HW,ev({},e,{width:n,height:a,ref:t}))}),K1=()=>{var e,t=gi(),r=Ft(_W),n=Ft(G1),a=(e=Ft(V1))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},VW={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$P=()=>{var e;return(e=Ft(ps))!==null&&e!==void 0?e:VW},F5=()=>Ft(ql),U5=()=>Ft(Hl),GW=()=>Ft(e=>e.layout.margin),kr=e=>e.layout.layoutType,$5=()=>Ft(kr),X1=e=>{var t=bn(),r=gi(),{width:n,height:a}=e,i=B5(),o=n,c=a;return i&&(o=i.width>0?i.width:n,c=i.height>0?i.height:a),A.useEffect(()=>{!r&&oh(o)&&oh(c)&&t(Vz({width:o,height:c}))},[t,r,o,c]),null},KW={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},zP=pi({name:"legend",initialState:KW,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:xa()},removeLegendPayload:{reducer(e,t){var r=Il(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:xa()}}}),{setLegendSize:u6,setLegendSettings:XW,addLegendPayload:WP,removeLegendPayload:qP}=zP.actions,YW=zP.reducer,ZW=["contextPayload"];function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(null,arguments)}function h6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(r),!0).forEach(function(n){z5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z5(e,t,r){return(t=JW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JW(e){var t=QW(e,"string");return typeof t=="symbol"?t:t+""}function QW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eq(e,t){if(e==null)return{};var r,n,a=tq(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tq(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rq(e){return e.value}function nq(e){var{contextPayload:t}=e,r=eq(e,ZW),n=Wk(t,e.payloadUniqBy,rq),a=lh(lh({},r),{},{payload:n});return A.isValidElement(e.content)?A.cloneElement(e.content,a):typeof e.content=="function"?A.createElement(e.content,a):A.createElement(y5,a)}function sq(e,t,r,n,a,i){var{layout:o,align:c,verticalAlign:d}=t,u,f;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&o==="vertical"?u={left:((n||0)-i.width)/2}:u=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?f={top:((a||0)-i.height)/2}:f=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),lh(lh({},u),f)}function aq(e){var t=bn();return A.useEffect(()=>{t(XW(e))},[t,e]),null}function iq(e){var t=bn();return A.useEffect(()=>(t(u6(e)),()=>{t(u6({width:0,height:0}))}),[t,e]),null}function oq(e){var t=Q$(),r=xU(),n=GW(),{width:a,height:i,wrapperStyle:o,portal:c}=e,[d,u]=tP([t]),f=F5(),p=U5();if(f==null||p==null)return null;var b=f-(n.left||0)-(n.right||0),x=ch.getWidthOrHeight(e.layout,i,a,b),N=c?o:lh(lh({position:"absolute",width:(x==null?void 0:x.width)||a||"auto",height:(x==null?void 0:x.height)||i||"auto"},sq(o,e,n,f,p,d)),o),j=c??r;if(j==null)return null;var w=A.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:u},A.createElement(aq,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),A.createElement(iq,{width:d.width,height:d.height}),A.createElement(nq,rv({},e,x,{margin:n,chartWidth:f,chartHeight:p,contextPayload:t})));return s5.createPortal(w,j)}class ch extends A.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&zt(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return A.createElement(oq,this.props)}}z5(ch,"displayName","Legend");z5(ch,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(null,arguments)}function f6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Uy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f6(Object(r),!0).forEach(function(n){lq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lq(e,t,r){return(t=cq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cq(e){var t=dq(e,"string");return typeof t=="symbol"?t:t+""}function dq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uq(e){return Array.isArray(e)&&qo(e[0])&&qo(e[1])?e.join(" ~ "):e}var hq=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:c,wrapperClassName:d,labelClassName:u,label:f,labelFormatter:p,accessibilityLayer:b=!1}=e,x=()=>{if(i&&i.length){var O={padding:0,margin:0},$=(c?M1(i,c):i).map((F,U)=>{if(F.type==="none")return null;var R=F.formatter||o||uq,{value:z,name:M}=F,W=z,J=M;if(R){var K=R(z,M,F,U,i);if(Array.isArray(K))[W,J]=K;else if(K!=null)W=K;else return null}var V=Uy({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},n);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:V},qo(J)?A.createElement("span",{className:"recharts-tooltip-item-name"},J):null,qo(J)?A.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,A.createElement("span",{className:"recharts-tooltip-item-value"},W),A.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:O},$)}return null},N=Uy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Uy({margin:0},a),w=!ks(f),C=w?f:"",P=zr("recharts-default-tooltip",d),k=zr("recharts-tooltip-label",u);w&&p&&i!==void 0&&i!==null&&(C=p(f,i));var _=b?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",nv({className:P,style:N},_),A.createElement("p",{className:k,style:j},A.isValidElement(C)?C:"".concat(C)),x())},nf="recharts-tooltip-wrapper",fq={visibility:"hidden"};function mq(e){var{coordinate:t,translateX:r,translateY:n}=e;return zr(nf,{["".concat(nf,"-right")]:zt(r)&&t&&zt(t.x)&&r>=t.x,["".concat(nf,"-left")]:zt(r)&&t&&zt(t.x)&&r<t.x,["".concat(nf,"-bottom")]:zt(n)&&t&&zt(t.y)&&n>=t.y,["".concat(nf,"-top")]:zt(n)&&t&&zt(t.y)&&n<t.y})}function m6(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:c,viewBox:d,viewBoxDimension:u}=e;if(i&&zt(i[n]))return i[n];var f=r[n]-c-(a>0?a:0),p=r[n]+a;if(t[n])return o[n]?f:p;var b=d[n];if(b==null)return 0;if(o[n]){var x=f,N=b;return x<N?Math.max(p,b):Math.max(f,b)}if(u==null)return 0;var j=p+c,w=b+u;return j>w?Math.max(f,b):Math.max(p,b)}function pq(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function gq(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:c,viewBox:d}=e,u,f,p;return o.height>0&&o.width>0&&r?(f=m6({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),p=m6({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=pq({translateX:f,translateY:p,useTranslate3d:c})):u=fq,{cssProperties:u,cssClasses:mq({translateX:f,translateY:p,coordinate:r})}}function p6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p6(Object(r),!0).forEach(function(n){sv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sv(e,t,r){return(t=xq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xq(e){var t=yq(e,"string");return typeof t=="symbol"?t:t+""}function yq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class bq extends A.PureComponent{constructor(){super(...arguments),sv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),sv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:c,isAnimationActive:d,offset:u,position:f,reverseDirection:p,useTranslate3d:b,viewBox:x,wrapperStyle:N,lastBoundingBox:j,innerRef:w,hasPortalFromProps:C}=this.props,{cssClasses:P,cssProperties:k}=gq({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:f,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:b,viewBox:x}),_=C?{}:Fm(Fm({transition:d&&t?"transform ".concat(n,"ms ").concat(a):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),O=Fm(Fm({},_),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},N);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:P,style:O,ref:w},i)}}var vq=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),tu={devToolsEnabled:!1,isSsr:vq()},HP=()=>Ft(e=>e.rootProps.accessibilityLayer);function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(null,arguments)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(n){wq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wq(e,t,r){return(t=Nq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nq(e){var t=jq(e,"string");return typeof t=="symbol"?t:t+""}function jq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y6={curveBasisClosed:LU,curveBasisOpen:MU,curveBasis:DU,curveBumpX:wU,curveBumpY:NU,curveLinearClosed:BU,curveLinear:T1,curveMonotoneX:FU,curveMonotoneY:UU,curveNatural:$U,curveStep:zU,curveStepAfter:qU,curveStepBefore:WU},Um=e=>la(e.x)&&la(e.y),sf=e=>e.x,af=e=>e.y,Cq=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(k0(e));return(r==="curveMonotone"||r==="curveBump")&&t?y6["".concat(r).concat(t==="vertical"?"Y":"X")]:y6[r]||T1},Aq=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=Cq(t,a),c=i?r.filter(Um):r,d;if(Array.isArray(n)){var u=i?n.filter(p=>Um(p)):n,f=c.map((p,b)=>x6(x6({},p),{},{base:u[b]}));return a==="vertical"?d=_m().y(af).x1(sf).x0(p=>p.base.x):d=_m().x(sf).y1(af).y0(p=>p.base.y),d.defined(Um).curve(o),d(f)}return a==="vertical"&&zt(n)?d=_m().y(af).x1(sf).x0(n):zt(n)?d=_m().x(sf).y1(af).y0(n):d=hk().x(sf).y(af),d.defined(Um).curve(o),d(c)},VP=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Aq(e):n;return A.createElement("path",av({},yo(e),d$(e),{className:zr("recharts-curve",t),d:i===null?void 0:i,ref:a}))},Sq=["x","y","top","left","width","height","className"];function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(null,arguments)}function b6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Eq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b6(Object(r),!0).forEach(function(n){kq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kq(e,t,r){return(t=Pq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pq(e){var t=Tq(e,"string");return typeof t=="symbol"?t:t+""}function Tq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iq(e,t){if(e==null)return{};var r,n,a=_q(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _q(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Oq=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Rq=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:c}=e,d=Iq(e,Sq),u=Eq({x:t,y:r,top:n,left:a,width:i,height:o},d);return!zt(t)||!zt(r)||!zt(i)||!zt(o)||!zt(n)||!zt(a)?null:A.createElement("path",iv({},zi(u),{className:zr("recharts-cross",c),d:Oq(t,r,i,o,n,a)}))};function Dq(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function v6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Lq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v6(Object(r),!0).forEach(function(n){Mq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mq(e,t,r){return(t=Bq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ja(e,t){var r=Lq({},e),n=t,a=Object.keys(t),i=a.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return i}function Uq(){}function $q(e){return e!=null}function w6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(r),!0).forEach(function(n){zq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zq(e,t,r){return(t=Wq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wq(e){var t=qq(e,"string");return typeof t=="symbol"?t:t+""}function qq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hq=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),GP=(e,t,r)=>e.map(n=>"".concat(Hq(n)," ").concat(t,"ms ").concat(r)).join(","),Vq=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),u0=(e,t)=>Object.keys(t).reduce((r,n)=>N6(N6({},r),{},{[n]:e(n,t[n])}),{});function j6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j6(Object(r),!0).forEach(function(n){Gq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gq(e,t,r){return(t=Kq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kq(e){var t=Xq(e,"string");return typeof t=="symbol"?t:t+""}function Xq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wg=(e,t,r)=>e+(t-e)*r,ov=e=>{var{from:t,to:r}=e;return t!==r},KP=(e,t,r)=>{var n=u0((a,i)=>{if(ov(i)){var[o,c]=e(i.from,i.to,i.velocity);return Us(Us({},i),{},{from:o,velocity:c})}return i},t);return r<1?u0((a,i)=>ov(i)?Us(Us({},i),{},{velocity:wg(i.velocity,n[a].velocity,r),from:wg(i.from,n[a].from,r)}):i,t):KP(e,n,r-1)};function Yq(e,t,r,n,a,i){var o,c=n.reduce((b,x)=>Us(Us({},b),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>u0((b,x)=>x.from,c),u=()=>!Object.values(c).filter(ov).length,f=null,p=b=>{o||(o=b);var x=b-o,N=x/r.dt;c=KP(r,c,N),a(Us(Us(Us({},e),t),d())),o=b,u()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{f()})}function Zq(e,t,r,n,a,i,o){var c=null,d=a.reduce((p,b)=>Us(Us({},p),{},{[b]:[e[b],t[b]]}),{}),u,f=p=>{u||(u=p);var b=(p-u)/n,x=u0((j,w)=>wg(...w,r(b)),d);if(i(Us(Us(Us({},e),t),x)),b<1)c=o.setTimeout(f);else{var N=u0((j,w)=>wg(...w,r(1)),d);i(Us(Us(Us({},e),t),N))}};return()=>(c=o.setTimeout(f),()=>{c()})}const Jq=(e,t,r,n,a,i)=>{var o=Vq(e,t);return r.isStepper===!0?Yq(e,t,r,o,a,i):Zq(e,t,r,n,o,a,i)};var Ng=1e-4,XP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],YP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),C6=(e,t)=>r=>{var n=XP(e,t);return YP(n,r)},Qq=(e,t)=>r=>{var n=XP(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return YP(a,r)},A6=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var d=o[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,n,r,a]=d[1].split(")")[0].split(",").map(N=>parseFloat(N)))}}else o.length===4&&([t,n,r,a]=o);var u=C6(t,r),f=C6(n,a),p=Qq(t,r),b=N=>N>1?1:N<0?0:N,x=N=>{for(var j=N>1?1:N,w=j,C=0;C<8;++C){var P=u(w)-j,k=p(w);if(Math.abs(P-j)<Ng||k<Ng)return f(w);w=b(w-P/k)}return f(w)};return x.isStepper=!1,x},eH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,c,d)=>{var u=-(o-c)*r,f=d*n,p=d+(u-f)*a/1e3,b=d*a/1e3+o;return Math.abs(b-c)<Ng&&Math.abs(p)<Ng?[c,0]:[b,p]};return i.isStepper=!0,i.dt=a,i},tH=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A6(e);case"spring":return eH();default:if(e.split("(")[0]==="cubic-bezier")return A6(e)}return typeof e=="function"?e:null};function rH(e){var t,r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[d,...u]=c;if(typeof d=="number"){a=e.setTimeout(i.bind(null,u),d);return}i(d),a=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class nH{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}function sH(){return rH(new nH)}var aH=A.createContext(sH);function iH(e,t){var r=A.useContext(aH);return A.useMemo(()=>t??r(e),[e,t,r])}var oH={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},S6={t:0},$y={t:1};function Y1(e){var t=ja(e,oH),{isActive:r,canBegin:n,duration:a,easing:i,begin:o,onAnimationEnd:c,onAnimationStart:d,children:u}=t,f=iH(t.animationId,t.animationManager),[p,b]=A.useState(r?S6:$y),x=A.useRef(null);return A.useEffect(()=>{r||b($y)},[r]),A.useEffect(()=>{if(!r||!n)return Uq;var N=Jq(S6,$y,tH(i),a,b,f.getTimeoutController()),j=()=>{x.current=N()};return f.start([d,o,j,a,c]),()=>{f.stop(),x.current&&x.current(),c()}},[r,n,a,i,o,d,c,f]),u(p.t)}function Z1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=A.useRef(l0(t)),n=A.useRef(e);return n.current!==e&&(r.current=l0(t),n.current=e),r.current}var lH=["radius"],cH=["radius"];function E6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function k6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E6(Object(r),!0).forEach(function(n){dH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dH(e,t,r){return(t=uH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jg.apply(null,arguments)}function P6(e,t){if(e==null)return{};var r,n,a=fH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var T6=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,c=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,b=4;p<b;p++)f[p]=a[p]>i?i:a[p];u="M".concat(e,",").concat(t+o*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+c*f[0],",").concat(t)),u+="L ".concat(e+r-c*f[1],",").concat(t),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+o*f[1])),u+="L ".concat(e+r,",").concat(t+n-o*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-c*f[2],",").concat(t+n)),u+="L ".concat(e+c*f[3],",").concat(t+n),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-o*f[3])),u+="Z"}else if(i>0&&a===+a&&a>0){var x=Math.min(i,a);u="M ".concat(e,",").concat(t+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+c*x,",").concat(t,`
            L `).concat(e+r-c*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+o*x,`
            L `).concat(e+r,",").concat(t+n-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-c*x,",").concat(t+n,`
            L `).concat(e+c*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-o*x," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},mH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZP=e=>{var t=ja(e,mH),r=A.useRef(null),[n,a]=A.useState(-1);A.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var se=r.current.getTotalLength();se&&a(se)}catch{}},[]);var{x:i,y:o,width:c,height:d,radius:u,className:f}=t,{animationEasing:p,animationDuration:b,animationBegin:x,isAnimationActive:N,isUpdateAnimationActive:j}=t,w=A.useRef(c),C=A.useRef(d),P=A.useRef(i),k=A.useRef(o),_=A.useMemo(()=>({x:i,y:o,width:c,height:d,radius:u}),[i,o,c,d,u]),O=Z1(_,"rectangle-");if(i!==+i||o!==+o||c!==+c||d!==+d||c===0||d===0)return null;var $=zr("recharts-rectangle",f);if(!j){var F=zi(t),{radius:U}=F,R=P6(F,lH);return A.createElement("path",jg({},R,{radius:typeof u=="number"?u:void 0,className:$,d:T6(i,o,c,d,u)}))}var z=w.current,M=C.current,W=P.current,J=k.current,K="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),me=GP(["strokeDasharray"],b,typeof p=="string"?p:void 0);return A.createElement(Y1,{animationId:O,key:O,canBegin:n>0,duration:b,easing:p,isActive:j,begin:x},se=>{var oe=$s(z,c,se),ye=$s(M,d,se),we=$s(W,i,se),te=$s(J,o,se);r.current&&(w.current=oe,C.current=ye,P.current=we,k.current=te);var G;N?se>0?G={transition:me,strokeDasharray:V}:G={strokeDasharray:K}:G={strokeDasharray:V};var Q=zi(t),{radius:le}=Q,ve=P6(Q,cH);return A.createElement("path",jg({},ve,{radius:typeof u=="number"?u:void 0,className:$,d:T6(we,te,oe,ye,u),ref:r,style:k6(k6({},G),t.style)}))})};function JP(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=rs(t,r,n,a),c=rs(t,r,n,i);return{points:[o,c],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function lv(){return lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lv.apply(null,arguments)}var pH=(e,t)=>{var r=Ss(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},$m=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:c,cornerIsExternal:d}=e,u=c*(o?1:-1)+n,f=Math.asin(c/u)/bg,p=d?a:a+i*f,b=rs(t,r,u,p),x=rs(t,r,n,p),N=d?a-i*f:a,j=rs(t,r,u*Math.cos(f*bg),N);return{center:b,circleTangency:x,lineTangency:j,theta:f}},QP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,c=pH(i,o),d=i+c,u=rs(t,r,a,i),f=rs(t,r,a,d),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var b=rs(t,r,n,i),x=rs(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=d),`,
            `).concat(b.x,",").concat(b.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},gH=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u}=e,f=Ss(u-d),{circleTangency:p,lineTangency:b,theta:x}=$m({cx:t,cy:r,radius:a,angle:d,sign:f,cornerRadius:i,cornerIsExternal:c}),{circleTangency:N,lineTangency:j,theta:w}=$m({cx:t,cy:r,radius:a,angle:u,sign:-f,cornerRadius:i,cornerIsExternal:c}),C=c?Math.abs(d-u):Math.abs(d-u)-x-w;if(C<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):QP({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:d,endAngle:u});var P="M ".concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(n>0){var{circleTangency:k,lineTangency:_,theta:O}=$m({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),{circleTangency:$,lineTangency:F,theta:U}=$m({cx:t,cy:r,radius:n,angle:u,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),R=c?Math.abs(d-u):Math.abs(d-u)-O-U;if(R<0&&i===0)return"".concat(P,"L").concat(t,",").concat(r,"Z");P+="L".concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat($.x,",").concat($.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(R>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,"Z")}else P+="L".concat(t,",").concat(r,"Z");return P},xH={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},eT=e=>{var t=ja(e,xH),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f,className:p}=t;if(i<a||u===f)return null;var b=zr("recharts-sector",p),x=i-a,N=ia(o,x,0,!0),j;return N>0&&Math.abs(u-f)<360?j=gH({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(N,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):j=QP({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:f}),A.createElement("path",lv({},zi(t),{className:b,d:j}))};function yH(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:c,cy:d,innerRadius:u,outerRadius:f,angle:p}=t,b=rs(c,d,u,p),x=rs(c,d,f,p);n=b.x,a=b.y,i=x.x,o=x.y}else return JP(t);return[{x:n,y:a},{x:i,y:o}]}var tT={},rT={},nT={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P5;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(nT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nT;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(rT);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T5,r=rT;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((i-a)/(o||1)),0),d=new Array(c);for(let u=0;u<c;u++)d[u]=a,a+=o;return d}e.range=n})(tT);var bH=tT.range;const sT=Vo(bH);function Oc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vH(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function W5(e){let t,r,n;e.length!==2?(t=Oc,r=(c,d)=>Oc(e(c),d),n=(c,d)=>e(c)-d):(t=e===Oc||e===vH?e:wH,r=e,n=e);function a(c,d,u=0,f=c.length){if(u<f){if(t(d,d)!==0)return f;do{const p=u+f>>>1;r(c[p],d)<0?u=p+1:f=p}while(u<f)}return u}function i(c,d,u=0,f=c.length){if(u<f){if(t(d,d)!==0)return f;do{const p=u+f>>>1;r(c[p],d)<=0?u=p+1:f=p}while(u<f)}return u}function o(c,d,u=0,f=c.length){const p=a(c,d,u,f-1);return p>u&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:a,center:o,right:i}}function wH(){return 0}function aT(e){return e===null?NaN:+e}function*NH(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const jH=W5(Oc),O0=jH.right;W5(aT).center;class I6 extends Map{constructor(t,r=SH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(_6(this,t))}has(t){return super.has(_6(this,t))}set(t,r){return super.set(CH(this,t),r)}delete(t){return super.delete(AH(this,t))}}function _6({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function CH({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function AH({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function SH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function EH(e=Oc){if(e===Oc)return iT;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function iT(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kH=Math.sqrt(50),PH=Math.sqrt(10),TH=Math.sqrt(2);function Cg(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=kH?10:i>=PH?5:i>=TH?2:1;let c,d,u;return a<0?(u=Math.pow(10,-a)/o,c=Math.round(e*u),d=Math.round(t*u),c/u<e&&++c,d/u>t&&--d,u=-u):(u=Math.pow(10,a)*o,c=Math.round(e/u),d=Math.round(t/u),c*u<e&&++c,d*u>t&&--d),d<c&&.5<=r&&r<2?Cg(e,t,r*2):[c,d,u]}function cv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Cg(t,e,r):Cg(e,t,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let u=0;u<c;++u)d[u]=(i-u)/-o;else for(let u=0;u<c;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<c;++u)d[u]=(a+u)/-o;else for(let u=0;u<c;++u)d[u]=(a+u)*o;return d}function dv(e,t,r){return t=+t,e=+e,r=+r,Cg(e,t,r)[2]}function uv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?dv(t,e,r):dv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function O6(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function R6(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function oT(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?iT:EH(a);n>r;){if(n-r>600){const d=n-r+1,u=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),b=.5*Math.sqrt(f*p*(d-p)/d)*(u-d/2<0?-1:1),x=Math.max(r,Math.floor(t-u*p/d+b)),N=Math.min(n,Math.floor(t+(d-u)*p/d+b));oT(e,t,x,N,a)}const i=e[t];let o=r,c=n;for(of(e,r,t),a(e[n],i)>0&&of(e,r,n);o<c;){for(of(e,o,c),++o,--c;a(e[o],i)<0;)++o;for(;a(e[c],i)>0;)--c}a(e[r],i)===0?of(e,r,c):(++c,of(e,c,n)),c<=t&&(r=c+1),t<=c&&(n=c-1)}return e}function of(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function IH(e,t,r){if(e=Float64Array.from(NH(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return R6(e);if(t>=1)return O6(e);var n,a=(n-1)*t,i=Math.floor(a),o=O6(oT(e,i).subarray(0,i+1)),c=R6(e.subarray(i+1));return o+(c-o)*(a-i)}}function _H(e,t,r=aT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),c=+r(e[i+1],i+1,e);return o+(c-o)*(a-i)}}function OH(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Gi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hv=Symbol("implicit");function q5(){var e=new I6,t=[],r=[],n=hv;function a(i){let o=e.get(i);if(o===void 0){if(n!==hv)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new I6;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return q5(t,r).unknown(n)},Gi.apply(a,arguments),a}function H5(){var e=q5().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,c=!1,d=0,u=0,f=.5;delete e.unknown;function p(){var b=t().length,x=a<n,N=x?a:n,j=x?n:a;i=(j-N)/Math.max(1,b-d+u*2),c&&(i=Math.floor(i)),N+=(j-N-i*(b-d))*f,o=i*(1-d),c&&(N=Math.round(N),o=Math.round(o));var w=OH(b).map(function(C){return N+i*C});return r(x?w.reverse():w)}return e.domain=function(b){return arguments.length?(t(b),p()):t()},e.range=function(b){return arguments.length?([n,a]=b,n=+n,a=+a,p()):[n,a]},e.rangeRound=function(b){return[n,a]=b,n=+n,a=+a,c=!0,p()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(b){return arguments.length?(c=!!b,p()):c},e.padding=function(b){return arguments.length?(d=Math.min(1,u=+b),p()):d},e.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),p()):d},e.paddingOuter=function(b){return arguments.length?(u=+b,p()):u},e.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),p()):f},e.copy=function(){return H5(t(),[n,a]).round(c).paddingInner(d).paddingOuter(u).align(f)},Gi.apply(p(),arguments)}function lT(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lT(t())},e}function RH(){return lT(H5.apply(null,arguments).paddingInner(1))}function V5(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function R0(){}var h0=.7,Ag=1/h0,qu="\\s*([+-]?\\d+)\\s*",f0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DH=/^#([0-9a-f]{3,8})$/,LH=new RegExp(`^rgb\\(${qu},${qu},${qu}\\)$`),MH=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),BH=new RegExp(`^rgba\\(${qu},${qu},${qu},${f0}\\)$`),FH=new RegExp(`^rgba\\(${$o},${$o},${$o},${f0}\\)$`),UH=new RegExp(`^hsl\\(${f0},${$o},${$o}\\)$`),$H=new RegExp(`^hsla\\(${f0},${$o},${$o},${f0}\\)$`),D6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V5(R0,m0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:L6,formatHex:L6,formatHex8:zH,formatHsl:WH,formatRgb:M6,toString:M6});function L6(){return this.rgb().formatHex()}function zH(){return this.rgb().formatHex8()}function WH(){return dT(this).formatHsl()}function M6(){return this.rgb().formatRgb()}function m0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=DH.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?B6(t):r===3?new Ra(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?zm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?zm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LH.exec(e))?new Ra(t[1],t[2],t[3],1):(t=MH.exec(e))?new Ra(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BH.exec(e))?zm(t[1],t[2],t[3],t[4]):(t=FH.exec(e))?zm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=UH.exec(e))?$6(t[1],t[2]/100,t[3]/100,1):(t=$H.exec(e))?$6(t[1],t[2]/100,t[3]/100,t[4]):D6.hasOwnProperty(e)?B6(D6[e]):e==="transparent"?new Ra(NaN,NaN,NaN,0):null}function B6(e){return new Ra(e>>16&255,e>>8&255,e&255,1)}function zm(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ra(e,t,r,n)}function qH(e){return e instanceof R0||(e=m0(e)),e?(e=e.rgb(),new Ra(e.r,e.g,e.b,e.opacity)):new Ra}function fv(e,t,r,n){return arguments.length===1?qH(e):new Ra(e,t,r,n??1)}function Ra(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}V5(Ra,fv,cT(R0,{brighter(e){return e=e==null?Ag:Math.pow(Ag,e),new Ra(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?h0:Math.pow(h0,e),new Ra(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ra(kd(this.r),kd(this.g),kd(this.b),Sg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F6,formatHex:F6,formatHex8:HH,formatRgb:U6,toString:U6}));function F6(){return`#${xd(this.r)}${xd(this.g)}${xd(this.b)}`}function HH(){return`#${xd(this.r)}${xd(this.g)}${xd(this.b)}${xd((isNaN(this.opacity)?1:this.opacity)*255)}`}function U6(){const e=Sg(this.opacity);return`${e===1?"rgb(":"rgba("}${kd(this.r)}, ${kd(this.g)}, ${kd(this.b)}${e===1?")":`, ${e})`}`}function Sg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function kd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xd(e){return e=kd(e),(e<16?"0":"")+e.toString(16)}function $6(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fo(e,t,r,n)}function dT(e){if(e instanceof fo)return new fo(e.h,e.s,e.l,e.opacity);if(e instanceof R0||(e=m0(e)),!e)return new fo;if(e instanceof fo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(t===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-t)/c+2:o=(t-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new fo(o,c,d,e.opacity)}function VH(e,t,r,n){return arguments.length===1?dT(e):new fo(e,t,r,n??1)}function fo(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}V5(fo,VH,cT(R0,{brighter(e){return e=e==null?Ag:Math.pow(Ag,e),new fo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?h0:Math.pow(h0,e),new fo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ra(zy(e>=240?e-240:e+120,a,n),zy(e,a,n),zy(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new fo(z6(this.h),Wm(this.s),Wm(this.l),Sg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sg(this.opacity);return`${e===1?"hsl(":"hsla("}${z6(this.h)}, ${Wm(this.s)*100}%, ${Wm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function z6(e){return e=(e||0)%360,e<0?e+360:e}function Wm(e){return Math.max(0,Math.min(1,e||0))}function zy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const G5=e=>()=>e;function GH(e,t){return function(r){return e+r*t}}function KH(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function XH(e){return(e=+e)==1?uT:function(t,r){return r-t?KH(t,r,e):G5(isNaN(t)?r:t)}}function uT(e,t){var r=t-e;return r?GH(e,r):G5(isNaN(e)?t:e)}const W6=function e(t){var r=XH(t);function n(a,i){var o=r((a=fv(a)).r,(i=fv(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),u=uT(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=c(f),a.b=d(f),a.opacity=u(f),a+""}}return n.gamma=e,n}(1);function YH(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function ZH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function JH(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Eh(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function QH(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Eg(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function eV(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Eh(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var mv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wy=new RegExp(mv.source,"g");function tV(e){return function(){return e}}function rV(e){return function(t){return e(t)+""}}function nV(e,t){var r=mv.lastIndex=Wy.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(e=e+"",t=t+"";(n=mv.exec(e))&&(a=Wy.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:Eg(n,a)})),r=Wy.lastIndex;return r<t.length&&(i=t.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?rV(d[0].x):tV(t):(t=d.length,function(u){for(var f=0,p;f<t;++f)c[(p=d[f]).i]=p.x(u);return c.join("")})}function Eh(e,t){var r=typeof t,n;return t==null||r==="boolean"?G5(t):(r==="number"?Eg:r==="string"?(n=m0(t))?(t=n,W6):nV:t instanceof m0?W6:t instanceof Date?QH:ZH(t)?YH:Array.isArray(t)?JH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?eV:Eg)(e,t)}function K5(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function sV(e,t){t===void 0&&(t=e,e=Eh);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function aV(e){return function(){return e}}function kg(e){return+e}var q6=[0,1];function ba(e){return e}function pv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:aV(isNaN(t)?NaN:.5)}function iV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function oV(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=pv(a,n),i=r(o,i)):(n=pv(n,a),i=r(i,o)),function(c){return i(n(c))}}function lV(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=pv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(c){var d=O0(e,c,1,n)-1;return i[d](a[d](c))}}function D0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function J1(){var e=q6,t=q6,r=Eh,n,a,i,o=ba,c,d,u;function f(){var b=Math.min(e.length,t.length);return o!==ba&&(o=iV(e[0],e[b-1])),c=b>2?lV:oV,d=u=null,p}function p(b){return b==null||isNaN(b=+b)?i:(d||(d=c(e.map(n),t,r)))(n(o(b)))}return p.invert=function(b){return o(a((u||(u=c(t,e.map(n),Eg)))(b)))},p.domain=function(b){return arguments.length?(e=Array.from(b,kg),f()):e.slice()},p.range=function(b){return arguments.length?(t=Array.from(b),f()):t.slice()},p.rangeRound=function(b){return t=Array.from(b),r=K5,f()},p.clamp=function(b){return arguments.length?(o=b?!0:ba,f()):o!==ba},p.interpolate=function(b){return arguments.length?(r=b,f()):r},p.unknown=function(b){return arguments.length?(i=b,p):i},function(b,x){return n=b,a=x,f()}}function X5(){return J1()(ba,ba)}function cV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Pg(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function dh(e){return e=Pg(Math.abs(e)),e?e[1]:NaN}function dV(e,t){return function(r,n){for(var a=r.length,i=[],o=0,c=e[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=e[o=(o+1)%e.length];return i.reverse().join(t)}}function uV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var hV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function p0(e){if(!(t=hV.exec(e)))throw new Error("invalid format: "+e);var t;return new Y5({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}p0.prototype=Y5.prototype;function Y5(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Y5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fV(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var hT;function mV(e,t){var r=Pg(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(hT=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Pg(e,Math.max(0,t+i-1))[0]}function H6(e,t){var r=Pg(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const V6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:cV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>H6(e*100,t),r:H6,s:mV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function G6(e){return e}var K6=Array.prototype.map,X6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pV(e){var t=e.grouping===void 0||e.thousands===void 0?G6:dV(K6.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?G6:uV(K6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(p){p=p0(p);var b=p.fill,x=p.align,N=p.sign,j=p.symbol,w=p.zero,C=p.width,P=p.comma,k=p.precision,_=p.trim,O=p.type;O==="n"?(P=!0,O="g"):V6[O]||(k===void 0&&(k=12),_=!0,O="g"),(w||b==="0"&&x==="=")&&(w=!0,b="0",x="=");var $=j==="$"?r:j==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",F=j==="$"?n:/[%p]/.test(O)?o:"",U=V6[O],R=/[defgprs%]/.test(O);k=k===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function z(M){var W=$,J=F,K,V,me;if(O==="c")J=U(M)+J,M="";else{M=+M;var se=M<0||1/M<0;if(M=isNaN(M)?d:U(Math.abs(M),k),_&&(M=fV(M)),se&&+M==0&&N!=="+"&&(se=!1),W=(se?N==="("?N:c:N==="-"||N==="("?"":N)+W,J=(O==="s"?X6[8+hT/3]:"")+J+(se&&N==="("?")":""),R){for(K=-1,V=M.length;++K<V;)if(me=M.charCodeAt(K),48>me||me>57){J=(me===46?a+M.slice(K+1):M.slice(K))+J,M=M.slice(0,K);break}}}P&&!w&&(M=t(M,1/0));var oe=W.length+M.length+J.length,ye=oe<C?new Array(C-oe+1).join(b):"";switch(P&&w&&(M=t(ye+M,ye.length?C-J.length:1/0),ye=""),x){case"<":M=W+M+J+ye;break;case"=":M=W+ye+M+J;break;case"^":M=ye.slice(0,oe=ye.length>>1)+W+M+J+ye.slice(oe);break;default:M=ye+W+M+J;break}return i(M)}return z.toString=function(){return p+""},z}function f(p,b){var x=u((p=p0(p),p.type="f",p)),N=Math.max(-8,Math.min(8,Math.floor(dh(b)/3)))*3,j=Math.pow(10,-N),w=X6[8+N/3];return function(C){return x(j*C)+w}}return{format:u,formatPrefix:f}}var qm,Z5,fT;gV({thousands:",",grouping:[3],currency:["$",""]});function gV(e){return qm=pV(e),Z5=qm.format,fT=qm.formatPrefix,qm}function xV(e){return Math.max(0,-dh(Math.abs(e)))}function yV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dh(t)/3)))*3-dh(Math.abs(e)))}function bV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dh(t)-dh(e))+1}function mT(e,t,r,n){var a=uv(e,t,r),i;switch(n=p0(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=yV(a,o))&&(n.precision=i),fT(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=bV(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=xV(a))&&(n.precision=i-(n.type==="%")*2);break}}return Z5(n)}function Gc(e){var t=e.domain;return e.ticks=function(r){var n=t();return cv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return mT(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],c=n[i],d,u,f=10;for(c<o&&(u=o,o=c,c=u,u=a,a=i,i=u);f-- >0;){if(u=dv(o,c,r),u===d)return n[a]=o,n[i]=c,t(n);if(u>0)o=Math.floor(o/u)*u,c=Math.ceil(c/u)*u;else if(u<0)o=Math.ceil(o*u)/u,c=Math.floor(c*u)/u;else break;d=u}return e},e}function pT(){var e=X5();return e.copy=function(){return D0(e,pT())},Gi.apply(e,arguments),Gc(e)}function gT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,kg),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return gT(e).unknown(t)},e=arguments.length?Array.from(e,kg):[0,1],Gc(r)}function xT(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function Y6(e){return Math.log(e)}function Z6(e){return Math.exp(e)}function vV(e){return-Math.log(-e)}function wV(e){return-Math.exp(-e)}function NV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jV(e){return e===10?NV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function CV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function J6(e){return(t,r)=>-e(-t,r)}function J5(e){const t=e(Y6,Z6),r=t.domain;let n=10,a,i;function o(){return a=CV(n),i=jV(n),r()[0]<0?(a=J6(a),i=J6(i),e(vV,wV)):e(Y6,Z6),t}return t.base=function(c){return arguments.length?(n=+c,o()):n},t.domain=function(c){return arguments.length?(r(c),o()):r()},t.ticks=c=>{const d=r();let u=d[0],f=d[d.length-1];const p=f<u;p&&([u,f]=[f,u]);let b=a(u),x=a(f),N,j;const w=c==null?10:+c;let C=[];if(!(n%1)&&x-b<w){if(b=Math.floor(b),x=Math.ceil(x),u>0){for(;b<=x;++b)for(N=1;N<n;++N)if(j=b<0?N/i(-b):N*i(b),!(j<u)){if(j>f)break;C.push(j)}}else for(;b<=x;++b)for(N=n-1;N>=1;--N)if(j=b>0?N/i(-b):N*i(b),!(j<u)){if(j>f)break;C.push(j)}C.length*2<w&&(C=cv(u,f,w))}else C=cv(b,x,Math.min(x-b,w)).map(i);return p?C.reverse():C},t.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=p0(d)).precision==null&&(d.trim=!0),d=Z5(d)),c===1/0)return d;const u=Math.max(1,n*c/t.ticks().length);return f=>{let p=f/i(Math.round(a(f)));return p*n<n-.5&&(p*=n),p<=u?d(f):""}},t.nice=()=>r(xT(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),t}function yT(){const e=J5(J1()).domain([1,10]);return e.copy=()=>D0(e,yT()).base(e.base()),Gi.apply(e,arguments),e}function Q6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function eC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Q5(e){var t=1,r=e(Q6(t),eC(t));return r.constant=function(n){return arguments.length?e(Q6(t=+n),eC(t)):t},Gc(r)}function bT(){var e=Q5(J1());return e.copy=function(){return D0(e,bT()).constant(e.constant())},Gi.apply(e,arguments)}function tC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function AV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function SV(e){return e<0?-e*e:e*e}function eN(e){var t=e(ba,ba),r=1;function n(){return r===1?e(ba,ba):r===.5?e(AV,SV):e(tC(r),tC(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Gc(t)}function tN(){var e=eN(J1());return e.copy=function(){return D0(e,tN()).exponent(e.exponent())},Gi.apply(e,arguments),e}function EV(){return tN.apply(null,arguments).exponent(.5)}function rC(e){return Math.sign(e)*e*e}function kV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function vT(){var e=X5(),t=[0,1],r=!1,n;function a(i){var o=kV(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(rC(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,kg)).map(rC)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return vT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Gi.apply(a,arguments),Gc(a)}function wT(){var e=[],t=[],r=[],n;function a(){var o=0,c=Math.max(1,t.length);for(r=new Array(c-1);++o<c;)r[o-1]=_H(e,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:t[O0(r,o)]}return i.invertExtent=function(o){var c=t.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(Oc),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return wT().domain(e).range(t).unknown(n)},Gi.apply(i,arguments)}function NT(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[O0(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,c()):[e,t]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var u=a.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return NT().domain([e,t]).range(a).unknown(i)},Gi.apply(Gc(o),arguments)}function jT(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[O0(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return jT().domain(e).range(t).unknown(r)},Gi.apply(a,arguments)}const qy=new Date,Hy=new Date;function gs(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let u;do d.push(u=new Date(+i)),t(i,c),e(i);while(u<i&&i<o);return d},a.filter=i=>gs(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;t(o,-1),!i(o););else for(;--c>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(qy.setTime(+i),Hy.setTime(+o),e(qy),e(Hy),Math.floor(r(qy,Hy))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Tg=gs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Tg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gs(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Tg);Tg.range;const El=1e3,Di=El*60,kl=Di*60,Fl=kl*24,rN=Fl*7,nC=Fl*30,Vy=Fl*365,yd=gs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*El)},(e,t)=>(t-e)/El,e=>e.getUTCSeconds());yd.range;const nN=gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*El)},(e,t)=>{e.setTime(+e+t*Di)},(e,t)=>(t-e)/Di,e=>e.getMinutes());nN.range;const sN=gs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Di)},(e,t)=>(t-e)/Di,e=>e.getUTCMinutes());sN.range;const aN=gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*El-e.getMinutes()*Di)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getHours());aN.range;const iN=gs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getUTCHours());iN.range;const L0=gs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Di)/Fl,e=>e.getDate()-1);L0.range;const Q1=gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fl,e=>e.getUTCDate()-1);Q1.range;const CT=gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fl,e=>Math.floor(e/Fl));CT.range;function ru(e){return gs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Di)/rN)}const ex=ru(0),Ig=ru(1),PV=ru(2),TV=ru(3),uh=ru(4),IV=ru(5),_V=ru(6);ex.range;Ig.range;PV.range;TV.range;uh.range;IV.range;_V.range;function nu(e){return gs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/rN)}const tx=nu(0),_g=nu(1),OV=nu(2),RV=nu(3),hh=nu(4),DV=nu(5),LV=nu(6);tx.range;_g.range;OV.range;RV.range;hh.range;DV.range;LV.range;const oN=gs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oN.range;const lN=gs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());lN.range;const Ul=gs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ul.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ul.range;const $l=gs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$l.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});$l.range;function AT(e,t,r,n,a,i){const o=[[yd,1,El],[yd,5,5*El],[yd,15,15*El],[yd,30,30*El],[i,1,Di],[i,5,5*Di],[i,15,15*Di],[i,30,30*Di],[a,1,kl],[a,3,3*kl],[a,6,6*kl],[a,12,12*kl],[n,1,Fl],[n,2,2*Fl],[r,1,rN],[t,1,nC],[t,3,3*nC],[e,1,Vy]];function c(u,f,p){const b=f<u;b&&([u,f]=[f,u]);const x=p&&typeof p.range=="function"?p:d(u,f,p),N=x?x.range(u,+f+1):[];return b?N.reverse():N}function d(u,f,p){const b=Math.abs(f-u)/p,x=W5(([,,w])=>w).right(o,b);if(x===o.length)return e.every(uv(u/Vy,f/Vy,p));if(x===0)return Tg.every(Math.max(uv(u,f,p),1));const[N,j]=o[b/o[x-1][2]<o[x][2]/b?x-1:x];return N.every(j)}return[c,d]}const[MV,BV]=AT($l,lN,tx,CT,iN,sN),[FV,UV]=AT(Ul,oN,ex,L0,aN,nN);function Gy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ky(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function $V(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,c=e.months,d=e.shortMonths,u=cf(a),f=df(a),p=cf(i),b=df(i),x=cf(o),N=df(o),j=cf(c),w=df(c),C=cf(d),P=df(d),k={a:se,A:oe,b:ye,B:we,c:null,d:cC,e:cC,f:dG,g:vG,G:NG,H:oG,I:lG,j:cG,L:ST,m:uG,M:hG,p:te,q:G,Q:hC,s:fC,S:fG,u:mG,U:pG,V:gG,w:xG,W:yG,x:null,X:null,y:bG,Y:wG,Z:jG,"%":uC},_={a:Q,A:le,b:ve,B:xe,c:null,d:dC,e:dC,f:EG,g:MG,G:FG,H:CG,I:AG,j:SG,L:kT,m:kG,M:PG,p:ke,q:Re,Q:hC,s:fC,S:TG,u:IG,U:_G,V:OG,w:RG,W:DG,x:null,X:null,y:LG,Y:BG,Z:UG,"%":uC},O={a:z,A:M,b:W,B:J,c:K,d:oC,e:oC,f:nG,g:iC,G:aC,H:lC,I:lC,j:QV,L:rG,m:JV,M:eG,p:R,q:ZV,Q:aG,s:iG,S:tG,u:VV,U:GV,V:KV,w:HV,W:XV,x:V,X:me,y:iC,Y:aC,Z:YV,"%":sG};k.x=$(r,k),k.X=$(n,k),k.c=$(t,k),_.x=$(r,_),_.X=$(n,_),_.c=$(t,_);function $(be,Te){return function(Ve){var Oe=[],Ye=-1,Se=0,ae=be.length,Fe,ot,at;for(Ve instanceof Date||(Ve=new Date(+Ve));++Ye<ae;)be.charCodeAt(Ye)===37&&(Oe.push(be.slice(Se,Ye)),(ot=sC[Fe=be.charAt(++Ye)])!=null?Fe=be.charAt(++Ye):ot=Fe==="e"?" ":"0",(at=Te[Fe])&&(Fe=at(Ve,ot)),Oe.push(Fe),Se=Ye+1);return Oe.push(be.slice(Se,Ye)),Oe.join("")}}function F(be,Te){return function(Ve){var Oe=lf(1900,void 0,1),Ye=U(Oe,be,Ve+="",0),Se,ae;if(Ye!=Ve.length)return null;if("Q"in Oe)return new Date(Oe.Q);if("s"in Oe)return new Date(Oe.s*1e3+("L"in Oe?Oe.L:0));if(Te&&!("Z"in Oe)&&(Oe.Z=0),"p"in Oe&&(Oe.H=Oe.H%12+Oe.p*12),Oe.m===void 0&&(Oe.m="q"in Oe?Oe.q:0),"V"in Oe){if(Oe.V<1||Oe.V>53)return null;"w"in Oe||(Oe.w=1),"Z"in Oe?(Se=Ky(lf(Oe.y,0,1)),ae=Se.getUTCDay(),Se=ae>4||ae===0?_g.ceil(Se):_g(Se),Se=Q1.offset(Se,(Oe.V-1)*7),Oe.y=Se.getUTCFullYear(),Oe.m=Se.getUTCMonth(),Oe.d=Se.getUTCDate()+(Oe.w+6)%7):(Se=Gy(lf(Oe.y,0,1)),ae=Se.getDay(),Se=ae>4||ae===0?Ig.ceil(Se):Ig(Se),Se=L0.offset(Se,(Oe.V-1)*7),Oe.y=Se.getFullYear(),Oe.m=Se.getMonth(),Oe.d=Se.getDate()+(Oe.w+6)%7)}else("W"in Oe||"U"in Oe)&&("w"in Oe||(Oe.w="u"in Oe?Oe.u%7:"W"in Oe?1:0),ae="Z"in Oe?Ky(lf(Oe.y,0,1)).getUTCDay():Gy(lf(Oe.y,0,1)).getDay(),Oe.m=0,Oe.d="W"in Oe?(Oe.w+6)%7+Oe.W*7-(ae+5)%7:Oe.w+Oe.U*7-(ae+6)%7);return"Z"in Oe?(Oe.H+=Oe.Z/100|0,Oe.M+=Oe.Z%100,Ky(Oe)):Gy(Oe)}}function U(be,Te,Ve,Oe){for(var Ye=0,Se=Te.length,ae=Ve.length,Fe,ot;Ye<Se;){if(Oe>=ae)return-1;if(Fe=Te.charCodeAt(Ye++),Fe===37){if(Fe=Te.charAt(Ye++),ot=O[Fe in sC?Te.charAt(Ye++):Fe],!ot||(Oe=ot(be,Ve,Oe))<0)return-1}else if(Fe!=Ve.charCodeAt(Oe++))return-1}return Oe}function R(be,Te,Ve){var Oe=u.exec(Te.slice(Ve));return Oe?(be.p=f.get(Oe[0].toLowerCase()),Ve+Oe[0].length):-1}function z(be,Te,Ve){var Oe=x.exec(Te.slice(Ve));return Oe?(be.w=N.get(Oe[0].toLowerCase()),Ve+Oe[0].length):-1}function M(be,Te,Ve){var Oe=p.exec(Te.slice(Ve));return Oe?(be.w=b.get(Oe[0].toLowerCase()),Ve+Oe[0].length):-1}function W(be,Te,Ve){var Oe=C.exec(Te.slice(Ve));return Oe?(be.m=P.get(Oe[0].toLowerCase()),Ve+Oe[0].length):-1}function J(be,Te,Ve){var Oe=j.exec(Te.slice(Ve));return Oe?(be.m=w.get(Oe[0].toLowerCase()),Ve+Oe[0].length):-1}function K(be,Te,Ve){return U(be,t,Te,Ve)}function V(be,Te,Ve){return U(be,r,Te,Ve)}function me(be,Te,Ve){return U(be,n,Te,Ve)}function se(be){return o[be.getDay()]}function oe(be){return i[be.getDay()]}function ye(be){return d[be.getMonth()]}function we(be){return c[be.getMonth()]}function te(be){return a[+(be.getHours()>=12)]}function G(be){return 1+~~(be.getMonth()/3)}function Q(be){return o[be.getUTCDay()]}function le(be){return i[be.getUTCDay()]}function ve(be){return d[be.getUTCMonth()]}function xe(be){return c[be.getUTCMonth()]}function ke(be){return a[+(be.getUTCHours()>=12)]}function Re(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Te=$(be+="",k);return Te.toString=function(){return be},Te},parse:function(be){var Te=F(be+="",!1);return Te.toString=function(){return be},Te},utcFormat:function(be){var Te=$(be+="",_);return Te.toString=function(){return be},Te},utcParse:function(be){var Te=F(be+="",!0);return Te.toString=function(){return be},Te}}}var sC={"-":"",_:" ",0:"0"},Ps=/^\s*\d+/,zV=/^%/,WV=/[\\^$*+?|[\]().{}]/g;function Er(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function qV(e){return e.replace(WV,"\\$&")}function cf(e){return new RegExp("^(?:"+e.map(qV).join("|")+")","i")}function df(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function HV(e,t,r){var n=Ps.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function VV(e,t,r){var n=Ps.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function GV(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function KV(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function XV(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function aC(e,t,r){var n=Ps.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function iC(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function YV(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function ZV(e,t,r){var n=Ps.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function JV(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function oC(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function QV(e,t,r){var n=Ps.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function lC(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function eG(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function tG(e,t,r){var n=Ps.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function rG(e,t,r){var n=Ps.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function nG(e,t,r){var n=Ps.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function sG(e,t,r){var n=zV.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function aG(e,t,r){var n=Ps.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function iG(e,t,r){var n=Ps.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function cC(e,t){return Er(e.getDate(),t,2)}function oG(e,t){return Er(e.getHours(),t,2)}function lG(e,t){return Er(e.getHours()%12||12,t,2)}function cG(e,t){return Er(1+L0.count(Ul(e),e),t,3)}function ST(e,t){return Er(e.getMilliseconds(),t,3)}function dG(e,t){return ST(e,t)+"000"}function uG(e,t){return Er(e.getMonth()+1,t,2)}function hG(e,t){return Er(e.getMinutes(),t,2)}function fG(e,t){return Er(e.getSeconds(),t,2)}function mG(e){var t=e.getDay();return t===0?7:t}function pG(e,t){return Er(ex.count(Ul(e)-1,e),t,2)}function ET(e){var t=e.getDay();return t>=4||t===0?uh(e):uh.ceil(e)}function gG(e,t){return e=ET(e),Er(uh.count(Ul(e),e)+(Ul(e).getDay()===4),t,2)}function xG(e){return e.getDay()}function yG(e,t){return Er(Ig.count(Ul(e)-1,e),t,2)}function bG(e,t){return Er(e.getFullYear()%100,t,2)}function vG(e,t){return e=ET(e),Er(e.getFullYear()%100,t,2)}function wG(e,t){return Er(e.getFullYear()%1e4,t,4)}function NG(e,t){var r=e.getDay();return e=r>=4||r===0?uh(e):uh.ceil(e),Er(e.getFullYear()%1e4,t,4)}function jG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Er(t/60|0,"0",2)+Er(t%60,"0",2)}function dC(e,t){return Er(e.getUTCDate(),t,2)}function CG(e,t){return Er(e.getUTCHours(),t,2)}function AG(e,t){return Er(e.getUTCHours()%12||12,t,2)}function SG(e,t){return Er(1+Q1.count($l(e),e),t,3)}function kT(e,t){return Er(e.getUTCMilliseconds(),t,3)}function EG(e,t){return kT(e,t)+"000"}function kG(e,t){return Er(e.getUTCMonth()+1,t,2)}function PG(e,t){return Er(e.getUTCMinutes(),t,2)}function TG(e,t){return Er(e.getUTCSeconds(),t,2)}function IG(e){var t=e.getUTCDay();return t===0?7:t}function _G(e,t){return Er(tx.count($l(e)-1,e),t,2)}function PT(e){var t=e.getUTCDay();return t>=4||t===0?hh(e):hh.ceil(e)}function OG(e,t){return e=PT(e),Er(hh.count($l(e),e)+($l(e).getUTCDay()===4),t,2)}function RG(e){return e.getUTCDay()}function DG(e,t){return Er(_g.count($l(e)-1,e),t,2)}function LG(e,t){return Er(e.getUTCFullYear()%100,t,2)}function MG(e,t){return e=PT(e),Er(e.getUTCFullYear()%100,t,2)}function BG(e,t){return Er(e.getUTCFullYear()%1e4,t,4)}function FG(e,t){var r=e.getUTCDay();return e=r>=4||r===0?hh(e):hh.ceil(e),Er(e.getUTCFullYear()%1e4,t,4)}function UG(){return"+0000"}function uC(){return"%"}function hC(e){return+e}function fC(e){return Math.floor(+e/1e3)}var uu,TT,IT;$G({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $G(e){return uu=$V(e),TT=uu.format,uu.parse,IT=uu.utcFormat,uu.utcParse,uu}function zG(e){return new Date(e)}function WG(e){return e instanceof Date?+e:+new Date(+e)}function cN(e,t,r,n,a,i,o,c,d,u){var f=X5(),p=f.invert,b=f.domain,x=u(".%L"),N=u(":%S"),j=u("%I:%M"),w=u("%I %p"),C=u("%a %d"),P=u("%b %d"),k=u("%B"),_=u("%Y");function O($){return(d($)<$?x:c($)<$?N:o($)<$?j:i($)<$?w:n($)<$?a($)<$?C:P:r($)<$?k:_)($)}return f.invert=function($){return new Date(p($))},f.domain=function($){return arguments.length?b(Array.from($,WG)):b().map(zG)},f.ticks=function($){var F=b();return e(F[0],F[F.length-1],$??10)},f.tickFormat=function($,F){return F==null?O:u(F)},f.nice=function($){var F=b();return(!$||typeof $.range!="function")&&($=t(F[0],F[F.length-1],$??10)),$?b(xT(F,$)):f},f.copy=function(){return D0(f,cN(e,t,r,n,a,i,o,c,d,u))},f}function qG(){return Gi.apply(cN(FV,UV,Ul,oN,ex,L0,aN,nN,yd,TT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HG(){return Gi.apply(cN(MV,BV,$l,lN,tx,Q1,iN,sN,yd,IT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rx(){var e=0,t=1,r,n,a,i,o=ba,c=!1,d;function u(p){return p==null||isNaN(p=+p)?d:o(a===0?.5:(p=(i(p)-r)*a,c?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(p){return arguments.length?(c=!!p,u):c},u.interpolator=function(p){return arguments.length?(o=p,u):o};function f(p){return function(b){var x,N;return arguments.length?([x,N]=b,o=p(x,N),u):[o(0),o(1)]}}return u.range=f(Eh),u.rangeRound=f(K5),u.unknown=function(p){return arguments.length?(d=p,u):d},function(p){return i=p,r=p(e),n=p(t),a=r===n?0:1/(n-r),u}}function Kc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _T(){var e=Gc(rx()(ba));return e.copy=function(){return Kc(e,_T())},Vl.apply(e,arguments)}function OT(){var e=J5(rx()).domain([1,10]);return e.copy=function(){return Kc(e,OT()).base(e.base())},Vl.apply(e,arguments)}function RT(){var e=Q5(rx());return e.copy=function(){return Kc(e,RT()).constant(e.constant())},Vl.apply(e,arguments)}function dN(){var e=eN(rx());return e.copy=function(){return Kc(e,dN()).exponent(e.exponent())},Vl.apply(e,arguments)}function VG(){return dN.apply(null,arguments).exponent(.5)}function DT(){var e=[],t=ba;function r(n){if(n!=null&&!isNaN(n=+n))return t((O0(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Oc),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>IH(e,i/n))},r.copy=function(){return DT(t).domain(e)},Vl.apply(r,arguments)}function nx(){var e=0,t=.5,r=1,n=1,a,i,o,c,d,u=ba,f,p=!1,b;function x(j){return isNaN(j=+j)?b:(j=.5+((j=+f(j))-i)*(n*j<n*i?c:d),u(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,a=f(e=+e),i=f(t=+t),o=f(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(u=j,x):u};function N(j){return function(w){var C,P,k;return arguments.length?([C,P,k]=w,u=sV(j,[C,P,k]),x):[u(0),u(.5),u(1)]}}return x.range=N(Eh),x.rangeRound=N(K5),x.unknown=function(j){return arguments.length?(b=j,x):b},function(j){return f=j,a=j(e),i=j(t),o=j(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,x}}function LT(){var e=Gc(nx()(ba));return e.copy=function(){return Kc(e,LT())},Vl.apply(e,arguments)}function MT(){var e=J5(nx()).domain([.1,1,10]);return e.copy=function(){return Kc(e,MT()).base(e.base())},Vl.apply(e,arguments)}function BT(){var e=Q5(nx());return e.copy=function(){return Kc(e,BT()).constant(e.constant())},Vl.apply(e,arguments)}function uN(){var e=eN(nx());return e.copy=function(){return Kc(e,uN()).exponent(e.exponent())},Vl.apply(e,arguments)}function GG(){return uN.apply(null,arguments).exponent(.5)}const wf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:H5,scaleDiverging:LT,scaleDivergingLog:MT,scaleDivergingPow:uN,scaleDivergingSqrt:GG,scaleDivergingSymlog:BT,scaleIdentity:gT,scaleImplicit:hv,scaleLinear:pT,scaleLog:yT,scaleOrdinal:q5,scalePoint:RH,scalePow:tN,scaleQuantile:wT,scaleQuantize:NT,scaleRadial:vT,scaleSequential:_T,scaleSequentialLog:OT,scaleSequentialPow:dN,scaleSequentialQuantile:DT,scaleSequentialSqrt:VG,scaleSequentialSymlog:RT,scaleSqrt:EV,scaleSymlog:bT,scaleThreshold:jT,scaleTime:qG,scaleUtc:HG,tickFormat:mT},Symbol.toStringTag,{value:"Module"}));var Xc=e=>e.chartData,hN=He([Xc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),fN=(e,t,r,n)=>n?hN(e):Xc(e);function $d(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(la(t)&&la(r))return!0}return!1}function mC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function FT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(la(r))a=r;else if(typeof r=="function")return;if(la(n))i=n;else if(typeof n=="function")return;var o=[a,i];if($d(o))return o}}function KG(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if($d(n))return mC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,c;if(a==="auto")t!=null&&(o=Math.min(...t));else if(zt(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&a6.test(a)){var d=a6.exec(a);if(d==null||t==null)o=void 0;else{var u=+d[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(c=Math.max(...t));else if(zt(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&i6.test(i)){var f=i6.exec(i);if(f==null||t==null)c=void 0;else{var p=+f[1];c=t[1]+p}}else c=t==null?void 0:t[1];var b=[o,c];if($d(b))return t==null?b:mC(b,t,r)}}}var kh=1e9,XG={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pN,yn=!0,Hi="[DecimalError] ",Pd=Hi+"Invalid argument: ",mN=Hi+"Exponent out of range: ",Ph=Math.floor,ud=Math.pow,YG=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ai,js=1e7,dn=7,UT=9007199254740991,Og=Ph(UT/dn),Tt={};Tt.absoluteValue=Tt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Tt.comparedTo=Tt.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Tt.decimalPlaces=Tt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*dn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Tt.dividedBy=Tt.div=function(e){return _l(this,new this.constructor(e))};Tt.dividedToIntegerBy=Tt.idiv=function(e){var t=this,r=t.constructor;return Zr(_l(t,new r(e),0,1),r.precision)};Tt.equals=Tt.eq=function(e){return!this.cmp(e)};Tt.exponent=function(){return ns(this)};Tt.greaterThan=Tt.gt=function(e){return this.cmp(e)>0};Tt.greaterThanOrEqualTo=Tt.gte=function(e){return this.cmp(e)>=0};Tt.isInteger=Tt.isint=function(){return this.e>this.d.length-2};Tt.isNegative=Tt.isneg=function(){return this.s<0};Tt.isPositive=Tt.ispos=function(){return this.s>0};Tt.isZero=function(){return this.s===0};Tt.lessThan=Tt.lt=function(e){return this.cmp(e)<0};Tt.lessThanOrEqualTo=Tt.lte=function(e){return this.cmp(e)<1};Tt.logarithm=Tt.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ai))throw Error(Hi+"NaN");if(r.s<1)throw Error(Hi+(r.s?"NaN":"-Infinity"));return r.eq(ai)?new n(0):(yn=!1,t=_l(g0(r,i),g0(e,i),i),yn=!0,Zr(t,a))};Tt.minus=Tt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WT(t,e):$T(t,(e.s=-e.s,e))};Tt.modulo=Tt.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Hi+"NaN");return r.s?(yn=!1,t=_l(r,e,0,1).times(e),yn=!0,r.minus(t)):Zr(new n(r),a)};Tt.naturalExponential=Tt.exp=function(){return zT(this)};Tt.naturalLogarithm=Tt.ln=function(){return g0(this)};Tt.negated=Tt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Tt.plus=Tt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$T(t,e):WT(t,(e.s=-e.s,e))};Tt.precision=Tt.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Pd+e);if(t=ns(a)+1,n=a.d.length-1,r=n*dn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Tt.squareRoot=Tt.sqrt=function(){var e,t,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(Hi+"NaN")}for(e=ns(c),yn=!1,a=Math.sqrt(+c),a==0||a==1/0?(t=Lo(c.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ph((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(_l(c,i,o+2)).times(.5),Lo(i.d).slice(0,o)===(t=Lo(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Zr(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(t!="9999")break;o+=4}return yn=!0,Zr(n,r)};Tt.times=Tt.mul=function(e){var t,r,n,a,i,o,c,d,u,f=this,p=f.constructor,b=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=b.length,u=x.length,d<u&&(i=b,b=x,x=i,o=d,d=u,u=o),i=[],o=d+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=d+n;a>n;)c=i[a]+x[n]*b[a-n-1]+t,i[a--]=c%js|0,t=c/js|0;i[a]=(i[a]+t)%js|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,yn?Zr(e,p.precision):e};Tt.toDecimalPlaces=Tt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ho(e,0,kh),t===void 0?t=n.rounding:Ho(t,0,8),Zr(r,e+ns(r)+1,t))};Tt.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=zd(n,!0):(Ho(e,0,kh),t===void 0?t=a.rounding:Ho(t,0,8),n=Zr(new a(n),e+1,t),r=zd(n,!0,e+1)),r};Tt.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?zd(a):(Ho(e,0,kh),t===void 0?t=i.rounding:Ho(t,0,8),n=Zr(new i(a),e+ns(a)+1,t),r=zd(n.abs(),!1,e+ns(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Tt.toInteger=Tt.toint=function(){var e=this,t=e.constructor;return Zr(new t(e),ns(e)+1,t.rounding)};Tt.toNumber=function(){return+this};Tt.toPower=Tt.pow=function(e){var t,r,n,a,i,o,c=this,d=c.constructor,u=12,f=+(e=new d(e));if(!e.s)return new d(ai);if(c=new d(c),!c.s){if(e.s<1)throw Error(Hi+"Infinity");return c}if(c.eq(ai))return c;if(n=d.precision,e.eq(ai))return Zr(c,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=c.s,o){if((r=f<0?-f:f)<=UT){for(a=new d(ai),t=Math.ceil(n/dn+4),yn=!1;r%2&&(a=a.times(c),gC(a.d,t)),r=Ph(r/2),r!==0;)c=c.times(c),gC(c.d,t);return yn=!0,e.s<0?new d(ai).div(a):Zr(a,n)}}else if(i<0)throw Error(Hi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,c.s=1,yn=!1,a=e.times(g0(c,n+u)),yn=!0,a=zT(a),a.s=i,a};Tt.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=ns(a),n=zd(a,r<=i.toExpNeg||r>=i.toExpPos)):(Ho(e,1,kh),t===void 0?t=i.rounding:Ho(t,0,8),a=Zr(new i(a),e,t),r=ns(a),n=zd(a,e<=r||r<=i.toExpNeg,e)),n};Tt.toSignificantDigits=Tt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ho(e,1,kh),t===void 0?t=n.rounding:Ho(t,0,8)),Zr(new n(r),e,t)};Tt.toString=Tt.valueOf=Tt.val=Tt.toJSON=Tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ns(e),r=e.constructor;return zd(e,t<=r.toExpNeg||t>=r.toExpPos)};function $T(e,t){var r,n,a,i,o,c,d,u,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),yn?Zr(t,p):t;if(d=e.d,u=t.d,o=e.e,a=t.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=u.length):(n=u,a=o,c=d.length),o=Math.ceil(p/dn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=u.length,c-i<0&&(i=c,n=u,u=d,d=n),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/js|0,d[i]%=js;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return t.d=d,t.e=a,yn?Zr(t,p):t}function Ho(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Pd+e)}function Lo(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=dn-n.length,r&&(i+=fc(r)),i+=n;o=e[t],n=o+"",r=dn-n.length,r&&(i+=fc(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var _l=function(){function e(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%js|0,o=i/js|0;return o&&n.unshift(o),n}function t(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*js+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,u,f,p,b,x,N,j,w,C,P,k,_,O,$,F,U,R=n.constructor,z=n.s==a.s?1:-1,M=n.d,W=a.d;if(!n.s)return new R(n);if(!a.s)throw Error(Hi+"Division by zero");for(d=n.e-a.e,F=W.length,O=M.length,x=new R(z),N=x.d=[],u=0;W[u]==(M[u]||0);)++u;if(W[u]>(M[u]||0)&&--d,i==null?P=i=R.precision:o?P=i+(ns(n)-ns(a))+1:P=i,P<0)return new R(0);if(P=P/dn+2|0,u=0,F==1)for(f=0,W=W[0],P++;(u<O||f)&&P--;u++)k=f*js+(M[u]||0),N[u]=k/W|0,f=k%W|0;else{for(f=js/(W[0]+1)|0,f>1&&(W=e(W,f),M=e(M,f),F=W.length,O=M.length),_=F,j=M.slice(0,F),w=j.length;w<F;)j[w++]=0;U=W.slice(),U.unshift(0),$=W[0],W[1]>=js/2&&++$;do f=0,c=t(W,j,F,w),c<0?(C=j[0],F!=w&&(C=C*js+(j[1]||0)),f=C/$|0,f>1?(f>=js&&(f=js-1),p=e(W,f),b=p.length,w=j.length,c=t(p,j,b,w),c==1&&(f--,r(p,F<b?U:W,b))):(f==0&&(c=f=1),p=W.slice()),b=p.length,b<w&&p.unshift(0),r(j,p,w),c==-1&&(w=j.length,c=t(W,j,F,w),c<1&&(f++,r(j,F<w?U:W,w))),w=j.length):c===0&&(f++,j=[0]),N[u++]=f,c&&j[0]?j[w++]=M[_]||0:(j=[M[_]],w=1);while((_++<O||j[0]!==void 0)&&P--)}return N[0]||N.shift(),x.e=d,Zr(x,o?i+ns(x)+1:i)}}();function zT(e,t){var r,n,a,i,o,c,d=0,u=0,f=e.constructor,p=f.precision;if(ns(e)>16)throw Error(mN+ns(e));if(!e.s)return new f(ai);for(yn=!1,c=p,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(ud(2,u))/Math.LN10*2+5|0,c+=n,r=a=i=new f(ai),f.precision=c;;){if(a=Zr(a.times(e),c),r=r.times(++d),o=i.plus(_l(a,r,c)),Lo(o.d).slice(0,c)===Lo(i.d).slice(0,c)){for(;u--;)i=Zr(i.times(i),c);return f.precision=p,t==null?(yn=!0,Zr(i,p)):i}i=o}}function ns(e){for(var t=e.e*dn,r=e.d[0];r>=10;r/=10)t++;return t}function Xy(e,t,r){if(t>e.LN10.sd())throw yn=!0,r&&(e.precision=r),Error(Hi+"LN10 precision limit exceeded");return Zr(new e(e.LN10),t)}function fc(e){for(var t="";e--;)t+="0";return t}function g0(e,t){var r,n,a,i,o,c,d,u,f,p=1,b=10,x=e,N=x.d,j=x.constructor,w=j.precision;if(x.s<1)throw Error(Hi+(x.s?"NaN":"-Infinity"));if(x.eq(ai))return new j(0);if(t==null?(yn=!1,u=w):u=t,x.eq(10))return t==null&&(yn=!0),Xy(j,u);if(u+=b,j.precision=u,r=Lo(N),n=r.charAt(0),i=ns(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Lo(x.d),n=r.charAt(0),p++;i=ns(x),n>1?(x=new j("0."+r),i++):x=new j(n+"."+r.slice(1))}else return d=Xy(j,u+2,w).times(i+""),x=g0(new j(n+"."+r.slice(1)),u-b).plus(d),j.precision=w,t==null?(yn=!0,Zr(x,w)):x;for(c=o=x=_l(x.minus(ai),x.plus(ai),u),f=Zr(x.times(x),u),a=3;;){if(o=Zr(o.times(f),u),d=c.plus(_l(o,new j(a),u)),Lo(d.d).slice(0,u)===Lo(c.d).slice(0,u))return c=c.times(2),i!==0&&(c=c.plus(Xy(j,u+2,w).times(i+""))),c=_l(c,new j(p),u),j.precision=w,t==null?(yn=!0,Zr(c,w)):c;c=d,a+=2}}function pC(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Ph(r/dn),e.d=[],n=(r+1)%dn,r<0&&(n+=dn),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=dn;n<a;)e.d.push(+t.slice(n,n+=dn));t=t.slice(n),n=dn-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),yn&&(e.e>Og||e.e<-Og))throw Error(mN+r)}else e.s=0,e.e=0,e.d=[0];return e}function Zr(e,t,r){var n,a,i,o,c,d,u,f,p=e.d;for(o=1,i=p[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=dn,a=t,u=p[f=0];else{if(f=Math.ceil((n+1)/dn),i=p.length,f>=i)return e;for(u=i=p[f],o=1;i>=10;i/=10)o++;n%=dn,a=n-dn+o}if(r!==void 0&&(i=ud(10,o-a-1),c=u/i%10|0,d=t<0||p[f+1]!==void 0||u%i,d=r<4?(c||d)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?u/ud(10,o-a):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=ns(e),p.length=1,t=t-i-1,p[0]=ud(10,(dn-t%dn)%dn),e.e=Ph(-t/dn)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=ud(10,dn-n),p[f]=a>0?(u/ud(10,o-a)%ud(10,a)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==js&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=js)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(yn&&(e.e>Og||e.e<-Og))throw Error(mN+ns(e));return e}function WT(e,t){var r,n,a,i,o,c,d,u,f,p,b=e.constructor,x=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),yn?Zr(t,x):t;if(d=e.d,p=t.d,n=t.e,u=e.e,d=d.slice(),o=u-n,o){for(f=o<0,f?(r=d,o=-o,c=p.length):(r=p,n=u,c=d.length),a=Math.max(Math.ceil(x/dn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=p.length,f=a<c,f&&(c=a),a=0;a<c;a++)if(d[a]!=p[a]){f=d[a]<p[a];break}o=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),c=d.length,a=p.length-c;a>0;--a)d[c++]=0;for(a=p.length;a>o;){if(d[--a]<p[a]){for(i=a;i&&d[--i]===0;)d[i]=js-1;--d[i],d[a]+=js}d[a]-=p[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,yn?Zr(t,x):t):new b(0)}function zd(e,t,r){var n,a=ns(e),i=Lo(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+fc(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+fc(-a-1)+i,r&&(n=r-o)>0&&(i+=fc(n))):a>=o?(i+=fc(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+fc(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=fc(n))),e.s<0?"-"+i:i}function gC(e,t){if(e.length>t)return e.length=t,!0}function qT(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Pd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return pC(o,i.toString())}else if(typeof i!="string")throw Error(Pd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,YG.test(i))pC(o,i);else throw Error(Pd+i)}if(a.prototype=Tt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=qT,a.config=a.set=ZG,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function ZG(e){if(!e||typeof e!="object")throw Error(Hi+"Object expected");var t,r,n,a=["precision",1,kh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Ph(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Pd+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Pd+r+": "+n);return this}var pN=qT(XG);ai=new pN(1);const Br=pN;var JG=e=>e,HT={},VT=e=>e===HT,xC=e=>function t(){return arguments.length===0||arguments.length===1&&VT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},GT=(e,t)=>e===1?t:xC(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==HT).length;return i>=e?t(...n):GT(e-i,xC(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=n.map(f=>VT(f)?c.shift():f);return t(...u,...c)}))}),sx=e=>GT(e.length,e),gv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},QG=sx((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),eK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return JG;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((c,d)=>d(c),i(...arguments))}},xv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),KT=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,c)=>{var d;return o===((d=t)===null||d===void 0?void 0:d[c])})||(t=a,r=e(...a)),r}};function XT(e){var t;return e===0?t=1:t=Math.floor(new Br(e).abs().log(10).toNumber())+1,t}function YT(e,t,r){for(var n=new Br(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}sx((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});sx((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});sx((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var ZT=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},JT=(e,t,r)=>{if(e.lte(0))return new Br(0);var n=XT(e.toNumber()),a=new Br(10).pow(n),i=e.div(a),o=n!==1?.05:.1,c=new Br(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return t?new Br(d.toNumber()):new Br(Math.ceil(d.toNumber()))},tK=(e,t,r)=>{var n=new Br(1),a=new Br(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Br(10).pow(XT(e)-1),a=new Br(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Br(Math.floor(e)))}else e===0?a=new Br(Math.floor((t-1)/2)):r||(a=new Br(Math.floor(e)));var o=Math.floor((t-1)/2),c=eK(QG(d=>a.add(new Br(d-o).mul(n)).toNumber()),gv);return c(0,t)},QT=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Br(0),tickMin:new Br(0),tickMax:new Br(0)};var o=JT(new Br(r).sub(t).div(n-1),a,i),c;t<=0&&r>=0?c=new Br(0):(c=new Br(t).add(r).div(2),c=c.sub(new Br(c).mod(o)));var d=Math.ceil(c.sub(t).div(o).toNumber()),u=Math.ceil(new Br(r).sub(c).div(o).toNumber()),f=d+u+1;return f>n?QT(t,r,n,a,i+1):(f<n&&(u=r>0?u+(n-f):u,d=r>0?d:d+(n-f)),{step:o,tickMin:c.sub(new Br(d).mul(o)),tickMax:c.add(new Br(u).mul(o))})};function rK(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,c]=ZT([t,r]);if(o===-1/0||c===1/0){var d=c===1/0?[o,...gv(0,n-1).map(()=>1/0)]:[...gv(0,n-1).map(()=>-1/0),c];return t>r?xv(d):d}if(o===c)return tK(o,n,a);var{step:u,tickMin:f,tickMax:p}=QT(o,c,i,a,0),b=YT(f,p.add(new Br(.1).mul(u)),u);return t>r?xv(b):b}function nK(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=ZT([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var c=Math.max(t,2),d=JT(new Br(o).sub(i).div(c-1),a,0),u=[...YT(new Br(i),new Br(o),d),o];return a===!1&&(u=u.map(f=>Math.round(f))),r>n?xv(u):u}var sK=KT(rK),aK=KT(nK),eI=e=>e.rootProps.maxBarSize,iK=e=>e.rootProps.barGap,tI=e=>e.rootProps.barCategoryGap,oK=e=>e.rootProps.barSize,M0=e=>e.rootProps.stackOffset,gN=e=>e.options.chartName,xN=e=>e.rootProps.syncId,rI=e=>e.rootProps.syncMethod,yN=e=>e.options.eventEmitter,jl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},si={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ax=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},lK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:jl.angleAxisId,includeHidden:!1,name:void 0,reversed:jl.reversed,scale:jl.scale,tick:jl.tick,tickCount:void 0,ticks:void 0,type:jl.type,unit:void 0},cK={allowDataOverflow:si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:si.scale,tick:si.tick,tickCount:si.tickCount,ticks:void 0,type:si.type,unit:void 0},dK={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:jl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jl.scale,tick:jl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},uK={allowDataOverflow:si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:si.scale,tick:si.tick,tickCount:si.tickCount,ticks:void 0,type:"category",unit:void 0},bN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?dK:lK,vN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?uK:cK,ix=e=>e.polarOptions,wN=He([ql,Hl,ps],kP),nI=He([ix,wN],(e,t)=>{if(e!=null)return ia(e.innerRadius,t,0)}),sI=He([ix,wN],(e,t)=>{if(e!=null)return ia(e.outerRadius,t,t*.8)}),hK=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},aI=He([ix],hK);He([bN,aI],ax);var iI=He([wN,nI,sI],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});He([vN,iI],ax);var oI=He([kr,ix,nI,sI,ql,Hl],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:c,startAngle:d,endAngle:u}=t;return{cx:ia(o,a,a/2),cy:ia(c,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:u,clockWise:!1}}}),vn=(e,t)=>t,B0=(e,t,r)=>r;function NN(e){return e==null?void 0:e.id}var xs=e=>{var t=kr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Th=e=>e.tooltip.settings.axisId,ys=e=>{var t=xs(e),r=Th(e);return F0(e,t,r)},lI=He([ys],e=>e==null?void 0:e.dataKey);function cI(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,o=new Map;return e.forEach(c=>{var d,u=(d=c.data)!==null&&d!==void 0?d:n;if(!(u==null||u.length===0)){var f=NN(c);u.forEach((p,b)=>{var x=i==null||a?b:String(An(p,i,null)),N=An(p,c.dataKey,0),j;o.has(x)?j=o.get(x):j={},Object.assign(j,{[f]:N}),o.set(x,j)})}}),Array.from(o.values())}function ox(e){return e.stackId!=null&&e.dataKey!=null}var lx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function cx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){fK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fK(e,t,r){return(t=mK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mK(e){var t=pK(e,"string");return typeof t=="symbol"?t:t+""}function pK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yv=[0,"auto"],ei={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},dI=(e,t)=>e.cartesianAxis.xAxis[t],Gl=(e,t)=>{var r=dI(e,t);return r??ei},ti={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:yv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:_0},uI=(e,t)=>e.cartesianAxis.yAxis[t],Kl=(e,t)=>{var r=uI(e,t);return r??ti},gK={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},jN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??gK},kn=(e,t,r)=>{switch(t){case"xAxis":return Gl(e,r);case"yAxis":return Kl(e,r);case"zAxis":return jN(e,r);case"angleAxis":return bN(e,r);case"radiusAxis":return vN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},xK=(e,t,r)=>{switch(t){case"xAxis":return Gl(e,r);case"yAxis":return Kl(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},F0=(e,t,r)=>{switch(t){case"xAxis":return Gl(e,r);case"yAxis":return Kl(e,r);case"angleAxis":return bN(e,r);case"radiusAxis":return vN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},hI=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function CN(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var AN=e=>e.graphicalItems.cartesianItems,yK=He([vn,B0],CN),SN=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),U0=He([AN,kn,yK],SN,{memoizeOptions:{resultEqualityCheck:cx}}),fI=He([U0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(ox)),mI=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),bK=He([U0],mI),EN=e=>e.map(t=>t.data).filter(Boolean).flat(1),vK=He([U0],EN,{memoizeOptions:{resultEqualityCheck:cx}}),kN=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},PN=He([vK,fN],kN),TN=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:An(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:An(a,n)}))):e.map(n=>({value:n})),dx=He([PN,kn,U0],TN);function pI(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function vp(e){if(qo(e)||e instanceof Date){var t=Number(e);if(la(t))return t}}function bC(e){if(Array.isArray(e)){var t=[vp(e[0]),vp(e[1])];return $d(t)?t:void 0}var r=vp(e);if(r!=null)return[r,r]}function Ih(e){return e.map(vp).filter($q)}function wK(e,t,r){return!r||typeof t!="number"||Wi(t)?[]:r.length?Ih(r.flatMap(n=>{var a=An(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!la(i)||!la(o)))return[t-i,t+o]})):[]}var NK=He([fI,fN,ys],cI),gI=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,c]=i,d=c.map(NN);return[o,{stackedData:mW(e,d,r),graphicalItems:c}]}))},bv=He([NK,fI,M0],gI),xI=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=bW(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},jK=He([kn],e=>e.allowDataOverflow),IN=e=>{var t;if(e==null||!("domain"in e))return yv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Ih(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:yv},_N=He([kn],IN),ON=He([_N,jK],FT),CK=He([bv,Xc,vn,ON],xI,{memoizeOptions:{resultEqualityCheck:lx}}),ux=e=>e.errorBars,AK=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>pI(r,n)),Dg=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),c=Math.max(...i);return[o,c]}},RN=(e,t,r,n,a)=>{var i,o;if(r.length>0&&e.forEach(c=>{r.forEach(d=>{var u,f,p=(u=n[d.id])===null||u===void 0?void 0:u.filter(C=>pI(a,C)),b=An(c,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=wK(c,b,p);if(x.length>=2){var N=Math.min(...x),j=Math.max(...x);(i==null||N<i)&&(i=N),(o==null||j>o)&&(o=j)}var w=bC(b);w!=null&&(i=i==null?w[0]:Math.min(i,w[0]),o=o==null?w[1]:Math.max(o,w[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(c=>{var d=bC(An(c,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),o=o==null?d[1]:Math.max(o,d[1]))}),la(i)&&la(o))return[i,o]},SK=He([PN,kn,bK,ux,vn],RN,{memoizeOptions:{resultEqualityCheck:lx}});function EK(e){var{value:t}=e;if(qo(t)||t instanceof Date)return t}var kK=(e,t,r)=>{var n=e.map(EK).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Ak(n))?sT(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},yI=e=>e.referenceElements.dots,_h=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),PK=He([yI,vn,B0],_h),bI=e=>e.referenceElements.areas,TK=He([bI,vn,B0],_h),vI=e=>e.referenceElements.lines,IK=He([vI,vn,B0],_h),wI=(e,t)=>{var r=Ih(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_K=He(PK,vn,wI),NI=(e,t)=>{var r=Ih(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},OK=He([TK,vn],NI),jI=(e,t)=>{var r=Ih(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},RK=He(IK,vn,jI),DK=He(_K,RK,OK,(e,t,r)=>Dg(e,r,t)),DN=(e,t,r,n,a,i,o,c)=>{if(r!=null)return r;var d=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",u=d?Dg(n,i,a):Dg(i,a);return KG(t,u,e.allowDataOverflow)},LK=He([kn,_N,ON,CK,SK,DK,kr,vn],DN,{memoizeOptions:{resultEqualityCheck:lx}}),MK=[0,1],LN=(e,t,r,n,a,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:d}=e,u=eu(t,i);return u&&c==null?sT(0,r.length):d==="category"?kK(n,e,u):a==="expand"?MK:o}},MN=He([kn,kr,PN,dx,M0,vn,LK],LN),CI=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var c="scale".concat(k0(i));return c in wf?c:"point"}}},Oh=He([kn,kr,hI,gN,vn],CI);function BK(e){if(e!=null){if(e in wf)return wf[e]();var t="scale".concat(k0(e));if(t in wf)return wf[t]()}}function BN(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=BK(t);if(a!=null){var i=a.domain(r).range(n);return cW(i),i}}}var FN=(e,t,r)=>{var n=IN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&$d(e))return sK(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&$d(e))return aK(e,t.tickCount,t.allowDecimals)}},UN=He([MN,F0,Oh],FN),$N=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&$d(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],c=r[r.length-1];return[Math.min(a,i),Math.max(o,c)]}return t},FK=He([kn,MN,UN,vn],$N),UK=He(dx,kn,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Ih(e.map(c=>c.value))).sort((c,d)=>c-d);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),AI=He(UK,kr,tI,ps,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!la(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=ia(r,e*i),c=e*i/2;return c-o-(c-o)/i*o}return 0}),$K=(e,t)=>{var r=Gl(e,t);return r==null||typeof r.padding!="string"?0:AI(e,"xAxis",t,r.padding)},zK=(e,t)=>{var r=Kl(e,t);return r==null||typeof r.padding!="string"?0:AI(e,"yAxis",t,r.padding)},WK=He(Gl,$K,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),qK=He(Kl,zK,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),HK=He([ps,WK,G1,V1,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),VK=He([ps,kr,qK,G1,V1,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),$0=(e,t,r,n)=>{var a;switch(t){case"xAxis":return HK(e,r,n);case"yAxis":return VK(e,r,n);case"zAxis":return(a=jN(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return aI(e);case"radiusAxis":return iI(e,r);default:return}},SI=He([kn,$0],ax),Rh=He([kn,Oh,FK,SI],BN);He([U0,ux,vn],AK);function EI(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var hx=(e,t)=>t,fx=(e,t,r)=>r,GK=He(q1,hx,fx,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(EI)),KK=He(H1,hx,fx,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(EI)),kI=(e,t)=>({width:e.width,height:t.height}),XK=(e,t)=>{var r=typeof t.width=="number"?t.width:_0;return{width:r,height:e.height}},PI=He(ps,Gl,kI),YK=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},ZK=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},JK=He(Hl,ps,GK,hx,fx,(e,t,r,n,a)=>{var i={},o;return r.forEach(c=>{var d=kI(t,c);o==null&&(o=YK(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[c.id]=o-Number(u)*d.height,o+=(u?-1:1)*d.height}),i}),QK=He(ql,ps,KK,hx,fx,(e,t,r,n,a)=>{var i={},o;return r.forEach(c=>{var d=XK(t,c);o==null&&(o=ZK(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[c.id]=o-Number(u)*d.width,o+=(u?-1:1)*d.width}),i}),eX=(e,t)=>{var r=Gl(e,t);if(r!=null)return JK(e,r.orientation,r.mirror)},tX=He([ps,Gl,eX,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),rX=(e,t)=>{var r=Kl(e,t);if(r!=null)return QK(e,r.orientation,r.mirror)},nX=He([ps,Kl,rX,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),TI=He(ps,Kl,(e,t)=>{var r=typeof t.width=="number"?t.width:_0;return{width:r,height:e.height}}),vC=(e,t,r)=>{switch(t){case"xAxis":return PI(e,r).width;case"yAxis":return TI(e,r).height;default:return}},II=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,c=eu(e,n),d=t.map(u=>u.value);if(o&&c&&i==="category"&&a&&Ak(d))return d}},zN=He([kr,dx,kn,vn],II),_I=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=eu(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(c=>c.value)}},WN=He([kr,dx,F0,vn],_I),wC=He([kr,xK,Oh,Rh,zN,WN,$0,UN,vn],(e,t,r,n,a,i,o,c,d)=>{if(t==null)return null;var u=eu(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:c,range:o,realScaleType:r,scale:n}}),sX=(e,t,r,n,a,i,o,c,d)=>{if(!(t==null||n==null)){var u=eu(e,d),{type:f,ticks:p,tickCount:b}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,N=f==="category"&&n.bandwidth?n.bandwidth()/x:0;N=d==="angleAxis"&&i!=null&&i.length>=2?Ss(i[0]-i[1])*2*N:N;var j=p||a;if(j){var w=j.map((C,P)=>{var k=o?o.indexOf(C):C;return{index:P,coordinate:n(k)+N,value:C,offset:N}});return w.filter(C=>!Wi(C.coordinate))}return u&&c?c.map((C,P)=>({coordinate:n(C)+N,value:C,index:P,offset:N})):n.ticks?n.ticks(b).map(C=>({coordinate:n(C)+N,value:C,offset:N})):n.domain().map((C,P)=>({coordinate:n(C)+N,value:o?o[C]:C,index:P,offset:N}))}},OI=He([kr,F0,Oh,Rh,UN,$0,zN,WN,vn],sX),aX=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var c=eu(e,o),{tickCount:d}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Ss(n[0]-n[1])*2*u:u,c&&i?i.map((f,p)=>({coordinate:r(f)+u,value:f,index:p,offset:u})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+u,value:f,offset:u})):r.domain().map((f,p)=>({coordinate:r(f)+u,value:a?a[f]:f,index:p,offset:u}))}},fh=He([kr,F0,Rh,$0,zN,WN,vn],aX),mh=He(kn,Rh,(e,t)=>{if(!(e==null||t==null))return Rg(Rg({},e),{},{scale:t})}),iX=He([kn,Oh,MN,SI],BN);He((e,t,r)=>jN(e,r),iX,(e,t)=>{if(!(e==null||t==null))return Rg(Rg({},e),{},{scale:t})});var oX=He([kr,q1,H1],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),RI=e=>e.options.defaultTooltipEventType,DI=e=>e.options.validateTooltipEventTypes;function LI(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function qN(e,t){var r=RI(e),n=DI(e);return LI(t,r,n)}function lX(e){return Ft(t=>qN(t,e))}var MI=(e,t)=>{var r,n=Number(t);if(!(Wi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},cX=e=>e.tooltip.settings,xc={active:!1,index:null,dataKey:void 0,coordinate:void 0},dX={itemInteraction:{click:xc,hover:xc},axisInteraction:{click:xc,hover:xc},keyboardInteraction:xc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},BI=pi({name:"tooltip",initialState:dX,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:xa()},removeTooltipEntrySettings:{reducer(e,t){var r=Il(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:xa()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:uX,removeTooltipEntrySettings:hX,setTooltipSettingsState:fX,setActiveMouseOverItemIndex:FI,mouseLeaveItem:mX,mouseLeaveChart:UI,setActiveClickItemIndex:pX,setMouseOverAxisIndex:$I,setMouseClickAxisIndex:gX,setSyncInteraction:vv,setKeyboardInteraction:wv}=BI.actions,xX=BI.reducer;function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(n){yX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yX(e,t,r){return(t=bX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=vX(e,"string");return typeof t=="symbol"?t:t+""}function vX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wX(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function NX(e){return e.index!=null}var zI=(e,t,r,n)=>{if(t==null)return xc;var a=wX(e,t,r);if(a==null)return xc;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(NX(a)){if(i)return Hm(Hm({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Hm(Hm({},xc),{},{coordinate:a.coordinate})},HN=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!la(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},WI=(e,t,r,n,a,i,o,c)=>{if(!(i==null||c==null)){var d=o[0],u=d==null?void 0:c(d.positions,i);if(u!=null)return u;var f=a==null?void 0:a[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},qI=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},z0=e=>e.options.tooltipPayloadSearcher,Dh=e=>e.tooltip;function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){jX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jX(e,t,r){return(t=CX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=AX(e,"string");return typeof t=="symbol"?t:t+""}function AX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SX(e,t){return e??t}var HI=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:c,computedData:d,dataStartIndex:u,dataEndIndex:f}=r,p=[];return e.reduce((b,x)=>{var N,{dataDefinedOnItem:j,settings:w}=x,C=SX(j,c),P=Array.isArray(C)?PP(C,u,f):C,k=(N=w==null?void 0:w.dataKey)!==null&&N!==void 0?N:n,_=w==null?void 0:w.nameKey,O;if(n&&Array.isArray(P)&&!Array.isArray(P[0])&&o==="axis"?O=QU(P,n,a):O=i(P,t,d,_),Array.isArray(O))O.forEach(F=>{var U=CC(CC({},w),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});b.push(o6({tooltipEntrySettings:U,dataKey:F.dataKey,payload:F.payload,value:An(F.payload,F.dataKey),name:F.name}))});else{var $;b.push(o6({tooltipEntrySettings:w,dataKey:k,payload:O,value:An(O,k),name:($=An(O,_))!==null&&$!==void 0?$:w==null?void 0:w.name}))}return b},p)}},VN=He([ys,kr,hI,gN,xs],CI),EX=He([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),kX=He([xs,Th],CN),W0=He([EX,ys,kX],SN,{memoizeOptions:{resultEqualityCheck:cx}}),PX=He([W0],e=>e.filter(ox)),TX=He([W0],EN,{memoizeOptions:{resultEqualityCheck:cx}}),Lh=He([TX,Xc],kN),IX=He([PX,Xc,ys],cI),GN=He([Lh,ys,W0],TN),VI=He([ys],IN),_X=He([ys],e=>e.allowDataOverflow),GI=He([VI,_X],FT),OX=He([W0],e=>e.filter(ox)),RX=He([IX,OX,M0],gI),DX=He([RX,Xc,xs,GI],xI),LX=He([W0],mI),MX=He([Lh,ys,LX,ux,xs],RN,{memoizeOptions:{resultEqualityCheck:lx}}),BX=He([yI,xs,Th],_h),FX=He([BX,xs],wI),UX=He([bI,xs,Th],_h),$X=He([UX,xs],NI),zX=He([vI,xs,Th],_h),WX=He([zX,xs],jI),qX=He([FX,WX,$X],Dg),HX=He([ys,VI,GI,DX,MX,qX,kr,xs],DN),KI=He([ys,kr,Lh,GN,M0,xs,HX],LN),VX=He([KI,ys,VN],FN),GX=He([ys,KI,VX,xs],$N),XI=e=>{var t=xs(e),r=Th(e),n=!1;return $0(e,t,r,n)},YI=He([ys,XI],ax),ZI=He([ys,VN,GX,YI],BN),KX=He([kr,GN,ys,xs],II),XX=He([kr,GN,ys,xs],_I),YX=(e,t,r,n,a,i,o,c)=>{if(t){var{type:d}=t,u=eu(e,c);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=c==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Ss(a[0]-a[1])*2*p:p,u&&o?o.map((b,x)=>({coordinate:n(b)+p,value:b,index:x,offset:p})):n.domain().map((b,x)=>({coordinate:n(b)+p,value:i?i[b]:b,index:x,offset:p}))}}},Xl=He([kr,ys,VN,ZI,XI,KX,XX,xs],YX),KN=He([RI,DI,cX],(e,t,r)=>LI(r.shared,e,t)),JI=e=>e.tooltip.settings.trigger,XN=e=>e.tooltip.settings.defaultIndex,mx=He([Dh,KN,JI,XN],zI),Wd=He([mx,Lh],HN),QI=He([Xl,Wd],MI),e_=He([mx],e=>{if(e)return e.dataKey}),t_=He([Dh,KN,JI,XN],qI),ZX=He([ql,Hl,kr,ps,Xl,XN,t_,z0],WI),JX=He([mx,ZX],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),QX=He([mx],e=>e.active),eY=He([t_,Wd,Xc,lI,QI,z0,KN],HI);He([eY],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){tY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tY(e,t,r){return(t=rY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sY=()=>Ft(ys),aY=()=>{var e=sY(),t=Ft(Xl),r=Ft(ZI);return L5(SC(SC({},e),{},{scale:r}),t)},iY=()=>Ft(gN),YN=(e,t)=>t,r_=(e,t,r)=>r,ZN=(e,t,r,n)=>n,oY=He(Xl,e=>M1(e,t=>t.coordinate)),JN=He([Dh,YN,r_,ZN],zI),n_=He([JN,Lh],HN),lY=(e,t,r)=>{if(t!=null){var n=Dh(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},s_=He([Dh,YN,r_,ZN],qI),Lg=He([ql,Hl,kr,ps,Xl,ZN,s_,z0],WI),cY=He([JN,Lg],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),a_=He(Xl,n_,MI),dY=He([s_,n_,Xc,lI,a_,z0,YN],HI),uY=He([JN],e=>({isActive:e.active,activeIndex:e.index})),hY=(e,t,r,n,a,i,o,c)=>{if(!(!e||!t||!n||!a||!i)){var d=vW(e.chartX,e.chartY,t,r,c);if(d){var u=NW(d,t),f=oW(u,o,i,n,a),p=wW(t,i,f,d);return{activeIndex:String(f),activeCoordinate:p}}}};function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){fY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fY(e,t,r){return(t=mY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mY(e){var t=pY(e,"string");return typeof t=="symbol"?t:t+""}function pY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gY(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:c,tooltipEventType:d,chartName:u}=e,f=t,p=r,b=n;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var x,N;if(u==="ScatterChart")x=f,N=Rq;else if(u==="BarChart")x=Dq(o,f,a,i),N=ZP;else if(o==="radial"){var{cx:j,cy:w,radius:C,startAngle:P,endAngle:k}=JP(f);x={cx:j,cy:w,startAngle:P,endAngle:k,innerRadius:C,outerRadius:C},N=eT}else x={points:yH(o,f,a)},N=VP;var _=typeof c=="object"&&"className"in c?c.className:void 0,O=Vm(Vm(Vm(Vm({stroke:"#ccc",pointerEvents:"none"},a),x),o0(c)),{},{payload:p,payloadIndex:b,className:zr("recharts-tooltip-cursor",_)});return A.isValidElement(c)?A.cloneElement(c,O):A.createElement(N,O)}function xY(e){var t=aY(),r=$P(),n=$5(),a=iY();return A.createElement(gY,Nv({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var i_=A.createContext(null),yY=()=>A.useContext(i_),o_={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function i(d,u,f,p,b){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new a(f,p||d,b),N=r?r+u:u;return d._events[N]?d._events[N].fn?d._events[N]=[d._events[N],x]:d._events[N].push(x):(d._events[N]=x,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new n:delete d._events[u]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)t.call(f,p)&&u.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u){var f=r?r+u:u,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,x=p.length,N=new Array(x);b<x;b++)N[b]=p[b].fn;return N},c.prototype.listenerCount=function(u){var f=r?r+u:u,p=this._events[f];return p?p.fn?1:p.length:0},c.prototype.emit=function(u,f,p,b,x,N){var j=r?r+u:u;if(!this._events[j])return!1;var w=this._events[j],C=arguments.length,P,k;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),C){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,b),!0;case 5:return w.fn.call(w.context,f,p,b,x),!0;case 6:return w.fn.call(w.context,f,p,b,x,N),!0}for(k=1,P=new Array(C-1);k<C;k++)P[k-1]=arguments[k];w.fn.apply(w.context,P)}else{var _=w.length,O;for(k=0;k<_;k++)switch(w[k].once&&this.removeListener(u,w[k].fn,void 0,!0),C){case 1:w[k].fn.call(w[k].context);break;case 2:w[k].fn.call(w[k].context,f);break;case 3:w[k].fn.call(w[k].context,f,p);break;case 4:w[k].fn.call(w[k].context,f,p,b);break;default:if(!P)for(O=1,P=new Array(C-1);O<C;O++)P[O-1]=arguments[O];w[k].fn.apply(w[k].context,P)}}return!0},c.prototype.on=function(u,f,p){return i(this,u,f,p,!1)},c.prototype.once=function(u,f,p){return i(this,u,f,p,!0)},c.prototype.removeListener=function(u,f,p,b){var x=r?r+u:u;if(!this._events[x])return this;if(!f)return o(this,x),this;var N=this._events[x];if(N.fn)N.fn===f&&(!b||N.once)&&(!p||N.context===p)&&o(this,x);else{for(var j=0,w=[],C=N.length;j<C;j++)(N[j].fn!==f||b&&!N[j].once||p&&N[j].context!==p)&&w.push(N[j]);w.length?this._events[x]=w.length===1?w[0]:w:o(this,x)}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(o_);var bY=o_.exports;const vY=Vo(bY);var x0=new vY,jv="recharts.syncEvent.tooltip",kC="recharts.syncEvent.brush";function l_(e,t){if(t){var r=Number.parseInt(t,10);if(!Wi(r))return e==null?void 0:e[r]}}var wY={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},c_=pi({name:"options",initialState:wY,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),NY=c_.reducer,{createEventEmitter:jY}=c_.actions;function CY(e){return e.tooltip.syncInteraction}var AY={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},d_=pi({name:"chartData",initialState:AY,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:PC,setDataStartEndIndexes:SY,setComputedData:Que}=d_.actions,EY=d_.reducer,kY=["x","y"];function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){PY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PY(e,t,r){return(t=TY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e){var t=IY(e,"string");return typeof t=="symbol"?t:t+""}function IY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Y(e,t){if(e==null)return{};var r,n,a=OY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function OY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var u_=()=>{};function RY(){var e=Ft(xN),t=Ft(yN),r=bn(),n=Ft(rI),a=Ft(Xl),i=$5(),o=K1(),c=Ft(d=>d.rootProps.className);A.useEffect(()=>{if(e==null)return u_;var d=(u,f,p)=>{if(t!==p&&e===u){if(n==="index"){var b;if(o&&f!==null&&f!==void 0&&(b=f.payload)!==null&&b!==void 0&&b.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:N,y:j}=x,w=_Y(x,kY),{x:C,y:P,width:k,height:_}=f.payload.sourceViewBox,O=hu(hu({},w),{},{x:o.x+(k?(N-C)/k:0)*o.width,y:o.y+(_?(j-P)/_:0)*o.height});r(hu(hu({},f),{},{payload:hu(hu({},f.payload),{},{coordinate:O})}))}else r(f);return}if(a!=null){var $;if(typeof n=="function"){var F={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},U=n(a,F);$=a[U]}else n==="value"&&($=a.find(me=>String(me.value)===f.payload.label));var{coordinate:R}=f.payload;if($==null||f.payload.active===!1||R==null||o==null){r(vv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:z,y:M}=R,W=Math.min(z,o.x+o.width),J=Math.min(M,o.y+o.height),K={x:i==="horizontal"?$.coordinate:W,y:i==="horizontal"?J:$.coordinate},V=vv({active:f.payload.active,coordinate:K,dataKey:f.payload.dataKey,index:String($.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(V)}}};return x0.on(jv,d),()=>{x0.off(jv,d)}},[c,r,t,e,n,a,i,o])}function DY(){var e=Ft(xN),t=Ft(yN),r=bn();A.useEffect(()=>{if(e==null)return u_;var n=(a,i,o)=>{t!==o&&e===a&&r(SY(i))};return x0.on(kC,n),()=>{x0.off(kC,n)}},[r,t,e])}function LY(){var e=bn();A.useEffect(()=>{e(jY())},[e]),RY(),DY()}function MY(e,t,r,n,a,i){var o=Ft(x=>lY(x,e,t)),c=Ft(yN),d=Ft(xN),u=Ft(rI),f=Ft(CY),p=f==null?void 0:f.active,b=K1();A.useEffect(()=>{if(!p&&d!=null&&c!=null){var x=vv({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:b});x0.emit(jv,d,x,c)}},[p,r,o,a,n,c,d,u,i,b])}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(n){BY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BY(e,t,r){return(t=FY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Y(e){return e.dataKey}function zY(e,t){return A.isValidElement(e)?A.cloneElement(e,t):typeof e=="function"?A.createElement(e,t):A.createElement(hq,t)}var OC=[],WY={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!tu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Cv(e){var t=ja(e,WY),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:c,isAnimationActive:d,offset:u,payloadUniqBy:f,position:p,reverseDirection:b,useTranslate3d:x,wrapperStyle:N,cursor:j,shared:w,trigger:C,defaultIndex:P,portal:k,axisId:_}=t,O=bn(),$=typeof P=="number"?String(P):P;A.useEffect(()=>{O(fX({shared:w,trigger:C,axisId:_,active:r,defaultIndex:$}))},[O,w,C,_,r,$]);var F=K1(),U=HP(),R=lX(w),{activeIndex:z,isActive:M}=Ft(ve=>uY(ve,R,C,$)),W=Ft(ve=>dY(ve,R,C,$)),J=Ft(ve=>a_(ve,R,C,$)),K=Ft(ve=>cY(ve,R,C,$)),V=W,me=yY(),se=r??M,[oe,ye]=tP([V,se]),we=R==="axis"?J:void 0;MY(R,C,K,we,z,se);var te=k??me;if(te==null)return null;var G=V??OC;se||(G=OC),c&&G.length&&(G=Wk(V.filter(ve=>ve.value!=null&&(ve.hide!==!0||t.includeHidden)),f,$Y));var Q=G.length>0,le=A.createElement(bq,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:d,active:se,coordinate:K,hasPayload:Q,offset:u,position:p,reverseDirection:b,useTranslate3d:x,viewBox:F,wrapperStyle:N,lastBoundingBox:oe,innerRef:ye,hasPortalFromProps:!!k},zY(o,_C(_C({},t),{},{payload:G,label:we,active:se,coordinate:K,accessibilityLayer:U})));return A.createElement(A.Fragment,null,s5.createPortal(le,te),se&&A.createElement(xY,{cursor:j,tooltipEventType:R,coordinate:K,payload:V,index:z}))}var Mh=e=>null;Mh.displayName="Cell";function qY(e,t,r){return(t=HY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class GY{constructor(t){qY(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function RC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RC(Object(r),!0).forEach(function(n){XY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XY(e,t,r){return(t=YY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YY(e){var t=ZY(e,"string");return typeof t=="symbol"?t:t+""}function ZY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JY={cacheSize:2e3,enableCache:!0},h_=KY({},JY),DC=new GY(h_.cacheSize),QY={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},LC="recharts_measurement_span";function eZ(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(c)}var MC=(e,t)=>{try{var r=document.getElementById(LC);r||(r=document.createElement("span"),r.setAttribute("id",LC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,QY,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},If=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||tu.isSsr)return{width:0,height:0};if(!h_.enableCache)return MC(t,r);var n=eZ(t,r),a=DC.get(n);if(a)return a;var i=MC(t,r);return DC.set(n,i),i},BC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,f_={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nZ=Object.keys(f_),Tu="NaN";function sZ(e,t){return e*f_[t]}class Ta{static parse(t){var r,[,n,a]=(r=rZ.exec(t))!==null&&r!==void 0?r:[];return new Ta(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Wi(t)&&(this.unit=""),r!==""&&!tZ.test(r)&&(this.num=NaN,this.unit=""),nZ.includes(r)&&(this.num=sZ(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ta(NaN,""):new Ta(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ta(NaN,""):new Ta(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ta(NaN,""):new Ta(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ta(NaN,""):new Ta(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Wi(this.num)}}function m_(e){if(e.includes(Tu))return Tu;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=BC.exec(t))!==null&&r!==void 0?r:[],o=Ta.parse(n??""),c=Ta.parse(i??""),d=a==="*"?o.multiply(c):o.divide(c);if(d.isNaN())return Tu;t=t.replace(BC,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,f,p,b]=(u=FC.exec(t))!==null&&u!==void 0?u:[],x=Ta.parse(f??""),N=Ta.parse(b??""),j=p==="+"?x.add(N):x.subtract(N);if(j.isNaN())return Tu;t=t.replace(FC,j.toString())}return t}var UC=/\(([^()]*)\)/;function aZ(e){for(var t=e,r;(r=UC.exec(t))!=null;){var[,n]=r;t=t.replace(UC,m_(n))}return t}function iZ(e){var t=e.replace(/\s+/g,"");return t=aZ(t),t=m_(t),t}function oZ(e){try{return iZ(e)}catch{return Tu}}function Yy(e){var t=oZ(e.slice(5,-1));return t===Tu?"":t}var lZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],cZ=["dx","dy","angle","className","breakAll"];function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Av.apply(null,arguments)}function $C(e,t){if(e==null)return{};var r,n,a=dZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var p_=/[ \f\n\r\t\v\u2028\u2029]+/,g_=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(p_));var i=a.map(c=>({word:c,width:If(c,n).width})),o=r?0:If("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},uZ=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:c,breakAll:d}=e,u=zt(i),f=o,p=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce((W,J)=>{var{word:K,width:V}=J,me=W[W.length-1];if(me&&(n==null||a||me.width+V+r<Number(n)))me.words.push(K),me.width+=V+r;else{var se={words:[K],width:V};W.push(se)}return W},[])},b=p(t),x=z=>z.reduce((M,W)=>M.width>W.width?M:W);if(!u||a)return b;var N=b.length>i||x(b).width>Number(n);if(!N)return b;for(var j="",w=z=>{var M=f.slice(0,z),W=g_({breakAll:d,style:c,children:M+j}).wordsWithComputedWidth,J=p(W),K=J.length>i||x(J).width>Number(n);return[K,J]},C=0,P=f.length-1,k=0,_;C<=P&&k<=f.length-1;){var O=Math.floor((C+P)/2),$=O-1,[F,U]=w($),[R]=w(O);if(!F&&!R&&(C=O+1),F&&R&&(P=O-1),!F&&R){_=U;break}k++}return _||b},zC=e=>{var t=ks(e)?[]:e.toString().split(p_);return[{words:t}]},hZ=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!tu.isSsr){var c,d,u=g_({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:f,spaceWidth:p}=u;c=f,d=p}else return zC(n);return uZ({breakAll:i,children:n,maxLines:o,style:a},c,d,t,r)}return zC(n)},WC="#808080",px=A.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:d="end",fill:u=WC}=e,f=$C(e,lZ),p=A.useMemo(()=>hZ({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:o,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,o,f.style,f.width]),{dx:b,dy:x,angle:N,className:j,breakAll:w}=f,C=$C(f,cZ);if(!qo(r)||!qo(n)||p.length===0)return null;var P=r+(zt(b)?b:0),k=n+(zt(x)?x:0),_;switch(d){case"start":_=Yy("calc(".concat(i,")"));break;case"middle":_=Yy("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:_=Yy("calc(".concat(p.length-1," * -").concat(a,")"));break}var O=[];if(o){var $=p[0].width,{width:F}=f;O.push("scale(".concat(zt(F)?F/$:1,")"))}return N&&O.push("rotate(".concat(N,", ").concat(P,", ").concat(k,")")),O.length&&(C.transform=O.join(" ")),A.createElement("text",Av({},zi(C),{ref:t,x:P,y:k,className:zr("recharts-text",j),textAnchor:c,fill:u.includes("url")?WC:u}),p.map((U,R)=>{var z=U.words.join(w?"":" ");return A.createElement("tspan",{x:P,dy:R===0?_:a,key:"".concat(z,"-").concat(R)},z)}))});px.displayName="Text";var fZ=["labelRef"];function mZ(e,t){if(e==null)return{};var r,n,a=pZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Un(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(n){gZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gZ(e,t,r){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xZ(e){var t=yZ(e,"string");return typeof t=="symbol"?t:t+""}function yZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cl.apply(null,arguments)}var x_=A.createContext(null),bZ=e=>{var{x:t,y:r,width:n,height:a,children:i}=e,o=A.useMemo(()=>({x:t,y:r,width:n,height:a}),[t,r,n,a]);return A.createElement(x_.Provider,{value:o},i)},y_=()=>{var e=A.useContext(x_),t=K1();return e||t},vZ=A.createContext(null),wZ=()=>{var e=A.useContext(vZ),t=Ft(oI);return e||t},NZ=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},QN=e=>e!=null&&typeof e=="function",jZ=(e,t)=>{var r=Ss(t-e),n=Math.min(Math.abs(t-e),360);return r*n},CZ=(e,t,r,n,a)=>{var{offset:i,className:o}=e,{cx:c,cy:d,innerRadius:u,outerRadius:f,startAngle:p,endAngle:b,clockWise:x}=a,N=(u+f)/2,j=jZ(p,b),w=j>=0?1:-1,C,P;switch(t){case"insideStart":C=p+w*i,P=x;break;case"insideEnd":C=b-w*i,P=!x;break;case"end":C=b+w*i,P=x;break;default:throw new Error("Unsupported position ".concat(t))}P=j<=0?P:!P;var k=rs(c,d,N,C),_=rs(c,d,N,C+(P?1:-1)*359),O="M".concat(k.x,",").concat(k.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(P?0:1,`,
    `).concat(_.x,",").concat(_.y),$=ks(e.id)?l0("recharts-radial-line-"):e.id;return A.createElement("text",Cl({},n,{dominantBaseline:"central",className:zr("recharts-radial-bar-label",o)}),A.createElement("defs",null,A.createElement("path",{id:$,d:O})),A.createElement("textPath",{xlinkHref:"#".concat($)},r))},AZ=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:c,endAngle:d}=e,u=(c+d)/2;if(r==="outside"){var{x:f,y:p}=rs(n,a,o+t,u);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var b=(i+o)/2,{x,y:N}=rs(n,a,b,u);return{x,y:N,textAnchor:"middle",verticalAnchor:"middle"}},b_=e=>"cx"in e&&zt(e.cx),SZ=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!b_(r)&&(i=r);var{x:o,y:c,width:d,height:u}=t,f=u>=0?1:-1,p=f*n,b=f>0?"end":"start",x=f>0?"start":"end",N=d>=0?1:-1,j=N*n,w=N>0?"end":"start",C=N>0?"start":"end";if(a==="top"){var P={x:o+d/2,y:c-f*n,textAnchor:"middle",verticalAnchor:b};return Un(Un({},P),i?{height:Math.max(c-i.y,0),width:d}:{})}if(a==="bottom"){var k={x:o+d/2,y:c+u+p,textAnchor:"middle",verticalAnchor:x};return Un(Un({},k),i?{height:Math.max(i.y+i.height-(c+u),0),width:d}:{})}if(a==="left"){var _={x:o-j,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Un(Un({},_),i?{width:Math.max(_.x-i.x,0),height:u}:{})}if(a==="right"){var O={x:o+d+j,y:c+u/2,textAnchor:C,verticalAnchor:"middle"};return Un(Un({},O),i?{width:Math.max(i.x+i.width-O.x,0),height:u}:{})}var $=i?{width:d,height:u}:{};return a==="insideLeft"?Un({x:o+j,y:c+u/2,textAnchor:C,verticalAnchor:"middle"},$):a==="insideRight"?Un({x:o+d-j,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},$):a==="insideTop"?Un({x:o+d/2,y:c+p,textAnchor:"middle",verticalAnchor:x},$):a==="insideBottom"?Un({x:o+d/2,y:c+u-p,textAnchor:"middle",verticalAnchor:b},$):a==="insideTopLeft"?Un({x:o+j,y:c+p,textAnchor:C,verticalAnchor:x},$):a==="insideTopRight"?Un({x:o+d-j,y:c+p,textAnchor:w,verticalAnchor:x},$):a==="insideBottomLeft"?Un({x:o+j,y:c+u-p,textAnchor:C,verticalAnchor:b},$):a==="insideBottomRight"?Un({x:o+d-j,y:c+u-p,textAnchor:w,verticalAnchor:b},$):a&&typeof a=="object"&&(zt(a.x)||Ml(a.x))&&(zt(a.y)||Ml(a.y))?Un({x:o+ia(a.x,d),y:c+ia(a.y,u),textAnchor:"end",verticalAnchor:"end"},$):Un({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},$)},EZ={offset:5};function mc(e){var t=ja(e,EZ),{viewBox:r,position:n,value:a,children:i,content:o,className:c="",textBreakAll:d,labelRef:u}=t,f=wZ(),p=y_(),b=n==="center"?p:f??p,x=r||b;if(!x||ks(a)&&ks(i)&&!A.isValidElement(o)&&typeof o!="function")return null;var N=Un(Un({},t),{},{viewBox:x});if(A.isValidElement(o)){var{labelRef:j}=N,w=mZ(N,fZ);return A.cloneElement(o,w)}var C;if(typeof o=="function"){if(C=A.createElement(o,N),A.isValidElement(C))return C}else C=NZ(t);var P=b_(x),k=zi(t);if(P&&(n==="insideStart"||n==="insideEnd"||n==="end"))return CZ(t,n,C,k,x);var _=P?AZ(x,t.offset,t.position):SZ(t,x);return A.createElement(px,Cl({ref:u,className:zr("recharts-label",c)},k,_,{breakAll:d}),C)}mc.displayName="Label";var kZ=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?A.createElement(mc,Cl({key:"label-implicit"},n)):qo(e)?A.createElement(mc,Cl({key:"label-implicit",value:e},n)):A.isValidElement(e)?e.type===mc?A.cloneElement(e,Un({key:"label-implicit"},n)):A.createElement(mc,Cl({key:"label-implicit",content:e},n)):QN(e)?A.createElement(mc,Cl({key:"label-implicit",content:e},n)):e&&typeof e=="object"?A.createElement(mc,Cl({},e,{key:"label-implicit"},n)):null};function PZ(e){var{label:t,labelRef:r}=e,n=y_();return kZ(t,n,r)||null}var v_={},w_={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(w_);var N_={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(N_);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w_,r=N_,n=D1;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(v_);var TZ=v_.last;const IZ=Vo(TZ);var _Z=["valueAccessor"],OZ=["dataKey","clockWise","id","textBreakAll"];function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mg.apply(null,arguments)}function HC(e,t){if(e==null)return{};var r,n,a=RZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DZ=e=>Array.isArray(e.value)?IZ(e.value):e.value,j_=A.createContext(void 0),LZ=j_.Provider,C_=A.createContext(void 0),MZ=C_.Provider;function BZ(){return A.useContext(j_)}function FZ(){return A.useContext(C_)}function wp(e){var{valueAccessor:t=DZ}=e,r=HC(e,_Z),{dataKey:n,clockWise:a,id:i,textBreakAll:o}=r,c=HC(r,OZ),d=BZ(),u=FZ(),f=d||u;return!f||!f.length?null:A.createElement(Ua,{className:"recharts-label-list"},f.map((p,b)=>{var x,N=ks(n)?t(p,b):An(p&&p.payload,n),j=ks(i)?{}:{id:"".concat(i,"-").concat(b)};return A.createElement(mc,Mg({key:"label-".concat(b)},zi(p),c,j,{fill:(x=r.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:b}))}))}wp.displayName="LabelList";function A_(e){var{label:t}=e;return t?t===!0?A.createElement(wp,{key:"labelList-implicit"}):A.isValidElement(t)||QN(t)?A.createElement(wp,{key:"labelList-implicit",content:t}):typeof t=="object"?A.createElement(wp,Mg({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var S_=e=>e.graphicalItems.polarItems,UZ=He([vn,B0],CN),gx=He([S_,kn,UZ],SN),$Z=He([gx],EN),xx=He([$Z,hN],kN),zZ=He([xx,kn,gx],TN);He([xx,kn,gx],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var i,o=An(n,(i=t.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:An(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var VC=()=>{},WZ=He([xx,kn,gx,ux,vn],RN),qZ=He([kn,_N,ON,VC,WZ,VC,kr,vn],DN),E_=He([kn,kr,xx,zZ,M0,vn,qZ],LN),HZ=He([E_,kn,Oh],FN);He([kn,E_,HZ,vn],$N);var VZ={radiusAxis:{},angleAxis:{}},k_=pi({name:"polarAxis",initialState:VZ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ehe,removeRadiusAxis:the,addAngleAxis:rhe,removeAngleAxis:nhe}=k_.actions,GZ=k_.reducer;function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(n){KZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KZ(e,t,r){return(t=XZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XZ(e){var t=YZ(e,"string");return typeof t=="symbol"?t:t+""}function YZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZZ=(e,t)=>t,e3=He([S_,ZZ],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),JZ=[],t3=(e,t,r)=>(r==null?void 0:r.length)===0?JZ:r,P_=He([hN,e3,t3],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(i=>KC(KC({},t.presentationProps),i.props))),a!=null)return a}}),QZ=He([P_,e3,t3],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var i,o=An(n,t.nameKey,t.name),c;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=t.fill,{value:W1(o,t.dataKey),color:c,payload:n,type:t.legendType}})}),eJ=He([P_,e3,t3,ps],(e,t,r,n)=>{if(!(t==null||e==null))return eQ({offset:n,pieSettings:t,displayedData:e,cells:r})}),T_={exports:{}},Wr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3=Symbol.for("react.element"),n3=Symbol.for("react.portal"),yx=Symbol.for("react.fragment"),bx=Symbol.for("react.strict_mode"),vx=Symbol.for("react.profiler"),wx=Symbol.for("react.provider"),Nx=Symbol.for("react.context"),tJ=Symbol.for("react.server_context"),jx=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),Ax=Symbol.for("react.suspense_list"),Sx=Symbol.for("react.memo"),Ex=Symbol.for("react.lazy"),rJ=Symbol.for("react.offscreen"),I_;I_=Symbol.for("react.module.reference");function Ki(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case r3:switch(e=e.type,e){case yx:case vx:case bx:case Cx:case Ax:return e;default:switch(e=e&&e.$$typeof,e){case tJ:case Nx:case jx:case Ex:case Sx:case wx:return e;default:return t}}case n3:return t}}}Wr.ContextConsumer=Nx;Wr.ContextProvider=wx;Wr.Element=r3;Wr.ForwardRef=jx;Wr.Fragment=yx;Wr.Lazy=Ex;Wr.Memo=Sx;Wr.Portal=n3;Wr.Profiler=vx;Wr.StrictMode=bx;Wr.Suspense=Cx;Wr.SuspenseList=Ax;Wr.isAsyncMode=function(){return!1};Wr.isConcurrentMode=function(){return!1};Wr.isContextConsumer=function(e){return Ki(e)===Nx};Wr.isContextProvider=function(e){return Ki(e)===wx};Wr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===r3};Wr.isForwardRef=function(e){return Ki(e)===jx};Wr.isFragment=function(e){return Ki(e)===yx};Wr.isLazy=function(e){return Ki(e)===Ex};Wr.isMemo=function(e){return Ki(e)===Sx};Wr.isPortal=function(e){return Ki(e)===n3};Wr.isProfiler=function(e){return Ki(e)===vx};Wr.isStrictMode=function(e){return Ki(e)===bx};Wr.isSuspense=function(e){return Ki(e)===Cx};Wr.isSuspenseList=function(e){return Ki(e)===Ax};Wr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===yx||e===vx||e===bx||e===Cx||e===Ax||e===rJ||typeof e=="object"&&e!==null&&(e.$$typeof===Ex||e.$$typeof===Sx||e.$$typeof===wx||e.$$typeof===Nx||e.$$typeof===jx||e.$$typeof===I_||e.getModuleId!==void 0)};Wr.typeOf=Ki;T_.exports=Wr;var nJ=T_.exports,XC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",YC=null,Zy=null,__=e=>{if(e===YC&&Array.isArray(Zy))return Zy;var t=[];return A.Children.forEach(e,r=>{ks(r)||(nJ.isFragment(r)?t=t.concat(__(r.props.children)):t.push(r))}),Zy=t,YC=e,t};function s3(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>XC(a)):n=[XC(t)],__(e).forEach(a=>{var i=Bd(a,"type.displayName")||Bd(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var O_={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(O_);var sJ=O_.isPlainObject;const aJ=Vo(sJ);function ZC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(r),!0).forEach(function(n){iJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iJ(e,t,r){return(t=oJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oJ(e){var t=lJ(e,"string");return typeof t=="symbol"?t:t+""}function lJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bg(){return Bg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bg.apply(null,arguments)}var QC=(e,t,r,n,a)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+a),o+="L ".concat(e+r-i/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},cJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dJ=e=>{var t=ja(e,cJ),{x:r,y:n,upperWidth:a,lowerWidth:i,height:o,className:c}=t,{animationEasing:d,animationDuration:u,animationBegin:f,isUpdateAnimationActive:p}=t,b=A.useRef(null),[x,N]=A.useState(-1),j=A.useRef(a),w=A.useRef(i),C=A.useRef(o),P=A.useRef(r),k=A.useRef(n),_=Z1(e,"trapezoid-");if(A.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var K=b.current.getTotalLength();K&&N(K)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||o!==+o||a===0&&i===0||o===0)return null;var O=zr("recharts-trapezoid",c);if(!p)return A.createElement("g",null,A.createElement("path",Bg({},zi(t),{className:O,d:QC(r,n,a,i,o)})));var $=j.current,F=w.current,U=C.current,R=P.current,z=k.current,M="0px ".concat(x===-1?1:x,"px"),W="".concat(x,"px 0px"),J=GP(["strokeDasharray"],u,d);return A.createElement(Y1,{animationId:_,key:_,canBegin:x>0,duration:u,easing:d,isActive:p,begin:f},K=>{var V=$s($,a,K),me=$s(F,i,K),se=$s(U,o,K),oe=$s(R,r,K),ye=$s(z,n,K);b.current&&(j.current=V,w.current=me,C.current=se,P.current=oe,k.current=ye);var we=K>0?{transition:J,strokeDasharray:W}:{strokeDasharray:M};return A.createElement("path",Bg({},zi(t),{className:O,d:QC(oe,ye,V,me,se),ref:b,style:JC(JC({},we),t.style)}))})},uJ=["option","shapeType","propTransformer","activeClassName","isActive"];function hJ(e,t){if(e==null)return{};var r,n,a=fJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(n){mJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mJ(e,t,r){return(t=pJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pJ(e){var t=gJ(e,"string");return typeof t=="symbol"?t:t+""}function gJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xJ(e,t){return Fg(Fg({},t),e)}function yJ(e,t){return e==="symbols"}function tA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return A.createElement(ZP,r);case"trapezoid":return A.createElement(dJ,r);case"sector":return A.createElement(eT,r);case"symbols":if(yJ(t))return A.createElement(g5,r);break;default:return null}}function bJ(e){return A.isValidElement(e)?e.props:e}function R_(e){var{option:t,shapeType:r,propTransformer:n=xJ,activeClassName:a="recharts-active-shape",isActive:i}=e,o=hJ(e,uJ),c;if(A.isValidElement(t))c=A.cloneElement(t,Fg(Fg({},o),bJ(t)));else if(typeof t=="function")c=t(o);else if(aJ(t)&&typeof t!="boolean"){var d=n(t,o);c=A.createElement(tA,{shapeType:r,elementProps:d})}else{var u=o;c=A.createElement(tA,{shapeType:r,elementProps:u})}return i?A.createElement(Ua,{className:a},c):c}var a3=(e,t)=>{var r=bn();return(n,a)=>i=>{e==null||e(n,a,i),r(FI({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},i3=e=>{var t=bn();return(r,n)=>a=>{e==null||e(r,n,a),t(mX())}},o3=(e,t)=>{var r=bn();return(n,a)=>i=>{e==null||e(n,a,i),r(pX({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function D_(e){var{fn:t,args:r}=e,n=bn(),a=gi();return A.useLayoutEffect(()=>{if(!a){var i=t(r);return n(uX(i)),()=>{n(hX(i))}}},[t,r,n,a]),null}var L_=()=>{};function vJ(e){var{legendPayload:t}=e,r=bn(),n=gi();return A.useLayoutEffect(()=>n?L_:(r(WP(t)),()=>{r(qP(t))}),[r,n,t]),null}function wJ(e){var{legendPayload:t}=e,r=bn(),n=Ft(kr);return A.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?L_:(r(WP(t)),()=>{r(qP(t))}),[r,n,t]),null}var Jy,NJ=()=>{var[e]=A.useState(()=>l0("uid-"));return e},jJ=(Jy=FE.useId)!==null&&Jy!==void 0?Jy:NJ;function CJ(e,t){var r=jJ();return t||(e?"".concat(e,"-").concat(r):r)}var AJ=A.createContext(void 0),M_=e=>{var{id:t,type:r,children:n}=e,a=CJ("recharts-".concat(r),t);return A.createElement(AJ.Provider,{value:a},n(a))},SJ={cartesianItems:[],polarItems:[]},B_=pi({name:"graphicalItems",initialState:SJ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:xa()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=Il(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:xa()},removeCartesianGraphicalItem:{reducer(e,t){var r=Il(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:xa()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:xa()},removePolarGraphicalItem:{reducer(e,t){var r=Il(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:xa()}}}),{addCartesianGraphicalItem:EJ,replaceCartesianGraphicalItem:kJ,removeCartesianGraphicalItem:PJ,addPolarGraphicalItem:TJ,removePolarGraphicalItem:IJ}=B_.actions,_J=B_.reducer;function OJ(e){var t=bn(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?t(EJ(e)):r.current!==e&&t(kJ({prev:r.current,next:e})),r.current=e},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(t(PJ(r.current)),r.current=null)},[t]),null}function RJ(e){var t=bn();return A.useLayoutEffect(()=>(t(TJ(e)),()=>{t(IJ(e))}),[t,e]),null}var DJ=["onMouseEnter","onClick","onMouseLeave"],LJ=["id"],MJ=["id"];function l3(e,t){if(e==null)return{};var r,n,a=BJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(r),!0).forEach(function(n){FJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FJ(e,t,r){return(t=UJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=$J(e,"string");return typeof t=="symbol"?t:t+""}function $J(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uc(){return Uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uc.apply(null,arguments)}function zJ(e){var t=A.useMemo(()=>s3(e.children,Mh),[e.children]),r=Ft(n=>QZ(n,e.id,t));return r==null?null:A.createElement(wJ,{legendPayload:r})}function WJ(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:o,name:c,hide:d,tooltipType:u}=e;return{dataDefinedOnItem:n.map(f=>f.tooltipPayload),positions:n.map(f=>f.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:W1(c,t),hide:d,type:u,color:o,unit:""}}}var qJ=(e,t)=>e>t?"start":e<t?"end":"middle",HJ=(e,t,r)=>ia(typeof t=="function"?t(e):t,r,r*.8),VJ=(e,t,r)=>{var{top:n,left:a,width:i,height:o}=t,c=kP(i,o),d=a+ia(e.cx,i,i/2),u=n+ia(e.cy,o,o/2),f=ia(e.innerRadius,c,0),p=HJ(r,e.outerRadius,c),b=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:d,cy:u,innerRadius:f,outerRadius:p,maxRadius:b}},GJ=(e,t)=>{var r=Ss(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function KJ(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var XJ=(e,t)=>{if(A.isValidElement(e))return A.cloneElement(e,t);if(typeof e=="function")return e(t);var r=zr("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return A.createElement(VP,Uc({},t,{type:"linear",className:r}))},YJ=(e,t,r)=>{if(A.isValidElement(e))return A.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),A.isValidElement(n)))return n;var a=zr("recharts-pie-label-text",KJ(e));return A.createElement(px,Uc({},t,{alignmentBaseline:"middle",className:a}),n)};function ZJ(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:i,dataKey:o}=r;if(!n||!a||!t)return null;var c=yo(r),d=o0(a),u=o0(i),f=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,p=t.map((b,x)=>{var N=(b.startAngle+b.endAngle)/2,j=rs(b.cx,b.cy,b.outerRadius+f,N),w=gn(gn(gn(gn({},c),b),{},{stroke:"none"},d),{},{index:x,textAnchor:qJ(j.x,b.cx)},j),C=gn(gn(gn(gn({},c),b),{},{fill:"none",stroke:b.fill},u),{},{index:x,points:[rs(b.cx,b.cy,b.outerRadius,N),j],key:"line"});return A.createElement(Ua,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(x)},i&&XJ(i,C),YJ(a,w,An(b,o)))});return A.createElement(Ua,{className:"recharts-pie-labels"},p)}function JJ(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?A.createElement(A_,{label:a}):A.createElement(ZJ,{sectors:t,props:r,showLabels:n})}function QJ(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a}=e,i=Ft(Wd),{onMouseEnter:o,onClick:c,onMouseLeave:d}=a,u=l3(a,DJ),f=a3(o,a.dataKey),p=i3(d),b=o3(c,a.dataKey);return t==null||t.length===0?null:A.createElement(A.Fragment,null,t.map((x,N)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&t.length!==1)return null;var j=r&&String(N)===i,w=i?n:null,C=j?r:w,P=gn(gn({},x),{},{stroke:x.stroke,tabIndex:-1,[OP]:N,[RP]:a.dataKey});return A.createElement(Ua,Uc({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},P0(u,x,N),{onMouseEnter:f(x,N),onMouseLeave:p(x,N),onClick:b(x,N)}),A.createElement(R_,Uc({option:C,isActive:j,shapeType:"sector"},P)))}))}function eQ(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:i}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:u,nameKey:f,tooltipType:p}=r,b=Math.abs(r.minAngle),x=GJ(c,d),N=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,w=n.filter($=>An($,u,0)!==0).length,C=(N>=360?w:w-1)*j,P=N-w*b-C,k=n.reduce(($,F)=>{var U=An(F,u,0);return $+(zt(U)?U:0)},0),_;if(k>0){var O;_=n.map(($,F)=>{var U=An($,u,0),R=An($,f,F),z=VJ(r,i,$),M=(zt(U)?U:0)/k,W,J=gn(gn({},$),a&&a[F]&&a[F].props);F?W=O.endAngle+Ss(x)*j*(U!==0?1:0):W=c;var K=W+Ss(x)*((U!==0?b:0)+M*P),V=(W+K)/2,me=(z.innerRadius+z.outerRadius)/2,se=[{name:R,value:U,payload:J,dataKey:u,type:p}],oe=rs(z.cx,z.cy,me,V);return O=gn(gn(gn(gn({},r.presentationProps),{},{percent:M,cornerRadius:o,name:R,tooltipPayload:se,midAngle:V,middleRadius:me,tooltipPosition:oe},J),z),{},{value:U,startAngle:W,endAngle:K,payload:J,paddingAngle:Ss(x)*j}),O})}return _}function tQ(e){var{showLabels:t,sectors:r,children:n}=e,a=A.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return A.createElement(MZ,{value:t?a:void 0},n)}function rQ(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,b=Z1(t,"recharts-pie-"),x=r.current,[N,j]=A.useState(!1),w=A.useCallback(()=>{typeof p=="function"&&p(),j(!1)},[p]),C=A.useCallback(()=>{typeof f=="function"&&f(),j(!0)},[f]);return A.createElement(tQ,{showLabels:!N,sectors:n},A.createElement(Y1,{animationId:b,begin:i,duration:o,isActive:a,easing:c,onAnimationStart:C,onAnimationEnd:w,key:b},P=>{var k=[],_=n&&n[0],O=_==null?void 0:_.startAngle;return n==null||n.forEach(($,F)=>{var U=x&&x[F],R=F>0?Bd($,"paddingAngle",0):0;if(U){var z=$s(U.endAngle-U.startAngle,$.endAngle-$.startAngle,P),M=gn(gn({},$),{},{startAngle:O+R,endAngle:O+z+R});k.push(M),O=M.endAngle}else{var{endAngle:W,startAngle:J}=$,K=$s(0,W-J,P),V=gn(gn({},$),{},{startAngle:O+R,endAngle:O+K+R});k.push(V),O=V.endAngle}}),r.current=k,A.createElement(Ua,null,A.createElement(QJ,{sectors:k,activeShape:d,inactiveShape:u,allOtherPieProps:t}))}),A.createElement(JJ,{showLabels:!N,sectors:n,props:t}),t.children)}var nQ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!tu.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function sQ(e){var{id:t}=e,r=l3(e,LJ),{hide:n,className:a,rootTabIndex:i}=e,o=A.useMemo(()=>s3(e.children,Mh),[e.children]),c=Ft(f=>eJ(f,t,o)),d=A.useRef(null),u=zr("recharts-pie",a);return n||c==null?(d.current=null,A.createElement(Ua,{tabIndex:i,className:u})):A.createElement(A.Fragment,null,A.createElement(D_,{fn:WJ,args:gn(gn({},e),{},{sectors:c})}),A.createElement(Ua,{tabIndex:i,className:u},A.createElement(rQ,{props:gn(gn({},r),{},{sectors:c}),previousSectorsRef:d})))}function c3(e){var t=ja(e,nQ),{id:r}=t,n=l3(t,MJ),a=yo(n);return A.createElement(M_,{id:r,type:"pie"},i=>A.createElement(A.Fragment,null,A.createElement(RJ,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),A.createElement(zJ,Uc({},n,{id:i})),A.createElement(sQ,Uc({},n,{id:i}))))}c3.displayName="Pie";function nA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nA(Object(r),!0).forEach(function(n){aQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aQ(e,t,r){return(t=iQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iQ(e){var t=oQ(e,"string");return typeof t=="symbol"?t:t+""}function oQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lQ={xAxis:{},yAxis:{},zAxis:{}},F_=pi({name:"cartesianAxis",initialState:lQ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:xa()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:xa()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:xa()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:xa()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:xa()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:xa()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=sA(sA({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:cQ,removeXAxis:dQ,addYAxis:uQ,removeYAxis:hQ,addZAxis:she,removeZAxis:ahe,updateYAxisWidth:fQ}=F_.actions,mQ=F_.reducer,pQ=He([ps],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),gQ=He([pQ,ql,Hl],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),U_=()=>Ft(gQ),xQ="Invariant failed";function yQ(e,t){throw new Error(xQ)}var bQ=["x","y"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(null,arguments)}function aA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(r),!0).forEach(function(n){vQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vQ(e,t,r){return(t=wQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wQ(e){var t=NQ(e,"string");return typeof t=="symbol"?t:t+""}function NQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jQ(e,t){if(e==null)return{};var r,n,a=CQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AQ(e,t){var{x:r,y:n}=e,a=jQ(e,bQ),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),u="".concat(t.height||a.height),f=parseInt(u,10),p="".concat(t.width||a.width),b=parseInt(p,10);return uf(uf(uf(uf(uf({},t),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:f,width:b,name:t.name,radius:t.radius})}function d3(e){return A.createElement(R_,Sv({shapeType:"rectangle",propTransformer:AQ,activeClassName:"recharts-active-bar"},e))}var SQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(zt(t))return t;var i=zt(n)||ks(n);return i?t(n,a):(i||yQ(),r)}},EQ={},$_=pi({name:"errorBars",initialState:EQ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:ihe,replaceErrorBar:ohe,removeErrorBar:lhe}=$_.actions,kQ=$_.reducer,PQ=["children"];function TQ(e,t){if(e==null)return{};var r,n,a=IQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function IQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _Q={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},OQ=A.createContext(_Q);function RQ(e){var{children:t}=e,r=TQ(e,PQ);return A.createElement(OQ.Provider,{value:r},t)}function z_(e,t){var r,n,a=Ft(u=>Gl(u,e)),i=Ft(u=>Kl(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:ei.allowDataOverflow,c=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ti.allowDataOverflow,d=o||c;return{needClip:d,needClipX:o,needClipY:c}}function DQ(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=U_(),{needClipX:i,needClipY:o,needClip:c}=z_(t,r);if(!c)return null;var{x:d,y:u,width:f,height:p}=a;return A.createElement("clipPath",{id:"clipPath-".concat(n)},A.createElement("rect",{x:i?d:d-f/2,y:o?u:u-p/2,width:i?f:f*2,height:o?p:p*2}))}var LQ=["onMouseEnter","onMouseLeave","onClick"],MQ=["value","background","tooltipPosition"],BQ=["id"],FQ=["onMouseEnter","onClick","onMouseLeave"];function $c(){return $c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$c.apply(null,arguments)}function iA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(r),!0).forEach(function(n){UQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UQ(e,t,r){return(t=$Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e){var t=zQ(e,"string");return typeof t=="symbol"?t:t+""}function zQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ug(e,t){if(e==null)return{};var r,n,a=WQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qQ=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:W1(r,t),payload:e}]};function HQ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:o,unit:c}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:W1(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:c}}}function VQ(e){var t=Ft(Wd),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:c,onClick:d}=i,u=Ug(i,LQ),f=a3(o,n),p=i3(c),b=o3(d,n);if(!a||r==null)return null;var x=o0(a);return A.createElement(A.Fragment,null,r.map((N,j)=>{var{value:w,background:C,tooltipPosition:P}=N,k=Ug(N,MQ);if(!C)return null;var _=f(N,j),O=p(N,j),$=b(N,j),F=ya(ya(ya(ya(ya({option:a,isActive:String(j)===t},k),{},{fill:"#eee"},C),x),P0(u,N,j)),{},{onMouseEnter:_,onMouseLeave:O,onClick:$,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return A.createElement(d3,$c({key:"background-bar-".concat(j)},F))}))}function GQ(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,height:i.height};return ya(ya({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return A.createElement(LZ,{value:t?a:void 0},r)}function KQ(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:o}=e,c=Ft(Wd),d=Ft(e_),u=r&&String(i)===c&&(d==null||o===d),f=u?r:t;return A.createElement(d3,$c({},n,{name:String(n.name)},a,{isActive:u,option:f,index:i,dataKey:o}))}function XQ(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return A.createElement(d3,$c({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function YQ(e){var{data:t,props:r}=e,n=yo(r),{id:a}=n,i=Ug(n,BQ),{shape:o,dataKey:c,activeBar:d}=r,{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,b=Ug(r,FQ),x=a3(u,c),N=i3(p),j=o3(f,c);return t?A.createElement(A.Fragment,null,t.map((w,C)=>A.createElement(Ua,$c({key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(C),className:"recharts-bar-rectangle"},P0(b,w,C),{onMouseEnter:x(w,C),onMouseLeave:N(w,C),onClick:j(w,C)}),d?A.createElement(KQ,{shape:o,activeBar:d,baseProps:i,entry:w,index:C,dataKey:c}):A.createElement(XQ,{shape:o,baseProps:i,entry:w,index:C,dataKey:c})))):null}function ZQ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:d,onAnimationEnd:u,onAnimationStart:f}=t,p=r.current,b=Z1(t,"recharts-bar-"),[x,N]=A.useState(!1),j=!x,w=A.useCallback(()=>{typeof u=="function"&&u(),N(!1)},[u]),C=A.useCallback(()=>{typeof f=="function"&&f(),N(!0)},[f]);return A.createElement(GQ,{showLabels:j,rects:n},A.createElement(Y1,{animationId:b,begin:o,duration:c,isActive:i,easing:d,onAnimationEnd:w,onAnimationStart:C,key:b},P=>{var k=P===1?n:n==null?void 0:n.map((_,O)=>{var $=p&&p[O];if($)return ya(ya({},_),{},{x:$s($.x,_.x,P),y:$s($.y,_.y,P),width:$s($.width,_.width,P),height:$s($.height,_.height,P)});if(a==="horizontal"){var F=$s(0,_.height,P);return ya(ya({},_),{},{y:_.y+_.height-F,height:F})}var U=$s(0,_.width,P);return ya(ya({},_),{},{width:U})});return P>0&&(r.current=k??null),k==null?null:A.createElement(Ua,null,A.createElement(YQ,{props:t,data:k}))}),A.createElement(A_,{label:t.label}),t.children)}function JQ(e){var t=A.useRef(null);return A.createElement(ZQ,{previousRectanglesRef:t,props:e})}var W_=0,QQ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:An(e,t)}};class eee extends A.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:o,needClip:c,background:d,id:u}=this.props;if(t||r==null)return null;var f=zr("recharts-bar",a),p=u;return A.createElement(Ua,{className:f,id:u},c&&A.createElement("defs",null,A.createElement(DQ,{clipPathId:p,xAxisId:i,yAxisId:o})),A.createElement(Ua,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(p,")"):void 0},A.createElement(VQ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),A.createElement(JQ,this.props)))}}var tee={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!tu.isSsr,legendType:"rect",minPointSize:W_,xAxisId:0,yAxisId:0};function ree(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:f}=e,{needClip:p}=z_(t,r),b=$5(),x=gi(),N=s3(e.children,Mh),j=Ft(P=>Tee(P,t,r,x,e.id,N));if(b!=="vertical"&&b!=="horizontal")return null;var w,C=j==null?void 0:j[0];return C==null||C.height==null||C.width==null?w=0:w=b==="vertical"?C.height/2:C.width/2,A.createElement(RQ,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:QQ,errorBarOffset:w},A.createElement(eee,$c({},e,{layout:b,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:u,isAnimationActive:f})))}function nee(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:o,yAxis:c,xAxisTicks:d,yAxisTicks:u,stackedData:f,displayedData:p,offset:b,cells:x,parentViewBox:N}=e,j=t==="horizontal"?c:o,w=f?j.scale.domain():null,C=gW({numericAxis:j});return p.map((P,k)=>{var _,O,$,F,U,R;f?_=dW(f[k],w):(_=An(P,r),Array.isArray(_)||(_=[C,_]));var z=SQ(n,W_)(_[1],k);if(t==="horizontal"){var M,[W,J]=[c.scale(_[0]),c.scale(_[1])];O=s6({axis:o,ticks:d,bandSize:i,offset:a.offset,entry:P,index:k}),$=(M=J??W)!==null&&M!==void 0?M:void 0,F=a.size;var K=W-J;if(U=Wi(K)?0:K,R={x:O,y:b.top,width:F,height:b.height},Math.abs(z)>0&&Math.abs(U)<Math.abs(z)){var V=Ss(U||z)*(Math.abs(z)-Math.abs(U));$-=V,U+=V}}else{var[me,se]=[o.scale(_[0]),o.scale(_[1])];if(O=me,$=s6({axis:c,ticks:u,bandSize:i,offset:a.offset,entry:P,index:k}),F=se-me,U=a.size,R={x:b.left,y:$,width:b.width,height:U},Math.abs(z)>0&&Math.abs(F)<Math.abs(z)){var oe=Ss(F||z)*(Math.abs(z)-Math.abs(F));F+=oe}}if(O==null||$==null||F==null||U==null)return null;var ye=ya(ya({},P),{},{x:O,y:$,width:F,height:U,value:f?_:_[1],payload:P,background:R,tooltipPosition:{x:O+F/2,y:$+U/2},parentViewBox:N},x&&x[k]&&x[k].props);return ye}).filter(Boolean)}function see(e){var t=ja(e,tee),r=gi();return A.createElement(M_,{id:t.id,type:"bar"},n=>A.createElement(A.Fragment,null,A.createElement(vJ,{legendPayload:qQ(t)}),A.createElement(D_,{fn:HQ,args:t}),A.createElement(OJ,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:pW(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),A.createElement(ree,$c({},t,{id:n}))))}var q_=A.memo(see);q_.displayName="Bar";function oA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(r),!0).forEach(function(n){aee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aee(e,t,r){return(t=iee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iee(e){var t=oee(e,"string");return typeof t=="symbol"?t:t+""}function oee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lee=(e,t)=>t,cee=(e,t,r)=>r,dee=(e,t,r,n)=>n,uee=(e,t,r,n,a)=>a,q0=He([AN,uee],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),hee=He([q0],e=>e==null?void 0:e.maxBarSize),fee=(e,t,r,n,a,i)=>i,lA=(e,t,r)=>{var n=r??e;if(!ks(n))return ia(n,t,0)},mee=He([kr,AN,lee,cee,dee],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),pee=(e,t,r,n)=>{var a=kr(e);return a==="horizontal"?bv(e,"yAxis",r,n):bv(e,"xAxis",t,n)},gee=(e,t,r)=>{var n=kr(e);return n==="horizontal"?vC(e,"xAxis",t):vC(e,"yAxis",r)},xee=(e,t,r)=>{var n={},a=e.filter(ox),i=e.filter(u=>u.stackId==null),o=a.reduce((u,f)=>(u[f.stackId]||(u[f.stackId]=[]),u[f.stackId].push(f),u),n),c=Object.entries(o).map(u=>{var[f,p]=u,b=p.map(N=>N.dataKey),x=lA(t,r,p[0].barSize);return{stackId:f,dataKeys:b,barSize:x}}),d=i.map(u=>{var f=[u.dataKey].filter(b=>b!=null),p=lA(t,r,u.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...c,...d]},yee=He([mee,oK,gee],xee),bee=(e,t,r,n,a)=>{var i,o,c=q0(e,t,r,n,a);if(c!=null){var d=kr(e),u=eI(e),{maxBarSize:f}=c,p=ks(f)?u:f,b,x;return d==="horizontal"?(b=mh(e,"xAxis",t,n),x=fh(e,"xAxis",t,n)):(b=mh(e,"yAxis",r,n),x=fh(e,"yAxis",r,n)),(i=(o=L5(b,x,!0))!==null&&o!==void 0?o:p)!==null&&i!==void 0?i:0}},H_=(e,t,r,n)=>{var a=kr(e),i,o;return a==="horizontal"?(i=mh(e,"xAxis",t,n),o=fh(e,"xAxis",t,n)):(i=mh(e,"yAxis",r,n),o=fh(e,"yAxis",r,n)),L5(i,o)};function vee(e,t,r,n,a){var i=n.length;if(!(i<1)){var o=ia(e,r,0,!0),c,d=[];if(la(n[0].barSize)){var u=!1,f=r/i,p=n.reduce((C,P)=>C+(P.barSize||0),0);p+=(i-1)*o,p>=r&&(p-=(i-1)*o,o=0),p>=r&&f>0&&(u=!0,f*=.9,p=i*f);var b=(r-p)/2>>0,x={offset:b-o,size:0};c=n.reduce((C,P)=>{var k,_={stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:x.offset+x.size+o,size:u?f:(k=P.barSize)!==null&&k!==void 0?k:0}},O=[...C,_];return x=O[O.length-1].position,O},d)}else{var N=ia(t,r,0,!0);r-2*N-(i-1)*o<=0&&(o=0);var j=(r-2*N-(i-1)*o)/i;j>1&&(j>>=0);var w=la(a)?Math.min(j,a):j;c=n.reduce((C,P,k)=>[...C,{stackId:P.stackId,dataKeys:P.dataKeys,position:{offset:N+(j+o)*k+(j-w)/2,size:w}}],d)}return c}}var wee=(e,t,r,n,a,i,o)=>{var c=ks(o)?t:o,d=vee(r,n,a!==i?a:i,e,c);return a!==i&&d!=null&&(d=d.map(u=>Gm(Gm({},u),{},{position:Gm(Gm({},u.position),{},{offset:u.position.offset-a/2})}))),d},Nee=He([yee,eI,iK,tI,bee,H_,hee],wee),jee=(e,t,r,n)=>mh(e,"xAxis",t,n),Cee=(e,t,r,n)=>mh(e,"yAxis",r,n),Aee=(e,t,r,n)=>fh(e,"xAxis",t,n),See=(e,t,r,n)=>fh(e,"yAxis",r,n),Eee=He([Nee,q0],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),kee=(e,t)=>{var r=NN(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(o=>o.key===r)}}}},Pee=He([pee,q0],kee),Tee=He([ps,M5,jee,Cee,Aee,See,Eee,kr,fN,H_,Pee,q0,fee],(e,t,r,n,a,i,o,c,d,u,f,p,b)=>{var{chartData:x,dataStartIndex:N,dataEndIndex:j}=d;if(!(p==null||o==null||t==null||c!=="horizontal"&&c!=="vertical"||r==null||n==null||a==null||i==null||u==null)){var{data:w}=p,C;if(w!=null&&w.length>0?C=w:C=x==null?void 0:x.slice(N,j+1),C!=null)return nee({layout:c,barSettings:p,pos:o,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:f,displayedData:C,offset:e,cells:b})}}),V_=e=>{var{chartData:t}=e,r=bn(),n=gi();return A.useEffect(()=>n?()=>{}:(r(PC(t)),()=>{r(PC(void 0))}),[t,r,n]),null},cA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},G_=pi({name:"brush",initialState:cA,reducers:{setBrushSettings(e,t){return t.payload==null?cA:t.payload}}}),{setBrushSettings:che}=G_.actions,Iee=G_.reducer;function _ee(e,t,r){return(t=Oee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oee(e){var t=Ree(e,"string");return typeof t=="symbol"?t:t+""}function Ree(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class u3{static create(t){return new u3(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}_ee(u3,"EPS",1e-4);function Dee(e){return(e%180+180)%180}var Lee=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Dee(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},Mee={dots:[],areas:[],lines:[]},K_=pi({name:"referenceElements",initialState:Mee,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Il(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Il(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Il(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:dhe,removeDot:uhe,addArea:hhe,removeArea:fhe,addLine:mhe,removeLine:phe}=K_.actions,Bee=K_.reducer,Fee=A.createContext(void 0),Uee=e=>{var{children:t}=e,[r]=A.useState("".concat(l0("recharts"),"-clip")),n=U_();if(n==null)return null;var{x:a,y:i,width:o,height:c}=n;return A.createElement(Fee.Provider,{value:r},A.createElement("defs",null,A.createElement("clipPath",{id:r},A.createElement("rect",{x:a,y:i,height:c,width:o}))),t)};function ph(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function X_(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function $ee(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Lee(n,r)}function zee(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:c}=e;return t===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function $g(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function Wee(e,t){return X_(e,t+1)}function qee(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:c}=t,d=0,u=1,f=o,p=function(){var N=n==null?void 0:n[d];if(N===void 0)return{v:X_(n,u)};var j=d,w,C=()=>(w===void 0&&(w=r(N,j)),w),P=N.coordinate,k=d===0||$g(e,P,C,f,c);k||(d=0,f=o,u+=1),k&&(f=P+e*(C()/2+a),d+=u)},b;u<=i.length;)if(b=p(),b)return b.v;return[]}function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(n){Hee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hee(e,t,r){return(t=Vee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vee(e){var t=Gee(e,"string");return typeof t=="symbol"?t:t+""}function Gee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kee(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:c}=t,{end:d}=t,u=function(b){var x=i[b],N,j=()=>(N===void 0&&(N=r(x,b)),N);if(b===o-1){var w=e*(x.coordinate+e*j()/2-d);i[b]=x=ra(ra({},x),{},{tickCoord:w>0?x.coordinate-w*e:x.coordinate})}else i[b]=x=ra(ra({},x),{},{tickCoord:x.coordinate});var C=$g(e,x.tickCoord,j,c,d);C&&(d=x.tickCoord-e*(j()/2+a),i[b]=ra(ra({},x),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function Xee(e,t,r,n,a,i){var o=(n||[]).slice(),c=o.length,{start:d,end:u}=t;if(i){var f=n[c-1],p=r(f,c-1),b=e*(f.coordinate+e*p/2-u);o[c-1]=f=ra(ra({},f),{},{tickCoord:b>0?f.coordinate-b*e:f.coordinate});var x=$g(e,f.tickCoord,()=>p,d,u);x&&(u=f.tickCoord-e*(p/2+a),o[c-1]=ra(ra({},f),{},{isShow:!0}))}for(var N=i?c-1:c,j=function(P){var k=o[P],_,O=()=>(_===void 0&&(_=r(k,P)),_);if(P===0){var $=e*(k.coordinate-e*O()/2-d);o[P]=k=ra(ra({},k),{},{tickCoord:$<0?k.coordinate-$*e:k.coordinate})}else o[P]=k=ra(ra({},k),{},{tickCoord:k.coordinate});var F=$g(e,k.tickCoord,O,d,u);F&&(d=k.tickCoord+e*(O()/2+a),o[P]=ra(ra({},k),{},{isShow:!0}))},w=0;w<N;w++)j(w);return o}function h3(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:c,interval:d,tickFormatter:u,unit:f,angle:p}=e;if(!a||!a.length||!n)return[];if(zt(d)||tu.isSsr){var b;return(b=Wee(a,zt(d)?d:0))!==null&&b!==void 0?b:[]}var x=[],N=c==="top"||c==="bottom"?"width":"height",j=f&&N==="width"?If(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},w=(k,_)=>{var O=typeof u=="function"?u(k.value,_):k.value;return N==="width"?$ee(If(O,{fontSize:t,letterSpacing:r}),j,p):If(O,{fontSize:t,letterSpacing:r})[N]},C=a.length>=2?Ss(a[1].coordinate-a[0].coordinate):1,P=zee(i,C,N);return d==="equidistantPreserveStart"?qee(C,P,w,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=Xee(C,P,w,a,o,d==="preserveStartEnd"):x=Kee(C,P,w,a,o),x.filter(k=>k.isShow))}var Yee=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>o&&(o=p.width)}});var c=r?r.getBoundingClientRect().width:0,d=a+i,u=o+d+c+(r?n:0);return Math.round(u)}return 0},Zee=["axisLine","width","height","className","hide","ticks"],Jee=["viewBox"],Qee=["viewBox"];function Ev(e,t){if(e==null)return{};var r,n,a=ete(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ete(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qd(){return qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qd.apply(null,arguments)}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(n){tte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tte(e,t,r){return(t=rte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rte(e){var t=nte(e,"string");return typeof t=="symbol"?t:t+""}function nte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f3={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function ste(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:c,otherSvgProps:d}=e;if(!c)return null;var u=fs(fs(fs({},d),yo(c)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!o||i==="bottom"&&o);u=fs(fs({},u),{},{x1:t,y1:r+f*a,x2:t+n,y2:r+f*a})}else{var p=+(i==="left"&&!o||i==="right"&&o);u=fs(fs({},u),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+a})}return A.createElement("line",qd({},u,{className:zr("recharts-cartesian-axis-line",Bd(c,"className"))}))}function ate(e,t,r,n,a,i,o,c,d){var u,f,p,b,x,N,j=c?-1:1,w=e.tickSize||o,C=zt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=f=e.coordinate,b=r+ +!c*a,p=b-j*w,N=p-j*d,x=C;break;case"left":p=b=e.coordinate,f=t+ +!c*n,u=f-j*w,x=u-j*d,N=C;break;case"right":p=b=e.coordinate,f=t+ +c*n,u=f+j*w,x=u+j*d,N=C;break;default:u=f=e.coordinate,b=r+ +c*a,p=b+j*w,N=p+j*d,x=C;break}return{line:{x1:u,y1:p,x2:f,y2:b},tick:{x,y:N}}}function ite(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function ote(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function lte(e){var{option:t,tickProps:r,value:n}=e,a,i=zr(r.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(t))a=A.cloneElement(t,fs(fs({},r),{},{className:i}));else if(typeof t=="function")a=t(fs(fs({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=zr(o,t==null?void 0:t.className)),a=A.createElement(px,qd({},r,{className:o}),n)}return a}function cte(e){var{ticks:t=[],tick:r,tickLine:n,stroke:a,tickFormatter:i,unit:o,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:b,width:x,height:N,tickSize:j,tickMargin:w,fontSize:C,letterSpacing:P,getTicksConfig:k,events:_}=e,O=h3(fs(fs({},k),{},{ticks:t}),C,P),$=ite(u,f),F=ote(u,f),U=yo(k),R=o0(r),z={};typeof n=="object"&&(z=n);var M=fs(fs({},U),{},{fill:"none"},z),W=O.map((J,K)=>{var{line:V,tick:me}=ate(J,p,b,x,N,u,j,f,w),se=fs(fs(fs(fs({textAnchor:$,verticalAnchor:F},U),{},{stroke:"none",fill:a},R),me),{},{index:K,payload:J,visibleTicksCount:O.length,tickFormatter:i,padding:c},d);return A.createElement(Ua,qd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},P0(_,J,K)),n&&A.createElement("line",qd({},M,V,{className:zr("recharts-cartesian-axis-tick-line",Bd(n,"className"))})),r&&A.createElement(lte,{option:r,tickProps:se,value:"".concat(typeof i=="function"?i(J.value,K):J.value).concat(o||"")}))});return W.length>0?A.createElement("g",{className:"recharts-cartesian-axis-ticks"},W):null}var dte=A.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:o,ticks:c}=e,d=Ev(e,Zee),[u,f]=A.useState(""),[p,b]=A.useState(""),x=A.useRef(null);A.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var j;return Yee({ticks:x.current,label:(j=e.labelRef)===null||j===void 0?void 0:j.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=A.useCallback(j=>{if(j){var w=j.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var C=w[0];if(C){var P=window.getComputedStyle(C),k=P.fontSize,_=P.letterSpacing;(k!==u||_!==p)&&(f(k),b(_))}}},[u,p]);return o||n!=null&&n<=0||a!=null&&a<=0?null:A.createElement(Ua,{className:zr("recharts-cartesian-axis",i),ref:N},A.createElement(ste,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:yo(e)}),A.createElement(cte,{ticks:c,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:p,getTicksConfig:e,events:d}),A.createElement(bZ,{x:e.x,y:e.y,width:e.width,height:e.height},A.createElement(PZ,{label:e.label,labelRef:e.labelRef}),e.children))}),ute=A.memo(dte,(e,t)=>{var{viewBox:r}=e,n=Ev(e,Jee),{viewBox:a}=t,i=Ev(t,Qee);return ph(r,a)&&ph(n,i)}),m3=A.forwardRef((e,t)=>{var r=ja(e,f3);return A.createElement(ute,qd({},r,{ref:t}))});m3.displayName="CartesianAxis";var hte=["x1","y1","x2","y2","key"],fte=["offset"],mte=["xAxisId","yAxisId"],pte=["xAxisId","yAxisId"];function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){gte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gte(e,t,r){return(t=xte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xte(e){var t=yte(e,"string");return typeof t=="symbol"?t:t+""}function yte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bd(){return bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bd.apply(null,arguments)}function zg(e,t){if(e==null)return{};var r,n,a=bte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vte=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:c}=e;return A.createElement("rect",{x:n,y:a,ry:c,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Y_(e,t){var r;if(A.isValidElement(e))r=A.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:c}=t,d=zg(t,hte),u=yo(d),{offset:f}=u,p=zg(u,fte);r=A.createElement("line",bd({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function wte(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,c=zg(e,mte),d=a.map((u,f)=>{var p=sa(sa({},c),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(f),index:f});return Y_(n,p)});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function Nte(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,c=zg(e,pte),d=a.map((u,f)=>{var p=sa(sa({},c),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(f),index:f});return Y_(n,p)});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function jte(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:c,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var u=c.map(p=>Math.round(p+a-a)).sort((p,b)=>p-b);a!==u[0]&&u.unshift(0);var f=u.map((p,b)=>{var x=!u[b+1],N=x?a+o-p:u[b+1]-p;if(N<=0)return null;var j=b%t.length;return A.createElement("rect",{key:"react-".concat(b),y:p,x:n,height:N,width:i,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Cte(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:c,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var u=d.map(p=>Math.round(p+a-a)).sort((p,b)=>p-b);a!==u[0]&&u.unshift(0);var f=u.map((p,b)=>{var x=!u[b+1],N=x?a+o-p:u[b+1]-p;if(N<=0)return null;var j=b%r.length;return A.createElement("rect",{key:"react-".concat(b),x:p,y:i,width:N,height:c,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Ate=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return TP(h3(sa(sa(sa({},f3),r),{},{ticks:IP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},Ste=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return TP(h3(sa(sa(sa({},f3),r),{},{ticks:IP(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},Ete={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Z_(e){var t=F5(),r=U5(),n=$P(),a=sa(sa({},ja(e,Ete)),{},{x:zt(e.x)?e.x:n.left,y:zt(e.y)?e.y:n.top,width:zt(e.width)?e.width:n.width,height:zt(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:c,y:d,width:u,height:f,syncWithTicks:p,horizontalValues:b,verticalValues:x}=a,N=gi(),j=Ft(R=>wC(R,"xAxis",i,N)),w=Ft(R=>wC(R,"yAxis",o,N));if(!zt(u)||u<=0||!zt(f)||f<=0||!zt(c)||c!==+c||!zt(d)||d!==+d)return null;var C=a.verticalCoordinatesGenerator||Ate,P=a.horizontalCoordinatesGenerator||Ste,{horizontalPoints:k,verticalPoints:_}=a;if((!k||!k.length)&&typeof P=="function"){var O=b&&b.length,$=P({yAxis:w?sa(sa({},w),{},{ticks:O?b:w.ticks}):void 0,width:t,height:r,offset:n},O?!0:p);vg(Array.isArray($),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof $,"]")),Array.isArray($)&&(k=$)}if((!_||!_.length)&&typeof C=="function"){var F=x&&x.length,U=C({xAxis:j?sa(sa({},j),{},{ticks:F?x:j.ticks}):void 0,width:t,height:r,offset:n},F?!0:p);vg(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(_=U)}return A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(vte,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),A.createElement(jte,bd({},a,{horizontalPoints:k})),A.createElement(Cte,bd({},a,{verticalPoints:_})),A.createElement(wte,bd({},a,{offset:n,horizontalPoints:k,xAxis:j,yAxis:w})),A.createElement(Nte,bd({},a,{offset:n,verticalPoints:_,xAxis:j,yAxis:w})))}Z_.displayName="CartesianGrid";var kte=["dangerouslySetInnerHTML","ticks"],Pte=["id"],Tte=["domain"],Ite=["domain"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kv.apply(null,arguments)}function Wg(e,t){if(e==null)return{};var r,n,a=_te(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _te(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ote(e){var t=bn();return A.useLayoutEffect(()=>(t(cQ(e)),()=>{t(dQ(e))}),[e,t]),null}var Rte=e=>{var{xAxisId:t,className:r}=e,n=Ft(M5),a=gi(),i="xAxis",o=Ft(w=>Rh(w,i,t,a)),c=Ft(w=>OI(w,i,t,a)),d=Ft(w=>PI(w,t)),u=Ft(w=>tX(w,t)),f=Ft(w=>dI(w,t));if(d==null||u==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:b}=e,x=Wg(e,kte),{id:N}=f,j=Wg(f,Pte);return A.createElement(m3,kv({},x,j,{scale:o,x:u.x,y:u.y,width:d.width,height:d.height,className:zr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:c}))},Dte={allowDataOverflow:ei.allowDataOverflow,allowDecimals:ei.allowDecimals,allowDuplicatedCategory:ei.allowDuplicatedCategory,height:ei.height,hide:!1,mirror:ei.mirror,orientation:ei.orientation,padding:ei.padding,reversed:ei.reversed,scale:ei.scale,tickCount:ei.tickCount,type:ei.type,xAxisId:0},Lte=e=>{var t,r,n,a,i,o=ja(e,Dte);return A.createElement(A.Fragment,null,A.createElement(Ote,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(a=o.minTickGap)!==null&&a!==void 0?a:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),A.createElement(Rte,o))},Mte=(e,t)=>{var{domain:r}=e,n=Wg(e,Tte),{domain:a}=t,i=Wg(t,Ite);return ph(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:ph({domain:r},{domain:a}):!1},J_=A.memo(Lte,Mte);J_.displayName="XAxis";var Bte=["dangerouslySetInnerHTML","ticks"],Fte=["id"],Ute=["domain"],$te=["domain"];function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pv.apply(null,arguments)}function qg(e,t){if(e==null)return{};var r,n,a=zte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wte(e){var t=bn();return A.useLayoutEffect(()=>(t(uQ(e)),()=>{t(hQ(e))}),[e,t]),null}var qte=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=A.useRef(null),o=A.useRef(null),c=Ft(M5),d=gi(),u=bn(),f="yAxis",p=Ft(O=>Rh(O,f,t,d)),b=Ft(O=>TI(O,t)),x=Ft(O=>nX(O,t)),N=Ft(O=>OI(O,f,t,d)),j=Ft(O=>uI(O,t));if(A.useLayoutEffect(()=>{if(!(n!=="auto"||!b||QN(a)||A.isValidElement(a)||j==null)){var O=i.current;if(O){var $=O.getCalculatedWidth();Math.round(b.width)!==Math.round($)&&u(fQ({id:t,width:$}))}}},[N,b,u,a,t,n,j]),b==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:w,ticks:C}=e,P=qg(e,Bte),{id:k}=j,_=qg(j,Fte);return A.createElement(m3,Pv({},P,_,{ref:i,labelRef:o,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:b.width,height:b.height,className:zr("recharts-".concat(f," ").concat(f),r),viewBox:c,ticks:N}))},Hte={allowDataOverflow:ti.allowDataOverflow,allowDecimals:ti.allowDecimals,allowDuplicatedCategory:ti.allowDuplicatedCategory,hide:!1,mirror:ti.mirror,orientation:ti.orientation,padding:ti.padding,reversed:ti.reversed,scale:ti.scale,tickCount:ti.tickCount,type:ti.type,width:ti.width,yAxisId:0},Vte=e=>{var t,r,n,a,i,o=ja(e,Hte);return A.createElement(A.Fragment,null,A.createElement(Wte,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(a=o.minTickGap)!==null&&a!==void 0?a:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),A.createElement(qte,o))},Gte=(e,t)=>{var{domain:r}=e,n=qg(e,Ute),{domain:a}=t,i=qg(t,$te);return ph(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:ph({domain:r},{domain:a}):!1},Q_=A.memo(Vte,Gte);Q_.displayName="YAxis";var Kte={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0=A;function Xte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yte=typeof Object.is=="function"?Object.is:Xte,Zte=H0.useSyncExternalStore,Jte=H0.useRef,Qte=H0.useEffect,ere=H0.useMemo,tre=H0.useDebugValue;Kte.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=Jte(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=ere(function(){function d(x){if(!u){if(u=!0,f=x,x=n(x),a!==void 0&&o.hasValue){var N=o.value;if(a(N,x))return p=N}return p=x}if(N=p,Yte(f,x))return N;var j=n(x);return a!==void 0&&a(N,j)?(f=x,N):(f=x,p=j)}var u=!1,f,p,b=r===void 0?null:r;return[function(){return d(t())},b===null?void 0:function(){return d(b())}]},[t,r,n,a]);var c=Zte(e,i[0],i[1]);return Qte(function(){o.hasValue=!0,o.value=c},[c]),tre(c),c};function rre(e){e()}function nre(){let e=null,t=null;return{clear(){e=null,t=null},notify(){rre(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var fA={notify(){},get:()=>[]};function sre(e,t){let r,n=fA,a=0,i=!1;function o(j){f();const w=n.subscribe(j);let C=!1;return()=>{C||(C=!0,w(),p())}}function c(){n.notify()}function d(){N.onStateChange&&N.onStateChange()}function u(){return i}function f(){a++,r||(r=e.subscribe(d),n=nre())}function p(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=fA)}function b(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const N={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:u,trySubscribe:b,tryUnsubscribe:x,getListeners:()=>n};return N}var are=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ire=are(),ore=()=>typeof navigator<"u"&&navigator.product==="ReactNative",lre=ore(),cre=()=>ire||lre?A.useLayoutEffect:A.useEffect,dre=cre(),Qy=Symbol.for("react-redux-context"),e2=typeof globalThis<"u"?globalThis:{};function ure(){if(!A.createContext)return{};const e=e2[Qy]??(e2[Qy]=new Map);let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var hre=ure();function fre(e){const{children:t,context:r,serverState:n,store:a}=e,i=A.useMemo(()=>{const d=sre(a);return{store:a,subscription:d,getServerState:n?()=>n:void 0}},[a,n]),o=A.useMemo(()=>a.getState(),[a]);dre(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,o]);const c=r||hre;return A.createElement(c.Provider,{value:i},t)}var mre=fre,pre=(e,t)=>t,p3=He([pre,kr,oI,xs,YI,Xl,oY,ps],hY),g3=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},eO=qi("mouseClick"),tO=I0();tO.startListening({actionCreator:eO,effect:(e,t)=>{var r=e.payload,n=p3(t.getState(),g3(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(gX({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Tv=qi("mouseMove"),rO=I0();rO.startListening({actionCreator:Tv,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=qN(n,n.tooltip.settings.shared),i=p3(n,g3(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch($I({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(UI()))}});var mA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},nO=pi({name:"rootProps",initialState:mA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:mA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),gre=nO.reducer,{updateOptions:xre}=nO.actions,sO=pi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:yre}=sO.actions,bre=sO.reducer,aO=qi("keyDown"),iO=qi("focus"),x3=I0();x3.startListening({actionCreator:aO,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(HN(a,Lh(r))),c=Xl(r);if(i==="Enter"){var d=Lg(r,"axis","hover",String(a.index));t.dispatch(wv({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var u=oX(r),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,b=o+p*f;if(!(c==null||b>=c.length||b<0)){var x=Lg(r,"axis","hover",String(b));t.dispatch(wv({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});x3.startListening({actionCreator:iO,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=Lg(r,"axis","hover",String(i));t.dispatch(wv({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Ti=qi("externalEvent"),oO=I0();oO.startListening({actionCreator:Ti,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:JX(r),activeDataKey:e_(r),activeIndex:Wd(r),activeLabel:QI(r),activeTooltipIndex:Wd(r),isTooltipActive:QX(r)};e.payload.handler(n,e.payload.reactEvent)}}});var vre=He([Dh],e=>e.tooltipItemPayloads),wre=He([vre,z0,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(c=>c.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),lO=qi("touchMove"),cO=I0();cO.startListening({actionCreator:lO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=qN(n,n.tooltip.settings.shared);if(a==="axis"){var i=p3(n,g3({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch($I({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,c=r.touches[0],d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(OP),f=(o=d.getAttribute(RP))!==null&&o!==void 0?o:void 0,p=wre(t.getState(),u,f);t.dispatch(FI({activeDataKey:f,activeIndex:u,activeCoordinate:p}))}}});var Nre=nP({brush:Iee,cartesianAxis:mQ,chartData:EY,errorBars:kQ,graphicalItems:_J,layout:Kz,legend:YW,options:NY,polarAxis:GZ,polarOptions:bre,referenceElements:Bee,rootProps:gre,tooltip:xX}),jre=function(t){return bz({reducer:Nre,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([tO.middleware,rO.middleware,x3.middleware,oO.middleware,cO.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(pP({type:"raf"}))},devTools:tu.devToolsEnabled})};function dO(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=gi(),i=A.useRef(null);if(a)return r;i.current==null&&(i.current=jre(t));var o=k5;return A.createElement(mre,{context:o,store:i.current},r)}function uO(e){var{layout:t,margin:r}=e,n=bn(),a=gi();return A.useEffect(()=>{a||(n(Hz(t)),n(qz(r)))},[n,a,t,r]),null}function hO(e){var t=bn();return A.useEffect(()=>{t(xre(e))},[t,e]),null}var Cre=["children"];function Are(e,t){if(e==null)return{};var r,n,a=Sre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hg.apply(null,arguments)}var Ere={width:"100%",height:"100%",display:"block"},kre=A.forwardRef((e,t)=>{var r=F5(),n=U5(),a=HP();if(!oh(r)||!oh(n))return null;var{children:i,otherAttributes:o,title:c,desc:d}=e,u,f;return typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?f=o.role:f=a?"application":void 0,A.createElement(u5,Hg({},o,{title:c,desc:d,role:f,tabIndex:u,width:r,height:n,style:Ere,ref:t}),i)}),Pre=e=>{var{children:t}=e,r=Ft(G1);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return A.createElement(u5,{width:n,height:a,x:o,y:i},t)},pA=A.forwardRef((e,t)=>{var{children:r}=e,n=Are(e,Cre),a=gi();return a?A.createElement(Pre,null,r):A.createElement(kre,Hg({ref:t},n),r)});function Tre(){var e=bn(),[t,r]=A.useState(null),n=Ft(jW);return A.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;la(i)&&i!==n&&e(Gz(i))}},[t,e,n]),r}function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ire(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(n){_re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _re(e,t,r){return(t=Ore(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ore(e){var t=Rre(e,"string");return typeof t=="symbol"?t:t+""}function Rre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hd.apply(null,arguments)}var Dre=()=>(LY(),null);function Vg(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Lre=A.forwardRef((e,t)=>{var r,n,a=A.useRef(null),[i,o]=A.useState({containerWidth:Vg((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Vg((n=e.style)===null||n===void 0?void 0:n.height)}),c=A.useCallback((u,f)=>{o(p=>{var b=Math.round(u),x=Math.round(f);return p.containerWidth===b&&p.containerHeight===x?p:{containerWidth:b,containerHeight:x}})},[]),d=A.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null){var{width:f,height:p}=u.getBoundingClientRect();c(f,p);var b=N=>{var{width:j,height:w}=N[0].contentRect;c(j,w)},x=new ResizeObserver(b);x.observe(u),a.current=x}},[t,c]);return A.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[c]),A.createElement(A.Fragment,null,A.createElement(X1,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Hd({ref:d},e)))}),Mre=A.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=A.useState({containerWidth:Vg(r),containerHeight:Vg(n)}),o=A.useCallback((d,u)=>{i(f=>{var p=Math.round(d),b=Math.round(u);return f.containerWidth===p&&f.containerHeight===b?f:{containerWidth:p,containerHeight:b}})},[]),c=A.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:u,height:f}=d.getBoundingClientRect();o(u,f)}},[t,o]);return A.createElement(A.Fragment,null,A.createElement(X1,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Hd({ref:c},e)))}),Bre=A.forwardRef((e,t)=>{var{width:r,height:n}=e;return A.createElement(A.Fragment,null,A.createElement(X1,{width:r,height:n}),A.createElement("div",Hd({ref:t},e)))}),Fre=A.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ml(r)||Ml(n)?A.createElement(Mre,Hd({},e,{ref:t})):A.createElement(Bre,Hd({},e,{ref:t}))});function Ure(e){return e===!0?Lre:Fre}var $re=A.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:c,onMouseDown:d,onMouseEnter:u,onMouseLeave:f,onMouseMove:p,onMouseUp:b,onTouchEnd:x,onTouchMove:N,onTouchStart:j,style:w,width:C,responsive:P,dispatchTouchEvents:k=!0}=e,_=A.useRef(null),O=bn(),[$,F]=A.useState(null),[U,R]=A.useState(null),z=Tre(),M=B5(),W=(M==null?void 0:M.width)>0?M.width:C,J=(M==null?void 0:M.height)>0?M.height:a,K=A.useCallback(be=>{z(be),typeof t=="function"&&t(be),F(be),R(be),be!=null&&(_.current=be)},[z,t,F,R]),V=A.useCallback(be=>{O(eO(be)),O(Ti({handler:i,reactEvent:be}))},[O,i]),me=A.useCallback(be=>{O(Tv(be)),O(Ti({handler:u,reactEvent:be}))},[O,u]),se=A.useCallback(be=>{O(UI()),O(Ti({handler:f,reactEvent:be}))},[O,f]),oe=A.useCallback(be=>{O(Tv(be)),O(Ti({handler:p,reactEvent:be}))},[O,p]),ye=A.useCallback(()=>{O(iO())},[O]),we=A.useCallback(be=>{O(aO(be.key))},[O]),te=A.useCallback(be=>{O(Ti({handler:o,reactEvent:be}))},[O,o]),G=A.useCallback(be=>{O(Ti({handler:c,reactEvent:be}))},[O,c]),Q=A.useCallback(be=>{O(Ti({handler:d,reactEvent:be}))},[O,d]),le=A.useCallback(be=>{O(Ti({handler:b,reactEvent:be}))},[O,b]),ve=A.useCallback(be=>{O(Ti({handler:j,reactEvent:be}))},[O,j]),xe=A.useCallback(be=>{k&&O(lO(be)),O(Ti({handler:N,reactEvent:be}))},[O,k,N]),ke=A.useCallback(be=>{O(Ti({handler:x,reactEvent:be}))},[O,x]),Re=Ure(P);return A.createElement(i_.Provider,{value:$},A.createElement(ik.Provider,{value:U},A.createElement(Re,{width:W??(w==null?void 0:w.width),height:J??(w==null?void 0:w.height),className:zr("recharts-wrapper",n),style:Ire({position:"relative",cursor:"default",width:W,height:J},w),onClick:V,onContextMenu:te,onDoubleClick:G,onFocus:ye,onKeyDown:we,onMouseDown:Q,onMouseEnter:me,onMouseLeave:se,onMouseMove:oe,onMouseUp:le,onTouchEnd:ke,onTouchMove:xe,onTouchStart:ve,ref:K},A.createElement(Dre,null),r)))}),zre=["width","height","responsive","children","className","style","compact","title","desc"];function Wre(e,t){if(e==null)return{};var r,n,a=qre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fO=A.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:o,style:c,compact:d,title:u,desc:f}=e,p=Wre(e,zre),b=yo(p);return d?A.createElement(A.Fragment,null,A.createElement(X1,{width:r,height:n}),A.createElement(pA,{otherAttributes:b,title:u,desc:f},i)):A.createElement($re,{className:o,style:c,width:r,height:n,responsive:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},A.createElement(pA,{otherAttributes:b,title:u,desc:f,ref:t},A.createElement(Uee,null,i)))});function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iv.apply(null,arguments)}var Hre={top:5,right:5,bottom:5,left:5},Vre={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Hre,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Gre=A.forwardRef(function(t,r){var n,a=ja(t.categoricalChartProps,Vre),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,categoricalChartProps:u}=t,f={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return A.createElement(dO,{preloadedState:{options:f},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},A.createElement(V_,{chartData:u.data}),A.createElement(uO,{layout:a.layout,margin:a.margin}),A.createElement(hO,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),A.createElement(fO,Iv({},a,{ref:r})))}),Kre=["axis","item"],Xre=A.forwardRef((e,t)=>A.createElement(Gre,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kre,tooltipPayloadSearcher:l_,categoricalChartProps:e,ref:t}));function Yre(e){var t=bn();return A.useEffect(()=>{t(yre(e))},[t,e]),null}var Zre=["layout"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(null,arguments)}function Jre(e,t){if(e==null)return{};var r,n,a=Qre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ene={top:5,right:5,bottom:5,left:5},tne={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ene,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},rne=A.forwardRef(function(t,r){var n,a=ja(t.categoricalChartProps,tne),{layout:i}=a,o=Jre(a,Zre),{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f}=t,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:f,eventEmitter:void 0};return A.createElement(dO,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:c},A.createElement(V_,{chartData:a.data}),A.createElement(uO,{layout:i,margin:a.margin}),A.createElement(hO,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),A.createElement(Yre,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),A.createElement(fO,_v({},o,{ref:r})))}),nne=["item"],sne={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},mO=A.forwardRef((e,t)=>{var r=ja(e,sne);return A.createElement(rne,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:nne,tooltipPayloadSearcher:l_,categoricalChartProps:r,ref:t})});const Ov="/api",Gg=()=>{const e=localStorage.getItem("authToken")||localStorage.getItem("token");return e&&!localStorage.getItem("authToken")&&localStorage.setItem("authToken",e),e},xA=e=>{localStorage.setItem("authToken",e),localStorage.setItem("token",e)},ane=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("token"),localStorage.removeItem("user")},ine=()=>{const e=Gg();return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}};async function Dt(e,t={}){const r=`${Ov}${e}`,n={...t,headers:{...ine(),...t.headers}};try{const a=await fetch(r,n);if(!a.ok){const i=await a.json().catch(()=>({}));throw new Error(i.error||`HTTP ${a.status}: ${a.statusText}`)}return await a.json()}catch(a){throw console.error("API Error:",a),a}}const one={login:async(e,t)=>{const r=await Dt("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return xA(r.token),localStorage.setItem("user",JSON.stringify(r.user)),r},register:async e=>{const t=await Dt("/auth/register",{method:"POST",body:JSON.stringify(e)});return xA(t.token),localStorage.setItem("user",JSON.stringify(t.user)),t},me:async()=>Dt("/auth/me"),logout:()=>{ane()}},lne={getStats:async()=>Dt("/dashboard/stats")},Rc={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),(e==null?void 0:e.isWarehouseShipment)!==void 0&&t.append("isWarehouseShipment",String(e.isWarehouseShipment));const r=t.toString();return Dt(`/shipments${r?`?${r}`:""}`)},getById:async e=>Dt(`/shipments/${e}`),create:async e=>Dt("/shipments",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>Dt(`/shipments/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>Dt(`/shipments/${e}`,{method:"DELETE"})},Bi={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search);const r=t.toString();return Dt(`/racks${r?`?${r}`:""}`)},getById:async e=>Dt(`/racks/${e}`),getCategories:async()=>Dt("/racks/categories/list"),create:async e=>Dt("/racks",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>Dt(`/racks/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>Dt(`/racks/${e}`,{method:"DELETE"})},vd={listProfiles:async()=>Dt("/company-profiles/"),getProfile:async e=>Dt(`/company-profiles/${e}`),createProfile:async e=>{const t=Gg(),r=await fetch(`${Ov}/company-profiles/`,{method:"POST",headers:{...t?{Authorization:`Bearer ${t}`}:{}},body:e});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.error||`HTTP ${r.status}: ${r.statusText}`)}return r.json()},updateProfile:async(e,t)=>{const r=Gg(),n=await fetch(`${Ov}/company-profiles/${e}`,{method:"PUT",headers:{...r?{Authorization:`Bearer ${r}`}:{}},body:t});if(!n.ok){const a=await n.json().catch(()=>({}));throw new Error(a.error||`HTTP ${n.status}: ${n.statusText}`)}return n.json()},deleteProfile:async e=>Dt(`/company-profiles/${e}`,{method:"DELETE"})},_f={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.startDate&&t.append("startDate",e.startDate),e!=null&&e.endDate&&t.append("endDate",e.endDate);const r=t.toString();return{jobs:await Dt(`/moving-jobs${r?`?${r}`:""}`)}},getById:async e=>Dt(`/moving-jobs/${e}`),create:async e=>Dt("/moving-jobs",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>Dt(`/moving-jobs/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:async e=>Dt(`/moving-jobs/${e}`,{method:"DELETE"})},zo={getSettings:async()=>Dt("/billing/settings"),updateSettings:async e=>Dt("/billing/settings",{method:"PUT",body:JSON.stringify(e)}),getChargeTypes:async e=>{const t=new URLSearchParams;return e!=null&&e.category&&t.append("category",e.category),(e==null?void 0:e.active)!==void 0&&t.append("active",String(e.active)),Dt(`/billing/charge-types${t.toString()?"?"+t.toString():""}`)},getChargeType:async e=>Dt(`/billing/charge-types/${e}`),createChargeType:async e=>Dt("/billing/charge-types",{method:"POST",body:JSON.stringify(e)}),updateChargeType:async(e,t)=>Dt(`/billing/charge-types/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteChargeType:async e=>Dt(`/billing/charge-types/${e}`,{method:"DELETE"}),getInvoices:async e=>{const t=new URLSearchParams(e).toString();return Dt(`/billing/invoices${t?"?"+t:""}`)},getInvoice:async e=>Dt(`/billing/invoices/${e}`),createInvoice:async e=>Dt("/billing/invoices",{method:"POST",body:JSON.stringify(e)}),recordPayment:async(e,t)=>Dt(`/billing/invoices/${e}/payments`,{method:"POST",body:JSON.stringify(t)})},cne={getAll:async e=>{const t=new URLSearchParams;e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.startDate&&t.append("startDate",e.startDate),e!=null&&e.endDate&&t.append("endDate",e.endDate),e!=null&&e.shipmentId&&t.append("shipmentId",e.shipmentId);const r=t.toString();return Dt(`/withdrawals${r?`?${r}`:""}`)},getById:async e=>Dt(`/withdrawals/${e}`),create:async e=>Dt("/withdrawals",{method:"POST",body:JSON.stringify(e)}),updateStatus:async(e,t)=>Dt(`/withdrawals/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})}),delete:async e=>Dt(`/withdrawals/${e}`,{method:"DELETE"})},Iu={getAll:async e=>{const t=new URLSearchParams(e).toString();return Dt(`/expenses?${t}`,{method:"GET"})},getById:async e=>Dt(`/expenses/${e}`,{method:"GET"}),create:async e=>Dt("/expenses",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>Dt(`/expenses/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:async e=>Dt(`/expenses/${e}`,{method:"DELETE"}),updateStatus:async(e,t)=>Dt(`/expenses/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),getStats:async e=>{const t=new URLSearchParams(e).toString();return Dt(`/expenses/stats/summary?${t}`,{method:"GET"})}},yA={getInfo:()=>Dt("/company",{method:"GET"}),updateInfo:e=>Dt("/company",{method:"PUT",body:JSON.stringify(e)})},dne={getAll:()=>Dt("/users",{method:"GET"}),getById:e=>Dt(`/users/${e}`,{method:"GET"}),create:e=>Dt("/users",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Dt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>Dt(`/users/${e}`,{method:"DELETE"}),toggleStatus:e=>Dt(`/users/${e}/toggle`,{method:"PATCH"})},bA={get:()=>Dt("/invoice-settings",{method:"GET"}),update:e=>Dt("/invoice-settings",{method:"PUT",body:JSON.stringify(e)})},vA={get:()=>Dt("/notification-preferences",{method:"GET"}),update:e=>Dt("/notification-preferences",{method:"PUT",body:JSON.stringify(e)}),sendTest:e=>Dt("/notification-preferences/test",{method:"POST",body:JSON.stringify({type:e})})},Km={getAll:e=>{const t=e?`?section=${e}`:"";return Dt(`/custom-fields${t}`,{method:"GET"})},getById:e=>Dt(`/custom-fields/${e}`,{method:"GET"}),create:e=>Dt("/custom-fields",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Dt(`/custom-fields/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>Dt(`/custom-fields/${e}`,{method:"DELETE"})},pO=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(!1),[a,i]=A.useState(!1),[o,c]=A.useState({jobCode:"",jobTitle:"",clientName:"",clientPhone:"",clientEmail:"",jobDate:"",jobAddress:"",dropoffAddress:"",notes:""});A.useEffect(()=>{d()},[]);const d=async()=>{n(!0);try{const p=await fetch("/api/moving-jobs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(p.ok){const b=await p.json();t(b)}}catch(p){console.error("Failed to fetch jobs:",p)}finally{n(!1)}},u=async p=>{p.preventDefault();try{(await fetch("/api/moving-jobs",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(o)})).ok&&(i(!1),c({jobCode:"",jobTitle:"",clientName:"",clientPhone:"",clientEmail:"",jobDate:"",jobAddress:"",dropoffAddress:"",notes:""}),d())}catch(b){console.error("Failed to create job:",b)}},f=p=>({PLANNED:"#17a2b8",DISPATCHED:"#ffc107",IN_PROGRESS:"#007bff",COMPLETED:"#28a745",CLOSED:"#6c757d",CANCELLED:"#dc3545"})[p]||"#6c757d";return s.jsxs("div",{style:{padding:"20px"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[s.jsx("h2",{children:"Moving Jobs Management"}),s.jsx("button",{onClick:()=>i(!a),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:a?"Cancel":"Create New Job"})]}),a&&s.jsx("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Code *"}),s.jsx("input",{type:"text",required:!0,value:o.jobCode,onChange:p=>c({...o,jobCode:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Title *"}),s.jsx("input",{type:"text",required:!0,value:o.jobTitle,onChange:p=>c({...o,jobTitle:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Client Name *"}),s.jsx("input",{type:"text",required:!0,value:o.clientName,onChange:p=>c({...o,clientName:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Client Phone *"}),s.jsx("input",{type:"tel",required:!0,value:o.clientPhone,onChange:p=>c({...o,clientPhone:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Date *"}),s.jsx("input",{type:"datetime-local",required:!0,value:o.jobDate,onChange:p=>c({...o,jobDate:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Job Address *"}),s.jsx("input",{type:"text",required:!0,value:o.jobAddress,onChange:p=>c({...o,jobAddress:p.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"}})]}),s.jsx("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Create Job"})]})}),s.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[r?s.jsx("p",{children:"Loading..."}):s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job Code"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job Title"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Client"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Date"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Status"})]})}),s.jsx("tbody",{children:e.map(p=>s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:p.jobCode}),s.jsx("td",{style:{padding:"12px"},children:p.jobTitle}),s.jsx("td",{style:{padding:"12px"},children:p.clientName}),s.jsx("td",{style:{padding:"12px"},children:new Date(p.jobDate).toLocaleDateString()}),s.jsx("td",{style:{padding:"12px"},children:s.jsx("span",{style:{backgroundColor:f(p.status),color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:p.status})})]},p.id))})]}),e.length===0&&!r&&s.jsx("p",{style:{textAlign:"center",color:"#6c757d"},children:"No jobs found. Create one to get started!"})]})]})},une=()=>{var O,$,F,U,R,z,M,W,J,K,V,me,se,oe,ye,we,te,G,Q,le,ve,xe,ke,Re,be,Te,Ve,Oe,Ye,Se,ae;const[e,t]=A.useState(null),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,c]=A.useState([]),[d,u]=A.useState([]),[f,p]=A.useState([]),[b,x]=A.useState(!0),[N,j]=A.useState("");A.useEffect(()=>{w()},[]);const w=async()=>{try{x(!0);const Fe=await lne.getStats();t(Fe.stats),n(Fe.topClients||[]),i(Fe.storageBySection||[]),c(Fe.recentShipments||[]),u(Fe.recentJobs||[]),p(Fe.recentActivities||[])}catch(Fe){j(Fe.message),console.error("Dashboard error:",Fe)}finally{x(!1)}};if(b)return s.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})});if(N)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Error loading dashboard: ",N]})});const C=[{name:"Total Revenue",value:`${(($=(O=e==null?void 0:e.invoiceRevenue)==null?void 0:O.total)==null?void 0:$.toFixed(2))||"0.00"} KWD`,subtitle:`${((F=e==null?void 0:e.invoiceRevenue)==null?void 0:F.count)||0} invoices`,icon:Uo,color:"bg-blue-500"},{name:"Paid Amount",value:`${((R=(U=e==null?void 0:e.invoiceRevenue)==null?void 0:U.paid)==null?void 0:R.toFixed(2))||"0.00"} KWD`,subtitle:`${((z=e==null?void 0:e.invoiceRevenue)==null?void 0:z.paidCount)||0} paid invoices`,icon:n0,color:"bg-green-500"},{name:"Outstanding",value:`${((W=(M=e==null?void 0:e.invoiceRevenue)==null?void 0:M.outstanding)==null?void 0:W.toFixed(2))||"0.00"} KWD`,subtitle:"Pending payments",icon:XB,color:"bg-yellow-500"},{name:"This Month",value:`${((K=(J=e==null?void 0:e.thisMonthRevenue)==null?void 0:J.amount)==null?void 0:K.toFixed(2))||"0.00"} KWD`,subtitle:"Current month revenue",icon:s0,color:"bg-purple-500"}],P=[{name:"Active Shipments",value:((V=e==null?void 0:e.shipments)==null?void 0:V.active)||0,total:((me=e==null?void 0:e.shipments)==null?void 0:me.total)||0,icon:Wo,color:"text-blue-600"},{name:"Rack Utilization",value:`${((se=e==null?void 0:e.racks)==null?void 0:se.utilization)||0}%`,total:`${((oe=e==null?void 0:e.racks)==null?void 0:oe.active)||0} active`,icon:nh,color:"text-green-600"},{name:"Jobs In Progress",value:((ye=e==null?void 0:e.jobs)==null?void 0:ye.inProgress)||0,total:`${((we=e==null?void 0:e.jobs)==null?void 0:we.scheduled)||0} scheduled`,icon:_c,color:"text-yellow-600"},{name:"Withdrawals (Month)",value:((te=e==null?void 0:e.withdrawals)==null?void 0:te.thisMonth)||0,total:`${((G=e==null?void 0:e.withdrawals)==null?void 0:G.total)||0} total`,icon:r0,color:"text-purple-600"}],k=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ef4444","#06b6d4"],_=a.map((Fe,ot)=>({name:Fe.section||"Unknown",value:Fe.capacityUsed||0,total:Fe.capacityTotal||0,utilization:Fe.utilization||0,fill:k[ot%k.length]}));return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening today."})]}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map(Fe=>{const ot=Fe.icon;return s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:Fe.name}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:Fe.value}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:Fe.subtitle})]}),s.jsx("div",{className:`${Fe.color} p-3 rounded-lg`,children:s.jsx(ot,{className:"h-6 w-6 text-white"})})]})},Fe.name)})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:P.map(Fe=>{const ot=Fe.icon;return s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ot,{className:`h-8 w-8 ${Fe.color}`}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:Fe.name}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:Fe.value}),s.jsx("p",{className:"text-xs text-gray-500",children:Fe.total})]})]})},Fe.name)})}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Wo,{className:"h-6 w-6 mr-2 text-blue-600"})," Shipment Status Breakdown"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-gray-400",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Shipments"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:((Q=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Q.total)||0})]}),s.jsx("div",{className:"text-4xl",children:""})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-yellow-500",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:((le=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:le.pending)||0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((ve=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:ve.total)>0?Math.round(((xe=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:xe.pending)/((ke=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:ke.total)*100):0,"% of total"]})]}),s.jsx("div",{className:"text-4xl",children:""})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-green-500",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"In Storage"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:((Re=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Re.inStorage)||0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((be=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:be.total)>0?Math.round(((Te=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Te.inStorage)/((Ve=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Ve.total)*100):0,"% of total"]})]}),s.jsx("div",{className:"text-4xl",children:""})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Released"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:((Oe=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Oe.released)||0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((Ye=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Ye.total)>0?Math.round(((Se=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:Se.released)/((ae=e==null?void 0:e.shipmentStatusBreakdown)==null?void 0:ae.total)*100):0,"% of total"]})]}),s.jsx("div",{className:"text-4xl",children:""})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Storage Utilization by Section"}),_.length>0?s.jsx(tv,{width:"100%",height:250,children:s.jsxs(mO,{children:[s.jsx(c3,{data:_,cx:"50%",cy:"50%",labelLine:!1,label:({name:Fe,utilization:ot})=>`${Fe} (${ot}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:_.map((Fe,ot)=>s.jsx(Mh,{fill:Fe.fill},`cell-${ot}`))}),s.jsx(Cv,{formatter:(Fe,ot,at)=>[`${Fe} / ${at.payload.total} (${at.payload.utilization}%)`,"Capacity Used"]}),s.jsx(ch,{})]})}):s.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:s.jsx("p",{className:"text-gray-400",children:"No storage data available"})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Clients"}),s.jsx("div",{className:"space-y-3",children:r.length>0?r.map((Fe,ot)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:ot+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:Fe.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[Fe.shipments||0," shipments"]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-semibold text-gray-900",children:[(Fe.revenue||0).toFixed(2)," KWD"]})})]},ot)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No client data available"})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),s.jsxs("button",{onClick:w,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center space-x-1",children:[s.jsx(r0,{className:"h-4 w-4"}),s.jsx("span",{children:"Refresh"})]})]}),s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.length>0?f.map((Fe,ot)=>{var at,qe;return s.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[s.jsx("span",{className:"font-medium",children:((at=Fe.user)==null?void 0:at.name)||"System"})," ",s.jsxs("span",{className:"text-gray-600",children:[Fe.activityType==="ITEM_ADDED"&&"added item to",Fe.activityType==="ITEM_REMOVED"&&"removed item from",Fe.activityType==="STATUS_CHANGE"&&"changed status of",Fe.activityType==="CAPACITY_UPDATE"&&"updated capacity of"," "]}),s.jsx("span",{className:"font-medium",children:(qe=Fe.rack)==null?void 0:qe.code})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Fe.description}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(Fe.timestamp).toLocaleString()})]})]},ot)}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activities"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Shipments"}),s.jsx("div",{className:"space-y-3",children:o.length>0?o.map(Fe=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Fe.referenceId}),s.jsxs("div",{className:"text-sm text-gray-500",children:[Fe.clientName,"  ",Fe.currentBoxCount," boxes"]})]}),s.jsx("div",{className:"text-right",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Fe.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Fe.status})})]},Fe.id)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent shipments"})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upcoming Jobs"}),s.jsx("div",{className:"space-y-3",children:d.length>0?d.map(Fe=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Fe.title}),s.jsxs("div",{className:"text-sm text-gray-500",children:[Fe.clientName,"  ",Fe.jobType]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-500",children:new Date(Fe.scheduledDate).toLocaleDateString()}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Fe.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:Fe.status.replace("_"," ")})]})]},Fe.id)):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(_c,{className:"h-6 w-6 mr-2 text-orange-600"})," Moving Jobs Management"]}),s.jsx(pO,{})]})]})};var hne=Object.defineProperty,Kg=Object.getOwnPropertySymbols,gO=Object.prototype.hasOwnProperty,xO=Object.prototype.propertyIsEnumerable,wA=(e,t,r)=>t in e?hne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rv=(e,t)=>{for(var r in t||(t={}))gO.call(t,r)&&wA(e,r,t[r]);if(Kg)for(var r of Kg(t))xO.call(t,r)&&wA(e,r,t[r]);return e},Dv=(e,t)=>{var r={};for(var n in e)gO.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Kg)for(var n of Kg(e))t.indexOf(n)<0&&xO.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Vd;(e=>{const t=class gr{constructor(d,u,f,p){if(this.version=d,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],d<gr.MIN_VERSION||d>gr.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=d*4+17;let b=[];for(let N=0;N<this.size;N++)b.push(!1);for(let N=0;N<this.size;N++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(f);if(this.drawCodewords(x),p==-1){let N=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const w=this.getPenaltyScore();w<N&&(p=j,N=w),this.applyMask(j)}}a(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(d,u){const f=e.QrSegment.makeSegments(d);return gr.encodeSegments(f,u)}static encodeBinary(d,u){const f=e.QrSegment.makeBytes(d);return gr.encodeSegments([f],u)}static encodeSegments(d,u,f=1,p=40,b=-1,x=!0){if(!(gr.MIN_VERSION<=f&&f<=p&&p<=gr.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let N,j;for(N=f;;N++){const k=gr.getNumDataCodewords(N,u)*8,_=o.getTotalBits(d,N);if(_<=k){j=_;break}if(N>=p)throw new RangeError("Data too long")}for(const k of[gr.Ecc.MEDIUM,gr.Ecc.QUARTILE,gr.Ecc.HIGH])x&&j<=gr.getNumDataCodewords(N,k)*8&&(u=k);let w=[];for(const k of d){r(k.mode.modeBits,4,w),r(k.numChars,k.mode.numCharCountBits(N),w);for(const _ of k.getData())w.push(_)}a(w.length==j);const C=gr.getNumDataCodewords(N,u)*8;a(w.length<=C),r(0,Math.min(4,C-w.length),w),r(0,(8-w.length%8)%8,w),a(w.length%8==0);for(let k=236;w.length<C;k^=253)r(k,8,w);let P=[];for(;P.length*8<w.length;)P.push(0);return w.forEach((k,_)=>P[_>>>3]|=k<<7-(_&7)),new gr(N,u,P,b)}getModule(d,u){return 0<=d&&d<this.size&&0<=u&&u<this.size&&this.modules[u][d]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const d=this.getAlignmentPatternPositions(),u=d.length;for(let f=0;f<u;f++)for(let p=0;p<u;p++)f==0&&p==0||f==0&&p==u-1||f==u-1&&p==0||this.drawAlignmentPattern(d[f],d[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(d){const u=this.errorCorrectionLevel.formatBits<<3|d;let f=u;for(let b=0;b<10;b++)f=f<<1^(f>>>9)*1335;const p=(u<<10|f)^21522;a(p>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,n(p,b));this.setFunctionModule(8,7,n(p,6)),this.setFunctionModule(8,8,n(p,7)),this.setFunctionModule(7,8,n(p,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,n(p,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,n(p,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,n(p,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let d=this.version;for(let f=0;f<12;f++)d=d<<1^(d>>>11)*7973;const u=this.version<<12|d;a(u>>>18==0);for(let f=0;f<18;f++){const p=n(u,f),b=this.size-11+f%3,x=Math.floor(f/3);this.setFunctionModule(b,x,p),this.setFunctionModule(x,b,p)}}drawFinderPattern(d,u){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const b=Math.max(Math.abs(p),Math.abs(f)),x=d+p,N=u+f;0<=x&&x<this.size&&0<=N&&N<this.size&&this.setFunctionModule(x,N,b!=2&&b!=4)}}drawAlignmentPattern(d,u){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(d+p,u+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(d,u,f){this.modules[u][d]=f,this.isFunction[u][d]=!0}addEccAndInterleave(d){const u=this.version,f=this.errorCorrectionLevel;if(d.length!=gr.getNumDataCodewords(u,f))throw new RangeError("Invalid argument");const p=gr.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][u],b=gr.ECC_CODEWORDS_PER_BLOCK[f.ordinal][u],x=Math.floor(gr.getNumRawDataModules(u)/8),N=p-x%p,j=Math.floor(x/p);let w=[];const C=gr.reedSolomonComputeDivisor(b);for(let k=0,_=0;k<p;k++){let O=d.slice(_,_+j-b+(k<N?0:1));_+=O.length;const $=gr.reedSolomonComputeRemainder(O,C);k<N&&O.push(0),w.push(O.concat($))}let P=[];for(let k=0;k<w[0].length;k++)w.forEach((_,O)=>{(k!=j-b||O>=N)&&P.push(_[k])});return a(P.length==x),P}drawCodewords(d){if(d.length!=Math.floor(gr.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let b=0;b<2;b++){const x=f-b,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][x]&&u<d.length*8&&(this.modules[j][x]=n(d[u>>>3],7-(u&7)),u++)}}a(u==d.length*8)}applyMask(d){if(d<0||d>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let f=0;f<this.size;f++){let p;switch(d){case 0:p=(f+u)%2==0;break;case 1:p=u%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+u)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(u/2))%2==0;break;case 5:p=f*u%2+f*u%3==0;break;case 6:p=(f*u%2+f*u%3)%2==0;break;case 7:p=((f+u)%2+f*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][f]&&p&&(this.modules[u][f]=!this.modules[u][f])}}getPenaltyScore(){let d=0;for(let b=0;b<this.size;b++){let x=!1,N=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[b][w]==x?(N++,N==5?d+=gr.PENALTY_N1:N>5&&d++):(this.finderPenaltyAddHistory(N,j),x||(d+=this.finderPenaltyCountPatterns(j)*gr.PENALTY_N3),x=this.modules[b][w],N=1);d+=this.finderPenaltyTerminateAndCount(x,N,j)*gr.PENALTY_N3}for(let b=0;b<this.size;b++){let x=!1,N=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][b]==x?(N++,N==5?d+=gr.PENALTY_N1:N>5&&d++):(this.finderPenaltyAddHistory(N,j),x||(d+=this.finderPenaltyCountPatterns(j)*gr.PENALTY_N3),x=this.modules[w][b],N=1);d+=this.finderPenaltyTerminateAndCount(x,N,j)*gr.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let x=0;x<this.size-1;x++){const N=this.modules[b][x];N==this.modules[b][x+1]&&N==this.modules[b+1][x]&&N==this.modules[b+1][x+1]&&(d+=gr.PENALTY_N2)}let u=0;for(const b of this.modules)u=b.reduce((x,N)=>x+(N?1:0),u);const f=this.size*this.size,p=Math.ceil(Math.abs(u*20-f*10)/f)-1;return a(0<=p&&p<=9),d+=p*gr.PENALTY_N4,a(0<=d&&d<=2568888),d}getAlignmentPatternPositions(){if(this.version==1)return[];{const d=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(d*2-2))*2;let f=[6];for(let p=this.size-7;f.length<d;p-=u)f.splice(1,0,p);return f}}static getNumRawDataModules(d){if(d<gr.MIN_VERSION||d>gr.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*d+128)*d+64;if(d>=2){const f=Math.floor(d/7)+2;u-=(25*f-10)*f-55,d>=7&&(u-=36)}return a(208<=u&&u<=29648),u}static getNumDataCodewords(d,u){return Math.floor(gr.getNumRawDataModules(d)/8)-gr.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d]*gr.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d]}static reedSolomonComputeDivisor(d){if(d<1||d>255)throw new RangeError("Degree out of range");let u=[];for(let p=0;p<d-1;p++)u.push(0);u.push(1);let f=1;for(let p=0;p<d;p++){for(let b=0;b<u.length;b++)u[b]=gr.reedSolomonMultiply(u[b],f),b+1<u.length&&(u[b]^=u[b+1]);f=gr.reedSolomonMultiply(f,2)}return u}static reedSolomonComputeRemainder(d,u){let f=u.map(p=>0);for(const p of d){const b=p^f.shift();f.push(0),u.forEach((x,N)=>f[N]^=gr.reedSolomonMultiply(x,b))}return f}static reedSolomonMultiply(d,u){if(d>>>8||u>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(u>>>p&1)*d;return a(f>>>8==0),f}finderPenaltyCountPatterns(d){const u=d[1];a(u<=this.size*3);const f=u>0&&d[2]==u&&d[3]==u*3&&d[4]==u&&d[5]==u;return(f&&d[0]>=u*4&&d[6]>=u?1:0)+(f&&d[6]>=u*4&&d[0]>=u?1:0)}finderPenaltyTerminateAndCount(d,u,f){return d&&(this.finderPenaltyAddHistory(u,f),u=0),u+=this.size,this.finderPenaltyAddHistory(u,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(d,u){u[0]==0&&(d+=this.size),u.pop(),u.unshift(d)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(c,d,u){if(d<0||d>31||c>>>d)throw new RangeError("Value out of range");for(let f=d-1;f>=0;f--)u.push(c>>>f&1)}function n(c,d){return(c>>>d&1)!=0}function a(c){if(!c)throw new Error("Assertion error")}const i=class On{constructor(d,u,f){if(this.mode=d,this.numChars=u,this.bitData=f,u<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(d){let u=[];for(const f of d)r(f,8,u);return new On(On.Mode.BYTE,d.length,u)}static makeNumeric(d){if(!On.isNumeric(d))throw new RangeError("String contains non-numeric characters");let u=[];for(let f=0;f<d.length;){const p=Math.min(d.length-f,3);r(parseInt(d.substring(f,f+p),10),p*3+1,u),f+=p}return new On(On.Mode.NUMERIC,d.length,u)}static makeAlphanumeric(d){if(!On.isAlphanumeric(d))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],f;for(f=0;f+2<=d.length;f+=2){let p=On.ALPHANUMERIC_CHARSET.indexOf(d.charAt(f))*45;p+=On.ALPHANUMERIC_CHARSET.indexOf(d.charAt(f+1)),r(p,11,u)}return f<d.length&&r(On.ALPHANUMERIC_CHARSET.indexOf(d.charAt(f)),6,u),new On(On.Mode.ALPHANUMERIC,d.length,u)}static makeSegments(d){return d==""?[]:On.isNumeric(d)?[On.makeNumeric(d)]:On.isAlphanumeric(d)?[On.makeAlphanumeric(d)]:[On.makeBytes(On.toUtf8ByteArray(d))]}static makeEci(d){let u=[];if(d<0)throw new RangeError("ECI assignment value out of range");if(d<128)r(d,8,u);else if(d<16384)r(2,2,u),r(d,14,u);else if(d<1e6)r(6,3,u),r(d,21,u);else throw new RangeError("ECI assignment value out of range");return new On(On.Mode.ECI,0,u)}static isNumeric(d){return On.NUMERIC_REGEX.test(d)}static isAlphanumeric(d){return On.ALPHANUMERIC_REGEX.test(d)}getData(){return this.bitData.slice()}static getTotalBits(d,u){let f=0;for(const p of d){const b=p.mode.numCharCountBits(u);if(p.numChars>=1<<b)return 1/0;f+=4+b+p.bitData.length}return f}static toUtf8ByteArray(d){d=encodeURI(d);let u=[];for(let f=0;f<d.length;f++)d.charAt(f)!="%"?u.push(d.charCodeAt(f)):(u.push(parseInt(d.substring(f+1,f+3),16)),f+=2);return u}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(Vd||(Vd={}));(e=>{(t=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Vd||(Vd={}));(e=>{(t=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Vd||(Vd={}));var _u=Vd;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var fne={L:_u.QrCode.Ecc.LOW,M:_u.QrCode.Ecc.MEDIUM,Q:_u.QrCode.Ecc.QUARTILE,H:_u.QrCode.Ecc.HIGH},yO=128,bO="L",vO="#FFFFFF",wO="#000000",NO=!1,jO=1,mne=4,pne=0,gne=.1;function CO(e,t=0){const r=[];return e.forEach(function(n,a){let i=null;n.forEach(function(o,c){if(!o&&i!==null){r.push(`M${i+t} ${a+t}h${c-i}v1H${i+t}z`),i=null;return}if(c===n.length-1){if(!o)return;i===null?r.push(`M${c+t},${a+t} h1v1H${c+t}z`):r.push(`M${i+t},${a+t} h${c+1-i}v1H${i+t}z`);return}o&&i===null&&(i=c)})}),r.join("")}function AO(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function xne(e,t,r,n){if(n==null)return null;const a=e.length+r*2,i=Math.floor(t*gne),o=a/t,c=(n.width||i)*o,d=(n.height||i)*o,u=n.x==null?e.length/2-c/2:n.x*o,f=n.y==null?e.length/2-d/2:n.y*o,p=n.opacity==null?1:n.opacity;let b=null;if(n.excavate){let N=Math.floor(u),j=Math.floor(f),w=Math.ceil(c+u-N),C=Math.ceil(d+f-j);b={x:N,y:j,w,h:C}}const x=n.crossOrigin;return{x:u,y:f,h:d,w:c,excavation:b,opacity:p,crossOrigin:x}}function yne(e,t){return t!=null?Math.max(Math.floor(t),0):e?mne:pne}function SO({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:o,boostLevel:c}){let d=$n.useMemo(()=>{const N=(Array.isArray(e)?e:[e]).reduce((j,w)=>(j.push(..._u.QrSegment.makeSegments(w)),j),[]);return _u.QrCode.encodeSegments(N,fne[t],r,void 0,void 0,c)},[e,t,r,c]);const{cells:u,margin:f,numCells:p,calculatedImageSettings:b}=$n.useMemo(()=>{let x=d.getModules();const N=yne(n,a),j=x.length+N*2,w=xne(x,o,N,i);return{cells:x,margin:N,numCells:j,calculatedImageSettings:w}},[d,o,i,n,a]);return{qrcode:d,margin:f,cells:u,numCells:p,calculatedImageSettings:b}}var bne=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),vne=$n.forwardRef(function(t,r){const n=t,{value:a,size:i=yO,level:o=bO,bgColor:c=vO,fgColor:d=wO,includeMargin:u=NO,minVersion:f=jO,boostLevel:p,marginSize:b,imageSettings:x}=n,j=Dv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=j,C=Dv(j,["style"]),P=x==null?void 0:x.src,k=$n.useRef(null),_=$n.useRef(null),O=$n.useCallback(K=>{k.current=K,typeof r=="function"?r(K):r&&(r.current=K)},[r]),[$,F]=$n.useState(!1),{margin:U,cells:R,numCells:z,calculatedImageSettings:M}=SO({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:b,imageSettings:x,size:i});$n.useEffect(()=>{if(k.current!=null){const K=k.current,V=K.getContext("2d");if(!V)return;let me=R;const se=_.current,oe=M!=null&&se!==null&&se.complete&&se.naturalHeight!==0&&se.naturalWidth!==0;oe&&M.excavation!=null&&(me=AO(R,M.excavation));const ye=window.devicePixelRatio||1;K.height=K.width=i*ye;const we=i/z*ye;V.scale(we,we),V.fillStyle=c,V.fillRect(0,0,z,z),V.fillStyle=d,bne?V.fill(new Path2D(CO(me,U))):R.forEach(function(te,G){te.forEach(function(Q,le){Q&&V.fillRect(le+U,G+U,1,1)})}),M&&(V.globalAlpha=M.opacity),oe&&V.drawImage(se,M.x+U,M.y+U,M.w,M.h)}}),$n.useEffect(()=>{F(!1)},[P]);const W=Rv({height:i,width:i},w);let J=null;return P!=null&&(J=$n.createElement("img",{src:P,key:P,style:{display:"none"},onLoad:()=>{F(!0)},ref:_,crossOrigin:M==null?void 0:M.crossOrigin})),$n.createElement($n.Fragment,null,$n.createElement("canvas",Rv({style:W,height:i,width:i,ref:O,role:"img"},C)),J)});vne.displayName="QRCodeCanvas";var y3=$n.forwardRef(function(t,r){const n=t,{value:a,size:i=yO,level:o=bO,bgColor:c=vO,fgColor:d=wO,includeMargin:u=NO,minVersion:f=jO,boostLevel:p,title:b,marginSize:x,imageSettings:N}=n,j=Dv(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:C,numCells:P,calculatedImageSettings:k}=SO({value:a,level:o,minVersion:f,boostLevel:p,includeMargin:u,marginSize:x,imageSettings:N,size:i});let _=C,O=null;N!=null&&k!=null&&(k.excavation!=null&&(_=AO(C,k.excavation)),O=$n.createElement("image",{href:N.src,height:k.h,width:k.w,x:k.x+w,y:k.y+w,preserveAspectRatio:"none",opacity:k.opacity,crossOrigin:k.crossOrigin}));const $=CO(_,w);return $n.createElement("svg",Rv({height:i,width:i,viewBox:`0 0 ${P} ${P}`,ref:r,role:"img"},j),!!b&&$n.createElement("title",null,b),$n.createElement("path",{fill:c,d:`M0,0 h${P}v${P}H0z`,shapeRendering:"crispEdges"}),$n.createElement("path",{fill:d,d:$,shapeRendering:"crispEdges"}),O)});y3.displayName="QRCodeSVG";const wne=({isOpen:e,onClose:t,releaseData:r,companyInfo:n})=>{var R,z;const{shipment:a,invoice:i,releaseDate:o,releasedBy:c,collectorID:d,collectorName:u,releaseType:f,boxesReleased:p,boxNumbers:b}=r,[x,N]=A.useState(null);A.useEffect(()=>{e&&(async()=>{try{const J=await(await fetch("/api/template-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();J.success&&N(J.settings)}catch(W){console.error("Failed to load template settings:",W)}})()},[e]);const j=()=>{window.print()};if(!e)return null;const w=x||{},C=w.releasePrimaryColor||"#1e40af",P=w.releaseNoteHeaderBg||C,k=w.currencySymbol||"KD",_=w.dateFormat||"MMM dd, yyyy";w.timeFormat;const O=(M,W)=>{const J=M instanceof Date?M:new Date(M),K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return W==="MMM dd, yyyy"?`${K[J.getMonth()]} ${J.getDate().toString().padStart(2,"0")}, ${J.getFullYear()}`:W==="yyyyMMdd-HHmmss"?`${J.getFullYear()}${(J.getMonth()+1).toString().padStart(2,"0")}${J.getDate().toString().padStart(2,"0")}-${J.getHours().toString().padStart(2,"0")}${J.getMinutes().toString().padStart(2,"0")}${J.getSeconds().toString().padStart(2,"0")}`:J.toLocaleDateString()},$=o instanceof Date?o:new Date(o),F=a.arrivalDate instanceof Date?a.arrivalDate:new Date(a.arrivalDate),U=Math.ceil(($.getTime()-F.getTime())/(1e3*60*60*24));return s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"no-print sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Release Note Generated"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[s.jsx(Bc,{className:"h-5 w-5"}),"Print Release Note"]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx($i,{className:"h-6 w-6"})})]})]}),s.jsxs("div",{className:"release-note-content p-8 relative",children:[w.showQRCode&&a&&s.jsx("div",{className:`absolute ${(()=>{const M=w.qrCodePosition||"TOP_RIGHT",W={TOP_RIGHT:"top-4 right-4",TOP_LEFT:"top-4 left-4",BOTTOM_RIGHT:"bottom-4 right-4",BOTTOM_LEFT:"bottom-4 left-4"};return W[M]||W.TOP_RIGHT})()} z-10 bg-white p-2 rounded-lg shadow-md print:block`,children:s.jsx(y3,{value:`SHIPMENT-${a.shipmentNumber||a.id}`,size:w.qrCodeSize||100,level:"M",includeMargin:!0})}),s.jsxs("div",{className:"text-center mb-6 pb-4 border-b-2",style:{borderColor:P},children:[w.releaseNoteShowLogo!==!1&&(w.companyLogo||(n==null?void 0:n.logo))&&s.jsx("img",{src:w.companyLogo||(n==null?void 0:n.logo),alt:"Logo",className:"h-16 mx-auto mb-2"}),s.jsx("h1",{className:"text-2xl font-bold",style:{color:C},children:w.companyName||(n==null?void 0:n.name)||"QGO Cargo"}),s.jsx("h2",{className:"text-xl text-gray-600 mt-2",children:w.releaseNoteTitle||"SHIPMENT RELEASE NOTE"}),w.companyAddress&&s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:w.companyAddress}),(w.companyPhone||w.companyEmail)&&s.jsxs("p",{className:"text-sm text-gray-600",children:[w.companyPhone&&s.jsx("span",{children:w.companyPhone}),w.companyPhone&&w.companyEmail&&s.jsx("span",{children:" | "}),w.companyEmail&&s.jsx("span",{children:w.companyEmail})]})]}),s.jsx("div",{className:"bg-gray-50 p-4 rounded mb-6",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Release Note #:"}),s.jsxs("span",{className:"ml-2",children:["RN-",O($,"yyyyMMdd-HHmmss")]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Date & Time:"}),s.jsxs("span",{className:"ml-2",children:[O($,_)," - ",$.toLocaleTimeString()]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Released By:"}),s.jsx("span",{className:"ml-2",children:c})]})]})}),w.releaseShowShipment!==!1&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"SHIPMENT DETAILS"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Shipment ID:"})," ",a.qrCode]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Reference:"})," ",a.referenceId||"N/A"]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Client Name:"})," ",a.clientName]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Client Phone:"})," ",a.clientPhone]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Client Email:"})," ",a.clientEmail||"N/A"]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Storage Type:"})," ",a.type]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Rack Locations:"})," ",a.rackLocations||((R=a.rack)==null?void 0:R.code)||"N/A"]}),s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Status:"})," ",s.jsx("span",{className:"text-green-600 font-semibold",children:"RELEASED"})]})]})]})]}),w.releaseShowStorage!==!1&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"STORAGE INFORMATION"}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Received Date"}),s.jsx("p",{className:"text-gray-800",children:a.receivedDate?O(a.receivedDate,"MMM dd, yyyy"):"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Arrival Date"}),s.jsx("p",{className:"text-gray-800",children:a.arrivalDate?O(a.arrivalDate,"MMM dd, yyyy"):O(F,"MMM dd, yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Release Date"}),s.jsx("p",{className:"text-gray-800",children:O($,"MMM dd, yyyy")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Storage Duration"}),s.jsxs("p",{className:"text-gray-800 text-lg font-bold",style:{color:C},children:[U," days"]})]})]})]}),w.releaseShowItems!==!1&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"ITEMS RELEASED"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Total Boxes"}),s.jsxs("p",{className:"text-gray-800 text-lg",children:[a.originalBoxCount," boxes"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Release Type"}),s.jsx("p",{className:"text-gray-800 text-lg",children:f==="FULL"?"FULL RELEASE":"PARTIAL RELEASE"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600",children:"Boxes Released"}),s.jsxs("p",{className:"text-gray-800 text-lg font-bold text-green-600",children:[p," boxes"]})]})]}),b&&b.length>0&&s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-semibold text-gray-600 mb-1",children:"Box Numbers Released:"}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-2 rounded font-mono",children:b.join(", ")})]})]}),w.releaseShowItems!==!1&&a.boxes&&a.boxes.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:" BOX DISTRIBUTION BY RACK"}),s.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Storage location details for each box before release"}),(()=>{const M={};return a.boxes.forEach(W=>{if(W.rackId&&W.rack){const J=W.rack.code;M[J]||(M[J]=[]),M[J].push(W)}else M.Unassigned||(M.Unassigned=[]),M.Unassigned.push(W)}),s.jsx("div",{className:"space-y-3",children:Object.entries(M).map(([W,J])=>{var me;const K=W==="Unassigned",V=(me=J[0])==null?void 0:me.rack;return s.jsxs("div",{className:`border-2 rounded-lg p-3 ${K?"border-yellow-300 bg-yellow-50":"border-green-300 bg-green-50"}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-base font-bold text-gray-800",children:K?" Unassigned":` Rack ${W}`}),s.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${K?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:[J.length," box",J.length!==1?"es":""]})]}),!K&&(V==null?void 0:V.location)&&s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" ",V.location]})]})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:J.map(se=>s.jsxs("div",{className:`px-2 py-1 rounded text-xs font-bold font-mono ${se.status==="IN_STORAGE"||se.status==="RELEASED"?"bg-white border-2 border-gray-400 text-gray-800":"bg-yellow-200 text-yellow-900"}`,title:`Box #${se.boxNumber} - ${se.status}`,children:["#",se.boxNumber]},se.id))})]},W)})})})(),s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-xs",children:[s.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[s.jsx("p",{className:"text-gray-600",children:"Total Racks Used"}),s.jsx("p",{className:"text-lg font-bold text-gray-800",children:Object.keys(a.boxes.reduce((M,W)=>(W.rackId&&(M[W.rackId]=!0),M),{})).length})]}),s.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[s.jsx("p",{className:"text-gray-600",children:"Assigned Boxes"}),s.jsx("p",{className:"text-lg font-bold text-green-600",children:a.boxes.filter(M=>M.rackId).length})]}),s.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[s.jsx("p",{className:"text-gray-600",children:"Unassigned Boxes"}),s.jsx("p",{className:"text-lg font-bold text-yellow-600",children:a.boxes.filter(M=>!M.rackId).length})]})]})]}),w.releaseShowCollector!==!1&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"COLLECTOR INFORMATION"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 text-sm mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600 mb-1",children:"Collector Name:"}),s.jsx("p",{className:"border-b-2 border-gray-400 pb-1 min-h-[28px]",children:u||"_________________________"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-600 mb-1",children:"ID Number:"}),s.jsx("p",{className:"text-gray-800 font-mono font-semibold",children:d})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Collector Signature:"}),s.jsx("div",{className:"border-b-2 border-gray-800 h-20"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Date:"}),s.jsx("p",{className:"border-b border-gray-400 pb-1",children:O($,"MMM dd, yyyy")})]})]})]}),w.releaseShowCharges!==!1&&i&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"CHARGES & PAYMENT"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[(z=i.lineItems)==null?void 0:z.map((M,W)=>s.jsxs("tr",{children:[s.jsx("td",{className:"py-1.5 text-gray-700",children:M.description}),s.jsxs("td",{className:"text-right font-mono",children:[M.amount.toFixed(3)," ",k]})]},W)),s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"py-1.5 font-semibold",children:"Subtotal"}),s.jsxs("td",{className:"text-right font-semibold font-mono",children:[i.subtotal.toFixed(3)," ",k]})]}),s.jsxs("tr",{children:[s.jsxs("td",{className:"py-1.5",children:["Tax (",(i.taxAmount/i.subtotal*100).toFixed(1),"%)"]}),s.jsxs("td",{className:"text-right font-mono",children:[i.taxAmount.toFixed(3)," ",k]})]}),s.jsxs("tr",{className:"border-t-2 border-gray-800",children:[s.jsx("td",{className:"py-2 text-lg font-bold",children:"TOTAL AMOUNT"}),s.jsxs("td",{className:"text-right text-lg font-bold font-mono",children:[i.totalAmount.toFixed(3)," ",k]})]})]})}),s.jsxs("div",{className:"mt-4 bg-gray-50 p-3 rounded text-sm",children:[s.jsxs("p",{className:"mb-1",children:[s.jsx("span",{className:"font-semibold",children:"Invoice Number:"})," ",s.jsx("span",{className:"font-mono",children:i.invoiceNumber})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-semibold",children:"Payment Status:"}),s.jsx("span",{className:`ml-2 px-2 py-0.5 rounded text-xs font-semibold ${i.paymentStatus==="PAID"?"bg-green-100 text-green-800":i.paymentStatus==="PENDING"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:i.paymentStatus})]})]})]}),w.releaseShowTerms!==!1&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"TERMS & CONDITIONS"}),w.releaseTerms?s.jsx("div",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:w.releaseTerms}):s.jsxs("ul",{className:"text-xs space-y-1 text-gray-700 ml-4",children:[s.jsx("li",{children:" All items have been inspected and released in good condition"}),s.jsx("li",{children:" The company shall not be held liable for any items after the release date and time"}),s.jsx("li",{children:" Payment must be completed within the specified due date on the invoice"}),s.jsx("li",{children:" This document serves as official proof of shipment release and receipt"}),s.jsx("li",{children:" Any disputes must be raised within 24 hours of release"})]})]}),w.releaseShowSignatures!==!1&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-3 pb-2 border-b",style:{color:C},children:"AUTHORIZATION SIGNATURES"}),s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-semibold mb-6 text-gray-700",children:"Released By (Company Staff)"}),s.jsx("div",{className:"border-b-2 border-gray-800 mb-2 h-16"}),s.jsx("p",{className:"text-sm font-semibold",children:c}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Date: ",O($,"MMM dd, yyyy")]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-semibold mb-6 text-gray-700",children:"Received By (Collector)"}),s.jsx("div",{className:"border-b-2 border-gray-800 mb-2 h-16"}),s.jsx("p",{className:"text-sm",children:u||"_________________________"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Date: _________________"})]})]})]}),s.jsxs("div",{className:"text-center mt-8 pt-6 border-t-2",style:{borderColor:P},children:[s.jsx("p",{className:"text-lg font-semibold mb-2",style:{color:C},children:w.releaseFooterText||"Thank you for your business!"}),s.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[s.jsx("p",{children:w.companyAddress||(n==null?void 0:n.address)||"Kuwait"}),s.jsxs("p",{children:[w.companyPhone&&s.jsxs(s.Fragment,{children:["Phone: ",w.companyPhone]}),w.companyPhone&&w.companyEmail&&s.jsx(s.Fragment,{children:" | "}),w.companyEmail&&s.jsxs(s.Fragment,{children:["Email: ",w.companyEmail]})]}),w.companyWebsite&&s.jsxs("p",{children:["Website: ",w.companyWebsite]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Generated on ",new Date().toLocaleString()]})]})]}),s.jsxs("div",{className:"no-print sticky bottom-0 bg-gray-50 border-t px-6 py-4 flex gap-3 justify-center",children:[s.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold",children:[s.jsx(Bc,{className:"h-5 w-5"}),"Print Release Note"]}),s.jsx("button",{onClick:t,className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 font-semibold",children:"Close"})]})]}),s.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .release-note-content,
          .release-note-content * {
            visibility: visible;
          }
          .release-note-content {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            padding: 20px;
          }
          .no-print {
            display: none !important;
          }
          @page {
            margin: 1cm;
            size: A4;
          }
        }
      `})]})},Nne=({isOpen:e,onClose:t,shipment:r,withdrawalData:n,onSuccess:a})=>{var U;const[i,o]=A.useState("invoice"),[c,d]=A.useState(null),[u,f]=A.useState(!1),[p,b]=A.useState(""),[x,N]=A.useState(!1),[j,w]=A.useState({paymentMethod:"CASH",amount:0,transactionRef:"",receiptNumber:"",notes:""}),[C,P]=A.useState("full");A.useEffect(()=>{e&&r&&!c&&k()},[e,r]);const k=async()=>{try{N(!0),b("");const R=new Date(r.arrivalDate||r.receivedDate),M=Math.max(1,Math.ceil((new Date().getTime()-R.getTime())/(1e3*60*60*24))),W=await zo.getSettings(),J=parseFloat(W.storageRatePerBox)||.5,K=r.originalBoxCount||r.currentBoxCount||n.withdrawnBoxCount,V=M*K,me=V*J,se=parseFloat(W.taxRate)||5,oe=me*se/100,ye=[{description:`Storage Charges - ${M} days  ${K} boxes @ ${J.toFixed(3)} KWD/day/box`,category:"STORAGE",quantity:V,unitPrice:J,amount:me,taxRate:se,taxAmount:oe}],we=await zo.createInvoice({shipmentId:r.id,clientName:r.clientName,clientPhone:r.clientPhone,clientAddress:r.clientAddress||"",lineItems:ye,notes:`Auto-generated for release - ${n.withdrawnBoxCount} boxes withdrawn`,isWarehouseInvoice:!1});d(we),w(te=>({...te,amount:we.totalAmount,receiptNumber:`PMT-${Date.now()}`}))}catch(R){console.error("Invoice creation error:",R),b(R.message||"Failed to create invoice")}finally{N(!1)}},_=()=>{if(!c)return;const R=window.open(`/invoices/${c.id}/print`,"_blank");R&&R.focus()},O=async()=>{try{if(f(!0),b(""),C==="debt"){const R=await F();alert(" Withdrawal approved on DEBT. Customer must pay invoice later."),$(R)}else{if(C==="full"&&j.amount!==c.totalAmount){b("Full payment amount must match invoice total");return}if(C==="partial"&&j.amount>=c.totalAmount){b("Partial payment must be less than total amount");return}if(j.amount<=0){b("Payment amount must be greater than 0");return}if(j.paymentMethod==="KNET"&&!j.transactionRef.trim()){b("Transaction reference is required for KNET payments");return}await zo.recordPayment(c.id,{amount:j.amount,paymentMethod:j.paymentMethod,transactionRef:j.transactionRef,receiptNumber:j.receiptNumber,notes:j.notes});const R=await F();alert(C==="full"?" Payment recorded successfully! Invoice PAID. Release completed.":` Partial payment of ${j.amount.toFixed(3)} KWD recorded. Balance: ${(c.totalAmount-j.amount).toFixed(3)} KWD. Release completed.`),$(R)}a(),t()}catch(R){b(R.message||"Failed to process payment and release")}finally{f(!1)}},$=R=>{var W,J;const z={withdrawal:R.withdrawal||R,shipment:r,invoice:c,payment:C!=="debt"?{amount:j.amount,method:j.paymentMethod,transactionRef:j.transactionRef,receiptNumber:j.receiptNumber}:null,releaseDate:new Date,releaseType:((W=R.withdrawal)==null?void 0:W.remainingBoxCount)===0?"FULL":"PARTIAL",boxesReleased:n.withdrawnBoxCount,boxesRemaining:((J=R.withdrawal)==null?void 0:J.remainingBoxCount)||0};sessionStorage.setItem("releaseReceipt",JSON.stringify(z));const M=window.open("/release-receipt.html","_blank","width=800,height=600");M&&M.focus()},F=async()=>await cne.create({shipmentId:r.id,...n});return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" Payment Required Before Release"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Invoice must be paid or marked as debt |   "})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"flex items-center justify-center p-4 bg-gray-50 border-b",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 ${i==="invoice"?"text-primary-600":"text-green-600"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="invoice"?"bg-primary-600 text-white":"bg-green-600 text-white"}`,children:i==="payment"?s.jsx(Gn,{className:"h-5 w-5"}):"1"}),s.jsx("span",{className:"font-semibold",children:"Invoice Created"})]}),s.jsx("div",{className:"w-16 h-0.5 bg-gray-300"}),s.jsxs("div",{className:`flex items-center gap-2 ${i==="payment"?"text-primary-600":"text-gray-400"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i==="payment"?"bg-primary-600 text-white":"bg-gray-300 text-white"}`,children:"2"}),s.jsx("span",{className:"font-semibold",children:"Payment & Release"})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[p&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),x?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Creating invoice..."})]}):c&&i==="invoice"?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border-2 border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Invoice #",c.invoiceNumber]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Generated: ",new Date().toLocaleDateString()]})]}),s.jsx(Oa,{className:"h-12 w-12 text-blue-600"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Client"}),s.jsx("p",{className:"font-bold text-gray-900",children:r.clientName}),s.jsx("p",{className:"text-sm text-gray-600",children:r.clientPhone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Shipment"}),s.jsx("p",{className:"font-bold text-gray-900",children:r.referenceId}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Releasing: ",n.withdrawnBoxCount," boxes"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(U=c.lineItems)==null?void 0:U.map((R,z)=>s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900",children:R.description}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Qty: ",R.quantity,"  ",R.unitPrice.toFixed(3)," KWD"]})]}),s.jsxs("p",{className:"font-bold text-gray-900",children:[R.amount.toFixed(3)," KWD"]})]},z)),s.jsxs("div",{className:"border-t pt-3 mt-3 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsxs("span",{className:"text-gray-900",children:[c.subtotal.toFixed(3)," KWD"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tax (5%)"}),s.jsxs("span",{className:"text-gray-900",children:[c.taxAmount.toFixed(3)," KWD"]})]}),s.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-2",children:[s.jsx("span",{className:"text-gray-900",children:"TOTAL"}),s.jsxs("span",{className:"text-primary-600",children:[c.totalAmount.toFixed(3)," KWD"]})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:_,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:[s.jsx(Bc,{className:"h-5 w-5"}),"Print Invoice"]}),s.jsxs("button",{type:"button",onClick:()=>o("payment"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-primary-600 to-purple-600 text-white rounded-lg hover:from-primary-700 hover:to-purple-700 transition-colors font-semibold",children:["Proceed to Payment",s.jsx(Uo,{className:"h-5 w-5"})]})]})]})}):i==="payment"&&c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Option"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>{P("full"),w(R=>({...R,amount:c.totalAmount}))},className:`p-4 border-2 rounded-xl text-center transition-all ${C==="full"?"border-green-600 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("p",{className:"font-bold text-lg mb-1",children:" Full Payment"}),s.jsxs("p",{className:"text-sm",children:[c.totalAmount.toFixed(3)," KWD"]})]}),s.jsxs("button",{type:"button",onClick:()=>{P("partial"),w(R=>({...R,amount:0}))},className:`p-4 border-2 rounded-xl text-center transition-all ${C==="partial"?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("p",{className:"font-bold text-lg mb-1",children:" Partial Payment"}),s.jsx("p",{className:"text-sm",children:"Pay some now"})]}),s.jsxs("button",{type:"button",onClick:()=>P("debt"),className:`p-4 border-2 rounded-xl text-center transition-all ${C==="debt"?"border-orange-600 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("p",{className:"font-bold text-lg mb-1",children:" On Debt"}),s.jsx("p",{className:"text-sm",children:"Pay later"})]})]})]}),C!=="debt"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount (KWD)"}),s.jsx("input",{type:"number",step:"0.001",value:j.amount,onChange:R=>w(z=>({...z,amount:parseFloat(R.target.value)||0})),disabled:C==="full",className:"w-full px-4 py-3 text-xl font-bold border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100",placeholder:"Enter amount"}),C==="partial"&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Remaining: ",(c.totalAmount-j.amount).toFixed(3)," KWD"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),s.jsx("div",{className:"grid grid-cols-4 gap-3",children:["CASH","KNET","BANK_TRANSFER","CHEQUE"].map(R=>s.jsx("button",{type:"button",onClick:()=>w(z=>({...z,paymentMethod:R})),className:`px-4 py-3 border-2 rounded-lg font-semibold transition-all ${j.paymentMethod===R?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:R.replace("_"," ")},R))})]}),j.paymentMethod==="KNET"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Transaction Reference * ",s.jsx("span",{className:"text-red-500",children:"(Required)"})]}),s.jsx("input",{type:"text",value:j.transactionRef,onChange:R=>w(z=>({...z,transactionRef:R.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter KNET transaction reference"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),s.jsx("input",{type:"text",value:j.receiptNumber,onChange:R=>w(z=>({...z,receiptNumber:R.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Receipt number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Notes (Optional)"}),s.jsx("textarea",{value:j.notes,onChange:R=>w(z=>({...z,notes:R.target.value})),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any additional notes..."})]})]}),C==="debt"&&s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-orange-800 font-semibold",children:" Releasing on DEBT"}),s.jsxs("p",{className:"text-sm text-orange-700 mt-2",children:["Customer can collect items without payment. Invoice #",c.invoiceNumber," will remain UNPAID and customer must pay later."]})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>o("invoice"),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:" Back to Invoice"}),s.jsx("button",{type:"button",onClick:O,disabled:u,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:u?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processing..."]}):s.jsx(s.Fragment,{children:C==="debt"?" Approve Debt & Release":" Record Payment & Release"})})]})]}):null]})]})}):null},jne=({isOpen:e,onClose:t,shipment:r,onSuccess:n})=>{var x;const[a,i]=A.useState({withdrawnBoxCount:(r==null?void 0:r.currentBoxCount)||0,withdrawnBy:"",reason:"",notes:"",receiptNumber:`WD-${Date.now()}`}),[o,c]=A.useState(""),[d,u]=A.useState(!1);A.useEffect(()=>{e&&r&&(i({withdrawnBoxCount:r.currentBoxCount||0,withdrawnBy:"",reason:"",notes:"",receiptNumber:`WD-${Date.now()}`}),c(""))},[e,r]);const f=r?r.currentBoxCount-a.withdrawnBoxCount:0,p=a.withdrawnBoxCount===(r==null?void 0:r.currentBoxCount),b=async N=>{if(N.preventDefault(),!a.withdrawnBy.trim()){c("Please enter the name of person collecting items");return}if(a.withdrawnBoxCount<=0){c("Please enter a valid number of boxes");return}if(a.withdrawnBoxCount>(r==null?void 0:r.currentBoxCount)){c(`Cannot withdraw ${a.withdrawnBoxCount} boxes. Only ${r.currentBoxCount} available.`);return}const w=` CONFIRM ${p?"FULL RELEASE":"PARTIAL RELEASE"}

 Boxes: ${a.withdrawnBoxCount} out of ${r.currentBoxCount}
 Collected By: ${a.withdrawnBy}
 Reason: ${a.reason||"N/A"}

 This will trigger payment/invoice process.

Are you sure you want to proceed?`;confirm(w)&&u(!0)};return e?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" Withdraw Items"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Release items from storage |    "})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 bg-blue-50 border-b",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Shipment ID"}),s.jsx("p",{className:"font-bold text-gray-900",children:r==null?void 0:r.referenceId})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Client"}),s.jsx("p",{className:"font-bold text-gray-900",children:r==null?void 0:r.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Available Boxes"}),s.jsx("p",{className:"font-bold text-green-600 text-xl",children:r==null?void 0:r.currentBoxCount})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Rack Location"}),s.jsx("p",{className:"font-bold text-gray-900",children:((x=r==null?void 0:r.rack)==null?void 0:x.code)||"N/A"})]})]})}),s.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[o&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Release Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{type:"button",onClick:()=>{i(N=>({...N,withdrawnBoxCount:r.currentBoxCount}))},className:`p-4 border-2 rounded-xl text-center transition-all ${p?"border-primary-600 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:[s.jsx("p",{className:"font-bold text-lg mb-1",children:"Full Release"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["All ",r==null?void 0:r.currentBoxCount," boxes"]})]}),s.jsxs("button",{type:"button",onClick:()=>{p&&i(N=>({...N,withdrawnBoxCount:Math.floor(r.currentBoxCount/2)}))},className:`p-4 border-2 rounded-xl text-center transition-all ${p?"border-gray-200 hover:border-gray-300":"border-purple-600 bg-purple-50 text-purple-700"}`,children:[s.jsx("p",{className:"font-bold text-lg mb-1",children:"Partial Release"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Some boxes only"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Number of Boxes to Withdraw ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.withdrawnBoxCount||"",onChange:N=>{const j=N.target.value===""?0:parseInt(N.target.value);i({...a,withdrawnBoxCount:j})},onFocus:N=>N.target.select(),min:"1",max:(r==null?void 0:r.currentBoxCount)||0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-lg font-semibold",placeholder:"Enter number of boxes",required:!0}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"boxes"})]}),s.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Remaining after withdrawal:"}),s.jsxs("span",{className:"font-bold text-gray-900",children:[f," boxes"]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Collected By (Person Name) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(rk,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",value:a.withdrawnBy,onChange:N=>i({...a,withdrawnBy:N.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter full name",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),s.jsxs("div",{className:"relative",children:[s.jsx(Oa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",value:a.receiptNumber,onChange:N=>i({...a,receiptNumber:N.target.value}),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"WD-001"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Withdrawal"}),s.jsxs("select",{value:a.reason,onChange:N=>i({...a,reason:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select reason..."}),s.jsx("option",{value:"Customer Collection",children:"Customer Collection"}),s.jsx("option",{value:"Delivery",children:"Delivery"}),s.jsx("option",{value:"Transfer",children:"Transfer to Another Location"}),s.jsx("option",{value:"Return to Owner",children:"Return to Owner"}),s.jsx("option",{value:"Disposal",children:"Disposal"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),s.jsx("textarea",{value:a.notes,onChange:N=>i({...a,notes:N.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any additional details..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos (Optional)"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-400 transition-colors cursor-pointer",children:[s.jsx(ng,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Click to upload photos"}),s.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Photo upload feature coming soon"})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-200",children:[s.jsx("h4",{className:"font-bold text-gray-900 mb-4 text-lg",children:"Withdrawal Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Total boxes in storage:"}),s.jsx("span",{className:"font-semibold",children:r==null?void 0:r.currentBoxCount})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Boxes to withdraw:"}),s.jsx("span",{className:"font-bold text-red-600 text-lg",children:a.withdrawnBoxCount})]}),s.jsxs("div",{className:"flex justify-between pt-3 border-t border-purple-200",children:[s.jsx("span",{className:"text-gray-900 font-semibold",children:"Remaining boxes:"}),s.jsx("span",{className:"font-bold text-green-600 text-xl",children:f})]}),p&&s.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:" This will fully release the shipment and mark it as RELEASED"})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg hover:from-purple-700 hover:to-blue-700 font-bold transition-all shadow-lg",children:" Continue to Payment"})]})]})]}),s.jsx(Nne,{isOpen:d,onClose:()=>u(!1),shipment:r,withdrawalData:a,onSuccess:()=>{u(!1),n(),t()}})]}):null},EO=(e,t=!1)=>{if(e===""||e.trim()==="")return"";const r=t?parseFloat(e):parseInt(e);return isNaN(r)?"":r},cn=(e,t=0)=>{if(e===""||e===void 0||e===null)return t;const r=typeof e=="string"?parseFloat(e):e;return isNaN(r)?t:r};function Cne({isOpen:e,onClose:t,onSuccess:r}){const[n,a]=A.useState(!1),[i,o]=A.useState(""),[c,d]=A.useState(""),[u,f]=A.useState({barcode:"",companyProfileId:"",clientName:"",clientPhone:"",clientEmail:"",clientAddress:"",arrivalDate:new Date().toISOString().split("T")[0],pieces:1,palletCount:1,boxesPerPallet:1,weight:0,dimensions:"",length:0,width:0,height:0,cbm:0,description:"",value:0,isWarehouseShipment:!1,shipper:"",consignee:"",shipperAddress:"",consigneeAddress:"",shipperPhone:"",consigneePhone:"",rackId:"",storageType:"STANDARD",specialInstructions:"",estimatedDays:30,notes:""}),[p,b]=A.useState([]),[x,N]=A.useState({}),[j,w]=A.useState([]),[C,P]=A.useState([]),[k,_]=A.useState({storageRate:.5,minimumCharge:5,currency:"KWD",taxRate:0}),[O,$]=A.useState(!1),[F,U]=A.useState(""),[R,z]=A.useState("pallet"),[M,W]=A.useState({}),[J,K]=A.useState({}),[V,me]=A.useState(!1),[se,oe]=A.useState([1]),[ye,we]=A.useState(0),[te,G]=A.useState({requireClientEmail:!1,requireClientPhone:!0,requireEstimatedValue:!1,requireRackAssignment:!1,autoGenerateQR:!0,qrCodePrefix:"SHP",defaultStorageType:"PERSONAL",formSectionOrder:null}),[Q,le]=A.useState(["basic","client","warehouse","storage","custom","pricing"]),ve=Ce=>{if(!Ce)return[];if(Array.isArray(Ce))return Ce;if(typeof Ce=="string")try{const Be=JSON.parse(Ce);return Array.isArray(Be)?Be:Ce.split(",").map(et=>et.trim())}catch{return Ce.split(",").map(Be=>Be.trim())}return[]};A.useEffect(()=>{e&&(xe(),ke(),Ye())},[e]);const xe=async()=>{try{await Promise.all([Re(),be(),Te(),Ve(),Oe()])}catch(Ce){o("Failed to load data: "+Ce.message)}},ke=()=>{const Ce=Date.now(),Be=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),et=`WHM${Ce.toString().slice(-6)}${Be}`;f(Xe=>({...Xe,barcode:et}))},Re=async()=>{try{const Ce=await fetch("/api/custom-fields?section=SHIPMENT",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Ce.ok){const Be=await Ce.json(),et=Be.customFields||Be,Xe=Array.isArray(et)?et.filter(mt=>mt.isActive):[];b(Xe);const Le={};Xe.forEach(mt=>{Le[mt.id]=""}),N(Le)}}catch(Ce){console.error("Failed to load custom fields:",Ce)}},be=async()=>{try{const Be=(await Bi.getAll()).racks.filter(et=>et.status==="ACTIVE"&&et.capacityUsed<et.capacityTotal);w(Be)}catch(Ce){console.error("Failed to load racks:",Ce)}},Te=async()=>{try{const Ce=await vd.listProfiles(),et=(Array.isArray(Ce)?Ce:Ce&&Array.isArray(Ce.profiles)?Ce.profiles:[]).filter(Xe=>(Xe==null?void 0:Xe.isActive)!==!1);P(et)}catch(Ce){console.error("Failed to load company profiles:",Ce),P([])}},Ve=async()=>{try{const Ce=await fetch("/api/billing/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Ce.ok){const Be=await Ce.json();_({storageRate:Be.storageRatePerBox||Be.storageRate||.5,minimumCharge:Be.minimumCharge||5,currency:Be.currency||"KWD",taxRate:Be.taxRate||0})}else console.error("Failed to load pricing settings:",Ce.status)}catch(Ce){console.error("Failed to load pricing:",Ce)}},Oe=async()=>{try{const Ce=await fetch("/api/shipment-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(Ce.ok){const Be=await Ce.json(),et=Be.settings||Be;if(G(et),et.formSectionOrder)try{const Xe=JSON.parse(et.formSectionOrder);le(Xe),console.log("??? Section order loaded:",Xe)}catch{console.log("Using default section order")}console.log("??? Shipment settings loaded:",et)}}catch(Ce){console.error("Failed to load shipment settings:",Ce)}},Ye=()=>{f({barcode:"",companyProfileId:"",clientName:"",clientPhone:"",clientEmail:"",clientAddress:"",arrivalDate:new Date().toISOString().split("T")[0],pieces:1*1,palletCount:1,boxesPerPallet:1,length:0,width:0,height:0,cbm:0,weight:0,dimensions:"",description:"",value:0,isWarehouseShipment:!1,shipper:"",consignee:"",shipperAddress:"",consigneeAddress:"",shipperPhone:"",consigneePhone:"",rackId:"",storageType:"STANDARD",specialInstructions:"",estimatedDays:30,notes:""}),z("pallet"),W({}),K({}),me(!1),oe([1]),we(0);const et={};p.forEach(Xe=>{et[Xe.id]=""}),N(et),o(""),d(""),ke()},Se=Ce=>{const{name:Be,value:et,type:Xe}=Ce.target,yt=Xe==="checkbox"?Ce.target.checked:Xe==="number"?EO(et,!0):et;if(f(ht=>{const Lt={...ht,[Be]:yt};if(Be==="palletCount"||Be==="boxesPerPallet"){const Ct=cn(Lt.palletCount,0),or=cn(Lt.boxesPerPallet,0);if(!V){const wt=Array.from({length:Math.max(Ct,0)},()=>Math.max(or,0));return oe(wt.length?wt:[]),{...Lt,pieces:Ct*or}}return Lt}if(Be==="length"||Be==="width"||Be==="height"){const Ct=cn(Lt.length,0),or=cn(Lt.width,0),wt=cn(Lt.height,0),er=Ct>0&&or>0&&wt>0?Ct*or*wt/1e6:0;return{...Lt,cbm:parseFloat(er.toFixed(4))}}return Lt}),Be==="palletCount"){const ht=cn(yt,0);W(Lt=>{const Ct={...Lt};return Object.keys(Ct).forEach(or=>{Number(or)>ht&&delete Ct[Number(or)]}),Ct}),K(Lt=>{const Ct={...Lt};return Object.keys(Ct).forEach(or=>{Number(or)>ht&&delete Ct[Number(or)]}),Ct}),V&&oe(Lt=>{var wt,er;const Ct=Math.max(ht,0),or=Lt.slice(0,Ct);for(;or.length<Ct;)or.push(cn(((er=(wt=Ce.target.form)==null?void 0:wt.boxesPerPallet)==null?void 0:er.value)??1,1));return or})}};A.useEffect(()=>{if(R==="pallet"&&V){const Ce=se.reduce((Be,et)=>Be+(Number.isFinite(et)?Math.max(0,Math.trunc(et)):0),0);f(Be=>({...Be,pieces:Ce+Math.max(0,Math.trunc(ye))}))}else if(R==="pallet"&&!V){const Ce=cn(u.palletCount,0),Be=cn(u.boxesPerPallet,0);u.pieces!==Ce*Be&&f(et=>({...et,pieces:Ce*Be}))}},[se,ye,V,R,u.palletCount,u.boxesPerPallet]);const ae=()=>{const Ce=Math.floor(Date.now()/1e3);let Be="";if(R==="pallet")if(V){const et=Math.max(cn(u.palletCount,1),1),Xe=se.slice(0,et),Le=Xe.reduce((yt,ht)=>yt+(Number.isFinite(ht)?Math.max(0,Math.trunc(ht)):0),0)+Math.max(0,Math.trunc(ye)),mt=Xe.reduce((yt,ht)=>Math.max(yt,Math.max(0,Math.trunc(ht||0))),0);Be=`QR-SH-${Ce}-P${et}B${mt}T${Le}`}else{const et=cn(u.palletCount,1),Xe=cn(u.boxesPerPallet,1),Le=et*Xe;Be=`QR-SH-${Ce}-P${et}B${Xe}T${Le}`}else{const et=cn(u.pieces,1);Be=`QR-SH-${Ce}-BOX-T${et}`}U(Be),$(!0)},Fe=Ce=>Ce?Ce.startsWith("http")||Ce.startsWith("/")?Ce:`/${Ce}`:"",ot=async(Ce,Be)=>{if(!Be||Be.length===0)return;const et=localStorage.getItem("authToken");if(!et){o("Authentication token missing. Please log in again.");return}K(Xe=>({...Xe,[Ce]:!0}));try{const Xe=[];for(const Le of Array.from(Be)){const mt=new FormData;mt.append("photo",Le);const yt=await fetch("/api/shipments/upload/photo",{method:"POST",headers:{Authorization:`Bearer ${et}`},body:mt});if(!yt.ok){const Lt=await yt.json().catch(()=>({}));throw new Error(Lt.error||"Failed to upload pallet photo")}const ht=await yt.json();ht!=null&&ht.photoUrl&&Xe.push(ht.photoUrl)}Xe.length>0&&W(Le=>{const mt={...Le},yt=mt[Ce]||[];return mt[Ce]=[...yt,...Xe],mt})}catch(Xe){console.error("Pallet photo upload failed:",Xe),o((Xe==null?void 0:Xe.message)||"Failed to upload pallet photos")}finally{K(Xe=>({...Xe,[Ce]:!1}))}},at=(Ce,Be)=>{W(et=>{const Le=(et[Ce]||[]).filter((yt,ht)=>ht!==Be),mt={...et};return Le.length>0?mt[Ce]=Le:delete mt[Ce],mt})},qe=Ce=>{const Be=x[Ce.id]||"";switch(Ce.fieldType){case"TEXT":return s.jsx("input",{type:"text",id:Ce.id,value:Be,onChange:et=>N(Xe=>({...Xe,[Ce.id]:et.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${Ce.fieldName.toLowerCase()}`,required:Ce.isRequired});case"NUMBER":return s.jsx("input",{type:"number",id:Ce.id,value:Be,onChange:et=>N(Xe=>({...Xe,[Ce.id]:et.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`Enter ${Ce.fieldName.toLowerCase()}`,required:Ce.isRequired});case"DATE":return s.jsx("input",{type:"date",id:Ce.id,value:Be,onChange:et=>N(Xe=>({...Xe,[Ce.id]:et.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:Ce.isRequired});case"DROPDOWN":return s.jsxs("select",{id:Ce.id,value:Be,onChange:et=>N(Xe=>({...Xe,[Ce.id]:et.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",required:Ce.isRequired,children:[s.jsxs("option",{value:"",children:["Select ",Ce.fieldName.toLowerCase()]}),ve(Ce.fieldOptions).map((et,Xe)=>s.jsx("option",{value:et,children:et},Xe))]});case"CHECKBOX":return s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:Ce.id,checked:Be==="true",onChange:et=>N(Xe=>({...Xe,[Ce.id]:et.target.checked.toString()})),className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:Ce.id,className:"text-sm font-medium text-gray-700",children:Ce.fieldName})]});default:return null}},pt=()=>{const Ce=Math.max(u.pieces*k.storageRate*u.estimatedDays,k.minimumCharge),Be=Ce*(k.taxRate/100);return{baseCost:Ce,tax:Be,total:Ce+Be}},Ue=async Ce=>{var Be;Ce.preventDefault(),a(!0),o(""),d("");try{if(!u.clientName)throw new Error("Client name is required");if(te.requireClientPhone&&!u.clientPhone)throw new Error("Client phone is required by company settings");if(te.requireClientEmail&&!u.clientEmail)throw new Error("Client email is required by company settings");if(te.requireEstimatedValue&&!u.value)throw new Error("Estimated value is required by company settings");if(te.requireRackAssignment&&!u.rackId)throw new Error("Rack assignment is required by company settings");if(te.requireClientAddress&&!u.clientAddress)throw new Error("Client address is required by company settings");if(te.requireDescription&&!u.description)throw new Error("Description is required by company settings");if(te.requireNotes&&!u.notes)throw new Error("Notes are required by company settings");if(te.requireEstimatedDays&&!u.estimatedDays)throw new Error("Estimated storage days are required by company settings");const et=R==="pallet"?cn(u.palletCount,0):1,Xe=cn(R==="pallet"?u.boxesPerPallet:u.pieces,0),Le=V?se.slice(0,Math.max(et,0)).map(wt=>Math.max(0,Math.trunc(wt||0))):[],mt=V?Math.max(0,Math.trunc(ye||0)):0,yt=V?Le.reduce((wt,er)=>wt+er,0)+mt:et*Xe;if(et<=0)throw new Error("Pallet count must be at least 1");if(!V&&Xe<=0)throw new Error("Boxes per pallet must be at least 1");if(yt<=0)throw new Error("Number of boxes must be greater than 0");if(u.isWarehouseShipment&&(!u.shipper||!u.consignee))throw new Error("Shipper and consignee are required for warehouse shipments");for(const wt of p)if(wt.isRequired&&!x[wt.id])throw new Error(`${wt.fieldName} is required`);const ht=R==="pallet"?Array.from({length:et},(wt,er)=>M[er+1]||[]):[],Lt={referenceId:u.barcode,companyProfileId:u.companyProfileId||void 0,clientName:u.clientName,clientPhone:u.clientPhone,clientEmail:u.clientEmail,clientAddress:u.clientAddress,arrivalDate:u.arrivalDate,palletCount:et,boxesPerPallet:V?Math.max(0,Le.reduce((wt,er)=>Math.max(wt,er),0)):Xe,description:u.description,originalBoxCount:yt,currentBoxCount:yt,estimatedValue:u.value,notes:u.notes,rackId:u.rackId||void 0,palletPhotos:ht.map(wt=>wt.filter(er=>!!er)),...V?{boxesDistribution:Le,extraBoxes:mt}:{},isWarehouseShipment:u.isWarehouseShipment,warehouseData:u.isWarehouseShipment?JSON.stringify({shipper:u.shipper,consignee:u.consignee,shipperAddress:u.shipperAddress,consigneeAddress:u.consigneeAddress,shipperPhone:u.shipperPhone,consigneePhone:u.consigneePhone,weight:u.weight,dimensions:u.dimensions,storageType:u.storageType,specialInstructions:u.specialInstructions,estimatedDays:u.estimatedDays}):null,customFieldValues:JSON.stringify(x)},Ct=await Rc.create(Lt),or=((Be=Ct.shipment)==null?void 0:Be.id)||Ct.id;if(u.rackId&&u.pieces>0){const wt=Array.from({length:u.pieces},(er,Zt)=>Zt+1);await fetch(`/api/shipments/${or}/assign-boxes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rackId:u.rackId,boxNumbers:wt})})}alert(`SUCCESS!

Shipment ${u.barcode} has been created successfully!

Boxes: ${yt}
Pallets: ${et}${V?"":`
Boxes per pallet: ${Xe}`}${V?`
Variable pallets: [${Le.join(", ")}]${mt?` + ${mt} loose`:""}`:""}
Client: ${u.clientName}${u.rackId?`
Assigned to Rack`:""}`),r(),t()}catch(et){o(et.message||"Failed to create shipment")}finally{a(!1)}};if(!e)return null;const jt=pt(),lt={basic:()=>s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-800 flex items-center",children:"Basic Shipment Info"}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border-2 border-blue-300 mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Intake Mode:"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>{z("pallet"),f(Ce=>({...Ce,palletCount:1,boxesPerPallet:1,pieces:1})),W({}),K({}),me(!1),oe([1]),we(0)},className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${R==="pallet"?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pallet Mode"}),s.jsx("button",{type:"button",onClick:()=>{z("box"),f(Ce=>({...Ce,palletCount:0,boxesPerPallet:0,pieces:1})),W({}),K({}),me(!1),oe([]),we(0)},className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${R==="box"?"bg-green-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Box Mode"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Profile"}),s.jsxs("select",{name:"companyProfileId",value:u.companyProfileId,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select company (optional)"}),C.map(Ce=>s.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode ID"}),s.jsx("input",{type:"text",name:"barcode",value:u.barcode,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 font-mono text-lg",readOnly:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Arrival Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"arrivalDate",value:u.arrivalDate,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),R==="pallet"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pallet Count ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"palletCount",value:u.palletCount,onChange:Se,className:"w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50",min:"1",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Boxes per Pallet ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"boxesPerPallet",value:u.boxesPerPallet,onChange:Se,className:"w-full px-4 py-3 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50",min:"1",required:!0,disabled:V})]}),s.jsx("div",{className:"md:col-span-3",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{id:"variablePerPallet",type:"checkbox",checked:V,onChange:Ce=>{const Be=Ce.target.checked;if(me(Be),Be){const et=Math.max(cn(u.palletCount,0),0),Xe=Array.from({length:et},()=>Math.max(cn(u.boxesPerPallet,0),0)||1);oe(Xe)}else{oe([]),we(0);const et=cn(u.palletCount,0),Xe=cn(u.boxesPerPallet,0);f(Le=>({...Le,pieces:et*Xe}))}},className:"w-5 h-5"}),s.jsx("label",{htmlFor:"variablePerPallet",className:"text-sm font-medium text-blue-900",children:"Variable boxes per pallet + extra loose boxes"})]}),V&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Array.from({length:Math.max(cn(u.palletCount,0),0)},(Ce,Be)=>Be).map(Ce=>s.jsxs("div",{className:"bg-white border border-blue-200 rounded-md p-2",children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Pallet #",Ce+1," boxes"]}),s.jsx("input",{type:"number",min:0,value:se[Ce]??0,onChange:Be=>{const et=parseInt(Be.target.value)||0;oe(Xe=>{const Le=Xe.slice();return Le[Ce]=Math.max(0,et),Le})},className:"w-full px-2 py-2 border border-gray-300 rounded"})]},`bpp-${Ce}`))}),s.jsxs("div",{className:"max-w-xs",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Extra loose boxes (not on pallets)"}),s.jsx("input",{type:"number",min:0,value:ye,onChange:Ce=>we(Math.max(0,parseInt(Ce.target.value)||0)),className:"w-full px-2 py-2 border border-gray-300 rounded"})]})]})]})})]}),R==="box"&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Total Boxes ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"pieces",value:u.pieces,onChange:Ce=>{const Be=parseInt(Ce.target.value)||1;f(et=>({...et,pieces:Be}))},className:"w-full px-4 py-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50",min:"1",required:!0})]}),R==="pallet"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Boxes (auto)"}),s.jsx("input",{type:"number",name:"pieces",value:u.pieces,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),R==="pallet"&&(()=>{const Ce=Math.max(cn(u.palletCount,0),0);if(Ce===0)return null;const Be=Array.from({length:Ce},(et,Xe)=>Xe+1);return s.jsx("div",{className:"md:col-span-3",children:s.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:"Pallet Photos (optional)"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[Be.length," pallet",Be.length!==1?"s":""]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Be.map(et=>{const Xe=M[et]||[],Le=J[et];return s.jsxs("div",{className:"border border-blue-100 rounded-lg p-3 bg-blue-50/60",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-semibold text-blue-700 uppercase",children:["Pallet #",et]}),s.jsx("p",{className:"text-[11px] text-gray-500",children:"Add up to 5 photos for reference"})]}),Xe.length>0&&s.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[Xe.length," photo",Xe.length!==1?"s":""]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex flex-col items-center justify-center gap-2 border-2 border-dashed border-blue-300 rounded-md py-6 hover:border-blue-500 hover:bg-blue-100/40 transition-colors cursor-pointer text-center text-xs text-blue-700 font-medium",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:mt=>{ot(et,mt.target.files),mt.target.value=""},disabled:Le||Xe.length>=5}),Le?"Uploading...":Xe.length>=5?"Limit reached":"Upload Photos"]}),Xe.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:Xe.map((mt,yt)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:Fe(mt),alt:`Pallet ${et} photo ${yt+1}`,className:"h-16 w-16 object-cover rounded-md border border-blue-200"}),s.jsx("button",{type:"button",onClick:()=>at(et,yt),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-red-600 text-white text-xs flex items-center justify-center shadow",title:"Remove photo",children:""})]},`${et}-photo-${yt}`))})]})]},`pallet-${et}`)})})]})})})(),s.jsx("div",{className:"md:col-span-3",children:s.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-semibold text-orange-900 mb-3 flex items-center",children:"Shipment Size & Volume"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Length (cm)"}),s.jsx("input",{type:"number",name:"length",value:u.length||"",onChange:Se,className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",placeholder:"0",min:"0",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Width (cm)"}),s.jsx("input",{type:"number",name:"width",value:u.width||"",onChange:Se,className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",placeholder:"0",min:"0",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Height (cm)"}),s.jsx("input",{type:"number",name:"height",value:u.height||"",onChange:Se,className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm",placeholder:"0",min:"0",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Weight (kg)"}),s.jsx("input",{type:"number",name:"weight",value:u.weight||"",onChange:Se,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"0",min:"0",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-orange-900 font-bold mb-2",children:"CBM (m3)"}),s.jsx("div",{className:"w-full px-3 py-2 border-2 border-orange-400 rounded-lg bg-orange-100 text-orange-900 font-bold text-center",children:u.cbm>0?u.cbm.toFixed(4):"0"})]})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"CBM auto-calculates: (Length x Width x Height) / 1,000,000"})]})})]})]}),client:()=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"Client Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientName",value:u.clientName,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",te.requireClientPhone&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"clientPhone",value:u.clientPhone,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+965 1234 5678",required:te.requireClientPhone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",te.requireClientEmail&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"clientEmail",value:u.clientEmail,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),te.showClientAddress!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",te.requireClientAddress&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientAddress",value:u.clientAddress,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street address, city",required:te.requireClientAddress})]})]})]}),warehouse:()=>te.showWarehouseMode===!1?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"isWarehouseShipment",name:"isWarehouseShipment",checked:u.isWarehouseShipment,onChange:Se,className:"w-5 h-5 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("label",{htmlFor:"isWarehouseShipment",className:"text-sm font-semibold text-orange-800",children:"This is a warehouse shipment (import/export with shipper/consignee details)"})]})}),u.isWarehouseShipment&&s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-800 flex items-center",children:"Warehouse Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Shipper Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"shipper",value:u.shipper,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"ABC Trading Company",required:u.isWarehouseShipment})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Consignee Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"consignee",value:u.consignee,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"XYZ Imports LLC",required:u.isWarehouseShipment})]}),te.showWeight!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Weight (kg) ",te.requireWeight&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"weight",value:u.weight,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",required:te.requireWeight})]}),te.showDimensions!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dimensions (L??W??H) ",te.requireDimensions&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"dimensions",value:u.dimensions,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100??50??30 cm",required:te.requireDimensions})]}),te.showDescription!==!1&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",te.requireDescription&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"description",value:u.description,onChange:Se,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the shipment contents...",required:te.requireDescription})]})]})]})]}),storage:()=>s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-800 flex items-center",children:"Storage Assignment"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assign to Rack ",te.requireRackAssignment&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"rackId",value:u.rackId,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:te.requireRackAssignment,children:[s.jsx("option",{value:"",children:te.requireRackAssignment?"Select a rack (required)":"Select a rack (optional)"}),j.map(Ce=>s.jsxs("option",{value:Ce.id,children:[Ce.code," - ",Ce.location," (",Ce.capacityUsed,"/",Ce.capacityTotal,")"]},Ce.id))]})]}),te.showEstimatedDays!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Storage Days ",te.requireEstimatedDays&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"estimatedDays",value:u.estimatedDays,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",required:te.requireEstimatedDays})]}),te.showSpecialInstructions!==!1&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),s.jsx("textarea",{name:"specialInstructions",value:u.specialInstructions,onChange:Se,rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Any special handling or storage requirements..."})]})]})]}),custom:()=>p.length===0?null:s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-800 flex items-center",children:"Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(Ce=>s.jsxs("div",{className:Ce.fieldType==="TEXTAREA"?"md:col-span-2":"",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ce.fieldName," ",Ce.isRequired&&s.jsx("span",{className:"text-red-500",children:"*"})]}),qe(Ce)]},Ce.id))})]}),pricing:()=>s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-yellow-800 flex items-center",children:"Estimated Cost"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Storage Rate per Day:"}),s.jsxs("span",{className:"font-medium",children:[k.storageRate.toFixed(3)," ",k.currency]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Estimated Days:"}),s.jsxs("span",{className:"font-medium",children:[u.estimatedDays," days"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Number of Pieces:"}),s.jsxs("span",{className:"font-medium",children:[u.pieces," pieces"]})]}),s.jsxs("div",{className:"border-t border-yellow-300 pt-3 flex justify-between",children:[s.jsx("span",{className:"font-semibold text-yellow-900",children:"Estimated Total:"}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-2xl font-bold text-yellow-900",children:[jt.total.toFixed(3)," ",k.currency]})})]})]})]})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"New Shipment Intake"}),s.jsx("p",{className:"text-blue-100",children:"WHM Warehouse Management System"})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:""})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-100px)]",children:s.jsxs("form",{onSubmit:Ue,className:"p-6 space-y-6",children:[i&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-r-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:"!"}),i]})}),c&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 p-4 rounded-r-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),c]})}),O&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8 max-w-sm w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Shipment QR Code"}),s.jsx("button",{type:"button",onClick:()=>$(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg flex flex-col items-center mb-4",children:[s.jsxs("div",{className:"mb-4 text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Master QR Code"}),s.jsx("p",{className:"font-mono bg-white p-4 rounded border border-gray-300 text-sm break-all",children:F})]}),s.jsx("div",{className:"w-full border-t pt-4 mt-4",children:R==="pallet"?s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Pallet Details:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[s.jsx("p",{className:"text-gray-600",children:"Pallets"}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:u.palletCount})]}),s.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[s.jsx("p",{className:"text-gray-600",children:"Boxes/Pallet"}),s.jsx("p",{className:"text-lg font-bold text-green-600",children:u.boxesPerPallet})]}),s.jsxs("div",{className:"bg-purple-50 p-2 rounded col-span-2",children:[s.jsx("p",{className:"text-gray-600",children:"Total Boxes"}),s.jsx("p",{className:"text-lg font-bold text-purple-600",children:u.pieces})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Box Details:"}),s.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[s.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[s.jsx("p",{className:"text-gray-600",children:"Total Boxes"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.pieces})]}),s.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"This shipment contains individual boxes (no pallets)"})]})]})})]}),s.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(F),alert("QR Code copied to clipboard!")},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-lg transition-colors",children:"Copy QR Code"})]})}),(te.requireClientEmail||te.requireEstimatedValue||te.requireRackAssignment)&&s.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-r-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"mr-2 text-lg",children:"i"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold mb-1",children:"Company Settings Applied"}),s.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[te.requireClientEmail&&s.jsx("li",{children:"Client email is required"}),te.requireEstimatedValue&&s.jsx("li",{children:"Estimated value is required"}),te.requireRackAssignment&&s.jsx("li",{children:"Rack assignment is required"})]})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Form Sections Order:"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Click arrows to reorder"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map((Ce,Be)=>{const et={basic:"Basic",client:"Client",warehouse:"Warehouse",storage:"Storage",custom:"Custom",pricing:"Pricing"};return s.jsxs("div",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded border border-gray-300",children:[s.jsx("span",{className:"text-xs font-medium",children:et[Ce]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("button",{type:"button",onClick:()=>{if(Be>0){const Xe=[...Q];[Xe[Be],Xe[Be-1]]=[Xe[Be-1],Xe[Be]],le(Xe)}},disabled:Be===0,className:"text-xs text-gray-500 hover:text-blue-600 disabled:opacity-30 leading-none",children:"Up"}),s.jsx("button",{type:"button",onClick:()=>{if(Be<Q.length-1){const Xe=[...Q];[Xe[Be],Xe[Be+1]]=[Xe[Be+1],Xe[Be]],le(Xe)}},disabled:Be===Q.length-1,className:"text-xs text-gray-500 hover:text-blue-600 disabled:opacity-30 leading-none",children:"Down"})]})]},Ce)})})]})}),Q.map(Ce=>{const Be=lt[Ce];return Be?s.jsx("div",{children:Be()},Ce):null}),te.showNotes!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Additional Notes ",te.requireNotes&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"notes",value:u.notes,onChange:Se,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes or comments...",required:te.requireNotes})]}),s.jsxs("div",{style:{display:"none"},className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"??????? Shipment Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode ID"}),s.jsx("input",{type:"text",name:"barcode",value:u.barcode,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 font-mono text-lg",readOnly:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Number of Pieces ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"pieces",value:u.pieces,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",required:!0})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"Client Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientName",value:u.clientName,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",te.requireClientPhone&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"clientPhone",value:u.clientPhone,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+965 1234 5678",required:te.requireClientPhone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",te.requireClientEmail&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",name:"clientEmail",value:u.clientEmail,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),te.showClientAddress!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",te.requireClientAddress&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientAddress",value:u.clientAddress,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Street address, city",required:te.requireClientAddress})]})]})]}),te.showWarehouseMode!==!1&&s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"isWarehouseShipment",name:"isWarehouseShipment",checked:u.isWarehouseShipment,onChange:Se,className:"w-5 h-5 text-orange-600 bg-gray-100 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("label",{htmlFor:"isWarehouseShipment",className:"text-sm font-semibold text-orange-800",children:"This is a warehouse shipment (import/export with shipper/consignee details)"})]})}),u.isWarehouseShipment&&te.showWarehouseMode!==!1&&s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-orange-800 flex items-center",children:"Warehouse Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Shipper Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"shipper",value:u.shipper,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"ABC Trading Company",required:u.isWarehouseShipment})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Consignee Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"consignee",value:u.consignee,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"XYZ Imports LLC",required:u.isWarehouseShipment})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipper Address"}),s.jsx("input",{type:"text",name:"shipperAddress",value:u.shipperAddress,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"123 Export St, Dubai, UAE"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consignee Address"}),s.jsx("input",{type:"text",name:"consigneeAddress",value:u.consigneeAddress,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"456 Import Ave, Kuwait City"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 flex items-center",children:"Shipment Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Weight (kg)"}),s.jsx("input",{type:"number",name:"weight",value:u.weight,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.0",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimensions (L x W x H)"}),s.jsx("input",{type:"text",name:"dimensions",value:u.dimensions,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"100 x 50 x 30 cm"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Value (",k.currency,") ",te.requireEstimatedValue&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"value",value:u.value,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",required:te.requireEstimatedValue})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Type"}),s.jsxs("select",{name:"storageType",value:u.storageType,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"STANDARD",children:"Standard Storage"}),s.jsx("option",{value:"FRAGILE",children:"Fragile Items"}),s.jsx("option",{value:"HAZMAT",children:"Hazardous Materials"}),s.jsx("option",{value:"COLD",children:"Cold Storage"}),s.jsx("option",{value:"SECURE",children:"High Security"})]})]}),te.showDescription!==!1&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",te.requireDescription&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"description",value:u.description,onChange:Se,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the shipment contents...",required:te.requireDescription})]})]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-green-800 flex items-center",children:"Storage Assignment"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assign to Rack ",te.requireRackAssignment&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"rackId",value:u.rackId,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:te.requireRackAssignment,children:[s.jsx("option",{value:"",children:te.requireRackAssignment?"Select a rack (required)":"Select a rack (optional)"}),j.map(Ce=>s.jsxs("option",{value:Ce.id,children:[Ce.code," - ",Ce.location," (",Ce.capacityUsed,"/",Ce.capacityTotal,")"]},Ce.id))]})]}),te.showEstimatedDays!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Estimated Storage Days ",te.requireEstimatedDays&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"estimatedDays",value:u.estimatedDays,onChange:Se,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",required:te.requireEstimatedDays})]}),te.showSpecialInstructions!==!1&&s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),s.jsx("textarea",{name:"specialInstructions",value:u.specialInstructions,onChange:Se,rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Any special handling or storage requirements..."})]})]})]}),p.length>0&&s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-purple-800 flex items-center",children:"??? Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(Ce=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[Ce.fieldName,Ce.isRequired&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),qe(Ce)]},Ce.id))})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-800 flex items-center",children:"Estimated Storage Cost"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-600",children:"Base Cost"}),s.jsxs("div",{className:"text-xl font-bold text-blue-800",children:[jt.baseCost.toFixed(3)," ",k.currency]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[u.pieces," pieces x ",u.estimatedDays," days x ",k.storageRate," rate"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-gray-600",children:["Tax (",k.taxRate,"%)"]}),s.jsxs("div",{className:"text-xl font-bold text-blue-800",children:[jt.tax.toFixed(3)," ",k.currency]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-600",children:"Total Estimate"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[jt.total.toFixed(3)," ",k.currency]})]})]})]}),te.showNotes!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Additional Notes ",te.requireNotes&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"notes",value:u.notes,onChange:Se,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes or comments...",required:te.requireNotes})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:ae,className:"px-6 py-3 border-2 border-purple-500 text-purple-600 rounded-lg hover:bg-purple-50 font-medium transition-colors flex items-center gap-2",disabled:n||R==="pallet"&&(!u.palletCount||!u.boxesPerPallet)||R==="box"&&!u.pieces,children:R==="pallet"?"View Pallet QR":"View Box QR"}),s.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",disabled:n,children:"Cancel"}),s.jsx("button",{type:"button",onClick:Ye,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition-colors",disabled:n,children:"Reset"}),s.jsx("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:n?"Creating...":"Create Shipment"})]})]})})]})})}function Ane({isOpen:e,onClose:t,onSelectRack:r,selectedRackId:n}){var U;const[a,i]=A.useState([]),[o,c]=A.useState(!0),[d,u]=A.useState("all"),[f,p]=A.useState("all"),[b,x]=A.useState(null),[N,j]=A.useState(!1);A.useEffect(()=>{e&&w()},[e]);const w=async()=>{try{c(!0);const R=await Bi.getAll();i(R.racks||[])}catch(R){console.error("Load racks error:",R)}finally{c(!1)}},C=R=>Math.round(R.capacityUsed/R.capacityTotal*100),P=R=>R>=90?"bg-red-500":R>=75?"bg-yellow-500":R>=50?"bg-blue-500":"bg-green-500",k=a.filter(R=>!(f!=="all"&&!R.code.startsWith(f)||d==="available"&&R.capacityUsed>=R.capacityTotal||d==="full"&&R.capacityUsed<R.capacityTotal)),_=Array.from(new Set(a.map(R=>R.code.charAt(0)))).sort(),O=async R=>{j(!0);try{const z=await Bi.getById(R.id);x(z.rack)}catch(z){console.error("Failed to load rack details:",z),x(R)}finally{j(!1)}},$=()=>{b&&b.status==="ACTIVE"&&b.capacityUsed<b.capacityTotal&&(r(b.id,b.code),t())},F=()=>{x(null)};return e?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:"??????? Warehouse Rack Map"}),s.jsx("p",{className:"text-sm text-purple-100 mt-1",children:"Select a rack with available space"})]}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",children:"??"})]}),s.jsxs("div",{className:"px-6 py-4 border-b bg-gray-50",children:[s.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Section:"}),s.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 rounded-md text-sm font-medium ${f==="all"?"bg-purple-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"All"}),_.map(R=>s.jsx("button",{onClick:()=>p(R),className:`px-3 py-1 rounded-md text-sm font-medium ${f===R?"bg-purple-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:R},R))]}),s.jsx("div",{className:"h-6 w-px bg-gray-300"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show:"}),s.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1 rounded-md text-sm font-medium ${d==="all"?"bg-blue-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"All"}),s.jsx("button",{onClick:()=>u("available"),className:`px-3 py-1 rounded-md text-sm font-medium ${d==="available"?"bg-green-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Available"}),s.jsx("button",{onClick:()=>u("full"),className:`px-3 py-1 rounded-md text-sm font-medium ${d==="full"?"bg-red-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Full"})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{className:"text-gray-600",children:"0-50% Full"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-600",children:"50-75% Full"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),s.jsx("span",{className:"text-gray-600",children:"75-90% Full"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),s.jsx("span",{className:"text-gray-600",children:"90-100% Full"})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:k.map(R=>{const z=C(R),M=R.status==="ACTIVE"&&R.capacityUsed<R.capacityTotal,W=R.id===n;return s.jsxs("button",{onClick:()=>O(R),className:`relative border-2 rounded-lg p-4 transition-all hover:shadow-lg ${W?"border-purple-600 bg-purple-50 ring-2 ring-purple-600":M?"border-gray-300 hover:border-purple-400":"border-red-200 bg-red-50"}`,children:[W&&s.jsx("div",{className:"absolute -top-2 -right-2",children:s.jsx(Gn,{className:"h-6 w-6 text-purple-600 bg-white rounded-full"})}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(Lb,{className:"h-5 w-5 text-blue-500"})}),s.jsxs("div",{className:"flex items-center gap-1 mb-2 mt-2",children:[s.jsx(Mi,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-lg font-bold text-gray-900",children:R.code})]}),s.jsx("div",{className:"mb-2",children:s.jsx("span",{className:`inline-block px-2 py-0.5 text-xs font-semibold rounded-full ${R.status==="ACTIVE"?z>=100?"bg-red-100 text-red-800":z>=90?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.status==="ACTIVE"?z>=100?"???? FULL":z>=90?"???? ALMOST FULL":"???? AVAILABLE":R.status})}),s.jsxs("div",{className:"text-xs text-gray-500 mb-3 truncate",title:R.location,children:["???? ",R.location]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Capacity"}),s.jsxs("span",{className:"font-medium text-gray-900",children:[R.capacityUsed,"/",R.capacityTotal]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all ${P(z)}`,style:{width:`${Math.min(z,100)}%`}})}),s.jsxs("div",{className:"text-xs text-center text-gray-500 font-semibold",children:[z,"%"]})]}),M?s.jsxs("div",{className:"mt-2 text-xs font-medium text-green-600 text-center",children:["??? ",R.capacityTotal-R.capacityUsed," spaces"]}):s.jsx("div",{className:"mt-2 text-xs font-medium text-red-600 text-center",children:"??? No space"}),s.jsx("div",{className:"mt-2 text-xs text-blue-600 text-center font-medium",children:"Click to view details"})]},R.id)})}),!o&&k.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("p",{className:"text-lg",children:"No racks found"}),s.jsx("p",{className:"text-sm mt-2",children:"Try changing the filters"})]})]}),s.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",s.jsx("span",{className:"font-semibold",children:k.length})," of"," ",s.jsx("span",{className:"font-semibold",children:a.length})," racks"]}),s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 font-medium",children:"Cancel"})]})]}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-end z-[60]",children:s.jsxs("div",{className:"bg-white h-full w-full max-w-2xl shadow-2xl flex flex-col animate-slide-in-right",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(Mi,{className:"h-7 w-7"}),"Rack ",b.code]}),s.jsxs("p",{className:"text-sm text-blue-100 mt-1",children:["???? ",b.location]})]}),s.jsx("button",{onClick:F,className:"text-white hover:text-gray-200 text-3xl font-bold",children:s.jsx($i,{className:"h-8 w-8"})})]}),N?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Status"}),s.jsx("p",{className:"text-lg font-bold mt-1",children:s.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm ${b.status==="ACTIVE"?b.capacityUsed>=b.capacityTotal?"bg-red-100 text-red-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b.status==="ACTIVE"?b.capacityUsed>=b.capacityTotal?"???? FULL":"???? AVAILABLE":b.status})})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Capacity"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[b.capacityUsed,"/",b.capacityTotal]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Available"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:b.capacityTotal-b.capacityUsed})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Utilization"}),s.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[C(b),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:s.jsx("div",{className:`h-4 rounded-full transition-all ${P(C(b))}`,style:{width:`${Math.min(C(b),100)}%`}})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:["???? Stored Shipments (",((U=b.boxes)==null?void 0:U.length)||0,")"]}),b.boxes&&b.boxes.length>0?s.jsx("div",{className:"space-y-3",children:b.boxes.map(R=>{let z=[];if(R.photos)try{const M=JSON.parse(R.photos);z=Array.isArray(M)?M:[]}catch(M){console.warn("Failed to parse box photos",M),z=[]}return s.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 hover:border-blue-400 hover:shadow-md transition-all",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["#",R.shipment.referenceId]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${R.shipment.status==="STORED"?"bg-green-100 text-green-800":R.shipment.status==="RELEASED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:R.shipment.status})]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Box: ",s.jsx("span",{className:"font-semibold text-gray-700",children:R.boxNumber})]})]})}),R.shipment.shipper&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2 space-y-1",children:[s.jsxs("p",{children:["???? ",s.jsx("span",{className:"font-medium",children:"From:"})," ",R.shipment.shipper]}),R.shipment.consignee&&s.jsxs("p",{children:["???? ",s.jsx("span",{className:"font-medium",children:"To:"})," ",R.shipment.consignee]})]}),z.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsxs("p",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:["???? Photos (",z.length,")"]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:z.map((M,W)=>s.jsxs("a",{href:M,target:"_blank",rel:"noopener noreferrer",className:"group relative block aspect-square rounded-lg overflow-hidden border-2 border-gray-200 hover:border-blue-400 transition-all",children:[s.jsx("img",{src:M,alt:`Box photo ${W+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-bold opacity-0 group-hover:opacity-100",children:"???? View"})})]},W))})]})]},R.id)})}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx("div",{className:"text-4xl mb-3",children:"????"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No shipments stored"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"This rack is empty"})]})]}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex gap-3",children:[s.jsx("button",{onClick:F,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-medium",children:"Close"}),b.status==="ACTIVE"&&b.capacityUsed<b.capacityTotal&&s.jsx("button",{onClick:$,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-bold shadow-lg",children:"??? Select This Rack"})]})]})]})})]}):null}function Sne({isOpen:e,onClose:t,onSuccess:r,shipment:n}){const[a,i]=A.useState(!1),[o,c]=A.useState([]),[d,u]=A.useState([]),[f,p]=A.useState({}),[b,x]=A.useState({clientName:"",clientPhone:"",clientEmail:"",description:"",totalBoxCount:"",currentBoxCount:"",rackId:"",estimatedValue:"",notes:"",status:""}),[N,j]=A.useState(""),[w,C]=A.useState(""),[P,k]=A.useState(!1);A.useEffect(()=>{e&&n&&(O(),_(),x({clientName:n.clientName||"",clientPhone:n.clientPhone||"",clientEmail:n.clientEmail||"",description:n.description||"",totalBoxCount:n.totalBoxCount||"",currentBoxCount:n.currentBoxCount||"",rackId:n.rackId||"",estimatedValue:n.estimatedValue||"",notes:n.notes||"",status:n.status||"IN_STORAGE"}),j(""),C(""))},[e,n]);const _=async()=>{try{const U=await fetch("/api/custom-fields?section=SHIPMENT",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(U.ok){const R=await U.json(),z=R.customFields||R,M=Array.isArray(z)?z.filter(W=>W.isActive):[];u(M)}if(n!=null&&n.id){const R=await fetch(`/api/custom-field-values/SHIPMENT/${n.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(R.ok){const z=await R.json(),M=z.customFieldValues||z,W={};Array.isArray(M)&&M.forEach(J=>{W[J.customFieldId]=J.fieldValue}),p(W)}}}catch(U){console.error("Failed to load custom fields:",U)}},O=async()=>{try{const R=(await Bi.getAll()).racks.filter(z=>z.id===(n==null?void 0:n.rackId)||z.status==="ACTIVE"&&z.capacityUsed<z.capacityTotal);c(R)}catch(U){j("Failed to load racks: "+U.message)}},$=U=>{const{name:R,value:z}=U.target;x(M=>({...M,[R]:R.includes("Count")||R==="estimatedValue"?EO(z,!0):z}))},F=async U=>{U.preventDefault(),i(!0),j(""),C("");try{const R=cn(b.totalBoxCount),z=cn(b.currentBoxCount),M=cn(b.estimatedValue);if(!b.clientName||!b.clientPhone)throw new Error("Client name and phone are required");if(R<=0)throw new Error("Total box count must be greater than 0");if(z>R)throw new Error("Current box count cannot exceed total box count");if(!b.rackId)throw new Error("Please select a rack");const W={clientName:b.clientName,clientPhone:b.clientPhone,clientEmail:b.clientEmail,description:b.description,currentBoxCount:z,rackId:b.rackId,estimatedValue:M,notes:b.notes,status:b.status};if(await Rc.update(n.id,W),d.length>0){const J=Object.entries(f).filter(([K,V])=>V!=="").map(([K,V])=>({customFieldId:K,fieldValue:V}));try{await fetch(`/api/custom-field-values/SHIPMENT/${n.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:J})})}catch(K){console.error("Failed to save custom field values:",K)}}alert(` SUCCESS!

Shipment ${n.referenceId} has been updated successfully!

 Current Boxes: ${z}
 Rack: ${b.rackId}`),r(),t()}catch(R){j(R.message||"Failed to update shipment")}finally{i(!1)}};return!e||!n?null:s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:" Edit Shipment"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:a,children:""})]}),s.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[N&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:N}),w&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:w}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Client Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientName",value:b.clientName,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"clientPhone",value:b.clientPhone,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+965 1234 5678",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (Optional)"}),s.jsx("input",{type:"email",name:"clientEmail",value:b.clientEmail,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"john@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value (KWD)"}),s.jsx("input",{type:"number",name:"estimatedValue",value:b.estimatedValue,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:"0"})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Shipment Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("input",{type:"text",name:"description",value:b.description,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Household items, furniture, etc."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Box Count ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"totalBoxCount",value:b.totalBoxCount,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10",min:"1",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Box Count ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"currentBoxCount",value:b.currentBoxCount,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10",min:"0",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:b.status,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"IN_STORAGE",children:"In Storage"}),s.jsx("option",{value:"PARTIAL",children:"Partial"}),s.jsx("option",{value:"RELEASED",children:"Released"})]})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Rack Assignment"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Rack"}),s.jsxs("select",{name:"rackId",value:b.rackId,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"-- No Rack Assigned --"}),o.map(U=>s.jsxs("option",{value:U.id,children:[U.code," - ",U.location," (Available: ",U.capacityTotal-U.capacityUsed,"/",U.capacityTotal,")"]},U.id))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"button",onClick:()=>k(!0),className:"w-full px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 font-medium border-2 border-purple-300",children:" Open Rack Map"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),s.jsx("textarea",{name:"notes",value:b.notes,onChange:$,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any special instructions or notes..."})]}),d.length>0&&s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:" Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(U=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[U.fieldName,U.isRequired&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),U.fieldType==="TEXT"&&s.jsx("input",{type:"text",value:f[U.id]||"",onChange:R=>p(z=>({...z,[U.id]:R.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),U.fieldType==="NUMBER"&&s.jsx("input",{type:"number",value:f[U.id]||"",onChange:R=>p(z=>({...z,[U.id]:R.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),U.fieldType==="DATE"&&s.jsx("input",{type:"date",value:f[U.id]||"",onChange:R=>p(z=>({...z,[U.id]:R.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),U.fieldType==="DROPDOWN"&&U.fieldOptions&&s.jsxs("select",{value:f[U.id]||"",onChange:R=>p(z=>({...z,[U.id]:R.target.value})),required:U.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"-- Select --"}),(()=>{if(!U.fieldOptions)return[];try{const R=JSON.parse(U.fieldOptions);return Array.isArray(R)?R.map(z=>s.jsx("option",{value:z,children:z},z)):[]}catch{return typeof U.fieldOptions=="string"?U.fieldOptions.split(",").map(R=>s.jsx("option",{value:R.trim(),children:R.trim()},R.trim())):[]}})()]}),U.fieldType==="CHECKBOX"&&s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:f[U.id]==="true",onChange:R=>p(z=>({...z,[U.id]:R.target.checked?"true":"false"})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},U.id))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:a,children:a?"Updating...":"Update Shipment"})]})]})]}),s.jsx(Ane,{isOpen:P,onClose:()=>k(!1),selectedRackId:b.rackId,onSelectRack:U=>{x(R=>({...R,rackId:U})),k(!1)}})]})}function Ene({shipmentId:e}){const[t,r]=A.useState([]),[n,a]=A.useState(!1),[i,o]=A.useState({}),[c,d]=A.useState([]);A.useEffect(()=>{u()},[e]);const u=async()=>{a(!0);try{const j=(await(await fetch(`/api/shipments/${e}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes||[];r(j);const w=[];for(const k of j){if(k.photos)try{const _=JSON.parse(k.photos);if(Array.isArray(_))for(const O of _)typeof O=="string"&&O&&!w.includes(O)&&w.push(O)}catch{}if(k.pieceQR)try{const _=JSON.parse(k.pieceQR);k.palletNumber=_.palletNumber||null}catch{k.palletNumber=null}}d(w);const C={},P=[];for(const k of j)if(k.rackId&&k.rack){const _=`${k.rack.code}|${k.rack.location||""}`;C[_]||(C[_]=[]),C[_].push(k)}else P.push(k);P.length>0&&(C["Unassigned|Pending Assignment"]=P),o(C)}catch(x){console.error("Failed to load boxes:",x)}finally{a(!1)}};if(n)return s.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Box Distribution"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Loading box distribution..."})]});if(t.length===0)return null;const f=t.length,p=t.filter(x=>x.rackId).length,b=Object.keys(i).filter(x=>!x.startsWith("Unassigned")).length;return s.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Box Distribution & Locations"]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-white rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f}),s.jsx("p",{className:"text-xs text-gray-600",children:"Total Boxes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:p}),s.jsx("p",{className:"text-xs text-gray-600",children:"Assigned"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rack",b!==1?"s":""]})]})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(i).map(([x,N])=>{const[j,w]=x.split("|"),C=x.startsWith("Unassigned");return s.jsxs("div",{className:`p-3 rounded-lg border-2 ${C?"bg-yellow-50 border-yellow-300":"bg-white border-green-300"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:C?"":""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-gray-800",children:j}),w&&!C&&s.jsx("p",{className:"text-xs text-gray-600",children:w})]})]}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C?"bg-yellow-200 text-yellow-800":"bg-green-200 text-green-800"}`,children:[N.length," box",N.length!==1?"es":""]})]}),s.jsx("div",{className:"grid grid-cols-8 gap-1 mt-2",children:N.map(P=>s.jsxs("div",{className:`aspect-square flex flex-col items-center justify-center text-xs font-bold rounded ${P.status==="IN_STORAGE"?"bg-green-500 text-white":P.status==="RELEASED"?"bg-gray-400 text-white":"bg-yellow-400 text-gray-800"}`,title:`Box #${P.boxNumber}${P.palletNumber?` - Pallet ${P.palletNumber}`:""} - ${P.status}`,children:[s.jsx("span",{children:P.boxNumber}),P.palletNumber&&s.jsxs("span",{className:"text-[8px] opacity-80",children:["P",P.palletNumber]})]},P.id))})]},x)})}),c.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-blue-200",children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Photos (",c.length,")"]}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:c.map((x,N)=>s.jsxs("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"group relative block aspect-square rounded-lg overflow-hidden border-2 border-blue-200 hover:border-blue-500 transition-all",children:[s.jsx("img",{src:x,alt:`Photo ${N+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors"})]},N))})]}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-blue-200",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Status Legend:"}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),s.jsx("span",{className:"text-gray-600",children:"In Storage"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded"}),s.jsx("span",{className:"text-gray-600",children:"Pending"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded"}),s.jsx("span",{className:"text-gray-600",children:"Released"})]})]})]})]})}function kne({isOpen:e,onClose:t,shipmentId:r}){const[n,a]=A.useState(null),[i,o]=A.useState([]),[c,d]=A.useState(!1),[u,f]=A.useState("");A.useEffect(()=>{e&&r&&(p(),b())},[e,r]);const p=async()=>{d(!0),f("");try{const N=await Rc.getById(r);a(N.shipment)}catch(N){f("Failed to load shipment details"),console.error(N)}finally{d(!1)}},b=async()=>{try{const N=await fetch(`/api/custom-field-values/SHIPMENT/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(N.ok){const j=await N.json();o(j.customFieldValues||j.values||[])}}catch(N){console.error("Failed to load custom field values:",N)}},x=N=>{const j={PENDING:{color:"bg-yellow-100 text-yellow-800 border-yellow-300",emoji:"",text:"Pending"},IN_TRANSIT:{color:"bg-blue-100 text-blue-800 border-blue-300",emoji:"",text:"In Transit"},IN_STORAGE:{color:"bg-green-100 text-green-800 border-green-300",emoji:"",text:"In Storage"},RELEASED:{color:"bg-gray-100 text-gray-800 border-gray-300",emoji:"",text:"Released"}},w=j[N]||j.PENDING;return s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold border ${w.color}`,children:[w.emoji," ",w.text]})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-4 flex justify-between items-center rounded-t-lg",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:" Shipment Details"}),s.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["Reference: ",n==null?void 0:n.referenceId]})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading shipment details..."})]}):u?s.jsx("div",{className:"bg-red-50 border border-red-300 text-red-800 px-4 py-3 rounded",children:u}):n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n.name}),s.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["QR Code: ",n.qrCode]})]}),x(n.status)]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Type"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total Boxes"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.originalBoxCount})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Current Boxes"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.currentBoxCount})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Arrival Date"}),s.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.arrivalDate).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Client Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Name"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Phone"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.clientPhone})]}),n.clientEmail&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Email"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.clientEmail})]}),n.estimatedValue&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Estimated Value"}),s.jsxs("p",{className:"font-semibold text-gray-800",children:["KWD ",n.estimatedValue.toFixed(3)]})]})]})]}),n.rack&&s.jsxs("div",{className:"border border-green-200 bg-green-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Primary Storage Location"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Rack Code"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.rack.code})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Location"}),s.jsx("p",{className:"font-semibold text-gray-800",children:n.rack.location})]})]})]}),s.jsx(Ene,{shipmentId:r}),(n.description||n.notes)&&s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Additional Information"]}),n.description&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Description"}),s.jsx("p",{className:"text-gray-800",children:n.description})]}),n.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-sm",children:"Notes"}),s.jsx("p",{className:"text-gray-800",children:n.notes})]})]}),i.length>0&&s.jsxs("div",{className:"border border-purple-200 bg-purple-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Custom Fields"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:i.map(N=>s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:N.customField.fieldName}),s.jsx("p",{className:"font-semibold text-gray-800",children:N.customField.fieldType==="CHECKBOX"?N.fieldValue==="true"?" Yes":" No":N.fieldValue})]},N.id))})]}),n.withdrawals&&n.withdrawals.length>0&&s.jsxs("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Withdrawal History"]}),s.jsx("div",{className:"space-y-2",children:n.withdrawals.map(N=>s.jsxs("div",{className:"bg-white p-3 rounded border border-orange-200 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"font-semibold",children:[N.withdrawnBoxCount," boxes withdrawn"]}),s.jsx("span",{className:"text-gray-600",children:new Date(N.withdrawalDate).toLocaleDateString()})]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Collected by: ",N.withdrawnBy]}),N.notes&&s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:N.notes})]},N.id))})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[s.jsxs("h4",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx("span",{className:"text-xl mr-2",children:""})," Audit Trail"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Created"}),s.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.createdAt).toLocaleString()}),n.createdBy&&s.jsxs("p",{className:"text-xs text-gray-500",children:["By: User ID ",n.createdBy]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Last Updated"}),s.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.updatedAt).toLocaleString()}),n.updatedBy&&s.jsxs("p",{className:"text-xs text-gray-500",children:["By: User ID ",n.updatedBy]})]}),n.releasedAt&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Released"}),s.jsx("p",{className:"font-semibold text-gray-800",children:new Date(n.releasedAt).toLocaleString()})]})]})]})]}):null}),s.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t rounded-b-lg",children:s.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Close"})})]})}):null}var Yc={},Pne=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},kO={},xi={};let b3;const Tne=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];xi.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};xi.getSymbolTotalCodewords=function(t){return Tne[t]};xi.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};xi.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');b3=t};xi.isKanjiModeEnabled=function(){return typeof b3<"u"};xi.toSJIS=function(t){return b3(t)};var kx={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,a){if(e.isValid(n))return n;try{return t(n)}catch{return a}}})(kx);function PO(){this.buffer=[],this.length=0}PO.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Ine=PO;function V0(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}V0.prototype.set=function(e,t,r,n){const a=e*this.size+t;this.data[a]=r,n&&(this.reservedBit[a]=!0)};V0.prototype.get=function(e,t){return this.data[e*this.size+t]};V0.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};V0.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var _ne=V0,TO={};(function(e){const t=xi.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*a-2))*2,c=[i-7];for(let d=1;d<a-1;d++)c[d]=c[d-1]-o;return c.push(6),c.reverse()},e.getPositions=function(n){const a=[],i=e.getRowColCoords(n),o=i.length;for(let c=0;c<o;c++)for(let d=0;d<o;d++)c===0&&d===0||c===0&&d===o-1||c===o-1&&d===0||a.push([i[c],i[d]]);return a}})(TO);var IO={};const One=xi.getSymbolSize,NA=7;IO.getPositions=function(t){const r=One(t);return[[0,0],[r-NA,0],[0,r-NA]]};var _O={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const i=a.size;let o=0,c=0,d=0,u=null,f=null;for(let p=0;p<i;p++){c=d=0,u=f=null;for(let b=0;b<i;b++){let x=a.get(p,b);x===u?c++:(c>=5&&(o+=t.N1+(c-5)),u=x,c=1),x=a.get(b,p),x===f?d++:(d>=5&&(o+=t.N1+(d-5)),f=x,d=1)}c>=5&&(o+=t.N1+(c-5)),d>=5&&(o+=t.N1+(d-5))}return o},e.getPenaltyN2=function(a){const i=a.size;let o=0;for(let c=0;c<i-1;c++)for(let d=0;d<i-1;d++){const u=a.get(c,d)+a.get(c,d+1)+a.get(c+1,d)+a.get(c+1,d+1);(u===4||u===0)&&o++}return o*t.N2},e.getPenaltyN3=function(a){const i=a.size;let o=0,c=0,d=0;for(let u=0;u<i;u++){c=d=0;for(let f=0;f<i;f++)c=c<<1&2047|a.get(u,f),f>=10&&(c===1488||c===93)&&o++,d=d<<1&2047|a.get(f,u),f>=10&&(d===1488||d===93)&&o++}return o*t.N3},e.getPenaltyN4=function(a){let i=0;const o=a.data.length;for(let d=0;d<o;d++)i+=a.data[d];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function r(n,a,i){switch(n){case e.Patterns.PATTERN000:return(a+i)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(a+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return a*i%2+a*i%3===0;case e.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case e.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(a,i){const o=i.size;for(let c=0;c<o;c++)for(let d=0;d<o;d++)i.isReserved(d,c)||i.xor(d,c,r(a,d,c))},e.getBestMask=function(a,i){const o=Object.keys(e.Patterns).length;let c=0,d=1/0;for(let u=0;u<o;u++){i(u),e.applyMask(u,a);const f=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(u,a),f<d&&(d=f,c=u)}return c}})(_O);var Px={};const wc=kx,Xm=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ym=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Px.getBlocksCount=function(t,r){switch(r){case wc.L:return Xm[(t-1)*4+0];case wc.M:return Xm[(t-1)*4+1];case wc.Q:return Xm[(t-1)*4+2];case wc.H:return Xm[(t-1)*4+3];default:return}};Px.getTotalCodewordsCount=function(t,r){switch(r){case wc.L:return Ym[(t-1)*4+0];case wc.M:return Ym[(t-1)*4+1];case wc.Q:return Ym[(t-1)*4+2];case wc.H:return Ym[(t-1)*4+3];default:return}};var OO={},Tx={};const Of=new Uint8Array(512),Xg=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)Of[r]=t,Xg[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)Of[r]=Of[r-255]})();Tx.log=function(t){if(t<1)throw new Error("log("+t+")");return Xg[t]};Tx.exp=function(t){return Of[t]};Tx.mul=function(t,r){return t===0||r===0?0:Of[Xg[t]+Xg[r]]};(function(e){const t=Tx;e.mul=function(n,a){const i=new Uint8Array(n.length+a.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<a.length;c++)i[o+c]^=t.mul(n[o],a[c]);return i},e.mod=function(n,a){let i=new Uint8Array(n);for(;i.length-a.length>=0;){const o=i[0];for(let d=0;d<a.length;d++)i[d]^=t.mul(a[d],o);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},e.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let i=0;i<n;i++)a=e.mul(a,new Uint8Array([1,t.exp(i)]));return a}})(OO);const RO=OO;function v3(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}v3.prototype.initialize=function(t){this.degree=t,this.genPoly=RO.generateECPolynomial(this.degree)};v3.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const n=RO.mod(r,this.genPoly),a=this.degree-n.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(n,a),i}return n};var Rne=v3,DO={},Zc={},w3={};w3.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Ko={};const LO="[0-9]+",Dne="[A-Z $%*+\\-./:]+";let y0="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";y0=y0.replace(/u/g,"\\u");const Lne="(?:(?![A-Z0-9 $%*+\\-./:]|"+y0+`)(?:.|[\r
]))+`;Ko.KANJI=new RegExp(y0,"g");Ko.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ko.BYTE=new RegExp(Lne,"g");Ko.NUMERIC=new RegExp(LO,"g");Ko.ALPHANUMERIC=new RegExp(Dne,"g");const Mne=new RegExp("^"+y0+"$"),Bne=new RegExp("^"+LO+"$"),Fne=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ko.testKanji=function(t){return Mne.test(t)};Ko.testNumeric=function(t){return Bne.test(t)};Ko.testAlphanumeric=function(t){return Fne.test(t)};(function(e){const t=w3,r=Ko;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return r.testNumeric(i)?e.NUMERIC:r.testAlphanumeric(i)?e.ALPHANUMERIC:r.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(i,o){if(e.isValid(i))return i;try{return n(i)}catch{return o}}})(Zc);(function(e){const t=xi,r=Px,n=kx,a=Zc,i=w3,o=7973,c=t.getBCHDigit(o);function d(b,x,N){for(let j=1;j<=40;j++)if(x<=e.getCapacity(j,N,b))return j}function u(b,x){return a.getCharCountIndicator(b,x)+4}function f(b,x){let N=0;return b.forEach(function(j){const w=u(j.mode,x);N+=w+j.getBitsLength()}),N}function p(b,x){for(let N=1;N<=40;N++)if(f(b,N)<=e.getCapacity(N,x,a.MIXED))return N}e.from=function(x,N){return i.isValid(x)?parseInt(x,10):N},e.getCapacity=function(x,N,j){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=a.BYTE);const w=t.getSymbolTotalCodewords(x),C=r.getTotalCodewordsCount(x,N),P=(w-C)*8;if(j===a.MIXED)return P;const k=P-u(j,x);switch(j){case a.NUMERIC:return Math.floor(k/10*3);case a.ALPHANUMERIC:return Math.floor(k/11*2);case a.KANJI:return Math.floor(k/13);case a.BYTE:default:return Math.floor(k/8)}},e.getBestVersionForData=function(x,N){let j;const w=n.from(N,n.M);if(Array.isArray(x)){if(x.length>1)return p(x,w);if(x.length===0)return 1;j=x[0]}else j=x;return d(j.mode,j.getLength(),w)},e.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let N=x<<12;for(;t.getBCHDigit(N)-c>=0;)N^=o<<t.getBCHDigit(N)-c;return x<<12|N}})(DO);var MO={};const Lv=xi,BO=1335,Une=21522,jA=Lv.getBCHDigit(BO);MO.getEncodedBits=function(t,r){const n=t.bit<<3|r;let a=n<<10;for(;Lv.getBCHDigit(a)-jA>=0;)a^=BO<<Lv.getBCHDigit(a)-jA;return(n<<10|a)^Une};var FO={};const $ne=Zc;function gh(e){this.mode=$ne.NUMERIC,this.data=e.toString()}gh.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};gh.prototype.getLength=function(){return this.data.length};gh.prototype.getBitsLength=function(){return gh.getBitsLength(this.data.length)};gh.prototype.write=function(t){let r,n,a;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),a=parseInt(n,10),t.put(a,10);const i=this.data.length-r;i>0&&(n=this.data.substr(r),a=parseInt(n,10),t.put(a,i*3+1))};var zne=gh;const Wne=Zc,t2=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function xh(e){this.mode=Wne.ALPHANUMERIC,this.data=e}xh.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};xh.prototype.getLength=function(){return this.data.length};xh.prototype.getBitsLength=function(){return xh.getBitsLength(this.data.length)};xh.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let n=t2.indexOf(this.data[r])*45;n+=t2.indexOf(this.data[r+1]),t.put(n,11)}this.data.length%2&&t.put(t2.indexOf(this.data[r]),6)};var qne=xh;const Hne=Zc;function yh(e){this.mode=Hne.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}yh.getBitsLength=function(t){return t*8};yh.prototype.getLength=function(){return this.data.length};yh.prototype.getBitsLength=function(){return yh.getBitsLength(this.data.length)};yh.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var Vne=yh;const Gne=Zc,Kne=xi;function bh(e){this.mode=Gne.KANJI,this.data=e}bh.getBitsLength=function(t){return t*13};bh.prototype.getLength=function(){return this.data.length};bh.prototype.getBitsLength=function(){return bh.getBitsLength(this.data.length)};bh.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=Kne.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var Xne=bh,UO={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,n,a){var i={},o={};o[n]=0;var c=t.PriorityQueue.make();c.push(n,0);for(var d,u,f,p,b,x,N,j,w;!c.empty();){d=c.pop(),u=d.value,p=d.cost,b=r[u]||{};for(f in b)b.hasOwnProperty(f)&&(x=b[f],N=p+x,j=o[f],w=typeof o[f]>"u",(w||j>N)&&(o[f]=N,c.push(f,N),i[f]=u))}if(typeof a<"u"&&typeof o[a]>"u"){var C=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(C)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var a=[],i=n;i;)a.push(i),r[i],i=r[i];return a.reverse(),a},find_path:function(r,n,a){var i=t.single_source_shortest_paths(r,n,a);return t.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,a={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a.queue=[],a.sorter=r.sorter||n.default_sorter,a},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var a={value:r,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(UO);var Yne=UO.exports;(function(e){const t=Zc,r=zne,n=qne,a=Vne,i=Xne,o=Ko,c=xi,d=Yne;function u(C){return unescape(encodeURIComponent(C)).length}function f(C,P,k){const _=[];let O;for(;(O=C.exec(k))!==null;)_.push({data:O[0],index:O.index,mode:P,length:O[0].length});return _}function p(C){const P=f(o.NUMERIC,t.NUMERIC,C),k=f(o.ALPHANUMERIC,t.ALPHANUMERIC,C);let _,O;return c.isKanjiModeEnabled()?(_=f(o.BYTE,t.BYTE,C),O=f(o.KANJI,t.KANJI,C)):(_=f(o.BYTE_KANJI,t.BYTE,C),O=[]),P.concat(k,_,O).sort(function(F,U){return F.index-U.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function b(C,P){switch(P){case t.NUMERIC:return r.getBitsLength(C);case t.ALPHANUMERIC:return n.getBitsLength(C);case t.KANJI:return i.getBitsLength(C);case t.BYTE:return a.getBitsLength(C)}}function x(C){return C.reduce(function(P,k){const _=P.length-1>=0?P[P.length-1]:null;return _&&_.mode===k.mode?(P[P.length-1].data+=k.data,P):(P.push(k),P)},[])}function N(C){const P=[];for(let k=0;k<C.length;k++){const _=C[k];switch(_.mode){case t.NUMERIC:P.push([_,{data:_.data,mode:t.ALPHANUMERIC,length:_.length},{data:_.data,mode:t.BYTE,length:_.length}]);break;case t.ALPHANUMERIC:P.push([_,{data:_.data,mode:t.BYTE,length:_.length}]);break;case t.KANJI:P.push([_,{data:_.data,mode:t.BYTE,length:u(_.data)}]);break;case t.BYTE:P.push([{data:_.data,mode:t.BYTE,length:u(_.data)}])}}return P}function j(C,P){const k={},_={start:{}};let O=["start"];for(let $=0;$<C.length;$++){const F=C[$],U=[];for(let R=0;R<F.length;R++){const z=F[R],M=""+$+R;U.push(M),k[M]={node:z,lastCount:0},_[M]={};for(let W=0;W<O.length;W++){const J=O[W];k[J]&&k[J].node.mode===z.mode?(_[J][M]=b(k[J].lastCount+z.length,z.mode)-b(k[J].lastCount,z.mode),k[J].lastCount+=z.length):(k[J]&&(k[J].lastCount=z.length),_[J][M]=b(z.length,z.mode)+4+t.getCharCountIndicator(z.mode,P))}}O=U}for(let $=0;$<O.length;$++)_[O[$]].end=0;return{map:_,table:k}}function w(C,P){let k;const _=t.getBestModeForData(C);if(k=t.from(P,_),k!==t.BYTE&&k.bit<_.bit)throw new Error('"'+C+'" cannot be encoded with mode '+t.toString(k)+`.
 Suggested mode is: `+t.toString(_));switch(k===t.KANJI&&!c.isKanjiModeEnabled()&&(k=t.BYTE),k){case t.NUMERIC:return new r(C);case t.ALPHANUMERIC:return new n(C);case t.KANJI:return new i(C);case t.BYTE:return new a(C)}}e.fromArray=function(P){return P.reduce(function(k,_){return typeof _=="string"?k.push(w(_,null)):_.data&&k.push(w(_.data,_.mode)),k},[])},e.fromString=function(P,k){const _=p(P,c.isKanjiModeEnabled()),O=N(_),$=j(O,k),F=d.find_path($.map,"start","end"),U=[];for(let R=1;R<F.length-1;R++)U.push($.table[F[R]].node);return e.fromArray(x(U))},e.rawSplit=function(P){return e.fromArray(p(P,c.isKanjiModeEnabled()))}})(FO);const Ix=xi,r2=kx,Zne=Ine,Jne=_ne,Qne=TO,ese=IO,Mv=_O,Bv=Px,tse=Rne,Yg=DO,rse=MO,nse=Zc,n2=FO;function sse(e,t){const r=e.size,n=ese.getPositions(t);for(let a=0;a<n.length;a++){const i=n[a][0],o=n[a][1];for(let c=-1;c<=7;c++)if(!(i+c<=-1||r<=i+c))for(let d=-1;d<=7;d++)o+d<=-1||r<=o+d||(c>=0&&c<=6&&(d===0||d===6)||d>=0&&d<=6&&(c===0||c===6)||c>=2&&c<=4&&d>=2&&d<=4?e.set(i+c,o+d,!0,!0):e.set(i+c,o+d,!1,!0))}}function ase(e){const t=e.size;for(let r=8;r<t-8;r++){const n=r%2===0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}function ise(e,t){const r=Qne.getPositions(t);for(let n=0;n<r.length;n++){const a=r[n][0],i=r[n][1];for(let o=-2;o<=2;o++)for(let c=-2;c<=2;c++)o===-2||o===2||c===-2||c===2||o===0&&c===0?e.set(a+o,i+c,!0,!0):e.set(a+o,i+c,!1,!0)}}function ose(e,t){const r=e.size,n=Yg.getEncodedBits(t);let a,i,o;for(let c=0;c<18;c++)a=Math.floor(c/3),i=c%3+r-8-3,o=(n>>c&1)===1,e.set(a,i,o,!0),e.set(i,a,o,!0)}function s2(e,t,r){const n=e.size,a=rse.getEncodedBits(t,r);let i,o;for(i=0;i<15;i++)o=(a>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(n-15+i,8,o,!0),i<8?e.set(8,n-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(n-8,8,1,!0)}function lse(e,t){const r=e.size;let n=-1,a=r-1,i=7,o=0;for(let c=r-1;c>0;c-=2)for(c===6&&c--;;){for(let d=0;d<2;d++)if(!e.isReserved(a,c-d)){let u=!1;o<t.length&&(u=(t[o]>>>i&1)===1),e.set(a,c-d,u),i--,i===-1&&(o++,i=7)}if(a+=n,a<0||r<=a){a-=n,n=-n;break}}}function cse(e,t,r){const n=new Zne;r.forEach(function(d){n.put(d.mode.bit,4),n.put(d.getLength(),nse.getCharCountIndicator(d.mode,e)),d.write(n)});const a=Ix.getSymbolTotalCodewords(e),i=Bv.getTotalCodewordsCount(e,t),o=(a-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const c=(o-n.getLengthInBits())/8;for(let d=0;d<c;d++)n.put(d%2?17:236,8);return dse(n,e,t)}function dse(e,t,r){const n=Ix.getSymbolTotalCodewords(t),a=Bv.getTotalCodewordsCount(t,r),i=n-a,o=Bv.getBlocksCount(t,r),c=n%o,d=o-c,u=Math.floor(n/o),f=Math.floor(i/o),p=f+1,b=u-f,x=new tse(b);let N=0;const j=new Array(o),w=new Array(o);let C=0;const P=new Uint8Array(e.buffer);for(let F=0;F<o;F++){const U=F<d?f:p;j[F]=P.slice(N,N+U),w[F]=x.encode(j[F]),N+=U,C=Math.max(C,U)}const k=new Uint8Array(n);let _=0,O,$;for(O=0;O<C;O++)for($=0;$<o;$++)O<j[$].length&&(k[_++]=j[$][O]);for(O=0;O<b;O++)for($=0;$<o;$++)k[_++]=w[$][O];return k}function use(e,t,r,n){let a;if(Array.isArray(e))a=n2.fromArray(e);else if(typeof e=="string"){let u=t;if(!u){const f=n2.rawSplit(e);u=Yg.getBestVersionForData(f,r)}a=n2.fromString(e,u||40)}else throw new Error("Invalid data");const i=Yg.getBestVersionForData(a,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=cse(t,r,a),c=Ix.getSymbolSize(t),d=new Jne(c);return sse(d,t),ase(d),ise(d,t),s2(d,r,0),t>=7&&ose(d,t),lse(d,o),isNaN(n)&&(n=Mv.getBestMask(d,s2.bind(null,d,r))),Mv.applyMask(n,d),s2(d,r,n),{modules:d,version:t,errorCorrectionLevel:r,maskPattern:n,segments:a}}kO.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let n=r2.M,a,i;return typeof r<"u"&&(n=r2.from(r.errorCorrectionLevel,r2.M),a=Yg.from(r.version),i=Mv.from(r.maskPattern),r.toSJISFunc&&Ix.setToSJISFunction(r.toSJISFunc)),use(t,a,n,i)};var $O={},N3={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:a,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},e.getImageWidth=function(n,a){const i=e.getScale(n,a);return Math.floor((n+a.margin*2)*i)},e.qrToImageData=function(n,a,i){const o=a.modules.size,c=a.modules.data,d=e.getScale(o,i),u=Math.floor((o+i.margin*2)*d),f=i.margin*d,p=[i.color.light,i.color.dark];for(let b=0;b<u;b++)for(let x=0;x<u;x++){let N=(b*u+x)*4,j=i.color.light;if(b>=f&&x>=f&&b<u-f&&x<u-f){const w=Math.floor((b-f)/d),C=Math.floor((x-f)/d);j=p[c[w*o+C]?1:0]}n[N++]=j.r,n[N++]=j.g,n[N++]=j.b,n[N]=j.a}}})(N3);(function(e){const t=N3;function r(a,i,o){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,c){let d=c,u=o;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),o||(u=n()),d=t.getOptions(d);const f=t.getImageWidth(i.modules.size,d),p=u.getContext("2d"),b=p.createImageData(f,f);return t.qrToImageData(b.data,i,d),r(p,u,f),p.putImageData(b,0,0),u},e.renderToDataURL=function(i,o,c){let d=c;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),d||(d={});const u=e.render(i,o,d),f=d.type||"image/png",p=d.rendererOpts||{};return u.toDataURL(f,p.quality)}})($O);var zO={};const hse=N3;function CA(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function a2(e,t,r){let n=e+t;return typeof r<"u"&&(n+=" "+r),n}function fse(e,t,r){let n="",a=0,i=!1,o=0;for(let c=0;c<e.length;c++){const d=Math.floor(c%t),u=Math.floor(c/t);!d&&!i&&(i=!0),e[c]?(o++,c>0&&d>0&&e[c-1]||(n+=i?a2("M",d+r,.5+u+r):a2("m",a,0),a=0,i=!1),d+1<t&&e[c+1]||(n+=a2("h",o),o=0)):a++}return n}zO.render=function(t,r,n){const a=hse.getOptions(r),i=t.modules.size,o=t.modules.data,c=i+a.margin*2,d=a.color.light.a?"<path "+CA(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+CA(a.color.dark,"stroke")+' d="'+fse(o,i,a.margin)+'"/>',f='viewBox="0 0 '+c+" "+c+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+f+' shape-rendering="crispEdges">'+d+u+`</svg>
`;return typeof n=="function"&&n(null,b),b};const mse=Pne,Fv=kO,WO=$O,pse=zO;function j3(e,t,r,n,a){const i=[].slice.call(arguments,1),o=i.length,c=typeof i[o-1]=="function";if(!c&&!mse())throw new Error("Callback required as last argument");if(c){if(o<2)throw new Error("Too few arguments provided");o===2?(a=r,r=t,t=n=void 0):o===3&&(t.getContext&&typeof a>"u"?(a=n,n=void 0):(a=n,n=r,r=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=t,t=n=void 0):o===2&&!t.getContext&&(n=r,r=t,t=void 0),new Promise(function(d,u){try{const f=Fv.create(r,n);d(e(f,t,n))}catch(f){u(f)}})}try{const d=Fv.create(r,n);a(null,e(d,t,n))}catch(d){a(d)}}Yc.create=Fv.create;Yc.toCanvas=j3.bind(null,WO.render);Yc.toDataURL=j3.bind(null,WO.renderToDataURL);Yc.toString=j3.bind(null,function(e,t,r){return pse.render(e,r)});function gse({isOpen:e,onClose:t,shipmentId:r,shipmentRef:n}){var _;const[a,i]=A.useState([]),[o,c]=A.useState(null),[d,u]=A.useState({}),[f,p]=A.useState(null),[b,x]=A.useState([]),[N,j]=A.useState(!1),[w,C]=A.useState(null);A.useEffect(()=>{e&&r&&(fetch("/api/company/branding").then(O=>O.json()).then(O=>p((O==null?void 0:O.branding)||null)).catch(()=>{}),P())},[e,r]);const P=async()=>{j(!0),C(null);try{const O=await fetch(`/api/shipments/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(O.ok){const F=await O.json();c(F.shipment||F)}const $=await fetch(`/api/shipments/${r}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if($.ok){const F=await $.json();if(!F.boxes||F.boxes.length===0){C("No boxes found for this shipment"),j(!1);return}const U=F.boxes.map(te=>({id:te.id,boxNumber:te.boxNumber,qrCode:te.qrCode,status:te.status,pieceQR:te.pieceQR,rack:te.rack}));i(U);const R=new Map,z=[];U.forEach(te=>{let G=0,Q=!1;try{const le=te.pieceQR?JSON.parse(te.pieceQR):void 0;G=Number((le==null?void 0:le.palletNumber)||0),Q=!!(le!=null&&le.isLoose)||G===0}catch{const le=/-PAL-(\d+)/.exec(te.qrCode);G=le?parseInt(le[1],10):0,Q=G===0}Q?z.push(te):R.set(G,(R.get(G)||0)+1)});const M=(o==null?void 0:o.palletCount)||R.size||0,W=(o==null?void 0:o.qrCode)||"",J=(o==null?void 0:o.clientName)||"",K=o!=null&&o.arrivalDate?new Date(o.arrivalDate):null,V=K?`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`:"",me=(te,G)=>{const Q={t:"PAL",pn:te,pc:M||R.size,pcs:G,ref:n,c:J,ad:V};let le="";try{le=typeof window<"u"&&window.btoa?window.btoa(JSON.stringify(Q)):btoa(JSON.stringify(Q))}catch{le=encodeURIComponent(JSON.stringify(Q))}return W?`${W}-PAL-${te}-OF-${M||R.size}|S:${le}`:`PALLET-${r}-${te}|S:${le}`},se=Array.from(R.entries()).sort((te,G)=>te[0]-G[0]).map(([te,G])=>{const Q=me(te,G);return{type:"PALLET",key:`PAL-${te}`,palletNumber:te,pieces:G,qrValue:Q}}),oe=z.sort((te,G)=>te.boxNumber-G.boxNumber).map(te=>({type:"LOOSE_BOX",key:`BOX-${te.id}`,boxId:te.id,boxNumber:te.boxNumber,qrValue:te.qrCode})),ye=[...se,...oe];x(ye);const we={};for(const te of ye){const G=te.key,Q=te.qrValue;we[G]=await Yc.toDataURL(Q,{width:220})}u(we)}}catch(O){console.error("Failed to load data:",O)}finally{j(!1)}},k=()=>{window.print()};return e?s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 flex justify-between items-center rounded-t-lg print:hidden",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[f!=null&&f.logoUrl?s.jsx("img",{src:f.logoUrl,alt:(f==null?void 0:f.name)||"Brand",className:"h-8 w-auto rounded bg-white/10 p-1"}):s.jsx("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded bg-white/20 font-black",children:"Q"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"QGO Cargo  QR Suite"}),s.jsxs("p",{className:"text-indigo-100 text-sm mt-1",children:["Shipment: ",n,(_=o==null?void 0:o.companyProfile)!=null&&_.name?`  Profile: ${o.companyProfile.name}`:""]})]})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:N?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading QR codes..."})]}):w?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),s.jsx("p",{className:"text-gray-700 font-semibold text-lg",children:w}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Boxes will be created when shipment is saved"})]}):a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-400 text-5xl mb-4",children:""}),s.jsx("p",{className:"text-gray-500",children:"No boxes found for this shipment"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 flex justify-between items-center print:hidden",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["QRs to Print: ",b.length," (Pallets: ",b.filter(O=>O.type==="PALLET").length,", Loose Boxes: ",b.filter(O=>O.type==="LOOSE_BOX").length,")"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"One QR per pallet with details, plus one for each loose box"})]}),s.jsxs("button",{onClick:k,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print All QR Codes"]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:b.map(O=>{var $,F;return s.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 text-center hover:border-indigo-400 transition print:border print:border-black print:break-inside-avoid",children:[O.type==="PALLET"?s.jsxs("div",{className:"bg-blue-100 text-blue-800 font-bold text-lg rounded-md py-2 mb-3",children:["Pallet #",O.palletNumber]}):s.jsxs("div",{className:"bg-purple-100 text-purple-800 font-bold text-lg rounded-md py-2 mb-3",children:["Loose Box #",O.boxNumber]}),d[O.key]&&s.jsx("img",{src:d[O.key],alt:`${O.type==="PALLET"?`Pallet ${O.palletNumber}`:`Loose Box ${O.boxNumber}`} QR`,className:"mx-auto mb-3"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[f!=null&&f.logoUrl?s.jsx("img",{src:f.logoUrl,alt:(f==null?void 0:f.name)||"Brand",className:"h-5 w-auto"}):s.jsx("span",{className:"text-xs font-black text-indigo-700",children:"QGO"}),s.jsx("span",{className:"text-[10px] text-gray-600 font-semibold",children:(f==null?void 0:f.name)||"QGO Cargo"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx("p",{className:"text-xs text-gray-500 font-mono truncate max-w-[220px]",title:O.qrValue,children:O.qrValue.replace(/\|S:.+$/,"")}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(O.qrValue),className:"text-indigo-600 hover:text-indigo-800 text-xs underline",title:"Copy full QR value",children:"Copy"})]}),O.type==="PALLET"?s.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[s.jsxs("div",{children:["Shipment: ",s.jsx("span",{className:"font-semibold",children:n})]}),(($=o==null?void 0:o.companyProfile)==null?void 0:$.name)&&s.jsxs("div",{children:["Profile: ",s.jsx("span",{className:"font-semibold",children:o.companyProfile.name})]}),s.jsxs("div",{children:["Pieces on Pallet: ",s.jsx("span",{className:"font-semibold",children:O.pieces})]}),s.jsxs("div",{children:["Client: ",s.jsx("span",{className:"font-semibold",children:(o==null?void 0:o.clientName)||""})]}),s.jsxs("div",{children:["Arrived: ",s.jsx("span",{className:"font-semibold",children:new Date((o==null?void 0:o.arrivalDate)||"").toLocaleDateString()})]})]}):s.jsxs("div",{className:"text-xs text-gray-700 space-y-1",children:[s.jsxs("div",{children:["Shipment: ",s.jsx("span",{className:"font-semibold",children:n})]}),s.jsxs("div",{children:["Type: ",s.jsx("span",{className:"font-semibold",children:"Loose Box"})]}),((F=o==null?void 0:o.companyProfile)==null?void 0:F.name)&&s.jsxs("div",{children:["Profile: ",s.jsx("span",{className:"font-semibold",children:o.companyProfile.name})]}),s.jsxs("div",{children:["Client: ",s.jsx("span",{className:"font-semibold",children:(o==null?void 0:o.clientName)||""})]}),s.jsxs("div",{children:["Arrived: ",s.jsx("span",{className:"font-semibold",children:new Date((o==null?void 0:o.arrivalDate)||"").toLocaleDateString()})]})]})]},O.key)})}),a.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("p",{className:"text-lg font-semibold",children:"No boxes found"})]})]})}),s.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end gap-3 border-t rounded-b-lg print:hidden",children:s.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Close"})})]}),s.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .fixed, .fixed * {
            visibility: visible;
          }
          .fixed {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:border {
            border: 1px solid #000 !important;
          }
          .print\\:break-inside-avoid {
            page-break-inside: avoid;
          }
        }
      `})]}):null}const xse=()=>{const[e,t]=A.useState(""),[r,n]=A.useState("all"),[a,i]=A.useState("all"),[o,c]=A.useState([]),[d,u]=A.useState({all:0,pending:0,in_storage:0,partial:0,released:0}),[f,p]=A.useState({all:0,regular:0,warehouse:0}),[b,x]=A.useState(!0),[N,j]=A.useState(""),[w,C]=A.useState(!1),[P,k]=A.useState(null),[_,O]=A.useState(!1),[$,F]=A.useState(!1),[U,R]=A.useState(!1),[z,M]=A.useState(!1),[W,J]=A.useState(!1),[K,V]=A.useState(null);A.useEffect(()=>{me()},[r,a,e]);const me=async()=>{try{x(!0);const le=(await Rc.getAll({})).shipments||[],ve={all:le.length,pending:le.filter(Te=>Te.status==="PENDING").length,in_storage:le.filter(Te=>Te.status==="IN_STORAGE"||Te.status==="ACTIVE").length,partial:le.filter(Te=>Te.status==="PARTIAL").length,released:le.filter(Te=>Te.status==="RELEASED").length};u(ve);const xe={all:le.length,regular:le.filter(Te=>!Te.isWarehouseShipment).length,warehouse:le.filter(Te=>Te.isWarehouseShipment).length};p(xe);const ke={};r!=="all"&&(ke.status=r==="in_storage"?"IN_STORAGE":r.toUpperCase()),a==="regular"?ke.isWarehouseShipment=!1:a==="warehouse"&&(ke.isWarehouseShipment=!0),e&&(ke.search=e);const be=(await Rc.getAll(ke)).shipments||[];console.log(" Shipments loaded:",be.map(Te=>({id:Te.referenceId,status:Te.status,boxes:Te.currentBoxCount}))),c(be)}catch(Q){j(Q.message),console.error("Load shipments error:",Q)}finally{x(!1)}},se=async Q=>{const le=o.find(xe=>xe.id===Q),ve=` DELETE SHIPMENT

Reference: ${(le==null?void 0:le.referenceId)||"N/A"}
Client: ${(le==null?void 0:le.clientName)||"N/A"}
Boxes: ${(le==null?void 0:le.currentBoxCount)||0}

 This action CANNOT be undone!

Are you sure you want to delete this shipment?`;if(confirm(ve))try{await Rc.delete(Q),alert(" Shipment deleted successfully!"),me()}catch(xe){alert(" Error deleting shipment: "+xe.message)}},oe=Q=>{k(Q),C(!0)},ye=Q=>{const le=new Date(Q.arrivalDate),ve=Q.releasedAt?new Date(Q.releasedAt):new Date;Math.ceil((ve.getTime()-le.getTime())/(1e3*60*60*24));const xe={shipment:Q,invoice:null,releaseDate:Q.releasedAt||new Date,releasedBy:"Admin User",collectorID:"N/A",releaseType:Q.currentBoxCount===0?"FULL":"PARTIAL",boxesReleased:Q.originalBoxCount-Q.currentBoxCount};V(xe),J(!0)},we=Q=>{switch(Q){case"PENDING":return{color:"bg-yellow-100 text-yellow-800",icon:"",label:"Pending"};case"IN_STORAGE":return{color:"bg-green-100 text-green-800",icon:"",label:"In Storage"};case"ACTIVE":return{color:"bg-green-100 text-green-800",icon:"",label:"In Storage"};case"PARTIAL":return{color:"bg-orange-100 text-orange-800",icon:"",label:"Partial"};case"RELEASED":return{color:"bg-blue-100 text-blue-800",icon:"",label:"Released"};default:return{color:"bg-gray-100 text-gray-800",icon:"",label:Q}}},te=Q=>{const le=Number(Q==null?void 0:Q.palletCount)||0,ve=Number(Q==null?void 0:Q.boxesPerPallet)||0;return le>1||le===1&&ve>1?"PALLET":"BOX"},G=Q=>{const le=(Q==null?void 0:Q.arrivalDate)||(Q==null?void 0:Q.receivedDate)||(Q==null?void 0:Q.createdAt);if(!le)return 0;const ve=new Date(le);if(Number.isNaN(ve.getTime()))return 0;const ke=new Date().getTime()-ve.getTime(),Re=Math.ceil(ke/(1e3*60*60*24));return Math.max(0,Re)};return b?s.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading shipments..."})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Warehouse Shipments"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Complete warehouse management with intake, tracking, and release"})]}),s.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-md",children:[s.jsx(Mc,{className:"h-5 w-5 mr-2"})," New Shipment Intake"]})]}),N&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:N}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(a0,{className:"h-5 w-5 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Shipment Type"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="all"?"bg-primary-100 text-primary-700 border border-primary-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["All Types (",f.all,")"]}),s.jsxs("button",{onClick:()=>i("regular"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${a==="regular"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.jsx(Db,{className:"h-4 w-4"}),"Regular Shipments (",f.regular,")"]}),s.jsxs("button",{onClick:()=>i("warehouse"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${a==="warehouse"?"bg-orange-100 text-orange-700 border border-orange-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s.jsx(J7,{className:"h-4 w-4"}),"Warehouse Shipments (",f.warehouse,")"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsx("button",{onClick:()=>n("all"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="all"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:"All Shipments"}),d.all>0&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:d.all})]})}),s.jsx("button",{onClick:()=>n("pending"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="pending"?"border-b-2 border-yellow-500 text-yellow-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:" Pending"}),d.pending>0&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:d.pending})]})}),s.jsx("button",{onClick:()=>n("in_storage"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="in_storage"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:" In Storage"}),d.in_storage>0&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:d.in_storage})]})}),s.jsx("button",{onClick:()=>n("partial"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="partial"?"border-b-2 border-orange-500 text-orange-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:" Partial"}),d.partial>0&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:d.partial})]})}),s.jsx("button",{onClick:()=>n("released"),className:`flex-1 py-4 px-6 text-center font-medium text-sm transition-colors ${r==="released"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:" Released"}),d.released>0&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:d.released})]})})]})}),s.jsx("div",{className:"p-4 bg-gray-50",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(E1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by client name, phone, or shipment ID...",value:e,onChange:Q=>t(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barcode ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pieces"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rack"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Stored"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[o.map(Q=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mi,{className:"h-5 w-5 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:Q.referenceId})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.clientName}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(Q.receivedDate).toLocaleDateString()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.clientPhone}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[" ",Q.currentBoxCount," / ",Q.originalBoxCount," pieces"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center gap-2",children:te(Q)==="PALLET"?s.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-indigo-100 text-indigo-800",children:" Pallet"}):s.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:" Box"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"text-sm font-medium text-primary-600",children:Q.rackLocations||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("span",{className:"font-semibold",children:[G(Q)," days"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(()=>{const le=we(Q.status);return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full ${le.color}`,children:[s.jsx("span",{children:le.icon}),s.jsx("span",{children:le.label})]})})()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{k(Q),M(!0)},className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"View/Print QR Codes",children:s.jsx(Mi,{className:"h-5 w-5"})}),(Q.status==="IN_STORAGE"||Q.status==="PARTIAL"||Q.status==="STORED"||Q.status==="ACTIVE")&&Q.currentBoxCount>0&&s.jsx("button",{onClick:()=>oe(Q),className:"text-green-600 hover:text-green-900",title:"Generate Invoice & Release",children:s.jsx(Ob,{className:"h-5 w-5"})}),Q.status==="RELEASED"&&s.jsx("button",{onClick:()=>ye(Q),className:"text-purple-600 hover:text-purple-900",title:"Print Release Note",children:s.jsx(Bc,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>{k(Q),R(!0)},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:s.jsx(E0,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>{k(Q),F(!0)},className:"text-gray-600 hover:text-gray-900",title:"Edit Shipment",children:s.jsx(Qd,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>se(Q.id),className:"text-red-600 hover:text-red-900",children:s.jsx(Fc,{className:"h-5 w-5"})})]})})]},Q.id)),o.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:"No shipments found"})})]})]})})}),s.jsx(Cne,{isOpen:_,onClose:()=>O(!1),onSuccess:me}),s.jsx(Sne,{isOpen:$,onClose:()=>F(!1),shipment:P,onSuccess:me}),s.jsx(kne,{isOpen:U,onClose:()=>R(!1),shipmentId:(P==null?void 0:P.id)||""}),s.jsx(jne,{isOpen:w,onClose:()=>C(!1),shipment:P,onSuccess:me}),s.jsx(gse,{isOpen:z,onClose:()=>M(!1),shipmentId:(P==null?void 0:P.id)||"",shipmentRef:(P==null?void 0:P.referenceId)||""}),W&&K&&s.jsx(wne,{isOpen:W,onClose:()=>J(!1),releaseData:K})]})};function yse({isOpen:e,onClose:t,onSuccess:r}){const[n,a]=A.useState(!1),[i,o]=A.useState([]),[c,d]=A.useState({code:"",location:"",rackType:"STORAGE",categoryId:"",companyProfileId:"",capacityTotal:100,status:"ACTIVE",length:"",width:"",height:"",dimensionUnit:"METERS"}),[u,f]=A.useState(""),[p,b]=A.useState(""),[x,N]=A.useState(""),[j,w]=A.useState(null),C=U=>U?U.startsWith("http")||U.startsWith("/")?U:`/uploads/${U}`:"";A.useEffect(()=>{e&&P()},[e]);const P=async()=>{try{const R=(await vd.listProfiles()||[]).filter(z=>z.isActive!==!1).map(z=>({id:z.id,name:z.name,description:z.description,logo:z.logo,contractStatus:z.contractStatus,contactPerson:z.contactPerson,contactPhone:z.contactPhone,color:"#5B21B6",icon:"????"}));o(R)}catch(U){console.error("Failed to load categories:",U)}};A.useEffect(()=>{e&&(d({code:"",location:"",rackType:"STORAGE",categoryId:"",companyProfileId:"",capacityTotal:100,status:"ACTIVE",length:"",width:"",height:"",dimensionUnit:"METERS"}),f(""),b(""),N(""),w(null))},[e]);const k=U=>{const{name:R,value:z}=U.target;if(d(M=>{const W={...M,[R]:R==="capacityTotal"?Number(z):z};return R==="categoryId"&&(W.companyProfileId=z),W}),R==="categoryId"){const M=i.find(W=>W.id===z);w(M||null)}},_=async U=>{try{const R=`RACK:${U}`,z=await Yc.toDataURL(R,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});f(z)}catch(R){console.error("QR generation error:",R)}},O=U=>{const R=U.target.value.toUpperCase();d(z=>({...z,code:R})),R.length>0?_(R):f("")},$=()=>{if(!u)return;const U=document.createElement("a");U.href=u,U.download=`rack-${c.code}-qr.png`,document.body.appendChild(U),U.click(),document.body.removeChild(U)},F=async U=>{U.preventDefault(),a(!0),b(""),N("");try{if(!c.code||!c.location)throw new Error("Rack code and location are required");if(c.capacityTotal<=0)throw new Error("Capacity must be greater than 0");const R=`RACK-${c.code}-${Date.now()}`,z=c.companyProfileId||c.categoryId||"",{categoryId:M,companyProfileId:W,length:J,width:K,height:V,...me}=c,se={...me,qrCode:R,capacityUsed:0,length:J?parseFloat(J):void 0,width:K?parseFloat(K):void 0,height:V?parseFloat(V):void 0,categoryId:void 0,companyProfileId:z||void 0};await Bi.create(se),N("Rack created successfully! ???"),await _(c.code),setTimeout(()=>{r(),t()},2e3)}catch(R){b(R.message||"Failed to create rack")}finally{a(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-purple-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"???? Create New Rack"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:n,children:"??"})]}),s.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[p&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:p}),x&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:x}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Code ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"code",value:c.code,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase",placeholder:"A1, B2, C3...",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use format like A1, A2, B1, etc."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"location",value:c.location,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Zone A, Floor 1, Section North...",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"rackType",value:c.rackType,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"STORAGE",children:"Storage"}),s.jsx("option",{value:"MATERIALS",children:"Materials"}),s.jsx("option",{value:"EQUIPMENT",children:"Equipment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category / Company"}),s.jsxs("select",{name:"categoryId",value:c.categoryId,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Category / Company..."}),i.map(U=>s.jsxs("option",{value:U.id,children:["???? ",U.name]},U.id))]}),j&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[j.logo&&s.jsx("img",{src:C(j.logo),alt:`${j.name} logo`,className:"h-10 w-10 rounded-md object-contain bg-white border border-blue-200"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900",children:j.name}),j.contractStatus&&s.jsx("p",{className:"text-blue-600 text-xs uppercase font-semibold",children:j.contractStatus})]})]}),j.description&&s.jsx("p",{className:"text-blue-700 text-xs mt-1",children:j.description}),(j.contactPerson||j.contactPhone)&&s.jsxs("p",{className:"text-blue-700 text-xs mt-1",children:[j.contactPerson&&`Contact: ${j.contactPerson}`,j.contactPerson&&j.contactPhone&&" ?? ",j.contactPhone&&`Phone: ${j.contactPhone}`]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which company/category this rack belongs to"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Capacity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"capacityTotal",value:c.capacityTotal,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"100",min:"1",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of items/boxes"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:c.status,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),s.jsx("option",{value:"RESERVED",children:"Reserved"})]})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"???? Dimensions (Size Information)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),s.jsx("input",{type:"number",name:"length",value:c.length,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.0",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),s.jsx("input",{type:"number",name:"width",value:c.width,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.0",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),s.jsx("input",{type:"number",name:"height",value:c.height,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.0",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),s.jsxs("select",{name:"dimensionUnit",value:c.dimensionUnit,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[s.jsx("option",{value:"METERS",children:"Meters"}),s.jsx("option",{value:"FEET",children:"Feet"})]})]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"???? Optional: Enter rack physical dimensions for detailed tracking"})]}),u&&s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"QR Code Preview"}),s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("img",{src:u,alt:"QR Code",className:"border-2 border-gray-300 rounded p-2"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Scan this code to identify rack: ",s.jsx("span",{className:"font-bold",children:c.code})]}),x&&s.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 font-medium text-sm",children:"???? Download QR Code"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:n,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n,children:n?"Creating...":"Create Rack"})]})]})]})}):null}function bse({isOpen:e,onClose:t,onSuccess:r,rack:n}){const[a,i]=A.useState(!1),[o,c]=A.useState([]),[d,u]=A.useState({code:"",location:"",rackType:"STORAGE",categoryId:"",companyProfileId:"",capacityTotal:100,status:"ACTIVE",length:"",width:"",height:"",dimensionUnit:"METERS"}),[f,p]=A.useState(""),[b,x]=A.useState(""),[N,j]=A.useState(""),[w,C]=A.useState(null),P=z=>z?z.startsWith("http")||z.startsWith("/")?z:`/uploads/${z}`:"";A.useEffect(()=>{e&&k()},[e]);const k=async()=>{try{const M=(await vd.listProfiles()||[]).filter(W=>W.isActive!==!1).map(W=>({id:W.id,name:W.name,description:W.description,logo:W.logo,contractStatus:W.contractStatus,contactPerson:W.contactPerson,contactPhone:W.contactPhone,color:"#5B21B6",icon:"????"}));c(M)}catch(z){console.error("Failed to load categories:",z)}};A.useEffect(()=>{e&&n&&(u({code:n.code||"",location:n.location||"",rackType:n.rackType||"STORAGE",categoryId:n.companyProfileId||n.categoryId||"",companyProfileId:n.companyProfileId||"",capacityTotal:n.capacityTotal||100,status:n.status||"ACTIVE",length:n.length||"",width:n.width||"",height:n.height||"",dimensionUnit:n.dimensionUnit||"METERS"}),n.companyProfile?C({id:n.companyProfile.id,name:n.companyProfile.name,logo:n.companyProfile.logo,description:n.companyProfile.description,contractStatus:n.companyProfile.contractStatus,contactPerson:n.companyProfile.contactPerson,contactPhone:n.companyProfile.contactPhone,color:"#5B21B6",icon:"????"}):n.category&&C(n.category),n.code&&O(n.code),x(""),j(""))},[e,n]);const _=z=>{const{name:M,value:W}=z.target;if(u(J=>{const K={...J,[M]:M==="capacityTotal"?Number(W):W};return M==="categoryId"&&(K.companyProfileId=W),K}),M==="categoryId"){const J=o.find(K=>K.id===W);C(J||null)}},O=async z=>{try{const M=`RACK:${z}`,W=await Yc.toDataURL(M,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});p(W)}catch(M){console.error("QR generation error:",M)}},$=z=>{const M=z.target.value.toUpperCase();u(W=>({...W,code:M})),M.length>0?O(M):p("")},F=()=>{if(!f)return;const z=document.createElement("a");z.href=f,z.download=`rack-${d.code}-qr.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z)},U=async z=>{z.preventDefault(),i(!0),x(""),j("");try{if(!d.code||!d.location)throw new Error("Rack code and location are required");if(d.capacityTotal<=0)throw new Error("Capacity must be greater than 0");if(d.capacityTotal<n.capacityUsed)throw new Error(`Cannot reduce capacity below current usage (${n.capacityUsed})`);const{categoryId:M,companyProfileId:W,length:J,width:K,height:V,...me}=d,se={...me,length:J?parseFloat(J):void 0,width:K?parseFloat(K):void 0,height:V?parseFloat(V):void 0,categoryId:void 0,companyProfileId:d.companyProfileId||d.categoryId||void 0};await Bi.update(n.id,se),j("Rack updated successfully! ???"),setTimeout(()=>{r(),t()},1500)}catch(M){x(M.message||"Failed to update rack")}finally{i(!1)}};if(!e||!n)return null;const R=Math.round(n.capacityUsed/n.capacityTotal*100);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-purple-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"?????? Edit Rack"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:a,children:"??"})]}),s.jsxs("form",{onSubmit:U,className:"p-6 space-y-6",children:[b&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:b}),N&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:N}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Current Usage"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-blue-700",children:[n.capacityUsed," / ",n.capacityTotal," items (",R,"%)"]}),s.jsx("div",{className:"w-32 bg-blue-200 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${R}%`}})})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Code ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"code",value:d.code,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase",placeholder:"A1, B2, C3...",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use format like A1, A2, B1, etc."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"location",value:d.location,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Zone A, Floor 1, Section North...",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rack Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"rackType",value:d.rackType,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"STORAGE",children:"Storage"}),s.jsx("option",{value:"MATERIALS",children:"Materials"}),s.jsx("option",{value:"EQUIPMENT",children:"Equipment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category / Company"}),s.jsxs("select",{name:"categoryId",value:d.categoryId,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Category / Company..."}),o.map(z=>s.jsxs("option",{value:z.id,children:["???? ",z.name]},z.id))]}),w&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[w.logo&&s.jsx("img",{src:P(w.logo),alt:`${w.name} logo`,className:"h-10 w-10 rounded-md object-contain bg-white border border-blue-200"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900",children:w.name}),w.contractStatus&&s.jsx("p",{className:"text-blue-600 text-xs uppercase font-semibold",children:w.contractStatus})]})]}),w.description&&s.jsx("p",{className:"text-blue-700 text-xs mt-1",children:w.description}),(w.contactPerson||w.contactPhone)&&s.jsxs("p",{className:"text-blue-700 text-xs mt-1",children:[w.contactPerson&&`Contact: ${w.contactPerson}`,w.contactPerson&&w.contactPhone&&" ?? ",w.contactPhone&&`Phone: ${w.contactPhone}`]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which company/category this rack belongs to"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Capacity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",name:"capacityTotal",value:d.capacityTotal,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"100",min:n.capacityUsed,required:!0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Min: ",n.capacityUsed," (current usage)"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:d.status,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),s.jsx("option",{value:"RESERVED",children:"Reserved"})]})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"???? Dimensions (Size Information)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Length"}),s.jsx("input",{type:"number",name:"length",value:d.length,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.0",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Width"}),s.jsx("input",{type:"number",name:"width",value:d.width,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.0",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height"}),s.jsx("input",{type:"number",name:"height",value:d.height,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.0",step:"0.01",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),s.jsxs("select",{name:"dimensionUnit",value:d.dimensionUnit,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[s.jsx("option",{value:"METERS",children:"Meters"}),s.jsx("option",{value:"FEET",children:"Feet"})]})]})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"???? Optional: Enter rack physical dimensions for detailed tracking"})]}),f&&s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"QR Code"}),s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx("img",{src:f,alt:"QR Code",className:"border-2 border-gray-300 rounded p-2"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Scan this code to identify rack: ",s.jsx("span",{className:"font-bold",children:d.code})]}),s.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 font-medium text-sm",children:"???? Download QR Code"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:a,children:a?"Updating...":"Update Rack"})]})]})]})})}const vse=({shipment:e,boxCount:t,photos:r})=>{var i;const[n,a]=A.useState(!1);return s.jsxs("div",{className:"bg-gradient-to-r from-white to-blue-50 border-2 border-blue-200 rounded-lg p-4 hover:border-blue-400 hover:shadow-md transition-all",children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["#",(e==null?void 0:e.referenceId)||"N/A"]}),s.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${(e==null?void 0:e.status)==="IN_WAREHOUSE"||(e==null?void 0:e.status)==="PARTIAL"?"bg-green-100 text-green-800":(e==null?void 0:e.status)==="RELEASED"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:(e==null?void 0:e.status)||"N/A"})]}),s.jsxs("p",{className:"text-xs text-gray-700 font-semibold",children:[" ",((i=e==null?void 0:e.companyProfile)==null?void 0:i.name)||(e==null?void 0:e.clientName)||"Unknown Company"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Boxes: ",s.jsx("span",{className:"font-semibold text-gray-700",children:t})]})]})}),r.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[s.jsxs("button",{onClick:()=>a(!n),className:"w-full flex items-center justify-between text-xs font-semibold text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[" Photos (",r.length,")"]}),s.jsx("span",{className:"text-lg",children:n?"":""})]}),n&&s.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:r.map((o,c)=>s.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"group relative block aspect-square rounded-lg overflow-hidden border-2 border-blue-200 hover:border-blue-500 transition-all",children:[s.jsx("img",{src:o,alt:`Photo ${c+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xl opacity-0 group-hover:opacity-100",children:""})})]},c))})]})]})},wse=()=>{var me;const[e,t]=A.useState("all"),[r,n]=A.useState("all"),[a,i]=A.useState([]),[o,c]=A.useState(!0),[d,u]=A.useState(!1),[f,p]=A.useState(!1),[b,x]=A.useState(null),[N,j]=A.useState(!1),[w,C]=A.useState(null),[P,k]=A.useState(null),[_,O]=A.useState(!1),[$,F]=A.useState(!1),U=A.useRef({}),R=se=>se?se.startsWith("http")||se.startsWith("/")?se:`/uploads/${se}`:"";A.useEffect(()=>{z()},[]);const z=async()=>{try{c(!0);const se=await Bi.getAll();i(se.racks||[])}catch(se){console.error("Load racks error:",se)}finally{c(!1)}},M=a.filter(se=>{var ve,xe,ke,Re,be,Te;const oe=e==="all"||se.code.startsWith(e),ye=r==null?void 0:r.toLowerCase(),we=(xe=(ve=se.category)==null?void 0:ve.name)==null?void 0:xe.toLowerCase(),te=typeof se.category=="string"?se.category.toLowerCase():void 0,G=(Re=(ke=se.companyProfile)==null?void 0:ke.name)==null?void 0:Re.toLowerCase(),Q=(Te=(be=se.companyProfile)==null?void 0:be.id)==null?void 0:Te.toLowerCase();return oe&&(r==="all"||ye===we||ye===te||ye===G||ye===Q)}),W=se=>se>=90?"bg-red-500":se>=75?"bg-yellow-500":"bg-green-500",J=async se=>{j(!0),O(!0);try{const oe=await Bi.getById(se.id);C(oe.rack)}catch(oe){console.error("Failed to load rack details:",oe),C(se)}finally{O(!1)}},K=async()=>{F(!0),setTimeout(async()=>{for(const se of a){const oe=U.current[se.id];if(oe)try{await Yc.toCanvas(oe,`RACK_${se.code}`,{width:200,margin:1})}catch(ye){console.error(`Failed to generate QR for ${se.code}:`,ye)}}},100)},V=()=>{const se=window.open("","_blank");if(!se)return;const oe=a.map(ye=>{const we=U.current[ye.id];if(!we)return"";const te=we.toDataURL();return`
        <div class="qr-item">
          <h3>${ye.code}</h3>
          <p class="location">${ye.location||"Warehouse"}</p>
          <img src="${te}" alt="QR Code" />
          <p class="code">RACK_${ye.code}</p>
        </div>
      `}).join("");se.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>All Rack QR Codes</title>
          <style>
            body {
              margin: 0;
              padding: 20px;
              font-family: Arial, sans-serif;
            }
            .grid {
              display: grid;
              grid-template-columns: repeat(3, 1fr);
              gap: 20px;
            }
            .qr-item {
              text-align: center;
              border: 2px solid #000;
              padding: 15px;
              page-break-inside: avoid;
            }
            h3 {
              margin: 0 0 5px 0;
              font-size: 24px;
            }
            .location {
              margin: 5px 0;
              font-size: 14px;
              color: #666;
            }
            img {
              width: 100%;
              max-width: 200px;
              margin: 10px 0;
            }
            .code {
              font-size: 16px;
              font-weight: bold;
              font-family: 'Courier New', monospace;
              margin: 5px 0 0 0;
            }
            @media print {
              body { padding: 10px; }
              .grid { gap: 15px; }
            }
          </style>
        </head>
        <body>
          <h1 style="text-align: center; margin-bottom: 20px;">Warehouse Rack QR Codes</h1>
          <div class="grid">
            ${oe}
          </div>
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
              }, 500);
            };
          <\/script>
        </body>
      </html>
    `),se.document.close()};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Warehouse Racks"}),s.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-green-500 to-blue-500 text-white text-xs font-bold rounded-full animate-pulse",children:" UPDATED"})]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage warehouse storage racks - Now with enhanced UI!"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:K,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[s.jsx(ng,{className:"h-5 w-5 mr-2"}),"Bulk QR Codes"]}),s.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx(Mc,{className:"h-5 w-5 mr-2"}),"Add Rack"]})]})]}),o?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"})}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Racks"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:a.length})]}),s.jsx(Wo,{className:"h-10 w-10 text-primary-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Capacity"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:a.reduce((se,oe)=>se+oe.capacityTotal,0)})]}),s.jsx(s0,{className:"h-10 w-10 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Occupied"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:a.reduce((se,oe)=>se+oe.capacityUsed,0)})]}),s.jsxs("div",{className:"text-green-600 text-sm font-medium",children:[a.length>0?Math.round(a.reduce((se,oe)=>se+oe.capacityUsed,0)/a.reduce((se,oe)=>se+oe.capacityTotal,0)*100):0,"%"]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Available"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:a.reduce((se,oe)=>se+(oe.capacityTotal-oe.capacityUsed),0)})]}),s.jsxs("div",{className:"text-blue-600 text-sm font-medium",children:[a.length>0?Math.round(a.reduce((se,oe)=>se+(oe.capacityTotal-oe.capacityUsed),0)/a.reduce((se,oe)=>se+oe.capacityTotal,0)*100):0,"%"]})]})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-semibold text-gray-500 mb-2 flex items-center gap-1",children:[s.jsx(ag,{className:"h-4 w-4"})," SECTION"]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Sections"}),["A","B","C"].map(se=>s.jsxs("button",{onClick:()=>t(se),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e===se?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Section ",se]},se))]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-semibold text-gray-500 mb-2 flex items-center gap-1",children:[s.jsx(Mb,{className:"h-4 w-4"})," CATEGORY"]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Categories"}),s.jsx("button",{onClick:()=>n("DIOR"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="DIOR"?"bg-purple-600 text-white":"bg-purple-50 text-purple-700 hover:bg-purple-100"}`,children:"Dior"}),s.jsx("button",{onClick:()=>n("COMPANY_MATERIAL"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="COMPANY_MATERIAL"?"bg-blue-600 text-white":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:"Company Material"}),s.jsx("button",{onClick:()=>n("JAZEERA"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="JAZEERA"?"bg-green-600 text-white":"bg-green-50 text-green-700 hover:bg-green-100"}`,children:"Jazeera"}),s.jsx("button",{onClick:()=>n("OTHERS"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="OTHERS"?"bg-gray-600 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:"Others"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(Cd,{className:"h-5 w-5"})," Warehouse Layout"]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),s.jsx("span",{className:"text-gray-600",children:"0-50%"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),s.jsx("span",{className:"text-gray-600",children:"50-90%"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),s.jsx("span",{className:"text-gray-600",children:"90-100%"})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:M.map(se=>{const oe=se.capacityTotal&&se.capacityTotal>0?se.capacityTotal:1,ye=typeof se.utilization=="number"?se.utilization:Math.round(se.capacityUsed/oe*100),we=new Set;se.boxes&&Array.isArray(se.boxes)&&se.boxes.forEach(Q=>{Q.shipmentId&&we.add(Q.shipmentId)});const te=we.size,G=Math.max(oe-se.capacityUsed,0);return s.jsxs("div",{onClick:()=>J(se),className:"group relative bg-gradient-to-br from-white to-gray-50 border rounded-xl p-3 hover:shadow-lg hover:scale-[1.02] transition-all duration-200 cursor-pointer",style:{borderColor:ye>=90?"#ef4444":ye>=50?"#eab308":"#10b981"},children:[s.jsx("div",{className:"absolute -top-2 -right-2",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold shadow ${se.status==="ACTIVE"?ye>=100?"bg-red-500 text-white":ye>=90?"bg-yellow-500 text-white":"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:se.status==="ACTIVE"?ye>=100?"FULL":ye>=90?"BUSY":"OK":"OFF"})}),s.jsx("button",{onClick:Q=>{Q.stopPropagation(),x(se),p(!0)},className:"absolute top-2 left-2 p-1.5 bg-white rounded-lg shadow opacity-0 group-hover:opacity-100 transition-opacity hover:bg-blue-50",title:"Edit Rack",children:s.jsx(Qd,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{className:"mb-4 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:s.jsx(Mi,{className:"h-6 w-6 text-primary-600"})}),s.jsx("div",{className:"flex-1",children:s.jsx("span",{className:"text-2xl font-bold text-gray-900 leading-tight",children:se.code})})]}),s.jsx("p",{className:"text-sm text-gray-600 font-medium",children:se.location||"N/A"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Capacity (pallets)"}),s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[se.capacityUsed,"/",se.capacityTotal]})]}),s.jsxs("div",{className:"relative w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:[s.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${W(ye)}`,style:{width:`${Math.min(ye,100)}%`}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:"text-xs font-bold text-white drop-shadow-md",children:[ye,"%"]})})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t-2 border-gray-200",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Available"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:G})]}),s.jsx("div",{className:"h-10 w-px bg-gray-300"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Shipments"}),s.jsx("p",{className:"text-xl font-bold text-blue-600",children:te})]})]})]})]},se.id)})}),M.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Wo,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No racks found"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try selecting a different section"})]})]}),s.jsx(yse,{isOpen:d,onClose:()=>u(!1),onSuccess:z}),s.jsx(bse,{isOpen:f,onClose:()=>p(!1),rack:b,onSuccess:z}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-blue-600 text-white px-6 py-5 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[s.jsx(Mi,{className:"h-8 w-8"}),"Rack ",(w==null?void 0:w.code)||"..."]}),s.jsxs("p",{className:"text-sm text-blue-100 mt-1 flex items-center gap-1",children:[s.jsx(ag,{className:"h-4 w-4"})," ",(w==null?void 0:w.location)||"Loading..."]})]}),s.jsx("button",{onClick:()=>j(!1),className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/10 transition",children:s.jsx($i,{className:"h-7 w-7"})})]}),_?s.jsx("div",{className:"flex-1 flex items-center justify-center py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Loading rack details..."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-b",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium mb-1",children:"Status"}),s.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-bold ${(w==null?void 0:w.status)==="ACTIVE"?w.capacityUsed>=w.capacityTotal?"bg-red-100 text-red-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:(w==null?void 0:w.status)==="ACTIVE"?w.capacityUsed>=w.capacityTotal?s.jsxs(s.Fragment,{children:[s.jsx(NF,{className:"h-4 w-4"})," FULL"]}):s.jsxs(s.Fragment,{children:[s.jsx(Gn,{className:"h-4 w-4"})," ACTIVE"]}):"INACTIVE"})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium mb-1",children:"Pallet Capacity"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[w==null?void 0:w.capacityUsed,"/",w==null?void 0:w.capacityTotal]})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium mb-1",children:"Available Pallets"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:Math.max(((w==null?void 0:w.capacityTotal)||0)-((w==null?void 0:w.capacityUsed)||0),0)})]}),s.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-500 font-medium mb-1",children:"Utilization"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[w&&w.capacityTotal>0?Math.round(w.capacityUsed/w.capacityTotal*100):0,"%"]})]})]})}),s.jsx("div",{className:"px-6 pt-4 pb-2 bg-white border-b",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[(w==null?void 0:w.companyProfile)&&s.jsxs("div",{className:"flex items-center gap-3 bg-purple-50 border border-purple-200 rounded-lg p-4",children:[w.companyProfile.logo&&s.jsx("img",{src:R(w.companyProfile.logo),alt:`${w.companyProfile.name} logo`,className:"h-16 w-16 rounded-lg object-contain bg-white border border-purple-200"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs text-purple-600 font-semibold uppercase mb-1",children:"Company / Profile"}),s.jsx("p",{className:"text-lg font-bold text-purple-900 truncate cursor-pointer underline-offset-2 hover:underline",title:"Filter boxes by this company",onClick:()=>k(se=>se===w.companyProfile.name?null:w.companyProfile.name),children:w.companyProfile.name}),w.companyProfile.contractStatus&&s.jsx("p",{className:"text-xs font-semibold text-purple-700 uppercase",children:w.companyProfile.contractStatus}),(w.companyProfile.contactPerson||w.companyProfile.contactPhone)&&s.jsxs("p",{className:"text-xs text-purple-700 mt-1",children:[w.companyProfile.contactPerson&&`Contact: ${w.companyProfile.contactPerson}`,w.companyProfile.contactPerson&&w.companyProfile.contactPhone&&" ?? ",w.companyProfile.contactPhone&&`Phone: ${w.companyProfile.contactPhone}`]}),w.companyProfile.description&&s.jsx("p",{className:"text-xs text-purple-700 mt-2 line-clamp-3",children:w.companyProfile.description})]})]}),(w==null?void 0:w.category)&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-gray-500 font-medium mb-2 flex items-center gap-1",children:[s.jsx(Mb,{className:"h-4 w-4"})," Category"]}),s.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold ${w.category==="DIOR"?"bg-purple-100 text-purple-800 border border-purple-300":w.category==="COMPANY_MATERIAL"?"bg-blue-100 text-blue-800 border border-blue-300":w.category==="JAZEERA"?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-800 border border-gray-300"}`,children:[w.category==="DIOR"&&"Dior",w.category==="COMPANY_MATERIAL"&&"Company Material",w.category==="JAZEERA"&&"Jazeera",w.category==="OTHERS"&&"Others"]})]}),((w==null?void 0:w.length)||(w==null?void 0:w.width)||(w==null?void 0:w.height))&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-gray-500 font-medium mb-2 flex items-center gap-1",children:[s.jsx(XF,{className:"h-4 w-4"})," Dimensions"]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm font-mono bg-gray-50 px-4 py-2 rounded-lg border border-gray-200",children:[w.length&&s.jsxs("span",{className:"font-bold text-gray-900",children:["L: ",w.length]}),w.width&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:"??"}),s.jsxs("span",{className:"font-bold text-gray-900",children:["W: ",w.width]})]}),w.height&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:"??"}),s.jsxs("span",{className:"font-bold text-gray-900",children:["H: ",w.height]})]}),s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:w.dimensionUnit==="FEET"?"ft":"m"})]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(VF,{className:"h-5 w-5"})," Stored Shipments (",((me=w==null?void 0:w.boxes)==null?void 0:me.length)||0,")"]}),w!=null&&w.boxes&&w.boxes.length>0?s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:(()=>{const se=new Map;return w.boxes.filter(we=>{var G,Q,le;return P?(((Q=(G=we.shipment)==null?void 0:G.companyProfile)==null?void 0:Q.name)||((le=we.shipment)==null?void 0:le.clientName)||"")===P:!0}).forEach(we=>{let te=0;try{const G=we.pieceQR?JSON.parse(we.pieceQR):void 0;te=Number((G==null?void 0:G.palletNumber)||0)}catch{const G=/-PAL-(\d+)/.exec(we.qrCode||"");te=G?parseInt(G[1],10):0}se.has(te)||se.set(te,[]),se.get(te).push(we)}),Array.from(se.entries()).sort((we,te)=>we[0]===0?1:te[0]===0?-1:we[0]-te[0]).map(([we,te])=>s.jsxs("div",{children:[s.jsxs("div",{className:`flex items-center justify-between mb-2 ${we===0?"text-purple-800":"text-amber-800"}`,children:[s.jsxs("h4",{className:"text-sm font-bold ",children:[we===0?"Loose":`Pallet #${we}`," (",te.length," pcs)"]}),s.jsx("div",{className:`text-[10px] px-2 py-0.5 rounded-full border ${we===0?"border-dashed border-purple-400 text-purple-600":"border-amber-400 text-amber-600"}`,children:we===0?"LOOSE":"PALLET"})]}),s.jsx("div",{className:"space-y-3",children:(()=>{const G=new Map;return te.forEach(Q=>{var ve;const le=((ve=Q.shipment)==null?void 0:ve.id)||"unknown";G.has(le)||G.set(le,[]),G.get(le).push(Q)}),Array.from(G.values()).map((Q,le)=>{const xe=Q[0].shipment,ke=[];return Q.forEach(Re=>{if(Re.photos)try{const be=JSON.parse(Re.photos);Array.isArray(be)&&ke.push(...be)}catch(be){console.warn("Failed to parse box photos",be)}}),s.jsx(vse,{shipment:xe,boxCount:Q.length,photos:ke},`shipment-${le}`)})})()})]},`grp-${we}`))})()}):s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx("div",{className:"text-4xl mb-3",children:"????"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No shipments stored"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"This rack is empty"})]})]})}),P&&s.jsx("div",{className:"px-6 pb-4 -mt-2",children:s.jsx("button",{onClick:()=>k(null),className:"text-xs px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-full text-gray-700",children:"Clear company filter"})}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx(Lb,{className:"h-5 w-5 inline mr-1"}),"Click on any shipment for more details"]}),s.jsx("button",{onClick:()=>j(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-medium",children:"Close"})]})]})]})}),$&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-5 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[s.jsx(ng,{className:"h-8 w-8"}),"Bulk QR Codes - All Racks"]}),s.jsxs("p",{className:"text-sm text-purple-100 mt-1",children:[a.length," racks total"]})]}),s.jsx("button",{onClick:()=>F(!1),className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/10 transition",children:s.jsx($i,{className:"h-7 w-7"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(se=>s.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-4 text-center hover:border-purple-400 hover:shadow-lg transition-all",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:se.code}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:se.location||"Warehouse"}),s.jsx("canvas",{ref:oe=>{oe&&(U.current[se.id]=oe)},className:"mx-auto mb-3"}),s.jsxs("p",{className:"text-xs font-mono font-bold text-gray-600",children:["RACK_",se.code]})]},se.id))})}),s.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx(Lb,{className:"h-5 w-5 inline mr-1"}),"Print all QR codes at once"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>F(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-medium",children:"Close"}),s.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold shadow-lg",children:[s.jsx(Bc,{className:"h-5 w-5"}),"Print All QR Codes"]})]})]})]})})]})};function Nse({isOpen:e,onClose:t,onSuccess:r}){const[n,a]=A.useState(!1),[i,o]=A.useState({title:"",jobType:"LOCAL",clientName:"",clientPhone:"",fromAddress:"",toAddress:"",scheduledDate:"",status:"SCHEDULED"}),[c,d]=A.useState([]),[u,f]=A.useState({}),[p,b]=A.useState([]),[x,N]=A.useState([]),[j,w]=A.useState(""),[C,P]=A.useState("");A.useEffect(()=>{if(e){const F=new Date().toISOString().split("T")[0];o({title:"",jobType:"LOCAL",clientName:"",clientPhone:"",fromAddress:"",toAddress:"",scheduledDate:F,status:"SCHEDULED"}),w(""),P(""),N([]),_(),k(),f({})}},[e]);const k=async()=>{try{const F=await fetch("/api/materials",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(F.ok){const U=await F.json();b(U.filter(R=>R.totalQuantity>0))}}catch(F){console.error("Failed to load materials:",F)}},_=async()=>{try{const F=await fetch("/api/custom-fields?section=JOB",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(F.ok){const U=await F.json(),R=U.customFields||U,z=Array.isArray(R)?R.filter(W=>W.isActive):[];d(z);const M={};z.forEach(W=>{M[W.id]=""}),f(M)}}catch(F){console.error("Failed to load custom fields:",F)}},O=F=>{const{name:U,value:R}=F.target;o(z=>({...z,[U]:R}))},$=async F=>{F.preventDefault(),a(!0),w(""),P("");try{if(!i.title||!i.clientName||!i.clientPhone)throw new Error("Title, client name, and phone are required");if(!i.fromAddress)throw new Error("From address is required");if(!i.scheduledDate)throw new Error("Scheduled date is required");if(i.jobType==="INTERNATIONAL"&&!i.toAddress)throw new Error("To address is required for international moves");const U={jobCode:`JOB-${Date.now()}`,jobTitle:i.title,clientName:i.clientName,clientPhone:i.clientPhone,clientEmail:"",jobDate:new Date(i.scheduledDate).toISOString(),jobAddress:i.fromAddress,dropoffAddress:i.toAddress||null,teamLeaderId:null,driverName:null,vehicleNumber:null,notes:null,status:i.status},z=(await _f.create(U)).id;if(x.length>0){const M=x.filter(W=>W.materialId&&W.quantity>0);for(const W of M)try{await fetch("/api/materials/issue",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({jobId:z,materialId:W.materialId,quantity:W.quantity})})}catch(J){console.error("Failed to issue material:",J)}}if(c.length>0){const M=Object.entries(u).filter(([W,J])=>J!=="").map(([W,J])=>({customFieldId:W,fieldValue:J}));if(M.length>0)try{await fetch(`/api/custom-field-values/JOB/${z}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:M})})}catch(W){console.error("Failed to save custom field values:",W)}}P("Moving job created successfully! "),setTimeout(()=>{r(),t()},1500)}catch(U){w(U.message||"Failed to create moving job")}finally{a(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:" Create New Moving Job"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:n,children:""})]}),s.jsxs("form",{onSubmit:$,className:"p-6 space-y-6",children:[j&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:j}),C&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:C}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Job Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"title",value:i.title,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Office Relocation - ABC Company",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"jobType",value:i.jobType,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"LOCAL",children:"Local Move"}),s.jsx("option",{value:"INTERNATIONAL",children:"International Move"}),s.jsx("option",{value:"PACKING_ONLY",children:"Packing Only"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{name:"status",value:i.status,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),s.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),s.jsx("option",{value:"COMPLETED",children:"Completed"}),s.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Scheduled Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"scheduledDate",value:i.scheduledDate,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Client Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientName",value:i.clientName,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"clientPhone",value:i.clientPhone,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+965 1234 5678",required:!0})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Location Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["From Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"fromAddress",value:i.fromAddress,onChange:O,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full pickup address...",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["To Address ",i.jobType==="INTERNATIONAL"&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"toAddress",value:i.toAddress,onChange:O,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full delivery address...",required:i.jobType==="INTERNATIONAL"}),i.jobType==="PACKING_ONLY"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for packing-only jobs"})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:" Materials (Optional)"}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select materials needed for this job. Stock will be deducted automatically."}),s.jsxs("div",{className:"space-y-3",children:[x.map((F,U)=>{const R=p.find(z=>z.id===F.materialId);return s.jsxs("div",{className:"flex gap-3 items-center bg-gray-50 p-3 rounded",children:[s.jsxs("select",{value:F.materialId,onChange:z=>{const M=[...x];M[U].materialId=z.target.value,N(M)},className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[s.jsx("option",{value:"",children:"-- Select Material --"}),p.map(z=>s.jsxs("option",{value:z.id,children:[z.sku," - ",z.name," (Stock: ",z.totalQuantity," ",z.unit,")"]},z.id))]}),s.jsx("input",{type:"number",min:"1",max:(R==null?void 0:R.totalQuantity)||999,value:F.quantity,onChange:z=>{const M=[...x];M[U].quantity=parseInt(z.target.value)||0,N(M)},className:"w-24 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Qty"}),s.jsx("button",{type:"button",onClick:()=>{N(x.filter((z,M)=>M!==U))},className:"text-red-600 hover:text-red-800",children:""})]},U)}),s.jsx("button",{type:"button",onClick:()=>{N([...x,{materialId:"",quantity:1}])},className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ Add Material"})]})]}),c.length>0&&s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:" Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(F=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[F.fieldName,F.isRequired&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),F.fieldType==="TEXT"&&s.jsx("input",{type:"text",value:u[F.id]||"",onChange:U=>f(R=>({...R,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${F.fieldName.toLowerCase()}`}),F.fieldType==="NUMBER"&&s.jsx("input",{type:"number",value:u[F.id]||"",onChange:U=>f(R=>({...R,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${F.fieldName.toLowerCase()}`}),F.fieldType==="DATE"&&s.jsx("input",{type:"date",value:u[F.id]||"",onChange:U=>f(R=>({...R,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"}),F.fieldType==="DROPDOWN"&&F.fieldOptions&&s.jsxs("select",{value:u[F.id]||"",onChange:U=>f(R=>({...R,[F.id]:U.target.value})),required:F.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const U=JSON.parse(F.fieldOptions);return Array.isArray(U)?U.map(R=>s.jsx("option",{value:R,children:R},R)):[]}catch{return typeof F.fieldOptions=="string"?F.fieldOptions.split(",").map(U=>s.jsx("option",{value:U.trim(),children:U.trim()},U.trim())):[]}})()]}),F.fieldType==="CHECKBOX"&&s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:u[F.id]==="true",onChange:U=>f(R=>({...R,[F.id]:U.target.checked?"true":"false"})),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-2 focus:ring-green-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},F.id))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:n,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:n,children:n?"Creating...":"Create Job"})]})]})]})}):null}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jse=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cse=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),AA=e=>{const t=Cse(e);return t.charAt(0).toUpperCase()+t.slice(1)},qO=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Ase=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ese=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>A.createElement("svg",{ref:d,...Sse,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:qO("lucide",a),...!i&&!Ase(c)&&{"aria-hidden":"true"},...c},[...o.map(([u,f])=>A.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=(e,t)=>{const r=A.forwardRef(({className:n,...a},i)=>A.createElement(Ese,{ref:i,iconNode:t,className:qO(`lucide-${jse(AA(e))}`,`lucide-${e}`,n),...a}));return r.displayName=AA(e),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Uv=fr("activity",kse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Tse=fr("archive",Pse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],_se=fr("arrow-left-right",Ise);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],SA=fr("briefcase",Ose);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],EA=fr("building-2",Rse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],C3=fr("calendar",Dse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],_x=fr("camera",Lse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kA=fr("check",Mse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fse=fr("circle-alert",Bse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Use=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],PA=fr("dollar-sign",Use);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ox=fr("download",$se);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wse=fr("eye",zse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Hse=fr("file-text",qse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Gse=fr("file",Vse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kse=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],i2=fr("folder-tree",Kse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Yse=fr("funnel",Xse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zse=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Jse=fr("history",Zse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],TA=fr("lock",Qse);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eae=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tae=fr("mail",eae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],HO=fr("map-pin",rae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nae=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gd=fr("package",nae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],aae=fr("phone",sae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Np=fr("plus",iae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],VO=fr("printer",oae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cae=fr("refresh-cw",lae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Td=fr("save",dae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hae=fr("search",uae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],$v=fr("shield",fae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],pae=fr("shopping-cart",mae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rx=fr("trash-2",gae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],zv=fr("trending-down",xae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],IA=fr("trending-up",yae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zg=fr("triangle-alert",bae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],wae=fr("upload",vae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],jae=fr("user-plus",Nae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Jg=fr("users",Cae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],o2=fr("user",Aae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],di=fr("x",Sae);function GO({isOpen:e,onClose:t,jobId:r,onSuccess:n}){const[a,i]=A.useState([]),[o,c]=A.useState(new Map),[d,u]=A.useState(!1);A.useEffect(()=>{e&&r&&f()},[e,r]);const f=async()=>{try{const j=await fetch(`/api/materials/job-materials/${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(j.ok){const C=(await j.json()).filter(k=>!k.returns||k.returns.length===0);i(C);const P=new Map;C.forEach(k=>{P.set(k.id,{issueId:k.id,quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]})}),c(P)}}catch(j){console.error("Failed to load issued materials:",j)}},p=(j,w,C)=>{const P=new Map(o),k=P.get(j);k&&(P.set(j,{...k,[w]:C}),c(P))},b=(j,w)=>{if(w){const C=o.get(j);if(C){const P=[...C.photos,...Array.from(w)];p(j,"photos",P)}}},x=(j,w)=>{const C=o.get(j);if(C){const P=C.photos.filter((k,_)=>_!==w);p(j,"photos",P)}},N=async j=>{j.preventDefault(),u(!0);try{for(const[w,C]of o.entries()){const P=a.find(F=>F.id===w);if(!P)continue;console.log("Return Data:",{materialName:P.material.name,issued:P.quantity,quantityGood:C.quantityGood,quantityGoodType:typeof C.quantityGood,quantityDamaged:C.quantityDamaged,quantityDamagedType:typeof C.quantityDamaged});const k=Number(C.quantityGood)+Number(C.quantityDamaged);if(k>P.quantity){alert(`${P.material.name}: Total returned (${k}) cannot exceed issued quantity (${P.quantity})`),u(!1);return}const _=P.quantity-k;if(C.quantityDamaged>0&&!C.damageReason.trim()){alert(`${P.material.name}: Damage reason required for damaged items`),u(!1);return}if(C.quantityDamaged>0&&C.photos.length===0){alert(`${P.material.name}: Photo proof required for damaged items`),u(!1);return}const O=new FormData;O.append("jobId",r),O.append("issueId",w),O.append("quantityUsed",String(_)),O.append("quantityGood",String(Number(C.quantityGood))),O.append("quantityDamaged",String(Number(C.quantityDamaged))),O.append("damageReason",C.damageReason),O.append("notes",C.notes),C.photos.forEach(F=>{O.append("photos",F)});const $=await fetch("/api/materials/return",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:O});if(!$.ok){const F=await $.json();throw new Error(F.error||"Failed to record return")}}await n(),alert(" Material returns recorded successfully! Stock updated."),t()}catch(w){alert(` Error: ${w.message}`)}finally{u(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold",children:" Return Materials"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx(di,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:N,className:"p-6",children:[a.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No materials to return"}):s.jsx("div",{className:"space-y-6",children:a.map(j=>{const w=o.get(j.id);return w?s.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-bold text-lg",children:j.material.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[j.material.sku,"  Issued: ",s.jsxs("span",{className:"font-bold text-blue-600",children:[j.quantity," ",j.material.unit]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:" Returned (Good Condition) *"}),s.jsx("input",{type:"number",min:"0",max:j.quantity,value:w.quantityGood===0?"":w.quantityGood,onChange:C=>{const P=C.target.value===""?0:Number(C.target.value);p(j.id,"quantityGood",isNaN(P)?0:P)},className:"w-full border rounded px-3 py-2 text-lg font-semibold",placeholder:"Enter quantity"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Good items returned to stock"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:" Damaged (Lost)"}),s.jsx("input",{type:"number",min:"0",max:j.quantity,value:w.quantityDamaged===0?"":w.quantityDamaged,onChange:C=>{const P=C.target.value===""?0:Number(C.target.value);p(j.id,"quantityDamaged",isNaN(P)?0:P)},className:"w-full border rounded px-3 py-2 text-lg font-semibold",placeholder:"Enter quantity"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Damaged/broken items"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:[s.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[" Used/Consumed: ",s.jsxs("span",{className:"text-lg font-bold",children:[j.quantity-(w.quantityGood+w.quantityDamaged)," ",j.material.unit]})]}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Automatically calculated: Issued (",j.quantity,") - Returned (",w.quantityGood,") - Damaged (",w.quantityDamaged,")"]})]}),w.quantityDamaged>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Damage Reason *"}),s.jsx("textarea",{value:w.damageReason,onChange:C=>p(j.id,"damageReason",C.target.value),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Explain what happened...",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium mb-1",children:[s.jsx(_x,{className:"w-4 h-4 inline mr-1"}),"Damage Photos * (Required)"]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:C=>b(j.id,C.target.files),className:"w-full border rounded px-3 py-2"}),w.photos.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:w.photos.map((C,P)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:URL.createObjectURL(C),alt:`Damage ${P+1}`,className:"w-20 h-20 object-cover rounded"}),s.jsx("button",{type:"button",onClick:()=>x(j.id,P),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1",children:s.jsx(Rx,{className:"w-3 h-3"})})]},P))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),s.jsx("textarea",{value:w.notes,onChange:C=>p(j.id,"notes",C.target.value),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Any additional notes..."})]})]},j.id):null})}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:d||a.length===0,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400",children:d?"Saving...":"Record Returns"})]})]})]})}):null}function Eae({isOpen:e,onClose:t,onSuccess:r,job:n}){const[a,i]=A.useState(!1),[o,c]=A.useState({title:"",jobType:"LOCAL",clientName:"",clientPhone:"",fromAddress:"",toAddress:"",scheduledDate:"",status:"SCHEDULED"}),[d,u]=A.useState([]),[f,p]=A.useState({}),[b,x]=A.useState(!1),[N,j]=A.useState(""),[w,C]=A.useState("");A.useEffect(()=>{if(e&&n){const O=n.jobDate||n.scheduledDate?new Date(n.jobDate||n.scheduledDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];c({title:n.jobTitle||n.title||"",jobType:n.jobType||"LOCAL",clientName:n.clientName||"",clientPhone:n.clientPhone||"",fromAddress:n.jobAddress||n.fromAddress||"",toAddress:n.dropoffAddress||n.toAddress||"",scheduledDate:O,status:n.status||"PLANNED"}),j(""),C(""),P()}},[e,n]);const P=async()=>{if(n!=null&&n.id)try{const O=await fetch("/api/custom-fields?section=JOB",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(O.ok){const $=await O.json(),F=$.customFields||$,U=Array.isArray(F)?F.filter(z=>z.isActive):[];u(U);const R=await fetch(`/api/custom-field-values/JOB/${n.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(R.ok){const z=await R.json(),M=z.customFieldValues||z,W={};Array.isArray(M)&&M.forEach(J=>{W[J.customFieldId]=J.fieldValue}),p(W)}}}catch(O){console.error("Failed to load custom fields:",O)}},k=O=>{const{name:$,value:F}=O.target;c(U=>({...U,[$]:F}))},_=async O=>{O.preventDefault(),i(!0),j(""),C("");try{if(!o.title||!o.clientName||!o.clientPhone)throw new Error("Title, client name, and phone are required");if(!o.fromAddress)throw new Error("From address is required");if(!o.scheduledDate)throw new Error("Scheduled date is required");if(o.jobType==="INTERNATIONAL"&&!o.toAddress)throw new Error("To address is required for international moves");const $={jobTitle:o.title,clientName:o.clientName,clientPhone:o.clientPhone,jobDate:new Date(o.scheduledDate).toISOString(),jobAddress:o.fromAddress,dropoffAddress:o.toAddress||null,status:o.status};if(await _f.update(n.id,$),d.length>0){const F=Object.entries(f).filter(([U,R])=>R!=="").map(([U,R])=>({customFieldId:U,fieldValue:R}));if(F.length>0)try{await fetch(`/api/custom-field-values/JOB/${n.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:F})})}catch(U){console.error("Failed to save custom field values:",U)}}C("Moving job updated successfully! "),setTimeout(()=>{r(),t()},1500)}catch($){j($.message||"Failed to update moving job")}finally{i(!1)}};return!e||!n?null:s.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-green-600 text-white px-6 py-4 rounded-t-lg flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:" Edit Moving Job"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",disabled:a,children:""})]}),s.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[N&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:N}),w&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:w}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Job Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"title",value:o.title,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Office Relocation - ABC Company",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Job Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"jobType",value:o.jobType,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"LOCAL",children:"Local Move"}),s.jsx("option",{value:"INTERNATIONAL",children:"International Move"}),s.jsx("option",{value:"PACKING_ONLY",children:"Packing Only"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"status",value:o.status,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"PLANNED",children:"Planned"}),s.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),s.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),s.jsx("option",{value:"CANCELLED",children:"Cancelled"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Use "Complete Job" button to finish job and return materials'})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Scheduled Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",name:"scheduledDate",value:o.scheduledDate,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Client Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Client Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"clientName",value:o.clientName,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"John Doe",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",name:"clientPhone",value:o.clientPhone,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+965 1234 5678",required:!0})]})]})]}),s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Location Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["From Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"fromAddress",value:o.fromAddress,onChange:k,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full pickup address...",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["To Address ",o.jobType==="INTERNATIONAL"&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"toAddress",value:o.toAddress,onChange:k,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Full delivery address...",required:o.jobType==="INTERNATIONAL"}),o.jobType==="PACKING_ONLY"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for packing-only jobs"})]})]})]}),d.length>0&&s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:" Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(O=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[O.fieldName,O.isRequired&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),O.fieldType==="TEXT"&&s.jsx("input",{type:"text",value:f[O.id]||"",onChange:$=>p(F=>({...F,[O.id]:$.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${O.fieldName.toLowerCase()}`}),O.fieldType==="NUMBER"&&s.jsx("input",{type:"number",value:f[O.id]||"",onChange:$=>p(F=>({...F,[O.id]:$.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:`Enter ${O.fieldName.toLowerCase()}`}),O.fieldType==="DATE"&&s.jsx("input",{type:"date",value:f[O.id]||"",onChange:$=>p(F=>({...F,[O.id]:$.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent"}),O.fieldType==="DROPDOWN"&&O.fieldOptions&&s.jsxs("select",{value:f[O.id]||"",onChange:$=>p(F=>({...F,[O.id]:$.target.value})),required:O.isRequired,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const $=JSON.parse(O.fieldOptions);return Array.isArray($)?$.map(F=>s.jsx("option",{value:F,children:F},F)):[]}catch{return typeof O.fieldOptions=="string"?O.fieldOptions.split(",").map($=>s.jsx("option",{value:$.trim(),children:$.trim()},$.trim())):[]}})()]}),O.fieldType==="CHECKBOX"&&s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:f[O.id]==="true",onChange:$=>p(F=>({...F,[O.id]:$.target.checked?"true":"false"})),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-2 focus:ring-green-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},O.id))})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 font-medium",disabled:a,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:a,children:a?"Updating...":"Update Job"})]})]})]}),s.jsx(GO,{isOpen:b,onClose:()=>{x(!1),r(),t()},jobId:(n==null?void 0:n.id)||"",onSuccess:()=>{x(!1),r(),t()}})]})}const kae=({jobId:e,jobStatus:t,onUpdate:r})=>{const[n,a]=A.useState("issued"),[i,o]=A.useState([]),[c,d]=A.useState([]),[u,f]=A.useState([]),[p,b]=A.useState(!1),[x,N]=A.useState({materialId:"",quantity:0,rackId:"",notes:""}),[j,w]=A.useState(!1),[C,P]=A.useState(null),[k,_]=A.useState({issueId:"",quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]}),[O,$]=A.useState(!1);A.useEffect(()=>{F()},[e]);const F=async()=>{const me={Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"};try{const oe=await(await fetch("/api/materials",{headers:me})).json();o(oe);const we=await(await fetch("/api/materials/available-racks",{headers:me})).json();d(we);const G=await(await fetch(`/api/materials/job-materials/${e}`,{headers:me})).json();f(G)}catch(se){console.error("Failed to load data:",se)}},U=async V=>{V.preventDefault(),$(!0);const me=localStorage.getItem("authToken");try{const se=await fetch("/api/materials/issue",{method:"POST",headers:{Authorization:`Bearer ${me}`,"Content-Type":"application/json"},body:JSON.stringify({jobId:e,materialId:x.materialId,quantity:x.quantity,rackId:x.rackId||null,notes:x.notes})});if(se.ok)alert("Material issued successfully! Stock updated."),b(!1),N({materialId:"",quantity:0,rackId:"",notes:""}),F(),r==null||r();else{const oe=await se.json();alert(`Failed to issue material: ${oe.error}`)}}catch(se){console.error("Failed to issue material:",se),alert("Failed to issue material")}finally{$(!1)}},R=async V=>{V.preventDefault(),$(!0);const me=localStorage.getItem("authToken"),se=new FormData;se.append("jobId",e),se.append("issueId",k.issueId),se.append("quantityUsed",k.quantityUsed.toString()),se.append("quantityGood",k.quantityGood.toString()),se.append("quantityDamaged",k.quantityDamaged.toString()),se.append("damageReason",k.damageReason),se.append("notes",k.notes),k.photos.forEach(oe=>{se.append("photos",oe)});try{const oe=await fetch("/api/materials/return",{method:"POST",headers:{Authorization:`Bearer ${me}`},body:se});if(oe.ok)alert("Material return recorded! Stock updated."),w(!1),_({issueId:"",quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]}),P(null),F(),r==null||r();else{const ye=await oe.json();alert(`Failed to record return: ${ye.error}`)}}catch(oe){console.error("Failed to record return:",oe),alert("Failed to record material return")}finally{$(!1)}},z=V=>{if(V.target.files){const me=Array.from(V.target.files);_({...k,photos:[...k.photos,...me]})}},M=V=>{const me=k.photos.filter((se,oe)=>oe!==V);_({...k,photos:me})},W=V=>{P(V),_({issueId:V.id,quantityUsed:0,quantityGood:0,quantityDamaged:0,damageReason:"",notes:"",photos:[]}),w(!0)},J=()=>u.reduce((V,me)=>V+me.totalCost,0),K=()=>u.filter(V=>!V.returns||V.returns.length===0).length;return s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(Gd,{className:"w-6 h-6"}),"Job Materials"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track materials issued and returned for this job"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Cost"}),s.jsxs("p",{className:"text-xl font-bold",children:[J().toFixed(2)," KWD"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Pending Returns"}),s.jsx("p",{className:"text-xl font-bold text-orange-600",children:K()})]})]})]}),s.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[s.jsxs("button",{onClick:()=>a("issued"),className:`px-4 py-2 font-medium ${n==="issued"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,children:["Issued Materials (",u.length,")"]}),s.jsx("button",{onClick:()=>a("return"),className:`px-4 py-2 font-medium ${n==="return"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,children:"Returns & Damages"})]}),n==="issued"&&s.jsxs("div",{children:[t!=="COMPLETED"&&t!=="CANCELLED"&&s.jsxs("button",{onClick:()=>b(!0),className:"mb-4 flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:[s.jsx(Np,{className:"w-4 h-4"}),"Issue Material"]}),p&&s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Issue Material to Job"}),s.jsx("button",{onClick:()=>b(!1),children:s.jsx(di,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:U,className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material *"}),s.jsxs("select",{required:!0,value:x.materialId,onChange:V=>N({...x,materialId:V.target.value}),className:"w-full border rounded px-3 py-2",children:[s.jsx("option",{value:"",children:"-- Select Material --"}),i.map(V=>s.jsxs("option",{value:V.id,children:[V.sku," - ",V.name," (Stock: ",V.totalQuantity," ",V.unit,")"]},V.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity *"}),s.jsx("input",{type:"number",required:!0,min:"1",value:x.quantity,onChange:V=>N({...x,quantity:V.target.value===""?0:parseInt(V.target.value)||0}),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Storage Rack (Optional)"}),s.jsxs("select",{value:x.rackId,onChange:V=>N({...x,rackId:V.target.value}),className:"w-full border rounded px-3 py-2",children:[s.jsx("option",{value:"",children:"-- No Specific Rack --"}),c.map(V=>s.jsxs("option",{value:V.id,children:[V.code," - ",V.location]},V.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),s.jsx("input",{type:"text",value:x.notes,onChange:V=>N({...x,notes:V.target.value}),className:"w-full border rounded px-3 py-2",placeholder:"Any special notes..."})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{type:"submit",disabled:O,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[s.jsx(Td,{className:"w-4 h-4"}),O?"Issuing...":"Issue Material"]})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Cost"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rack"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(V=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:V.material.name}),s.jsx("p",{className:"text-sm text-gray-500",children:V.material.sku})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[V.quantity," ",V.material.unit]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[V.unitCost.toFixed(2)," KWD"]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap font-bold",children:[V.totalCost.toFixed(2)," KWD"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V.rack?`${V.rack.code} - ${V.rack.location}`:"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V.returns&&V.returns.length>0?s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Returned"}):s.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-800",children:"Pending Return"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(!V.returns||V.returns.length===0)&&t==="COMPLETED"&&s.jsxs("button",{onClick:()=>W(V),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[s.jsx(_se,{className:"w-4 h-4"}),"Record Return"]})})]},V.id))})]})})]}),j&&C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Record Material Return"}),s.jsx("button",{onClick:()=>w(!1),children:s.jsx(di,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded mb-4",children:[s.jsx("p",{className:"font-medium",children:C.material.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Issued Quantity: ",C.quantity," ",C.material.unit]})]}),s.jsxs("form",{onSubmit:R,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity Used *"}),s.jsx("input",{type:"number",required:!0,min:"0",max:C.quantity,value:k.quantityUsed,onChange:V=>{const me=parseInt(V.target.value)||0;_({...k,quantityUsed:me})},className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Good Condition *"}),s.jsx("input",{type:"number",required:!0,min:"0",value:k.quantityGood,onChange:V=>_({...k,quantityGood:parseInt(V.target.value)||0}),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Damaged *"}),s.jsx("input",{type:"number",required:!0,min:"0",value:k.quantityDamaged,onChange:V=>_({...k,quantityDamaged:parseInt(V.target.value)||0}),className:"w-full border rounded px-3 py-2"})]})]}),k.quantityDamaged>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Damage Reason *"}),s.jsx("textarea",{required:!0,value:k.damageReason,onChange:V=>_({...k,damageReason:V.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Explain what happened..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-1",children:[s.jsx(_x,{className:"w-4 h-4 inline mr-1"}),"Damage Photos (Required for damaged items)"]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:z,className:"w-full border rounded px-3 py-2"}),k.photos.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:k.photos.map((V,me)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:URL.createObjectURL(V),alt:`Damage ${me+1}`,className:"w-20 h-20 object-cover rounded"}),s.jsx("button",{type:"button",onClick:()=>M(me),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1",children:s.jsx(Rx,{className:"w-3 h-3"})})]},me))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),s.jsx("textarea",{value:k.notes,onChange:V=>_({...k,notes:V.target.value}),className:"w-full border rounded px-3 py-2",rows:2,placeholder:"Any additional notes..."})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:O,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[s.jsx(Td,{className:"w-4 h-4"}),O?"Saving...":"Record Return"]})]})]})]})}),n==="return"&&s.jsxs("div",{className:"space-y-4",children:[u.filter(V=>V.returns&&V.returns.length>0).map(V=>{var me;return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("div",{className:"flex justify-between items-start mb-2",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:V.material.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Issued: ",V.quantity," ",V.material.unit]})]})}),(me=V.returns)==null?void 0:me.map(se=>s.jsx("div",{className:"bg-gray-50 p-3 rounded mt-2",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Used"}),s.jsx("p",{className:"font-medium",children:se.quantityUsed})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Returned (Good)"}),s.jsx("p",{className:"font-medium text-green-600",children:se.quantityGood})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Damaged"}),s.jsx("p",{className:"font-medium text-red-600",children:se.quantityDamaged})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Date"}),s.jsx("p",{className:"font-medium",children:new Date(se.recordedAt).toLocaleDateString()})]})]})},se.id))]},V.id)}),u.filter(V=>V.returns&&V.returns.length>0).length===0&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No returns recorded yet"})]})]})},Pae=({open:e,onClose:t,jobId:r,materialIssueId:n,existingAssignment:a,onSuccess:i})=>{const[o,c]=A.useState(!1),[d,u]=A.useState([]),[f,p]=A.useState([]),[b,x]=A.useState(""),[N,j]=A.useState({jobId:r,materialIssueId:n,packerName:"",packerUserId:"",carpenterName:"",carpenterUserId:"",driverName:"",driverUserId:"",externalLaborCount:0,externalLaborNames:"",externalLaborCost:0,outsideForkliftNeeded:!1,forkliftOperatorName:"",forkliftCost:0,forkliftHours:0,notes:""});A.useEffect(()=>{if(e&&(w(),a&&(j(a),a.externalLaborNames)))try{const O=JSON.parse(a.externalLaborNames);p(Array.isArray(O)?O:[])}catch{p([])}},[e,a]);const w=async()=>{try{const O=await fetch("/api/staff-assignments/available-staff",{headers:{Authorization:"Bearer "}});if(O.ok){const $=await O.json();u($)}}catch(O){console.error("Failed to fetch staff:",O)}},C=(O,$)=>{const F=d.find(U=>U.id===$);F&&j({...N,[`${O}Name`]:F.name,[`${O}UserId`]:F.id})},P=()=>{b.trim()&&(p([...f,b.trim()]),x(""))},k=O=>{p(f.filter(($,F)=>F!==O))},_=async O=>{O.preventDefault(),c(!0);try{const $={...N,externalLaborCount:f.length,externalLaborNames:JSON.stringify(f)},F=a!=null&&a.id?"/api/staff-assignments/":"/api/staff-assignments",U=a!=null&&a.id?"PUT":"POST";(await fetch(F,{method:U,headers:{"Content-Type":"application/json",Authorization:"Bearer "},body:JSON.stringify($)})).ok?(i==null||i(),t()):alert("Failed to save staff assignment")}catch($){console.error("Failed to save assignment:",$),alert("Error saving staff assignment")}finally{c(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4 flex justify-between items-center rounded-t-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jg,{className:"w-6 h-6"}),s.jsx("h2",{className:"text-xl font-bold",children:"Staff Assignment"})]}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 transition-colors",children:s.jsx(di,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-700 flex items-center gap-2",children:[s.jsx(Jg,{className:"w-5 h-5"}),"Internal Staff"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Packer"}),s.jsxs("select",{value:N.packerUserId||"",onChange:O=>C("packer",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Packer"}),d.map(O=>s.jsxs("option",{value:O.id,children:[O.name," - ",O.position||"Staff"]},O.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carpenter"}),s.jsxs("select",{value:N.carpenterUserId||"",onChange:O=>C("carpenter",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Carpenter"}),d.map(O=>s.jsxs("option",{value:O.id,children:[O.name," - ",O.position||"Staff"]},O.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver"}),s.jsxs("select",{value:N.driverUserId||"",onChange:O=>C("driver",O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Driver"}),d.map(O=>s.jsxs("option",{value:O.id,children:[O.name," - ",O.position||"Staff"]},O.id))]})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"External Labor"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"text",value:b,onChange:O=>x(O.target.value),placeholder:"Enter labor name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",onKeyPress:O=>O.key==="Enter"&&(O.preventDefault(),P())}),s.jsxs("button",{type:"button",onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2",children:[s.jsx(jae,{className:"w-4 h-4"}),"Add"]})]}),f.length>0&&s.jsx("div",{className:"space-y-2",children:f.map((O,$)=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-md",children:[s.jsx("span",{className:"text-sm font-medium",children:O}),s.jsx("button",{type:"button",onClick:()=>k($),className:"text-red-600 hover:text-red-700",children:s.jsx(Rx,{className:"w-4 h-4"})})]},$))}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"External Labor Cost (KWD)"}),s.jsx("input",{type:"number",step:"0.001",value:N.externalLaborCost||"",onChange:O=>j({...N,externalLaborCost:parseFloat(O.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Forklift (Outside)"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"forklift",checked:N.outsideForkliftNeeded||!1,onChange:O=>j({...N,outsideForkliftNeeded:O.target.checked}),className:"w-4 h-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"forklift",className:"text-sm font-medium text-gray-700",children:"Outside Forklift Needed"})]}),N.outsideForkliftNeeded&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Operator Name"}),s.jsx("input",{type:"text",value:N.forkliftOperatorName||"",onChange:O=>j({...N,forkliftOperatorName:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours"}),s.jsx("input",{type:"number",step:"0.5",value:N.forkliftHours||"",onChange:O=>j({...N,forkliftHours:parseFloat(O.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost (KWD)"}),s.jsx("input",{type:"number",step:"0.001",value:N.forkliftCost||"",onChange:O=>j({...N,forkliftCost:parseFloat(O.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"})]})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:N.notes||"",onChange:O=>j({...N,notes:O.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500",placeholder:"Any additional notes..."})]}),s.jsxs("div",{className:"flex justify-end gap-3 border-t pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",disabled:o,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",disabled:o,children:o?"Saving...":a?"Update":"Assign Staff"})]})]})]})}):null},Tae=({isOpen:e,onClose:t,job:r,onUpdate:n})=>{const[a,i]=A.useState("details"),[o,c]=A.useState(!1);return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:r.title||r.jobTitle}),s.jsx("p",{className:"text-gray-600",children:r.jobCode})]}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx(di,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"border-b px-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>i("details"),className:`py-3 px-4 font-medium border-b-2 transition-colors ${a==="details"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:"Job Details"}),s.jsx("button",{onClick:()=>i("materials"),className:`py-3 px-4 font-medium border-b-2 transition-colors ${a==="materials"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:"Materials"}),s.jsx("button",{onClick:()=>i("staff"),className:`py-3 px-4 font-medium border-b-2 transition-colors ${a==="staff"?"border-green-600 text-green-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:"Staff Assignment"})]})}),s.jsxs("div",{className:"p-6",children:[a==="details"&&s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-3",children:"Client Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Name"}),s.jsx("p",{className:"font-medium",children:r.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),s.jsx("p",{className:"font-medium",children:r.clientPhone})]}),r.clientEmail&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("p",{className:"font-medium",children:r.clientEmail})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg mb-3",children:"Job Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("p",{className:"font-medium",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.status==="COMPLETED"?"bg-green-100 text-green-800":r.status==="IN_PROGRESS"?"bg-blue-100 text-blue-800":r.status==="CANCELLED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.status})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Job Date"}),s.jsx("p",{className:"font-medium",children:new Date(r.jobDate).toLocaleDateString()})]}),r.driverName&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Driver"}),s.jsx("p",{className:"font-medium",children:r.driverName})]}),r.vehicleNumber&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Vehicle"}),s.jsx("p",{className:"font-medium",children:r.vehicleNumber})]})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("h3",{className:"font-bold text-lg mb-3",children:"Addresses"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Pickup Address"}),s.jsx("p",{className:"font-medium",children:r.jobAddress})]}),r.dropoffAddress&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Dropoff Address"}),s.jsx("p",{className:"font-medium",children:r.dropoffAddress})]})]})]}),r.notes&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("h3",{className:"font-bold text-lg mb-3",children:"Notes"}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-4 rounded",children:r.notes})]})]}),a==="materials"&&s.jsx(kae,{jobId:r.id,jobStatus:r.status,onUpdate:n}),a==="staff"&&s.jsxs("div",{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Staff Assignment"}),s.jsx("p",{className:"text-gray-600",children:"Assign packers, carpenters, drivers, and external labor to this job."})]}),s.jsx("button",{onClick:()=>c(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 font-medium",children:"+ Assign Staff to Job"}),s.jsx("div",{className:"mt-6 text-gray-500 text-center py-8 border-2 border-dashed rounded-lg",children:"Staff assignments will be displayed here"})]})]}),o&&s.jsx(Pae,{open:o,onClose:()=>c(!1),jobId:r.id,onSuccess:()=>{c(!1),n&&n()}})]})})};function Iae({isOpen:e,onClose:t,jobId:r}){const[n,a]=A.useState(null),[i,o]=A.useState([]),[c,d]=A.useState(!0),u=A.useRef(null);A.useEffect(()=>{e&&r&&f()},[e,r]);const f=async()=>{d(!0);try{const j=localStorage.getItem("authToken"),C=await(await fetch(`/api/moving-jobs/${r}`,{headers:{Authorization:`Bearer ${j}`}})).json();a(C);const k=await(await fetch(`/api/materials/job-materials/${r}`,{headers:{Authorization:`Bearer ${j}`}})).json();o(k)}catch(j){console.error("Failed to load data:",j)}finally{d(!1)}},p=()=>{const j=i.reduce((_,O)=>_+O.quantity,0),w=i.reduce((_,O)=>{var F;const $=(F=O.returns)==null?void 0:F[0];return _+(($==null?void 0:$.quantityUsed)||0)},0),C=i.reduce((_,O)=>{var F;const $=(F=O.returns)==null?void 0:F[0];return _+(($==null?void 0:$.quantityGood)||0)},0),P=i.reduce((_,O)=>{var F;const $=(F=O.returns)==null?void 0:F[0];return _+(($==null?void 0:$.quantityDamaged)||0)},0),k=i.reduce((_,O)=>_+O.totalCost,0);return{totalIssued:j,totalUsed:w,totalReturned:C,totalDamaged:P,totalCost:k}},b=()=>{window.print()},x=()=>{const j=p();let w=`Material SKU,Material Name,Issued Qty,Used Qty,Returned Good,Damaged,Unit Cost,Total Cost,Status
`;i.forEach(_=>{var F;const O=(F=_.returns)==null?void 0:F[0],$=O?"Returned":"Pending";w+=`${_.material.sku},${_.material.name},${_.quantity},${(O==null?void 0:O.quantityUsed)||0},${(O==null?void 0:O.quantityGood)||0},${(O==null?void 0:O.quantityDamaged)||0},${_.unitCost},${_.totalCost},${$}
`}),w+=`
Totals:,,,${j.totalIssued},${j.totalUsed},${j.totalReturned},${j.totalDamaged},,${j.totalCost}
`;const C=new Blob([w],{type:"text/csv"}),P=URL.createObjectURL(C),k=document.createElement("a");k.href=P,k.download=`Job-${n==null?void 0:n.jobCode}-Material-Report.csv`,k.click()};if(!e)return null;const N=p();return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          #printable-report, #printable-report * {
            visibility: visible;
          }
          #printable-report {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .no-print {
            display: none !important;
          }
        }
      `}),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 no-print",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center no-print",children:[s.jsx("h2",{className:"text-2xl font-bold",children:" Job Material Report"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(VO,{className:"w-4 h-4"}),"Print"]}),s.jsxs("button",{onClick:x,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2",children:[s.jsx(Ox,{className:"w-4 h-4"}),"CSV"]}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx(di,{className:"w-6 h-6"})})]})]}),s.jsx("div",{ref:u,id:"printable-report",className:"p-6",children:c?s.jsx("p",{className:"text-center py-8",children:"Loading..."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6 border-b pb-4",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Material Usage Report"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Job Code:"})," ",n==null?void 0:n.jobCode]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Job Title:"})," ",n==null?void 0:n.jobTitle]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Client:"})," ",n==null?void 0:n.clientName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",new Date((n==null?void 0:n.jobDate)||"").toLocaleDateString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",s.jsx("span",{className:`px-2 py-1 rounded text-xs ${(n==null?void 0:n.status)==="COMPLETED"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:n==null?void 0:n.status})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Issued"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:N.totalIssued})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Used"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:N.totalUsed})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Returned Good"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:N.totalReturned})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Damaged"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:N.totalDamaged})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[N.totalCost.toFixed(2)," KWD"]})]})]}),s.jsxs("table",{className:"min-w-full border-collapse border",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border px-4 py-2 text-left",children:"SKU"}),s.jsx("th",{className:"border px-4 py-2 text-left",children:"Material Name"}),s.jsx("th",{className:"border px-4 py-2 text-center",children:"Issued"}),s.jsx("th",{className:"border px-4 py-2 text-center",children:"Used"}),s.jsx("th",{className:"border px-4 py-2 text-center",children:"Returned"}),s.jsx("th",{className:"border px-4 py-2 text-center",children:"Damaged"}),s.jsx("th",{className:"border px-4 py-2 text-right",children:"Unit Cost"}),s.jsx("th",{className:"border px-4 py-2 text-right",children:"Total Cost"}),s.jsx("th",{className:"border px-4 py-2 text-center",children:"Status"})]})}),s.jsxs("tbody",{children:[i.map(j=>{var C;const w=(C=j.returns)==null?void 0:C[0];return s.jsxs("tr",{children:[s.jsx("td",{className:"border px-4 py-2",children:j.material.sku}),s.jsx("td",{className:"border px-4 py-2",children:j.material.name}),s.jsxs("td",{className:"border px-4 py-2 text-center",children:[j.quantity," ",j.material.unit]}),s.jsx("td",{className:"border px-4 py-2 text-center",children:(w==null?void 0:w.quantityUsed)||"-"}),s.jsx("td",{className:"border px-4 py-2 text-center text-green-600",children:(w==null?void 0:w.quantityGood)||"-"}),s.jsx("td",{className:"border px-4 py-2 text-center text-red-600",children:(w==null?void 0:w.quantityDamaged)||"-"}),s.jsxs("td",{className:"border px-4 py-2 text-right",children:[j.unitCost.toFixed(2)," KWD"]}),s.jsxs("td",{className:"border px-4 py-2 text-right font-bold",children:[j.totalCost.toFixed(2)," KWD"]}),s.jsx("td",{className:"border px-4 py-2 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs ${w?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:w?"Returned":"Pending"})})]},j.id)}),s.jsxs("tr",{className:"bg-gray-50 font-bold",children:[s.jsx("td",{colSpan:2,className:"border px-4 py-2",children:"TOTALS"}),s.jsx("td",{className:"border px-4 py-2 text-center",children:N.totalIssued}),s.jsx("td",{className:"border px-4 py-2 text-center",children:N.totalUsed}),s.jsx("td",{className:"border px-4 py-2 text-center text-green-600",children:N.totalReturned}),s.jsx("td",{className:"border px-4 py-2 text-center text-red-600",children:N.totalDamaged}),s.jsx("td",{className:"border px-4 py-2"}),s.jsxs("td",{className:"border px-4 py-2 text-right",children:[N.totalCost.toFixed(2)," KWD"]}),s.jsx("td",{className:"border px-4 py-2"})]})]})]}),i.some(j=>{var w,C;return((C=(w=j.returns)==null?void 0:w[0])==null?void 0:C.quantityDamaged)>0})&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-3",children:" Damage Details"}),i.filter(j=>{var w,C;return((C=(w=j.returns)==null?void 0:w[0])==null?void 0:C.quantityDamaged)>0}).map(j=>{var C;const w=(C=j.damages)==null?void 0:C[0];return s.jsxs("div",{className:"border rounded p-4 mb-3",children:[s.jsx("p",{className:"font-bold",children:j.material.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Damaged Quantity: ",j.returns[0].quantityDamaged," ",j.material.unit]}),w&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm mt-2",children:[s.jsx("strong",{children:"Reason:"})," ",w.reason]}),w.photoUrls&&s.jsx("div",{className:"flex gap-2 mt-2",children:w.photoUrls.split(",").map((P,k)=>s.jsx("img",{src:P,alt:`Damage ${k+1}`,className:"w-20 h-20 object-cover rounded"},k))})]})]},j.id)})]}),s.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[s.jsxs("p",{children:["Generated on ",new Date().toLocaleString()]}),s.jsx("p",{children:"Warehouse Management System"})]})]})})]})})]})}const _ae=({isOpen:e,onClose:t,job:r})=>{const[n,a]=A.useState([]),[i,o]=A.useState(!1),[c,d]=A.useState(!1),[u,f]=A.useState(!1);A.useEffect(()=>{e&&(r!=null&&r.id)&&p()},[e,r]);const p=async()=>{try{o(!0);const k=await fetch(`/api/job-files/${r.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(k.ok){const _=await k.json();a(_.files||[])}}catch(k){console.error("Failed to load files:",k)}finally{o(!1)}},b=k=>{k.preventDefault(),k.stopPropagation(),k.type==="dragenter"||k.type==="dragover"?f(!0):k.type==="dragleave"&&f(!1)},x=async k=>{k.preventDefault(),k.stopPropagation(),f(!1),k.dataTransfer.files&&k.dataTransfer.files[0]&&await j(k.dataTransfer.files)},N=async k=>{k.target.files&&k.target.files[0]&&await j(k.target.files)},j=async k=>{const _=new FormData;Array.from(k).forEach(O=>{_.append("files",O)}),_.append("jobId",r.id);try{d(!0),(await fetch("/api/job-files/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:_})).ok?await p():alert("Failed to upload files")}catch(O){console.error("Upload error:",O),alert("Failed to upload files")}finally{d(!1)}},w=async k=>{if(confirm("Delete this file?"))try{(await fetch(`/api/job-files/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).ok?await p():alert("Failed to delete file")}catch(_){console.error("Delete error:",_),alert("Failed to delete file")}},C=k=>{if(k===0)return"0 Bytes";const _=1024,O=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(k)/Math.log(_));return Math.round(k/Math.pow(_,$)*100)/100+" "+O[$]},P=k=>k.includes("image")?"":k.includes("pdf")?"":k.includes("word")||k.includes("document")?"":k.includes("excel")||k.includes("spreadsheet")?"":"";return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",children:" Job Files & Documents"}),s.jsx("p",{className:"text-purple-100 text-sm",children:r.jobTitle||r.jobCode})]}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl font-bold",children:s.jsx(di,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"p-6 border-b",children:s.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${u?"border-purple-500 bg-purple-50":"border-gray-300"}`,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:x,children:[s.jsx(wae,{className:`w-12 h-12 mx-auto mb-4 ${u?"text-purple-600":"text-gray-400"}`}),s.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"Drop files here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Supports: PDF, Images, Documents, Spreadsheets (Max 10MB each)"}),s.jsxs("label",{className:"inline-block",children:[s.jsx("span",{className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 cursor-pointer",children:c?"Uploading...":"Browse Files"}),s.jsx("input",{type:"file",multiple:!0,onChange:N,className:"hidden",disabled:c,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx"})]})]})}),s.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:i?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading files..."})]}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gse,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No files uploaded yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Upload your first document using the area above"})]}):s.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("span",{className:"text-3xl mr-4",children:P(k.mimeType)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:k.originalName}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[s.jsx("span",{children:C(k.fileSize)}),s.jsx("span",{children:""}),s.jsx("span",{children:new Date(k.uploadedAt).toLocaleDateString()}),k.uploadedBy&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["By ",k.uploadedBy]})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("a",{href:`/uploads/job-files/${k.jobId}/${k.folderName||""}/${k.fileName}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"View",children:s.jsx(Wse,{className:"w-5 h-5"})}),s.jsx("a",{href:`/uploads/job-files/${k.jobId}/${k.folderName||""}/${k.fileName}`,download:k.originalName,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Download",children:s.jsx(Ox,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>w(k.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete",children:s.jsx(Rx,{className:"w-5 h-5"})})]})]},k.id))})}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[n.length," file",n.length!==1?"s":""," uploaded"]}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Close"})]})]})})},Oae=()=>{const[e,t]=A.useState("all"),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,c]=A.useState(!1),[d,u]=A.useState(!1),[f,p]=A.useState(!1),[b,x]=A.useState(!1),[N,j]=A.useState(!1),[w,C]=A.useState(!1),[P,k]=A.useState(null);A.useEffect(()=>{_()},[e]);const _=async()=>{try{i(!0);const $={};if(e!=="all"){const U={scheduled:"SCHEDULED,PLANNED",inprogress:"IN_PROGRESS,DISPATCHED",completed:"COMPLETED,CLOSED"};$.status=U[e]||e.toUpperCase()}const F=await _f.getAll($);n(F.jobs||[])}catch($){console.error("Load jobs error:",$)}finally{i(!1)}},O=$=>{switch($){case"Scheduled":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-green-100 text-green-800";case"Completed":return"bg-gray-100 text-gray-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Moving Jobs"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Schedule and manage moving operations"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx(Mc,{className:"h-5 w-5 mr-2"}),"New Job"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Jobs"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:r.length})]}),s.jsx(_c,{className:"h-10 w-10 text-primary-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"In Progress"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:r.filter($=>$.status==="IN_PROGRESS").length})]})})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Scheduled"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:r.filter($=>$.status==="SCHEDULED"||$.status==="PLANNED").length})]})})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completed"}),s.jsx("p",{className:"text-xl font-bold text-gray-900 mt-2",children:r.filter($=>$.status==="COMPLETED").length})]})})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Jobs"}),s.jsx("button",{onClick:()=>t("scheduled"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="scheduled"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Scheduled"}),s.jsx("button",{onClick:()=>t("inprogress"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="inprogress"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Progress"}),s.jsx("button",{onClick:()=>t("completed"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${e==="completed"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Completed"})]})}),a?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading jobs..."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map($=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-lg transition-all",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-4 rounded-t-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:$.jobTitle||$.title||"Untitled Job"}),s.jsx("p",{className:"text-blue-100 text-sm",children:$.jobCode||"No Code"})]}),s.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${O($.status)}`,children:$.status})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-sm mb-2",children:[s.jsx(nh,{className:"h-5 w-5 mr-2 text-blue-600"}),s.jsx("span",{className:"font-bold text-gray-700",children:"Client Details"})]}),s.jsxs("div",{className:"ml-7 space-y-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.clientName}),s.jsx("p",{className:"text-sm text-gray-600",children:$.clientPhone}),$.clientEmail&&s.jsx("p",{className:"text-sm text-gray-600",children:$.clientEmail})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start text-sm",children:[s.jsx(ag,{className:"h-5 w-5 mr-2 text-green-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-700",children:"From:"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:$.jobAddress||$.fromAddress||"Not specified"})]})]}),($.dropoffAddress||$.toAddress)&&s.jsx("div",{className:"flex items-start text-sm ml-7",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-700",children:"To:"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:$.dropoffAddress||$.toAddress})]})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm bg-blue-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(nF,{className:"h-5 w-5 mr-2 text-blue-600"}),s.jsx("span",{className:"font-medium text-gray-900",children:$.jobDate?new Date($.jobDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"No Date"})]}),s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:$.jobType||"LOCAL"})]}),$.assignments&&$.assignments.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"ASSIGNED TEAM"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:$.assignments.map(F=>s.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[" ",F.user.name]},F.id))})]}),$.materialIssues&&$.materialIssues.length>0&&s.jsx("div",{className:"bg-orange-50 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs font-medium text-orange-700 mb-1",children:[" Materials: ",$.materialIssues.length," items issued"]})}),$.notes&&s.jsxs("div",{className:"text-xs text-gray-600 bg-yellow-50 p-2 rounded border-l-4 border-yellow-400",children:[s.jsx("span",{className:"font-medium",children:"Note:"})," ",$.notes.substring(0,50),$.notes.length>50?"...":""]})]}),s.jsxs("div",{className:"px-6 pb-6 grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>{k($),p(!0)},className:"px-4 py-2 bg-green-50 text-green-600 rounded-md hover:bg-green-100 font-medium text-sm flex items-center justify-center gap-2",children:[s.jsx(E0,{className:"h-4 w-4"}),"View"]}),s.jsxs("button",{onClick:()=>{k($),u(!0)},className:"px-4 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 font-medium text-sm flex items-center justify-center gap-2",children:[s.jsx(Qd,{className:"h-4 w-4"}),"Edit"]}),s.jsxs("button",{onClick:()=>{k($),x(!0)},className:"px-4 py-2 bg-purple-50 text-purple-600 rounded-md hover:bg-purple-100 font-medium text-sm flex items-center justify-center gap-2",children:[s.jsx(Oa,{className:"h-4 w-4"}),"Report"]}),s.jsx("button",{onClick:()=>{k($),C(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 rounded-md hover:bg-indigo-100 font-medium text-sm flex items-center justify-center gap-2",children:" Files"}),$.status!=="COMPLETED"&&s.jsx("button",{onClick:()=>{k($),j(!0)},className:"px-4 py-2 bg-orange-50 text-orange-600 rounded-md hover:bg-orange-100 font-medium text-sm flex items-center justify-center gap-2",children:" Complete Job"}),s.jsxs("button",{onClick:async()=>{if(confirm(`Delete job "${$.title||$.jobTitle}"?`))try{await _f.delete($.id),_()}catch(F){console.error("Delete error:",F),alert("Failed to delete job")}},className:"px-4 py-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 font-medium text-sm flex items-center justify-center gap-2",children:[s.jsx(Fc,{className:"h-4 w-4"}),"Delete"]})]})]},$.id))}),s.jsx(Nse,{isOpen:o,onClose:()=>c(!1),onSuccess:_}),s.jsx(Eae,{isOpen:d,onClose:()=>u(!1),job:P,onSuccess:_}),s.jsx(Tae,{isOpen:f,onClose:()=>p(!1),job:P,onUpdate:_}),s.jsx(Iae,{isOpen:b,onClose:()=>x(!1),jobId:(P==null?void 0:P.id)||""}),s.jsx(GO,{isOpen:N,onClose:()=>j(!1),jobId:(P==null?void 0:P.id)||"",onSuccess:async()=>{try{await _f.update(P.id,{status:"COMPLETED"}),await _()}catch($){throw console.error("Failed to update job status:",$),$}}}),s.jsx(_ae,{isOpen:w,onClose:()=>C(!1),job:P})]})},Rae=[{name:"Indigo Purple",primary:"#4F46E5",secondary:"#7C3AED",accent:"#10B981"},{name:"Blue Cyan",primary:"#0EA5E9",secondary:"#06B6D4",accent:"#8B5CF6"},{name:"Green",primary:"#10B981",secondary:"#059669",accent:"#F59E0B"},{name:"Amber Red",primary:"#F59E0B",secondary:"#EF4444",accent:"#3B82F6"}],Dae=()=>{const[e,t]=A.useState({name:"",email:"",phone:"",address:"",website:"",logo:null,primaryColor:"#4F46E5",secondaryColor:"#7C3AED",accentColor:"#10B981",showCompanyName:!0,logoSize:"medium"}),[r,n]=A.useState(!1),[a,i]=A.useState(!0),[o,c]=A.useState(null),[d,u]=A.useState(null),[f,p]=A.useState(null);A.useEffect(()=>{(async()=>{try{const P=(await yA.getInfo()).company;t({name:P.name||"",email:P.email||"",phone:P.phone||"",address:P.address||"",website:P.website||"",logo:P.logo||null,primaryColor:P.primaryColor||"#4F46E5",secondaryColor:P.secondaryColor||"#7C3AED",accentColor:P.accentColor||"#10B981",showCompanyName:P.showCompanyName!==!1,logoSize:P.logoSize||"medium"}),P.logo&&p(P.logo)}catch(C){console.error("Failed to load company data:",C),c({type:"error",text:"Failed to load company information"})}finally{i(!1)}})()},[]);const b=w=>{var P;const C=(P=w.target.files)==null?void 0:P[0];if(C){if(C.size>2*1024*1024){c({type:"error",text:"Logo file size must be less than 2MB"});return}u(C);const k=new FileReader;k.onloadend=()=>{p(k.result)},k.readAsDataURL(C)}},x=async()=>{if(!d)return null;try{const w=new FormData;w.append("logo",d);const C=localStorage.getItem("authToken"),P=await fetch("/api/upload/logo",{method:"POST",headers:{Authorization:`Bearer ${C}`},body:w});if(P.ok)return(await P.json()).logoUrl}catch(w){console.error("Failed to upload logo:",w)}return null},N=async()=>{n(!0),c(null);try{let w=e.logo;if(d){const C=await x();C&&(w=C)}await yA.updateInfo({name:e.name,email:e.email,phone:e.phone,website:e.website,address:e.address,logo:w,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor,showCompanyName:e.showCompanyName,logoSize:e.logoSize}),c({type:"success",text:"Company settings saved successfully!"}),u(null),setTimeout(()=>{window.location.reload()},1500)}catch(w){c({type:"error",text:w.message||"Failed to save company information"})}finally{n(!1)}},j=w=>{t(C=>({...C,primaryColor:w.primary,secondaryColor:w.secondary,accentColor:w.accent}))};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading company information..."})]})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Company & Branding"}),s.jsx("p",{className:"text-gray-600",children:"Manage your company details, logo, and brand colors"})]}),s.jsx("button",{onClick:N,disabled:r,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:r?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Saving..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Gn,{className:"h-5 w-5"}),s.jsx("span",{children:"Save Changes"})]})})]}),o&&s.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${o.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[o.type==="success"?s.jsx(Gn,{className:"h-6 w-6"}):s.jsx(xo,{className:"h-6 w-6"}),s.jsx("span",{className:"font-medium",children:o.text})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(i0,{className:"h-6 w-6 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Company Logo"})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"relative",children:[f?s.jsx("img",{src:f,alt:"Company Logo",className:"w-24 h-24 rounded-lg object-cover border-2 border-gray-200"}):s.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:s.jsx(Cd,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors shadow-lg",children:[s.jsx(i0,{className:"h-4 w-4"}),s.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Upload Company Logo"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PNG, JPG, SVG up to 2MB. Recommended: 200x200px"}),d&&s.jsxs("p",{className:"text-sm text-green-600 mt-2",children:[" New logo selected: ",d.name]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(Cd,{className:"h-6 w-6 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:e.name,onChange:w=>t({...e,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Demo Warehouse Co."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(S1,{className:"h-4 w-4"}),s.jsx("span",{children:"Email Address"})]}),s.jsx("input",{type:"email",value:e.email,onChange:w=>t({...e,email:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"contact@company.com"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(tk,{className:"h-4 w-4"}),s.jsx("span",{children:"Phone Number"})]}),s.jsx("input",{type:"tel",value:e.phone,onChange:w=>t({...e,phone:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"+965 1234 5678"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(PF,{className:"h-4 w-4"}),s.jsx("span",{children:"Website"})]}),s.jsx("input",{type:"url",value:e.website,onChange:w=>t({...e,website:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://company.com"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(ag,{className:"h-4 w-4"}),s.jsx("span",{children:"Address"})]}),s.jsx("textarea",{value:e.address,onChange:w=>t({...e,address:w.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Kuwait City, Kuwait"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx(k1,{className:"h-6 w-6 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Brand Colors"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Presets"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Rae.map(w=>s.jsxs("button",{onClick:()=>j(w),className:"p-3 border-2 border-gray-200 rounded-lg hover:border-primary-500 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:w.primary}}),s.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:w.secondary}}),s.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:w.accent}})]}),s.jsx("p",{className:"text-sm font-medium text-gray-700",children:w.name})]},w.name))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",value:e.primaryColor,onChange:w=>t({...e,primaryColor:w.target.value}),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:e.primaryColor,onChange:w=>t({...e,primaryColor:w.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"#4F46E5"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",value:e.secondaryColor,onChange:w=>t({...e,secondaryColor:w.target.value}),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:e.secondaryColor,onChange:w=>t({...e,secondaryColor:w.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"#7C3AED"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accent Color"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",value:e.accentColor,onChange:w=>t({...e,accentColor:w.target.value}),className:"h-10 w-20 rounded border border-gray-300 cursor-pointer"}),s.jsx("input",{type:"text",value:e.accentColor,onChange:w=>t({...e,accentColor:w.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono",placeholder:"#10B981"})]})]})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Show Company Name on Login"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Display company name below logo on login page"})]}),s.jsx("button",{onClick:()=>t({...e,showCompanyName:!e.showCompanyName}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${e.showCompanyName?"bg-primary-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${e.showCompanyName?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo Size on Login Page"}),s.jsxs("select",{value:e.logoSize,onChange:w=>t({...e,logoSize:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"small",children:"Small (48px)"}),s.jsx("option",{value:"medium",children:"Medium (80px)"}),s.jsx("option",{value:"large",children:"Large (128px)"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Page Preview"}),s.jsx("div",{className:"relative h-64 rounded-lg overflow-hidden flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.primaryColor}15 0%, ${e.secondaryColor}15 100%)`},children:s.jsxs("div",{className:"text-center",children:[f?s.jsx("img",{src:f,alt:"Logo",className:"h-16 w-16 mx-auto mb-4 rounded-lg object-cover"}):s.jsx("div",{className:"h-16 w-16 mx-auto mb-4 rounded-lg flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.primaryColor} 0%, ${e.secondaryColor} 100%)`},children:s.jsx(Cd,{className:"h-8 w-8 text-white"})}),e.showCompanyName&&s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.name||"Company Name"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Sign in to access your account"})]})})]})]})},_A=[{value:"ACTIVE",label:"Active",color:"green"},{value:"INACTIVE",label:"Inactive",color:"gray"},{value:"EXPIRED",label:"Expired",color:"red"},{value:"PENDING",label:"Pending",color:"yellow"}],Lae=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(!0),[a,i]=A.useState(!1),[o,c]=A.useState(null),[d,u]=A.useState(null),[f,p]=A.useState(null),[b,x]=A.useState(null),[N,j]=A.useState(!1),[w,C]=A.useState(null),[P,k]=A.useState({name:"",description:"",contactPerson:"",contactPhone:"",contractStatus:"ACTIVE",isActive:!0});A.useEffect(()=>{_()},[]);const _=async()=>{try{n(!0);const z=await vd.listProfiles();t(z)}catch{x({type:"error",text:"Failed to load company profiles"})}finally{n(!1)}},O=z=>{var W;const M=(W=z.target.files)==null?void 0:W[0];if(M){if(M.size>2*1024*1024){x({type:"error",text:"Logo must be less than 2MB"});return}u(M);const J=new FileReader;J.onloadend=()=>{p(J.result)},J.readAsDataURL(M)}},$=z=>{k({name:z.name,description:z.description||"",contactPerson:z.contactPerson||"",contactPhone:z.contactPhone||"",contractStatus:z.contractStatus||"ACTIVE",isActive:z.isActive}),p(z.logo||null),u(null),c(z.id),i(!0)},F=()=>{i(!1),c(null),k({name:"",description:"",contactPerson:"",contactPhone:"",contractStatus:"ACTIVE",isActive:!0}),u(null),p(null)},U=async z=>{if(z.preventDefault(),!P.name.trim()){x({type:"error",text:"Company name is required"});return}j(!0);try{const M=new FormData;M.append("name",P.name),M.append("description",P.description),M.append("contactPerson",P.contactPerson),M.append("contactPhone",P.contactPhone),M.append("contractStatus",P.contractStatus),M.append("isActive",String(P.isActive)),d&&M.append("logo",d),o?(await vd.updateProfile(o,M),x({type:"success",text:"Company profile updated successfully"})):(await vd.createProfile(M),x({type:"success",text:"Company profile created successfully"})),setTimeout(()=>{F(),_(),x(null)},1500)}catch(M){x({type:"error",text:M.message||"Failed to save company profile"})}finally{j(!1)}},R=async z=>{j(!0);try{await vd.deleteProfile(z),x({type:"success",text:"Company profile deleted successfully"}),C(null),setTimeout(()=>{_(),x(null)},1500)}catch(M){x({type:"error",text:M.message||"Failed to delete company profile"})}finally{j(!1)}};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading company profiles..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Company Profiles"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage company profiles (DIOR, JAZEERA, etc.)"})]}),s.jsxs("button",{onClick:()=>{F(),i(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[s.jsx(Mc,{className:"h-5 w-5"}),s.jsx("span",{children:"New Profile"})]})]}),b&&s.jsxs("div",{className:`p-4 rounded-lg flex items-center space-x-3 ${b.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[b.type==="success"?s.jsx(Gn,{className:"h-6 w-6"}):s.jsx(sg,{className:"h-6 w-6"}),s.jsx("span",{className:"font-medium",children:b.text})]}),a&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o?"Edit Company Profile":"Create New Company Profile"}),s.jsx("button",{onClick:F,className:"text-gray-400 hover:text-gray-600",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:U,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Company Logo"}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"relative",children:[f?s.jsx("img",{src:f,alt:"Logo",className:"w-24 h-24 rounded-lg object-cover border-2 border-gray-200"}):s.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center bg-gray-50",children:s.jsx(i0,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("label",{className:"absolute -bottom-2 -right-2 bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors shadow-lg",children:[s.jsx(i0,{className:"h-4 w-4"}),s.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"PNG, JPG, SVG up to 2MB"}),d&&s.jsxs("p",{className:"text-sm text-green-600 mt-2",children:[" ",d.name]})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:P.name,onChange:z=>k({...P,name:z.target.value}),placeholder:"e.g., DIOR, JAZEERA, COMPANY_MATERIAL",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:P.description,onChange:z=>k({...P,description:z.target.value}),placeholder:"Brief description of the company...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(rk,{className:"h-4 w-4"}),s.jsx("span",{children:"Contact Person"})]}),s.jsx("input",{type:"text",value:P.contactPerson,onChange:z=>k({...P,contactPerson:z.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(tk,{className:"h-4 w-4"}),s.jsx("span",{children:"Contact Phone"})]}),s.jsx("input",{type:"tel",value:P.contactPhone,onChange:z=>k({...P,contactPhone:z.target.value}),placeholder:"+965 1234 5678",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contract Status"}),s.jsx("select",{value:P.contractStatus,onChange:z=>k({...P,contractStatus:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:_A.map(z=>s.jsx("option",{value:z.value,children:z.label},z.value))})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Active Status"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Enable this company profile for use"})]}),s.jsx("button",{type:"button",onClick:()=>k({...P,isActive:!P.isActive}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${P.isActive?"bg-primary-600":"bg-gray-200"}`,children:s.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${P.isActive?"translate-x-6":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex space-x-3 justify-end",children:[s.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:N?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Saving..."})]}):s.jsx("span",{children:o?"Update Profile":"Create Profile"})})]})]})]}),e.length===0?s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(Cd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No company profiles yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Create your first company profile to get started"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(z=>{const M=_A.find(J=>J.value===z.contractStatus),W=(M==null?void 0:M.color)||"gray";return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[z.logo?s.jsx("img",{src:z.logo,alt:z.name,className:"w-12 h-12 rounded-lg object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center",children:s.jsx(Cd,{className:"h-6 w-6 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:z.name}),z.description&&s.jsx("p",{className:"text-sm text-gray-500 truncate",children:z.description})]})]}),s.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium flex-shrink-0
                    ${W==="green"?"bg-green-100 text-green-800":""}
                    ${W==="red"?"bg-red-100 text-red-800":""}
                    ${W==="yellow"?"bg-yellow-100 text-yellow-800":""}
                    ${W==="gray"?"bg-gray-100 text-gray-800":""}
                  `,children:M==null?void 0:M.label})]}),s.jsxs("div",{className:"space-y-1 mb-4 text-sm",children:[z.contactPerson&&s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Contact:"})," ",z.contactPerson]}),z.contactPhone&&s.jsxs("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",z.contactPhone]})]}),s.jsxs("div",{className:"mb-4 flex items-center space-x-2 text-sm",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${z.isActive?"bg-green-500":"bg-gray-300"}`}),s.jsx("span",{className:z.isActive?"text-green-700":"text-gray-700",children:z.isActive?"Active":"Inactive"})]}),w===z.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Delete this profile?"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>R(z.id),disabled:N,className:"flex-1 px-2 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50",children:"Delete"}),s.jsx("button",{onClick:()=>C(null),className:"flex-1 px-2 py-1 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300",children:"Cancel"})]})]}):s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>$(z),className:"flex-1 px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(Qd,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Edit"})]}),s.jsxs("button",{onClick:()=>C(z.id),className:"flex-1 px-3 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(Fc,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Delete"})]})]})]},z.id)})})]})},Mae={ADMIN:"bg-red-100 text-red-800",MANAGER:"bg-blue-100 text-blue-800",DRIVER:"bg-purple-100 text-purple-800",WORKER:"bg-green-100 text-green-800",SCANNER:"bg-yellow-100 text-yellow-800",PACKER:"bg-gray-100 text-gray-800",LABOR:"bg-gray-100 text-gray-800"},Bae={ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800"},Fae=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(!0),[a,i]=A.useState(""),[o,c]=A.useState("ALL"),[d,u]=A.useState("ALL"),[f,p]=A.useState(!1),[b,x]=A.useState(null);A.useEffect(()=>{N()},[]);const N=async()=>{try{const P=(await dne.getAll()).users.map(k=>({id:k.id,name:k.name,email:k.email,phone:k.phone||"",role:k.role,status:k.isActive?"ACTIVE":"INACTIVE",skills:k.skills?typeof k.skills=="string"?JSON.parse(k.skills):k.skills:[],joinedAt:k.createdAt?new Date(k.createdAt).toLocaleDateString():"",lastActive:new Date(k.updatedAt).toLocaleDateString(),avatar:k.avatar||void 0}));t(P)}catch(C){console.error("Failed to load users:",C)}finally{n(!1)}},j=e.filter(C=>{const P=C.name.toLowerCase().includes(a.toLowerCase())||C.email.toLowerCase().includes(a.toLowerCase()),k=o==="ALL"||C.role===o,_=d==="ALL"||C.status===d;return P&&k&&_}),w=C=>C.split(" ").map(P=>P[0]).join("").toUpperCase();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage team members, roles, and permissions"})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[s.jsx(T4,{className:"h-5 w-5"}),s.jsx("span",{children:"Add User"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(nh,{className:"h-8 w-8 text-blue-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(k4,{className:"h-8 w-8 text-green-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(C=>C.status==="ACTIVE").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ig,{className:"h-8 w-8 text-red-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(C=>C.role==="ADMIN").length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(sg,{className:"h-8 w-8 text-yellow-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Inactive"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(C=>C.status==="INACTIVE").length})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(E1,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:a,onChange:C=>i(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a0,{className:"h-5 w-5 text-gray-400"}),s.jsxs("select",{value:o,onChange:C=>c(C.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Roles"}),s.jsx("option",{value:"ADMIN",children:"Admin"}),s.jsx("option",{value:"MANAGER",children:"Manager"}),s.jsx("option",{value:"DRIVER",children:"Driver"}),s.jsx("option",{value:"WORKER",children:"Worker"}),s.jsx("option",{value:"SCANNER",children:"Scanner"}),s.jsx("option",{value:"PACKER",children:"Packer"}),s.jsx("option",{value:"LABOR",children:"Labor"})]})]}),s.jsx("div",{children:s.jsxs("select",{value:d,onChange:C=>u(C.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"ALL",children:"All Status"}),s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"INACTIVE",children:"Inactive"})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Skills"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(C=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:C.avatar?s.jsx("img",{className:"h-10 w-10 rounded-full",src:C.avatar,alt:C.name}):s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-primary-600",children:w(C.name)})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),s.jsx("div",{className:"text-sm text-gray-500",children:C.email}),s.jsx("div",{className:"text-sm text-gray-500",children:C.phone})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Mae[C.role]}`,children:C.role}),s.jsx("br",{}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Bae[C.status]}`,children:C.status})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.skills.slice(0,2).map((P,k)=>s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:P},k)),C.skills.length>2&&s.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:["+",C.skills.length-2," more"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.lastActive}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>x(C),className:"text-primary-600 hover:text-primary-900",children:s.jsx(E0,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:s.jsx(Qd,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",children:s.jsx(Fc,{className:"h-4 w-4"})})]})})]},C.id))})]})})}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Role Permissions Guide"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(ig,{className:"h-5 w-5 text-red-600 mr-2"}),s.jsx("h4",{className:"font-medium text-red-900",children:"Admin"})]}),s.jsxs("ul",{className:"text-xs text-red-700 space-y-1",children:[s.jsx("li",{children:" Full system access"}),s.jsx("li",{children:" Manage users"}),s.jsx("li",{children:" View all jobs"}),s.jsx("li",{children:" Financial reports"}),s.jsx("li",{children:" Settings"})]})]}),s.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(nh,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("h4",{className:"font-medium text-blue-900",children:"Manager"})]}),s.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[s.jsx("li",{children:" Manage jobs"}),s.jsx("li",{children:" View reports"}),s.jsx("li",{children:" Manage teams"}),s.jsx("li",{children:" Scan shipments"}),s.jsx("li",{children:" System settings"})]})]}),s.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("span",{className:"text-purple-600 mr-2",children:""}),s.jsx("h4",{className:"font-medium text-purple-900",children:"Driver"})]}),s.jsxs("ul",{className:"text-xs text-purple-700 space-y-1",children:[s.jsx("li",{children:" View assigned jobs"}),s.jsx("li",{children:" Update job status"}),s.jsx("li",{children:" Mobile app access"}),s.jsx("li",{children:" View all jobs"}),s.jsx("li",{children:" Manage system"})]})]}),s.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx(k4,{className:"h-5 w-5 text-green-600 mr-2"}),s.jsx("h4",{className:"font-medium text-green-900",children:"Worker"})]}),s.jsxs("ul",{className:"text-xs text-green-700 space-y-1",children:[s.jsx("li",{children:" Scan shipments"}),s.jsx("li",{children:" View dashboard"}),s.jsx("li",{children:" Manage shipments"}),s.jsx("li",{children:" Manage jobs"}),s.jsx("li",{children:" View reports"})]})]}),s.jsxs("div",{className:"border border-yellow-200 rounded-lg p-4 bg-yellow-50",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("span",{className:"text-yellow-600 mr-2",children:""}),s.jsx("h4",{className:"font-medium text-yellow-900",children:"Scanner"})]}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsx("li",{children:" Scan shipments ONLY"}),s.jsx("li",{children:" View pending items"}),s.jsx("li",{children:" Dashboard access"}),s.jsx("li",{children:" Manage anything"}),s.jsx("li",{children:" Reports"})]})]}),s.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-100",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("span",{className:"text-gray-600 mr-2",children:""}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Packer"})]}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsx("li",{children:" Dummy user only"}),s.jsx("li",{children:" Job staff assignment"}),s.jsx("li",{children:" Cannot login"}),s.jsx("li",{children:" No system access"}),s.jsx("li",{children:"Used for tracking"})]})]}),s.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-100",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("span",{className:"text-gray-600 mr-2",children:""}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Labor"})]}),s.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[s.jsx("li",{children:" Dummy user only"}),s.jsx("li",{children:" Job staff assignment"}),s.jsx("li",{children:" Cannot login"}),s.jsx("li",{children:" No system access"}),s.jsx("li",{children:"Used for tracking"})]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[" ",s.jsx("strong",{children:"Tip:"}),' PACKER and LABOR roles are "dummy users" - they can be assigned to Moving Job staff for tracking purposes but cannot login to the system.']})})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Add New User"}),s.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async C=>{C.preventDefault();const P=new FormData(C.currentTarget),k={name:P.get("name"),email:P.get("email"),password:P.get("password"),role:P.get("role")};try{const _=localStorage.getItem("authToken"),O=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(k)}),$=await O.json();O.ok?(alert("User created successfully!"),p(!1),N(),C.currentTarget.reset()):alert($.error||"Failed to create user")}catch(_){alert(_.message||"Failed to create user")}},children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"user@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),s.jsx("input",{type:"password",name:"password",required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Minimum 6 characters"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),s.jsxs("select",{name:"role",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a role"}),s.jsx("option",{value:"ADMIN",children:" Admin - Full system access"}),s.jsx("option",{value:"MANAGER",children:" Manager - Manage jobs & teams"}),s.jsx("option",{value:"DRIVER",children:" Driver - View assigned jobs only"}),s.jsx("option",{value:"WORKER",children:" Worker - General warehouse work"}),s.jsx("option",{value:"SCANNER",children:" Scanner - QR scanning only"}),s.jsx("option",{value:"PACKER",children:" Packer - Staff assignment only"}),s.jsx("option",{value:"LABOR",children:" Labor - Staff assignment only"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PACKER/LABOR are dummy users for job staff assignment only"})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[s.jsx(T4,{className:"h-5 w-5"}),s.jsx("span",{children:"Create User"})]})]})]})]})})]})},Uae=()=>{const[e,t]=A.useState({templateType:"MODERN",primaryColor:"#2563eb",secondaryColor:"#64748b",showLogo:!0,showCompanyAddress:!0,showClientDetails:!0,footerText:"Thank you for your business!",termsConditions:"",invoicePrefix:"INV",invoiceStartNumber:1001}),[r,n]=A.useState(!0),[a,i]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{d()},[]);const d=async()=>{try{const b=(await bA.get()).settings;t({templateType:"MODERN",primaryColor:b.primaryColor||"#2563eb",secondaryColor:b.accentColor||"#64748b",showLogo:b.showLogo!==void 0?b.showLogo:!0,showCompanyAddress:!0,showClientDetails:!0,footerText:b.footerText||"Thank you for your business!",termsConditions:b.terms||"",invoicePrefix:b.prefix||"INV",invoiceStartNumber:b.nextNumber||1001})}catch(p){console.error("Failed to load invoice settings:",p),c({type:"error",text:"Failed to load invoice settings"})}finally{n(!1)}},u=async()=>{i(!0),c(null);try{await bA.update({prefix:e.invoicePrefix,nextNumber:e.invoiceStartNumber,primaryColor:e.primaryColor,accentColor:e.secondaryColor,showLogo:e.showLogo,footerText:e.footerText,terms:e.termsConditions}),c({type:"success",text:"Invoice settings saved successfully!"}),setTimeout(()=>c(null),3e3)}catch(p){c({type:"error",text:p.message||"Failed to save invoice settings"})}finally{i(!1)}};if(r)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading invoice settings..."})]})});const f=[{id:"MODERN",name:"Modern",preview:""},{id:"CLASSIC",name:"Classic",preview:""},{id:"MINIMAL",name:"Minimal",preview:""}];return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(k1,{className:"h-8 w-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Advanced Template Configuration"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Access the full template customization system with 70+ configuration options for invoices and release notes"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 mb-4",children:[s.jsx("li",{children:" Company branding & logo upload"}),s.jsx("li",{children:" Invoice & release note layouts"}),s.jsx("li",{children:" Custom colors, fonts & styling"}),s.jsx("li",{children:" Print settings & localization"})]}),s.jsxs(bf,{to:"/settings/templates",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:["Open Template Settings",s.jsx(GB,{className:"h-4 w-4"})]})]})]})})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice & Templates"}),s.jsx("p",{className:"text-gray-600",children:"Customize invoice appearance and branding"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[o&&s.jsx("div",{className:`text-sm ${o.type==="success"?"text-green-600":"text-red-600"}`,children:o.text}),s.jsx("button",{onClick:u,disabled:a,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save Changes"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Template"}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:f.map(p=>s.jsxs("div",{onClick:()=>t(b=>({...b,templateType:p.id})),className:`border-2 rounded-lg p-6 cursor-pointer transition-all ${e.templateType===p.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300"}`,children:[s.jsx("div",{className:"text-4xl text-center mb-2",children:p.preview}),s.jsx("div",{className:"text-center font-medium",children:p.name}),e.templateType===p.id&&s.jsx("div",{className:"text-center mt-2",children:s.jsx(Gn,{className:"h-5 w-5 text-primary-600 mx-auto"})})]},p.id))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Brand Colors"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",value:e.primaryColor,onChange:p=>t(b=>({...b,primaryColor:p.target.value})),className:"h-10 w-20 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:e.primaryColor,onChange:p=>t(b=>({...b,primaryColor:p.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"color",value:e.secondaryColor,onChange:p=>t(b=>({...b,secondaryColor:p.target.value})),className:"h-10 w-20 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:e.secondaryColor,onChange:p=>t(b=>({...b,secondaryColor:p.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Prefix"}),s.jsx("input",{type:"text",value:e.invoicePrefix,onChange:p=>t(b=>({...b,invoicePrefix:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Starting Number"}),s.jsx("input",{type:"number",value:e.invoiceStartNumber,onChange:p=>t(b=>({...b,invoiceStartNumber:parseInt(p.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsx("div",{className:"mt-6 space-y-4",children:[{key:"showLogo",label:"Show Company Logo"},{key:"showCompanyAddress",label:"Show Company Address"},{key:"showClientDetails",label:"Show Client Details"}].map(p=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e[p.key],onChange:b=>t(x=>({...x,[p.key]:b.target.checked})),className:"h-4 w-4 text-primary-600 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:p.label})]},p.key))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Footer & Terms"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),s.jsx("input",{type:"text",value:e.footerText,onChange:p=>t(b=>({...b,footerText:p.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms & Conditions"}),s.jsx("textarea",{value:e.termsConditions,onChange:p=>t(b=>({...b,termsConditions:p.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter your terms and conditions..."})]})]})]}),s.jsx("button",{className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700",children:"Save Invoice Settings"})]})},$ae=()=>{const[e,t]=A.useState("general"),[r,n]=A.useState(null),[a,i]=A.useState([]),[o,c]=A.useState(!0),[d,u]=A.useState(!1),[f,p]=A.useState(null);A.useEffect(()=>{b(),x()},[]);const b=async()=>{try{const w=await zo.getSettings();n(w)}catch(w){console.error("Failed to load billing settings:",w),p({type:"error",text:"Failed to load billing settings"})}finally{c(!1)}},x=async()=>{try{const w=await zo.getChargeTypes();i(w)}catch(w){console.error("Failed to load charge types:",w)}},N=async()=>{if(r){if(!r.currency||r.currency.trim()===""){p({type:"error",text:"Currency is required"});return}if(!r.invoicePrefix||r.invoicePrefix.trim()===""){p({type:"error",text:"Invoice prefix is required"});return}if(r.taxRate!==void 0&&(r.taxRate<0||r.taxRate>100)){p({type:"error",text:"Tax rate must be between 0 and 100"});return}if(r.invoiceDueDays!==void 0&&r.invoiceDueDays<0){p({type:"error",text:"Invoice due days must be positive"});return}if(r.gracePeriodDays!==void 0&&r.gracePeriodDays<0){p({type:"error",text:"Grace period days must be positive"});return}if(r.iban&&r.iban.trim()!==""&&!/^[A-Z]{2}[0-9]{2}[A-Z0-9]{1,30}$/.test(r.iban.replace(/\s/g,""))){p({type:"error",text:"Invalid IBAN format"});return}u(!0);try{await zo.updateSettings(r),p({type:"success",text:"Billing settings updated successfully!"}),setTimeout(()=>p(null),3e3)}catch(w){console.error("Failed to save settings:",w),p({type:"error",text:w.message||"Failed to save billing settings"})}finally{u(!1)}}},j=[{id:"general",name:"General Settings",icon:Uo},{id:"invoice",name:"Invoice Design",icon:k1},{id:"bank",name:"Bank Details",icon:n0},{id:"terms",name:"Terms & Conditions",icon:Oa},{id:"charges",name:"Charge Types",icon:Uo}];return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure storage charges, invoice customization, and payment details"})]}),f&&s.jsx("div",{className:`p-4 rounded-lg ${f.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center",children:[f.type==="success"?s.jsx(Gn,{className:"h-5 w-5 mr-2"}):s.jsx(xo,{className:"h-5 w-5 mr-2"}),f.text]})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:j.map(w=>{const C=w.icon;return s.jsxs("button",{onClick:()=>t(w.id),className:`
                  py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                  ${e===w.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[s.jsx(C,{className:"h-5 w-5"}),w.name]},w.id)})})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e==="general"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"General Billing Settings"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),s.jsx("input",{type:"text",value:r.currency,onChange:w=>n({...r,currency:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"KWD"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Prefix"}),s.jsx("input",{type:"text",value:r.invoicePrefix,onChange:w=>n({...r,invoicePrefix:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"INV"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),s.jsx("input",{type:"number",step:"0.01",value:r.taxRate||"",onChange:w=>n({...r,taxRate:parseFloat(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"5.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Due Days"}),s.jsx("input",{type:"number",value:r.invoiceDueDays||"",onChange:w=>n({...r,invoiceDueDays:parseInt(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"10"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grace Period (Days)"}),s.jsx("input",{type:"number",value:r.gracePeriodDays||"",onChange:w=>n({...r,gracePeriodDays:parseInt(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"3"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Days before storage charges apply"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Storage Charge"}),s.jsx("input",{type:"number",step:"0.01",value:r.minimumStorageCharge||"",onChange:w=>n({...r,minimumStorageCharge:parseFloat(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"10.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate Type"}),s.jsxs("select",{value:r.storageRateType,onChange:w=>n({...r,storageRateType:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"PER_BOX",children:"Per Box"}),s.jsx("option",{value:"PER_CUBIC_M",children:"Per Cubic Meter"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate Per Box"}),s.jsx("input",{type:"number",step:"0.001",value:r.storageRatePerBox||"",onChange:w=>n({...r,storageRatePerBox:parseFloat(w.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Rate per box per day"})]})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{onClick:N,disabled:d,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:d?"Saving...":"Save Settings"})})]}),e==="invoice"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Design & Layout"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL"}),s.jsx("input",{type:"text",value:r.logoUrl||"",onChange:w=>n({...r,logoUrl:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://example.com/logo.png"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo Position"}),s.jsxs("select",{value:r.logoPosition,onChange:w=>n({...r,logoPosition:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"LEFT",children:"Left"}),s.jsx("option",{value:"CENTER",children:"Center"}),s.jsx("option",{value:"RIGHT",children:"Right"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2 text-sm font-medium text-gray-700",children:[s.jsx("input",{type:"checkbox",checked:r.showCompanyStamp,onChange:w=>n({...r,showCompanyStamp:w.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{children:"Show Company Stamp"})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:r.primaryColor||"#1E40AF",onChange:w=>n({...r,primaryColor:w.target.value}),className:"h-10 w-20 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:r.primaryColor||"",onChange:w=>n({...r,primaryColor:w.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"#1E40AF"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:r.secondaryColor||"#64748B",onChange:w=>n({...r,secondaryColor:w.target.value}),className:"h-10 w-20 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:r.secondaryColor||"",onChange:w=>n({...r,secondaryColor:w.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"#64748B"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Registration No."}),s.jsx("input",{type:"text",value:r.taxRegistrationNo||"",onChange:w=>n({...r,taxRegistrationNo:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"123456789"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Registration No."}),s.jsx("input",{type:"text",value:r.companyRegistrationNo||"",onChange:w=>n({...r,companyRegistrationNo:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"CR-123456"})]})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{onClick:N,disabled:d,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:d?"Saving...":"Save Settings"})})]}),e==="bank"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bank Account Details"}),s.jsx("p",{className:"text-sm text-gray-600",children:"These details will be shown on invoices for customer payments"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),s.jsx("input",{type:"text",value:r.bankName||"",onChange:w=>n({...r,bankName:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"National Bank of Kuwait"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Name"}),s.jsx("input",{type:"text",value:r.branchName||"",onChange:w=>n({...r,branchName:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Salmiya Branch"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),s.jsx("input",{type:"text",value:r.accountName||"",onChange:w=>n({...r,accountName:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Your Company Name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),s.jsx("input",{type:"text",value:r.accountNumber||"",onChange:w=>n({...r,accountNumber:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"1234567890"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN"}),s.jsx("input",{type:"text",value:r.iban||"",onChange:w=>n({...r,iban:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"KW81CBKU0000000000001234560101"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SWIFT Code"}),s.jsx("input",{type:"text",value:r.swiftCode||"",onChange:w=>n({...r,swiftCode:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"CBKUKWKW"})]})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{onClick:N,disabled:d,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:d?"Saving...":"Save Settings"})})]}),e==="terms"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Terms & Conditions"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customize the text shown on your invoices"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Instructions"}),s.jsx("textarea",{value:r.paymentInstructions||"",onChange:w=>n({...r,paymentInstructions:w.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Please make payment within 10 days of invoice date..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms and Conditions"}),s.jsx("textarea",{value:r.termsAndConditions||"",onChange:w=>n({...r,termsAndConditions:w.target.value}),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:`1. Payment is due within the specified period...
2. Late payments may incur additional charges...
3. All charges are in KWD unless otherwise stated...`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),s.jsx("input",{type:"text",value:r.footerText||"",onChange:w=>n({...r,footerText:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Thank you for your business"})]})]}),s.jsx("div",{className:"flex justify-end pt-4",children:s.jsx("button",{onClick:N,disabled:d,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:d?"Saving...":"Save Settings"})})]}),e==="charges"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Charge Types"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage custom charges for storage and release"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[s.jsx(Mc,{className:"h-5 w-5"}),"Add Charge Type"]})]}),s.jsx("div",{className:"space-y-3",children:a.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-primary-300",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:w.name}),s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.category==="STORAGE"?"bg-blue-100 text-blue-700":w.category==="RELEASE"?"bg-green-100 text-green-700":w.category==="SERVICE"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:w.category}),w.isActive?s.jsx(Gn,{className:"h-5 w-5 text-green-500"}):s.jsx(xo,{className:"h-5 w-5 text-gray-400"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-gray-700",children:[s.jsxs("strong",{children:[w.rate.toFixed(3)," ",r.currency]})," (",w.calculationType.replace("_"," ").toLowerCase(),")"]}),w.minCharge&&s.jsxs("span",{className:"text-gray-500",children:["Min: ",w.minCharge," ",r.currency]}),w.maxCharge&&s.jsxs("span",{className:"text-gray-500",children:["Max: ",w.maxCharge," ",r.currency]}),s.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${w.isTaxable?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:w.isTaxable?"Taxable":"Non-taxable"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:s.jsx(Qd,{className:"h-5 w-5"})}),s.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:s.jsx(Fc,{className:"h-5 w-5"})})]})]},w.id))}),a.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Uo,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{children:"No charge types configured yet"}),s.jsx("p",{className:"text-sm",children:"Add your first charge type to get started"})]})]})]})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-red-600",children:"Failed to load billing settings"})})},zae=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Integrations"}),s.jsx("p",{className:"text-gray-600",children:"Connect third-party services and APIs"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ek,{className:"h-6 w-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"WhatsApp Business API"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send job updates and notifications via WhatsApp"})]})]}),s.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Configure"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),s.jsx("input",{type:"password",placeholder:"Enter WhatsApp API key",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"tel",placeholder:"+965 XXXX XXXX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(S1,{className:"h-6 w-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"SMTP configuration for email alerts"})]})]}),s.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"Connected"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(oF,{className:"h-6 w-6 text-purple-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"SMS Gateway"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Send SMS notifications to customers"})]})]}),s.jsx("button",{className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Connect"})]})})]}),OA={STORAGE:"bg-blue-100 text-blue-800",MATERIALS:"bg-green-100 text-green-800",EQUIPMENT:"bg-purple-100 text-purple-800"},Wae={ACTIVE:"bg-green-100 text-green-800",MAINTENANCE:"bg-yellow-100 text-yellow-800",INACTIVE:"bg-red-100 text-red-800"},qae=()=>{const[e,t]=A.useState([]),[r,n]=A.useState([]),[a,i]=A.useState(!0),[o,c]=A.useState(!1),[d,u]=A.useState(!1),[f,p]=A.useState(null),[b,x]=A.useState({code:"",location:"",rackType:"STORAGE",capacityTotal:100}),[N,j]=A.useState({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"});A.useEffect(()=>{w()},[]);const w=async()=>{try{i(!0);const[K,V]=await Promise.all([Bi.getAll(),Km.getAll()]),me=K.racks.map(we=>({id:we.id,code:we.code,location:we.location||"",type:we.rackType,capacity:we.capacityTotal,currentLoad:we.capacityUsed,qrCode:we.qrCode,status:we.status})),se=V.customFields||V,ye=(Array.isArray(se)?se:[]).map(we=>({id:we.id,name:we.fieldName,type:we.fieldType,options:we.fieldOptions||void 0,required:we.isRequired,section:we.section,order:1}));t(me),n(ye)}catch(K){console.error("Failed to load data:",K),alert("Failed to load racks and custom fields")}finally{i(!1)}},C=K=>Math.round(K.currentLoad/K.capacity*100),P=K=>K>=90?"bg-red-500":K>=70?"bg-yellow-500":"bg-green-500",k=async()=>{try{if(!b.code||!b.location){alert("Please fill in all required fields");return}const K=await Bi.create(b),V={id:K.rack.id,code:K.rack.code,location:K.rack.location||"",type:K.rack.rackType,capacity:K.rack.capacityTotal,currentLoad:K.rack.capacityUsed,qrCode:K.rack.qrCode,status:K.rack.status};t([...e,V]),x({code:"",location:"",rackType:"STORAGE",capacityTotal:100}),c(!1)}catch(K){console.error("Failed to create rack:",K),alert(K.message||"Failed to create rack")}},_=async()=>{try{if(!N.fieldName){alert("Please provide a field name");return}const K={...N,fieldOptions:N.fieldType==="DROPDOWN"?N.fieldOptions.filter(me=>me.trim()):null};console.log("Creating field with data:",K);const V=await Km.create(K);console.log("API Response:",V),await w(),j({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}),u(!1),alert("Custom field added successfully!")}catch(K){console.error("Failed to create custom field:",K),alert(K.message||"Failed to create custom field")}},O=async K=>{if(confirm("Are you sure you want to delete this rack?"))try{await Bi.delete(K),t(e.filter(V=>V.id!==K))}catch(V){console.error("Failed to delete rack:",V),alert(V.message||"Failed to delete rack")}},$=async K=>{if(confirm("Are you sure you want to delete this custom field?"))try{await Km.delete(K),n(r.filter(V=>V.id!==K))}catch(V){console.error("Failed to delete custom field:",V),alert(V.message||"Failed to delete custom field")}},F=K=>{p(K),j({fieldName:K.name,fieldType:K.type,fieldOptions:K.options||[""],isRequired:K.required,section:K.section}),u(!0)},U=async()=>{if(f)try{if(!N.fieldName){alert("Please provide a field name");return}const K={fieldName:N.fieldName,fieldType:N.fieldType,fieldOptions:N.fieldType==="DROPDOWN"?N.fieldOptions.filter(me=>me.trim()):null,isRequired:N.isRequired,section:N.section},V=await Km.update(f.id,K);console.log("Update response:",V),await w(),j({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}),p(null),u(!1),alert("Custom field updated successfully!")}catch(K){console.error("Failed to update custom field:",K),alert(K.message||"Failed to update custom field")}},R=()=>{p(null),j({fieldName:"",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}),u(!1)},z=K=>{const V={priority:{fieldName:"Priority Level",fieldType:"DROPDOWN",fieldOptions:["Low","Medium","High","Urgent"],isRequired:!1,section:"SHIPMENT"},insurance:{fieldName:"Insurance Value",fieldType:"NUMBER",fieldOptions:[""],isRequired:!0,section:"SHIPMENT"},customerType:{fieldName:"Customer Type",fieldType:"DROPDOWN",fieldOptions:["Individual","Corporate","Government"],isRequired:!1,section:"JOB"},deliveryInstructions:{fieldName:"Delivery Instructions",fieldType:"TEXT",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"},fragile:{fieldName:"Fragile Item",fieldType:"CHECKBOX",fieldOptions:[""],isRequired:!1,section:"SHIPMENT"}};V[K]&&j(V[K])},M=()=>{j(K=>({...K,fieldOptions:[...K.fieldOptions,""]}))},W=(K,V)=>{j(me=>({...me,fieldOptions:me.fieldOptions.map((se,oe)=>oe===K?V:se)}))},J=K=>{j(V=>({...V,fieldOptions:V.fieldOptions.filter((me,se)=>se!==K)}))};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading system settings..."})]})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"System Configuration"}),s.jsx("p",{className:"text-gray-600",children:"Configure racks, custom fields, and operational settings"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(MF,{className:"h-6 w-6 text-primary-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Warehouse Layout"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Total Capacity: ",e.reduce((K,V)=>K+V.capacity,0)," units"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:[e.map(K=>{const V=C(K);return s.jsx("div",{className:`relative border-2 rounded-lg p-4 transition-all hover:shadow-md ${K.status==="ACTIVE"?"border-green-200 bg-green-50":K.status==="MAINTENANCE"?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold text-lg",children:K.code}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:K.location}),s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[s.jsx("span",{children:K.currentLoad}),s.jsx("span",{children:K.capacity})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${P(V)}`,style:{width:`${V}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[V,"%"]})]}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full mt-2 ${OA[K.type]}`,children:K.type})]})},K.id)}),s.jsx("div",{onClick:()=>c(!0),className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition-all",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Mc,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Add Rack"})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wo,{className:"h-6 w-6 text-primary-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Rack Management"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[s.jsx(Bc,{className:"h-4 w-4"}),s.jsx("span",{children:"Print QR Codes"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[s.jsx(Mc,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Rack"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rack"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"QR Code"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(K=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"font-medium text-gray-900",children:K.code})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.location}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${OA[K.type]}`,children:K.type})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[K.currentLoad," / ",K.capacity]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Wae[K.status]}`,children:K.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mi,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-500 font-mono",children:K.qrCode})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-green-600 hover:text-green-900",title:"Print QR Code",children:s.jsx(Bc,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>O(K.id),className:"text-red-600 hover:text-red-900",title:"Delete Rack",children:s.jsx(Fc,{className:"h-4 w-4"})})]})})]},K.id))})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Mb,{className:"h-6 w-6 text-primary-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Custom Fields"})]}),s.jsxs("button",{onClick:()=>{p(null),u(!0)},className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2",children:[s.jsx(yF,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Field"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary-600",children:r.filter(K=>K.section==="SHIPMENT").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Shipment Fields"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(K=>K.section==="JOB").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Job Fields"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.filter(K=>K.section==="EXPENSE").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Expense Fields"})]})]}),["SHIPMENT","JOB","EXPENSE"].map(K=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:[K," Fields"]}),s.jsx("div",{className:"space-y-2",children:r.filter(V=>V.section===K).sort((V,me)=>V.order-me.order).map(V=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"font-medium text-gray-900",children:V.name}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",V.type,")"]}),V.required&&s.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Required"})]}),V.options&&s.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Options: ",V.options.join(", ")]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>F(V),className:"text-blue-600 hover:text-blue-900",title:"Edit Field",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{onClick:()=>$(V.id),className:"text-red-600 hover:text-red-900",title:"Delete Field",children:s.jsx(Fc,{className:"h-4 w-4"})})]})]},V.id))})]},K))]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Rack"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rack Code"}),s.jsx("input",{type:"text",value:b.code,onChange:K=>x(V=>({...V,code:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., A1, B2, C3"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),s.jsx("input",{type:"text",value:b.location,onChange:K=>x(V=>({...V,location:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Section A - Row 1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),s.jsxs("select",{value:b.rackType,onChange:K=>x(V=>({...V,rackType:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"STORAGE",children:"Storage"}),s.jsx("option",{value:"MATERIALS",children:"Materials"}),s.jsx("option",{value:"EQUIPMENT",children:"Equipment"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),s.jsx("input",{type:"number",value:b.capacityTotal,onChange:K=>x(V=>({...V,capacityTotal:parseInt(K.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",min:"1"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:k,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:"Add Rack"}),s.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-96 overflow-y-auto",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:f?"Edit Custom Field":"Add Custom Field"}),!f&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Templates:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>z("priority"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Priority Level"}),s.jsx("button",{onClick:()=>z("insurance"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Insurance Value"}),s.jsx("button",{onClick:()=>z("customerType"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Customer Type"}),s.jsx("button",{onClick:()=>z("deliveryInstructions"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Delivery Instructions"}),s.jsx("button",{onClick:()=>z("fragile"),className:"text-xs bg-white px-2 py-1 rounded border border-blue-300 hover:bg-blue-100",children:"Fragile Item"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Name"}),s.jsx("input",{type:"text",value:N.fieldName,onChange:K=>j(V=>({...V,fieldName:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Priority Level"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field Type"}),s.jsxs("select",{value:N.fieldType,onChange:K=>j(V=>({...V,fieldType:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"TEXT",children:"Text"}),s.jsx("option",{value:"NUMBER",children:"Number"}),s.jsx("option",{value:"DATE",children:"Date"}),s.jsx("option",{value:"DROPDOWN",children:"Dropdown"}),s.jsx("option",{value:"CHECKBOX",children:"Checkbox"})]})]}),N.fieldType==="DROPDOWN"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options"}),N.fieldOptions.map((K,V)=>s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("input",{type:"text",value:K,onChange:me=>W(V,me.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Option ${V+1}`}),N.fieldOptions.length>1&&s.jsx("button",{onClick:()=>J(V),className:"text-red-600 hover:text-red-800",children:s.jsx($i,{className:"h-4 w-4"})})]},V)),s.jsx("button",{onClick:M,className:"text-primary-600 hover:text-primary-800 text-sm",children:"+ Add Option"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),s.jsxs("select",{value:N.section,onChange:K=>j(V=>({...V,section:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"SHIPMENT",children:"Shipment"}),s.jsx("option",{value:"JOB",children:"Moving Job"}),s.jsx("option",{value:"EXPENSE",children:"Expense"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"required",checked:N.isRequired,onChange:K=>j(V=>({...V,isRequired:K.target.checked})),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"required",className:"ml-2 text-sm text-gray-700",children:"Required field"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:f?U:_,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:f?"Update Field":"Add Field"}),s.jsx("button",{onClick:R,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]})},Hae=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security & Access"}),s.jsx("p",{className:"text-gray-600",children:"Manage authentication and security settings"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Password Policy"}),s.jsx("div",{className:"space-y-3",children:["Minimum 8 characters","Require uppercase letters","Require numbers","Require special characters"].map((e,t)=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-primary-600 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:e})]},t))})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Add an extra layer of security"})]}),s.jsx("button",{className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700",children:"Enable"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Session Management"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),s.jsx("input",{type:"number",defaultValue:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),Vae=()=>{const[e,t]=A.useState({email:{},sms:{},push:{}}),[r,n]=A.useState(!0),[a,i]=A.useState(!1),[o,c]=A.useState(null);A.useEffect(()=>{d()},[]);const d=async()=>{try{const f=await vA.get();t(f.preferences)}catch(f){console.error("Failed to load preferences:",f),c({type:"error",text:"Failed to load notification preferences"})}finally{n(!1)}},u=async()=>{i(!0),c(null);try{await vA.update(e),c({type:"success",text:"Notification preferences saved successfully!"}),setTimeout(()=>c(null),3e3)}catch(f){c({type:"error",text:f.message||"Failed to save notification preferences"})}finally{i(!1)}};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading notification settings..."})]})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Settings"}),s.jsx("p",{className:"text-gray-600",children:"Configure how and when you receive notifications"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[o&&s.jsxs("div",{className:`flex items-center ${o.type==="success"?"text-green-600":"text-red-600"}`,children:[o.type==="success"&&s.jsx(Gn,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"text-sm",children:o.text})]}),s.jsx("button",{onClick:u,disabled:a,className:"bg-primary-600 text-white px-6 py-2 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save Preferences"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Email Notifications"}),s.jsx("div",{className:"space-y-3",children:[{label:"New shipment arrival",desc:"Get notified when new shipments arrive"},{label:"Job assignments",desc:"Notifications for new job assignments"},{label:"Expense approvals",desc:"Alerts for expense approval requests"},{label:"System updates",desc:"Important system updates and maintenance"}].map((f,p)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:f.label}),s.jsx("div",{className:"text-sm text-gray-500",children:f.desc})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},p))})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"WhatsApp Notifications"}),s.jsx("div",{className:"space-y-3",children:["Job updates","Schedule changes","Emergency alerts"].map((f,p)=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"h-4 w-4 text-primary-600 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:f})]},p))})]})]})},Gae=()=>{const[e,t]=A.useState(null),[r,n]=A.useState(!0),[a,i]=A.useState(!1),[o,c]=A.useState(!1),[d,u]=A.useState(null);A.useEffect(()=>{f()},[]);const f=async()=>{n(!0);try{const N=await fetch("/api/shipment-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!N.ok)throw new Error("Failed to load settings");const j=await N.json();t(j.settings)}catch(N){u({type:"error",text:N.message})}finally{n(!1)}},p=async()=>{if(e){i(!0),u(null);try{const N=await fetch("/api/shipment-settings",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!N.ok)throw new Error("Failed to save settings");const j=await N.json();t(j.settings),u({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>u(null),3e3)}catch(N){u({type:"error",text:N.message})}finally{i(!1)}}},b=async()=>{if(confirm("Are you sure you want to reset all shipment settings to defaults? This cannot be undone.")){c(!0),u(null);try{const N=await fetch("/api/shipment-settings/reset",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!N.ok)throw new Error("Failed to reset settings");const j=await N.json();t(j.settings),u({type:"success",text:"Settings reset to defaults successfully!"}),setTimeout(()=>u(null),3e3)}catch(N){u({type:"error",text:N.message})}finally{c(!1)}}},x=(N,j)=>{e&&t({...e,[N]:j})};return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Shipment Configuration"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure shipment intake, storage, and release workflows"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:b,disabled:o||a,className:"px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(r0,{className:"h-5 w-5"}),o?"Resetting...":"Reset to Defaults"]}),s.jsxs("button",{onClick:p,disabled:a||o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),a?"Saving...":"Save Changes"]})]})]}),d&&s.jsx("div",{className:`p-4 rounded-lg ${d.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[d.type==="success"?s.jsx(Gn,{className:"h-5 w-5"}):s.jsx(xo,{className:"h-5 w-5"}),s.jsx("span",{children:d.text})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(_c,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Intake Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure required fields during shipment creation"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Client Email"}),s.jsx("input",{type:"checkbox",checked:e.requireClientEmail,onChange:N=>x("requireClientEmail",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Client Phone"}),s.jsx("input",{type:"checkbox",checked:e.requireClientPhone,onChange:N=>x("requireClientPhone",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Estimated Value"}),s.jsx("input",{type:"checkbox",checked:e.requireEstimatedValue,onChange:N=>x("requireEstimatedValue",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Photos"}),s.jsx("input",{type:"checkbox",checked:e.requirePhotos,onChange:N=>x("requirePhotos",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Auto-generate QR Code"}),s.jsx("input",{type:"checkbox",checked:e.autoGenerateQR,onChange:N=>x("autoGenerateQR",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code Prefix"}),s.jsx("input",{type:"text",value:e.qrCodePrefix,onChange:N=>x("qrCodePrefix",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"SHP"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Storage Type"}),s.jsxs("select",{value:e.defaultStorageType,onChange:N=>x("defaultStorageType",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"PERSONAL",children:"Personal"}),s.jsx("option",{value:"COMMERCIAL",children:"Commercial"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Oa,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Intake Form Fields"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customize which fields appear and are required in shipment intake form"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Basic Information Fields"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Client Address"}),s.jsx("input",{type:"checkbox",checked:e.showClientAddress!==!1,onChange:N=>x("showClientAddress",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showClientAddress!==!1&&s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireClientAddress===!0,onChange:N=>x("requireClientAddress",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Reference ID"}),s.jsx("input",{type:"checkbox",checked:e.showReferenceId!==!1,onChange:N=>x("showReferenceId",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showReferenceId!==!1&&s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireReferenceId===!0,onChange:N=>x("requireReferenceId",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Description"}),s.jsx("input",{type:"checkbox",checked:e.showDescription!==!1,onChange:N=>x("showDescription",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showDescription!==!1&&s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireDescription===!0,onChange:N=>x("requireDescription",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Notes"}),s.jsx("input",{type:"checkbox",checked:e.showNotes!==!1,onChange:N=>x("showNotes",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showNotes!==!1&&s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireNotes===!0,onChange:N=>x("requireNotes",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Warehouse Shipment Fields"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Warehouse Mode Toggle"}),s.jsx("input",{type:"checkbox",checked:e.showWarehouseMode!==!1,onChange:N=>x("showWarehouseMode",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]})}),s.jsx("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Shipper Details"}),s.jsx("input",{type:"checkbox",checked:e.showShipperDetails!==!1,onChange:N=>x("showShipperDetails",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]})}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Weight"}),s.jsx("input",{type:"checkbox",checked:e.showWeight!==!1,onChange:N=>x("showWeight",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showWeight!==!1&&s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireWeight===!0,onChange:N=>x("requireWeight",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Dimensions"}),s.jsx("input",{type:"checkbox",checked:e.showDimensions!==!1,onChange:N=>x("showDimensions",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showDimensions!==!1&&s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireDimensions===!0,onChange:N=>x("requireDimensions",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]})]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Storage Assignment Fields"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Estimated Storage Days"}),s.jsx("input",{type:"checkbox",checked:e.showEstimatedDays!==!1,onChange:N=>x("showEstimatedDays",N.target.checked),className:"h-4 w-4 text-purple-600 rounded"})]}),e.showEstimatedDays!==!1&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("input",{type:"checkbox",checked:e.requireEstimatedDays===!0,onChange:N=>x("requireEstimatedDays",N.target.checked),className:"h-3 w-3 text-purple-600 rounded"}),"Make Required"]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-600",children:"Default Value (days)"}),s.jsx("input",{type:"number",value:e.defaultEstimatedDays||30,onChange:N=>x("defaultEstimatedDays",parseInt(N.target.value)),className:"w-full mt-1 px-2 py-1 text-sm border border-gray-300 rounded",min:"1"})]})]})]})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(Q7,{className:"h-6 w-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Storage Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure rack assignment and capacity alerts"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Allow Multiple Racks"}),s.jsx("input",{type:"checkbox",checked:e.allowMultipleRacks,onChange:N=>x("allowMultipleRacks",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Rack Assignment"}),s.jsx("input",{type:"checkbox",checked:e.requireRackAssignment,onChange:N=>x("requireRackAssignment",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Auto-assign Rack"}),s.jsx("input",{type:"checkbox",checked:e.autoAssignRack,onChange:N=>x("autoAssignRack",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Low Capacity Alerts"}),s.jsx("input",{type:"checkbox",checked:e.notifyOnLowCapacity,onChange:N=>x("notifyOnLowCapacity",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg md:col-span-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Low Capacity Threshold: ",e.lowCapacityThreshold,"%"]}),s.jsx("input",{type:"range",min:"0",max:"100",value:e.lowCapacityThreshold,onChange:N=>x("lowCapacityThreshold",parseInt(N.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"0%"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100%"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(P4,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Release Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure release approval and documentation requirements"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Release Approval"}),s.jsx("input",{type:"checkbox",checked:e.requireReleaseApproval,onChange:N=>x("requireReleaseApproval",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approver Role"}),s.jsxs("select",{value:e.releaseApproverRole,onChange:N=>x("releaseApproverRole",N.target.value),disabled:!e.requireReleaseApproval,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[s.jsx("option",{value:"MANAGER",children:"Manager"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Release Photos"}),s.jsx("input",{type:"checkbox",checked:e.requireReleasePhotos,onChange:N=>x("requireReleasePhotos",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require ID Verification"}),s.jsx("input",{type:"checkbox",checked:e.requireIDVerification,onChange:N=>x("requireIDVerification",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Generate Release Invoice"}),s.jsx("input",{type:"checkbox",checked:e.generateReleaseInvoice,onChange:N=>x("generateReleaseInvoice",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Auto-send Invoice Email"}),s.jsx("input",{type:"checkbox",checked:e.autoSendInvoiceEmail,onChange:N=>x("autoSendInvoiceEmail",N.target.checked),disabled:!e.generateReleaseInvoice,className:"h-5 w-5 text-blue-600 rounded disabled:opacity-50"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Release Signature"}),s.jsx("input",{type:"checkbox",checked:e.requireReleaseSignature,onChange:N=>x("requireReleaseSignature",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Collector ID"}),s.jsx("input",{type:"checkbox",checked:e.requireCollectorID,onChange:N=>x("requireCollectorID",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Allow Proxy Collection"}),s.jsx("input",{type:"checkbox",checked:e.allowProxyCollection,onChange:N=>x("allowProxyCollection",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx(n0,{className:"h-6 w-6 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing Configuration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure storage and release charges"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate per Day (KWD)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:e.storageRatePerDay,onChange:N=>x("storageRatePerDay",parseFloat(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Rate per Box (KWD)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:e.storageRatePerBox,onChange:N=>x("storageRatePerBox",parseFloat(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Charge Partial Day"}),s.jsx("input",{type:"checkbox",checked:e.chargePartialDay,onChange:N=>x("chargePartialDay",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Charge Days"}),s.jsx("input",{type:"number",min:"0",value:e.minimumChargeDays,onChange:N=>x("minimumChargeDays",parseInt(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Handling Fee (KWD)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:e.releaseHandlingFee,onChange:N=>x("releaseHandlingFee",parseFloat(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Per-Box Fee (KWD)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:e.releasePerBoxFee,onChange:N=>x("releasePerBoxFee",parseFloat(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Transport Fee (KWD)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:e.releaseTransportFee,onChange:N=>x("releaseTransportFee",parseFloat(N.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(P4,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Partial Release Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure partial release workflow"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Allow Partial Release"}),s.jsx("input",{type:"checkbox",checked:e.allowPartialRelease,onChange:N=>x("allowPartialRelease",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Boxes per Release"}),s.jsx("input",{type:"number",min:"1",value:e.partialReleaseMinBoxes,onChange:N=>x("partialReleaseMinBoxes",parseInt(N.target.value)),disabled:!e.allowPartialRelease,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Require Partial Approval"}),s.jsx("input",{type:"checkbox",checked:e.requirePartialApproval,onChange:N=>x("requirePartialApproval",N.target.checked),disabled:!e.allowPartialRelease,className:"h-5 w-5 text-blue-600 rounded disabled:opacity-50"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(c5,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure client and staff notifications"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Notify Client on Intake"}),s.jsx("input",{type:"checkbox",checked:e.notifyClientOnIntake,onChange:N=>x("notifyClientOnIntake",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Notify Client on Release"}),s.jsx("input",{type:"checkbox",checked:e.notifyClientOnRelease,onChange:N=>x("notifyClientOnRelease",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Storage Alert Notifications"}),s.jsx("input",{type:"checkbox",checked:e.notifyOnStorageAlert,onChange:N=>x("notifyOnStorageAlert",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]}),s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Storage Alert After (Days)"}),s.jsx("input",{type:"number",min:"1",value:e.storageAlertDays,onChange:N=>x("storageAlertDays",parseInt(N.target.value)),disabled:!e.notifyOnStorageAlert,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),s.jsxs("label",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[s.jsx("span",{className:"text-gray-700",children:"Enable Custom Fields"}),s.jsx("input",{type:"checkbox",checked:e.enableCustomFields,onChange:N=>x("enableCustomFields",N.target.checked),className:"h-5 w-5 text-blue-600 rounded"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-0 bg-white p-4 border-t border-gray-200 -mx-6 -mb-6",children:[s.jsxs("button",{onClick:b,disabled:o||a,className:"px-6 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(r0,{className:"h-5 w-5"}),o?"Resetting...":"Reset to Defaults"]}),s.jsxs("button",{onClick:p,disabled:a||o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),a?"Saving...":"Save Changes"]})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xo,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Failed to load settings"}),s.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})},Kae=[{id:"company",name:"Company & Branding",icon:Cd,path:"company",description:"Company details, logo, colors, and branding settings"},{id:"company-profiles",name:"Company Profiles",icon:nh,path:"company-profiles",description:"Manage customer/vendor profiles (DIOR, JAZEERA, etc.)"},{id:"users",name:"User Management",icon:nh,path:"users",description:"Manage team members, roles, and permissions"},{id:"invoice",name:"Invoice & Templates",icon:Oa,path:"invoice",description:"Customize invoice templates, branding, and layouts"},{id:"billing",name:"Billing & Rates",icon:Uo,path:"billing",description:"Storage rates, payment methods, and subscription"},{id:"integrations",name:"Integrations",icon:ek,path:"integrations",description:"WhatsApp, SMS, email, and third-party connections"},{id:"shipment",name:"Shipment Configuration",icon:_c,path:"shipment",description:"Configure shipment intake, storage, release workflows, and pricing"},{id:"system",name:"System Configuration",icon:s0,path:"system",description:"Racks setup, custom fields, and operational settings"},{id:"security",name:"Security & Access",icon:ig,path:"security",description:"Authentication, permissions, and security policies"},{id:"notifications",name:"Notifications",icon:c5,path:"notifications",description:"Alert preferences, email notifications, and messaging"}],Xae=()=>{const[e,t]=A.useState("company");return s.jsxs("div",{className:"flex h-full bg-gray-50",children:[s.jsxs("div",{className:"w-80 bg-white shadow-lg border-r border-gray-200 overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:s.jsx(Q7,{className:"h-6 w-6 text-primary-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Settings"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Configure your warehouse system"})]})]})}),s.jsx("nav",{className:"p-4 space-y-2",children:Kae.map(r=>{const n=r.icon,a=e===r.id;return s.jsx("button",{onClick:()=>t(r.id),className:`
                  w-full text-left p-4 rounded-lg transition-all duration-200
                  ${a?"bg-primary-50 border border-primary-200 text-primary-700":"hover:bg-gray-50 text-gray-700 border border-transparent"}
                `,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(n,{className:`h-5 w-5 mt-0.5 flex-shrink-0 ${a?"text-primary-600":"text-gray-400"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`font-medium ${a?"text-primary-900":"text-gray-900"}`,children:r.name}),s.jsx("p",{className:`text-sm mt-1 ${a?"text-primary-600":"text-gray-500"}`,children:r.description})]})]})},r.id)})}),s.jsxs("div",{className:"p-4 mt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Quick Stats"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Total Users"}),s.jsx("span",{className:"font-medium text-gray-900",children:"12"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Active Racks"}),s.jsx("span",{className:"font-medium text-gray-900",children:"48"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Monthly Revenue"}),s.jsx("span",{className:"font-medium text-gray-900",children:"2,450 KWD"})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[e==="company"&&s.jsx(Dae,{}),e==="company-profiles"&&s.jsx(Lae,{}),e==="users"&&s.jsx(Fae,{}),e==="invoice"&&s.jsx(Uae,{}),e==="billing"&&s.jsx($ae,{}),e==="integrations"&&s.jsx(zae,{}),e==="shipment"&&s.jsx(Gae,{}),e==="system"&&s.jsx(qae,{}),e==="security"&&s.jsx(Hae,{}),e==="notifications"&&s.jsx(Vae,{})]})})]})};var kt;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(kt||(kt={}));var RA=new Map([[kt.QR_CODE,"QR_CODE"],[kt.AZTEC,"AZTEC"],[kt.CODABAR,"CODABAR"],[kt.CODE_39,"CODE_39"],[kt.CODE_93,"CODE_93"],[kt.CODE_128,"CODE_128"],[kt.DATA_MATRIX,"DATA_MATRIX"],[kt.MAXICODE,"MAXICODE"],[kt.ITF,"ITF"],[kt.EAN_13,"EAN_13"],[kt.EAN_8,"EAN_8"],[kt.PDF_417,"PDF_417"],[kt.RSS_14,"RSS_14"],[kt.RSS_EXPANDED,"RSS_EXPANDED"],[kt.UPC_A,"UPC_A"],[kt.UPC_E,"UPC_E"],[kt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DA;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(DA||(DA={}));function Yae(e){return Object.values(kt).includes(e)}var Qg;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Qg||(Qg={}));var Zae=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Qg.SCAN_TYPE_CAMERA,Qg.SCAN_TYPE_FILE],e}(),KO=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!RA.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,RA.get(t))},e}(),LA=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),Wv;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Wv||(Wv={}));var Jae=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Wv.UNKWOWN_ERROR}},e}(),Qae=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function bl(e){return typeof e>"u"||e===null}var Ou=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),XO=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(a),o=Object.keys(t),c=0,d=o;c<d.length;c++){var u=d[c];if(i.has(u))return r.logError("".concat(u," is not supported videoConstaints."),!0),!1}return!0},e}(),qv={exports:{}};(function(e,t){(function(r,n){n(t)})(Kh,function(r){function n(X){return X==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,l){X.__proto__=l}||function(X,l){for(var h in l)l.hasOwnProperty(h)&&(X[h]=l[h])};function i(X,l){a(X,l);function h(){this.constructor=X}X.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}function o(X,l){var h=Object.setPrototypeOf;h?h(X,l):X.__proto__=l}function c(X,l){l===void 0&&(l=X.constructor);var h=Error.captureStackTrace;h&&h(X,l)}var d=function(X){i(l,X);function l(h){var m=this.constructor,g=X.call(this,h)||this;return Object.defineProperty(g,"name",{value:m.name,enumerable:!1}),o(g,m.prototype),c(g),g}return l}(Error);class u extends d{constructor(l=void 0){super(l),this.message=l}getKind(){return this.constructor.kind}}u.kind="Exception";class f extends u{}f.kind="ArgumentException";class p extends u{}p.kind="IllegalArgumentException";class b{constructor(l){if(this.binarizer=l,l===null)throw new p("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(l,h){return this.binarizer.getBlackRow(l,h)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(l,h,m,g){const y=this.binarizer.getLuminanceSource().crop(l,h,m,g);return new b(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(l))}rotateCounterClockwise45(){const l=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(l))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class x extends u{static getChecksumInstance(){return new x}}x.kind="ChecksumException";class N{constructor(l){this.source=l}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(l,h,m,g,y){for(;y--;)m[g++]=l[h++]}static currentTimeMillis(){return Date.now()}}class w extends u{}w.kind="IndexOutOfBoundsException";class C extends w{constructor(l=void 0,h=void 0){super(h),this.index=l,this.message=h}}C.kind="ArrayIndexOutOfBoundsException";class P{static fill(l,h){for(let m=0,g=l.length;m<g;m++)l[m]=h}static fillWithin(l,h,m,g){P.rangeCheck(l.length,h,m);for(let y=h;y<m;y++)l[y]=g}static rangeCheck(l,h,m){if(h>m)throw new p("fromIndex("+h+") > toIndex("+m+")");if(h<0)throw new C(h);if(m>l)throw new C(m)}static asList(...l){return l}static create(l,h,m){return Array.from({length:l}).map(y=>Array.from({length:h}).fill(m))}static createInt32Array(l,h,m){return Array.from({length:l}).map(y=>Int32Array.from({length:h}).fill(m))}static equals(l,h){if(!l||!h||!l.length||!h.length||l.length!==h.length)return!1;for(let m=0,g=l.length;m<g;m++)if(l[m]!==h[m])return!1;return!0}static hashCode(l){if(l===null)return 0;let h=1;for(const m of l)h=31*h+m;return h}static fillUint8Array(l,h){for(let m=0;m!==l.length;m++)l[m]=h}static copyOf(l,h){return l.slice(0,h)}static copyOfUint8Array(l,h){if(l.length<=h){const m=new Uint8Array(h);return m.set(l),m}return l.slice(0,h)}static copyOfRange(l,h,m){const g=m-h,y=new Int32Array(g);return j.arraycopy(l,h,y,0,g),y}static binarySearch(l,h,m){m===void 0&&(m=P.numberComparator);let g=0,y=l.length-1;for(;g<=y;){const v=y+g>>1,E=m(h,l[v]);if(E>0)g=v+1;else if(E<0)y=v-1;else return v}return-g-1}static numberComparator(l,h){return l-h}}class k{static numberOfTrailingZeros(l){let h;if(l===0)return 32;let m=31;return h=l<<16,h!==0&&(m-=16,l=h),h=l<<8,h!==0&&(m-=8,l=h),h=l<<4,h!==0&&(m-=4,l=h),h=l<<2,h!==0&&(m-=2,l=h),m-(l<<1>>>31)}static numberOfLeadingZeros(l){if(l===0)return 32;let h=1;return l>>>16||(h+=16,l<<=16),l>>>24||(h+=8,l<<=8),l>>>28||(h+=4,l<<=4),l>>>30||(h+=2,l<<=2),h-=l>>>31,h}static toHexString(l){return l.toString(16)}static toBinaryString(l){return String(parseInt(String(l),2))}static bitCount(l){return l=l-(l>>>1&1431655765),l=(l&858993459)+(l>>>2&858993459),l=l+(l>>>4)&252645135,l=l+(l>>>8),l=l+(l>>>16),l&63}static truncDivision(l,h){return Math.trunc(l/h)}static parseInt(l,h=void 0){return parseInt(l,h)}}k.MIN_VALUE_32_BITS=-2147483648,k.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _{constructor(l,h){l===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=l,h==null?this.bits=_.makeArray(l):this.bits=h)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(l){if(l>this.bits.length*32){const h=_.makeArray(l);j.arraycopy(this.bits,0,h,0,this.bits.length),this.bits=h}}get(l){return(this.bits[Math.floor(l/32)]&1<<(l&31))!==0}set(l){this.bits[Math.floor(l/32)]|=1<<(l&31)}flip(l){this.bits[Math.floor(l/32)]^=1<<(l&31)}getNextSet(l){const h=this.size;if(l>=h)return h;const m=this.bits;let g=Math.floor(l/32),y=m[g];y&=~((1<<(l&31))-1);const v=m.length;for(;y===0;){if(++g===v)return h;y=m[g]}const E=g*32+k.numberOfTrailingZeros(y);return E>h?h:E}getNextUnset(l){const h=this.size;if(l>=h)return h;const m=this.bits;let g=Math.floor(l/32),y=~m[g];y&=~((1<<(l&31))-1);const v=m.length;for(;y===0;){if(++g===v)return h;y=~m[g]}const E=g*32+k.numberOfTrailingZeros(y);return E>h?h:E}setBulk(l,h){this.bits[Math.floor(l/32)]=h}setRange(l,h){if(h<l||l<0||h>this.size)throw new p;if(h===l)return;h--;const m=Math.floor(l/32),g=Math.floor(h/32),y=this.bits;for(let v=m;v<=g;v++){const E=v>m?0:l&31,L=(2<<(v<g?31:h&31))-(1<<E);y[v]|=L}}clear(){const l=this.bits.length,h=this.bits;for(let m=0;m<l;m++)h[m]=0}isRange(l,h,m){if(h<l||l<0||h>this.size)throw new p;if(h===l)return!0;h--;const g=Math.floor(l/32),y=Math.floor(h/32),v=this.bits;for(let E=g;E<=y;E++){const I=E>g?0:l&31,q=(2<<(E<y?31:h&31))-(1<<I)&4294967295;if((v[E]&q)!==(m?q:0))return!1}return!0}appendBit(l){this.ensureCapacity(this.size+1),l&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(l,h){if(h<0||h>32)throw new p("Num bits must be between 0 and 32");this.ensureCapacity(this.size+h);for(let m=h;m>0;m--)this.appendBit((l>>m-1&1)===1)}appendBitArray(l){const h=l.size;this.ensureCapacity(this.size+h);for(let m=0;m<h;m++)this.appendBit(l.get(m))}xor(l){if(this.size!==l.size)throw new p("Sizes don't match");const h=this.bits;for(let m=0,g=h.length;m<g;m++)h[m]^=l.bits[m]}toBytes(l,h,m,g){for(let y=0;y<g;y++){let v=0;for(let E=0;E<8;E++)this.get(l)&&(v|=1<<7-E),l++;h[m+y]=v}}getBitArray(){return this.bits}reverse(){const l=new Int32Array(this.bits.length),h=Math.floor((this.size-1)/32),m=h+1,g=this.bits;for(let y=0;y<m;y++){let v=g[y];v=v>>1&1431655765|(v&1431655765)<<1,v=v>>2&858993459|(v&858993459)<<2,v=v>>4&252645135|(v&252645135)<<4,v=v>>8&16711935|(v&16711935)<<8,v=v>>16&65535|(v&65535)<<16,l[h-y]=v}if(this.size!==m*32){const y=m*32-this.size;let v=l[0]>>>y;for(let E=1;E<m;E++){const I=l[E];v|=I<<32-y,l[E-1]=v,v=I>>>y}l[m-1]=v}this.bits=l}static makeArray(l){return new Int32Array(Math.floor((l+31)/32))}equals(l){if(!(l instanceof _))return!1;const h=l;return this.size===h.size&&P.equals(this.bits,h.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let l="";for(let h=0,m=this.size;h<m;h++)h&7||(l+=" "),l+=this.get(h)?"X":".";return l}clone(){return new _(this.size,this.bits.slice())}}var O;(function(X){X[X.OTHER=0]="OTHER",X[X.PURE_BARCODE=1]="PURE_BARCODE",X[X.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",X[X.TRY_HARDER=3]="TRY_HARDER",X[X.CHARACTER_SET=4]="CHARACTER_SET",X[X.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",X[X.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",X[X.ASSUME_GS1=7]="ASSUME_GS1",X[X.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",X[X.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",X[X.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(O||(O={}));var $=O;class F extends u{static getFormatInstance(){return new F}}F.kind="FormatException";var U;(function(X){X[X.Cp437=0]="Cp437",X[X.ISO8859_1=1]="ISO8859_1",X[X.ISO8859_2=2]="ISO8859_2",X[X.ISO8859_3=3]="ISO8859_3",X[X.ISO8859_4=4]="ISO8859_4",X[X.ISO8859_5=5]="ISO8859_5",X[X.ISO8859_6=6]="ISO8859_6",X[X.ISO8859_7=7]="ISO8859_7",X[X.ISO8859_8=8]="ISO8859_8",X[X.ISO8859_9=9]="ISO8859_9",X[X.ISO8859_10=10]="ISO8859_10",X[X.ISO8859_11=11]="ISO8859_11",X[X.ISO8859_13=12]="ISO8859_13",X[X.ISO8859_14=13]="ISO8859_14",X[X.ISO8859_15=14]="ISO8859_15",X[X.ISO8859_16=15]="ISO8859_16",X[X.SJIS=16]="SJIS",X[X.Cp1250=17]="Cp1250",X[X.Cp1251=18]="Cp1251",X[X.Cp1252=19]="Cp1252",X[X.Cp1256=20]="Cp1256",X[X.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",X[X.UTF8=22]="UTF8",X[X.ASCII=23]="ASCII",X[X.Big5=24]="Big5",X[X.GB18030=25]="GB18030",X[X.EUC_KR=26]="EUC_KR"})(U||(U={}));class R{constructor(l,h,m,...g){this.valueIdentifier=l,this.name=m,typeof h=="number"?this.values=Int32Array.from([h]):this.values=h,this.otherEncodingNames=g,R.VALUE_IDENTIFIER_TO_ECI.set(l,this),R.NAME_TO_ECI.set(m,this);const y=this.values;for(let v=0,E=y.length;v!==E;v++){const I=y[v];R.VALUES_TO_ECI.set(I,this)}for(const v of g)R.NAME_TO_ECI.set(v,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(l){if(l<0||l>=900)throw new F("incorect value");const h=R.VALUES_TO_ECI.get(l);if(h===void 0)throw new F("incorect value");return h}static getCharacterSetECIByName(l){const h=R.NAME_TO_ECI.get(l);if(h===void 0)throw new F("incorect value");return h}equals(l){if(!(l instanceof R))return!1;const h=l;return this.getName()===h.getName()}}R.VALUE_IDENTIFIER_TO_ECI=new Map,R.VALUES_TO_ECI=new Map,R.NAME_TO_ECI=new Map,R.Cp437=new R(U.Cp437,Int32Array.from([0,2]),"Cp437"),R.ISO8859_1=new R(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),R.ISO8859_2=new R(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),R.ISO8859_3=new R(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),R.ISO8859_4=new R(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),R.ISO8859_5=new R(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),R.ISO8859_6=new R(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),R.ISO8859_7=new R(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),R.ISO8859_8=new R(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),R.ISO8859_9=new R(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),R.ISO8859_10=new R(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),R.ISO8859_11=new R(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),R.ISO8859_13=new R(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),R.ISO8859_14=new R(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),R.ISO8859_15=new R(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),R.ISO8859_16=new R(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),R.SJIS=new R(U.SJIS,20,"SJIS","Shift_JIS"),R.Cp1250=new R(U.Cp1250,21,"Cp1250","windows-1250"),R.Cp1251=new R(U.Cp1251,22,"Cp1251","windows-1251"),R.Cp1252=new R(U.Cp1252,23,"Cp1252","windows-1252"),R.Cp1256=new R(U.Cp1256,24,"Cp1256","windows-1256"),R.UnicodeBigUnmarked=new R(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),R.UTF8=new R(U.UTF8,26,"UTF8","UTF-8"),R.ASCII=new R(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),R.Big5=new R(U.Big5,28,"Big5"),R.GB18030=new R(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),R.EUC_KR=new R(U.EUC_KR,30,"EUC_KR","EUC-KR");class z extends u{}z.kind="UnsupportedOperationException";class M{static decode(l,h){const m=this.encodingName(h);return this.customDecoder?this.customDecoder(l,m):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(m)?this.decodeFallback(l,m):new TextDecoder(m).decode(l)}static shouldDecodeOnFallback(l){return!M.isBrowser()&&l==="ISO-8859-1"}static encode(l,h){const m=this.encodingName(h);return this.customEncoder?this.customEncoder(l,m):typeof TextEncoder>"u"?this.encodeFallback(l):new TextEncoder().encode(l)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(l){return typeof l=="string"?l:l.getName()}static encodingCharacterSet(l){return l instanceof R?l:R.getCharacterSetECIByName(l)}static decodeFallback(l,h){const m=this.encodingCharacterSet(h);if(M.isDecodeFallbackSupported(m)){let g="";for(let y=0,v=l.length;y<v;y++){let E=l[y].toString(16);E.length<2&&(E="0"+E),g+="%"+E}return decodeURIComponent(g)}if(m.equals(R.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(l.buffer));throw new z(`Encoding ${this.encodingName(h)} not supported by fallback.`)}static isDecodeFallbackSupported(l){return l.equals(R.UTF8)||l.equals(R.ISO8859_1)||l.equals(R.ASCII)}static encodeFallback(l){const m=btoa(unescape(encodeURIComponent(l))).split(""),g=[];for(let y=0;y<m.length;y++)g.push(m[y].charCodeAt(0));return new Uint8Array(g)}}class W{static castAsNonUtf8Char(l,h=null){const m=h?h.getName():this.ISO88591;return M.decode(new Uint8Array([l]),m)}static guessEncoding(l,h){if(h!=null&&h.get($.CHARACTER_SET)!==void 0)return h.get($.CHARACTER_SET).toString();const m=l.length;let g=!0,y=!0,v=!0,E=0,I=0,L=0,q=0,Y=0,re=0,he=0,Ne=0,Ae=0,_e=0,We=0;const tt=l.length>3&&l[0]===239&&l[1]===187&&l[2]===191;for(let st=0;st<m&&(g||y||v);st++){const rt=l[st]&255;v&&(E>0?rt&128?E--:v=!1:rt&128&&(rt&64?(E++,rt&32?(E++,rt&16?(E++,rt&8?v=!1:q++):L++):I++):v=!1)),g&&(rt>127&&rt<160?g=!1:rt>159&&(rt<192||rt===215||rt===247)&&We++),y&&(Y>0?rt<64||rt===127||rt>252?y=!1:Y--:rt===128||rt===160||rt>239?y=!1:rt>160&&rt<224?(re++,Ne=0,he++,he>Ae&&(Ae=he)):rt>127?(Y++,he=0,Ne++,Ne>_e&&(_e=Ne)):(he=0,Ne=0))}return v&&E>0&&(v=!1),y&&Y>0&&(y=!1),v&&(tt||I+L+q>0)?W.UTF8:y&&(W.ASSUME_SHIFT_JIS||Ae>=3||_e>=3)?W.SHIFT_JIS:g&&y?Ae===2&&re===2||We*10>=m?W.SHIFT_JIS:W.ISO88591:g?W.ISO88591:y?W.SHIFT_JIS:v?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(l,...h){let m=-1;function g(v,E,I,L,q,Y){if(v==="%%")return"%";if(h[++m]===void 0)return;v=L?parseInt(L.substr(1)):void 0;let re=q?parseInt(q.substr(1)):void 0,he;switch(Y){case"s":he=h[m];break;case"c":he=h[m][0];break;case"f":he=parseFloat(h[m]).toFixed(v);break;case"p":he=parseFloat(h[m]).toPrecision(v);break;case"e":he=parseFloat(h[m]).toExponential(v);break;case"x":he=parseInt(h[m]).toString(re||16);break;case"d":he=parseFloat(parseInt(h[m],re||10).toPrecision(v)).toFixed(0);break}he=typeof he=="object"?JSON.stringify(he):(+he).toString(re);let Ne=parseInt(I),Ae=I&&I[0]+""=="0"?"0":" ";for(;he.length<Ne;)he=E!==void 0?he+Ae:Ae+he;return he}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(y,g)}static getBytes(l,h){return M.encode(l,h)}static getCharCode(l,h=0){return l.charCodeAt(h)}static getCharAt(l){return String.fromCharCode(l)}}W.SHIFT_JIS=R.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=R.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=R.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class J{constructor(l=""){this.value=l}enableDecoding(l){return this.encoding=l,this}append(l){return typeof l=="string"?this.value+=l.toString():this.encoding?this.value+=W.castAsNonUtf8Char(l,this.encoding):this.value+=String.fromCharCode(l),this}appendChars(l,h,m){for(let g=h;h<h+m;g++)this.append(l[g]);return this}length(){return this.value.length}charAt(l){return this.value.charAt(l)}deleteCharAt(l){this.value=this.value.substr(0,l)+this.value.substring(l+1)}setCharAt(l,h){this.value=this.value.substr(0,l)+h+this.value.substr(l+1)}substring(l,h){return this.value.substring(l,h)}setLengthToZero(){this.value=""}toString(){return this.value}insert(l,h){this.value=this.value.substr(0,l)+h+this.value.substr(l+h.length)}}class K{constructor(l,h,m,g){if(this.width=l,this.height=h,this.rowSize=m,this.bits=g,h==null&&(h=l),this.height=h,l<1||h<1)throw new p("Both dimensions must be greater than 0");m==null&&(m=Math.floor((l+31)/32)),this.rowSize=m,g==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(l){const h=l.length,m=l[0].length,g=new K(m,h);for(let y=0;y<h;y++){const v=l[y];for(let E=0;E<m;E++)v[E]&&g.set(E,y)}return g}static parseFromString(l,h,m){if(l===null)throw new p("stringRepresentation cannot be null");const g=new Array(l.length);let y=0,v=0,E=-1,I=0,L=0;for(;L<l.length;)if(l.charAt(L)===`
`||l.charAt(L)==="\r"){if(y>v){if(E===-1)E=y-v;else if(y-v!==E)throw new p("row lengths do not match");v=y,I++}L++}else if(l.substring(L,L+h.length)===h)L+=h.length,g[y]=!0,y++;else if(l.substring(L,L+m.length)===m)L+=m.length,g[y]=!1,y++;else throw new p("illegal character encountered: "+l.substring(L));if(y>v){if(E===-1)E=y-v;else if(y-v!==E)throw new p("row lengths do not match");I++}const q=new K(E,I);for(let Y=0;Y<y;Y++)g[Y]&&q.set(Math.floor(Y%E),Math.floor(Y/E));return q}get(l,h){const m=h*this.rowSize+Math.floor(l/32);return(this.bits[m]>>>(l&31)&1)!==0}set(l,h){const m=h*this.rowSize+Math.floor(l/32);this.bits[m]|=1<<(l&31)&4294967295}unset(l,h){const m=h*this.rowSize+Math.floor(l/32);this.bits[m]&=~(1<<(l&31)&4294967295)}flip(l,h){const m=h*this.rowSize+Math.floor(l/32);this.bits[m]^=1<<(l&31)&4294967295}xor(l){if(this.width!==l.getWidth()||this.height!==l.getHeight()||this.rowSize!==l.getRowSize())throw new p("input matrix dimensions do not match");const h=new _(Math.floor(this.width/32)+1),m=this.rowSize,g=this.bits;for(let y=0,v=this.height;y<v;y++){const E=y*m,I=l.getRow(y,h).getBitArray();for(let L=0;L<m;L++)g[E+L]^=I[L]}}clear(){const l=this.bits,h=l.length;for(let m=0;m<h;m++)l[m]=0}setRegion(l,h,m,g){if(h<0||l<0)throw new p("Left and top must be nonnegative");if(g<1||m<1)throw new p("Height and width must be at least 1");const y=l+m,v=h+g;if(v>this.height||y>this.width)throw new p("The region must fit inside the matrix");const E=this.rowSize,I=this.bits;for(let L=h;L<v;L++){const q=L*E;for(let Y=l;Y<y;Y++)I[q+Math.floor(Y/32)]|=1<<(Y&31)&4294967295}}getRow(l,h){h==null||h.getSize()<this.width?h=new _(this.width):h.clear();const m=this.rowSize,g=this.bits,y=l*m;for(let v=0;v<m;v++)h.setBulk(v*32,g[y+v]);return h}setRow(l,h){j.arraycopy(h.getBitArray(),0,this.bits,l*this.rowSize,this.rowSize)}rotate180(){const l=this.getWidth(),h=this.getHeight();let m=new _(l),g=new _(l);for(let y=0,v=Math.floor((h+1)/2);y<v;y++)m=this.getRow(y,m),g=this.getRow(h-1-y,g),m.reverse(),g.reverse(),this.setRow(y,g),this.setRow(h-1-y,m)}getEnclosingRectangle(){const l=this.width,h=this.height,m=this.rowSize,g=this.bits;let y=l,v=h,E=-1,I=-1;for(let L=0;L<h;L++)for(let q=0;q<m;q++){const Y=g[L*m+q];if(Y!==0){if(L<v&&(v=L),L>I&&(I=L),q*32<y){let re=0;for(;!(Y<<31-re&4294967295);)re++;q*32+re<y&&(y=q*32+re)}if(q*32+31>E){let re=31;for(;!(Y>>>re);)re--;q*32+re>E&&(E=q*32+re)}}}return E<y||I<v?null:Int32Array.from([y,v,E-y+1,I-v+1])}getTopLeftOnBit(){const l=this.rowSize,h=this.bits;let m=0;for(;m<h.length&&h[m]===0;)m++;if(m===h.length)return null;const g=m/l;let y=m%l*32;const v=h[m];let E=0;for(;!(v<<31-E&4294967295);)E++;return y+=E,Int32Array.from([y,g])}getBottomRightOnBit(){const l=this.rowSize,h=this.bits;let m=h.length-1;for(;m>=0&&h[m]===0;)m--;if(m<0)return null;const g=Math.floor(m/l);let y=Math.floor(m%l)*32;const v=h[m];let E=31;for(;!(v>>>E);)E--;return y+=E,Int32Array.from([y,g])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(l){if(!(l instanceof K))return!1;const h=l;return this.width===h.width&&this.height===h.height&&this.rowSize===h.rowSize&&P.equals(this.bits,h.bits)}hashCode(){let l=this.width;return l=31*l+this.width,l=31*l+this.height,l=31*l+this.rowSize,l=31*l+P.hashCode(this.bits),l}toString(l="X ",h="  ",m=`
`){return this.buildToString(l,h,m)}buildToString(l,h,m){let g=new J;for(let y=0,v=this.height;y<v;y++){for(let E=0,I=this.width;E<I;E++)g.append(this.get(E,y)?l:h);g.append(m)}return g.toString()}clone(){return new K(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends u{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class me extends N{constructor(l){super(l),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(l,h){const m=this.getLuminanceSource(),g=m.getWidth();h==null||h.getSize()<g?h=new _(g):h.clear(),this.initArrays(g);const y=m.getRow(l,this.luminances),v=this.buckets;for(let I=0;I<g;I++)v[(y[I]&255)>>me.LUMINANCE_SHIFT]++;const E=me.estimateBlackPoint(v);if(g<3)for(let I=0;I<g;I++)(y[I]&255)<E&&h.set(I);else{let I=y[0]&255,L=y[1]&255;for(let q=1;q<g-1;q++){const Y=y[q+1]&255;(L*4-I-Y)/2<E&&h.set(q),I=L,L=Y}}return h}getBlackMatrix(){const l=this.getLuminanceSource(),h=l.getWidth(),m=l.getHeight(),g=new K(h,m);this.initArrays(h);const y=this.buckets;for(let I=1;I<5;I++){const L=Math.floor(m*I/5),q=l.getRow(L,this.luminances),Y=Math.floor(h*4/5);for(let re=Math.floor(h/5);re<Y;re++){const he=q[re]&255;y[he>>me.LUMINANCE_SHIFT]++}}const v=me.estimateBlackPoint(y),E=l.getMatrix();for(let I=0;I<m;I++){const L=I*h;for(let q=0;q<h;q++)(E[L+q]&255)<v&&g.set(q,I)}return g}createBinarizer(l){return new me(l)}initArrays(l){this.luminances.length<l&&(this.luminances=new Uint8ClampedArray(l));const h=this.buckets;for(let m=0;m<me.LUMINANCE_BUCKETS;m++)h[m]=0}static estimateBlackPoint(l){const h=l.length;let m=0,g=0,y=0;for(let q=0;q<h;q++)l[q]>y&&(g=q,y=l[q]),l[q]>m&&(m=l[q]);let v=0,E=0;for(let q=0;q<h;q++){const Y=q-g,re=l[q]*Y*Y;re>E&&(v=q,E=re)}if(g>v){const q=g;g=v,v=q}if(v-g<=h/16)throw new V;let I=v-1,L=-1;for(let q=v-1;q>g;q--){const Y=q-g,re=Y*Y*(v-q)*(m-l[q]);re>L&&(I=q,L=re)}return I<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class se extends me{constructor(l){super(l),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const l=this.getLuminanceSource(),h=l.getWidth(),m=l.getHeight();if(h>=se.MINIMUM_DIMENSION&&m>=se.MINIMUM_DIMENSION){const g=l.getMatrix();let y=h>>se.BLOCK_SIZE_POWER;h&se.BLOCK_SIZE_MASK&&y++;let v=m>>se.BLOCK_SIZE_POWER;m&se.BLOCK_SIZE_MASK&&v++;const E=se.calculateBlackPoints(g,y,v,h,m),I=new K(h,m);se.calculateThresholdForBlock(g,y,v,h,m,E,I),this.matrix=I}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(l){return new se(l)}static calculateThresholdForBlock(l,h,m,g,y,v,E){const I=y-se.BLOCK_SIZE,L=g-se.BLOCK_SIZE;for(let q=0;q<m;q++){let Y=q<<se.BLOCK_SIZE_POWER;Y>I&&(Y=I);const re=se.cap(q,2,m-3);for(let he=0;he<h;he++){let Ne=he<<se.BLOCK_SIZE_POWER;Ne>L&&(Ne=L);const Ae=se.cap(he,2,h-3);let _e=0;for(let tt=-2;tt<=2;tt++){const st=v[re+tt];_e+=st[Ae-2]+st[Ae-1]+st[Ae]+st[Ae+1]+st[Ae+2]}const We=_e/25;se.thresholdBlock(l,Ne,Y,We,g,E)}}}static cap(l,h,m){return l<h?h:l>m?m:l}static thresholdBlock(l,h,m,g,y,v){for(let E=0,I=m*y+h;E<se.BLOCK_SIZE;E++,I+=y)for(let L=0;L<se.BLOCK_SIZE;L++)(l[I+L]&255)<=g&&v.set(h+L,m+E)}static calculateBlackPoints(l,h,m,g,y){const v=y-se.BLOCK_SIZE,E=g-se.BLOCK_SIZE,I=new Array(m);for(let L=0;L<m;L++){I[L]=new Int32Array(h);let q=L<<se.BLOCK_SIZE_POWER;q>v&&(q=v);for(let Y=0;Y<h;Y++){let re=Y<<se.BLOCK_SIZE_POWER;re>E&&(re=E);let he=0,Ne=255,Ae=0;for(let We=0,tt=q*g+re;We<se.BLOCK_SIZE;We++,tt+=g){for(let st=0;st<se.BLOCK_SIZE;st++){const rt=l[tt+st]&255;he+=rt,rt<Ne&&(Ne=rt),rt>Ae&&(Ae=rt)}if(Ae-Ne>se.MIN_DYNAMIC_RANGE)for(We++,tt+=g;We<se.BLOCK_SIZE;We++,tt+=g)for(let st=0;st<se.BLOCK_SIZE;st++)he+=l[tt+st]&255}let _e=he>>se.BLOCK_SIZE_POWER*2;if(Ae-Ne<=se.MIN_DYNAMIC_RANGE&&(_e=Ne/2,L>0&&Y>0)){const We=(I[L-1][Y]+2*I[L][Y-1]+I[L-1][Y-1])/4;Ne<We&&(_e=We)}I[L][Y]=_e}}return I}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class oe{constructor(l,h){this.width=l,this.height=h}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(l,h,m,g){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const l=new Uint8ClampedArray(this.width);let h=new J;for(let m=0;m<this.height;m++){const g=this.getRow(m,l);for(let y=0;y<this.width;y++){const v=g[y]&255;let E;v<64?E="#":v<128?E="+":v<192?E=".":E=" ",h.append(E)}h.append(`
`)}return h.toString()}}class ye extends oe{constructor(l){super(l.getWidth(),l.getHeight()),this.delegate=l}getRow(l,h){const m=this.delegate.getRow(l,h),g=this.getWidth();for(let y=0;y<g;y++)m[y]=255-(m[y]&255);return m}getMatrix(){const l=this.delegate.getMatrix(),h=this.getWidth()*this.getHeight(),m=new Uint8ClampedArray(h);for(let g=0;g<h;g++)m[g]=255-(l[g]&255);return m}isCropSupported(){return this.delegate.isCropSupported()}crop(l,h,m,g){return new ye(this.delegate.crop(l,h,m,g))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ye(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ye(this.delegate.rotateCounterClockwise45())}}class we extends oe{constructor(l){super(l.width,l.height),this.canvas=l,this.tempCanvasElement=null,this.buffer=we.makeBufferFromCanvasImageData(l)}static makeBufferFromCanvasImageData(l){const h=l.getContext("2d").getImageData(0,0,l.width,l.height);return we.toGrayscaleBuffer(h.data,l.width,l.height)}static toGrayscaleBuffer(l,h,m){const g=new Uint8ClampedArray(h*m);for(let y=0,v=0,E=l.length;y<E;y+=4,v++){let I;if(l[y+3]===0)I=255;else{const q=l[y],Y=l[y+1],re=l[y+2];I=306*q+601*Y+117*re+512>>10}g[v]=I}return g}getRow(l,h){if(l<0||l>=this.getHeight())throw new p("Requested row is outside the image: "+l);const m=this.getWidth(),g=l*m;return h===null?h=this.buffer.slice(g,g+m):(h.length<m&&(h=new Uint8ClampedArray(m)),h.set(this.buffer.slice(g,g+m))),h}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(l,h,m,g){return super.crop(l,h,m,g),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const l=this.canvas.ownerDocument.createElement("canvas");l.width=this.canvas.width,l.height=this.canvas.height,this.tempCanvasElement=l}return this.tempCanvasElement}rotate(l){const h=this.getTempCanvasElement(),m=h.getContext("2d"),g=l*we.DEGREE_TO_RADIANS,y=this.canvas.width,v=this.canvas.height,E=Math.ceil(Math.abs(Math.cos(g))*y+Math.abs(Math.sin(g))*v),I=Math.ceil(Math.abs(Math.sin(g))*y+Math.abs(Math.cos(g))*v);return h.width=E,h.height=I,m.translate(E/2,I/2),m.rotate(g),m.drawImage(this.canvas,y/-2,v/-2),this.buffer=we.makeBufferFromCanvasImageData(h),this}invert(){return new ye(this)}}we.DEGREE_TO_RADIANS=Math.PI/180;class te{constructor(l,h,m){this.deviceId=l,this.label=h,this.kind="videoinput",this.groupId=m||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||Kh||self||window||void 0)&&(globalThis||Kh||self||window||void 0).__awaiter||function(X,l,h,m){function g(y){return y instanceof h?y:new h(function(v){v(y)})}return new(h||(h=Promise))(function(y,v){function E(q){try{L(m.next(q))}catch(Y){v(Y)}}function I(q){try{L(m.throw(q))}catch(Y){v(Y)}}function L(q){q.done?y(q.value):g(q.value).then(E,I)}L((m=m.apply(X,l||[])).next())})};class Q{constructor(l,h=500,m){this.reader=l,this.timeBetweenScansMillis=h,this._hints=m,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(l){this._timeBetweenDecodingAttempts=l<0?0:l}set hints(l){this._hints=l||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const l=yield navigator.mediaDevices.enumerateDevices(),h=[];for(const m of l){const g=m.kind==="video"?"videoinput":m.kind;if(g!=="videoinput")continue;const y=m.deviceId||m.id,v=m.label||`Video device ${h.length+1}`,E=m.groupId,I={deviceId:y,label:v,kind:g,groupId:E};h.push(I)}return h})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(h=>new te(h.deviceId,h.label))})}findDeviceById(l){return G(this,void 0,void 0,function*(){const h=yield this.listVideoInputDevices();return h?h.find(m=>m.deviceId===l):null})}decodeFromInputVideoDevice(l,h){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(l,h)})}decodeOnceFromVideoDevice(l,h){return G(this,void 0,void 0,function*(){this.reset();let m;l?m={deviceId:{exact:l}}:m={facingMode:"environment"};const g={video:m};return yield this.decodeOnceFromConstraints(g,h)})}decodeOnceFromConstraints(l,h){return G(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeOnceFromStream(m,h)})}decodeOnceFromStream(l,h){return G(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(l,h);return yield this.decodeOnce(m)})}decodeFromInputVideoDeviceContinuously(l,h,m){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(l,h,m)})}decodeFromVideoDevice(l,h,m){return G(this,void 0,void 0,function*(){let g;l?g={deviceId:{exact:l}}:g={facingMode:"environment"};const y={video:g};return yield this.decodeFromConstraints(y,h,m)})}decodeFromConstraints(l,h,m){return G(this,void 0,void 0,function*(){const g=yield navigator.mediaDevices.getUserMedia(l);return yield this.decodeFromStream(g,h,m)})}decodeFromStream(l,h,m){return G(this,void 0,void 0,function*(){this.reset();const g=yield this.attachStreamToVideo(l,h);return yield this.decodeContinuously(g,m)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(l,h){return G(this,void 0,void 0,function*(){const m=this.prepareVideoElement(h);return this.addVideoSource(m,l),this.videoElement=m,this.stream=l,yield this.playVideoOnLoadAsync(m),m})}playVideoOnLoadAsync(l){return new Promise((h,m)=>this.playVideoOnLoad(l,()=>h()))}playVideoOnLoad(l,h){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(l),l.addEventListener("ended",this.videoEndedListener),l.addEventListener("canplay",this.videoCanPlayListener),l.addEventListener("playing",h),this.tryPlayVideo(l)}isVideoPlaying(l){return l.currentTime>0&&!l.paused&&!l.ended&&l.readyState>2}tryPlayVideo(l){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(l)){console.warn("Trying to play video that is already playing.");return}try{yield l.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(l,h){const m=document.getElementById(l);if(!m)throw new f(`element with id '${l}' not found`);if(m.nodeName.toLowerCase()!==h.toLowerCase())throw new f(`element with id '${l}' must be an ${h} element`);return m}decodeFromImage(l,h){if(!l&&!h)throw new f("either imageElement with a src set or an url must be provided");return h&&!l?this.decodeFromImageUrl(h):this.decodeFromImageElement(l)}decodeFromVideo(l,h){if(!l&&!h)throw new f("Either an element with a src set or an URL must be provided");return h&&!l?this.decodeFromVideoUrl(h):this.decodeFromVideoElement(l)}decodeFromVideoContinuously(l,h,m){if(l===void 0&&h===void 0)throw new f("Either an element with a src set or an URL must be provided");return h&&!l?this.decodeFromVideoUrlContinuously(h,m):this.decodeFromVideoElementContinuously(l,m)}decodeFromImageElement(l){if(!l)throw new f("An image element must be provided.");this.reset();const h=this.prepareImageElement(l);this.imageElement=h;let m;return this.isImageLoaded(h)?m=this.decodeOnce(h,!1,!0):m=this._decodeOnLoadImage(h),m}decodeFromVideoElement(l){const h=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideo(h)}decodeFromVideoElementContinuously(l,h){const m=this._decodeFromVideoElementSetup(l);return this._decodeOnLoadVideoContinuously(m,h)}_decodeFromVideoElementSetup(l){if(!l)throw new f("A video element must be provided.");this.reset();const h=this.prepareVideoElement(l);return this.videoElement=h,h}decodeFromImageUrl(l){if(!l)throw new f("An URL must be provided.");this.reset();const h=this.prepareImageElement();this.imageElement=h;const m=this._decodeOnLoadImage(h);return h.src=l,m}decodeFromVideoUrl(l){if(!l)throw new f("An URL must be provided.");this.reset();const h=this.prepareVideoElement(),m=this.decodeFromVideoElement(h);return h.src=l,m}decodeFromVideoUrlContinuously(l,h){if(!l)throw new f("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),g=this.decodeFromVideoElementContinuously(m,h);return m.src=l,g}_decodeOnLoadImage(l){return new Promise((h,m)=>{this.imageLoadedListener=()=>this.decodeOnce(l,!1,!0).then(h,m),l.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(l){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(l),yield this.decodeOnce(l)})}_decodeOnLoadVideoContinuously(l,h){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(l),this.decodeContinuously(l,h)})}isImageLoaded(l){return!(!l.complete||l.naturalWidth===0)}prepareImageElement(l){let h;return typeof l>"u"&&(h=document.createElement("img"),h.width=200,h.height=200),typeof l=="string"&&(h=this.getMediaElement(l,"img")),l instanceof HTMLImageElement&&(h=l),h}prepareVideoElement(l){let h;return!l&&typeof document<"u"&&(h=document.createElement("video"),h.width=200,h.height=200),typeof l=="string"&&(h=this.getMediaElement(l,"video")),l instanceof HTMLVideoElement&&(h=l),h.setAttribute("autoplay","true"),h.setAttribute("muted","true"),h.setAttribute("playsinline","true"),h}decodeOnce(l,h=!0,m=!0){this._stopAsyncDecode=!1;const g=(y,v)=>{if(this._stopAsyncDecode){v(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const E=this.decode(l);y(E)}catch(E){const I=h&&E instanceof V,q=(E instanceof x||E instanceof F)&&m;if(I||q)return setTimeout(g,this._timeBetweenDecodingAttempts,y,v);v(E)}};return new Promise((y,v)=>g(y,v))}decodeContinuously(l,h){this._stopContinuousDecode=!1;const m=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const g=this.decode(l);h(g,null),setTimeout(m,this.timeBetweenScansMillis)}catch(g){h(null,g);const y=g instanceof x||g instanceof F,v=g instanceof V;(y||v)&&setTimeout(m,this._timeBetweenDecodingAttempts)}};m()}decode(l){const h=this.createBinaryBitmap(l);return this.decodeBitmap(h)}_isHTMLVideoElement(l){return l.videoWidth!==0}drawFrameOnCanvas(l,h,m){h||(h={sx:0,sy:0,sWidth:l.videoWidth,sHeight:l.videoHeight,dx:0,dy:0,dWidth:l.videoWidth,dHeight:l.videoHeight}),m||(m=this.captureCanvasContext),m.drawImage(l,h.sx,h.sy,h.sWidth,h.sHeight,h.dx,h.dy,h.dWidth,h.dHeight)}drawImageOnCanvas(l,h,m=this.captureCanvasContext){h||(h={sx:0,sy:0,sWidth:l.naturalWidth,sHeight:l.naturalHeight,dx:0,dy:0,dWidth:l.naturalWidth,dHeight:l.naturalHeight}),m||(m=this.captureCanvasContext),m.drawImage(l,h.sx,h.sy,h.sWidth,h.sHeight,h.dx,h.dy,h.dWidth,h.dHeight)}createBinaryBitmap(l){this.getCaptureCanvasContext(l),this._isHTMLVideoElement(l)?this.drawFrameOnCanvas(l):this.drawImageOnCanvas(l);const h=this.getCaptureCanvas(l),m=new we(h),g=new se(m);return new b(g)}getCaptureCanvasContext(l){if(!this.captureCanvasContext){const m=this.getCaptureCanvas(l).getContext("2d");this.captureCanvasContext=m}return this.captureCanvasContext}getCaptureCanvas(l){if(!this.captureCanvas){const h=this.createCaptureCanvas(l);this.captureCanvas=h}return this.captureCanvas}decodeBitmap(l){return this.reader.decode(l,this._hints)}createCaptureCanvas(l){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const h=document.createElement("canvas");let m,g;return typeof l<"u"&&(l instanceof HTMLVideoElement?(m=l.videoWidth,g=l.videoHeight):l instanceof HTMLImageElement&&(m=l.naturalWidth||l.width,g=l.naturalHeight||l.height)),h.style.width=m+"px",h.style.height=g+"px",h.width=m,h.height=g,h}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(l=>l.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(l,h){try{l.srcObject=h}catch{l.src=URL.createObjectURL(h)}}cleanVideoSource(l){try{l.srcObject=null}catch{l.src=""}this.videoElement.removeAttribute("src")}}class le{constructor(l,h,m=h==null?0:8*h.length,g,y,v=j.currentTimeMillis()){this.text=l,this.rawBytes=h,this.numBits=m,this.resultPoints=g,this.format=y,this.timestamp=v,this.text=l,this.rawBytes=h,m==null?this.numBits=h==null?0:8*h.length:this.numBits=m,this.resultPoints=g,this.format=y,this.resultMetadata=null,v==null?this.timestamp=j.currentTimeMillis():this.timestamp=v}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(l,h){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(l,h)}putAllMetadata(l){l!==null&&(this.resultMetadata===null?this.resultMetadata=l:this.resultMetadata=new Map(l))}addResultPoints(l){const h=this.resultPoints;if(h===null)this.resultPoints=l;else if(l!==null&&l.length>0){const m=new Array(h.length+l.length);j.arraycopy(h,0,m,0,h.length),j.arraycopy(l,0,m,h.length,l.length),this.resultPoints=m}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ve;(function(X){X[X.AZTEC=0]="AZTEC",X[X.CODABAR=1]="CODABAR",X[X.CODE_39=2]="CODE_39",X[X.CODE_93=3]="CODE_93",X[X.CODE_128=4]="CODE_128",X[X.DATA_MATRIX=5]="DATA_MATRIX",X[X.EAN_8=6]="EAN_8",X[X.EAN_13=7]="EAN_13",X[X.ITF=8]="ITF",X[X.MAXICODE=9]="MAXICODE",X[X.PDF_417=10]="PDF_417",X[X.QR_CODE=11]="QR_CODE",X[X.RSS_14=12]="RSS_14",X[X.RSS_EXPANDED=13]="RSS_EXPANDED",X[X.UPC_A=14]="UPC_A",X[X.UPC_E=15]="UPC_E",X[X.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ve||(ve={}));var xe=ve,ke;(function(X){X[X.OTHER=0]="OTHER",X[X.ORIENTATION=1]="ORIENTATION",X[X.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",X[X.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",X[X.ISSUE_NUMBER=4]="ISSUE_NUMBER",X[X.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",X[X.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",X[X.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",X[X.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",X[X.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",X[X.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ke||(ke={}));var Re=ke;class be{constructor(l,h,m,g,y=-1,v=-1){this.rawBytes=l,this.text=h,this.byteSegments=m,this.ecLevel=g,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=v,this.numBits=l==null?0:8*l.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(l){this.numBits=l}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(l){this.errorsCorrected=l}getErasures(){return this.erasures}setErasures(l){this.erasures=l}getOther(){return this.other}setOther(l){this.other=l}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Te{exp(l){return this.expTable[l]}log(l){if(l===0)throw new p;return this.logTable[l]}static addOrSubtract(l,h){return l^h}}class Ve{constructor(l,h){if(h.length===0)throw new p;this.field=l;const m=h.length;if(m>1&&h[0]===0){let g=1;for(;g<m&&h[g]===0;)g++;g===m?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(m-g),j.arraycopy(h,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=h}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);const h=this.coefficients;let m;if(l===1){m=0;for(let v=0,E=h.length;v!==E;v++){const I=h[v];m=Te.addOrSubtract(m,I)}return m}m=h[0];const g=h.length,y=this.field;for(let v=1;v<g;v++)m=Te.addOrSubtract(y.multiply(l,m),h[v]);return m}addOrSubtract(l){if(!this.field.equals(l.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero())return l;if(l.isZero())return this;let h=this.coefficients,m=l.coefficients;if(h.length>m.length){const v=h;h=m,m=v}let g=new Int32Array(m.length);const y=m.length-h.length;j.arraycopy(m,0,g,0,y);for(let v=y;v<m.length;v++)g[v]=Te.addOrSubtract(h[v-y],m[v]);return new Ve(this.field,g)}multiply(l){if(!this.field.equals(l.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero()||l.isZero())return this.field.getZero();const h=this.coefficients,m=h.length,g=l.coefficients,y=g.length,v=new Int32Array(m+y-1),E=this.field;for(let I=0;I<m;I++){const L=h[I];for(let q=0;q<y;q++)v[I+q]=Te.addOrSubtract(v[I+q],E.multiply(L,g[q]))}return new Ve(E,v)}multiplyScalar(l){if(l===0)return this.field.getZero();if(l===1)return this;const h=this.coefficients.length,m=this.field,g=new Int32Array(h),y=this.coefficients;for(let v=0;v<h;v++)g[v]=m.multiply(y[v],l);return new Ve(m,g)}multiplyByMonomial(l,h){if(l<0)throw new p;if(h===0)return this.field.getZero();const m=this.coefficients,g=m.length,y=new Int32Array(g+l),v=this.field;for(let E=0;E<g;E++)y[E]=v.multiply(m[E],h);return new Ve(v,y)}divide(l){if(!this.field.equals(l.field))throw new p("GenericGFPolys do not have same GenericGF field");if(l.isZero())throw new p("Divide by 0");const h=this.field;let m=h.getZero(),g=this;const y=l.getCoefficient(l.getDegree()),v=h.inverse(y);for(;g.getDegree()>=l.getDegree()&&!g.isZero();){const E=g.getDegree()-l.getDegree(),I=h.multiply(g.getCoefficient(g.getDegree()),v),L=l.multiplyByMonomial(E,I),q=h.buildMonomial(E,I);m=m.addOrSubtract(q),g=g.addOrSubtract(L)}return[m,g]}toString(){let l="";for(let h=this.getDegree();h>=0;h--){let m=this.getCoefficient(h);if(m!==0){if(m<0?(l+=" - ",m=-m):l.length>0&&(l+=" + "),h===0||m!==1){const g=this.field.log(m);g===0?l+="1":g===1?l+="a":(l+="a^",l+=g)}h!==0&&(h===1?l+="x":(l+="x^",l+=h))}}return l}}class Oe extends u{}Oe.kind="ArithmeticException";class Ye extends Te{constructor(l,h,m){super(),this.primitive=l,this.size=h,this.generatorBase=m;const g=new Int32Array(h);let y=1;for(let E=0;E<h;E++)g[E]=y,y*=2,y>=h&&(y^=l,y&=h-1);this.expTable=g;const v=new Int32Array(h);for(let E=0;E<h-1;E++)v[g[E]]=E;this.logTable=v,this.zero=new Ve(this,Int32Array.from([0])),this.one=new Ve(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,h){if(l<0)throw new p;if(h===0)return this.zero;const m=new Int32Array(l+1);return m[0]=h,new Ve(this,m)}inverse(l){if(l===0)throw new Oe;return this.expTable[this.size-this.logTable[l]-1]}multiply(l,h){return l===0||h===0?0:this.expTable[(this.logTable[l]+this.logTable[h])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+k.toHexString(this.primitive)+","+this.size+")"}equals(l){return l===this}}Ye.AZTEC_DATA_12=new Ye(4201,4096,1),Ye.AZTEC_DATA_10=new Ye(1033,1024,1),Ye.AZTEC_DATA_6=new Ye(67,64,1),Ye.AZTEC_PARAM=new Ye(19,16,1),Ye.QR_CODE_FIELD_256=new Ye(285,256,0),Ye.DATA_MATRIX_FIELD_256=new Ye(301,256,1),Ye.AZTEC_DATA_8=Ye.DATA_MATRIX_FIELD_256,Ye.MAXICODE_FIELD_64=Ye.AZTEC_DATA_6;class Se extends u{}Se.kind="ReedSolomonException";class ae extends u{}ae.kind="IllegalStateException";class Fe{constructor(l){this.field=l}decode(l,h){const m=this.field,g=new Ve(m,l),y=new Int32Array(h);let v=!0;for(let he=0;he<h;he++){const Ne=g.evaluateAt(m.exp(he+m.getGeneratorBase()));y[y.length-1-he]=Ne,Ne!==0&&(v=!1)}if(v)return;const E=new Ve(m,y),I=this.runEuclideanAlgorithm(m.buildMonomial(h,1),E,h),L=I[0],q=I[1],Y=this.findErrorLocations(L),re=this.findErrorMagnitudes(q,Y);for(let he=0;he<Y.length;he++){const Ne=l.length-1-m.log(Y[he]);if(Ne<0)throw new Se("Bad error location");l[Ne]=Ye.addOrSubtract(l[Ne],re[he])}}runEuclideanAlgorithm(l,h,m){if(l.getDegree()<h.getDegree()){const he=l;l=h,h=he}const g=this.field;let y=l,v=h,E=g.getZero(),I=g.getOne();for(;v.getDegree()>=(m/2|0);){let he=y,Ne=E;if(y=v,E=I,y.isZero())throw new Se("r_{i-1} was zero");v=he;let Ae=g.getZero();const _e=y.getCoefficient(y.getDegree()),We=g.inverse(_e);for(;v.getDegree()>=y.getDegree()&&!v.isZero();){const tt=v.getDegree()-y.getDegree(),st=g.multiply(v.getCoefficient(v.getDegree()),We);Ae=Ae.addOrSubtract(g.buildMonomial(tt,st)),v=v.addOrSubtract(y.multiplyByMonomial(tt,st))}if(I=Ae.multiply(E).addOrSubtract(Ne),v.getDegree()>=y.getDegree())throw new ae("Division algorithm failed to reduce polynomial?")}const L=I.getCoefficient(0);if(L===0)throw new Se("sigmaTilde(0) was zero");const q=g.inverse(L),Y=I.multiplyScalar(q),re=v.multiplyScalar(q);return[Y,re]}findErrorLocations(l){const h=l.getDegree();if(h===1)return Int32Array.from([l.getCoefficient(1)]);const m=new Int32Array(h);let g=0;const y=this.field;for(let v=1;v<y.getSize()&&g<h;v++)l.evaluateAt(v)===0&&(m[g]=y.inverse(v),g++);if(g!==h)throw new Se("Error locator degree does not match number of roots");return m}findErrorMagnitudes(l,h){const m=h.length,g=new Int32Array(m),y=this.field;for(let v=0;v<m;v++){const E=y.inverse(h[v]);let I=1;for(let L=0;L<m;L++)if(v!==L){const q=y.multiply(h[L],E),Y=q&1?q&-2:q|1;I=y.multiply(I,Y)}g[v]=y.multiply(l.evaluateAt(E),y.inverse(I)),y.getGeneratorBase()!==0&&(g[v]=y.multiply(g[v],E))}return g}}var ot;(function(X){X[X.UPPER=0]="UPPER",X[X.LOWER=1]="LOWER",X[X.MIXED=2]="MIXED",X[X.DIGIT=3]="DIGIT",X[X.PUNCT=4]="PUNCT",X[X.BINARY=5]="BINARY"})(ot||(ot={}));class at{decode(l){this.ddata=l;let h=l.getBits(),m=this.extractBits(h),g=this.correctBits(m),y=at.convertBoolArrayToByteArray(g),v=at.getEncodedData(g),E=new be(y,v,null,null);return E.setNumBits(g.length),E}static highLevelDecode(l){return this.getEncodedData(l)}static getEncodedData(l){let h=l.length,m=ot.UPPER,g=ot.UPPER,y="",v=0;for(;v<h;)if(g===ot.BINARY){if(h-v<5)break;let E=at.readCode(l,v,5);if(v+=5,E===0){if(h-v<11)break;E=at.readCode(l,v,11)+31,v+=11}for(let I=0;I<E;I++){if(h-v<8){v=h;break}const L=at.readCode(l,v,8);y+=W.castAsNonUtf8Char(L),v+=8}g=m}else{let E=g===ot.DIGIT?4:5;if(h-v<E)break;let I=at.readCode(l,v,E);v+=E;let L=at.getCharacter(g,I);L.startsWith("CTRL_")?(m=g,g=at.getTable(L.charAt(5)),L.charAt(6)==="L"&&(m=g)):(y+=L,g=m)}return y}static getTable(l){switch(l){case"L":return ot.LOWER;case"P":return ot.PUNCT;case"M":return ot.MIXED;case"D":return ot.DIGIT;case"B":return ot.BINARY;case"U":default:return ot.UPPER}}static getCharacter(l,h){switch(l){case ot.UPPER:return at.UPPER_TABLE[h];case ot.LOWER:return at.LOWER_TABLE[h];case ot.MIXED:return at.MIXED_TABLE[h];case ot.PUNCT:return at.PUNCT_TABLE[h];case ot.DIGIT:return at.DIGIT_TABLE[h];default:throw new ae("Bad table")}}correctBits(l){let h,m;this.ddata.getNbLayers()<=2?(m=6,h=Ye.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(m=8,h=Ye.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(m=10,h=Ye.AZTEC_DATA_10):(m=12,h=Ye.AZTEC_DATA_12);let g=this.ddata.getNbDatablocks(),y=l.length/m;if(y<g)throw new F;let v=l.length%m,E=new Int32Array(y);for(let re=0;re<y;re++,v+=m)E[re]=at.readCode(l,v,m);try{new Fe(h).decode(E,y-g)}catch(re){throw new F(re)}let I=(1<<m)-1,L=0;for(let re=0;re<g;re++){let he=E[re];if(he===0||he===I)throw new F;(he===1||he===I-1)&&L++}let q=new Array(g*m-L),Y=0;for(let re=0;re<g;re++){let he=E[re];if(he===1||he===I-1)q.fill(he>1,Y,Y+m-1),Y+=m-1;else for(let Ne=m-1;Ne>=0;--Ne)q[Y++]=(he&1<<Ne)!==0}return q}extractBits(l){let h=this.ddata.isCompact(),m=this.ddata.getNbLayers(),g=(h?11:14)+m*4,y=new Int32Array(g),v=new Array(this.totalBitsInLayer(m,h));if(h)for(let E=0;E<y.length;E++)y[E]=E;else{let E=g+1+2*k.truncDivision(k.truncDivision(g,2)-1,15),I=g/2,L=k.truncDivision(E,2);for(let q=0;q<I;q++){let Y=q+k.truncDivision(q,15);y[I-q-1]=L-Y-1,y[I+q]=L+Y+1}}for(let E=0,I=0;E<m;E++){let L=(m-E)*4+(h?9:12),q=E*2,Y=g-1-q;for(let re=0;re<L;re++){let he=re*2;for(let Ne=0;Ne<2;Ne++)v[I+he+Ne]=l.get(y[q+Ne],y[q+re]),v[I+2*L+he+Ne]=l.get(y[q+re],y[Y-Ne]),v[I+4*L+he+Ne]=l.get(y[Y-Ne],y[Y-re]),v[I+6*L+he+Ne]=l.get(y[Y-re],y[q+Ne])}I+=L*8}return v}static readCode(l,h,m){let g=0;for(let y=h;y<h+m;y++)g<<=1,l[y]&&(g|=1);return g}static readByte(l,h){let m=l.length-h;return m>=8?at.readCode(l,h,8):at.readCode(l,h,m)<<8-m}static convertBoolArrayToByteArray(l){let h=new Uint8Array((l.length+7)/8);for(let m=0;m<h.length;m++)h[m]=at.readByte(l,8*m);return h}totalBitsInLayer(l,h){return((h?88:112)+16*l)*l}}at.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],at.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],at.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],at.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],at.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class qe{constructor(){}static round(l){return l===NaN?0:l<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:l>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:l+(l<0?-.5:.5)|0}static distance(l,h,m,g){const y=l-m,v=h-g;return Math.sqrt(y*y+v*v)}static sum(l){let h=0;for(let m=0,g=l.length;m!==g;m++){const y=l[m];h+=y}return h}}class pt{static floatToIntBits(l){return l}}pt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(l,h){this.x=l,this.y=h}getX(){return this.x}getY(){return this.y}equals(l){if(l instanceof Ue){const h=l;return this.x===h.x&&this.y===h.y}return!1}hashCode(){return 31*pt.floatToIntBits(this.x)+pt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(l){const h=this.distance(l[0],l[1]),m=this.distance(l[1],l[2]),g=this.distance(l[0],l[2]);let y,v,E;if(m>=h&&m>=g?(v=l[0],y=l[1],E=l[2]):g>=m&&g>=h?(v=l[1],y=l[0],E=l[2]):(v=l[2],y=l[0],E=l[1]),this.crossProductZ(y,v,E)<0){const I=y;y=E,E=I}l[0]=y,l[1]=v,l[2]=E}static distance(l,h){return qe.distance(l.x,l.y,h.x,h.y)}static crossProductZ(l,h,m){const g=h.x,y=h.y;return(m.x-g)*(l.y-y)-(m.y-y)*(l.x-g)}}class jt{constructor(l,h){this.bits=l,this.points=h}getBits(){return this.bits}getPoints(){return this.points}}class vt extends jt{constructor(l,h,m,g,y){super(l,h),this.compact=m,this.nbDatablocks=g,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Gt{constructor(l,h,m,g){this.image=l,this.height=l.getHeight(),this.width=l.getWidth(),h==null&&(h=Gt.INIT_SIZE),m==null&&(m=l.getWidth()/2|0),g==null&&(g=l.getHeight()/2|0);const y=h/2|0;if(this.leftInit=m-y,this.rightInit=m+y,this.upInit=g-y,this.downInit=g+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let l=this.leftInit,h=this.rightInit,m=this.upInit,g=this.downInit,y=!1,v=!0,E=!1,I=!1,L=!1,q=!1,Y=!1;const re=this.width,he=this.height;for(;v;){v=!1;let Ne=!0;for(;(Ne||!I)&&h<re;)Ne=this.containsBlackPoint(m,g,h,!1),Ne?(h++,v=!0,I=!0):I||h++;if(h>=re){y=!0;break}let Ae=!0;for(;(Ae||!L)&&g<he;)Ae=this.containsBlackPoint(l,h,g,!0),Ae?(g++,v=!0,L=!0):L||g++;if(g>=he){y=!0;break}let _e=!0;for(;(_e||!q)&&l>=0;)_e=this.containsBlackPoint(m,g,l,!1),_e?(l--,v=!0,q=!0):q||l--;if(l<0){y=!0;break}let We=!0;for(;(We||!Y)&&m>=0;)We=this.containsBlackPoint(l,h,m,!0),We?(m--,v=!0,Y=!0):Y||m--;if(m<0){y=!0;break}v&&(E=!0)}if(!y&&E){const Ne=h-l;let Ae=null;for(let st=1;Ae===null&&st<Ne;st++)Ae=this.getBlackPointOnSegment(l,g-st,l+st,g);if(Ae==null)throw new V;let _e=null;for(let st=1;_e===null&&st<Ne;st++)_e=this.getBlackPointOnSegment(l,m+st,l+st,m);if(_e==null)throw new V;let We=null;for(let st=1;We===null&&st<Ne;st++)We=this.getBlackPointOnSegment(h,m+st,h-st,m);if(We==null)throw new V;let tt=null;for(let st=1;tt===null&&st<Ne;st++)tt=this.getBlackPointOnSegment(h,g-st,h-st,g);if(tt==null)throw new V;return this.centerEdges(tt,Ae,We,_e)}else throw new V}getBlackPointOnSegment(l,h,m,g){const y=qe.round(qe.distance(l,h,m,g)),v=(m-l)/y,E=(g-h)/y,I=this.image;for(let L=0;L<y;L++){const q=qe.round(l+L*v),Y=qe.round(h+L*E);if(I.get(q,Y))return new Ue(q,Y)}return null}centerEdges(l,h,m,g){const y=l.getX(),v=l.getY(),E=h.getX(),I=h.getY(),L=m.getX(),q=m.getY(),Y=g.getX(),re=g.getY(),he=Gt.CORR;return y<this.width/2?[new Ue(Y-he,re+he),new Ue(E+he,I+he),new Ue(L-he,q-he),new Ue(y+he,v-he)]:[new Ue(Y+he,re+he),new Ue(E+he,I-he),new Ue(L-he,q+he),new Ue(y-he,v-he)]}containsBlackPoint(l,h,m,g){const y=this.image;if(g){for(let v=l;v<=h;v++)if(y.get(v,m))return!0}else for(let v=l;v<=h;v++)if(y.get(m,v))return!0;return!1}}Gt.INIT_SIZE=10,Gt.CORR=1;class Kt{static checkAndNudgePoints(l,h){const m=l.getWidth(),g=l.getHeight();let y=!0;for(let v=0;v<h.length&&y;v+=2){const E=Math.floor(h[v]),I=Math.floor(h[v+1]);if(E<-1||E>m||I<-1||I>g)throw new V;y=!1,E===-1?(h[v]=0,y=!0):E===m&&(h[v]=m-1,y=!0),I===-1?(h[v+1]=0,y=!0):I===g&&(h[v+1]=g-1,y=!0)}y=!0;for(let v=h.length-2;v>=0&&y;v-=2){const E=Math.floor(h[v]),I=Math.floor(h[v+1]);if(E<-1||E>m||I<-1||I>g)throw new V;y=!1,E===-1?(h[v]=0,y=!0):E===m&&(h[v]=m-1,y=!0),I===-1?(h[v+1]=0,y=!0):I===g&&(h[v+1]=g-1,y=!0)}}}class _t{constructor(l,h,m,g,y,v,E,I,L){this.a11=l,this.a21=h,this.a31=m,this.a12=g,this.a22=y,this.a32=v,this.a13=E,this.a23=I,this.a33=L}static quadrilateralToQuadrilateral(l,h,m,g,y,v,E,I,L,q,Y,re,he,Ne,Ae,_e){const We=_t.quadrilateralToSquare(l,h,m,g,y,v,E,I);return _t.squareToQuadrilateral(L,q,Y,re,he,Ne,Ae,_e).times(We)}transformPoints(l){const h=l.length,m=this.a11,g=this.a12,y=this.a13,v=this.a21,E=this.a22,I=this.a23,L=this.a31,q=this.a32,Y=this.a33;for(let re=0;re<h;re+=2){const he=l[re],Ne=l[re+1],Ae=y*he+I*Ne+Y;l[re]=(m*he+v*Ne+L)/Ae,l[re+1]=(g*he+E*Ne+q)/Ae}}transformPointsWithValues(l,h){const m=this.a11,g=this.a12,y=this.a13,v=this.a21,E=this.a22,I=this.a23,L=this.a31,q=this.a32,Y=this.a33,re=l.length;for(let he=0;he<re;he++){const Ne=l[he],Ae=h[he],_e=y*Ne+I*Ae+Y;l[he]=(m*Ne+v*Ae+L)/_e,h[he]=(g*Ne+E*Ae+q)/_e}}static squareToQuadrilateral(l,h,m,g,y,v,E,I){const L=l-m+y-E,q=h-g+v-I;if(L===0&&q===0)return new _t(m-l,y-m,l,g-h,v-g,h,0,0,1);{const Y=m-y,re=E-y,he=g-v,Ne=I-v,Ae=Y*Ne-re*he,_e=(L*Ne-re*q)/Ae,We=(Y*q-L*he)/Ae;return new _t(m-l+_e*m,E-l+We*E,l,g-h+_e*g,I-h+We*I,h,_e,We,1)}}static quadrilateralToSquare(l,h,m,g,y,v,E,I){return _t.squareToQuadrilateral(l,h,m,g,y,v,E,I).buildAdjoint()}buildAdjoint(){return new _t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(l){return new _t(this.a11*l.a11+this.a21*l.a12+this.a31*l.a13,this.a11*l.a21+this.a21*l.a22+this.a31*l.a23,this.a11*l.a31+this.a21*l.a32+this.a31*l.a33,this.a12*l.a11+this.a22*l.a12+this.a32*l.a13,this.a12*l.a21+this.a22*l.a22+this.a32*l.a23,this.a12*l.a31+this.a22*l.a32+this.a32*l.a33,this.a13*l.a11+this.a23*l.a12+this.a33*l.a13,this.a13*l.a21+this.a23*l.a22+this.a33*l.a23,this.a13*l.a31+this.a23*l.a32+this.a33*l.a33)}}class mr extends Kt{sampleGrid(l,h,m,g,y,v,E,I,L,q,Y,re,he,Ne,Ae,_e,We,tt,st){const rt=_t.quadrilateralToQuadrilateral(g,y,v,E,I,L,q,Y,re,he,Ne,Ae,_e,We,tt,st);return this.sampleGridWithTransform(l,h,m,rt)}sampleGridWithTransform(l,h,m,g){if(h<=0||m<=0)throw new V;const y=new K(h,m),v=new Float32Array(2*h);for(let E=0;E<m;E++){const I=v.length,L=E+.5;for(let q=0;q<I;q+=2)v[q]=q/2+.5,v[q+1]=L;g.transformPoints(v),Kt.checkAndNudgePoints(l,v);try{for(let q=0;q<I;q+=2)l.get(Math.floor(v[q]),Math.floor(v[q+1]))&&y.set(q/2,E)}catch{throw new V}}return y}}class Ht{static setGridSampler(l){Ht.gridSampler=l}static getInstance(){return Ht.gridSampler}}Ht.gridSampler=new mr;class lt{constructor(l,h){this.x=l,this.y=h}toResultPoint(){return new Ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ce{constructor(l){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=l}detect(){return this.detectMirror(!1)}detectMirror(l){let h=this.getMatrixCenter(),m=this.getBullsEyeCorners(h);if(l){let v=m[0];m[0]=m[2],m[2]=v}this.extractParameters(m);let g=this.sampleGrid(this.image,m[this.shift%4],m[(this.shift+1)%4],m[(this.shift+2)%4],m[(this.shift+3)%4]),y=this.getMatrixCornerPoints(m);return new vt(g,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(l){if(!this.isValidPoint(l[0])||!this.isValidPoint(l[1])||!this.isValidPoint(l[2])||!this.isValidPoint(l[3]))throw new V;let h=2*this.nbCenterLayers,m=new Int32Array([this.sampleLine(l[0],l[1],h),this.sampleLine(l[1],l[2],h),this.sampleLine(l[2],l[3],h),this.sampleLine(l[3],l[0],h)]);this.shift=this.getRotation(m,h);let g=0;for(let v=0;v<4;v++){let E=m[(this.shift+v)%4];this.compact?(g<<=7,g+=E>>1&127):(g<<=10,g+=(E>>2&992)+(E>>1&31))}let y=this.getCorrectedParameterData(g,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(l,h){let m=0;l.forEach((g,y,v)=>{let E=(g>>h-2<<1)+(g&1);m=(m<<3)+E}),m=((m&1)<<11)+(m>>1);for(let g=0;g<4;g++)if(k.bitCount(m^this.EXPECTED_CORNER_BITS[g])<=2)return g;throw new V}getCorrectedParameterData(l,h){let m,g;h?(m=7,g=2):(m=10,g=4);let y=m-g,v=new Int32Array(m);for(let I=m-1;I>=0;--I)v[I]=l&15,l>>=4;try{new Fe(Ye.AZTEC_PARAM).decode(v,y)}catch{throw new V}let E=0;for(let I=0;I<g;I++)E=(E<<4)+v[I];return E}getBullsEyeCorners(l){let h=l,m=l,g=l,y=l,v=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Y=this.getFirstDifferent(h,v,1,-1),re=this.getFirstDifferent(m,v,1,1),he=this.getFirstDifferent(g,v,-1,1),Ne=this.getFirstDifferent(y,v,-1,-1);if(this.nbCenterLayers>2){let Ae=this.distancePoint(Ne,Y)*this.nbCenterLayers/(this.distancePoint(y,h)*(this.nbCenterLayers+2));if(Ae<.75||Ae>1.25||!this.isWhiteOrBlackRectangle(Y,re,he,Ne))break}h=Y,m=re,g=he,y=Ne,v=!v}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let E=new Ue(h.getX()+.5,h.getY()-.5),I=new Ue(m.getX()+.5,m.getY()+.5),L=new Ue(g.getX()-.5,g.getY()+.5),q=new Ue(y.getX()-.5,y.getY()-.5);return this.expandSquare([E,I,L,q],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let l,h,m,g;try{let E=new Gt(this.image).detect();l=E[0],h=E[1],m=E[2],g=E[3]}catch{let I=this.image.getWidth()/2,L=this.image.getHeight()/2;l=this.getFirstDifferent(new lt(I+7,L-7),!1,1,-1).toResultPoint(),h=this.getFirstDifferent(new lt(I+7,L+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new lt(I-7,L+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new lt(I-7,L-7),!1,-1,-1).toResultPoint()}let y=qe.round((l.getX()+g.getX()+h.getX()+m.getX())/4),v=qe.round((l.getY()+g.getY()+h.getY()+m.getY())/4);try{let E=new Gt(this.image,15,y,v).detect();l=E[0],h=E[1],m=E[2],g=E[3]}catch{l=this.getFirstDifferent(new lt(y+7,v-7),!1,1,-1).toResultPoint(),h=this.getFirstDifferent(new lt(y+7,v+7),!1,1,1).toResultPoint(),m=this.getFirstDifferent(new lt(y-7,v+7),!1,-1,1).toResultPoint(),g=this.getFirstDifferent(new lt(y-7,v-7),!1,-1,-1).toResultPoint()}return y=qe.round((l.getX()+g.getX()+h.getX()+m.getX())/4),v=qe.round((l.getY()+g.getY()+h.getY()+m.getY())/4),new lt(y,v)}getMatrixCornerPoints(l){return this.expandSquare(l,2*this.nbCenterLayers,this.getDimension())}sampleGrid(l,h,m,g,y){let v=Ht.getInstance(),E=this.getDimension(),I=E/2-this.nbCenterLayers,L=E/2+this.nbCenterLayers;return v.sampleGrid(l,E,E,I,I,L,I,L,L,I,L,h.getX(),h.getY(),m.getX(),m.getY(),g.getX(),g.getY(),y.getX(),y.getY())}sampleLine(l,h,m){let g=0,y=this.distanceResultPoint(l,h),v=y/m,E=l.getX(),I=l.getY(),L=v*(h.getX()-l.getX())/y,q=v*(h.getY()-l.getY())/y;for(let Y=0;Y<m;Y++)this.image.get(qe.round(E+Y*L),qe.round(I+Y*q))&&(g|=1<<m-Y-1);return g}isWhiteOrBlackRectangle(l,h,m,g){let y=3;l=new lt(l.getX()-y,l.getY()+y),h=new lt(h.getX()-y,h.getY()-y),m=new lt(m.getX()+y,m.getY()-y),g=new lt(g.getX()+y,g.getY()+y);let v=this.getColor(g,l);if(v===0)return!1;let E=this.getColor(l,h);return E!==v||(E=this.getColor(h,m),E!==v)?!1:(E=this.getColor(m,g),E===v)}getColor(l,h){let m=this.distancePoint(l,h),g=(h.getX()-l.getX())/m,y=(h.getY()-l.getY())/m,v=0,E=l.getX(),I=l.getY(),L=this.image.get(l.getX(),l.getY()),q=Math.ceil(m);for(let re=0;re<q;re++)E+=g,I+=y,this.image.get(qe.round(E),qe.round(I))!==L&&v++;let Y=v/m;return Y>.1&&Y<.9?0:Y<=.1===L?1:-1}getFirstDifferent(l,h,m,g){let y=l.getX()+m,v=l.getY()+g;for(;this.isValid(y,v)&&this.image.get(y,v)===h;)y+=m,v+=g;for(y-=m,v-=g;this.isValid(y,v)&&this.image.get(y,v)===h;)y+=m;for(y-=m;this.isValid(y,v)&&this.image.get(y,v)===h;)v+=g;return v-=g,new lt(y,v)}expandSquare(l,h,m){let g=m/(2*h),y=l[0].getX()-l[2].getX(),v=l[0].getY()-l[2].getY(),E=(l[0].getX()+l[2].getX())/2,I=(l[0].getY()+l[2].getY())/2,L=new Ue(E+g*y,I+g*v),q=new Ue(E-g*y,I-g*v);y=l[1].getX()-l[3].getX(),v=l[1].getY()-l[3].getY(),E=(l[1].getX()+l[3].getX())/2,I=(l[1].getY()+l[3].getY())/2;let Y=new Ue(E+g*y,I+g*v),re=new Ue(E-g*y,I-g*v);return[L,Y,q,re]}isValid(l,h){return l>=0&&l<this.image.getWidth()&&h>0&&h<this.image.getHeight()}isValidPoint(l){let h=qe.round(l.getX()),m=qe.round(l.getY());return this.isValid(h,m)}distancePoint(l,h){return qe.distance(l.getX(),l.getY(),h.getX(),h.getY())}distanceResultPoint(l,h){return qe.distance(l.getX(),l.getY(),h.getX(),h.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(k.truncDivision(this.nbLayers-4,8)+1)+15}}class Be{decode(l,h=null){let m=null,g=new Ce(l.getBlackMatrix()),y=null,v=null;try{let q=g.detectMirror(!1);y=q.getPoints(),this.reportFoundResultPoints(h,y),v=new at().decode(q)}catch(q){m=q}if(v==null)try{let q=g.detectMirror(!0);y=q.getPoints(),this.reportFoundResultPoints(h,y),v=new at().decode(q)}catch(q){throw m??q}let E=new le(v.getText(),v.getRawBytes(),v.getNumBits(),y,xe.AZTEC,j.currentTimeMillis()),I=v.getByteSegments();I!=null&&E.putMetadata(Re.BYTE_SEGMENTS,I);let L=v.getECLevel();return L!=null&&E.putMetadata(Re.ERROR_CORRECTION_LEVEL,L),E}reportFoundResultPoints(l,h){if(l!=null){let m=l.get($.NEED_RESULT_POINT_CALLBACK);m!=null&&h.forEach((g,y,v)=>{m.foundPossibleResultPoint(g)})}}reset(){}}class et extends Q{constructor(l=500){super(new Be,l)}}class Xe{decode(l,h){try{return this.doDecode(l,h)}catch{if(h&&h.get($.TRY_HARDER)===!0&&l.isRotateSupported()){const y=l.rotateCounterClockwise(),v=this.doDecode(y,h),E=v.getResultMetadata();let I=270;E!==null&&E.get(Re.ORIENTATION)===!0&&(I=I+E.get(Re.ORIENTATION)%360),v.putMetadata(Re.ORIENTATION,I);const L=v.getResultPoints();if(L!==null){const q=y.getHeight();for(let Y=0;Y<L.length;Y++)L[Y]=new Ue(q-L[Y].getY()-1,L[Y].getX())}return v}else throw new V}}reset(){}doDecode(l,h){const m=l.getWidth(),g=l.getHeight();let y=new _(m);const v=h&&h.get($.TRY_HARDER)===!0,E=Math.max(1,g>>(v?8:5));let I;v?I=g:I=15;const L=Math.trunc(g/2);for(let q=0;q<I;q++){const Y=Math.trunc((q+1)/2),re=(q&1)===0,he=L+E*(re?Y:-Y);if(he<0||he>=g)break;try{y=l.getBlackRow(he,y)}catch{continue}for(let Ne=0;Ne<2;Ne++){if(Ne===1&&(y.reverse(),h&&h.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const Ae=new Map;h.forEach((_e,We)=>Ae.set(We,_e)),Ae.delete($.NEED_RESULT_POINT_CALLBACK),h=Ae}try{const Ae=this.decodeRow(he,y,h);if(Ne===1){Ae.putMetadata(Re.ORIENTATION,180);const _e=Ae.getResultPoints();_e!==null&&(_e[0]=new Ue(m-_e[0].getX()-1,_e[0].getY()),_e[1]=new Ue(m-_e[1].getX()-1,_e[1].getY()))}return Ae}catch{}}}throw new V}static recordPattern(l,h,m){const g=m.length;for(let L=0;L<g;L++)m[L]=0;const y=l.getSize();if(h>=y)throw new V;let v=!l.get(h),E=0,I=h;for(;I<y;){if(l.get(I)!==v)m[E]++;else{if(++E===g)break;m[E]=1,v=!v}I++}if(!(E===g||E===g-1&&I===y))throw new V}static recordPatternInReverse(l,h,m){let g=m.length,y=l.get(h);for(;h>0&&g>=0;)l.get(--h)!==y&&(g--,y=!y);if(g>=0)throw new V;Xe.recordPattern(l,h+1,m)}static patternMatchVariance(l,h,m){const g=l.length;let y=0,v=0;for(let L=0;L<g;L++)y+=l[L],v+=h[L];if(y<v)return Number.POSITIVE_INFINITY;const E=y/v;m*=E;let I=0;for(let L=0;L<g;L++){const q=l[L],Y=h[L]*E,re=q>Y?q-Y:Y-q;if(re>m)return Number.POSITIVE_INFINITY;I+=re}return I/y}}class Le extends Xe{static findStartPattern(l){const h=l.getSize(),m=l.getNextSet(0);let g=0,y=Int32Array.from([0,0,0,0,0,0]),v=m,E=!1;const I=6;for(let L=m;L<h;L++)if(l.get(L)!==E)y[g]++;else{if(g===I-1){let q=Le.MAX_AVG_VARIANCE,Y=-1;for(let re=Le.CODE_START_A;re<=Le.CODE_START_C;re++){const he=Xe.patternMatchVariance(y,Le.CODE_PATTERNS[re],Le.MAX_INDIVIDUAL_VARIANCE);he<q&&(q=he,Y=re)}if(Y>=0&&l.isRange(Math.max(0,v-(L-v)/2),v,!1))return Int32Array.from([v,L,Y]);v+=y[0]+y[1],y=y.slice(2,y.length-1),y[g-1]=0,y[g]=0,g--}else g++;y[g]=1,E=!E}throw new V}static decodeCode(l,h,m){Xe.recordPattern(l,m,h);let g=Le.MAX_AVG_VARIANCE,y=-1;for(let v=0;v<Le.CODE_PATTERNS.length;v++){const E=Le.CODE_PATTERNS[v],I=this.patternMatchVariance(h,E,Le.MAX_INDIVIDUAL_VARIANCE);I<g&&(g=I,y=v)}if(y>=0)return y;throw new V}decodeRow(l,h,m){const g=m&&m.get($.ASSUME_GS1)===!0,y=Le.findStartPattern(h),v=y[2];let E=0;const I=new Uint8Array(20);I[E++]=v;let L;switch(v){case Le.CODE_START_A:L=Le.CODE_CODE_A;break;case Le.CODE_START_B:L=Le.CODE_CODE_B;break;case Le.CODE_START_C:L=Le.CODE_CODE_C;break;default:throw new F}let q=!1,Y=!1,re="",he=y[0],Ne=y[1];const Ae=Int32Array.from([0,0,0,0,0,0]);let _e=0,We=0,tt=v,st=0,rt=!0,qt=!1,Yt=!1;for(;!q;){const fl=Y;switch(Y=!1,_e=We,We=Le.decodeCode(h,Ae,Ne),I[E++]=We,We!==Le.CODE_STOP&&(rt=!0),We!==Le.CODE_STOP&&(st++,tt+=st*We),he=Ne,Ne+=Ae.reduce((J0,ad)=>J0+ad,0),We){case Le.CODE_START_A:case Le.CODE_START_B:case Le.CODE_START_C:throw new F}switch(L){case Le.CODE_CODE_A:if(We<64)Yt===qt?re+=String.fromCharCode(32+We):re+=String.fromCharCode(32+We+128),Yt=!1;else if(We<96)Yt===qt?re+=String.fromCharCode(We-64):re+=String.fromCharCode(We+64),Yt=!1;else switch(We!==Le.CODE_STOP&&(rt=!1),We){case Le.CODE_FNC_1:g&&(re.length===0?re+="]C1":re+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_A:!qt&&Yt?(qt=!0,Yt=!1):qt&&Yt?(qt=!1,Yt=!1):Yt=!0;break;case Le.CODE_SHIFT:Y=!0,L=Le.CODE_CODE_B;break;case Le.CODE_CODE_B:L=Le.CODE_CODE_B;break;case Le.CODE_CODE_C:L=Le.CODE_CODE_C;break;case Le.CODE_STOP:q=!0;break}break;case Le.CODE_CODE_B:if(We<96)Yt===qt?re+=String.fromCharCode(32+We):re+=String.fromCharCode(32+We+128),Yt=!1;else switch(We!==Le.CODE_STOP&&(rt=!1),We){case Le.CODE_FNC_1:g&&(re.length===0?re+="]C1":re+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_B:!qt&&Yt?(qt=!0,Yt=!1):qt&&Yt?(qt=!1,Yt=!1):Yt=!0;break;case Le.CODE_SHIFT:Y=!0,L=Le.CODE_CODE_A;break;case Le.CODE_CODE_A:L=Le.CODE_CODE_A;break;case Le.CODE_CODE_C:L=Le.CODE_CODE_C;break;case Le.CODE_STOP:q=!0;break}break;case Le.CODE_CODE_C:if(We<100)We<10&&(re+="0"),re+=We;else switch(We!==Le.CODE_STOP&&(rt=!1),We){case Le.CODE_FNC_1:g&&(re.length===0?re+="]C1":re+="");break;case Le.CODE_CODE_A:L=Le.CODE_CODE_A;break;case Le.CODE_CODE_B:L=Le.CODE_CODE_B;break;case Le.CODE_STOP:q=!0;break}break}fl&&(L=L===Le.CODE_CODE_A?Le.CODE_CODE_B:Le.CODE_CODE_A)}const Qn=Ne-he;if(Ne=h.getNextUnset(Ne),!h.isRange(Ne,Math.min(h.getSize(),Ne+(Ne-he)/2),!1))throw new V;if(tt-=st*_e,tt%103!==_e)throw new x;const Ns=re.length;if(Ns===0)throw new V;Ns>0&&rt&&(L===Le.CODE_CODE_C?re=re.substring(0,Ns-2):re=re.substring(0,Ns-1));const os=(y[1]+y[0])/2,Rr=he+Qn/2,es=I.length,Ks=new Uint8Array(es);for(let fl=0;fl<es;fl++)Ks[fl]=I[fl];const hl=[new Ue(os,l),new Ue(Rr,l)];return new le(re,Ks,0,hl,xe.CODE_128,new Date().getTime())}}Le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Le.MAX_AVG_VARIANCE=.25,Le.MAX_INDIVIDUAL_VARIANCE=.7,Le.CODE_SHIFT=98,Le.CODE_CODE_C=99,Le.CODE_CODE_B=100,Le.CODE_CODE_A=101,Le.CODE_FNC_1=102,Le.CODE_FNC_2=97,Le.CODE_FNC_3=96,Le.CODE_FNC_4_A=101,Le.CODE_FNC_4_B=100,Le.CODE_START_A=103,Le.CODE_START_B=104,Le.CODE_START_C=105,Le.CODE_STOP=106;class mt extends Xe{constructor(l=!1,h=!1){super(),this.usingCheckDigit=l,this.extendedMode=h,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(l,h,m){let g=this.counters;g.fill(0),this.decodeRowResult="";let y=mt.findAsteriskPattern(h,g),v=h.getNextSet(y[1]),E=h.getSize(),I,L;do{mt.recordPattern(h,v,g);let Ae=mt.toNarrowWidePattern(g);if(Ae<0)throw new V;I=mt.patternToChar(Ae),this.decodeRowResult+=I,L=v;for(let _e of g)v+=_e;v=h.getNextSet(v)}while(I!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let q=0;for(let Ae of g)q+=Ae;let Y=v-L-q;if(v!==E&&Y*2<q)throw new V;if(this.usingCheckDigit){let Ae=this.decodeRowResult.length-1,_e=0;for(let We=0;We<Ae;We++)_e+=mt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(We));if(this.decodeRowResult.charAt(Ae)!==mt.ALPHABET_STRING.charAt(_e%43))throw new x;this.decodeRowResult=this.decodeRowResult.substring(0,Ae)}if(this.decodeRowResult.length===0)throw new V;let re;this.extendedMode?re=mt.decodeExtended(this.decodeRowResult):re=this.decodeRowResult;let he=(y[1]+y[0])/2,Ne=L+q/2;return new le(re,null,0,[new Ue(he,l),new Ue(Ne,l)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(l,h){let m=l.getSize(),g=l.getNextSet(0),y=0,v=g,E=!1,I=h.length;for(let L=g;L<m;L++)if(l.get(L)!==E)h[y]++;else{if(y===I-1){if(this.toNarrowWidePattern(h)===mt.ASTERISK_ENCODING&&l.isRange(Math.max(0,v-Math.floor((L-v)/2)),v,!1))return[v,L];v+=h[0]+h[1],h.copyWithin(0,2,2+y-1),h[y-1]=0,h[y]=0,y--}else y++;h[y]=1,E=!E}throw new V}static toNarrowWidePattern(l){let h=l.length,m=0,g;do{let y=2147483647;for(let I of l)I<y&&I>m&&(y=I);m=y,g=0;let v=0,E=0;for(let I=0;I<h;I++){let L=l[I];L>m&&(E|=1<<h-1-I,g++,v+=L)}if(g===3){for(let I=0;I<h&&g>0;I++){let L=l[I];if(L>m&&(g--,L*2>=v))return-1}return E}}while(g>3);return-1}static patternToChar(l){for(let h=0;h<mt.CHARACTER_ENCODINGS.length;h++)if(mt.CHARACTER_ENCODINGS[h]===l)return mt.ALPHABET_STRING.charAt(h);if(l===mt.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(l){let h=l.length,m="";for(let g=0;g<h;g++){let y=l.charAt(g);if(y==="+"||y==="$"||y==="%"||y==="/"){let v=l.charAt(g+1),E="\0";switch(y){case"+":if(v>="A"&&v<="Z")E=String.fromCharCode(v.charCodeAt(0)+32);else throw new F;break;case"$":if(v>="A"&&v<="Z")E=String.fromCharCode(v.charCodeAt(0)-64);else throw new F;break;case"%":if(v>="A"&&v<="E")E=String.fromCharCode(v.charCodeAt(0)-38);else if(v>="F"&&v<="J")E=String.fromCharCode(v.charCodeAt(0)-11);else if(v>="K"&&v<="O")E=String.fromCharCode(v.charCodeAt(0)+16);else if(v>="P"&&v<="T")E=String.fromCharCode(v.charCodeAt(0)+43);else if(v==="U")E="\0";else if(v==="V")E="@";else if(v==="W")E="`";else if(v==="X"||v==="Y"||v==="Z")E="";else throw new F;break;case"/":if(v>="A"&&v<="O")E=String.fromCharCode(v.charCodeAt(0)-32);else if(v==="Z")E=":";else throw new F;break}m+=E,g++}else m+=y}return m}}mt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",mt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],mt.ASTERISK_ENCODING=148;class yt extends Xe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(l,h,m){let g=this.decodeStart(h),y=this.decodeEnd(h),v=new J;yt.decodeMiddle(h,g[1],y[0],v);let E=v.toString(),I=null;m!=null&&(I=m.get($.ALLOWED_LENGTHS)),I==null&&(I=yt.DEFAULT_ALLOWED_LENGTHS);let L=E.length,q=!1,Y=0;for(let Ne of I){if(L===Ne){q=!0;break}Ne>Y&&(Y=Ne)}if(!q&&L>Y&&(q=!0),!q)throw new F;const re=[new Ue(g[1],l),new Ue(y[0],l)];return new le(E,null,0,re,xe.ITF,new Date().getTime())}static decodeMiddle(l,h,m,g){let y=new Int32Array(10),v=new Int32Array(5),E=new Int32Array(5);for(y.fill(0),v.fill(0),E.fill(0);h<m;){Xe.recordPattern(l,h,y);for(let L=0;L<5;L++){let q=2*L;v[L]=y[q],E[L]=y[q+1]}let I=yt.decodeDigit(v);g.append(I.toString()),I=this.decodeDigit(E),g.append(I.toString()),y.forEach(function(L){h+=L})}}decodeStart(l){let h=yt.skipWhiteSpace(l),m=yt.findGuardPattern(l,h,yt.START_PATTERN);return this.narrowLineWidth=(m[1]-m[0])/4,this.validateQuietZone(l,m[0]),m}validateQuietZone(l,h){let m=this.narrowLineWidth*10;m=m<h?m:h;for(let g=h-1;m>0&&g>=0&&!l.get(g);g--)m--;if(m!==0)throw new V}static skipWhiteSpace(l){const h=l.getSize(),m=l.getNextSet(0);if(m===h)throw new V;return m}decodeEnd(l){l.reverse();try{let h=yt.skipWhiteSpace(l),m;try{m=yt.findGuardPattern(l,h,yt.END_PATTERN_REVERSED[0])}catch(y){y instanceof V&&(m=yt.findGuardPattern(l,h,yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(l,m[0]);let g=m[0];return m[0]=l.getSize()-m[1],m[1]=l.getSize()-g,m}finally{l.reverse()}}static findGuardPattern(l,h,m){let g=m.length,y=new Int32Array(g),v=l.getSize(),E=!1,I=0,L=h;y.fill(0);for(let q=h;q<v;q++)if(l.get(q)!==E)y[I]++;else{if(I===g-1){if(Xe.patternMatchVariance(y,m,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return[L,q];L+=y[0]+y[1],j.arraycopy(y,2,y,0,I-1),y[I-1]=0,y[I]=0,I--}else I++;y[I]=1,E=!E}throw new V}static decodeDigit(l){let h=yt.MAX_AVG_VARIANCE,m=-1,g=yt.PATTERNS.length;for(let y=0;y<g;y++){let v=yt.PATTERNS[y],E=Xe.patternMatchVariance(l,v,yt.MAX_INDIVIDUAL_VARIANCE);E<h?(h=E,m=y):E===h&&(m=-1)}if(m>=0)return m%10;throw new V}}yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yt.MAX_AVG_VARIANCE=.38,yt.MAX_INDIVIDUAL_VARIANCE=.5,yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yt.START_PATTERN=Int32Array.from([1,1,1,1]),yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ht extends Xe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(l){let h=!1,m,g=0,y=Int32Array.from([0,0,0]);for(;!h;){y=Int32Array.from([0,0,0]),m=ht.findGuardPattern(l,g,!1,this.START_END_PATTERN,y);let v=m[0];g=m[1];let E=v-(g-v);E>=0&&(h=l.isRange(E,v,!1))}return m}static checkChecksum(l){return ht.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let h=l.length;if(h===0)return!1;let m=parseInt(l.charAt(h-1),10);return ht.getStandardUPCEANChecksum(l.substring(0,h-1))===m}static getStandardUPCEANChecksum(l){let h=l.length,m=0;for(let g=h-1;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}m*=3;for(let g=h-2;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}return(1e3-m)%10}static decodeEnd(l,h){return ht.findGuardPattern(l,h,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(l,h,m,g){return this.findGuardPattern(l,h,m,g,new Int32Array(g.length))}static findGuardPattern(l,h,m,g,y){let v=l.getSize();h=m?l.getNextUnset(h):l.getNextSet(h);let E=0,I=h,L=g.length,q=m;for(let Y=h;Y<v;Y++)if(l.get(Y)!==q)y[E]++;else{if(E===L-1){if(Xe.patternMatchVariance(y,g,ht.MAX_INDIVIDUAL_VARIANCE)<ht.MAX_AVG_VARIANCE)return Int32Array.from([I,Y]);I+=y[0]+y[1];let re=y.slice(2,y.length-1);for(let he=0;he<E-1;he++)y[he]=re[he];y[E-1]=0,y[E]=0,E--}else E++;y[E]=1,q=!q}throw new V}static decodeDigit(l,h,m,g){this.recordPattern(l,m,h);let y=this.MAX_AVG_VARIANCE,v=-1,E=g.length;for(let I=0;I<E;I++){let L=g[I],q=Xe.patternMatchVariance(h,L,ht.MAX_INDIVIDUAL_VARIANCE);q<y&&(y=q,v=I)}if(v>=0)return v;throw new V}}ht.MAX_AVG_VARIANCE=.48,ht.MAX_INDIVIDUAL_VARIANCE=.7,ht.START_END_PATTERN=Int32Array.from([1,1,1]),ht.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ht.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ht.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Lt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,h,m){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(h,m,g),v=g.toString(),E=Lt.parseExtensionString(v),I=[new Ue((m[0]+m[1])/2,l),new Ue(y,l)],L=new le(v,null,0,I,xe.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&L.putAllMetadata(E),L}decodeMiddle(l,h,m){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),v=h[1],E=0;for(let L=0;L<5&&v<y;L++){let q=ht.decodeDigit(l,g,v,ht.L_AND_G_PATTERNS);m+=String.fromCharCode(48+q%10);for(let Y of g)v+=Y;q>=10&&(E|=1<<4-L),L!==4&&(v=l.getNextSet(v),v=l.getNextUnset(v))}if(m.length!==5)throw new V;let I=this.determineCheckDigit(E);if(Lt.extensionChecksum(m.toString())!==I)throw new V;return v}static extensionChecksum(l){let h=l.length,m=0;for(let g=h-2;g>=0;g-=2)m+=l.charAt(g).charCodeAt(0)-48;m*=3;for(let g=h-1;g>=0;g-=2)m+=l.charAt(g).charCodeAt(0)-48;return m*=3,m%10}determineCheckDigit(l){for(let h=0;h<10;h++)if(l===this.CHECK_DIGIT_ENCODINGS[h])return h;throw new V}static parseExtensionString(l){if(l.length!==5)return null;let h=Lt.parseExtension5String(l);return h==null?null:new Map([[Re.SUGGESTED_PRICE,h]])}static parseExtension5String(l){let h;switch(l.charAt(0)){case"0":h="";break;case"5":h="$";break;case"9":switch(l){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}h="";break;default:h="";break}let m=parseInt(l.substring(1)),g=(m/100).toString(),y=m%100,v=y<10?"0"+y:y.toString();return h+g+"."+v}}class Ct{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(l,h,m){let g=this.decodeRowStringBuffer,y=this.decodeMiddle(h,m,g),v=g.toString(),E=Ct.parseExtensionString(v),I=[new Ue((m[0]+m[1])/2,l),new Ue(y,l)],L=new le(v,null,0,I,xe.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&L.putAllMetadata(E),L}decodeMiddle(l,h,m){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),v=h[1],E=0;for(let I=0;I<2&&v<y;I++){let L=ht.decodeDigit(l,g,v,ht.L_AND_G_PATTERNS);m+=String.fromCharCode(48+L%10);for(let q of g)v+=q;L>=10&&(E|=1<<1-I),I!==1&&(v=l.getNextSet(v),v=l.getNextUnset(v))}if(m.length!==2)throw new V;if(parseInt(m.toString())%4!==E)throw new V;return v}static parseExtensionString(l){return l.length!==2?null:new Map([[Re.ISSUE_NUMBER,parseInt(l)]])}}class or{static decodeRow(l,h,m){let g=ht.findGuardPattern(h,m,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Lt().decodeRow(l,h,g)}catch{return new Ct().decodeRow(l,h,g)}}}or.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class wt extends ht{constructor(){super(),this.decodeRowStringBuffer="",wt.L_AND_G_PATTERNS=wt.L_PATTERNS.map(l=>Int32Array.from(l));for(let l=10;l<20;l++){let h=wt.L_PATTERNS[l-10],m=new Int32Array(h.length);for(let g=0;g<h.length;g++)m[g]=h[h.length-g-1];wt.L_AND_G_PATTERNS[l]=m}}decodeRow(l,h,m){let g=wt.findStartGuardPattern(h),y=m==null?null:m.get($.NEED_RESULT_POINT_CALLBACK);if(y!=null){const rt=new Ue((g[0]+g[1])/2,l);y.foundPossibleResultPoint(rt)}let v=this.decodeMiddle(h,g,this.decodeRowStringBuffer),E=v.rowOffset,I=v.resultString;if(y!=null){const rt=new Ue(E,l);y.foundPossibleResultPoint(rt)}let L=this.decodeEnd(h,E);if(y!=null){const rt=new Ue((L[0]+L[1])/2,l);y.foundPossibleResultPoint(rt)}let q=L[1],Y=q+(q-L[0]);if(Y>=h.getSize()||!h.isRange(q,Y,!1))throw new V;let re=I.toString();if(re.length<8)throw new F;if(!wt.checkChecksum(re))throw new x;let he=(g[1]+g[0])/2,Ne=(L[1]+L[0])/2,Ae=this.getBarcodeFormat(),_e=[new Ue(he,l),new Ue(Ne,l)],We=new le(re,null,0,_e,Ae,new Date().getTime()),tt=0;try{let rt=or.decodeRow(l,h,L[1]);We.putMetadata(Re.UPC_EAN_EXTENSION,rt.getText()),We.putAllMetadata(rt.getResultMetadata()),We.addResultPoints(rt.getResultPoints()),tt=rt.getText().length}catch{}let st=m==null?null:m.get($.ALLOWED_EAN_EXTENSIONS);if(st!=null){let rt=!1;for(let qt in st)if(tt.toString()===qt){rt=!0;break}if(!rt)throw new V}return We}decodeEnd(l,h){return wt.findGuardPattern(l,h,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static checkChecksum(l){return wt.checkStandardUPCEANChecksum(l)}static checkStandardUPCEANChecksum(l){let h=l.length;if(h===0)return!1;let m=parseInt(l.charAt(h-1),10);return wt.getStandardUPCEANChecksum(l.substring(0,h-1))===m}static getStandardUPCEANChecksum(l){let h=l.length,m=0;for(let g=h-1;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}m*=3;for(let g=h-2;g>=0;g-=2){let y=l.charAt(g).charCodeAt(0)-48;if(y<0||y>9)throw new F;m+=y}return(1e3-m)%10}}class er extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,h,m){let g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),v=h[1],E=0;for(let L=0;L<6&&v<y;L++){let q=wt.decodeDigit(l,g,v,wt.L_AND_G_PATTERNS);m+=String.fromCharCode(48+q%10);for(let Y of g)v+=Y;q>=10&&(E|=1<<5-L)}m=er.determineFirstDigit(m,E),v=wt.findGuardPattern(l,v,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let L=0;L<6&&v<y;L++){let q=wt.decodeDigit(l,g,v,wt.L_PATTERNS);m+=String.fromCharCode(48+q);for(let Y of g)v+=Y}return{rowOffset:v,resultString:m}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(l,h){for(let m=0;m<10;m++)if(h===this.FIRST_DIGIT_ENCODINGS[m])return l=String.fromCharCode(48+m)+l,l;throw new V}}er.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Zt extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(l,h,m){const g=this.decodeMiddleCounters;g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),v=h[1];for(let I=0;I<4&&v<y;I++){let L=wt.decodeDigit(l,g,v,wt.L_PATTERNS);m+=String.fromCharCode(48+L);for(let q of g)v+=q}v=wt.findGuardPattern(l,v,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<4&&v<y;I++){let L=wt.decodeDigit(l,g,v,wt.L_PATTERNS);m+=String.fromCharCode(48+L);for(let q of g)v+=q}return{rowOffset:v,resultString:m}}getBarcodeFormat(){return xe.EAN_8}}class jr extends wt{constructor(){super(...arguments),this.ean13Reader=new er}getBarcodeFormat(){return xe.UPC_A}decode(l,h){return this.maybeReturnResult(this.ean13Reader.decode(l))}decodeRow(l,h,m){return this.maybeReturnResult(this.ean13Reader.decodeRow(l,h,m))}decodeMiddle(l,h,m){return this.ean13Reader.decodeMiddle(l,h,m)}maybeReturnResult(l){let h=l.getText();if(h.charAt(0)==="0"){let m=new le(h.substring(1),null,null,l.getResultPoints(),xe.UPC_A);return l.getResultMetadata()!=null&&m.putAllMetadata(l.getResultMetadata()),m}else throw new V}reset(){this.ean13Reader.reset()}}class ss extends wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(l,h,m){const g=this.decodeMiddleCounters.map(L=>L);g[0]=0,g[1]=0,g[2]=0,g[3]=0;const y=l.getSize();let v=h[1],E=0;for(let L=0;L<6&&v<y;L++){const q=ss.decodeDigit(l,g,v,ss.L_AND_G_PATTERNS);m+=String.fromCharCode(48+q%10);for(let Y of g)v+=Y;q>=10&&(E|=1<<5-L)}let I=ss.determineNumSysAndCheckDigit(m,E);return{rowOffset:v,resultString:I}}decodeEnd(l,h){return ss.findGuardPatternWithoutCounters(l,h,!0,ss.MIDDLE_END_PATTERN)}checkChecksum(l){return wt.checkChecksum(ss.convertUPCEtoUPCA(l))}static determineNumSysAndCheckDigit(l,h){for(let m=0;m<=1;m++)for(let g=0;g<10;g++)if(h===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[m][g]){let y=String.fromCharCode(48+m),v=String.fromCharCode(48+g);return y+l+v}throw V.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(l){const h=l.slice(1,7).split("").map(y=>y.charCodeAt(0)),m=new J;m.append(l.charAt(0));let g=h[5];switch(g){case 0:case 1:case 2:m.appendChars(h,0,2),m.append(g),m.append("0000"),m.appendChars(h,2,3);break;case 3:m.appendChars(h,0,3),m.append("00000"),m.appendChars(h,3,2);break;case 4:m.appendChars(h,0,4),m.append("00000"),m.append(h[4]);break;default:m.appendChars(h,0,5),m.append("0000"),m.append(g);break}return l.length>=8&&m.append(l.charAt(7)),m.toString()}}ss.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ss.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Kn extends Xe{constructor(l){super();let h=l==null?null:l.get($.POSSIBLE_FORMATS),m=[];n(h)?(m.push(new er),m.push(new jr),m.push(new Zt),m.push(new ss)):(h.indexOf(xe.EAN_13)>-1&&m.push(new er),h.indexOf(xe.UPC_A)>-1&&m.push(new jr),h.indexOf(xe.EAN_8)>-1&&m.push(new Zt),h.indexOf(xe.UPC_E)>-1&&m.push(new ss)),this.readers=m}decodeRow(l,h,m){for(let g of this.readers)try{const y=g.decodeRow(l,h,m),v=y.getBarcodeFormat()===xe.EAN_13&&y.getText().charAt(0)==="0",E=m==null?null:m.get($.POSSIBLE_FORMATS),I=E==null||E.includes(xe.UPC_A);if(v&&I){const L=y.getRawBytes(),q=new le(y.getText().substring(1),L,L?L.length:null,y.getResultPoints(),xe.UPC_A);return q.putAllMetadata(y.getResultMetadata()),q}return y}catch{}throw new V}reset(){for(let l of this.readers)l.reset()}}class Jr extends Xe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(l,h){for(let m=0;m<h.length;m++)if(Xe.patternMatchVariance(l,h[m],Jr.MAX_INDIVIDUAL_VARIANCE)<Jr.MAX_AVG_VARIANCE)return m;throw new V}static count(l){return qe.sum(new Int32Array(l))}static increment(l,h){let m=0,g=h[0];for(let y=1;y<l.length;y++)h[y]>g&&(g=h[y],m=y);l[m]++}static decrement(l,h){let m=0,g=h[0];for(let y=1;y<l.length;y++)h[y]<g&&(g=h[y],m=y);l[m]--}static isFinderPattern(l){let h=l[0]+l[1],m=h+l[2]+l[3],g=h/m;if(g>=Jr.MIN_FINDER_PATTERN_RATIO&&g<=Jr.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;for(let E of l)E>v&&(v=E),E<y&&(y=E);return v<10*y}return!1}}Jr.MAX_AVG_VARIANCE=.2,Jr.MAX_INDIVIDUAL_VARIANCE=.45,Jr.MIN_FINDER_PATTERN_RATIO=9.5/12,Jr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ts{constructor(l,h){this.value=l,this.checksumPortion=h}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(l){if(!(l instanceof Ts))return!1;const h=l;return this.value===h.value&&this.checksumPortion===h.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vt{constructor(l,h,m,g,y){this.value=l,this.startEnd=h,this.value=l,this.startEnd=h,this.resultPoints=new Array,this.resultPoints.push(new Ue(m,y)),this.resultPoints.push(new Ue(g,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(l){if(!(l instanceof Vt))return!1;const h=l;return this.value===h.value}hashCode(){return this.value}}class Xn{constructor(){}static getRSSvalue(l,h,m){let g=0;for(let I of l)g+=I;let y=0,v=0,E=l.length;for(let I=0;I<E-1;I++){let L;for(L=1,v|=1<<I;L<l[I];L++,v&=~(1<<I)){let q=Xn.combins(g-L-1,E-I-2);if(m&&v===0&&g-L-(E-I-1)>=E-I-1&&(q-=Xn.combins(g-L-(E-I),E-I-2)),E-I-1>1){let Y=0;for(let re=g-L-(E-I-2);re>h;re--)Y+=Xn.combins(g-L-re-1,E-I-3);q-=Y*(E-1-I)}else g-L>h&&q--;y+=q}g-=L}return y}static combins(l,h){let m,g;l-h>h?(g=h,m=l-h):(g=l-h,m=h);let y=1,v=1;for(let E=l;E>m;E--)y*=E,v<=g&&(y/=v,v++);for(;v<=g;)y/=v,v++;return y}}class Xi{static buildBitArray(l){let h=l.length*2-1;l[l.length-1].getRightChar()==null&&(h-=1);let m=12*h,g=new _(m),y=0,E=l[0].getRightChar().getValue();for(let I=11;I>=0;--I)E&1<<I&&g.set(y),y++;for(let I=1;I<l.length;++I){let L=l[I],q=L.getLeftChar().getValue();for(let Y=11;Y>=0;--Y)q&1<<Y&&g.set(y),y++;if(L.getRightChar()!=null){let Y=L.getRightChar().getValue();for(let re=11;re>=0;--re)Y&1<<re&&g.set(y),y++}}return g}}class Yn{constructor(l,h){h?this.decodedInformation=null:(this.finished=l,this.decodedInformation=h)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class qs{constructor(l){this.newPosition=l}getNewPosition(){return this.newPosition}}class pr extends qs{constructor(l,h){super(l),this.value=h}getValue(){return this.value}isFNC1(){return this.value===pr.FNC1}}pr.FNC1="$";class Qr extends qs{constructor(l,h,m){super(l),m?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=h}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Or extends qs{constructor(l,h,m){if(super(l),h<0||h>10||m<0||m>10)throw new F;this.firstDigit=h,this.secondDigit=m}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Or.FNC1}isSecondDigitFNC1(){return this.secondDigit===Or.FNC1}isAnyFNC1(){return this.firstDigit===Or.FNC1||this.secondDigit===Or.FNC1}}Or.FNC1=10;class Nt{constructor(){}static parseFieldsInGeneralPurpose(l){if(!l)return null;if(l.length<2)throw new V;let h=l.substring(0,2);for(let y of Nt.TWO_DIGIT_DATA_LENGTH)if(y[0]===h)return y[1]===Nt.VARIABLE_LENGTH?Nt.processVariableAI(2,y[2],l):Nt.processFixedAI(2,y[1],l);if(l.length<3)throw new V;let m=l.substring(0,3);for(let y of Nt.THREE_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===Nt.VARIABLE_LENGTH?Nt.processVariableAI(3,y[2],l):Nt.processFixedAI(3,y[1],l);for(let y of Nt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===Nt.VARIABLE_LENGTH?Nt.processVariableAI(4,y[2],l):Nt.processFixedAI(4,y[1],l);if(l.length<4)throw new V;let g=l.substring(0,4);for(let y of Nt.FOUR_DIGIT_DATA_LENGTH)if(y[0]===g)return y[1]===Nt.VARIABLE_LENGTH?Nt.processVariableAI(4,y[2],l):Nt.processFixedAI(4,y[1],l);throw new V}static processFixedAI(l,h,m){if(m.length<l)throw new V;let g=m.substring(0,l);if(m.length<l+h)throw new V;let y=m.substring(l,l+h),v=m.substring(l+h),E="("+g+")"+y,I=Nt.parseFieldsInGeneralPurpose(v);return I==null?E:E+I}static processVariableAI(l,h,m){let g=m.substring(0,l),y;m.length<l+h?y=m.length:y=l+h;let v=m.substring(l,y),E=m.substring(y),I="("+g+")"+v,L=Nt.parseFieldsInGeneralPurpose(E);return L==null?I:I+L}}Nt.VARIABLE_LENGTH=[],Nt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Nt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Nt.VARIABLE_LENGTH,20],["22",Nt.VARIABLE_LENGTH,29],["30",Nt.VARIABLE_LENGTH,8],["37",Nt.VARIABLE_LENGTH,8],["90",Nt.VARIABLE_LENGTH,30],["91",Nt.VARIABLE_LENGTH,30],["92",Nt.VARIABLE_LENGTH,30],["93",Nt.VARIABLE_LENGTH,30],["94",Nt.VARIABLE_LENGTH,30],["95",Nt.VARIABLE_LENGTH,30],["96",Nt.VARIABLE_LENGTH,30],["97",Nt.VARIABLE_LENGTH,3],["98",Nt.VARIABLE_LENGTH,30],["99",Nt.VARIABLE_LENGTH,30]],Nt.THREE_DIGIT_DATA_LENGTH=[["240",Nt.VARIABLE_LENGTH,30],["241",Nt.VARIABLE_LENGTH,30],["242",Nt.VARIABLE_LENGTH,6],["250",Nt.VARIABLE_LENGTH,30],["251",Nt.VARIABLE_LENGTH,30],["253",Nt.VARIABLE_LENGTH,17],["254",Nt.VARIABLE_LENGTH,20],["400",Nt.VARIABLE_LENGTH,30],["401",Nt.VARIABLE_LENGTH,30],["402",17],["403",Nt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Nt.VARIABLE_LENGTH,20],["421",Nt.VARIABLE_LENGTH,15],["422",3],["423",Nt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Nt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Nt.VARIABLE_LENGTH,15],["391",Nt.VARIABLE_LENGTH,18],["392",Nt.VARIABLE_LENGTH,15],["393",Nt.VARIABLE_LENGTH,18],["703",Nt.VARIABLE_LENGTH,30]],Nt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Nt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Nt.VARIABLE_LENGTH,20],["8003",Nt.VARIABLE_LENGTH,30],["8004",Nt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Nt.VARIABLE_LENGTH,30],["8008",Nt.VARIABLE_LENGTH,12],["8018",18],["8020",Nt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Nt.VARIABLE_LENGTH,70],["8200",Nt.VARIABLE_LENGTH,70]];class ca{constructor(l){this.buffer=new J,this.information=l}decodeAllCodes(l,h){let m=h,g=null;do{let y=this.decodeGeneralPurposeField(m,g),v=Nt.parseFieldsInGeneralPurpose(y.getNewString());if(v!=null&&l.append(v),y.isRemaining()?g=""+y.getRemainingValue():g=null,m===y.getNewPosition())break;m=y.getNewPosition()}while(!0);return l.toString()}isStillNumeric(l){if(l+7>this.information.getSize())return l+4<=this.information.getSize();for(let h=l;h<l+3;++h)if(this.information.get(h))return!0;return this.information.get(l+3)}decodeNumeric(l){if(l+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(l,4);return y===0?new Or(this.information.getSize(),Or.FNC1,Or.FNC1):new Or(this.information.getSize(),y-1,Or.FNC1)}let h=this.extractNumericValueFromBitArray(l,7),m=(h-8)/11,g=(h-8)%11;return new Or(l+7,m,g)}extractNumericValueFromBitArray(l,h){return ca.extractNumericValueFromBitArray(this.information,l,h)}static extractNumericValueFromBitArray(l,h,m){let g=0;for(let y=0;y<m;++y)l.get(h+y)&&(g|=1<<m-y-1);return g}decodeGeneralPurposeField(l,h){this.buffer.setLengthToZero(),h!=null&&this.buffer.append(h),this.current.setPosition(l);let m=this.parseBlocks();return m!=null&&m.isRemaining()?new Qr(this.current.getPosition(),this.buffer.toString(),m.getRemainingValue()):new Qr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let l,h;do{let m=this.current.getPosition();if(this.current.isAlpha()?(h=this.parseAlphaBlock(),l=h.isFinished()):this.current.isIsoIec646()?(h=this.parseIsoIec646Block(),l=h.isFinished()):(h=this.parseNumericBlock(),l=h.isFinished()),!(m!==this.current.getPosition())&&!l)break}while(!l);return h.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let l=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFirstDigitFNC1()){let h;return l.isSecondDigitFNC1()?h=new Qr(this.current.getPosition(),this.buffer.toString()):h=new Qr(this.current.getPosition(),this.buffer.toString(),l.getSecondDigit()),new Yn(!0,h)}if(this.buffer.append(l.getFirstDigit()),l.isSecondDigitFNC1()){let h=new Qr(this.current.getPosition(),this.buffer.toString());return new Yn(!0,h)}this.buffer.append(l.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Yn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let l=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let h=new Qr(this.current.getPosition(),this.buffer.toString());return new Yn(!0,h)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Yn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let l=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(l.getNewPosition()),l.isFNC1()){let h=new Qr(this.current.getPosition(),this.buffer.toString());return new Yn(!0,h)}this.buffer.append(l.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Yn(!1)}isStillIsoIec646(l){if(l+5>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(l,5);if(h>=5&&h<16)return!0;if(l+7>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(l,7);if(m>=64&&m<116)return!0;if(l+8>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(l,8);return g>=232&&g<253}decodeIsoIec646(l){let h=this.extractNumericValueFromBitArray(l,5);if(h===15)return new pr(l+5,pr.FNC1);if(h>=5&&h<15)return new pr(l+5,"0"+(h-5));let m=this.extractNumericValueFromBitArray(l,7);if(m>=64&&m<90)return new pr(l+7,""+(m+1));if(m>=90&&m<116)return new pr(l+7,""+(m+7));let g=this.extractNumericValueFromBitArray(l,8),y;switch(g){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new F}return new pr(l+8,y)}isStillAlpha(l){if(l+5>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(l,5);if(h>=5&&h<16)return!0;if(l+6>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(l,6);return m>=16&&m<63}decodeAlphanumeric(l){let h=this.extractNumericValueFromBitArray(l,5);if(h===15)return new pr(l+5,pr.FNC1);if(h>=5&&h<15)return new pr(l+5,"0"+(h-5));let m=this.extractNumericValueFromBitArray(l,6);if(m>=32&&m<58)return new pr(l+6,""+(m+33));let g;switch(m){case 58:g="*";break;case 59:g=",";break;case 60:g="-";break;case 61:g=".";break;case 62:g="/";break;default:throw new ae("Decoding invalid alphanumeric value: "+m)}return new pr(l+6,g)}isAlphaTo646ToAlphaLatch(l){if(l+1>this.information.getSize())return!1;for(let h=0;h<5&&h+l<this.information.getSize();++h)if(h===2){if(!this.information.get(l+2))return!1}else if(this.information.get(l+h))return!1;return!0}isAlphaOr646ToNumericLatch(l){if(l+3>this.information.getSize())return!1;for(let h=l;h<l+3;++h)if(this.information.get(h))return!1;return!0}isNumericToAlphaNumericLatch(l){if(l+1>this.information.getSize())return!1;for(let h=0;h<4&&h+l<this.information.getSize();++h)if(this.information.get(l+h))return!1;return!0}}class da{constructor(l){this.information=l,this.generalDecoder=new ca(l)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class nn extends da{constructor(l){super(l)}encodeCompressedGtin(l,h){l.append("(01)");let m=l.length();l.append("9"),this.encodeCompressedGtinWithoutAI(l,h,m)}encodeCompressedGtinWithoutAI(l,h,m){for(let g=0;g<4;++g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(h+10*g,10);y/100===0&&l.append("0"),y/10===0&&l.append("0"),l.append(y)}nn.appendCheckDigit(l,m)}static appendCheckDigit(l,h){let m=0;for(let g=0;g<13;g++){let y=l.charAt(g+h).charCodeAt(0)-48;m+=g&1?y:3*y}m=10-m%10,m===10&&(m=0),l.append(m)}}nn.GTIN_SIZE=40;class bs extends nn{constructor(l){super(l)}parseInformation(){let l=new J;l.append("(01)");let h=l.length(),m=this.getGeneralDecoder().extractNumericValueFromBitArray(bs.HEADER_SIZE,4);return l.append(m),this.encodeCompressedGtinWithoutAI(l,bs.HEADER_SIZE+4,h),this.getGeneralDecoder().decodeAllCodes(l,bs.HEADER_SIZE+44)}}bs.HEADER_SIZE=4;class Hs extends da{constructor(l){super(l)}parseInformation(){let l=new J;return this.getGeneralDecoder().decodeAllCodes(l,Hs.HEADER_SIZE)}}Hs.HEADER_SIZE=5;class Is extends nn{constructor(l){super(l)}encodeCompressedWeight(l,h,m){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(h,m);this.addWeightCode(l,g);let y=this.checkWeight(g),v=1e5;for(let E=0;E<5;++E)y/v===0&&l.append("0"),v/=10;l.append(y)}}class vs extends Is{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()!=vs.HEADER_SIZE+Is.GTIN_SIZE+vs.WEIGHT_SIZE)throw new V;let l=new J;return this.encodeCompressedGtin(l,vs.HEADER_SIZE),this.encodeCompressedWeight(l,vs.HEADER_SIZE+Is.GTIN_SIZE,vs.WEIGHT_SIZE),l.toString()}}vs.HEADER_SIZE=5,vs.WEIGHT_SIZE=15;class yi extends vs{constructor(l){super(l)}addWeightCode(l,h){l.append("(3103)")}checkWeight(l){return l}}class Yo extends vs{constructor(l){super(l)}addWeightCode(l,h){h<1e4?l.append("(3202)"):l.append("(3203)")}checkWeight(l){return l<1e4?l:l-1e4}}class _s extends nn{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<_s.HEADER_SIZE+nn.GTIN_SIZE)throw new V;let l=new J;this.encodeCompressedGtin(l,_s.HEADER_SIZE);let h=this.getGeneralDecoder().extractNumericValueFromBitArray(_s.HEADER_SIZE+nn.GTIN_SIZE,_s.LAST_DIGIT_SIZE);l.append("(392"),l.append(h),l.append(")");let m=this.getGeneralDecoder().decodeGeneralPurposeField(_s.HEADER_SIZE+nn.GTIN_SIZE+_s.LAST_DIGIT_SIZE,null);return l.append(m.getNewString()),l.toString()}}_s.HEADER_SIZE=8,_s.LAST_DIGIT_SIZE=2;class Pn extends nn{constructor(l){super(l)}parseInformation(){if(this.getInformation().getSize()<Pn.HEADER_SIZE+nn.GTIN_SIZE)throw new V;let l=new J;this.encodeCompressedGtin(l,Pn.HEADER_SIZE);let h=this.getGeneralDecoder().extractNumericValueFromBitArray(Pn.HEADER_SIZE+nn.GTIN_SIZE,Pn.LAST_DIGIT_SIZE);l.append("(393"),l.append(h),l.append(")");let m=this.getGeneralDecoder().extractNumericValueFromBitArray(Pn.HEADER_SIZE+nn.GTIN_SIZE+Pn.LAST_DIGIT_SIZE,Pn.FIRST_THREE_DIGITS_SIZE);m/100==0&&l.append("0"),m/10==0&&l.append("0"),l.append(m);let g=this.getGeneralDecoder().decodeGeneralPurposeField(Pn.HEADER_SIZE+nn.GTIN_SIZE+Pn.LAST_DIGIT_SIZE+Pn.FIRST_THREE_DIGITS_SIZE,null);return l.append(g.getNewString()),l.toString()}}Pn.HEADER_SIZE=8,Pn.LAST_DIGIT_SIZE=2,Pn.FIRST_THREE_DIGITS_SIZE=10;class Pr extends Is{constructor(l,h,m){super(l),this.dateCode=m,this.firstAIdigits=h}parseInformation(){if(this.getInformation().getSize()!=Pr.HEADER_SIZE+Pr.GTIN_SIZE+Pr.WEIGHT_SIZE+Pr.DATE_SIZE)throw new V;let l=new J;return this.encodeCompressedGtin(l,Pr.HEADER_SIZE),this.encodeCompressedWeight(l,Pr.HEADER_SIZE+Pr.GTIN_SIZE,Pr.WEIGHT_SIZE),this.encodeCompressedDate(l,Pr.HEADER_SIZE+Pr.GTIN_SIZE+Pr.WEIGHT_SIZE),l.toString()}encodeCompressedDate(l,h){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(h,Pr.DATE_SIZE);if(m==38400)return;l.append("("),l.append(this.dateCode),l.append(")");let g=m%32;m/=32;let y=m%12+1;m/=12;let v=m;v/10==0&&l.append("0"),l.append(v),y/10==0&&l.append("0"),l.append(y),g/10==0&&l.append("0"),l.append(g)}addWeightCode(l,h){l.append("("),l.append(this.firstAIdigits),l.append(h/1e5),l.append(")")}checkWeight(l){return l%1e5}}Pr.HEADER_SIZE=8,Pr.WEIGHT_SIZE=20,Pr.DATE_SIZE=16;function iu(X){try{if(X.get(1))return new bs(X);if(!X.get(2))return new Hs(X);switch(ca.extractNumericValueFromBitArray(X,1,4)){case 4:return new yi(X);case 5:return new Yo(X)}switch(ca.extractNumericValueFromBitArray(X,1,5)){case 12:return new _s(X);case 13:return new Pn(X)}switch(ca.extractNumericValueFromBitArray(X,1,7)){case 56:return new Pr(X,"310","11");case 57:return new Pr(X,"320","11");case 58:return new Pr(X,"310","13");case 59:return new Pr(X,"320","13");case 60:return new Pr(X,"310","15");case 61:return new Pr(X,"320","15");case 62:return new Pr(X,"310","17");case 63:return new Pr(X,"320","17")}}catch(l){throw console.log(l),new ae("unknown decoder: "+X)}}class Ca{constructor(l,h,m,g){this.leftchar=l,this.rightchar=h,this.finderpattern=m,this.maybeLast=g}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(l,h){return l instanceof Ca?Ca.equalsOrNull(l.leftchar,h.leftchar)&&Ca.equalsOrNull(l.rightchar,h.rightchar)&&Ca.equalsOrNull(l.finderpattern,h.finderpattern):!1}static equalsOrNull(l,h){return l===null?h===null:Ca.equals(l,h)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Yl{constructor(l,h,m){this.pairs=l,this.rowNumber=h,this.wasReversed=m}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(l){return this.checkEqualitity(this,l)}toString(){return"{ "+this.pairs+" }"}equals(l,h){return l instanceof Yl?this.checkEqualitity(l,h)&&l.wasReversed===h.wasReversed:!1}checkEqualitity(l,h){if(!l||!h)return;let m;return l.forEach((g,y)=>{h.forEach(v=>{g.getLeftChar().getValue()===v.getLeftChar().getValue()&&g.getRightChar().getValue()===v.getRightChar().getValue()&&g.getFinderPatter().getValue()===v.getFinderPatter().getValue()&&(m=!0)})}),m}}class it extends Jr{constructor(l){super(...arguments),this.pairs=new Array(it.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=l===!0}decodeRow(l,h,m){this.pairs.length=0,this.startFromEven=!1;try{return it.constructResult(this.decodeRow2pairs(l,h))}catch(g){this.verbose&&console.log(g)}return this.pairs.length=0,this.startFromEven=!0,it.constructResult(this.decodeRow2pairs(l,h))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(l,h){let m=!1;for(;!m;)try{this.pairs.push(this.retrieveNextPair(h,this.pairs,l))}catch(y){if(y instanceof V){if(!this.pairs.length)throw new V;m=!0}}if(this.checkChecksum())return this.pairs;let g;if(this.rows.length?g=!0:g=!1,this.storeRow(l,!1),g){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new V}checkRowsBoolean(l){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,l&&(this.rows=this.rows.reverse());let h=null;try{h=this.checkRows(new Array,0)}catch(m){this.verbose&&console.log(m)}return l&&(this.rows=this.rows.reverse()),h}checkRows(l,h){for(let m=h;m<this.rows.length;m++){let g=this.rows[m];this.pairs.length=0;for(let v of l)this.pairs.push(v.getPairs());if(this.pairs.push(g.getPairs()),!it.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(l);y.push(g);try{return this.checkRows(y,m+1)}catch(v){this.verbose&&console.log(v)}}throw new V}static isValidSequence(l){for(let h of it.FINDER_PATTERN_SEQUENCES){if(l.length>h.length)continue;let m=!0;for(let g=0;g<l.length;g++)if(l[g].getFinderPattern().getValue()!=h[g]){m=!1;break}if(m)return!0}return!1}storeRow(l,h){let m=0,g=!1,y=!1;for(;m<this.rows.length;){let v=this.rows[m];if(v.getRowNumber()>l){y=v.isEquivalent(this.pairs);break}g=v.isEquivalent(this.pairs),m++}y||g||it.isPartialRow(this.pairs,this.rows)||(this.rows.push(m,new Yl(this.pairs,l,h)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(l,h){for(let m of h)if(m.getPairs().length!==l.length){for(let g of m.getPairs())for(let y of l)if(Ca.equals(g,y))break}}static isPartialRow(l,h){for(let m of h){let g=!0;for(let y of l){let v=!1;for(let E of m.getPairs())if(y.equals(E)){v=!0;break}if(!v){g=!1;break}}if(g)return!0}return!1}getRows(){return this.rows}static constructResult(l){let h=Xi.buildBitArray(l),g=iu(h).parseInformation(),y=l[0].getFinderPattern().getResultPoints(),v=l[l.length-1].getFinderPattern().getResultPoints(),E=[y[0],y[1],v[0],v[1]];return new le(g,null,null,E,xe.RSS_EXPANDED,null)}checkChecksum(){let l=this.pairs.get(0),h=l.getLeftChar(),m=l.getRightChar();if(m==null)return!1;let g=m.getChecksumPortion(),y=2;for(let E=1;E<this.pairs.size();++E){let I=this.pairs.get(E);g+=I.getLeftChar().getChecksumPortion(),y++;let L=I.getRightChar();L!=null&&(g+=L.getChecksumPortion(),y++)}return g%=211,211*(y-4)+g==h.getValue()}static getNextSecondBar(l,h){let m;return l.get(h)?(m=l.getNextUnset(h),m=l.getNextSet(m)):(m=l.getNextSet(h),m=l.getNextUnset(m)),m}retrieveNextPair(l,h,m){let g=h.length%2==0;this.startFromEven&&(g=!g);let y,v=!0,E=-1;do this.findNextPair(l,h,E),y=this.parseFoundFinderPattern(l,m,g),y==null?E=it.getNextSecondBar(l,this.startEnd[0]):v=!1;while(v);let I=this.decodeDataCharacter(l,y,g,!0);if(!this.isEmptyPair(h)&&h[h.length-1].mustBeLast())throw new V;let L;try{L=this.decodeDataCharacter(l,y,g,!1)}catch(q){L=null,this.verbose&&console.log(q)}return new Ca(I,L,y,!0)}isEmptyPair(l){return l.length===0}findNextPair(l,h,m){let g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;let y=l.getSize(),v;m>=0?v=m:this.isEmptyPair(h)?v=0:v=h[h.length-1].getFinderPattern().getStartEnd()[1];let E=h.length%2!=0;this.startFromEven&&(E=!E);let I=!1;for(;v<y&&(I=!l.get(v),!!I);)v++;let L=0,q=v;for(let Y=v;Y<y;Y++)if(l.get(Y)!=I)g[L]++;else{if(L==3){if(E&&it.reverseCounters(g),it.isFinderPattern(g)){this.startEnd[0]=q,this.startEnd[1]=Y;return}E&&it.reverseCounters(g),q+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,L--}else L++;g[L]=1,I=!I}throw new V}static reverseCounters(l){let h=l.length;for(let m=0;m<h/2;++m){let g=l[m];l[m]=l[h-m-1],l[h-m-1]=g}}parseFoundFinderPattern(l,h,m){let g,y,v;if(m){let L=this.startEnd[0]-1;for(;L>=0&&!l.get(L);)L--;L++,g=this.startEnd[0]-L,y=L,v=this.startEnd[1]}else y=this.startEnd[0],v=l.getNextUnset(this.startEnd[1]+1),g=v-this.startEnd[1];let E=this.getDecodeFinderCounters();j.arraycopy(E,0,E,1,E.length-1),E[0]=g;let I;try{I=this.parseFinderValue(E,it.FINDER_PATTERNS)}catch{return null}return new Vt(I,[y,v],y,v,h)}decodeDataCharacter(l,h,m,g){let y=this.getDataCharacterCounters();for(let Rr=0;Rr<y.length;Rr++)y[Rr]=0;if(g)it.recordPatternInReverse(l,h.getStartEnd()[0],y);else{it.recordPattern(l,h.getStartEnd()[1],y);for(let Rr=0,es=y.length-1;Rr<es;Rr++,es--){let Ks=y[Rr];y[Rr]=y[es],y[es]=Ks}}let v=17,E=qe.sum(new Int32Array(y))/v,I=(h.getStartEnd()[1]-h.getStartEnd()[0])/15;if(Math.abs(E-I)/I>.3)throw new V;let L=this.getOddCounts(),q=this.getEvenCounts(),Y=this.getOddRoundingErrors(),re=this.getEvenRoundingErrors();for(let Rr=0;Rr<y.length;Rr++){let es=1*y[Rr]/E,Ks=es+.5;if(Ks<1){if(es<.3)throw new V;Ks=1}else if(Ks>8){if(es>8.7)throw new V;Ks=8}let hl=Rr/2;Rr&1?(q[hl]=Ks,re[hl]=es-Ks):(L[hl]=Ks,Y[hl]=es-Ks)}this.adjustOddEvenCounts(v);let he=4*h.getValue()+(m?0:2)+(g?0:1)-1,Ne=0,Ae=0;for(let Rr=L.length-1;Rr>=0;Rr--){if(it.isNotA1left(h,m,g)){let es=it.WEIGHTS[he][2*Rr];Ae+=L[Rr]*es}Ne+=L[Rr]}let _e=0;for(let Rr=q.length-1;Rr>=0;Rr--)if(it.isNotA1left(h,m,g)){let es=it.WEIGHTS[he][2*Rr+1];_e+=q[Rr]*es}let We=Ae+_e;if(Ne&1||Ne>13||Ne<4)throw new V;let tt=(13-Ne)/2,st=it.SYMBOL_WIDEST[tt],rt=9-st,qt=Xn.getRSSvalue(L,st,!0),Yt=Xn.getRSSvalue(q,rt,!1),Qn=it.EVEN_TOTAL_SUBSET[tt],Ns=it.GSUM[tt],os=qt*Qn+Yt+Ns;return new Ts(os,We)}static isNotA1left(l,h,m){return!(l.getValue()==0&&h&&m)}adjustOddEvenCounts(l){let h=qe.sum(new Int32Array(this.getOddCounts())),m=qe.sum(new Int32Array(this.getEvenCounts())),g=!1,y=!1;h>13?y=!0:h<4&&(g=!0);let v=!1,E=!1;m>13?E=!0:m<4&&(v=!0);let I=h+m-l,L=(h&1)==1,q=(m&1)==0;if(I==1)if(L){if(q)throw new V;y=!0}else{if(!q)throw new V;E=!0}else if(I==-1)if(L){if(q)throw new V;g=!0}else{if(!q)throw new V;v=!0}else if(I==0){if(L){if(!q)throw new V;h<m?(g=!0,E=!0):(y=!0,v=!0)}else if(q)throw new V}else throw new V;if(g){if(y)throw new V;it.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&it.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(E)throw new V;it.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&it.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}it.SYMBOL_WIDEST=[7,5,4,3,1],it.EVEN_TOTAL_SUBSET=[4,20,52,104,204],it.GSUM=[0,348,1388,2948,3988],it.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],it.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],it.FINDER_PAT_A=0,it.FINDER_PAT_B=1,it.FINDER_PAT_C=2,it.FINDER_PAT_D=3,it.FINDER_PAT_E=4,it.FINDER_PAT_F=5,it.FINDER_PATTERN_SEQUENCES=[[it.FINDER_PAT_A,it.FINDER_PAT_A],[it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B],[it.FINDER_PAT_A,it.FINDER_PAT_C,it.FINDER_PAT_B,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_C],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F]],it.MAX_PAIRS=11;class Aa extends Ts{constructor(l,h,m){super(l,h),this.count=0,this.finderPattern=m}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class qr extends Jr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(l,h,m){const g=this.decodePair(h,!1,l,m);qr.addOrTally(this.possibleLeftPairs,g),h.reverse();let y=this.decodePair(h,!0,l,m);qr.addOrTally(this.possibleRightPairs,y),h.reverse();for(let v of this.possibleLeftPairs)if(v.getCount()>1){for(let E of this.possibleRightPairs)if(E.getCount()>1&&qr.checkChecksum(v,E))return qr.constructResult(v,E)}throw new V}static addOrTally(l,h){if(h==null)return;let m=!1;for(let g of l)if(g.getValue()===h.getValue()){g.incrementCount(),m=!0;break}m||l.push(h)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(l,h){let m=4537077*l.getValue()+h.getValue(),g=new String(m).toString(),y=new J;for(let L=13-g.length;L>0;L--)y.append("0");y.append(g);let v=0;for(let L=0;L<13;L++){let q=y.charAt(L).charCodeAt(0)-48;v+=L&1?q:3*q}v=10-v%10,v===10&&(v=0),y.append(v.toString());let E=l.getFinderPattern().getResultPoints(),I=h.getFinderPattern().getResultPoints();return new le(y.toString(),null,0,[E[0],E[1],I[0],I[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(l,h){let m=(l.getChecksumPortion()+16*h.getChecksumPortion())%79,g=9*l.getFinderPattern().getValue()+h.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,m===g}decodePair(l,h,m,g){try{let y=this.findFinderPattern(l,h),v=this.parseFoundFinderPattern(l,m,h,y),E=g==null?null:g.get($.NEED_RESULT_POINT_CALLBACK);if(E!=null){let q=(y[0]+y[1])/2;h&&(q=l.getSize()-1-q),E.foundPossibleResultPoint(new Ue(q,m))}let I=this.decodeDataCharacter(l,v,!0),L=this.decodeDataCharacter(l,v,!1);return new Aa(1597*I.getValue()+L.getValue(),I.getChecksumPortion()+4*L.getChecksumPortion(),v)}catch{return null}}decodeDataCharacter(l,h,m){let g=this.getDataCharacterCounters();for(let _e=0;_e<g.length;_e++)g[_e]=0;if(m)Xe.recordPatternInReverse(l,h.getStartEnd()[0],g);else{Xe.recordPattern(l,h.getStartEnd()[1]+1,g);for(let _e=0,We=g.length-1;_e<We;_e++,We--){let tt=g[_e];g[_e]=g[We],g[We]=tt}}let y=m?16:15,v=qe.sum(new Int32Array(g))/y,E=this.getOddCounts(),I=this.getEvenCounts(),L=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let _e=0;_e<g.length;_e++){let We=g[_e]/v,tt=Math.floor(We+.5);tt<1?tt=1:tt>8&&(tt=8);let st=Math.floor(_e/2);_e&1?(I[st]=tt,q[st]=We-tt):(E[st]=tt,L[st]=We-tt)}this.adjustOddEvenCounts(m,y);let Y=0,re=0;for(let _e=E.length-1;_e>=0;_e--)re*=9,re+=E[_e],Y+=E[_e];let he=0,Ne=0;for(let _e=I.length-1;_e>=0;_e--)he*=9,he+=I[_e],Ne+=I[_e];let Ae=re+3*he;if(m){if(Y&1||Y>12||Y<4)throw new V;let _e=(12-Y)/2,We=qr.OUTSIDE_ODD_WIDEST[_e],tt=9-We,st=Xn.getRSSvalue(E,We,!1),rt=Xn.getRSSvalue(I,tt,!0),qt=qr.OUTSIDE_EVEN_TOTAL_SUBSET[_e],Yt=qr.OUTSIDE_GSUM[_e];return new Ts(st*qt+rt+Yt,Ae)}else{if(Ne&1||Ne>10||Ne<4)throw new V;let _e=(10-Ne)/2,We=qr.INSIDE_ODD_WIDEST[_e],tt=9-We,st=Xn.getRSSvalue(E,We,!0),rt=Xn.getRSSvalue(I,tt,!1),qt=qr.INSIDE_ODD_TOTAL_SUBSET[_e],Yt=qr.INSIDE_GSUM[_e];return new Ts(rt*qt+st+Yt,Ae)}}findFinderPattern(l,h){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=l.getSize(),y=!1,v=0;for(;v<g&&(y=!l.get(v),h!==y);)v++;let E=0,I=v;for(let L=v;L<g;L++)if(l.get(L)!==y)m[E]++;else{if(E===3){if(Jr.isFinderPattern(m))return[I,L];I+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,E--}else E++;m[E]=1,y=!y}throw new V}parseFoundFinderPattern(l,h,m,g){let y=l.get(g[0]),v=g[0]-1;for(;v>=0&&y!==l.get(v);)v--;v++;const E=g[0]-v,I=this.getDecodeFinderCounters(),L=new Int32Array(I.length);j.arraycopy(I,0,L,1,I.length-1),L[0]=E;const q=this.parseFinderValue(L,qr.FINDER_PATTERNS);let Y=v,re=g[1];return m&&(Y=l.getSize()-1-Y,re=l.getSize()-1-re),new Vt(q,[v,g[1]],Y,re,h)}adjustOddEvenCounts(l,h){let m=qe.sum(new Int32Array(this.getOddCounts())),g=qe.sum(new Int32Array(this.getEvenCounts())),y=!1,v=!1,E=!1,I=!1;l?(m>12?v=!0:m<4&&(y=!0),g>12?I=!0:g<4&&(E=!0)):(m>11?v=!0:m<5&&(y=!0),g>10?I=!0:g<4&&(E=!0));let L=m+g-h,q=(m&1)===(l?1:0),Y=(g&1)===1;if(L===1)if(q){if(Y)throw new V;v=!0}else{if(!Y)throw new V;I=!0}else if(L===-1)if(q){if(Y)throw new V;y=!0}else{if(!Y)throw new V;E=!0}else if(L===0){if(q){if(!Y)throw new V;m<g?(y=!0,I=!0):(v=!0,E=!0)}else if(Y)throw new V}else throw new V;if(y){if(v)throw new V;Jr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&Jr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(I)throw new V;Jr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&Jr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}qr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],qr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],qr.OUTSIDE_GSUM=[0,161,961,2015,2715],qr.INSIDE_GSUM=[0,336,1036,1516],qr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],qr.INSIDE_ODD_WIDEST=[2,4,6,8],qr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Yi extends Xe{constructor(l,h){super(),this.readers=[],this.verbose=h===!0;const m=l?l.get($.POSSIBLE_FORMATS):null,g=l&&l.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;m?((m.includes(xe.EAN_13)||m.includes(xe.UPC_A)||m.includes(xe.EAN_8)||m.includes(xe.UPC_E))&&this.readers.push(new Kn(l)),m.includes(xe.CODE_39)&&this.readers.push(new mt(g)),m.includes(xe.CODE_128)&&this.readers.push(new Le),m.includes(xe.ITF)&&this.readers.push(new yt),m.includes(xe.RSS_14)&&this.readers.push(new qr),m.includes(xe.RSS_EXPANDED)&&this.readers.push(new it(this.verbose))):(this.readers.push(new Kn(l)),this.readers.push(new mt),this.readers.push(new Kn(l)),this.readers.push(new Le),this.readers.push(new yt),this.readers.push(new qr),this.readers.push(new it(this.verbose)))}decodeRow(l,h,m){for(let g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(l,h,m)}catch{}throw new V}reset(){this.readers.forEach(l=>l.reset())}}class Jc extends Q{constructor(l=500,h){super(new Yi(h),l,h)}}class vr{constructor(l,h,m){this.ecCodewords=l,this.ecBlocks=[h],m&&this.ecBlocks.push(m)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class yr{constructor(l,h){this.count=l,this.dataCodewords=h}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ur{constructor(l,h,m,g,y,v){this.versionNumber=l,this.symbolSizeRows=h,this.symbolSizeColumns=m,this.dataRegionSizeRows=g,this.dataRegionSizeColumns=y,this.ecBlocks=v;let E=0;const I=v.getECCodewords(),L=v.getECBlocks();for(let q of L)E+=q.getCount()*(q.getDataCodewords()+I);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(l,h){if(l&1||h&1)throw new F;for(let m of ur.VERSIONS)if(m.symbolSizeRows===l&&m.symbolSizeColumns===h)return m;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new ur(1,10,10,8,8,new vr(5,new yr(1,3))),new ur(2,12,12,10,10,new vr(7,new yr(1,5))),new ur(3,14,14,12,12,new vr(10,new yr(1,8))),new ur(4,16,16,14,14,new vr(12,new yr(1,12))),new ur(5,18,18,16,16,new vr(14,new yr(1,18))),new ur(6,20,20,18,18,new vr(18,new yr(1,22))),new ur(7,22,22,20,20,new vr(20,new yr(1,30))),new ur(8,24,24,22,22,new vr(24,new yr(1,36))),new ur(9,26,26,24,24,new vr(28,new yr(1,44))),new ur(10,32,32,14,14,new vr(36,new yr(1,62))),new ur(11,36,36,16,16,new vr(42,new yr(1,86))),new ur(12,40,40,18,18,new vr(48,new yr(1,114))),new ur(13,44,44,20,20,new vr(56,new yr(1,144))),new ur(14,48,48,22,22,new vr(68,new yr(1,174))),new ur(15,52,52,24,24,new vr(42,new yr(2,102))),new ur(16,64,64,14,14,new vr(56,new yr(2,140))),new ur(17,72,72,16,16,new vr(36,new yr(4,92))),new ur(18,80,80,18,18,new vr(48,new yr(4,114))),new ur(19,88,88,20,20,new vr(56,new yr(4,144))),new ur(20,96,96,22,22,new vr(68,new yr(4,174))),new ur(21,104,104,24,24,new vr(56,new yr(6,136))),new ur(22,120,120,18,18,new vr(68,new yr(6,175))),new ur(23,132,132,20,20,new vr(62,new yr(8,163))),new ur(24,144,144,22,22,new vr(62,new yr(8,156),new yr(2,155))),new ur(25,8,18,6,16,new vr(7,new yr(1,5))),new ur(26,8,32,6,14,new vr(11,new yr(1,10))),new ur(27,12,26,10,24,new vr(14,new yr(1,16))),new ur(28,12,36,10,16,new vr(18,new yr(1,22))),new ur(29,16,36,14,16,new vr(24,new yr(1,32))),new ur(30,16,48,14,22,new vr(28,new yr(1,49)))]}}ur.VERSIONS=ur.buildVersions();class Co{constructor(l){const h=l.getHeight();if(h<8||h>144||h&1)throw new F;this.version=Co.readVersion(l),this.mappingBitMatrix=this.extractDataRegion(l),this.readMappingMatrix=new K(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(l){const h=l.getHeight(),m=l.getWidth();return ur.getVersionForDimensions(h,m)}readCodewords(){const l=new Int8Array(this.version.getTotalCodewords());let h=0,m=4,g=0;const y=this.mappingBitMatrix.getHeight(),v=this.mappingBitMatrix.getWidth();let E=!1,I=!1,L=!1,q=!1;do if(m===y&&g===0&&!E)l[h++]=this.readCorner1(y,v)&255,m-=2,g+=2,E=!0;else if(m===y-2&&g===0&&v&3&&!I)l[h++]=this.readCorner2(y,v)&255,m-=2,g+=2,I=!0;else if(m===y+4&&g===2&&!(v&7)&&!L)l[h++]=this.readCorner3(y,v)&255,m-=2,g+=2,L=!0;else if(m===y-2&&g===0&&(v&7)===4&&!q)l[h++]=this.readCorner4(y,v)&255,m-=2,g+=2,q=!0;else{do m<y&&g>=0&&!this.readMappingMatrix.get(g,m)&&(l[h++]=this.readUtah(m,g,y,v)&255),m-=2,g+=2;while(m>=0&&g<v);m+=1,g+=3;do m>=0&&g<v&&!this.readMappingMatrix.get(g,m)&&(l[h++]=this.readUtah(m,g,y,v)&255),m+=2,g-=2;while(m<y&&g>=0);m+=3,g+=1}while(m<y||g<v);if(h!==this.version.getTotalCodewords())throw new F;return l}readModule(l,h,m,g){return l<0&&(l+=m,h+=4-(m+4&7)),h<0&&(h+=g,l+=4-(g+4&7)),this.readMappingMatrix.set(h,l),this.mappingBitMatrix.get(h,l)}readUtah(l,h,m,g){let y=0;return this.readModule(l-2,h-2,m,g)&&(y|=1),y<<=1,this.readModule(l-2,h-1,m,g)&&(y|=1),y<<=1,this.readModule(l-1,h-2,m,g)&&(y|=1),y<<=1,this.readModule(l-1,h-1,m,g)&&(y|=1),y<<=1,this.readModule(l-1,h,m,g)&&(y|=1),y<<=1,this.readModule(l,h-2,m,g)&&(y|=1),y<<=1,this.readModule(l,h-1,m,g)&&(y|=1),y<<=1,this.readModule(l,h,m,g)&&(y|=1),y}readCorner1(l,h){let m=0;return this.readModule(l-1,0,l,h)&&(m|=1),m<<=1,this.readModule(l-1,1,l,h)&&(m|=1),m<<=1,this.readModule(l-1,2,l,h)&&(m|=1),m<<=1,this.readModule(0,h-2,l,h)&&(m|=1),m<<=1,this.readModule(0,h-1,l,h)&&(m|=1),m<<=1,this.readModule(1,h-1,l,h)&&(m|=1),m<<=1,this.readModule(2,h-1,l,h)&&(m|=1),m<<=1,this.readModule(3,h-1,l,h)&&(m|=1),m}readCorner2(l,h){let m=0;return this.readModule(l-3,0,l,h)&&(m|=1),m<<=1,this.readModule(l-2,0,l,h)&&(m|=1),m<<=1,this.readModule(l-1,0,l,h)&&(m|=1),m<<=1,this.readModule(0,h-4,l,h)&&(m|=1),m<<=1,this.readModule(0,h-3,l,h)&&(m|=1),m<<=1,this.readModule(0,h-2,l,h)&&(m|=1),m<<=1,this.readModule(0,h-1,l,h)&&(m|=1),m<<=1,this.readModule(1,h-1,l,h)&&(m|=1),m}readCorner3(l,h){let m=0;return this.readModule(l-1,0,l,h)&&(m|=1),m<<=1,this.readModule(l-1,h-1,l,h)&&(m|=1),m<<=1,this.readModule(0,h-3,l,h)&&(m|=1),m<<=1,this.readModule(0,h-2,l,h)&&(m|=1),m<<=1,this.readModule(0,h-1,l,h)&&(m|=1),m<<=1,this.readModule(1,h-3,l,h)&&(m|=1),m<<=1,this.readModule(1,h-2,l,h)&&(m|=1),m<<=1,this.readModule(1,h-1,l,h)&&(m|=1),m}readCorner4(l,h){let m=0;return this.readModule(l-3,0,l,h)&&(m|=1),m<<=1,this.readModule(l-2,0,l,h)&&(m|=1),m<<=1,this.readModule(l-1,0,l,h)&&(m|=1),m<<=1,this.readModule(0,h-2,l,h)&&(m|=1),m<<=1,this.readModule(0,h-1,l,h)&&(m|=1),m<<=1,this.readModule(1,h-1,l,h)&&(m|=1),m<<=1,this.readModule(2,h-1,l,h)&&(m|=1),m<<=1,this.readModule(3,h-1,l,h)&&(m|=1),m}extractDataRegion(l){const h=this.version.getSymbolSizeRows(),m=this.version.getSymbolSizeColumns();if(l.getHeight()!==h)throw new p("Dimension of bitMatrix must match the version size");const g=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),v=h/g|0,E=m/y|0,I=v*g,L=E*y,q=new K(L,I);for(let Y=0;Y<v;++Y){const re=Y*g;for(let he=0;he<E;++he){const Ne=he*y;for(let Ae=0;Ae<g;++Ae){const _e=Y*(g+2)+1+Ae,We=re+Ae;for(let tt=0;tt<y;++tt){const st=he*(y+2)+1+tt;if(l.get(st,_e)){const rt=Ne+tt;q.set(rt,We)}}}}}return q}}class Qc{constructor(l,h){this.numDataCodewords=l,this.codewords=h}static getDataBlocks(l,h){const m=h.getECBlocks();let g=0;const y=m.getECBlocks();for(let Ae of y)g+=Ae.getCount();const v=new Array(g);let E=0;for(let Ae of y)for(let _e=0;_e<Ae.getCount();_e++){const We=Ae.getDataCodewords(),tt=m.getECCodewords()+We;v[E++]=new Qc(We,new Uint8Array(tt))}const L=v[0].codewords.length-m.getECCodewords(),q=L-1;let Y=0;for(let Ae=0;Ae<q;Ae++)for(let _e=0;_e<E;_e++)v[_e].codewords[Ae]=l[Y++];const re=h.getVersionNumber()===24,he=re?8:E;for(let Ae=0;Ae<he;Ae++)v[Ae].codewords[L-1]=l[Y++];const Ne=v[0].codewords.length;for(let Ae=L;Ae<Ne;Ae++)for(let _e=0;_e<E;_e++){const We=re?(_e+8)%E:_e,tt=re&&We>7?Ae-1:Ae;v[We].codewords[tt]=l[Y++]}if(Y!==l.length)throw new p;return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class fn{constructor(l){this.bytes=l,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(l){if(l<1||l>32||l>this.available())throw new p(""+l);let h=0,m=this.bitOffset,g=this.byteOffset;const y=this.bytes;if(m>0){const v=8-m,E=l<v?l:v,I=v-E,L=255>>8-E<<I;h=(y[g]&L)>>I,l-=E,m+=E,m===8&&(m=0,g++)}if(l>0){for(;l>=8;)h=h<<8|y[g]&255,g++,l-=8;if(l>0){const v=8-l,E=255>>v<<v;h=h<<l|(y[g]&E)>>v,m+=l}}return this.bitOffset=m,this.byteOffset=g,h}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var mn;(function(X){X[X.PAD_ENCODE=0]="PAD_ENCODE",X[X.ASCII_ENCODE=1]="ASCII_ENCODE",X[X.C40_ENCODE=2]="C40_ENCODE",X[X.TEXT_ENCODE=3]="TEXT_ENCODE",X[X.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",X[X.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",X[X.BASE256_ENCODE=6]="BASE256_ENCODE"})(mn||(mn={}));class za{static decode(l){const h=new fn(l),m=new J,g=new J,y=new Array;let v=mn.ASCII_ENCODE;do if(v===mn.ASCII_ENCODE)v=this.decodeAsciiSegment(h,m,g);else{switch(v){case mn.C40_ENCODE:this.decodeC40Segment(h,m);break;case mn.TEXT_ENCODE:this.decodeTextSegment(h,m);break;case mn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(h,m);break;case mn.EDIFACT_ENCODE:this.decodeEdifactSegment(h,m);break;case mn.BASE256_ENCODE:this.decodeBase256Segment(h,m,y);break;default:throw new F}v=mn.ASCII_ENCODE}while(v!==mn.PAD_ENCODE&&h.available()>0);return g.length()>0&&m.append(g.toString()),new be(l,m.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(l,h,m){let g=!1;do{let y=l.readBits(8);if(y===0)throw new F;if(y<=128)return g&&(y+=128),h.append(String.fromCharCode(y-1)),mn.ASCII_ENCODE;if(y===129)return mn.PAD_ENCODE;if(y<=229){const v=y-130;v<10&&h.append("0"),h.append(""+v)}else switch(y){case 230:return mn.C40_ENCODE;case 231:return mn.BASE256_ENCODE;case 232:h.append("");break;case 233:case 234:break;case 235:g=!0;break;case 236:h.append("[)>05"),m.insert(0,"");break;case 237:h.append("[)>06"),m.insert(0,"");break;case 238:return mn.ANSIX12_ENCODE;case 239:return mn.TEXT_ENCODE;case 240:return mn.EDIFACT_ENCODE;case 241:break;default:if(y!==254||l.available()!==0)throw new F;break}}while(l.available()>0);return mn.ASCII_ENCODE}static decodeC40Segment(l,h){let m=!1;const g=[];let y=0;do{if(l.available()===8)return;const v=l.readBits(8);if(v===254)return;this.parseTwoBytes(v,l.readBits(8),g);for(let E=0;E<3;E++){const I=g[E];switch(y){case 0:if(I<3)y=I+1;else if(I<this.C40_BASIC_SET_CHARS.length){const L=this.C40_BASIC_SET_CHARS[I];m?(h.append(String.fromCharCode(L.charCodeAt(0)+128)),m=!1):h.append(L)}else throw new F;break;case 1:m?(h.append(String.fromCharCode(I+128)),m=!1):h.append(String.fromCharCode(I)),y=0;break;case 2:if(I<this.C40_SHIFT2_SET_CHARS.length){const L=this.C40_SHIFT2_SET_CHARS[I];m?(h.append(String.fromCharCode(L.charCodeAt(0)+128)),m=!1):h.append(L)}else switch(I){case 27:h.append("");break;case 30:m=!0;break;default:throw new F}y=0;break;case 3:m?(h.append(String.fromCharCode(I+224)),m=!1):h.append(String.fromCharCode(I+96)),y=0;break;default:throw new F}}}while(l.available()>0)}static decodeTextSegment(l,h){let m=!1,g=[],y=0;do{if(l.available()===8)return;const v=l.readBits(8);if(v===254)return;this.parseTwoBytes(v,l.readBits(8),g);for(let E=0;E<3;E++){const I=g[E];switch(y){case 0:if(I<3)y=I+1;else if(I<this.TEXT_BASIC_SET_CHARS.length){const L=this.TEXT_BASIC_SET_CHARS[I];m?(h.append(String.fromCharCode(L.charCodeAt(0)+128)),m=!1):h.append(L)}else throw new F;break;case 1:m?(h.append(String.fromCharCode(I+128)),m=!1):h.append(String.fromCharCode(I)),y=0;break;case 2:if(I<this.TEXT_SHIFT2_SET_CHARS.length){const L=this.TEXT_SHIFT2_SET_CHARS[I];m?(h.append(String.fromCharCode(L.charCodeAt(0)+128)),m=!1):h.append(L)}else switch(I){case 27:h.append("");break;case 30:m=!0;break;default:throw new F}y=0;break;case 3:if(I<this.TEXT_SHIFT3_SET_CHARS.length){const L=this.TEXT_SHIFT3_SET_CHARS[I];m?(h.append(String.fromCharCode(L.charCodeAt(0)+128)),m=!1):h.append(L),y=0}else throw new F;break;default:throw new F}}}while(l.available()>0)}static decodeAnsiX12Segment(l,h){const m=[];do{if(l.available()===8)return;const g=l.readBits(8);if(g===254)return;this.parseTwoBytes(g,l.readBits(8),m);for(let y=0;y<3;y++){const v=m[y];switch(v){case 0:h.append("\r");break;case 1:h.append("*");break;case 2:h.append(">");break;case 3:h.append(" ");break;default:if(v<14)h.append(String.fromCharCode(v+44));else if(v<40)h.append(String.fromCharCode(v+51));else throw new F;break}}}while(l.available()>0)}static parseTwoBytes(l,h,m){let g=(l<<8)+h-1,y=Math.floor(g/1600);m[0]=y,g-=y*1600,y=Math.floor(g/40),m[1]=y,m[2]=g-y*40}static decodeEdifactSegment(l,h){do{if(l.available()<=16)return;for(let m=0;m<4;m++){let g=l.readBits(6);if(g===31){const y=8-l.getBitOffset();y!==8&&l.readBits(y);return}g&32||(g|=64),h.append(String.fromCharCode(g))}}while(l.available()>0)}static decodeBase256Segment(l,h,m){let g=1+l.getByteOffset();const y=this.unrandomize255State(l.readBits(8),g++);let v;if(y===0?v=l.available()/8|0:y<250?v=y:v=250*(y-249)+this.unrandomize255State(l.readBits(8),g++),v<0)throw new F;const E=new Uint8Array(v);for(let I=0;I<v;I++){if(l.available()<8)throw new F;E[I]=this.unrandomize255State(l.readBits(8),g++)}m.push(E);try{h.append(M.decode(E,W.ISO88591))}catch(I){throw new ae("Platform does not support required encoding: "+I.message)}}static unrandomize255State(l,h){const m=149*h%255+1,g=l-m;return g>=0?g:g+256}}za.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],za.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],za.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],za.TEXT_SHIFT2_SET_CHARS=za.C40_SHIFT2_SET_CHARS,za.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Zi{constructor(){this.rsDecoder=new Fe(Ye.DATA_MATRIX_FIELD_256)}decode(l){const h=new Co(l),m=h.getVersion(),g=h.readCodewords(),y=Qc.getDataBlocks(g,m);let v=0;for(let L of y)v+=L.getNumDataCodewords();const E=new Uint8Array(v),I=y.length;for(let L=0;L<I;L++){const q=y[L],Y=q.getCodewords(),re=q.getNumDataCodewords();this.correctErrors(Y,re);for(let he=0;he<re;he++)E[he*I+L]=Y[he]}return za.decode(E)}correctErrors(l,h){const m=new Int32Array(l);try{this.rsDecoder.decode(m,l.length-h)}catch{throw new x}for(let g=0;g<h;g++)l[g]=m[g]}}class Dr{constructor(l){this.image=l,this.rectangleDetector=new Gt(this.image)}detect(){const l=this.rectangleDetector.detect();let h=this.detectSolid1(l);if(h=this.detectSolid2(h),h[3]=this.correctTopRight(h),!h[3])throw new V;h=this.shiftToModuleCenter(h);const m=h[0],g=h[1],y=h[2],v=h[3];let E=this.transitionsBetween(m,v)+1,I=this.transitionsBetween(y,v)+1;(E&1)===1&&(E+=1),(I&1)===1&&(I+=1),4*E<7*I&&4*I<7*E&&(E=I=Math.max(E,I));let L=Dr.sampleGrid(this.image,m,g,y,v,E,I);return new jt(L,[m,g,y,v])}static shiftPoint(l,h,m){let g=(h.getX()-l.getX())/(m+1),y=(h.getY()-l.getY())/(m+1);return new Ue(l.getX()+g,l.getY()+y)}static moveAway(l,h,m){let g=l.getX(),y=l.getY();return g<h?g-=1:g+=1,y<m?y-=1:y+=1,new Ue(g,y)}detectSolid1(l){let h=l[0],m=l[1],g=l[3],y=l[2],v=this.transitionsBetween(h,m),E=this.transitionsBetween(m,g),I=this.transitionsBetween(g,y),L=this.transitionsBetween(y,h),q=v,Y=[y,h,m,g];return q>E&&(q=E,Y[0]=h,Y[1]=m,Y[2]=g,Y[3]=y),q>I&&(q=I,Y[0]=m,Y[1]=g,Y[2]=y,Y[3]=h),q>L&&(Y[0]=g,Y[1]=y,Y[2]=h,Y[3]=m),Y}detectSolid2(l){let h=l[0],m=l[1],g=l[2],y=l[3],v=this.transitionsBetween(h,y),E=Dr.shiftPoint(m,g,(v+1)*4),I=Dr.shiftPoint(g,m,(v+1)*4),L=this.transitionsBetween(E,h),q=this.transitionsBetween(I,y);return L<q?(l[0]=h,l[1]=m,l[2]=g,l[3]=y):(l[0]=m,l[1]=g,l[2]=y,l[3]=h),l}correctTopRight(l){let h=l[0],m=l[1],g=l[2],y=l[3],v=this.transitionsBetween(h,y),E=this.transitionsBetween(m,y),I=Dr.shiftPoint(h,m,(E+1)*4),L=Dr.shiftPoint(g,m,(v+1)*4);v=this.transitionsBetween(I,y),E=this.transitionsBetween(L,y);let q=new Ue(y.getX()+(g.getX()-m.getX())/(v+1),y.getY()+(g.getY()-m.getY())/(v+1)),Y=new Ue(y.getX()+(h.getX()-m.getX())/(E+1),y.getY()+(h.getY()-m.getY())/(E+1));if(!this.isValid(q))return this.isValid(Y)?Y:null;if(!this.isValid(Y))return q;let re=this.transitionsBetween(I,q)+this.transitionsBetween(L,q),he=this.transitionsBetween(I,Y)+this.transitionsBetween(L,Y);return re>he?q:Y}shiftToModuleCenter(l){let h=l[0],m=l[1],g=l[2],y=l[3],v=this.transitionsBetween(h,y)+1,E=this.transitionsBetween(g,y)+1,I=Dr.shiftPoint(h,m,E*4),L=Dr.shiftPoint(g,m,v*4);v=this.transitionsBetween(I,y)+1,E=this.transitionsBetween(L,y)+1,(v&1)===1&&(v+=1),(E&1)===1&&(E+=1);let q=(h.getX()+m.getX()+g.getX()+y.getX())/4,Y=(h.getY()+m.getY()+g.getY()+y.getY())/4;h=Dr.moveAway(h,q,Y),m=Dr.moveAway(m,q,Y),g=Dr.moveAway(g,q,Y),y=Dr.moveAway(y,q,Y);let re,he;return I=Dr.shiftPoint(h,m,E*4),I=Dr.shiftPoint(I,y,v*4),re=Dr.shiftPoint(m,h,E*4),re=Dr.shiftPoint(re,g,v*4),L=Dr.shiftPoint(g,y,E*4),L=Dr.shiftPoint(L,m,v*4),he=Dr.shiftPoint(y,g,E*4),he=Dr.shiftPoint(he,h,v*4),[I,re,L,he]}isValid(l){return l.getX()>=0&&l.getX()<this.image.getWidth()&&l.getY()>0&&l.getY()<this.image.getHeight()}static sampleGrid(l,h,m,g,y,v,E){return Ht.getInstance().sampleGrid(l,v,E,.5,.5,v-.5,.5,v-.5,E-.5,.5,E-.5,h.getX(),h.getY(),y.getX(),y.getY(),g.getX(),g.getY(),m.getX(),m.getY())}transitionsBetween(l,h){let m=Math.trunc(l.getX()),g=Math.trunc(l.getY()),y=Math.trunc(h.getX()),v=Math.trunc(h.getY()),E=Math.abs(v-g)>Math.abs(y-m);if(E){let Ae=m;m=g,g=Ae,Ae=y,y=v,v=Ae}let I=Math.abs(y-m),L=Math.abs(v-g),q=-I/2,Y=g<v?1:-1,re=m<y?1:-1,he=0,Ne=this.image.get(E?g:m,E?m:g);for(let Ae=m,_e=g;Ae!==y;Ae+=re){let We=this.image.get(E?_e:Ae,E?Ae:_e);if(We!==Ne&&(he++,Ne=We),q+=L,q>0){if(_e===v)break;_e+=Y,q-=I}}return he}}class Zn{constructor(){this.decoder=new Zi}decode(l,h=null){let m,g;if(h!=null&&h.has($.PURE_BARCODE)){const L=Zn.extractPureBits(l.getBlackMatrix());m=this.decoder.decode(L),g=Zn.NO_POINTS}else{const L=new Dr(l.getBlackMatrix()).detect();m=this.decoder.decode(L.getBits()),g=L.getPoints()}const y=m.getRawBytes(),v=new le(m.getText(),y,8*y.length,g,xe.DATA_MATRIX,j.currentTimeMillis()),E=m.getByteSegments();E!=null&&v.putMetadata(Re.BYTE_SEGMENTS,E);const I=m.getECLevel();return I!=null&&v.putMetadata(Re.ERROR_CORRECTION_LEVEL,I),v}reset(){}static extractPureBits(l){const h=l.getTopLeftOnBit(),m=l.getBottomRightOnBit();if(h==null||m==null)throw new V;const g=this.moduleSize(h,l);let y=h[1];const v=m[1];let E=h[0];const L=(m[0]-E+1)/g,q=(v-y+1)/g;if(L<=0||q<=0)throw new V;const Y=g/2;y+=Y,E+=Y;const re=new K(L,q);for(let he=0;he<q;he++){const Ne=y+he*g;for(let Ae=0;Ae<L;Ae++)l.get(E+Ae*g,Ne)&&re.set(Ae,he)}return re}static moduleSize(l,h){const m=h.getWidth();let g=l[0];const y=l[1];for(;g<m&&h.get(g,y);)g++;if(g===m)throw new V;const v=g-l[0];if(v===0)throw new V;return v}}Zn.NO_POINTS=[];class Zo extends Q{constructor(l=500){super(new Zn,l)}}var Hr;(function(X){X[X.L=0]="L",X[X.M=1]="M",X[X.Q=2]="Q",X[X.H=3]="H"})(Hr||(Hr={}));class Sr{constructor(l,h,m){this.value=l,this.stringValue=h,this.bits=m,Sr.FOR_BITS.set(m,this),Sr.FOR_VALUE.set(l,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(l){switch(l){case"L":return Sr.L;case"M":return Sr.M;case"Q":return Sr.Q;case"H":return Sr.H;default:throw new f(l+"not available")}}toString(){return this.stringValue}equals(l){if(!(l instanceof Sr))return!1;const h=l;return this.value===h.value}static forBits(l){if(l<0||l>=Sr.FOR_BITS.size)throw new p;return Sr.FOR_BITS.get(l)}}Sr.FOR_BITS=new Map,Sr.FOR_VALUE=new Map,Sr.L=new Sr(Hr.L,"L",1),Sr.M=new Sr(Hr.M,"M",0),Sr.Q=new Sr(Hr.Q,"Q",3),Sr.H=new Sr(Hr.H,"H",2);class Jn{constructor(l){this.errorCorrectionLevel=Sr.forBits(l>>3&3),this.dataMask=l&7}static numBitsDiffering(l,h){return k.bitCount(l^h)}static decodeFormatInformation(l,h){const m=Jn.doDecodeFormatInformation(l,h);return m!==null?m:Jn.doDecodeFormatInformation(l^Jn.FORMAT_INFO_MASK_QR,h^Jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(l,h){let m=Number.MAX_SAFE_INTEGER,g=0;for(const y of Jn.FORMAT_INFO_DECODE_LOOKUP){const v=y[0];if(v===l||v===h)return new Jn(y[1]);let E=Jn.numBitsDiffering(l,v);E<m&&(g=y[1],m=E),l!==h&&(E=Jn.numBitsDiffering(h,v),E<m&&(g=y[1],m=E))}return m<=3?new Jn(g):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(l){if(!(l instanceof Jn))return!1;const h=l;return this.errorCorrectionLevel===h.errorCorrectionLevel&&this.dataMask===h.dataMask}}Jn.FORMAT_INFO_MASK_QR=21522,Jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Me{constructor(l,...h){this.ecCodewordsPerBlock=l,this.ecBlocks=h}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let l=0;const h=this.ecBlocks;for(const m of h)l+=m.getCount();return l}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ue{constructor(l,h){this.count=l,this.dataCodewords=h}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(l,h,...m){this.versionNumber=l,this.alignmentPatternCenters=h,this.ecBlocks=m;let g=0;const y=m[0].getECCodewordsPerBlock(),v=m[0].getECBlocks();for(const E of v)g+=E.getCount()*(E.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(l){return this.ecBlocks[l.getValue()]}static getProvisionalVersionForDimension(l){if(l%4!==1)throw new F;try{return this.getVersionForNumber((l-17)/4)}catch{throw new F}}static getVersionForNumber(l){if(l<1||l>40)throw new p;return At.VERSIONS[l-1]}static decodeVersionInformation(l){let h=Number.MAX_SAFE_INTEGER,m=0;for(let g=0;g<At.VERSION_DECODE_INFO.length;g++){const y=At.VERSION_DECODE_INFO[g];if(y===l)return At.getVersionForNumber(g+7);const v=Jn.numBitsDiffering(l,y);v<h&&(m=g+7,h=v)}return h<=3?At.getVersionForNumber(m):null}buildFunctionPattern(){const l=this.getDimensionForVersion(),h=new K(l);h.setRegion(0,0,9,9),h.setRegion(l-8,0,8,9),h.setRegion(0,l-8,9,8);const m=this.alignmentPatternCenters.length;for(let g=0;g<m;g++){const y=this.alignmentPatternCenters[g]-2;for(let v=0;v<m;v++)g===0&&(v===0||v===m-1)||g===m-1&&v===0||h.setRegion(this.alignmentPatternCenters[v]-2,y,5,5)}return h.setRegion(6,9,1,l-17),h.setRegion(9,6,l-17,1),this.versionNumber>6&&(h.setRegion(l-11,0,3,6),h.setRegion(0,l-11,6,3)),h}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new Me(7,new ue(1,19)),new Me(10,new ue(1,16)),new Me(13,new ue(1,13)),new Me(17,new ue(1,9))),new At(2,Int32Array.from([6,18]),new Me(10,new ue(1,34)),new Me(16,new ue(1,28)),new Me(22,new ue(1,22)),new Me(28,new ue(1,16))),new At(3,Int32Array.from([6,22]),new Me(15,new ue(1,55)),new Me(26,new ue(1,44)),new Me(18,new ue(2,17)),new Me(22,new ue(2,13))),new At(4,Int32Array.from([6,26]),new Me(20,new ue(1,80)),new Me(18,new ue(2,32)),new Me(26,new ue(2,24)),new Me(16,new ue(4,9))),new At(5,Int32Array.from([6,30]),new Me(26,new ue(1,108)),new Me(24,new ue(2,43)),new Me(18,new ue(2,15),new ue(2,16)),new Me(22,new ue(2,11),new ue(2,12))),new At(6,Int32Array.from([6,34]),new Me(18,new ue(2,68)),new Me(16,new ue(4,27)),new Me(24,new ue(4,19)),new Me(28,new ue(4,15))),new At(7,Int32Array.from([6,22,38]),new Me(20,new ue(2,78)),new Me(18,new ue(4,31)),new Me(18,new ue(2,14),new ue(4,15)),new Me(26,new ue(4,13),new ue(1,14))),new At(8,Int32Array.from([6,24,42]),new Me(24,new ue(2,97)),new Me(22,new ue(2,38),new ue(2,39)),new Me(22,new ue(4,18),new ue(2,19)),new Me(26,new ue(4,14),new ue(2,15))),new At(9,Int32Array.from([6,26,46]),new Me(30,new ue(2,116)),new Me(22,new ue(3,36),new ue(2,37)),new Me(20,new ue(4,16),new ue(4,17)),new Me(24,new ue(4,12),new ue(4,13))),new At(10,Int32Array.from([6,28,50]),new Me(18,new ue(2,68),new ue(2,69)),new Me(26,new ue(4,43),new ue(1,44)),new Me(24,new ue(6,19),new ue(2,20)),new Me(28,new ue(6,15),new ue(2,16))),new At(11,Int32Array.from([6,30,54]),new Me(20,new ue(4,81)),new Me(30,new ue(1,50),new ue(4,51)),new Me(28,new ue(4,22),new ue(4,23)),new Me(24,new ue(3,12),new ue(8,13))),new At(12,Int32Array.from([6,32,58]),new Me(24,new ue(2,92),new ue(2,93)),new Me(22,new ue(6,36),new ue(2,37)),new Me(26,new ue(4,20),new ue(6,21)),new Me(28,new ue(7,14),new ue(4,15))),new At(13,Int32Array.from([6,34,62]),new Me(26,new ue(4,107)),new Me(22,new ue(8,37),new ue(1,38)),new Me(24,new ue(8,20),new ue(4,21)),new Me(22,new ue(12,11),new ue(4,12))),new At(14,Int32Array.from([6,26,46,66]),new Me(30,new ue(3,115),new ue(1,116)),new Me(24,new ue(4,40),new ue(5,41)),new Me(20,new ue(11,16),new ue(5,17)),new Me(24,new ue(11,12),new ue(5,13))),new At(15,Int32Array.from([6,26,48,70]),new Me(22,new ue(5,87),new ue(1,88)),new Me(24,new ue(5,41),new ue(5,42)),new Me(30,new ue(5,24),new ue(7,25)),new Me(24,new ue(11,12),new ue(7,13))),new At(16,Int32Array.from([6,26,50,74]),new Me(24,new ue(5,98),new ue(1,99)),new Me(28,new ue(7,45),new ue(3,46)),new Me(24,new ue(15,19),new ue(2,20)),new Me(30,new ue(3,15),new ue(13,16))),new At(17,Int32Array.from([6,30,54,78]),new Me(28,new ue(1,107),new ue(5,108)),new Me(28,new ue(10,46),new ue(1,47)),new Me(28,new ue(1,22),new ue(15,23)),new Me(28,new ue(2,14),new ue(17,15))),new At(18,Int32Array.from([6,30,56,82]),new Me(30,new ue(5,120),new ue(1,121)),new Me(26,new ue(9,43),new ue(4,44)),new Me(28,new ue(17,22),new ue(1,23)),new Me(28,new ue(2,14),new ue(19,15))),new At(19,Int32Array.from([6,30,58,86]),new Me(28,new ue(3,113),new ue(4,114)),new Me(26,new ue(3,44),new ue(11,45)),new Me(26,new ue(17,21),new ue(4,22)),new Me(26,new ue(9,13),new ue(16,14))),new At(20,Int32Array.from([6,34,62,90]),new Me(28,new ue(3,107),new ue(5,108)),new Me(26,new ue(3,41),new ue(13,42)),new Me(30,new ue(15,24),new ue(5,25)),new Me(28,new ue(15,15),new ue(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new Me(28,new ue(4,116),new ue(4,117)),new Me(26,new ue(17,42)),new Me(28,new ue(17,22),new ue(6,23)),new Me(30,new ue(19,16),new ue(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new Me(28,new ue(2,111),new ue(7,112)),new Me(28,new ue(17,46)),new Me(30,new ue(7,24),new ue(16,25)),new Me(24,new ue(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new Me(30,new ue(4,121),new ue(5,122)),new Me(28,new ue(4,47),new ue(14,48)),new Me(30,new ue(11,24),new ue(14,25)),new Me(30,new ue(16,15),new ue(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new Me(30,new ue(6,117),new ue(4,118)),new Me(28,new ue(6,45),new ue(14,46)),new Me(30,new ue(11,24),new ue(16,25)),new Me(30,new ue(30,16),new ue(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new Me(26,new ue(8,106),new ue(4,107)),new Me(28,new ue(8,47),new ue(13,48)),new Me(30,new ue(7,24),new ue(22,25)),new Me(30,new ue(22,15),new ue(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new Me(28,new ue(10,114),new ue(2,115)),new Me(28,new ue(19,46),new ue(4,47)),new Me(28,new ue(28,22),new ue(6,23)),new Me(30,new ue(33,16),new ue(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new Me(30,new ue(8,122),new ue(4,123)),new Me(28,new ue(22,45),new ue(3,46)),new Me(30,new ue(8,23),new ue(26,24)),new Me(30,new ue(12,15),new ue(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new Me(30,new ue(3,117),new ue(10,118)),new Me(28,new ue(3,45),new ue(23,46)),new Me(30,new ue(4,24),new ue(31,25)),new Me(30,new ue(11,15),new ue(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new Me(30,new ue(7,116),new ue(7,117)),new Me(28,new ue(21,45),new ue(7,46)),new Me(30,new ue(1,23),new ue(37,24)),new Me(30,new ue(19,15),new ue(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new Me(30,new ue(5,115),new ue(10,116)),new Me(28,new ue(19,47),new ue(10,48)),new Me(30,new ue(15,24),new ue(25,25)),new Me(30,new ue(23,15),new ue(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new Me(30,new ue(13,115),new ue(3,116)),new Me(28,new ue(2,46),new ue(29,47)),new Me(30,new ue(42,24),new ue(1,25)),new Me(30,new ue(23,15),new ue(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new Me(30,new ue(17,115)),new Me(28,new ue(10,46),new ue(23,47)),new Me(30,new ue(10,24),new ue(35,25)),new Me(30,new ue(19,15),new ue(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new Me(30,new ue(17,115),new ue(1,116)),new Me(28,new ue(14,46),new ue(21,47)),new Me(30,new ue(29,24),new ue(19,25)),new Me(30,new ue(11,15),new ue(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new Me(30,new ue(13,115),new ue(6,116)),new Me(28,new ue(14,46),new ue(23,47)),new Me(30,new ue(44,24),new ue(7,25)),new Me(30,new ue(59,16),new ue(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new Me(30,new ue(12,121),new ue(7,122)),new Me(28,new ue(12,47),new ue(26,48)),new Me(30,new ue(39,24),new ue(14,25)),new Me(30,new ue(22,15),new ue(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new Me(30,new ue(6,121),new ue(14,122)),new Me(28,new ue(6,47),new ue(34,48)),new Me(30,new ue(46,24),new ue(10,25)),new Me(30,new ue(2,15),new ue(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new Me(30,new ue(17,122),new ue(4,123)),new Me(28,new ue(29,46),new ue(14,47)),new Me(30,new ue(49,24),new ue(10,25)),new Me(30,new ue(24,15),new ue(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new Me(30,new ue(4,122),new ue(18,123)),new Me(28,new ue(13,46),new ue(32,47)),new Me(30,new ue(48,24),new ue(14,25)),new Me(30,new ue(42,15),new ue(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new Me(30,new ue(20,117),new ue(4,118)),new Me(28,new ue(40,47),new ue(7,48)),new Me(30,new ue(43,24),new ue(22,25)),new Me(30,new ue(10,15),new ue(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new Me(30,new ue(19,118),new ue(6,119)),new Me(28,new ue(18,47),new ue(31,48)),new Me(30,new ue(34,24),new ue(34,25)),new Me(30,new ue(20,15),new ue(61,16)))];var wn;(function(X){X[X.DATA_MASK_000=0]="DATA_MASK_000",X[X.DATA_MASK_001=1]="DATA_MASK_001",X[X.DATA_MASK_010=2]="DATA_MASK_010",X[X.DATA_MASK_011=3]="DATA_MASK_011",X[X.DATA_MASK_100=4]="DATA_MASK_100",X[X.DATA_MASK_101=5]="DATA_MASK_101",X[X.DATA_MASK_110=6]="DATA_MASK_110",X[X.DATA_MASK_111=7]="DATA_MASK_111"})(wn||(wn={}));class Os{constructor(l,h){this.value=l,this.isMasked=h}unmaskBitMatrix(l,h){for(let m=0;m<h;m++)for(let g=0;g<h;g++)this.isMasked(m,g)&&l.flip(g,m)}}Os.values=new Map([[wn.DATA_MASK_000,new Os(wn.DATA_MASK_000,(X,l)=>(X+l&1)===0)],[wn.DATA_MASK_001,new Os(wn.DATA_MASK_001,(X,l)=>(X&1)===0)],[wn.DATA_MASK_010,new Os(wn.DATA_MASK_010,(X,l)=>l%3===0)],[wn.DATA_MASK_011,new Os(wn.DATA_MASK_011,(X,l)=>(X+l)%3===0)],[wn.DATA_MASK_100,new Os(wn.DATA_MASK_100,(X,l)=>(Math.floor(X/2)+Math.floor(l/3)&1)===0)],[wn.DATA_MASK_101,new Os(wn.DATA_MASK_101,(X,l)=>X*l%6===0)],[wn.DATA_MASK_110,new Os(wn.DATA_MASK_110,(X,l)=>X*l%6<3)],[wn.DATA_MASK_111,new Os(wn.DATA_MASK_111,(X,l)=>(X+l+X*l%3&1)===0)]]);class Ao{constructor(l){const h=l.getHeight();if(h<21||(h&3)!==1)throw new F;this.bitMatrix=l}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let l=0;for(let y=0;y<6;y++)l=this.copyBit(y,8,l);l=this.copyBit(7,8,l),l=this.copyBit(8,8,l),l=this.copyBit(8,7,l);for(let y=5;y>=0;y--)l=this.copyBit(8,y,l);const h=this.bitMatrix.getHeight();let m=0;const g=h-7;for(let y=h-1;y>=g;y--)m=this.copyBit(8,y,m);for(let y=h-8;y<h;y++)m=this.copyBit(y,8,m);if(this.parsedFormatInfo=Jn.decodeFormatInformation(l,m),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const l=this.bitMatrix.getHeight(),h=Math.floor((l-17)/4);if(h<=6)return At.getVersionForNumber(h);let m=0;const g=l-11;for(let v=5;v>=0;v--)for(let E=l-9;E>=g;E--)m=this.copyBit(E,v,m);let y=At.decodeVersionInformation(m);if(y!==null&&y.getDimensionForVersion()===l)return this.parsedVersion=y,y;m=0;for(let v=5;v>=0;v--)for(let E=l-9;E>=g;E--)m=this.copyBit(v,E,m);if(y=At.decodeVersionInformation(m),y!==null&&y.getDimensionForVersion()===l)return this.parsedVersion=y,y;throw new F}copyBit(l,h,m){return(this.isMirror?this.bitMatrix.get(h,l):this.bitMatrix.get(l,h))?m<<1|1:m<<1}readCodewords(){const l=this.readFormatInformation(),h=this.readVersion(),m=Os.values.get(l.getDataMask()),g=this.bitMatrix.getHeight();m.unmaskBitMatrix(this.bitMatrix,g);const y=h.buildFunctionPattern();let v=!0;const E=new Uint8Array(h.getTotalCodewords());let I=0,L=0,q=0;for(let Y=g-1;Y>0;Y-=2){Y===6&&Y--;for(let re=0;re<g;re++){const he=v?g-1-re:re;for(let Ne=0;Ne<2;Ne++)y.get(Y-Ne,he)||(q++,L<<=1,this.bitMatrix.get(Y-Ne,he)&&(L|=1),q===8&&(E[I++]=L,q=0,L=0))}v=!v}if(I!==h.getTotalCodewords())throw new F;return E}remask(){if(this.parsedFormatInfo===null)return;const l=Os.values[this.parsedFormatInfo.getDataMask()],h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h)}setMirror(l){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=l}mirror(){const l=this.bitMatrix;for(let h=0,m=l.getWidth();h<m;h++)for(let g=h+1,y=l.getHeight();g<y;g++)l.get(h,g)!==l.get(g,h)&&(l.flip(g,h),l.flip(h,g))}}class Jo{constructor(l,h){this.numDataCodewords=l,this.codewords=h}static getDataBlocks(l,h,m){if(l.length!==h.getTotalCodewords())throw new p;const g=h.getECBlocksForLevel(m);let y=0;const v=g.getECBlocks();for(const Ne of v)y+=Ne.getCount();const E=new Array(y);let I=0;for(const Ne of v)for(let Ae=0;Ae<Ne.getCount();Ae++){const _e=Ne.getDataCodewords(),We=g.getECCodewordsPerBlock()+_e;E[I++]=new Jo(_e,new Uint8Array(We))}const L=E[0].codewords.length;let q=E.length-1;for(;q>=0&&E[q].codewords.length!==L;)q--;q++;const Y=L-g.getECCodewordsPerBlock();let re=0;for(let Ne=0;Ne<Y;Ne++)for(let Ae=0;Ae<I;Ae++)E[Ae].codewords[Ne]=l[re++];for(let Ne=q;Ne<I;Ne++)E[Ne].codewords[Y]=l[re++];const he=E[0].codewords.length;for(let Ne=Y;Ne<he;Ne++)for(let Ae=0;Ae<I;Ae++){const _e=Ae<q?Ne:Ne+1;E[Ae].codewords[_e]=l[re++]}return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Vs;(function(X){X[X.TERMINATOR=0]="TERMINATOR",X[X.NUMERIC=1]="NUMERIC",X[X.ALPHANUMERIC=2]="ALPHANUMERIC",X[X.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",X[X.BYTE=4]="BYTE",X[X.ECI=5]="ECI",X[X.KANJI=6]="KANJI",X[X.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",X[X.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",X[X.HANZI=9]="HANZI"})(Vs||(Vs={}));class Wt{constructor(l,h,m,g){this.value=l,this.stringValue=h,this.characterCountBitsForVersions=m,this.bits=g,Wt.FOR_BITS.set(g,this),Wt.FOR_VALUE.set(l,this)}static forBits(l){const h=Wt.FOR_BITS.get(l);if(h===void 0)throw new p;return h}getCharacterCountBits(l){const h=l.getVersionNumber();let m;return h<=9?m=0:h<=26?m=1:m=2,this.characterCountBitsForVersions[m]}getValue(){return this.value}getBits(){return this.bits}equals(l){if(!(l instanceof Wt))return!1;const h=l;return this.value===h.value}toString(){return this.stringValue}}Wt.FOR_BITS=new Map,Wt.FOR_VALUE=new Map,Wt.TERMINATOR=new Wt(Vs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Wt.NUMERIC=new Wt(Vs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Wt.ALPHANUMERIC=new Wt(Vs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Wt.STRUCTURED_APPEND=new Wt(Vs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Wt.BYTE=new Wt(Vs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Wt.ECI=new Wt(Vs.ECI,"ECI",Int32Array.from([0,0,0]),7),Wt.KANJI=new Wt(Vs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Wt.FNC1_FIRST_POSITION=new Wt(Vs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Wt.FNC1_SECOND_POSITION=new Wt(Vs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Wt.HANZI=new Wt(Vs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Gr{static decode(l,h,m,g){const y=new fn(l);let v=new J;const E=new Array;let I=-1,L=-1;try{let q=null,Y=!1,re;do{if(y.available()<4)re=Wt.TERMINATOR;else{const he=y.readBits(4);re=Wt.forBits(he)}switch(re){case Wt.TERMINATOR:break;case Wt.FNC1_FIRST_POSITION:case Wt.FNC1_SECOND_POSITION:Y=!0;break;case Wt.STRUCTURED_APPEND:if(y.available()<16)throw new F;I=y.readBits(8),L=y.readBits(8);break;case Wt.ECI:const he=Gr.parseECIValue(y);if(q=R.getCharacterSetECIByValue(he),q===null)throw new F;break;case Wt.HANZI:const Ne=y.readBits(4),Ae=y.readBits(re.getCharacterCountBits(h));Ne===Gr.GB2312_SUBSET&&Gr.decodeHanziSegment(y,v,Ae);break;default:const _e=y.readBits(re.getCharacterCountBits(h));switch(re){case Wt.NUMERIC:Gr.decodeNumericSegment(y,v,_e);break;case Wt.ALPHANUMERIC:Gr.decodeAlphanumericSegment(y,v,_e,Y);break;case Wt.BYTE:Gr.decodeByteSegment(y,v,_e,q,E,g);break;case Wt.KANJI:Gr.decodeKanjiSegment(y,v,_e);break;default:throw new F}break}}while(re!==Wt.TERMINATOR)}catch{throw new F}return new be(l,v.toString(),E.length===0?null:E,m===null?null:m.toString(),I,L)}static decodeHanziSegment(l,h,m){if(m*13>l.available())throw new F;const g=new Uint8Array(2*m);let y=0;for(;m>0;){const v=l.readBits(13);let E=v/96<<8&4294967295|v%96;E<959?E+=41377:E+=42657,g[y]=E>>8&255,g[y+1]=E&255,y+=2,m--}try{h.append(M.decode(g,W.GB2312))}catch(v){throw new F(v)}}static decodeKanjiSegment(l,h,m){if(m*13>l.available())throw new F;const g=new Uint8Array(2*m);let y=0;for(;m>0;){const v=l.readBits(13);let E=v/192<<8&4294967295|v%192;E<7936?E+=33088:E+=49472,g[y]=E>>8,g[y+1]=E,y+=2,m--}try{h.append(M.decode(g,W.SHIFT_JIS))}catch(v){throw new F(v)}}static decodeByteSegment(l,h,m,g,y,v){if(8*m>l.available())throw new F;const E=new Uint8Array(m);for(let L=0;L<m;L++)E[L]=l.readBits(8);let I;g===null?I=W.guessEncoding(E,v):I=g.getName();try{h.append(M.decode(E,I))}catch(L){throw new F(L)}y.push(E)}static toAlphaNumericChar(l){if(l>=Gr.ALPHANUMERIC_CHARS.length)throw new F;return Gr.ALPHANUMERIC_CHARS[l]}static decodeAlphanumericSegment(l,h,m,g){const y=h.length();for(;m>1;){if(l.available()<11)throw new F;const v=l.readBits(11);h.append(Gr.toAlphaNumericChar(Math.floor(v/45))),h.append(Gr.toAlphaNumericChar(v%45)),m-=2}if(m===1){if(l.available()<6)throw new F;h.append(Gr.toAlphaNumericChar(l.readBits(6)))}if(g)for(let v=y;v<h.length();v++)h.charAt(v)==="%"&&(v<h.length()-1&&h.charAt(v+1)==="%"?h.deleteCharAt(v+1):h.setCharAt(v,""))}static decodeNumericSegment(l,h,m){for(;m>=3;){if(l.available()<10)throw new F;const g=l.readBits(10);if(g>=1e3)throw new F;h.append(Gr.toAlphaNumericChar(Math.floor(g/100))),h.append(Gr.toAlphaNumericChar(Math.floor(g/10)%10)),h.append(Gr.toAlphaNumericChar(g%10)),m-=3}if(m===2){if(l.available()<7)throw new F;const g=l.readBits(7);if(g>=100)throw new F;h.append(Gr.toAlphaNumericChar(Math.floor(g/10))),h.append(Gr.toAlphaNumericChar(g%10))}else if(m===1){if(l.available()<4)throw new F;const g=l.readBits(4);if(g>=10)throw new F;h.append(Gr.toAlphaNumericChar(g))}}static parseECIValue(l){const h=l.readBits(8);if(!(h&128))return h&127;if((h&192)===128){const m=l.readBits(8);return(h&63)<<8&4294967295|m}if((h&224)===192){const m=l.readBits(16);return(h&31)<<16&4294967295|m}throw new F}}Gr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Gr.GB2312_SUBSET=1;class Zl{constructor(l){this.mirrored=l}isMirrored(){return this.mirrored}applyMirroredCorrection(l){if(!this.mirrored||l===null||l.length<3)return;const h=l[0];l[0]=l[2],l[2]=h}}class Qo{constructor(){this.rsDecoder=new Fe(Ye.QR_CODE_FIELD_256)}decodeBooleanArray(l,h){return this.decodeBitMatrix(K.parseFromBooleanArray(l),h)}decodeBitMatrix(l,h){const m=new Ao(l);let g=null;try{return this.decodeBitMatrixParser(m,h)}catch(y){g=y}try{m.remask(),m.setMirror(!0),m.readVersion(),m.readFormatInformation(),m.mirror();const y=this.decodeBitMatrixParser(m,h);return y.setOther(new Zl(!0)),y}catch(y){throw g!==null?g:y}}decodeBitMatrixParser(l,h){const m=l.readVersion(),g=l.readFormatInformation().getErrorCorrectionLevel(),y=l.readCodewords(),v=Jo.getDataBlocks(y,m,g);let E=0;for(const q of v)E+=q.getNumDataCodewords();const I=new Uint8Array(E);let L=0;for(const q of v){const Y=q.getCodewords(),re=q.getNumDataCodewords();this.correctErrors(Y,re);for(let he=0;he<re;he++)I[L++]=Y[he]}return Gr.decode(I,m,g,h)}correctErrors(l,h){const m=new Int32Array(l);try{this.rsDecoder.decode(m,l.length-h)}catch{throw new x}for(let g=0;g<h;g++)l[g]=m[g]}}class bi extends Ue{constructor(l,h,m){super(l,h),this.estimatedModuleSize=m}aboutEquals(l,h,m){if(Math.abs(h-this.getY())<=l&&Math.abs(m-this.getX())<=l){const g=Math.abs(l-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(l,h,m){const g=(this.getX()+h)/2,y=(this.getY()+l)/2,v=(this.estimatedModuleSize+m)/2;return new bi(g,y,v)}}class Jl{constructor(l,h,m,g,y,v,E){this.image=l,this.startX=h,this.startY=m,this.width=g,this.height=y,this.moduleSize=v,this.resultPointCallback=E,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const l=this.startX,h=this.height,m=this.width,g=l+m,y=this.startY+h/2,v=new Int32Array(3),E=this.image;for(let I=0;I<h;I++){const L=y+(I&1?-Math.floor((I+1)/2):Math.floor((I+1)/2));v[0]=0,v[1]=0,v[2]=0;let q=l;for(;q<g&&!E.get(q,L);)q++;let Y=0;for(;q<g;){if(E.get(q,L))if(Y===1)v[1]++;else if(Y===2){if(this.foundPatternCross(v)){const re=this.handlePossibleCenter(v,L,q);if(re!==null)return re}v[0]=v[2],v[1]=1,v[2]=0,Y=1}else v[++Y]++;else Y===1&&Y++,v[Y]++;q++}if(this.foundPatternCross(v)){const re=this.handlePossibleCenter(v,L,g);if(re!==null)return re}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(l,h){return h-l[2]-l[1]/2}foundPatternCross(l){const h=this.moduleSize,m=h/2;for(let g=0;g<3;g++)if(Math.abs(h-l[g])>=m)return!1;return!0}crossCheckVertical(l,h,m,g){const y=this.image,v=y.getHeight(),E=this.crossCheckStateCount;E[0]=0,E[1]=0,E[2]=0;let I=l;for(;I>=0&&y.get(h,I)&&E[1]<=m;)E[1]++,I--;if(I<0||E[1]>m)return NaN;for(;I>=0&&!y.get(h,I)&&E[0]<=m;)E[0]++,I--;if(E[0]>m)return NaN;for(I=l+1;I<v&&y.get(h,I)&&E[1]<=m;)E[1]++,I++;if(I===v||E[1]>m)return NaN;for(;I<v&&!y.get(h,I)&&E[2]<=m;)E[2]++,I++;if(E[2]>m)return NaN;const L=E[0]+E[1]+E[2];return 5*Math.abs(L-g)>=2*g?NaN:this.foundPatternCross(E)?Jl.centerFromEnd(E,I):NaN}handlePossibleCenter(l,h,m){const g=l[0]+l[1]+l[2],y=Jl.centerFromEnd(l,m),v=this.crossCheckVertical(h,y,2*l[1],g);if(!isNaN(v)){const E=(l[0]+l[1]+l[2])/3;for(const L of this.possibleCenters)if(L.aboutEquals(E,v,y))return L.combineEstimate(v,y,E);const I=new bi(y,v,E);this.possibleCenters.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return null}}class Ji extends Ue{constructor(l,h,m,g){super(l,h),this.estimatedModuleSize=m,this.count=g,g===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(l,h,m){if(Math.abs(h-this.getY())<=l&&Math.abs(m-this.getX())<=l){const g=Math.abs(l-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1}combineEstimate(l,h,m){const g=this.count+1,y=(this.count*this.getX()+h)/g,v=(this.count*this.getY()+l)/g,E=(this.count*this.estimatedModuleSize+m)/g;return new Ji(y,v,E,g)}}class ed{constructor(l){this.bottomLeft=l[0],this.topLeft=l[1],this.topRight=l[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ot{constructor(l,h){this.image=l,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=h}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(l){const h=l!=null&&l.get($.TRY_HARDER)!==void 0,m=l!=null&&l.get($.PURE_BARCODE)!==void 0,g=this.image,y=g.getHeight(),v=g.getWidth();let E=Math.floor(3*y/(4*Ot.MAX_MODULES));(E<Ot.MIN_SKIP||h)&&(E=Ot.MIN_SKIP);let I=!1;const L=new Int32Array(5);for(let Y=E-1;Y<y&&!I;Y+=E){L[0]=0,L[1]=0,L[2]=0,L[3]=0,L[4]=0;let re=0;for(let he=0;he<v;he++)if(g.get(he,Y))(re&1)===1&&re++,L[re]++;else if(re&1)L[re]++;else if(re===4)if(Ot.foundPatternCross(L)){if(this.handlePossibleCenter(L,Y,he,m)===!0)if(E=2,this.hasSkipped===!0)I=this.haveMultiplyConfirmedCenters();else{const Ae=this.findRowSkip();Ae>L[2]&&(Y+=Ae-L[2]-E,he=v-1)}else{L[0]=L[2],L[1]=L[3],L[2]=L[4],L[3]=1,L[4]=0,re=3;continue}re=0,L[0]=0,L[1]=0,L[2]=0,L[3]=0,L[4]=0}else L[0]=L[2],L[1]=L[3],L[2]=L[4],L[3]=1,L[4]=0,re=3;else L[++re]++;Ot.foundPatternCross(L)&&this.handlePossibleCenter(L,Y,v,m)===!0&&(E=L[0],this.hasSkipped&&(I=this.haveMultiplyConfirmedCenters()))}const q=this.selectBestPatterns();return Ue.orderBestPatterns(q),new ed(q)}static centerFromEnd(l,h){return h-l[4]-l[3]-l[2]/2}static foundPatternCross(l){let h=0;for(let y=0;y<5;y++){const v=l[y];if(v===0)return!1;h+=v}if(h<7)return!1;const m=h/7,g=m/2;return Math.abs(m-l[0])<g&&Math.abs(m-l[1])<g&&Math.abs(3*m-l[2])<3*g&&Math.abs(m-l[3])<g&&Math.abs(m-l[4])<g}getCrossCheckStateCount(){const l=this.crossCheckStateCount;return l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l}crossCheckDiagonal(l,h,m,g){const y=this.getCrossCheckStateCount();let v=0;const E=this.image;for(;l>=v&&h>=v&&E.get(h-v,l-v);)y[2]++,v++;if(l<v||h<v)return!1;for(;l>=v&&h>=v&&!E.get(h-v,l-v)&&y[1]<=m;)y[1]++,v++;if(l<v||h<v||y[1]>m)return!1;for(;l>=v&&h>=v&&E.get(h-v,l-v)&&y[0]<=m;)y[0]++,v++;if(y[0]>m)return!1;const I=E.getHeight(),L=E.getWidth();for(v=1;l+v<I&&h+v<L&&E.get(h+v,l+v);)y[2]++,v++;if(l+v>=I||h+v>=L)return!1;for(;l+v<I&&h+v<L&&!E.get(h+v,l+v)&&y[3]<m;)y[3]++,v++;if(l+v>=I||h+v>=L||y[3]>=m)return!1;for(;l+v<I&&h+v<L&&E.get(h+v,l+v)&&y[4]<m;)y[4]++,v++;if(y[4]>=m)return!1;const q=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(q-g)<2*g&&Ot.foundPatternCross(y)}crossCheckVertical(l,h,m,g){const y=this.image,v=y.getHeight(),E=this.getCrossCheckStateCount();let I=l;for(;I>=0&&y.get(h,I);)E[2]++,I--;if(I<0)return NaN;for(;I>=0&&!y.get(h,I)&&E[1]<=m;)E[1]++,I--;if(I<0||E[1]>m)return NaN;for(;I>=0&&y.get(h,I)&&E[0]<=m;)E[0]++,I--;if(E[0]>m)return NaN;for(I=l+1;I<v&&y.get(h,I);)E[2]++,I++;if(I===v)return NaN;for(;I<v&&!y.get(h,I)&&E[3]<m;)E[3]++,I++;if(I===v||E[3]>=m)return NaN;for(;I<v&&y.get(h,I)&&E[4]<m;)E[4]++,I++;if(E[4]>=m)return NaN;const L=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(L-g)>=2*g?NaN:Ot.foundPatternCross(E)?Ot.centerFromEnd(E,I):NaN}crossCheckHorizontal(l,h,m,g){const y=this.image,v=y.getWidth(),E=this.getCrossCheckStateCount();let I=l;for(;I>=0&&y.get(I,h);)E[2]++,I--;if(I<0)return NaN;for(;I>=0&&!y.get(I,h)&&E[1]<=m;)E[1]++,I--;if(I<0||E[1]>m)return NaN;for(;I>=0&&y.get(I,h)&&E[0]<=m;)E[0]++,I--;if(E[0]>m)return NaN;for(I=l+1;I<v&&y.get(I,h);)E[2]++,I++;if(I===v)return NaN;for(;I<v&&!y.get(I,h)&&E[3]<m;)E[3]++,I++;if(I===v||E[3]>=m)return NaN;for(;I<v&&y.get(I,h)&&E[4]<m;)E[4]++,I++;if(E[4]>=m)return NaN;const L=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(L-g)>=g?NaN:Ot.foundPatternCross(E)?Ot.centerFromEnd(E,I):NaN}handlePossibleCenter(l,h,m,g){const y=l[0]+l[1]+l[2]+l[3]+l[4];let v=Ot.centerFromEnd(l,m),E=this.crossCheckVertical(h,Math.floor(v),l[2],y);if(!isNaN(E)&&(v=this.crossCheckHorizontal(Math.floor(v),Math.floor(E),l[2],y),!isNaN(v)&&(!g||this.crossCheckDiagonal(Math.floor(E),Math.floor(v),l[2],y)))){const I=y/7;let L=!1;const q=this.possibleCenters;for(let Y=0,re=q.length;Y<re;Y++){const he=q[Y];if(he.aboutEquals(I,E,v)){q[Y]=he.combineEstimate(E,v,I),L=!0;break}}if(!L){const Y=new Ji(v,E,I);q.push(Y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Y)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let h=null;for(const m of this.possibleCenters)if(m.getCount()>=Ot.CENTER_QUORUM)if(h==null)h=m;else return this.hasSkipped=!0,Math.floor((Math.abs(h.getX()-m.getX())-Math.abs(h.getY()-m.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let l=0,h=0;const m=this.possibleCenters.length;for(const v of this.possibleCenters)v.getCount()>=Ot.CENTER_QUORUM&&(l++,h+=v.getEstimatedModuleSize());if(l<3)return!1;const g=h/m;let y=0;for(const v of this.possibleCenters)y+=Math.abs(v.getEstimatedModuleSize()-g);return y<=.05*h}selectBestPatterns(){const l=this.possibleCenters.length;if(l<3)throw new V;const h=this.possibleCenters;let m;if(l>3){let g=0,y=0;for(const I of this.possibleCenters){const L=I.getEstimatedModuleSize();g+=L,y+=L*L}m=g/l;let v=Math.sqrt(y/l-m*m);h.sort((I,L)=>{const q=Math.abs(L.getEstimatedModuleSize()-m),Y=Math.abs(I.getEstimatedModuleSize()-m);return q<Y?-1:q>Y?1:0});const E=Math.max(.2*m,v);for(let I=0;I<h.length&&h.length>3;I++){const L=h[I];Math.abs(L.getEstimatedModuleSize()-m)>E&&(h.splice(I,1),I--)}}if(h.length>3){let g=0;for(const y of h)g+=y.getEstimatedModuleSize();m=g/h.length,h.sort((y,v)=>{if(v.getCount()===y.getCount()){const E=Math.abs(v.getEstimatedModuleSize()-m),I=Math.abs(y.getEstimatedModuleSize()-m);return E<I?1:E>I?-1:0}else return v.getCount()-y.getCount()}),h.splice(3)}return[h[0],h[1],h[2]]}}Ot.CENTER_QUORUM=2,Ot.MIN_SKIP=3,Ot.MAX_MODULES=57;class el{constructor(l){this.image=l}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(l){this.resultPointCallback=l==null?null:l.get($.NEED_RESULT_POINT_CALLBACK);const m=new Ot(this.image,this.resultPointCallback).find(l);return this.processFinderPatternInfo(m)}processFinderPatternInfo(l){const h=l.getTopLeft(),m=l.getTopRight(),g=l.getBottomLeft(),y=this.calculateModuleSize(h,m,g);if(y<1)throw new V("No pattern found in proccess finder.");const v=el.computeDimension(h,m,g,y),E=At.getProvisionalVersionForDimension(v),I=E.getDimensionForVersion()-7;let L=null;if(E.getAlignmentPatternCenters().length>0){const he=m.getX()-h.getX()+g.getX(),Ne=m.getY()-h.getY()+g.getY(),Ae=1-3/I,_e=Math.floor(h.getX()+Ae*(he-h.getX())),We=Math.floor(h.getY()+Ae*(Ne-h.getY()));for(let tt=4;tt<=16;tt<<=1)try{L=this.findAlignmentInRegion(y,_e,We,tt);break}catch(st){if(!(st instanceof V))throw st}}const q=el.createTransform(h,m,g,L,v),Y=el.sampleGrid(this.image,q,v);let re;return L===null?re=[g,h,m]:re=[g,h,m,L],new jt(Y,re)}static createTransform(l,h,m,g,y){const v=y-3.5;let E,I,L,q;return g!==null?(E=g.getX(),I=g.getY(),L=v-3,q=L):(E=h.getX()-l.getX()+m.getX(),I=h.getY()-l.getY()+m.getY(),L=v,q=v),_t.quadrilateralToQuadrilateral(3.5,3.5,v,3.5,L,q,3.5,v,l.getX(),l.getY(),h.getX(),h.getY(),E,I,m.getX(),m.getY())}static sampleGrid(l,h,m){return Ht.getInstance().sampleGridWithTransform(l,m,m,h)}static computeDimension(l,h,m,g){const y=qe.round(Ue.distance(l,h)/g),v=qe.round(Ue.distance(l,m)/g);let E=Math.floor((y+v)/2)+7;switch(E&3){case 0:E++;break;case 2:E--;break;case 3:throw new V("Dimensions could be not found.")}return E}calculateModuleSize(l,h,m){return(this.calculateModuleSizeOneWay(l,h)+this.calculateModuleSizeOneWay(l,m))/2}calculateModuleSizeOneWay(l,h){const m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(h.getX()),Math.floor(h.getY())),g=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(l.getX()),Math.floor(l.getY()));return isNaN(m)?g/7:isNaN(g)?m/7:(m+g)/14}sizeOfBlackWhiteBlackRunBothWays(l,h,m,g){let y=this.sizeOfBlackWhiteBlackRun(l,h,m,g),v=1,E=l-(m-l);E<0?(v=l/(l-E),E=0):E>=this.image.getWidth()&&(v=(this.image.getWidth()-1-l)/(E-l),E=this.image.getWidth()-1);let I=Math.floor(h-(g-h)*v);return v=1,I<0?(v=h/(h-I),I=0):I>=this.image.getHeight()&&(v=(this.image.getHeight()-1-h)/(I-h),I=this.image.getHeight()-1),E=Math.floor(l+(E-l)*v),y+=this.sizeOfBlackWhiteBlackRun(l,h,E,I),y-1}sizeOfBlackWhiteBlackRun(l,h,m,g){const y=Math.abs(g-h)>Math.abs(m-l);if(y){let he=l;l=h,h=he,he=m,m=g,g=he}const v=Math.abs(m-l),E=Math.abs(g-h);let I=-v/2;const L=l<m?1:-1,q=h<g?1:-1;let Y=0;const re=m+L;for(let he=l,Ne=h;he!==re;he+=L){const Ae=y?Ne:he,_e=y?he:Ne;if(Y===1===this.image.get(Ae,_e)){if(Y===2)return qe.distance(he,Ne,l,h);Y++}if(I+=E,I>0){if(Ne===g)break;Ne+=q,I-=v}}return Y===2?qe.distance(m+L,g,l,h):NaN}findAlignmentInRegion(l,h,m,g){const y=Math.floor(g*l),v=Math.max(0,h-y),E=Math.min(this.image.getWidth()-1,h+y);if(E-v<l*3)throw new V("Alignment top exceeds estimated module size.");const I=Math.max(0,m-y),L=Math.min(this.image.getHeight()-1,m+y);if(L-I<l*3)throw new V("Alignment bottom exceeds estimated module size.");return new Jl(this.image,v,I,E-v,L-I,l,this.resultPointCallback).find()}}class vi{constructor(){this.decoder=new Qo}getDecoder(){return this.decoder}decode(l,h){let m,g;if(h!=null&&h.get($.PURE_BARCODE)!==void 0){const I=vi.extractPureBits(l.getBlackMatrix());m=this.decoder.decodeBitMatrix(I,h),g=vi.NO_POINTS}else{const I=new el(l.getBlackMatrix()).detect(h);m=this.decoder.decodeBitMatrix(I.getBits(),h),g=I.getPoints()}m.getOther()instanceof Zl&&m.getOther().applyMirroredCorrection(g);const y=new le(m.getText(),m.getRawBytes(),void 0,g,xe.QR_CODE,void 0),v=m.getByteSegments();v!==null&&y.putMetadata(Re.BYTE_SEGMENTS,v);const E=m.getECLevel();return E!==null&&y.putMetadata(Re.ERROR_CORRECTION_LEVEL,E),m.hasStructuredAppend()&&(y.putMetadata(Re.STRUCTURED_APPEND_SEQUENCE,m.getStructuredAppendSequenceNumber()),y.putMetadata(Re.STRUCTURED_APPEND_PARITY,m.getStructuredAppendParity())),y}reset(){}static extractPureBits(l){const h=l.getTopLeftOnBit(),m=l.getBottomRightOnBit();if(h===null||m===null)throw new V;const g=this.moduleSize(h,l);let y=h[1],v=m[1],E=h[0],I=m[0];if(E>=I||y>=v)throw new V;if(v-y!==I-E&&(I=E+(v-y),I>=l.getWidth()))throw new V;const L=Math.round((I-E+1)/g),q=Math.round((v-y+1)/g);if(L<=0||q<=0)throw new V;if(q!==L)throw new V;const Y=Math.floor(g/2);y+=Y,E+=Y;const re=E+Math.floor((L-1)*g)-I;if(re>0){if(re>Y)throw new V;E-=re}const he=y+Math.floor((q-1)*g)-v;if(he>0){if(he>Y)throw new V;y-=he}const Ne=new K(L,q);for(let Ae=0;Ae<q;Ae++){const _e=y+Math.floor(Ae*g);for(let We=0;We<L;We++)l.get(E+Math.floor(We*g),_e)&&Ne.set(We,Ae)}return Ne}static moduleSize(l,h){const m=h.getHeight(),g=h.getWidth();let y=l[0],v=l[1],E=!0,I=0;for(;y<g&&v<m;){if(E!==h.get(y,v)){if(++I===5)break;E=!E}y++,v++}if(y===g||v===m)throw new V;return(y-l[0])/7}}vi.NO_POINTS=new Array;class Xt{PDF417Common(){}static getBitCountSum(l){return qe.sum(l)}static toIntArray(l){if(l==null||!l.length)return Xt.EMPTY_INT_ARRAY;const h=new Int32Array(l.length);let m=0;for(const g of l)h[m++]=g;return h}static getCodeword(l){const h=P.binarySearch(Xt.SYMBOL_TABLE,l&262143);return h<0?-1:(Xt.CODEWORD_TABLE[h]-1)%Xt.NUMBER_OF_CODEWORDS}}Xt.NUMBER_OF_CODEWORDS=929,Xt.MAX_CODEWORDS_IN_BARCODE=Xt.NUMBER_OF_CODEWORDS-1,Xt.MIN_ROWS_IN_BARCODE=3,Xt.MAX_ROWS_IN_BARCODE=90,Xt.MODULES_IN_CODEWORD=17,Xt.MODULES_IN_STOP_PATTERN=18,Xt.BARS_IN_MODULE=8,Xt.EMPTY_INT_ARRAY=new Int32Array([]),Xt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Xt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class $h{constructor(l,h){this.bits=l,this.points=h}getBits(){return this.bits}getPoints(){return this.points}}class Jt{static detectMultiple(l,h,m){let g=l.getBlackMatrix(),y=Jt.detect(m,g);return y.length||(g=g.clone(),g.rotate180(),y=Jt.detect(m,g)),new $h(g,y)}static detect(l,h){const m=new Array;let g=0,y=0,v=!1;for(;g<h.getHeight();){const E=Jt.findVertices(h,g,y);if(E[0]==null&&E[3]==null){if(!v)break;v=!1,y=0;for(const I of m)I[1]!=null&&(g=Math.trunc(Math.max(g,I[1].getY()))),I[3]!=null&&(g=Math.max(g,Math.trunc(I[3].getY())));g+=Jt.ROW_STEP;continue}if(v=!0,m.push(E),!l)break;E[2]!=null?(y=Math.trunc(E[2].getX()),g=Math.trunc(E[2].getY())):(y=Math.trunc(E[4].getX()),g=Math.trunc(E[4].getY()))}return m}static findVertices(l,h,m){const g=l.getHeight(),y=l.getWidth(),v=new Array(8);return Jt.copyToResult(v,Jt.findRowsWithPattern(l,g,y,h,m,Jt.START_PATTERN),Jt.INDEXES_START_PATTERN),v[4]!=null&&(m=Math.trunc(v[4].getX()),h=Math.trunc(v[4].getY())),Jt.copyToResult(v,Jt.findRowsWithPattern(l,g,y,h,m,Jt.STOP_PATTERN),Jt.INDEXES_STOP_PATTERN),v}static copyToResult(l,h,m){for(let g=0;g<m.length;g++)l[m[g]]=h[g]}static findRowsWithPattern(l,h,m,g,y,v){const E=new Array(4);let I=!1;const L=new Int32Array(v.length);for(;g<h;g+=Jt.ROW_STEP){let Y=Jt.findGuardPattern(l,y,g,m,!1,v,L);if(Y!=null){for(;g>0;){const re=Jt.findGuardPattern(l,y,--g,m,!1,v,L);if(re!=null)Y=re;else{g++;break}}E[0]=new Ue(Y[0],g),E[1]=new Ue(Y[1],g),I=!0;break}}let q=g+1;if(I){let Y=0,re=Int32Array.from([Math.trunc(E[0].getX()),Math.trunc(E[1].getX())]);for(;q<h;q++){const he=Jt.findGuardPattern(l,re[0],q,m,!1,v,L);if(he!=null&&Math.abs(re[0]-he[0])<Jt.MAX_PATTERN_DRIFT&&Math.abs(re[1]-he[1])<Jt.MAX_PATTERN_DRIFT)re=he,Y=0;else{if(Y>Jt.SKIPPED_ROW_COUNT_MAX)break;Y++}}q-=Y+1,E[2]=new Ue(re[0],q),E[3]=new Ue(re[1],q)}return q-g<Jt.BARCODE_MIN_HEIGHT&&P.fill(E,null),E}static findGuardPattern(l,h,m,g,y,v,E){P.fillWithin(E,0,E.length,0);let I=h,L=0;for(;l.get(I,m)&&I>0&&L++<Jt.MAX_PIXEL_DRIFT;)I--;let q=I,Y=0,re=v.length;for(let he=y;q<g;q++)if(l.get(q,m)!==he)E[Y]++;else{if(Y===re-1){if(Jt.patternMatchVariance(E,v,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return new Int32Array([I,q]);I+=E[0]+E[1],j.arraycopy(E,2,E,0,Y-1),E[Y-1]=0,E[Y]=0,Y--}else Y++;E[Y]=1,he=!he}return Y===re-1&&Jt.patternMatchVariance(E,v,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE?new Int32Array([I,q-1]):null}static patternMatchVariance(l,h,m){let g=l.length,y=0,v=0;for(let L=0;L<g;L++)y+=l[L],v+=h[L];if(y<v)return 1/0;let E=y/v;m*=E;let I=0;for(let L=0;L<g;L++){let q=l[L],Y=h[L]*E,re=q>Y?q-Y:Y-q;if(re>m)return 1/0;I+=re}return I/y}}Jt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Jt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Jt.MAX_AVG_VARIANCE=.42,Jt.MAX_INDIVIDUAL_VARIANCE=.8,Jt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Jt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Jt.MAX_PIXEL_DRIFT=3,Jt.MAX_PATTERN_DRIFT=5,Jt.SKIPPED_ROW_COUNT_MAX=25,Jt.ROW_STEP=5,Jt.BARCODE_MIN_HEIGHT=10;class Kr{constructor(l,h){if(h.length===0)throw new p;this.field=l;let m=h.length;if(m>1&&h[0]===0){let g=1;for(;g<m&&h[g]===0;)g++;g===m?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(m-g),j.arraycopy(h,g,this.coefficients,0,this.coefficients.length))}else this.coefficients=h}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(l){return this.coefficients[this.coefficients.length-1-l]}evaluateAt(l){if(l===0)return this.getCoefficient(0);if(l===1){let g=0;for(let y of this.coefficients)g=this.field.add(g,y);return g}let h=this.coefficients[0],m=this.coefficients.length;for(let g=1;g<m;g++)h=this.field.add(this.field.multiply(l,h),this.coefficients[g]);return h}add(l){if(!this.field.equals(l.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero())return l;if(l.isZero())return this;let h=this.coefficients,m=l.coefficients;if(h.length>m.length){let v=h;h=m,m=v}let g=new Int32Array(m.length),y=m.length-h.length;j.arraycopy(m,0,g,0,y);for(let v=y;v<m.length;v++)g[v]=this.field.add(h[v-y],m[v]);return new Kr(this.field,g)}subtract(l){if(!this.field.equals(l.field))throw new p("ModulusPolys do not have same ModulusGF field");return l.isZero()?this:this.add(l.negative())}multiply(l){return l instanceof Kr?this.multiplyOther(l):this.multiplyScalar(l)}multiplyOther(l){if(!this.field.equals(l.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero()||l.isZero())return new Kr(this.field,new Int32Array([0]));let h=this.coefficients,m=h.length,g=l.coefficients,y=g.length,v=new Int32Array(m+y-1);for(let E=0;E<m;E++){let I=h[E];for(let L=0;L<y;L++)v[E+L]=this.field.add(v[E+L],this.field.multiply(I,g[L]))}return new Kr(this.field,v)}negative(){let l=this.coefficients.length,h=new Int32Array(l);for(let m=0;m<l;m++)h[m]=this.field.subtract(0,this.coefficients[m]);return new Kr(this.field,h)}multiplyScalar(l){if(l===0)return new Kr(this.field,new Int32Array([0]));if(l===1)return this;let h=this.coefficients.length,m=new Int32Array(h);for(let g=0;g<h;g++)m[g]=this.field.multiply(this.coefficients[g],l);return new Kr(this.field,m)}multiplyByMonomial(l,h){if(l<0)throw new p;if(h===0)return new Kr(this.field,new Int32Array([0]));let m=this.coefficients.length,g=new Int32Array(m+l);for(let y=0;y<m;y++)g[y]=this.field.multiply(this.coefficients[y],h);return new Kr(this.field,g)}toString(){let l=new J;for(let h=this.getDegree();h>=0;h--){let m=this.getCoefficient(h);m!==0&&(m<0?(l.append(" - "),m=-m):l.length()>0&&l.append(" + "),(h===0||m!==1)&&l.append(m),h!==0&&(h===1?l.append("x"):(l.append("x^"),l.append(h))))}return l.toString()}}class zh{add(l,h){return(l+h)%this.modulus}subtract(l,h){return(this.modulus+l-h)%this.modulus}exp(l){return this.expTable[l]}log(l){if(l===0)throw new p;return this.logTable[l]}inverse(l){if(l===0)throw new Oe;return this.expTable[this.modulus-this.logTable[l]-1]}multiply(l,h){return l===0||h===0?0:this.expTable[(this.logTable[l]+this.logTable[h])%(this.modulus-1)]}getSize(){return this.modulus}equals(l){return l===this}}class td extends zh{constructor(l,h){super(),this.modulus=l,this.expTable=new Int32Array(l),this.logTable=new Int32Array(l);let m=1;for(let g=0;g<l;g++)this.expTable[g]=m,m=m*h%l;for(let g=0;g<l-1;g++)this.logTable[this.expTable[g]]=g;this.zero=new Kr(this,new Int32Array([0])),this.one=new Kr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(l,h){if(l<0)throw new p;if(h===0)return this.zero;let m=new Int32Array(l+1);return m[0]=h,new Kr(this,m)}}td.PDF417_GF=new td(Xt.NUMBER_OF_CODEWORDS,3);class tl{constructor(){this.field=td.PDF417_GF}decode(l,h,m){let g=new Kr(this.field,l),y=new Int32Array(h),v=!1;for(let Ne=h;Ne>0;Ne--){let Ae=g.evaluateAt(this.field.exp(Ne));y[h-Ne]=Ae,Ae!==0&&(v=!0)}if(!v)return 0;let E=this.field.getOne();if(m!=null)for(const Ne of m){let Ae=this.field.exp(l.length-1-Ne),_e=new Kr(this.field,new Int32Array([this.field.subtract(0,Ae),1]));E=E.multiply(_e)}let I=new Kr(this.field,y),L=this.runEuclideanAlgorithm(this.field.buildMonomial(h,1),I,h),q=L[0],Y=L[1],re=this.findErrorLocations(q),he=this.findErrorMagnitudes(Y,q,re);for(let Ne=0;Ne<re.length;Ne++){let Ae=l.length-1-this.field.log(re[Ne]);if(Ae<0)throw x.getChecksumInstance();l[Ae]=this.field.subtract(l[Ae],he[Ne])}return re.length}runEuclideanAlgorithm(l,h,m){if(l.getDegree()<h.getDegree()){let re=l;l=h,h=re}let g=l,y=h,v=this.field.getZero(),E=this.field.getOne();for(;y.getDegree()>=Math.round(m/2);){let re=g,he=v;if(g=y,v=E,g.isZero())throw x.getChecksumInstance();y=re;let Ne=this.field.getZero(),Ae=g.getCoefficient(g.getDegree()),_e=this.field.inverse(Ae);for(;y.getDegree()>=g.getDegree()&&!y.isZero();){let We=y.getDegree()-g.getDegree(),tt=this.field.multiply(y.getCoefficient(y.getDegree()),_e);Ne=Ne.add(this.field.buildMonomial(We,tt)),y=y.subtract(g.multiplyByMonomial(We,tt))}E=Ne.multiply(v).subtract(he).negative()}let I=E.getCoefficient(0);if(I===0)throw x.getChecksumInstance();let L=this.field.inverse(I),q=E.multiply(L),Y=y.multiply(L);return[q,Y]}findErrorLocations(l){let h=l.getDegree(),m=new Int32Array(h),g=0;for(let y=1;y<this.field.getSize()&&g<h;y++)l.evaluateAt(y)===0&&(m[g]=this.field.inverse(y),g++);if(g!==h)throw x.getChecksumInstance();return m}findErrorMagnitudes(l,h,m){let g=h.getDegree(),y=new Int32Array(g);for(let L=1;L<=g;L++)y[g-L]=this.field.multiply(L,h.getCoefficient(L));let v=new Kr(this.field,y),E=m.length,I=new Int32Array(E);for(let L=0;L<E;L++){let q=this.field.inverse(m[L]),Y=this.field.subtract(0,l.evaluateAt(q)),re=this.field.inverse(v.evaluateAt(q));I[L]=this.field.multiply(Y,re)}return I}}class Wa{constructor(l,h,m,g,y){l instanceof Wa?this.constructor_2(l):this.constructor_1(l,h,m,g,y)}constructor_1(l,h,m,g,y){const v=h==null||m==null,E=g==null||y==null;if(v&&E)throw new V;v?(h=new Ue(0,g.getY()),m=new Ue(0,y.getY())):E&&(g=new Ue(l.getWidth()-1,h.getY()),y=new Ue(l.getWidth()-1,m.getY())),this.image=l,this.topLeft=h,this.bottomLeft=m,this.topRight=g,this.bottomRight=y,this.minX=Math.trunc(Math.min(h.getX(),m.getX())),this.maxX=Math.trunc(Math.max(g.getX(),y.getX())),this.minY=Math.trunc(Math.min(h.getY(),g.getY())),this.maxY=Math.trunc(Math.max(m.getY(),y.getY()))}constructor_2(l){this.image=l.image,this.topLeft=l.getTopLeft(),this.bottomLeft=l.getBottomLeft(),this.topRight=l.getTopRight(),this.bottomRight=l.getBottomRight(),this.minX=l.getMinX(),this.maxX=l.getMaxX(),this.minY=l.getMinY(),this.maxY=l.getMaxY()}static merge(l,h){return l==null?h:h==null?l:new Wa(l.image,l.topLeft,l.bottomLeft,h.topRight,h.bottomRight)}addMissingRows(l,h,m){let g=this.topLeft,y=this.bottomLeft,v=this.topRight,E=this.bottomRight;if(l>0){let I=m?this.topLeft:this.topRight,L=Math.trunc(I.getY()-l);L<0&&(L=0);let q=new Ue(I.getX(),L);m?g=q:v=q}if(h>0){let I=m?this.bottomLeft:this.bottomRight,L=Math.trunc(I.getY()+h);L>=this.image.getHeight()&&(L=this.image.getHeight()-1);let q=new Ue(I.getX(),L);m?y=q:E=q}return new Wa(this.image,g,y,v,E)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class rl{constructor(l,h,m,g){this.columnCount=l,this.errorCorrectionLevel=g,this.rowCountUpperPart=h,this.rowCountLowerPart=m,this.rowCount=h+m}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class wi{constructor(){this.buffer=""}static form(l,h){let m=-1;function g(v,E,I,L,q,Y){if(v==="%%")return"%";if(h[++m]===void 0)return;v=L?parseInt(L.substr(1)):void 0;let re=q?parseInt(q.substr(1)):void 0,he;switch(Y){case"s":he=h[m];break;case"c":he=h[m][0];break;case"f":he=parseFloat(h[m]).toFixed(v);break;case"p":he=parseFloat(h[m]).toPrecision(v);break;case"e":he=parseFloat(h[m]).toExponential(v);break;case"x":he=parseInt(h[m]).toString(re||16);break;case"d":he=parseFloat(parseInt(h[m],re||10).toPrecision(v)).toFixed(0);break}he=typeof he=="object"?JSON.stringify(he):(+he).toString(re);let Ne=parseInt(I),Ae=I&&I[0]+""=="0"?"0":" ";for(;he.length<Ne;)he=E!==void 0?he+Ae:Ae+he;return he}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return l.replace(y,g)}format(l,...h){this.buffer+=wi.form(l,h)}toString(){return this.buffer}}class Ni{constructor(l){this.boundingBox=new Wa(l),this.codewords=new Array(l.getMaxY()-l.getMinY()+1)}getCodewordNearby(l){let h=this.getCodeword(l);if(h!=null)return h;for(let m=1;m<Ni.MAX_NEARBY_DISTANCE;m++){let g=this.imageRowToCodewordIndex(l)-m;if(g>=0&&(h=this.codewords[g],h!=null)||(g=this.imageRowToCodewordIndex(l)+m,g<this.codewords.length&&(h=this.codewords[g],h!=null)))return h}return null}imageRowToCodewordIndex(l){return l-this.boundingBox.getMinY()}setCodeword(l,h){this.codewords[this.imageRowToCodewordIndex(l)]=h}getCodeword(l){return this.codewords[this.imageRowToCodewordIndex(l)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const l=new wi;let h=0;for(const m of this.codewords){if(m==null){l.format("%3d:    |   %n",h++);continue}l.format("%3d: %3d|%3d%n",h++,m.getRowNumber(),m.getValue())}return l.toString()}}Ni.MAX_NEARBY_DISTANCE=5;class nl{constructor(){this.values=new Map}setValue(l){l=Math.trunc(l);let h=this.values.get(l);h==null&&(h=0),h++,this.values.set(l,h)}getValue(){let l=-1,h=new Array;for(const[m,g]of this.values.entries()){const y={getKey:()=>m,getValue:()=>g};y.getValue()>l?(l=y.getValue(),h=[],h.push(y.getKey())):y.getValue()===l&&h.push(y.getKey())}return Xt.toIntArray(h)}getConfidence(l){return this.values.get(l)}}class Ql extends Ni{constructor(l,h){super(l),this._isLeft=h}setRowNumbers(){for(let l of this.getCodewords())l!=null&&l.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(l){let h=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(h,l);let m=this.getBoundingBox(),g=this._isLeft?m.getTopLeft():m.getTopRight(),y=this._isLeft?m.getBottomLeft():m.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(g.getY())),E=this.imageRowToCodewordIndex(Math.trunc(y.getY())),I=-1,L=1,q=0;for(let Y=v;Y<E;Y++){if(h[Y]==null)continue;let re=h[Y],he=re.getRowNumber()-I;if(he===0)q++;else if(he===1)L=Math.max(L,q),q=1,I=re.getRowNumber();else if(he<0||re.getRowNumber()>=l.getRowCount()||he>Y)h[Y]=null;else{let Ne;L>2?Ne=(L-2)*he:Ne=he;let Ae=Ne>=Y;for(let _e=1;_e<=Ne&&!Ae;_e++)Ae=h[Y-_e]!=null;Ae?h[Y]=null:(I=re.getRowNumber(),q=1)}}}getRowHeights(){let l=this.getBarcodeMetadata();if(l==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(l);let h=new Int32Array(l.getRowCount());for(let m of this.getCodewords())if(m!=null){let g=m.getRowNumber();if(g>=h.length)continue;h[g]++}return h}adjustIncompleteIndicatorColumnRowNumbers(l){let h=this.getBoundingBox(),m=this._isLeft?h.getTopLeft():h.getTopRight(),g=this._isLeft?h.getBottomLeft():h.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(m.getY())),v=this.imageRowToCodewordIndex(Math.trunc(g.getY())),E=this.getCodewords(),I=-1;for(let L=y;L<v;L++){if(E[L]==null)continue;let q=E[L];q.setRowNumberAsRowIndicatorColumn();let Y=q.getRowNumber()-I;Y===0||(Y===1?I=q.getRowNumber():q.getRowNumber()>=l.getRowCount()?E[L]=null:I=q.getRowNumber())}}getBarcodeMetadata(){let l=this.getCodewords(),h=new nl,m=new nl,g=new nl,y=new nl;for(let E of l){if(E==null)continue;E.setRowNumberAsRowIndicatorColumn();let I=E.getValue()%30,L=E.getRowNumber();switch(this._isLeft||(L+=2),L%3){case 0:m.setValue(I*3+1);break;case 1:y.setValue(I/3),g.setValue(I%3);break;case 2:h.setValue(I+1);break}}if(h.getValue().length===0||m.getValue().length===0||g.getValue().length===0||y.getValue().length===0||h.getValue()[0]<1||m.getValue()[0]+g.getValue()[0]<Xt.MIN_ROWS_IN_BARCODE||m.getValue()[0]+g.getValue()[0]>Xt.MAX_ROWS_IN_BARCODE)return null;let v=new rl(h.getValue()[0],m.getValue()[0],g.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(l,v),v}removeIncorrectCodewords(l,h){for(let m=0;m<l.length;m++){let g=l[m];if(l[m]==null)continue;let y=g.getValue()%30,v=g.getRowNumber();if(v>h.getRowCount()){l[m]=null;continue}switch(this._isLeft||(v+=2),v%3){case 0:y*3+1!==h.getRowCountUpperPart()&&(l[m]=null);break;case 1:(Math.trunc(y/3)!==h.getErrorCorrectionLevel()||y%3!==h.getRowCountLowerPart())&&(l[m]=null);break;case 2:y+1!==h.getColumnCount()&&(l[m]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qi{constructor(l,h){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=l,this.barcodeColumnCount=l.getColumnCount(),this.boundingBox=h,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let l=Xt.MAX_CODEWORDS_IN_BARCODE,h;do h=l,l=this.adjustRowNumbersAndGetCount();while(l>0&&l<h);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(l){l!=null&&l.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let l=this.adjustRowNumbersByRow();if(l===0)return 0;for(let h=1;h<this.barcodeColumnCount+1;h++){let m=this.detectionResultColumns[h].getCodewords();for(let g=0;g<m.length;g++)m[g]!=null&&(m[g].hasValidRowNumber()||this.adjustRowNumbers(h,g,m))}return l}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let l=this.detectionResultColumns[0].getCodewords(),h=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<l.length;m++)if(l[m]!=null&&h[m]!=null&&l[m].getRowNumber()===h[m].getRowNumber())for(let g=1;g<=this.barcodeColumnCount;g++){let y=this.detectionResultColumns[g].getCodewords()[m];y!=null&&(y.setRowNumber(l[m].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[g].getCodewords()[m]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let l=0,h=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let m=0;m<h.length;m++){if(h[m]==null)continue;let g=h[m].getRowNumber(),y=0;for(let v=this.barcodeColumnCount+1;v>0&&y<this.ADJUST_ROW_NUMBER_SKIP;v--){let E=this.detectionResultColumns[v].getCodewords()[m];E!=null&&(y=Qi.adjustRowNumberIfValid(g,y,E),E.hasValidRowNumber()||l++)}}return l}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let l=0,h=this.detectionResultColumns[0].getCodewords();for(let m=0;m<h.length;m++){if(h[m]==null)continue;let g=h[m].getRowNumber(),y=0;for(let v=1;v<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;v++){let E=this.detectionResultColumns[v].getCodewords()[m];E!=null&&(y=Qi.adjustRowNumberIfValid(g,y,E),E.hasValidRowNumber()||l++)}}return l}static adjustRowNumberIfValid(l,h,m){return m==null||m.hasValidRowNumber()||(m.isValidRowNumber(l)?(m.setRowNumber(l),h=0):++h),h}adjustRowNumbers(l,h,m){if(!this.detectionResultColumns[l-1])return;let g=m[h],y=this.detectionResultColumns[l-1].getCodewords(),v=y;this.detectionResultColumns[l+1]!=null&&(v=this.detectionResultColumns[l+1].getCodewords());let E=new Array(14);E[2]=y[h],E[3]=v[h],h>0&&(E[0]=m[h-1],E[4]=y[h-1],E[5]=v[h-1]),h>1&&(E[8]=m[h-2],E[10]=y[h-2],E[11]=v[h-2]),h<m.length-1&&(E[1]=m[h+1],E[6]=y[h+1],E[7]=v[h+1]),h<m.length-2&&(E[9]=m[h+2],E[12]=y[h+2],E[13]=v[h+2]);for(let I of E)if(Qi.adjustRowNumber(g,I))return}static adjustRowNumber(l,h){return h==null?!1:h.hasValidRowNumber()&&h.getBucket()===l.getBucket()?(l.setRowNumber(h.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(l){this.boundingBox=l}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(l,h){this.detectionResultColumns[l]=h}getDetectionResultColumn(l){return this.detectionResultColumns[l]}toString(){let l=this.detectionResultColumns[0];l==null&&(l=this.detectionResultColumns[this.barcodeColumnCount+1]);let h=new wi;for(let m=0;m<l.getCodewords().length;m++){h.format("CW %3d:",m);for(let g=0;g<this.barcodeColumnCount+2;g++){if(this.detectionResultColumns[g]==null){h.format("    |   ");continue}let y=this.detectionResultColumns[g].getCodewords()[m];if(y==null){h.format("    |   ");continue}h.format(" %3d|%3d",y.getRowNumber(),y.getValue())}h.format("%n")}return h.toString()}}class qa{constructor(l,h,m,g){this.rowNumber=qa.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(l),this.endX=Math.trunc(h),this.bucket=Math.trunc(m),this.value=Math.trunc(g)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(l){return l!==qa.BARCODE_ROW_UNKNOWN&&this.bucket===l%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(l){this.rowNumber=l}toString(){return this.rowNumber+"|"+this.value}}qa.BARCODE_ROW_UNKNOWN=-1;class Tn{static initialize(){for(let l=0;l<Xt.SYMBOL_TABLE.length;l++){let h=Xt.SYMBOL_TABLE[l],m=h&1;for(let g=0;g<Xt.BARS_IN_MODULE;g++){let y=0;for(;(h&1)===m;)y+=1,h>>=1;m=h&1,Tn.RATIOS_TABLE[l]||(Tn.RATIOS_TABLE[l]=new Array(Xt.BARS_IN_MODULE)),Tn.RATIOS_TABLE[l][Xt.BARS_IN_MODULE-g-1]=Math.fround(y/Xt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(l){let h=Tn.getDecodedCodewordValue(Tn.sampleBitCounts(l));return h!==-1?h:Tn.getClosestDecodedValue(l)}static sampleBitCounts(l){let h=qe.sum(l),m=new Int32Array(Xt.BARS_IN_MODULE),g=0,y=0;for(let v=0;v<Xt.MODULES_IN_CODEWORD;v++){let E=h/(2*Xt.MODULES_IN_CODEWORD)+v*h/Xt.MODULES_IN_CODEWORD;y+l[g]<=E&&(y+=l[g],g++),m[g]++}return m}static getDecodedCodewordValue(l){let h=Tn.getBitValue(l);return Xt.getCodeword(h)===-1?-1:h}static getBitValue(l){let h=0;for(let m=0;m<l.length;m++)for(let g=0;g<l[m];g++)h=h<<1|(m%2===0?1:0);return Math.trunc(h)}static getClosestDecodedValue(l){let h=qe.sum(l),m=new Array(Xt.BARS_IN_MODULE);if(h>1)for(let v=0;v<m.length;v++)m[v]=Math.fround(l[v]/h);let g=pt.MAX_VALUE,y=-1;this.bSymbolTableReady||Tn.initialize();for(let v=0;v<Tn.RATIOS_TABLE.length;v++){let E=0,I=Tn.RATIOS_TABLE[v];for(let L=0;L<Xt.BARS_IN_MODULE;L++){let q=Math.fround(I[L]-m[L]);if(E+=Math.fround(q*q),E>=g)break}E<g&&(g=E,y=Xt.SYMBOL_TABLE[v])}return y}}Tn.bSymbolTableReady=!1,Tn.RATIOS_TABLE=new Array(Xt.SYMBOL_TABLE.length).map(X=>new Array(Xt.BARS_IN_MODULE));class ec{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(l){this.segmentIndex=l}getFileId(){return this.fileId}setFileId(l){this.fileId=l}getOptionalData(){return this.optionalData}setOptionalData(l){this.optionalData=l}isLastSegment(){return this.lastSegment}setLastSegment(l){this.lastSegment=l}getSegmentCount(){return this.segmentCount}setSegmentCount(l){this.segmentCount=l}getSender(){return this.sender||null}setSender(l){this.sender=l}getAddressee(){return this.addressee||null}setAddressee(l){this.addressee=l}getFileName(){return this.fileName}setFileName(l){this.fileName=l}getFileSize(){return this.fileSize}setFileSize(l){this.fileSize=l}getChecksum(){return this.checksum}setChecksum(l){this.checksum=l}getTimestamp(){return this.timestamp}setTimestamp(l){this.timestamp=l}}class sl{static parseLong(l,h=void 0){return parseInt(l,h)}}class tc extends u{}tc.kind="NullPointerException";class al{writeBytes(l){this.writeBytesOffset(l,0,l.length)}writeBytesOffset(l,h,m){if(l==null)throw new tc;if(h<0||h>l.length||m<0||h+m>l.length||h+m<0)throw new w;if(m===0)return;for(let g=0;g<m;g++)this.write(l[h+g])}flush(){}close(){}}class ou extends u{}class lu extends al{constructor(l=32){if(super(),this.count=0,l<0)throw new p("Negative initial size: "+l);this.buf=new Uint8Array(l)}ensureCapacity(l){l-this.buf.length>0&&this.grow(l)}grow(l){let m=this.buf.length<<1;if(m-l<0&&(m=l),m<0){if(l<0)throw new ou;m=k.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,m)}write(l){this.ensureCapacity(this.count+1),this.buf[this.count]=l,this.count+=1}writeBytesOffset(l,h,m){if(h<0||h>l.length||m<0||h+m-l.length>0)throw new w;this.ensureCapacity(this.count+m),j.arraycopy(l,h,this.buf,this.count,m),this.count+=m}writeTo(l){l.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(l){return l?typeof l=="string"?this.toString_string(l):this.toString_number(l):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(l){return new String(this.buf).toString()}toString_number(l){return new String(this.buf).toString()}close(){}}var hr;(function(X){X[X.ALPHA=0]="ALPHA",X[X.LOWER=1]="LOWER",X[X.MIXED=2]="MIXED",X[X.PUNCT=3]="PUNCT",X[X.ALPHA_SHIFT=4]="ALPHA_SHIFT",X[X.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(hr||(hr={}));function ji(){if(typeof window<"u")return window.BigInt||null;if(typeof Kh<"u")return Kh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let il;function Ha(X){if(typeof il>"u"&&(il=ji()),il===null)throw new Error("BigInt is not supported!");return il(X)}function ol(){let X=[];X[0]=Ha(1);let l=Ha(900);X[1]=l;for(let h=2;h<16;h++)X[h]=X[h-1]*l;return X}class Ge{static decode(l,h){let m=new J(""),g=R.ISO8859_1;m.enableDecoding(g);let y=1,v=l[y++],E=new ec;for(;y<l[0];){switch(v){case Ge.TEXT_COMPACTION_MODE_LATCH:y=Ge.textCompaction(l,y,m);break;case Ge.BYTE_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH_6:y=Ge.byteCompaction(v,l,g,y,m);break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(l[y++]);break;case Ge.NUMERIC_COMPACTION_MODE_LATCH:y=Ge.numericCompaction(l,y,m);break;case Ge.ECI_CHARSET:R.getCharacterSetECIByValue(l[y++]);break;case Ge.ECI_GENERAL_PURPOSE:y+=2;break;case Ge.ECI_USER_DEFINED:y++;break;case Ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=Ge.decodeMacroBlock(l,y,E);break;case Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ge.MACRO_PDF417_TERMINATOR:throw new F;default:y--,y=Ge.textCompaction(l,y,m);break}if(y<l.length)v=l[y++];else throw F.getFormatInstance()}if(m.length()===0)throw F.getFormatInstance();let I=new be(null,m.toString(),null,h);return I.setOther(E),I}static decodeMacroBlock(l,h,m){if(h+Ge.NUMBER_OF_SEQUENCE_CODEWORDS>l[0])throw F.getFormatInstance();let g=new Int32Array(Ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let E=0;E<Ge.NUMBER_OF_SEQUENCE_CODEWORDS;E++,h++)g[E]=l[h];m.setSegmentIndex(k.parseInt(Ge.decodeBase900toBase10(g,Ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new J;h=Ge.textCompaction(l,h,y),m.setFileId(y.toString());let v=-1;for(l[h]===Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(v=h+1);h<l[0];)switch(l[h]){case Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(h++,l[h]){case Ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let E=new J;h=Ge.textCompaction(l,h+1,E),m.setFileName(E.toString());break;case Ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let I=new J;h=Ge.textCompaction(l,h+1,I),m.setSender(I.toString());break;case Ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let L=new J;h=Ge.textCompaction(l,h+1,L),m.setAddressee(L.toString());break;case Ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let q=new J;h=Ge.numericCompaction(l,h+1,q),m.setSegmentCount(k.parseInt(q.toString()));break;case Ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Y=new J;h=Ge.numericCompaction(l,h+1,Y),m.setTimestamp(sl.parseLong(Y.toString()));break;case Ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let re=new J;h=Ge.numericCompaction(l,h+1,re),m.setChecksum(k.parseInt(re.toString()));break;case Ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let he=new J;h=Ge.numericCompaction(l,h+1,he),m.setFileSize(sl.parseLong(he.toString()));break;default:throw F.getFormatInstance()}break;case Ge.MACRO_PDF417_TERMINATOR:h++,m.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(v!==-1){let E=h-v;m.isLastSegment()&&E--,m.setOptionalData(P.copyOfRange(l,v,v+E))}return h}static textCompaction(l,h,m){let g=new Int32Array((l[0]-h)*2),y=new Int32Array((l[0]-h)*2),v=0,E=!1;for(;h<l[0]&&!E;){let I=l[h++];if(I<Ge.TEXT_COMPACTION_MODE_LATCH)g[v]=I/30,g[v+1]=I%30,v+=2;else switch(I){case Ge.TEXT_COMPACTION_MODE_LATCH:g[v++]=Ge.TEXT_COMPACTION_MODE_LATCH;break;case Ge.BYTE_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH_6:case Ge.NUMERIC_COMPACTION_MODE_LATCH:case Ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ge.MACRO_PDF417_TERMINATOR:h--,E=!0;break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g[v]=Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,I=l[h++],y[v]=I,v++;break}}return Ge.decodeTextCompaction(g,y,v,m),h}static decodeTextCompaction(l,h,m,g){let y=hr.ALPHA,v=hr.ALPHA,E=0;for(;E<m;){let I=l[E],L="";switch(y){case hr.ALPHA:if(I<26)L=String.fromCharCode(65+I);else switch(I){case 26:L=" ";break;case Ge.LL:y=hr.LOWER;break;case Ge.ML:y=hr.MIXED;break;case Ge.PS:v=y,y=hr.PUNCT_SHIFT;break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(h[E]);break;case Ge.TEXT_COMPACTION_MODE_LATCH:y=hr.ALPHA;break}break;case hr.LOWER:if(I<26)L=String.fromCharCode(97+I);else switch(I){case 26:L=" ";break;case Ge.AS:v=y,y=hr.ALPHA_SHIFT;break;case Ge.ML:y=hr.MIXED;break;case Ge.PS:v=y,y=hr.PUNCT_SHIFT;break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(h[E]);break;case Ge.TEXT_COMPACTION_MODE_LATCH:y=hr.ALPHA;break}break;case hr.MIXED:if(I<Ge.PL)L=Ge.MIXED_CHARS[I];else switch(I){case Ge.PL:y=hr.PUNCT;break;case 26:L=" ";break;case Ge.LL:y=hr.LOWER;break;case Ge.AL:y=hr.ALPHA;break;case Ge.PS:v=y,y=hr.PUNCT_SHIFT;break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(h[E]);break;case Ge.TEXT_COMPACTION_MODE_LATCH:y=hr.ALPHA;break}break;case hr.PUNCT:if(I<Ge.PAL)L=Ge.PUNCT_CHARS[I];else switch(I){case Ge.PAL:y=hr.ALPHA;break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(h[E]);break;case Ge.TEXT_COMPACTION_MODE_LATCH:y=hr.ALPHA;break}break;case hr.ALPHA_SHIFT:if(y=v,I<26)L=String.fromCharCode(65+I);else switch(I){case 26:L=" ";break;case Ge.TEXT_COMPACTION_MODE_LATCH:y=hr.ALPHA;break}break;case hr.PUNCT_SHIFT:if(y=v,I<Ge.PAL)L=Ge.PUNCT_CHARS[I];else switch(I){case Ge.PAL:y=hr.ALPHA;break;case Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:g.append(h[E]);break;case Ge.TEXT_COMPACTION_MODE_LATCH:y=hr.ALPHA;break}break}L!==""&&g.append(L),E++}}static byteCompaction(l,h,m,g,y){let v=new lu,E=0,I=0,L=!1;switch(l){case Ge.BYTE_COMPACTION_MODE_LATCH:let q=new Int32Array(6),Y=h[g++];for(;g<h[0]&&!L;)switch(q[E++]=Y,I=900*I+Y,Y=h[g++],Y){case Ge.TEXT_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH:case Ge.NUMERIC_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH_6:case Ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ge.MACRO_PDF417_TERMINATOR:g--,L=!0;break;default:if(E%5===0&&E>0){for(let re=0;re<6;++re)v.write(Number(Ha(I)>>Ha(8*(5-re))));I=0,E=0}break}g===h[0]&&Y<Ge.TEXT_COMPACTION_MODE_LATCH&&(q[E++]=Y);for(let re=0;re<E;re++)v.write(q[re]);break;case Ge.BYTE_COMPACTION_MODE_LATCH_6:for(;g<h[0]&&!L;){let re=h[g++];if(re<Ge.TEXT_COMPACTION_MODE_LATCH)E++,I=900*I+re;else switch(re){case Ge.TEXT_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH:case Ge.NUMERIC_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH_6:case Ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ge.MACRO_PDF417_TERMINATOR:g--,L=!0;break}if(E%5===0&&E>0){for(let he=0;he<6;++he)v.write(Number(Ha(I)>>Ha(8*(5-he))));I=0,E=0}}break}return y.append(M.decode(v.toByteArray(),m)),g}static numericCompaction(l,h,m){let g=0,y=!1,v=new Int32Array(Ge.MAX_NUMERIC_CODEWORDS);for(;h<l[0]&&!y;){let E=l[h++];if(h===l[0]&&(y=!0),E<Ge.TEXT_COMPACTION_MODE_LATCH)v[g]=E,g++;else switch(E){case Ge.TEXT_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH:case Ge.BYTE_COMPACTION_MODE_LATCH_6:case Ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Ge.MACRO_PDF417_TERMINATOR:h--,y=!0;break}(g%Ge.MAX_NUMERIC_CODEWORDS===0||E===Ge.NUMERIC_COMPACTION_MODE_LATCH||y)&&g>0&&(m.append(Ge.decodeBase900toBase10(v,g)),g=0)}return h}static decodeBase900toBase10(l,h){let m=Ha(0);for(let y=0;y<h;y++)m+=Ge.EXP900[h-y-1]*Ha(l[y]);let g=m.toString();if(g.charAt(0)!=="1")throw new F;return g.substring(1)}}Ge.TEXT_COMPACTION_MODE_LATCH=900,Ge.BYTE_COMPACTION_MODE_LATCH=901,Ge.NUMERIC_COMPACTION_MODE_LATCH=902,Ge.BYTE_COMPACTION_MODE_LATCH_6=924,Ge.ECI_USER_DEFINED=925,Ge.ECI_GENERAL_PURPOSE=926,Ge.ECI_CHARSET=927,Ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Ge.MACRO_PDF417_TERMINATOR=922,Ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Ge.MAX_NUMERIC_CODEWORDS=15,Ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Ge.PL=25,Ge.LL=27,Ge.AS=27,Ge.ML=28,Ge.AL=28,Ge.PS=29,Ge.PAL=29,Ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Ge.EXP900=ji()?ol():[],Ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class D{constructor(){}static decode(l,h,m,g,y,v,E){let I=new Wa(l,h,m,g,y),L=null,q=null,Y;for(let Ne=!0;;Ne=!1){if(h!=null&&(L=D.getRowIndicatorColumn(l,I,h,!0,v,E)),g!=null&&(q=D.getRowIndicatorColumn(l,I,g,!1,v,E)),Y=D.merge(L,q),Y==null)throw V.getNotFoundInstance();let Ae=Y.getBoundingBox();if(Ne&&Ae!=null&&(Ae.getMinY()<I.getMinY()||Ae.getMaxY()>I.getMaxY()))I=Ae;else break}Y.setBoundingBox(I);let re=Y.getBarcodeColumnCount()+1;Y.setDetectionResultColumn(0,L),Y.setDetectionResultColumn(re,q);let he=L!=null;for(let Ne=1;Ne<=re;Ne++){let Ae=he?Ne:re-Ne;if(Y.getDetectionResultColumn(Ae)!==void 0)continue;let _e;Ae===0||Ae===re?_e=new Ql(I,Ae===0):_e=new Ni(I),Y.setDetectionResultColumn(Ae,_e);let We=-1,tt=We;for(let st=I.getMinY();st<=I.getMaxY();st++){if(We=D.getStartColumn(Y,Ae,st,he),We<0||We>I.getMaxX()){if(tt===-1)continue;We=tt}let rt=D.detectCodeword(l,I.getMinX(),I.getMaxX(),he,We,st,v,E);rt!=null&&(_e.setCodeword(st,rt),tt=We,v=Math.min(v,rt.getWidth()),E=Math.max(E,rt.getWidth()))}}return D.createDecoderResult(Y)}static merge(l,h){if(l==null&&h==null)return null;let m=D.getBarcodeMetadata(l,h);if(m==null)return null;let g=Wa.merge(D.adjustBoundingBox(l),D.adjustBoundingBox(h));return new Qi(m,g)}static adjustBoundingBox(l){if(l==null)return null;let h=l.getRowHeights();if(h==null)return null;let m=D.getMax(h),g=0;for(let E of h)if(g+=m-E,E>0)break;let y=l.getCodewords();for(let E=0;g>0&&y[E]==null;E++)g--;let v=0;for(let E=h.length-1;E>=0&&(v+=m-h[E],!(h[E]>0));E--);for(let E=y.length-1;v>0&&y[E]==null;E--)v--;return l.getBoundingBox().addMissingRows(g,v,l.isLeft())}static getMax(l){let h=-1;for(let m of l)h=Math.max(h,m);return h}static getBarcodeMetadata(l,h){let m;if(l==null||(m=l.getBarcodeMetadata())==null)return h==null?null:h.getBarcodeMetadata();let g;return h==null||(g=h.getBarcodeMetadata())==null?m:m.getColumnCount()!==g.getColumnCount()&&m.getErrorCorrectionLevel()!==g.getErrorCorrectionLevel()&&m.getRowCount()!==g.getRowCount()?null:m}static getRowIndicatorColumn(l,h,m,g,y,v){let E=new Ql(h,g);for(let I=0;I<2;I++){let L=I===0?1:-1,q=Math.trunc(Math.trunc(m.getX()));for(let Y=Math.trunc(Math.trunc(m.getY()));Y<=h.getMaxY()&&Y>=h.getMinY();Y+=L){let re=D.detectCodeword(l,0,l.getWidth(),g,q,Y,y,v);re!=null&&(E.setCodeword(Y,re),g?q=re.getStartX():q=re.getEndX())}}return E}static adjustCodewordCount(l,h){let m=h[0][1],g=m.getValue(),y=l.getBarcodeColumnCount()*l.getBarcodeRowCount()-D.getNumberOfECCodeWords(l.getBarcodeECLevel());if(g.length===0){if(y<1||y>Xt.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();m.setValue(y)}else g[0]!==y&&m.setValue(y)}static createDecoderResult(l){let h=D.createBarcodeMatrix(l);D.adjustCodewordCount(l,h);let m=new Array,g=new Int32Array(l.getBarcodeRowCount()*l.getBarcodeColumnCount()),y=[],v=new Array;for(let I=0;I<l.getBarcodeRowCount();I++)for(let L=0;L<l.getBarcodeColumnCount();L++){let q=h[I][L+1].getValue(),Y=I*l.getBarcodeColumnCount()+L;q.length===0?m.push(Y):q.length===1?g[Y]=q[0]:(v.push(Y),y.push(q))}let E=new Array(y.length);for(let I=0;I<E.length;I++)E[I]=y[I];return D.createDecoderResultFromAmbiguousValues(l.getBarcodeECLevel(),g,Xt.toIntArray(m),Xt.toIntArray(v),E)}static createDecoderResultFromAmbiguousValues(l,h,m,g,y){let v=new Int32Array(g.length),E=100;for(;E-- >0;){for(let I=0;I<v.length;I++)h[g[I]]=y[I][v[I]];try{return D.decodeCodewords(h,l,m)}catch(I){if(!(I instanceof x))throw I}if(v.length===0)throw x.getChecksumInstance();for(let I=0;I<v.length;I++)if(v[I]<y[I].length-1){v[I]++;break}else if(v[I]=0,I===v.length-1)throw x.getChecksumInstance()}throw x.getChecksumInstance()}static createBarcodeMatrix(l){let h=Array.from({length:l.getBarcodeRowCount()},()=>new Array(l.getBarcodeColumnCount()+2));for(let g=0;g<h.length;g++)for(let y=0;y<h[g].length;y++)h[g][y]=new nl;let m=0;for(let g of l.getDetectionResultColumns()){if(g!=null){for(let y of g.getCodewords())if(y!=null){let v=y.getRowNumber();if(v>=0){if(v>=h.length)continue;h[v][m].setValue(y.getValue())}}}m++}return h}static isValidBarcodeColumn(l,h){return h>=0&&h<=l.getBarcodeColumnCount()+1}static getStartColumn(l,h,m,g){let y=g?1:-1,v=null;if(D.isValidBarcodeColumn(l,h-y)&&(v=l.getDetectionResultColumn(h-y).getCodeword(m)),v!=null)return g?v.getEndX():v.getStartX();if(v=l.getDetectionResultColumn(h).getCodewordNearby(m),v!=null)return g?v.getStartX():v.getEndX();if(D.isValidBarcodeColumn(l,h-y)&&(v=l.getDetectionResultColumn(h-y).getCodewordNearby(m)),v!=null)return g?v.getEndX():v.getStartX();let E=0;for(;D.isValidBarcodeColumn(l,h-y);){h-=y;for(let I of l.getDetectionResultColumn(h).getCodewords())if(I!=null)return(g?I.getEndX():I.getStartX())+y*E*(I.getEndX()-I.getStartX());E++}return g?l.getBoundingBox().getMinX():l.getBoundingBox().getMaxX()}static detectCodeword(l,h,m,g,y,v,E,I){y=D.adjustCodewordStartColumn(l,h,m,g,y,v);let L=D.getModuleBitCount(l,h,m,g,y,v);if(L==null)return null;let q,Y=qe.sum(L);if(g)q=y+Y;else{for(let Ne=0;Ne<L.length/2;Ne++){let Ae=L[Ne];L[Ne]=L[L.length-1-Ne],L[L.length-1-Ne]=Ae}q=y,y=q-Y}if(!D.checkCodewordSkew(Y,E,I))return null;let re=Tn.getDecodedValue(L),he=Xt.getCodeword(re);return he===-1?null:new qa(y,q,D.getCodewordBucketNumber(re),he)}static getModuleBitCount(l,h,m,g,y,v){let E=y,I=new Int32Array(8),L=0,q=g?1:-1,Y=g;for(;(g?E<m:E>=h)&&L<I.length;)l.get(E,v)===Y?(I[L]++,E+=q):(L++,Y=!Y);return L===I.length||E===(g?m:h)&&L===I.length-1?I:null}static getNumberOfECCodeWords(l){return 2<<l}static adjustCodewordStartColumn(l,h,m,g,y,v){let E=y,I=g?-1:1;for(let L=0;L<2;L++){for(;(g?E>=h:E<m)&&g===l.get(E,v);){if(Math.abs(y-E)>D.CODEWORD_SKEW_SIZE)return y;E+=I}I=-I,g=!g}return E}static checkCodewordSkew(l,h,m){return h-D.CODEWORD_SKEW_SIZE<=l&&l<=m+D.CODEWORD_SKEW_SIZE}static decodeCodewords(l,h,m){if(l.length===0)throw F.getFormatInstance();let g=1<<h+1,y=D.correctErrors(l,m,g);D.verifyCodewordCount(l,g);let v=Ge.decode(l,""+h);return v.setErrorsCorrected(y),v.setErasures(m.length),v}static correctErrors(l,h,m){if(h!=null&&h.length>m/2+D.MAX_ERRORS||m<0||m>D.MAX_EC_CODEWORDS)throw x.getChecksumInstance();return D.errorCorrection.decode(l,m,h)}static verifyCodewordCount(l,h){if(l.length<4)throw F.getFormatInstance();let m=l[0];if(m>l.length)throw F.getFormatInstance();if(m===0)if(h<l.length)l[0]=l.length-h;else throw F.getFormatInstance()}static getBitCountForCodeword(l){let h=new Int32Array(8),m=0,g=h.length-1;for(;!((l&1)!==m&&(m=l&1,g--,g<0));)h[g]++,l>>=1;return h}static getCodewordBucketNumber(l){return l instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(l):this.getCodewordBucketNumber_number(l)}static getCodewordBucketNumber_number(l){return D.getCodewordBucketNumber(D.getBitCountForCodeword(l))}static getCodewordBucketNumber_Int32Array(l){return(l[0]-l[2]+l[4]-l[6]+9)%9}static toString(l){let h=new wi;for(let m=0;m<l.length;m++){h.format("Row %2d: ",m);for(let g=0;g<l[m].length;g++){let y=l[m][g];y.getValue().length===0?h.format("        ",null):h.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}h.format("%n")}return h.toString()}}D.CODEWORD_SKEW_SIZE=2,D.MAX_ERRORS=3,D.MAX_EC_CODEWORDS=512,D.errorCorrection=new tl;class Z{decode(l,h=null){let m=Z.decode(l,h,!1);if(m==null||m.length===0||m[0]==null)throw V.getNotFoundInstance();return m[0]}decodeMultiple(l,h=null){try{return Z.decode(l,h,!0)}catch(m){throw m instanceof F||m instanceof x?V.getNotFoundInstance():m}}static decode(l,h,m){const g=new Array,y=Jt.detectMultiple(l,h,m);for(const v of y.getPoints()){const E=D.decode(y.getBits(),v[4],v[5],v[6],v[7],Z.getMinCodewordWidth(v),Z.getMaxCodewordWidth(v)),I=new le(E.getText(),E.getRawBytes(),void 0,v,xe.PDF_417);I.putMetadata(Re.ERROR_CORRECTION_LEVEL,E.getECLevel());const L=E.getOther();L!=null&&I.putMetadata(Re.PDF417_EXTRA_METADATA,L),g.push(I)}return g.map(v=>v)}static getMaxWidth(l,h){return l==null||h==null?0:Math.trunc(Math.abs(l.getX()-h.getX()))}static getMinWidth(l,h){return l==null||h==null?k.MAX_VALUE:Math.trunc(Math.abs(l.getX()-h.getX()))}static getMaxCodewordWidth(l){return Math.floor(Math.max(Math.max(Z.getMaxWidth(l[0],l[4]),Z.getMaxWidth(l[6],l[2])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN),Math.max(Z.getMaxWidth(l[1],l[5]),Z.getMaxWidth(l[7],l[3])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(l){return Math.floor(Math.min(Math.min(Z.getMinWidth(l[0],l[4]),Z.getMinWidth(l[6],l[2])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN),Math.min(Z.getMinWidth(l[1],l[5]),Z.getMinWidth(l[7],l[3])*Xt.MODULES_IN_CODEWORD/Xt.MODULES_IN_STOP_PATTERN)))}reset(){}}class fe extends u{}fe.kind="ReaderException";class je{constructor(l,h){this.verbose=l===!0,h&&this.setHints(h)}decode(l,h){return h&&this.setHints(h),this.decodeInternal(l)}decodeWithState(l){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(l)}setHints(l){this.hints=l;const h=!n(l)&&l.get($.TRY_HARDER)===!0,m=n(l)?null:l.get($.POSSIBLE_FORMATS),g=new Array;if(!n(m)){const y=m.some(v=>v===xe.UPC_A||v===xe.UPC_E||v===xe.EAN_13||v===xe.EAN_8||v===xe.CODABAR||v===xe.CODE_39||v===xe.CODE_93||v===xe.CODE_128||v===xe.ITF||v===xe.RSS_14||v===xe.RSS_EXPANDED);y&&!h&&g.push(new Yi(l,this.verbose)),m.includes(xe.QR_CODE)&&g.push(new vi),m.includes(xe.DATA_MATRIX)&&g.push(new Zn),m.includes(xe.AZTEC)&&g.push(new Be),m.includes(xe.PDF_417)&&g.push(new Z),y&&h&&g.push(new Yi(l,this.verbose))}g.length===0&&(h||g.push(new Yi(l,this.verbose)),g.push(new vi),g.push(new Zn),g.push(new Be),g.push(new Z),h&&g.push(new Yi(l,this.verbose))),this.readers=g}reset(){if(this.readers!==null)for(const l of this.readers)l.reset()}decodeInternal(l){if(this.readers===null)throw new fe("No readers where selected, nothing can be read.");for(const h of this.readers)try{return h.decode(l,this.hints)}catch(m){if(m instanceof fe)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class Ie extends Q{constructor(l=null,h=500){const m=new je;m.setHints(l),super(m,h)}decodeBitmap(l){return this.reader.decodeWithState(l)}}class Je extends Q{constructor(l=500){super(new Z,l)}}class ct extends Q{constructor(l=500){super(new vi,l)}}var St;(function(X){X[X.ERROR_CORRECTION=0]="ERROR_CORRECTION",X[X.CHARACTER_SET=1]="CHARACTER_SET",X[X.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",X[X.MIN_SIZE=3]="MIN_SIZE",X[X.MAX_SIZE=4]="MAX_SIZE",X[X.MARGIN=5]="MARGIN",X[X.PDF417_COMPACT=6]="PDF417_COMPACT",X[X.PDF417_COMPACTION=7]="PDF417_COMPACTION",X[X.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",X[X.AZTEC_LAYERS=9]="AZTEC_LAYERS",X[X.QR_VERSION=10]="QR_VERSION"})(St||(St={}));var gt=St;class Qt{constructor(l){this.field=l,this.cachedGenerators=[],this.cachedGenerators.push(new Ve(l,Int32Array.from([1])))}buildGenerator(l){const h=this.cachedGenerators;if(l>=h.length){let m=h[h.length-1];const g=this.field;for(let y=h.length;y<=l;y++){const v=m.multiply(new Ve(g,Int32Array.from([1,g.exp(y-1+g.getGeneratorBase())])));h.push(v),m=v}}return h[l]}encode(l,h){if(h===0)throw new p("No error correction bytes");const m=l.length-h;if(m<=0)throw new p("No data bytes provided");const g=this.buildGenerator(h),y=new Int32Array(m);j.arraycopy(l,0,y,0,m);let v=new Ve(this.field,y);v=v.multiplyByMonomial(h,1);const I=v.divide(g)[1].getCoefficients(),L=h-I.length;for(let q=0;q<L;q++)l[m+q]=0;j.arraycopy(I,0,l,m+L,I.length)}}class Et{constructor(){}static applyMaskPenaltyRule1(l){return Et.applyMaskPenaltyRule1Internal(l,!0)+Et.applyMaskPenaltyRule1Internal(l,!1)}static applyMaskPenaltyRule2(l){let h=0;const m=l.getArray(),g=l.getWidth(),y=l.getHeight();for(let v=0;v<y-1;v++){const E=m[v];for(let I=0;I<g-1;I++){const L=E[I];L===E[I+1]&&L===m[v+1][I]&&L===m[v+1][I+1]&&h++}}return Et.N2*h}static applyMaskPenaltyRule3(l){let h=0;const m=l.getArray(),g=l.getWidth(),y=l.getHeight();for(let v=0;v<y;v++)for(let E=0;E<g;E++){const I=m[v];E+6<g&&I[E]===1&&I[E+1]===0&&I[E+2]===1&&I[E+3]===1&&I[E+4]===1&&I[E+5]===0&&I[E+6]===1&&(Et.isWhiteHorizontal(I,E-4,E)||Et.isWhiteHorizontal(I,E+7,E+11))&&h++,v+6<y&&m[v][E]===1&&m[v+1][E]===0&&m[v+2][E]===1&&m[v+3][E]===1&&m[v+4][E]===1&&m[v+5][E]===0&&m[v+6][E]===1&&(Et.isWhiteVertical(m,E,v-4,v)||Et.isWhiteVertical(m,E,v+7,v+11))&&h++}return h*Et.N3}static isWhiteHorizontal(l,h,m){h=Math.max(h,0),m=Math.min(m,l.length);for(let g=h;g<m;g++)if(l[g]===1)return!1;return!0}static isWhiteVertical(l,h,m,g){m=Math.max(m,0),g=Math.min(g,l.length);for(let y=m;y<g;y++)if(l[y][h]===1)return!1;return!0}static applyMaskPenaltyRule4(l){let h=0;const m=l.getArray(),g=l.getWidth(),y=l.getHeight();for(let I=0;I<y;I++){const L=m[I];for(let q=0;q<g;q++)L[q]===1&&h++}const v=l.getHeight()*l.getWidth();return Math.floor(Math.abs(h*2-v)*10/v)*Et.N4}static getDataMaskBit(l,h,m){let g,y;switch(l){case 0:g=m+h&1;break;case 1:g=m&1;break;case 2:g=h%3;break;case 3:g=(m+h)%3;break;case 4:g=Math.floor(m/2)+Math.floor(h/3)&1;break;case 5:y=m*h,g=(y&1)+y%3;break;case 6:y=m*h,g=(y&1)+y%3&1;break;case 7:y=m*h,g=y%3+(m+h&1)&1;break;default:throw new p("Invalid mask pattern: "+l)}return g===0}static applyMaskPenaltyRule1Internal(l,h){let m=0;const g=h?l.getHeight():l.getWidth(),y=h?l.getWidth():l.getHeight(),v=l.getArray();for(let E=0;E<g;E++){let I=0,L=-1;for(let q=0;q<y;q++){const Y=h?v[E][q]:v[q][E];Y===L?I++:(I>=5&&(m+=Et.N1+(I-5)),I=1,L=Y)}I>=5&&(m+=Et.N1+(I-5))}return m}}Et.N1=3,Et.N2=3,Et.N3=40,Et.N4=10;class br{constructor(l,h){this.width=l,this.height=h;const m=new Array(h);for(let g=0;g!==h;g++)m[g]=new Uint8Array(l);this.bytes=m}getHeight(){return this.height}getWidth(){return this.width}get(l,h){return this.bytes[h][l]}getArray(){return this.bytes}setNumber(l,h,m){this.bytes[h][l]=m}setBoolean(l,h,m){this.bytes[h][l]=m?1:0}clear(l){for(const h of this.bytes)P.fill(h,l)}equals(l){if(!(l instanceof br))return!1;const h=l;if(this.width!==h.width||this.height!==h.height)return!1;for(let m=0,g=this.height;m<g;++m){const y=this.bytes[m],v=h.bytes[m];for(let E=0,I=this.width;E<I;++E)if(y[E]!==v[E])return!1}return!0}toString(){const l=new J;for(let h=0,m=this.height;h<m;++h){const g=this.bytes[h];for(let y=0,v=this.width;y<v;++y)switch(g[y]){case 0:l.append(" 0");break;case 1:l.append(" 1");break;default:l.append("  ");break}l.append(`
`)}return l.toString()}}class Tr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const l=new J;return l.append(`<<
`),l.append(" mode: "),l.append(this.mode?this.mode.toString():"null"),l.append(`
 ecLevel: `),l.append(this.ecLevel?this.ecLevel.toString():"null"),l.append(`
 version: `),l.append(this.version?this.version.toString():"null"),l.append(`
 maskPattern: `),l.append(this.maskPattern.toString()),this.matrix?(l.append(`
 matrix:
`),l.append(this.matrix.toString())):l.append(`
 matrix: null
`),l.append(`>>
`),l.toString()}setMode(l){this.mode=l}setECLevel(l){this.ecLevel=l}setVersion(l){this.version=l}setMaskPattern(l){this.maskPattern=l}setMatrix(l){this.matrix=l}static isValidMaskPattern(l){return l>=0&&l<Tr.NUM_MASK_PATTERNS}}Tr.NUM_MASK_PATTERNS=8;class tr extends u{}tr.kind="WriterException";class bt{constructor(){}static clearMatrix(l){l.clear(255)}static buildMatrix(l,h,m,g,y){bt.clearMatrix(y),bt.embedBasicPatterns(m,y),bt.embedTypeInfo(h,g,y),bt.maybeEmbedVersionInfo(m,y),bt.embedDataBits(l,g,y)}static embedBasicPatterns(l,h){bt.embedPositionDetectionPatternsAndSeparators(h),bt.embedDarkDotAtLeftBottomCorner(h),bt.maybeEmbedPositionAdjustmentPatterns(l,h),bt.embedTimingPatterns(h)}static embedTypeInfo(l,h,m){const g=new _;bt.makeTypeInfoBits(l,h,g);for(let y=0,v=g.getSize();y<v;++y){const E=g.get(g.getSize()-1-y),I=bt.TYPE_INFO_COORDINATES[y],L=I[0],q=I[1];if(m.setBoolean(L,q,E),y<8){const Y=m.getWidth()-y-1;m.setBoolean(Y,8,E)}else{const re=m.getHeight()-7+(y-8);m.setBoolean(8,re,E)}}}static maybeEmbedVersionInfo(l,h){if(l.getVersionNumber()<7)return;const m=new _;bt.makeVersionInfoBits(l,m);let g=6*3-1;for(let y=0;y<6;++y)for(let v=0;v<3;++v){const E=m.get(g);g--,h.setBoolean(y,h.getHeight()-11+v,E),h.setBoolean(h.getHeight()-11+v,y,E)}}static embedDataBits(l,h,m){let g=0,y=-1,v=m.getWidth()-1,E=m.getHeight()-1;for(;v>0;){for(v===6&&(v-=1);E>=0&&E<m.getHeight();){for(let I=0;I<2;++I){const L=v-I;if(!bt.isEmpty(m.get(L,E)))continue;let q;g<l.getSize()?(q=l.get(g),++g):q=!1,h!==255&&Et.getDataMaskBit(h,L,E)&&(q=!q),m.setBoolean(L,E,q)}E+=y}y=-y,E+=y,v-=2}if(g!==l.getSize())throw new tr("Not all bits consumed: "+g+"/"+l.getSize())}static findMSBSet(l){return 32-k.numberOfLeadingZeros(l)}static calculateBCHCode(l,h){if(h===0)throw new p("0 polynomial");const m=bt.findMSBSet(h);for(l<<=m-1;bt.findMSBSet(l)>=m;)l^=h<<bt.findMSBSet(l)-m;return l}static makeTypeInfoBits(l,h,m){if(!Tr.isValidMaskPattern(h))throw new tr("Invalid mask pattern");const g=l.getBits()<<3|h;m.appendBits(g,5);const y=bt.calculateBCHCode(g,bt.TYPE_INFO_POLY);m.appendBits(y,10);const v=new _;if(v.appendBits(bt.TYPE_INFO_MASK_PATTERN,15),m.xor(v),m.getSize()!==15)throw new tr("should not happen but we got: "+m.getSize())}static makeVersionInfoBits(l,h){h.appendBits(l.getVersionNumber(),6);const m=bt.calculateBCHCode(l.getVersionNumber(),bt.VERSION_INFO_POLY);if(h.appendBits(m,12),h.getSize()!==18)throw new tr("should not happen but we got: "+h.getSize())}static isEmpty(l){return l===255}static embedTimingPatterns(l){for(let h=8;h<l.getWidth()-8;++h){const m=(h+1)%2;bt.isEmpty(l.get(h,6))&&l.setNumber(h,6,m),bt.isEmpty(l.get(6,h))&&l.setNumber(6,h,m)}}static embedDarkDotAtLeftBottomCorner(l){if(l.get(8,l.getHeight()-8)===0)throw new tr;l.setNumber(8,l.getHeight()-8,1)}static embedHorizontalSeparationPattern(l,h,m){for(let g=0;g<8;++g){if(!bt.isEmpty(m.get(l+g,h)))throw new tr;m.setNumber(l+g,h,0)}}static embedVerticalSeparationPattern(l,h,m){for(let g=0;g<7;++g){if(!bt.isEmpty(m.get(l,h+g)))throw new tr;m.setNumber(l,h+g,0)}}static embedPositionAdjustmentPattern(l,h,m){for(let g=0;g<5;++g){const y=bt.POSITION_ADJUSTMENT_PATTERN[g];for(let v=0;v<5;++v)m.setNumber(l+v,h+g,y[v])}}static embedPositionDetectionPattern(l,h,m){for(let g=0;g<7;++g){const y=bt.POSITION_DETECTION_PATTERN[g];for(let v=0;v<7;++v)m.setNumber(l+v,h+g,y[v])}}static embedPositionDetectionPatternsAndSeparators(l){const h=bt.POSITION_DETECTION_PATTERN[0].length;bt.embedPositionDetectionPattern(0,0,l),bt.embedPositionDetectionPattern(l.getWidth()-h,0,l),bt.embedPositionDetectionPattern(0,l.getWidth()-h,l);const m=8;bt.embedHorizontalSeparationPattern(0,m-1,l),bt.embedHorizontalSeparationPattern(l.getWidth()-m,m-1,l),bt.embedHorizontalSeparationPattern(0,l.getWidth()-m,l);const g=7;bt.embedVerticalSeparationPattern(g,0,l),bt.embedVerticalSeparationPattern(l.getHeight()-g-1,0,l),bt.embedVerticalSeparationPattern(g,l.getHeight()-g,l)}static maybeEmbedPositionAdjustmentPatterns(l,h){if(l.getVersionNumber()<2)return;const m=l.getVersionNumber()-1,g=bt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[m];for(let y=0,v=g.length;y!==v;y++){const E=g[y];if(E>=0)for(let I=0;I!==v;I++){const L=g[I];L>=0&&bt.isEmpty(h.get(L,E))&&bt.embedPositionAdjustmentPattern(L-2,E-2,h)}}}}bt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),bt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),bt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),bt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),bt.VERSION_INFO_POLY=7973,bt.TYPE_INFO_POLY=1335,bt.TYPE_INFO_MASK_PATTERN=21522;class Mn{constructor(l,h){this.dataBytes=l,this.errorCorrectionBytes=h}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nr{constructor(){}static calculateMaskPenalty(l){return Et.applyMaskPenaltyRule1(l)+Et.applyMaskPenaltyRule2(l)+Et.applyMaskPenaltyRule3(l)+Et.applyMaskPenaltyRule4(l)}static encode(l,h,m=null){let g=nr.DEFAULT_BYTE_MODE_ENCODING;const y=m!==null&&m.get(gt.CHARACTER_SET)!==void 0;y&&(g=m.get(gt.CHARACTER_SET).toString());const v=this.chooseMode(l,g),E=new _;if(v===Wt.BYTE&&(y||nr.DEFAULT_BYTE_MODE_ENCODING!==g)){const st=R.getCharacterSetECIByName(g);st!==void 0&&this.appendECI(st,E)}this.appendModeInfo(v,E);const I=new _;this.appendBytes(l,v,I,g);let L;if(m!==null&&m.get(gt.QR_VERSION)!==void 0){const st=Number.parseInt(m.get(gt.QR_VERSION).toString(),10);L=At.getVersionForNumber(st);const rt=this.calculateBitsNeeded(v,E,I,L);if(!this.willFit(rt,L,h))throw new tr("Data too big for requested version")}else L=this.recommendVersion(h,v,E,I);const q=new _;q.appendBitArray(E);const Y=v===Wt.BYTE?I.getSizeInBytes():l.length;this.appendLengthInfo(Y,L,v,q),q.appendBitArray(I);const re=L.getECBlocksForLevel(h),he=L.getTotalCodewords()-re.getTotalECCodewords();this.terminateBits(he,q);const Ne=this.interleaveWithECBytes(q,L.getTotalCodewords(),he,re.getNumBlocks()),Ae=new Tr;Ae.setECLevel(h),Ae.setMode(v),Ae.setVersion(L);const _e=L.getDimensionForVersion(),We=new br(_e,_e),tt=this.chooseMaskPattern(Ne,h,L,We);return Ae.setMaskPattern(tt),bt.buildMatrix(Ne,h,L,tt,We),Ae.setMatrix(We),Ae}static recommendVersion(l,h,m,g){const y=this.calculateBitsNeeded(h,m,g,At.getVersionForNumber(1)),v=this.chooseVersion(y,l),E=this.calculateBitsNeeded(h,m,g,v);return this.chooseVersion(E,l)}static calculateBitsNeeded(l,h,m,g){return h.getSize()+l.getCharacterCountBits(g)+m.getSize()}static getAlphanumericCode(l){return l<nr.ALPHANUMERIC_TABLE.length?nr.ALPHANUMERIC_TABLE[l]:-1}static chooseMode(l,h=null){if(R.SJIS.getName()===h&&this.isOnlyDoubleByteKanji(l))return Wt.KANJI;let m=!1,g=!1;for(let y=0,v=l.length;y<v;++y){const E=l.charAt(y);if(nr.isDigit(E))m=!0;else if(this.getAlphanumericCode(E.charCodeAt(0))!==-1)g=!0;else return Wt.BYTE}return g?Wt.ALPHANUMERIC:m?Wt.NUMERIC:Wt.BYTE}static isOnlyDoubleByteKanji(l){let h;try{h=M.encode(l,R.SJIS)}catch{return!1}const m=h.length;if(m%2!==0)return!1;for(let g=0;g<m;g+=2){const y=h[g]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(l,h,m,g){let y=Number.MAX_SAFE_INTEGER,v=-1;for(let E=0;E<Tr.NUM_MASK_PATTERNS;E++){bt.buildMatrix(l,h,m,E,g);let I=this.calculateMaskPenalty(g);I<y&&(y=I,v=E)}return v}static chooseVersion(l,h){for(let m=1;m<=40;m++){const g=At.getVersionForNumber(m);if(nr.willFit(l,g,h))return g}throw new tr("Data too big")}static willFit(l,h,m){const g=h.getTotalCodewords(),v=h.getECBlocksForLevel(m).getTotalECCodewords(),E=g-v,I=(l+7)/8;return E>=I}static terminateBits(l,h){const m=l*8;if(h.getSize()>m)throw new tr("data bits cannot fit in the QR Code"+h.getSize()+" > "+m);for(let v=0;v<4&&h.getSize()<m;++v)h.appendBit(!1);const g=h.getSize()&7;if(g>0)for(let v=g;v<8;v++)h.appendBit(!1);const y=l-h.getSizeInBytes();for(let v=0;v<y;++v)h.appendBits(v&1?17:236,8);if(h.getSize()!==m)throw new tr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(l,h,m,g,y,v){if(g>=m)throw new tr("Block ID too large");const E=l%m,I=m-E,L=Math.floor(l/m),q=L+1,Y=Math.floor(h/m),re=Y+1,he=L-Y,Ne=q-re;if(he!==Ne)throw new tr("EC bytes mismatch");if(m!==I+E)throw new tr("RS blocks mismatch");if(l!==(Y+he)*I+(re+Ne)*E)throw new tr("Total bytes mismatch");g<I?(y[0]=Y,v[0]=he):(y[0]=re,v[0]=Ne)}static interleaveWithECBytes(l,h,m,g){if(l.getSizeInBytes()!==m)throw new tr("Number of bits and data bytes does not match");let y=0,v=0,E=0;const I=new Array;for(let q=0;q<g;++q){const Y=new Int32Array(1),re=new Int32Array(1);nr.getNumDataBytesAndNumECBytesForBlockID(h,m,g,q,Y,re);const he=Y[0],Ne=new Uint8Array(he);l.toBytes(8*y,Ne,0,he);const Ae=nr.generateECBytes(Ne,re[0]);I.push(new Mn(Ne,Ae)),v=Math.max(v,he),E=Math.max(E,Ae.length),y+=Y[0]}if(m!==y)throw new tr("Data bytes does not match offset");const L=new _;for(let q=0;q<v;++q)for(const Y of I){const re=Y.getDataBytes();q<re.length&&L.appendBits(re[q],8)}for(let q=0;q<E;++q)for(const Y of I){const re=Y.getErrorCorrectionBytes();q<re.length&&L.appendBits(re[q],8)}if(h!==L.getSizeInBytes())throw new tr("Interleaving error: "+h+" and "+L.getSizeInBytes()+" differ.");return L}static generateECBytes(l,h){const m=l.length,g=new Int32Array(m+h);for(let v=0;v<m;v++)g[v]=l[v]&255;new Qt(Ye.QR_CODE_FIELD_256).encode(g,h);const y=new Uint8Array(h);for(let v=0;v<h;v++)y[v]=g[m+v];return y}static appendModeInfo(l,h){h.appendBits(l.getBits(),4)}static appendLengthInfo(l,h,m,g){const y=m.getCharacterCountBits(h);if(l>=1<<y)throw new tr(l+" is bigger than "+((1<<y)-1));g.appendBits(l,y)}static appendBytes(l,h,m,g){switch(h){case Wt.NUMERIC:nr.appendNumericBytes(l,m);break;case Wt.ALPHANUMERIC:nr.appendAlphanumericBytes(l,m);break;case Wt.BYTE:nr.append8BitBytes(l,m,g);break;case Wt.KANJI:nr.appendKanjiBytes(l,m);break;default:throw new tr("Invalid mode: "+h)}}static getDigit(l){return l.charCodeAt(0)-48}static isDigit(l){const h=nr.getDigit(l);return h>=0&&h<=9}static appendNumericBytes(l,h){const m=l.length;let g=0;for(;g<m;){const y=nr.getDigit(l.charAt(g));if(g+2<m){const v=nr.getDigit(l.charAt(g+1)),E=nr.getDigit(l.charAt(g+2));h.appendBits(y*100+v*10+E,10),g+=3}else if(g+1<m){const v=nr.getDigit(l.charAt(g+1));h.appendBits(y*10+v,7),g+=2}else h.appendBits(y,4),g++}}static appendAlphanumericBytes(l,h){const m=l.length;let g=0;for(;g<m;){const y=nr.getAlphanumericCode(l.charCodeAt(g));if(y===-1)throw new tr;if(g+1<m){const v=nr.getAlphanumericCode(l.charCodeAt(g+1));if(v===-1)throw new tr;h.appendBits(y*45+v,11),g+=2}else h.appendBits(y,6),g++}}static append8BitBytes(l,h,m){let g;try{g=M.encode(l,m)}catch(y){throw new tr(y)}for(let y=0,v=g.length;y!==v;y++){const E=g[y];h.appendBits(E,8)}}static appendKanjiBytes(l,h){let m;try{m=M.encode(l,R.SJIS)}catch(y){throw new tr(y)}const g=m.length;for(let y=0;y<g;y+=2){const v=m[y]&255,E=m[y+1]&255,I=v<<8&4294967295|E;let L=-1;if(I>=33088&&I<=40956?L=I-33088:I>=57408&&I<=60351&&(L=I-49472),L===-1)throw new tr("Invalid byte sequence");const q=(L>>8)*192+(L&255);h.appendBits(q,13)}}static appendECI(l,h){h.appendBits(Wt.ECI.getBits(),4),h.appendBits(l.getValue(),8)}}nr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nr.DEFAULT_BYTE_MODE_ENCODING=R.UTF8.getName();class sn{write(l,h,m,g=null){if(l.length===0)throw new p("Found empty contents");if(h<0||m<0)throw new p("Requested dimensions are too small: "+h+"x"+m);let y=Sr.L,v=sn.QUIET_ZONE_SIZE;g!==null&&(g.get(gt.ERROR_CORRECTION)!==void 0&&(y=Sr.fromString(g.get(gt.ERROR_CORRECTION).toString())),g.get(gt.MARGIN)!==void 0&&(v=Number.parseInt(g.get(gt.MARGIN).toString(),10)));const E=nr.encode(l,y,g);return this.renderResult(E,h,m,v)}writeToDom(l,h,m,g,y=null){typeof l=="string"&&(l=document.querySelector(l));const v=this.write(h,m,g,y);l&&l.appendChild(v)}renderResult(l,h,m,g){const y=l.getMatrix();if(y===null)throw new ae;const v=y.getWidth(),E=y.getHeight(),I=v+g*2,L=E+g*2,q=Math.max(h,I),Y=Math.max(m,L),re=Math.min(Math.floor(q/I),Math.floor(Y/L)),he=Math.floor((q-v*re)/2),Ne=Math.floor((Y-E*re)/2),Ae=this.createSVGElement(q,Y);for(let _e=0,We=Ne;_e<E;_e++,We+=re)for(let tt=0,st=he;tt<v;tt++,st+=re)if(y.get(tt,_e)===1){const rt=this.createSvgRectElement(st,We,re,re);Ae.appendChild(rt)}return Ae}createSVGElement(l,h){const m=document.createElementNS(sn.SVG_NS,"svg");return m.setAttributeNS(null,"height",l.toString()),m.setAttributeNS(null,"width",h.toString()),m}createSvgRectElement(l,h,m,g){const y=document.createElementNS(sn.SVG_NS,"rect");return y.setAttributeNS(null,"x",l.toString()),y.setAttributeNS(null,"y",h.toString()),y.setAttributeNS(null,"height",m.toString()),y.setAttributeNS(null,"width",g.toString()),y.setAttributeNS(null,"fill","#000000"),y}}sn.QUIET_ZONE_SIZE=4,sn.SVG_NS="http://www.w3.org/2000/svg";class as{encode(l,h,m,g,y){if(l.length===0)throw new p("Found empty contents");if(h!==xe.QR_CODE)throw new p("Can only encode QR_CODE, but got "+h);if(m<0||g<0)throw new p(`Requested dimensions are too small: ${m}x${g}`);let v=Sr.L,E=as.QUIET_ZONE_SIZE;y!==null&&(y.get(gt.ERROR_CORRECTION)!==void 0&&(v=Sr.fromString(y.get(gt.ERROR_CORRECTION).toString())),y.get(gt.MARGIN)!==void 0&&(E=Number.parseInt(y.get(gt.MARGIN).toString(),10)));const I=nr.encode(l,v,y);return as.renderResult(I,m,g,E)}static renderResult(l,h,m,g){const y=l.getMatrix();if(y===null)throw new ae;const v=y.getWidth(),E=y.getHeight(),I=v+g*2,L=E+g*2,q=Math.max(h,I),Y=Math.max(m,L),re=Math.min(Math.floor(q/I),Math.floor(Y/L)),he=Math.floor((q-v*re)/2),Ne=Math.floor((Y-E*re)/2),Ae=new K(q,Y);for(let _e=0,We=Ne;_e<E;_e++,We+=re)for(let tt=0,st=he;tt<v;tt++,st+=re)y.get(tt,_e)===1&&Ae.setRegion(st,We,re,re);return Ae}}as.QUIET_ZONE_SIZE=4;class Gs{encode(l,h,m,g,y){let v;switch(h){case xe.QR_CODE:v=new as;break;default:throw new p("No encoder available for format "+h)}return v.encode(l,h,m,g,y)}}class ua extends oe{constructor(l,h,m,g,y,v,E,I){if(super(v,E),this.yuvData=l,this.dataWidth=h,this.dataHeight=m,this.left=g,this.top=y,g+v>h||y+E>m)throw new p("Crop rectangle does not fit within image data.");I&&this.reverseHorizontal(v,E)}getRow(l,h){if(l<0||l>=this.getHeight())throw new p("Requested row is outside the image: "+l);const m=this.getWidth();(h==null||h.length<m)&&(h=new Uint8ClampedArray(m));const g=(l+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,g,h,0,m),h}getMatrix(){const l=this.getWidth(),h=this.getHeight();if(l===this.dataWidth&&h===this.dataHeight)return this.yuvData;const m=l*h,g=new Uint8ClampedArray(m);let y=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return j.arraycopy(this.yuvData,y,g,0,m),g;for(let v=0;v<h;v++){const E=v*l;j.arraycopy(this.yuvData,y,g,E,l),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(l,h,m,g){return new ua(this.yuvData,this.dataWidth,this.dataHeight,this.left+l,this.top+h,m,g,!1)}renderThumbnail(){const l=this.getWidth()/ua.THUMBNAIL_SCALE_FACTOR,h=this.getHeight()/ua.THUMBNAIL_SCALE_FACTOR,m=new Int32Array(l*h),g=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let v=0;v<h;v++){const E=v*l;for(let I=0;I<l;I++){const L=g[y+I*ua.THUMBNAIL_SCALE_FACTOR]&255;m[E+I]=4278190080|L*65793}y+=this.dataWidth*ua.THUMBNAIL_SCALE_FACTOR}return m}getThumbnailWidth(){return this.getWidth()/ua.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ua.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(l,h){const m=this.yuvData;for(let g=0,y=this.top*this.dataWidth+this.left;g<h;g++,y+=this.dataWidth){const v=y+l/2;for(let E=y,I=y+l-1;E<v;E++,I--){const L=m[E];m[E]=m[I],m[I]=L}}}invert(){return new ye(this)}}ua.THUMBNAIL_SCALE_FACTOR=2;class So extends oe{constructor(l,h,m,g,y,v,E){if(super(h,m),this.dataWidth=g,this.dataHeight=y,this.left=v,this.top=E,l.BYTES_PER_ELEMENT===4){const I=h*m,L=new Uint8ClampedArray(I);for(let q=0;q<I;q++){const Y=l[q],re=Y>>16&255,he=Y>>7&510,Ne=Y&255;L[q]=(re+he+Ne)/4&255}this.luminances=L}else this.luminances=l;if(g===void 0&&(this.dataWidth=h),y===void 0&&(this.dataHeight=m),v===void 0&&(this.left=0),E===void 0&&(this.top=0),this.left+h>this.dataWidth||this.top+m>this.dataHeight)throw new p("Crop rectangle does not fit within image data.")}getRow(l,h){if(l<0||l>=this.getHeight())throw new p("Requested row is outside the image: "+l);const m=this.getWidth();(h==null||h.length<m)&&(h=new Uint8ClampedArray(m));const g=(l+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,g,h,0,m),h}getMatrix(){const l=this.getWidth(),h=this.getHeight();if(l===this.dataWidth&&h===this.dataHeight)return this.luminances;const m=l*h,g=new Uint8ClampedArray(m);let y=this.top*this.dataWidth+this.left;if(l===this.dataWidth)return j.arraycopy(this.luminances,y,g,0,m),g;for(let v=0;v<h;v++){const E=v*l;j.arraycopy(this.luminances,y,g,E,l),y+=this.dataWidth}return g}isCropSupported(){return!0}crop(l,h,m,g){return new So(this.luminances,m,g,this.dataWidth,this.dataHeight,this.left+l,this.top+h)}invert(){return new ye(this)}}class Eo extends R{static forName(l){return this.getCharacterSetECIByName(l)}}class Ci{}Ci.ISO_8859_1=R.ISO8859_1;class ko{isCompact(){return this.compact}setCompact(l){this.compact=l}getSize(){return this.size}setSize(l){this.size=l}getLayers(){return this.layers}setLayers(l){this.layers=l}getCodeWords(){return this.codeWords}setCodeWords(l){this.codeWords=l}getMatrix(){return this.matrix}setMatrix(l){this.matrix=l}}class Po{static singletonList(l){return[l]}static min(l,h){return l.sort(h)[0]}}class ll{constructor(l){this.previous=l}getPrevious(){return this.previous}}class Nn extends ll{constructor(l,h,m){super(l),this.value=h,this.bitCount=m}appendTo(l,h){l.appendBits(this.value,this.bitCount)}add(l,h){return new Nn(this,l,h)}addBinaryShift(l,h){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nn(this,l,h)}toString(){let l=this.value&(1<<this.bitCount)-1;return l|=1<<this.bitCount,"<"+k.toBinaryString(l|1<<this.bitCount).substring(1)+">"}}class eo extends Nn{constructor(l,h,m){super(l,0,0),this.binaryShiftStart=h,this.binaryShiftByteCount=m}appendTo(l,h){for(let m=0;m<this.binaryShiftByteCount;m++)(m===0||m===31&&this.binaryShiftByteCount<=62)&&(l.appendBits(31,5),this.binaryShiftByteCount>62?l.appendBits(this.binaryShiftByteCount-31,16):m===0?l.appendBits(Math.min(this.binaryShiftByteCount,31),5):l.appendBits(this.binaryShiftByteCount-31,5)),l.appendBits(h[this.binaryShiftStart+m],8)}addBinaryShift(l,h){return new eo(this,l,h)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function cl(X,l,h){return new eo(X,l,h)}function to(X,l,h){return new Nn(X,l,h)}const rd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ir=0,Sa=1,is=2,nd=3,jn=4,dl=new Nn(null,0,0),ul=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function sd(X){for(let l of X)P.fill(l,-1);return X[Ir][jn]=0,X[Sa][jn]=0,X[Sa][Ir]=28,X[nd][jn]=0,X[is][jn]=0,X[is][Ir]=15,X}const ro=sd(P.createInt32Array(6,6));class ws{constructor(l,h,m,g){this.token=l,this.mode=h,this.binaryShiftByteCount=m,this.bitCount=g}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(l,h){let m=this.bitCount,g=this.token;if(l!==this.mode){let v=ul[this.mode][l];g=to(g,v&65535,v>>16),m+=v>>16}let y=l===is?4:5;return g=to(g,h,y),new ws(g,l,0,m+y)}shiftAndAppend(l,h){let m=this.token,g=this.mode===is?4:5;return m=to(m,ro[this.mode][l],g),m=to(m,h,5),new ws(m,this.mode,0,this.bitCount+g+5)}addBinaryShiftChar(l){let h=this.token,m=this.mode,g=this.bitCount;if(this.mode===jn||this.mode===is){let E=ul[m][Ir];h=to(h,E&65535,E>>16),g+=E>>16,m=Ir}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,v=new ws(h,m,this.binaryShiftByteCount+1,g+y);return v.binaryShiftByteCount===2078&&(v=v.endBinaryShift(l+1)),v}endBinaryShift(l){if(this.binaryShiftByteCount===0)return this;let h=this.token;return h=cl(h,l-this.binaryShiftByteCount,this.binaryShiftByteCount),new ws(h,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(l){let h=this.bitCount+(ul[this.mode][l.mode]>>16);return this.binaryShiftByteCount<l.binaryShiftByteCount?h+=ws.calculateBinaryShiftCost(l)-ws.calculateBinaryShiftCost(this):this.binaryShiftByteCount>l.binaryShiftByteCount&&l.binaryShiftByteCount>0&&(h+=10),h<=l.bitCount}toBitArray(l){let h=[];for(let g=this.endBinaryShift(l.length).token;g!==null;g=g.getPrevious())h.unshift(g);let m=new _;for(const g of h)g.appendTo(m,l);return m}toString(){return W.format("%s bits=%d bytes=%d",rd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(l){return l.binaryShiftByteCount>62?21:l.binaryShiftByteCount>31?20:l.binaryShiftByteCount>0?10:0}}ws.INITIAL_STATE=new ws(dl,Ir,0,0);function ha(X){const l=W.getCharCode(" "),h=W.getCharCode("."),m=W.getCharCode(",");X[Ir][l]=1;const g=W.getCharCode("Z"),y=W.getCharCode("A");for(let re=y;re<=g;re++)X[Ir][re]=re-y+2;X[Sa][l]=1;const v=W.getCharCode("z"),E=W.getCharCode("a");for(let re=E;re<=v;re++)X[Sa][re]=re-E+2;X[is][l]=1;const I=W.getCharCode("9"),L=W.getCharCode("0");for(let re=L;re<=I;re++)X[is][re]=re-L+2;X[is][m]=12,X[is][h]=13;const q=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let re=0;re<q.length;re++)X[nd][W.getCharCode(q[re])]=re;const Y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let re=0;re<Y.length;re++)W.getCharCode(Y[re])>0&&(X[jn][W.getCharCode(Y[re])]=re);return X}const Rs=ha(P.createInt32Array(5,256));class Ea{constructor(l){this.text=l}encode(){const l=W.getCharCode(" "),h=W.getCharCode(`
`);let m=Po.singletonList(ws.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let v,E=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case W.getCharCode("\r"):v=E===h?2:0;break;case W.getCharCode("."):v=E===l?3:0;break;case W.getCharCode(","):v=E===l?4:0;break;case W.getCharCode(":"):v=E===l?5:0;break;default:v=0}v>0?(m=Ea.updateStateListForPair(m,y,v),y++):m=this.updateStateListForChar(m,y)}return Po.min(m,(y,v)=>y.getBitCount()-v.getBitCount()).toBitArray(this.text)}updateStateListForChar(l,h){const m=[];for(let g of l)this.updateStateForChar(g,h,m);return Ea.simplifyStates(m)}updateStateForChar(l,h,m){let g=this.text[h]&255,y=Rs[l.getMode()][g]>0,v=null;for(let E=0;E<=jn;E++){let I=Rs[E][g];if(I>0){if(v==null&&(v=l.endBinaryShift(h)),!y||E===l.getMode()||E===is){const L=v.latchAndAppend(E,I);m.push(L)}if(!y&&ro[l.getMode()][E]>=0){const L=v.shiftAndAppend(E,I);m.push(L)}}}if(l.getBinaryShiftByteCount()>0||Rs[l.getMode()][g]===0){let E=l.addBinaryShiftChar(h);m.push(E)}}static updateStateListForPair(l,h,m){const g=[];for(let y of l)this.updateStateForPair(y,h,m,g);return this.simplifyStates(g)}static updateStateForPair(l,h,m,g){let y=l.endBinaryShift(h);if(g.push(y.latchAndAppend(jn,m)),l.getMode()!==jn&&g.push(y.shiftAndAppend(jn,m)),m===3||m===4){let v=y.latchAndAppend(is,16-m).latchAndAppend(is,1);g.push(v)}if(l.getBinaryShiftByteCount()>0){let v=l.addBinaryShiftChar(h).addBinaryShiftChar(h+1);g.push(v)}}static simplifyStates(l){let h=[];for(const m of l){let g=!0;for(const y of h){if(y.isBetterThanOrEqualTo(m)){g=!1;break}m.isBetterThanOrEqualTo(y)&&(h=h.filter(v=>v!==y))}g&&h.push(m)}return h}}class ar{constructor(){}static encodeBytes(l){return ar.encode(l,ar.DEFAULT_EC_PERCENT,ar.DEFAULT_AZTEC_LAYERS)}static encode(l,h,m){let g=new Ea(l).encode(),y=k.truncDivision(g.getSize()*h,100)+11,v=g.getSize()+y,E,I,L,q,Y;if(m!==ar.DEFAULT_AZTEC_LAYERS){if(E=m<0,I=Math.abs(m),I>(E?ar.MAX_NB_BITS_COMPACT:ar.MAX_NB_BITS))throw new p(W.format("Illegal value %s for layers",m));L=ar.totalBitsInLayer(I,E),q=ar.WORD_SIZE[I];let rt=L-L%q;if(Y=ar.stuffBits(g,q),Y.getSize()+y>rt)throw new p("Data to large for user specified layer");if(E&&Y.getSize()>q*64)throw new p("Data to large for user specified layer")}else{q=0,Y=null;for(let rt=0;;rt++){if(rt>ar.MAX_NB_BITS)throw new p("Data too large for an Aztec code");if(E=rt<=3,I=E?rt+1:rt,L=ar.totalBitsInLayer(I,E),v>L)continue;(Y==null||q!==ar.WORD_SIZE[I])&&(q=ar.WORD_SIZE[I],Y=ar.stuffBits(g,q));let qt=L-L%q;if(!(E&&Y.getSize()>q*64)&&Y.getSize()+y<=qt)break}}let re=ar.generateCheckWords(Y,L,q),he=Y.getSize()/q,Ne=ar.generateModeMessage(E,I,he),Ae=(E?11:14)+I*4,_e=new Int32Array(Ae),We;if(E){We=Ae;for(let rt=0;rt<_e.length;rt++)_e[rt]=rt}else{We=Ae+1+2*k.truncDivision(k.truncDivision(Ae,2)-1,15);let rt=k.truncDivision(Ae,2),qt=k.truncDivision(We,2);for(let Yt=0;Yt<rt;Yt++){let Qn=Yt+k.truncDivision(Yt,15);_e[rt-Yt-1]=qt-Qn-1,_e[rt+Yt]=qt+Qn+1}}let tt=new K(We);for(let rt=0,qt=0;rt<I;rt++){let Yt=(I-rt)*4+(E?9:12);for(let Qn=0;Qn<Yt;Qn++){let Ns=Qn*2;for(let os=0;os<2;os++)re.get(qt+Ns+os)&&tt.set(_e[rt*2+os],_e[rt*2+Qn]),re.get(qt+Yt*2+Ns+os)&&tt.set(_e[rt*2+Qn],_e[Ae-1-rt*2-os]),re.get(qt+Yt*4+Ns+os)&&tt.set(_e[Ae-1-rt*2-os],_e[Ae-1-rt*2-Qn]),re.get(qt+Yt*6+Ns+os)&&tt.set(_e[Ae-1-rt*2-Qn],_e[rt*2+os])}qt+=Yt*8}if(ar.drawModeMessage(tt,E,We,Ne),E)ar.drawBullsEye(tt,k.truncDivision(We,2),5);else{ar.drawBullsEye(tt,k.truncDivision(We,2),7);for(let rt=0,qt=0;rt<k.truncDivision(Ae,2)-1;rt+=15,qt+=16)for(let Yt=k.truncDivision(We,2)&1;Yt<We;Yt+=2)tt.set(k.truncDivision(We,2)-qt,Yt),tt.set(k.truncDivision(We,2)+qt,Yt),tt.set(Yt,k.truncDivision(We,2)-qt),tt.set(Yt,k.truncDivision(We,2)+qt)}let st=new ko;return st.setCompact(E),st.setSize(We),st.setLayers(I),st.setCodeWords(he),st.setMatrix(tt),st}static drawBullsEye(l,h,m){for(let g=0;g<m;g+=2)for(let y=h-g;y<=h+g;y++)l.set(y,h-g),l.set(y,h+g),l.set(h-g,y),l.set(h+g,y);l.set(h-m,h-m),l.set(h-m+1,h-m),l.set(h-m,h-m+1),l.set(h+m,h-m),l.set(h+m,h-m+1),l.set(h+m,h+m-1)}static generateModeMessage(l,h,m){let g=new _;return l?(g.appendBits(h-1,2),g.appendBits(m-1,6),g=ar.generateCheckWords(g,28,4)):(g.appendBits(h-1,5),g.appendBits(m-1,11),g=ar.generateCheckWords(g,40,4)),g}static drawModeMessage(l,h,m,g){let y=k.truncDivision(m,2);if(h)for(let v=0;v<7;v++){let E=y-3+v;g.get(v)&&l.set(E,y-5),g.get(v+7)&&l.set(y+5,E),g.get(20-v)&&l.set(E,y+5),g.get(27-v)&&l.set(y-5,E)}else for(let v=0;v<10;v++){let E=y-5+v+k.truncDivision(v,5);g.get(v)&&l.set(E,y-7),g.get(v+10)&&l.set(y+7,E),g.get(29-v)&&l.set(E,y+7),g.get(39-v)&&l.set(y-7,E)}}static generateCheckWords(l,h,m){let g=l.getSize()/m,y=new Qt(ar.getGF(m)),v=k.truncDivision(h,m),E=ar.bitsToWords(l,m,v);y.encode(E,v-g);let I=h%m,L=new _;L.appendBits(0,I);for(const q of Array.from(E))L.appendBits(q,m);return L}static bitsToWords(l,h,m){let g=new Int32Array(m),y,v;for(y=0,v=l.getSize()/h;y<v;y++){let E=0;for(let I=0;I<h;I++)E|=l.get(y*h+I)?1<<h-I-1:0;g[y]=E}return g}static getGF(l){switch(l){case 4:return Ye.AZTEC_PARAM;case 6:return Ye.AZTEC_DATA_6;case 8:return Ye.AZTEC_DATA_8;case 10:return Ye.AZTEC_DATA_10;case 12:return Ye.AZTEC_DATA_12;default:throw new p("Unsupported word size "+l)}}static stuffBits(l,h){let m=new _,g=l.getSize(),y=(1<<h)-2;for(let v=0;v<g;v+=h){let E=0;for(let I=0;I<h;I++)(v+I>=g||l.get(v+I))&&(E|=1<<h-1-I);(E&y)===y?(m.appendBits(E&y,h),v--):E&y?m.appendBits(E,h):(m.appendBits(E|1,h),v--)}return m}static totalBitsInLayer(l,h){return((h?88:112)+16*l)*l}}ar.DEFAULT_EC_PERCENT=33,ar.DEFAULT_AZTEC_LAYERS=0,ar.MAX_NB_BITS=32,ar.MAX_NB_BITS_COMPACT=4,ar.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Va{encode(l,h,m,g){return this.encodeWithHints(l,h,m,g,null)}encodeWithHints(l,h,m,g,y){let v=Ci.ISO_8859_1,E=ar.DEFAULT_EC_PERCENT,I=ar.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(gt.CHARACTER_SET)&&(v=Eo.forName(y.get(gt.CHARACTER_SET).toString())),y.has(gt.ERROR_CORRECTION)&&(E=k.parseInt(y.get(gt.ERROR_CORRECTION).toString())),y.has(gt.AZTEC_LAYERS)&&(I=k.parseInt(y.get(gt.AZTEC_LAYERS).toString()))),Va.encodeLayers(l,h,m,g,v,E,I)}static encodeLayers(l,h,m,g,y,v,E){if(h!==xe.AZTEC)throw new p("Can only encode AZTEC, but got "+h);let I=ar.encode(W.getBytes(l,y),v,E);return Va.renderResult(I,m,g)}static renderResult(l,h,m){let g=l.getMatrix();if(g==null)throw new ae;let y=g.getWidth(),v=g.getHeight(),E=Math.max(h,y),I=Math.max(m,v),L=Math.min(E/y,I/v),q=(E-y*L)/2,Y=(I-v*L)/2,re=new K(E,I);for(let he=0,Ne=Y;he<v;he++,Ne+=L)for(let Ae=0,_e=q;Ae<y;Ae++,_e+=L)g.get(Ae,he)&&re.setRegion(_e,Ne,L,L);return re}}r.AbstractExpandedDecoder=da,r.ArgumentException=f,r.ArithmeticException=Oe,r.AztecCode=ko,r.AztecCodeReader=Be,r.AztecCodeWriter=Va,r.AztecDecoder=at,r.AztecDetector=Ce,r.AztecDetectorResult=vt,r.AztecEncoder=ar,r.AztecHighLevelEncoder=Ea,r.AztecPoint=lt,r.BarcodeFormat=xe,r.Binarizer=N,r.BinaryBitmap=b,r.BitArray=_,r.BitMatrix=K,r.BitSource=fn,r.BrowserAztecCodeReader=et,r.BrowserBarcodeReader=Jc,r.BrowserCodeReader=Q,r.BrowserDatamatrixCodeReader=Zo,r.BrowserMultiFormatReader=Ie,r.BrowserPDF417Reader=Je,r.BrowserQRCodeReader=ct,r.BrowserQRCodeSvgWriter=sn,r.CharacterSetECI=R,r.ChecksumException=x,r.Code128Reader=Le,r.Code39Reader=mt,r.DataMatrixDecodedBitStreamParser=za,r.DataMatrixReader=Zn,r.DecodeHintType=$,r.DecoderResult=be,r.DefaultGridSampler=mr,r.DetectorResult=jt,r.EAN13Reader=er,r.EncodeHintType=gt,r.Exception=u,r.FormatException=F,r.GenericGF=Ye,r.GenericGFPoly=Ve,r.GlobalHistogramBinarizer=me,r.GridSampler=Kt,r.GridSamplerInstance=Ht,r.HTMLCanvasElementLuminanceSource=we,r.HybridBinarizer=se,r.ITFReader=yt,r.IllegalArgumentException=p,r.IllegalStateException=ae,r.InvertedLuminanceSource=ye,r.LuminanceSource=oe,r.MathUtils=qe,r.MultiFormatOneDReader=Yi,r.MultiFormatReader=je,r.MultiFormatWriter=Gs,r.NotFoundException=V,r.OneDReader=Xe,r.PDF417DecodedBitStreamParser=Ge,r.PDF417DecoderErrorCorrection=tl,r.PDF417Reader=Z,r.PDF417ResultMetadata=ec,r.PerspectiveTransform=_t,r.PlanarYUVLuminanceSource=ua,r.QRCodeByteMatrix=br,r.QRCodeDataMask=Os,r.QRCodeDecodedBitStreamParser=Gr,r.QRCodeDecoderErrorCorrectionLevel=Sr,r.QRCodeDecoderFormatInformation=Jn,r.QRCodeEncoder=nr,r.QRCodeEncoderQRCode=Tr,r.QRCodeMaskUtil=Et,r.QRCodeMatrixUtil=bt,r.QRCodeMode=Wt,r.QRCodeReader=vi,r.QRCodeVersion=At,r.QRCodeWriter=as,r.RGBLuminanceSource=So,r.RSS14Reader=qr,r.RSSExpandedReader=it,r.ReaderException=fe,r.ReedSolomonDecoder=Fe,r.ReedSolomonEncoder=Qt,r.ReedSolomonException=Se,r.Result=le,r.ResultMetadataType=Re,r.ResultPoint=Ue,r.StringUtils=W,r.UnsupportedOperationException=z,r.VideoInputDevice=te,r.WhiteRectangleDetector=Gt,r.WriterException=tr,r.ZXingArrays=P,r.ZXingCharset=Eo,r.ZXingInteger=k,r.ZXingStandardCharsets=Ci,r.ZXingStringBuilder=J,r.ZXingStringEncoding=M,r.ZXingSystem=j,r.createAbstractExpandedDecoder=iu,Object.defineProperty(r,"__esModule",{value:!0})})})(qv,qv.exports);var ln=qv.exports;const eie=Vo(ln),tie=kE({__proto__:null,default:eie},[ln]);var MA=function(){function e(t,r,n){if(this.formatMap=new Map([[kt.QR_CODE,ln.BarcodeFormat.QR_CODE],[kt.AZTEC,ln.BarcodeFormat.AZTEC],[kt.CODABAR,ln.BarcodeFormat.CODABAR],[kt.CODE_39,ln.BarcodeFormat.CODE_39],[kt.CODE_93,ln.BarcodeFormat.CODE_93],[kt.CODE_128,ln.BarcodeFormat.CODE_128],[kt.DATA_MATRIX,ln.BarcodeFormat.DATA_MATRIX],[kt.MAXICODE,ln.BarcodeFormat.MAXICODE],[kt.ITF,ln.BarcodeFormat.ITF],[kt.EAN_13,ln.BarcodeFormat.EAN_13],[kt.EAN_8,ln.BarcodeFormat.EAN_8],[kt.PDF_417,ln.BarcodeFormat.PDF_417],[kt.RSS_14,ln.BarcodeFormat.RSS_14],[kt.RSS_EXPANDED,ln.BarcodeFormat.RSS_EXPANDED],[kt.UPC_A,ln.BarcodeFormat.UPC_A],[kt.UPC_E,ln.BarcodeFormat.UPC_E],[kt.UPC_EAN_EXTENSION,ln.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!tie)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var a=this.createZXingFormats(t),i=new Map;i.set(ln.DecodeHintType.POSSIBLE_FORMATS,a),i.set(ln.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,a){try{n(r.decode(t))}catch(i){a(i)}})},e.prototype.decode=function(t){var r=new ln.MultiFormatReader(this.verbose,this.hints),n=new ln.HTMLCanvasElementLuminanceSource(t),a=new ln.BinaryBitmap(new ln.HybridBinarizer(n)),i=r.decode(a);return{text:i.text,format:KO.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),rie=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(f){try{u(n.next(f))}catch(p){o(p)}}function d(f){try{u(n.throw(f))}catch(p){o(p)}}function u(f){f.done?i(f.value):a(f.value).then(c,d)}u((n=n.apply(e,t||[])).next())})},nie=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(f){return d([u,f])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},BA=function(){function e(t,r,n){if(this.formatMap=new Map([[kt.QR_CODE,"qr_code"],[kt.AZTEC,"aztec"],[kt.CODABAR,"codabar"],[kt.CODE_39,"code_39"],[kt.CODE_93,"code_93"],[kt.CODE_128,"code_128"],[kt.DATA_MATRIX,"data_matrix"],[kt.ITF,"itf"],[kt.EAN_13,"ean_13"],[kt.EAN_8,"ean_8"],[kt.PDF_417,"pdf417"],[kt.UPC_A,"upc_a"],[kt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return rie(this,void 0,void 0,function(){var r,n;return nie(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:KO.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,a=0,i=t;a<i.length;a++){var o=i[a],c=o.boundingBox.width*o.boundingBox.height;c>n&&(n=c,r=o)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),FA=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(f){try{u(n.next(f))}catch(p){o(p)}}function d(f){try{u(n.throw(f))}catch(p){o(p)}}function u(f){f.done?i(f.value):a(f.value).then(c,d)}u((n=n.apply(e,t||[])).next())})},UA=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(f){return d([u,f])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},sie=function(){function e(t,r,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&BA.isSupported()?(this.primaryDecoder=new BA(t,n,a),this.secondaryDecoder=new MA(t,n,a)):this.primaryDecoder=new MA(t,n,a)}return e.prototype.decodeAsync=function(t){return FA(this,void 0,void 0,function(){var r;return UA(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return FA(this,void 0,void 0,function(){var r,n;return UA(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var a=n[r];t+=a}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),A3=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e1=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(f){try{u(n.next(f))}catch(p){o(p)}}function d(f){try{u(n.throw(f))}catch(p){o(p)}}function u(f){f.done?i(f.value):a(f.value).then(c,d)}u((n=n.apply(e,t||[])).next())})},t1=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(f){return d([u,f])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},YO=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),aie=function(e){A3(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var a={advanced:[n]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(YO),iie=function(e){A3(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(aie),oie=function(e){A3(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(YO),lie=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new iie(this.track)},e.prototype.torchFeature=function(){return new oie(this.track)},e}(),cie=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,a){return e1(this,void 0,void 0,function(){var i,o;return t1(this,function(c){switch(c.label){case 0:return i=new e(t,r,a),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:c.sent(),c.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return e1(this,void 0,void 0,function(){return t1(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var a=t.mediaStream.getVideoTracks(),i=a.length,o=0;t.mediaStream.getVideoTracks().forEach(function(c){t.mediaStream.removeTrack(c),c.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new lie(this.getFirstTrackOrFail())},e}(),die=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return e1(this,void 0,void 0,function(){return t1(this,function(a){return[2,cie.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return e1(this,void 0,void 0,function(){var r,n;return t1(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=a.sent(),[2,new e(n)]}})})},e}(),$A=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(f){try{u(n.next(f))}catch(p){o(p)}}function d(f){try{u(n.throw(f))}catch(p){o(p)}}function u(f){f.done?i(f.value):a(f.value).then(c,d)}u((n=n.apply(e,t||[])).next())})},zA=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(f){return d([u,f])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},uie=function(){function e(){}return e.failIfNotSupported=function(){return $A(this,void 0,void 0,function(){return zA(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return $A(this,void 0,void 0,function(){return zA(this,function(r){return[2,die.create(t)]})})},e}(),hie=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(f){try{u(n.next(f))}catch(p){o(p)}}function d(f){try{u(n.throw(f))}catch(p){o(p)}}function u(f){f.done?i(f.value):a(f.value).then(c,d)}u((n=n.apply(e,t||[])).next())})},fie=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(f){return d([u,f])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},mie=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ou.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ou.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return hie(this,void 0,void 0,function(){var t,r,n,a,i,o,c;return fie(this,function(d){switch(d.label){case 0:return t=function(u){for(var f=u.getVideoTracks(),p=0,b=f;p<b.length;p++){var x=b[p];x.enabled=!1,x.stop(),u.removeTrack(x)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=d.sent(),a=[],i=0,o=n;i<o.length;i++)c=o[i],c.kind==="videoinput"&&a.push({id:c.deviceId,label:c.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(i){for(var o=[],c=0,d=i;c<d.length;c++){var u=d[c];u.kind==="video"&&o.push({id:u.id,label:u.label})}t(o)},a=MediaStreamTrack;a.getSources(n)})},e}(),Rn;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Rn||(Rn={}));var pie=function(){function e(){this.state=Rn.NOT_STARTED,this.onGoingTransactionNewState=Rn.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rn.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rn.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Rn.UNKNOWN:throw"Transition from unknown is not allowed";case Rn.NOT_STARTED:this.failIfNewStateIs(t,[Rn.PAUSED]);break;case Rn.SCANNING:break;case Rn.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,a=r;n<a.length;n++){var i=a[n];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),gie=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Rn.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Rn.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rn.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Rn.PAUSED},e}(),xie=function(){function e(){}return e.create=function(){return new gie(new pie)},e}(),yie=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ri=function(e){yie(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Zae),bie=function(){function e(t,r){this.logger=r,this.fps=ri.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ri.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?XO.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!bl(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),vie=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Qae(this.verbose),this.qrcode=new sie(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=xie.create()}return e.prototype.start=function(t,r,n,a){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;a?o=a:o=this.verbose?this.logger.log:function(){};var c=bie.create(r,this.logger);this.clearElement();var d=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=d,f=document.getElementById(this.elementId);f.clientWidth?f.clientWidth:ri.DEFAULT_WIDTH,f.style.position="relative",this.shouldScan=!0,this.element=f;var p=this,b=this.stateManagerProxy.startTransition(Rn.SCANNING);return new Promise(function(x,N){var j=u?c.videoConstraints:p.createVideoConstraints(t);if(!j){b.cancel(),N("videoConstraints should be defined");return}var w={};(!u||c.aspectRatio)&&(w.aspectRatio=c.aspectRatio);var C={onRenderSurfaceReady:function(P,k){p.setupUi(P,k,c),p.isScanning=!0,p.foreverScan(c,n,o)}};uie.failIfNotSupported().then(function(P){P.create(j).then(function(k){return k.render(i.element,w,C).then(function(_){p.renderedCamera=_,b.execute(),x(null)}).catch(function(_){b.cancel(),N(_)})}).catch(function(k){b.cancel(),N(Ou.errorGettingUserMedia(k))})}).catch(function(P){b.cancel(),N(Ou.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rn.PAUSED),this.showPausedState(),(bl(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Rn.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var i=document.getElementById(ri.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(bl(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var c=o.width,d=o.height,u=document.getElementById(n.elementId),f=u.clientWidth?u.clientWidth:ri.DEFAULT_WIDTH,p=Math.max(u.clientHeight?u.clientHeight:d,ri.FILE_SCAN_MIN_HEIGHT),b=n.computeCanvasDrawConfig(c,d,f,p);if(r){var x=n.createCanvasElement(f,p,"qr-canvas-visible");x.style.display="inline-block",u.appendChild(x);var N=x.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=f,N.canvas.height=p,N.drawImage(o,0,0,c,d,b.x,b.y,b.width,b.height)}var j=ri.FILE_SCAN_HIDDEN_CANVAS_PADDING,w=Math.max(o.width,b.width),C=Math.max(o.height,b.height),P=w+2*j,k=C+2*j,_=n.createCanvasElement(P,k);u.appendChild(_);var O=_.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=P,O.canvas.height=k,O.drawImage(o,0,0,c,d,j,j,w,C);try{n.qrcode.decodeRobustlyAsync(_).then(function($){a(LA.createFromQrcodeResult($))}).catch(i)}catch($){i("QR code parse error, error = ".concat($))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return mie.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!XO.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[kt.QR_CODE,kt.AZTEC,kt.CODABAR,kt.CODE_39,kt.CODE_93,kt.CODE_128,kt.DATA_MATRIX,kt.MAXICODE,kt.ITF,kt.EAN_13,kt.EAN_8,kt.PDF_417,kt.RSS_14,kt.RSS_EXPANDED,kt.UPC_A,kt.UPC_E,kt.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,i=t.formatsToSupport;a<i.length;a++){var o=i[a];Yae(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(bl(t))return!0;if(!bl(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(bl(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return bl(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var a=this,i=n.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,r,i),c=function(u){if(u<ri.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ri.MIN_QR_BOX_SIZE,"px.")},d=function(u){return u>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),u=t),u};c(o.width),c(o.height),o.width=d(o.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var a=bl(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(a);var i=this.toQrdimensions(t,r,a);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=r,c={x:0,y:0,width:t,height:r},d=o?this.getShadedRegionBounds(t,r,i):c,u=this.createCanvasElement(d.width,d.height),f={willReadFrequently:!0},p=u.getContext("2d",f);p.canvas.width=d.width,p.canvas.height=d.height,this.element.append(u),o&&this.possiblyInsertShadingElement(this.element,t,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=p,this.canvasElement=u},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Ou.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,LA.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var i=Ou.codeParseError(a);return r(i,Jae.createFrom(i)),!1})},e.prototype.foreverScan=function(t,r,n){var a=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,c=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*o,u=this.qrRegion.height*c,f=this.qrRegion.x*o,p=this.qrRegion.y*c;this.context.drawImage(i,f,p,d,u,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,n)},a.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(x){!x&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,n).finally(function(){b()})):b()}).catch(function(x){a.logger.logError("Error happend while scanning context",x),b()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",a={user:!0,environment:!0},i="exact",o=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},c=Object.keys(t);if(c.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(c.length," keys");var d=Object.keys(t)[0];if(d!==r&&d!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(d===r){var u=t.facingMode;if(typeof u=="string"){if(o(u))return{facingMode:u}}else if(typeof u=="object")if(i in u){if(o(u["".concat(i)]))return{facingMode:{exact:u["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var f=typeof u;throw"Invalid type of 'facingMode' = ".concat(f)}}else{var p=t.deviceId;if(typeof p=="string")return{deviceId:p};if(typeof p=="object"){if(i in p)return{deviceId:{exact:p["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var b=typeof p;throw"Invalid type of 'deviceId' = ".concat(b)}}}var x=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(x)},e.prototype.computeCanvasDrawConfig=function(t,r,n,a){if(t<=n&&r<=a){var i=(n-t)/2,o=(a-r)/2;return{x:i,y:o,width:t,height:r}}else{var c=t,d=r;return t>n&&(r=n/t*r,t=n),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(c,"X").concat(d)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?ri.BORDER_SHADER_MATCH_COLOR:ri.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var a=t,i=r,o=document.createElement("canvas");return o.style.width="".concat(a,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=bl(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,a){if(!(r-a.width<1||n-a.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(r-a.width)/2,c=(n-a.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(ri.SHADED_REGION_ELEMENT_ID),r-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var d=5,u=40;this.insertShaderBorders(i,u,d,-d,null,0,!0),this.insertShaderBorders(i,u,d,-d,null,0,!1),this.insertShaderBorders(i,u,d,null,-d,0,!0),this.insertShaderBorders(i,u,d,null,-d,0,!1),this.insertShaderBorders(i,d,u+d,-d,null,-d,!0),this.insertShaderBorders(i,d,u+d,null,-d,-d,!0),this.insertShaderBorders(i,d,u+d,-d,null,-d,!1),this.insertShaderBorders(i,d,u+d,null,-d,-d,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,r,n,a,i,o,c){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=ri.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(r,"px"),d.style.height="".concat(n,"px"),a!==null&&(d.style.top="".concat(a,"px")),i!==null&&(d.style.bottom="".concat(i,"px")),c?d.style.left="".concat(o,"px"):d.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),t.appendChild(d)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),WA;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(WA||(WA={}));const wie=()=>{const[e,t]=A.useState(!1),[r,n]=A.useState(null),[a,i]=A.useState(""),[o,c]=A.useState(!1),[d,u]=A.useState([]),[f,p]=A.useState(null),[b,x]=A.useState(0),[N,j]=A.useState(0),w=A.useRef(null),C="qr-reader",[P,k]=A.useState("scanner"),[_,O]=A.useState([]),[$,F]=A.useState([]),[U,R]=A.useState([]),[z,M]=A.useState(null),[W,J]=A.useState(!1),[K,V]=A.useState(!1),[me,se]=A.useState(null),[oe,ye]=A.useState(0),[we,te]=A.useState(0),[G,Q]=A.useState([]);A.useEffect(()=>()=>{w.current&&w.current.stop().catch(console.error)},[]);const le=async()=>{var ae,Fe,ot,at,qe,pt,Ue,jt,vt,Gt,Kt,_t,mr,Ht;try{i(""),t(!0);const lt=window.isSecureContext||window.location.protocol==="https:"||window.location.hostname==="localhost",Ce=window.location.href;if(console.log(" Camera Security Check:",{isSecureContext:lt,protocol:window.location.protocol,hostname:window.location.hostname,url:Ce,mediaDevices:!!navigator.mediaDevices,getUserMedia:!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}),!lt&&window.location.protocol==="http:"){const et=Ce.replace("http://","https://");throw new Error(` Camera requires HTTPS. Redirecting to: ${et}`)}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera API not available. Your browser or connection does not support camera access. Please use HTTPS (https://qgocargo.cloud) and a modern browser like Chrome.");const Be=new vie(C);w.current=Be,console.log(" Requesting camera access...");try{const et=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});console.log(" Camera access granted:",et.getVideoTracks()),et.getTracks().forEach(Xe=>Xe.stop())}catch(et){throw console.error(" getUserMedia failed:",et),et}console.log(" Starting html5-qrcode scanner..."),await Be.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},xe,()=>{}),console.log(" Scanner started successfully")}catch(lt){console.error(" Camera error:",lt),console.error("Error details:",{name:lt.name,message:lt.message,stack:lt.stack,code:lt.code,type:typeof lt,stringified:JSON.stringify(lt,null,2)});let Ce=" Camera access failed",Be="Try reloading the page";if((ae=lt.message)!=null&&ae.includes("HTTPS")||(Fe=lt.message)!=null&&Fe.includes("https://")||(ot=lt.message)!=null&&ot.includes("Redirecting"))Ce=" Camera requires HTTPS",Be=`Current URL: ${window.location.href}

 Use HTTPS: https://qgocargo.cloud

Camera access only works on secure connections (HTTPS).`;else if(lt.name==="NotAllowedError"||(at=lt.message)!=null&&at.includes("Permission denied")||(qe=lt.message)!=null&&qe.includes("permission"))Ce=" Camera permission denied",Be=`Please allow camera access:

 Mobile: Tap the lock/info icon in address bar  Permissions  Camera  Allow

 Desktop: Settings  Privacy  Camera  Allow for this site

Then refresh the page.`;else if(lt.name==="NotFoundError"||(pt=lt.message)!=null&&pt.includes("not found")||(Ue=lt.message)!=null&&Ue.includes("No camera"))Ce=" No camera detected",Be="Make sure your device has a working camera and it's not disabled in system settings.";else if(lt.name==="NotReadableError"||lt.name==="TrackStartError"||(jt=lt.message)!=null&&jt.includes("in use")||(vt=lt.message)!=null&&vt.includes("being used"))Ce=" Camera is busy",Be="Close other apps using the camera (WhatsApp, Zoom, Skype, etc.) and try again.";else if(lt.name==="OverconstrainedError"||(Gt=lt.message)!=null&&Gt.includes("constraint"))Ce=" Camera settings not supported",Be="Your camera doesn't support the required settings. Try using a different device or browser.";else if(lt.name==="NotSupportedError"||lt.name==="TypeError"||(Kt=lt.message)!=null&&Kt.includes("not available")||(_t=lt.message)!=null&&_t.includes("not supported"))Ce=" Camera API not supported",Be=`Your browser doesn't support camera access.

 Recommended:
- Chrome (Desktop/Mobile)
- Safari (iPhone/iPad)
- Edge (Desktop)

 Make sure you're using: https://qgocargo.cloud`;else if((mr=lt.message)!=null&&mr.includes("insecure context")||(Ht=lt.message)!=null&&Ht.includes("secure origin"))Ce=" Insecure connection",Be=`Camera requires HTTPS.

 Use: https://qgocargo.cloud
 Don't use: http://qgocargo.cloud`;else{const et=lt.message||lt.name||"Unknown error";Ce=` Camera error: ${lt.name||"Unknown"}`,Be=`Error: ${et}

Troubleshooting:
1. Make sure you're using HTTPS: https://qgocargo.cloud
2. Allow camera permissions when prompted
3. Try Chrome browser on mobile
4. Check if camera works in other apps
5. Reload the page and try again`}i(`${Ce}

 Solution:
${Be}`),t(!1)}},ve=async()=>{if(w.current)try{await w.current.stop(),w.current=null,t(!1)}catch(ae){console.error("Scanner stop error:",ae)}},xe=async ae=>{await ve(),c(!0);try{const Fe=await ke(ae);n(Fe),u(ot=>[Fe,...ot.slice(0,9)])}catch(Fe){i(Fe.message||"Failed to process scan")}finally{c(!1)}},ke=async ae=>{var at,qe,pt;if(ae.toUpperCase().includes("RACK")||ae.match(/^R-[A-Z]-\d+$/i)){const jt=(at=(await Bi.getAll({search:ae})).racks)==null?void 0:at.find(vt=>vt.code.toUpperCase()===ae.toUpperCase());if(jt)return{type:"rack",data:jt,rawCode:ae}}if(ae.includes("-BOX-")){const Ue=ae.split("-BOX-")[0],vt=(qe=(await Rc.getAll({search:Ue})).shipments)==null?void 0:qe.find(Gt=>Gt.qrCode&&Ue.includes(Gt.qrCode));if(vt){const _t=(await(await fetch(`/api/shipments/${vt.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(mr=>!mr.rackId).length;return j(_t),{type:"shipment",data:{...vt,remainingBoxes:_t},rawCode:ae}}}const ot=(pt=(await Rc.getAll({search:ae})).shipments)==null?void 0:pt.find(Ue=>Ue.referenceId.toUpperCase()===ae.toUpperCase());if(ot){const vt=(await(await fetch(`/api/shipments/${ot.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(Gt=>!Gt.rackId).length;return j(vt),{type:"shipment",data:{...ot,remainingBoxes:vt},rawCode:ae}}return{type:"unknown",data:null,rawCode:ae}},Re=async()=>{if(!(!f||!r||r.type!=="rack")){if(!b||b<=0){i("Please enter how many boxes to assign");return}if(b>N){i(`Only ${N} boxes remaining!`);return}try{c(!0);const at=(await(await fetch(`/api/shipments/${f.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(qe=>!qe.rackId).slice(0,b).map(qe=>qe.boxNumber);await fetch(`/api/shipments/${f.id}/assign-boxes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({rackId:r.data.id,boxNumbers:at})}),b===N&&await fetch(`/api/shipments/${f.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({status:"IN_STORAGE"})}),alert(` ${b} boxes assigned to ${r.data.code}!
 Rack capacity updated. Check Racks page for current status.`),p(null),n(null),x(0),j(0)}catch(ae){i(ae.message||"Failed to assign")}finally{c(!1)}}},be=()=>{n(null),i(""),p(null)},Te=async()=>{try{c(!0),console.log("Loading pending shipments...");const ae=localStorage.getItem("authToken"),Fe=await fetch("/api/shipments",{headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(Fe.ok){const ot=await Fe.json();console.log("Loaded shipments:",ot);const at=ot.shipments||ot||[],pt=(await Promise.all(at.filter(Ue=>Ue.status==="PENDING"||Ue.status==="PARTIAL").map(async Ue=>{try{const vt=await(await fetch(`/api/shipments/${Ue.id}/boxes`,{headers:{Authorization:`Bearer ${ae}`}})).json(),Gt=vt.boxes.filter(_t=>!_t.rackId).length,Kt=vt.boxes.length;return Gt>0?{...Ue,remainingBoxes:Gt,totalBoxes:Kt}:null}catch{return Ue}}))).filter(Ue=>Ue!==null);console.log("Shipments with unassigned boxes (PENDING + PARTIAL):",pt),O(pt),F(pt)}else console.error("Failed to load shipments:",Fe.status),i(`Failed to load shipments: ${Fe.status}`)}catch(ae){console.error("Error loading shipments:",ae),i("Failed to load shipments")}finally{c(!1)}},Ve=async(ae,Fe)=>{try{c(!0);const qe=(await(await fetch(`/api/shipments/${ae.id}/boxes`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json()).boxes.filter(vt=>!vt.rackId).length,pt=ae.boxesPerPallet||0,Ue=pt>0?Math.floor(qe/pt):0,jt=pt>0?qe%pt:qe;M({...ae,remainingBoxes:qe,totalPallets:Ue,looseBoxes:jt,boxesPerPallet:pt}),se(Fe),ye(Ue),te(jt),J(!1),V(!0)}catch{i("Failed to load rack/shipment details")}finally{c(!1)}},Oe=async ae=>{console.log(" Choose Rack clicked for shipment:",ae),console.log(" Current racks:",U),M(ae),J(!0),console.log(" Rack selection enabled")},Ye=async()=>{try{console.log("Loading racks...");const ae=localStorage.getItem("authToken"),Fe=await fetch("/api/racks",{headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(Fe.ok){const ot=await Fe.json();console.log("Loaded racks response:",ot);const at=ot.racks||ot||[];console.log("Racks array:",at),R(Array.isArray(at)?at:[])}else console.error("Failed to load racks:",Fe.status),R([])}catch(ae){console.error("Error loading racks:",ae),R([])}},Se=async()=>{if(!(!z||!me))try{c(!0);const ae=localStorage.getItem("authToken"),Fe=z.boxesPerPallet||0,ot=oe*Fe+we;console.log(" Assigning:",{pallets:oe,looseBoxes:we,totalBoxes:ot,rack:me.code,shipment:z.referenceId,photos:G.length});let at=[];if(G.length>0){for(const pt of G){const Ue=new FormData;Ue.append("photo",pt);const jt=await fetch("/api/shipments/upload/photo",{method:"POST",headers:{Authorization:`Bearer ${ae}`},body:Ue});if(jt.ok){const vt=await jt.json();at.push(vt.photoUrl)}}console.log(" Uploaded photos:",at)}const qe=await fetch(`/api/shipments/${z.id}/assign-rack`,{method:"POST",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"},body:JSON.stringify({rackId:me.id,quantity:ot,pallets:oe,looseBoxes:we,photos:at})});if(qe.ok)alert(` Successfully assigned ${oe} pallets + ${we} boxes to ${me.code}${at.length>0?` with ${at.length} photos`:""}`),V(!1),ye(0),te(0),Q([]),Te(),Ye();else{const pt=await qe.json();i(pt.message||"Failed to assign boxes to rack")}}catch(ae){i(ae.message||"Failed to assign boxes to rack")}finally{c(!1)}};return A.useEffect(()=>{P==="list"&&(Te(),Ye())},[P]),s.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:" Warehouse Scanner"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"  |    "})]}),s.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-2 shadow-md border-2 border-gray-200",children:[s.jsxs("button",{onClick:()=>k("scanner"),className:`flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all ${P==="scanner"?"bg-primary-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" QR Scanner",s.jsx("br",{}),s.jsx("span",{className:"text-sm font-normal",children:" QR | "})]}),s.jsxs("button",{onClick:()=>k("list"),className:`flex-1 py-4 px-6 rounded-lg font-bold text-lg transition-all ${P==="list"?"bg-primary-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[" Pending List + Racks",s.jsx("br",{}),s.jsx("span",{className:"text-sm font-normal",children:"  |  "})]})]}),a&&s.jsxs("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-6 py-4 rounded-xl flex items-center gap-3",children:[s.jsx(xo,{className:"h-6 w-6 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:a}),s.jsx("button",{onClick:()=>i(""),className:"text-red-500 hover:text-red-700 text-xl",children:""})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2",children:[P==="scanner"&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-gray-200 overflow-hidden",children:[e&&s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-primary-600 mb-2",children:" Scanning..."}),s.jsx("p",{className:"text-gray-600",children:"     "})]}),s.jsx("div",{id:C,className:"mx-auto"}),s.jsx("button",{onClick:ve,className:"w-full py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold",children:"Stop Camera /  "})]}),!e&&!r&&!o&&s.jsxs("div",{className:"p-12 text-center space-y-6",children:[window.location.protocol==="http:"&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("p",{className:"text-red-900 font-bold text-lg",children:" Camera Requires HTTPS"})]}),s.jsx("p",{className:"text-red-700 mb-3",children:"Camera access only works on secure connections."}),s.jsx("button",{onClick:()=>{const ae=window.location.href.replace("http://","https://");window.location.href=ae},className:"px-6 py-3 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors",children:" Switch to HTTPS Now"})]}),s.jsx("div",{className:"mx-auto w-64 h-64 border-4 border-dashed border-primary-300 rounded-3xl flex items-center justify-center bg-gradient-to-br from-primary-50 to-blue-50",children:s.jsx(Mi,{className:"h-32 w-32 text-primary-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ready to Scan"}),s.jsx("p",{className:"text-gray-600 text-lg",children:" "}),window.location.protocol==="https:"&&s.jsx("p",{className:"text-green-600 text-sm mt-2",children:" Secure Connection (HTTPS)"})]}),s.jsxs("button",{onClick:le,className:"inline-flex items-center gap-3 px-10 py-5 bg-primary-600 text-white text-xl font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-105",children:[s.jsx(ng,{className:"h-7 w-7"}),"Start Camera"]})]}),o&&s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Processing scan..."})]}),r&&!o&&s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Gn,{className:"h-12 w-12 text-green-600"})}),s.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-1",children:"Scan Successful! "}),s.jsx("p",{className:"text-gray-600 font-mono text-lg",children:r.rawCode})]}),r.type==="rack"&&s.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Wo,{className:"h-8 w-8 text-blue-600"}),s.jsx("h4",{className:"text-xl font-bold text-blue-900",children:"Rack Information"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Code:"}),s.jsx("p",{className:"font-bold",children:r.data.code})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Location:"}),s.jsx("p",{className:"font-bold",children:r.data.location})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Section:"}),s.jsx("p",{className:"font-bold",children:r.data.section})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Capacity:"}),s.jsxs("p",{className:"font-bold",children:[r.data.capacityUsed||0," / ",r.data.capacityTotal||0]})]})]}),f&&s.jsxs("div",{className:"mt-6 pt-6 border-t-2 border-blue-300",children:[s.jsxs("p",{className:"text-blue-900 font-semibold mb-4",children:[' Assign "',f.referenceId,'" to this rack?']}),s.jsxs("div",{className:"mb-4 bg-white p-4 rounded-lg border-2 border-blue-300",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"How Many Boxes to Assign? "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",min:"1",max:N,value:b||"",onChange:ae=>x(parseInt(ae.target.value)||0),placeholder:`Max: ${N} boxes`,className:"flex-1 px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{onClick:()=>x(N),className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold whitespace-nowrap",children:" All"})]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:[" Remaining: ",N,' boxes | Enter quantity or click "All" button']})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:Re,disabled:o||!b,className:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-bold text-lg",children:" Confirm Assignment"}),s.jsx("button",{onClick:()=>{p(null),x(0),j(0)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-bold",children:"Cancel"})]})]})]}),r.type==="shipment"&&s.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(zu,{className:"h-8 w-8 text-purple-600"}),s.jsx("h4",{className:"text-xl font-bold text-purple-900",children:"Shipment Information"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Reference:"}),s.jsx("p",{className:"font-bold",children:r.data.referenceId})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Client:"}),s.jsx("p",{className:"font-bold",children:r.data.clientName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Boxes:"}),s.jsx("p",{className:"font-bold",children:r.data.currentBoxCount})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Remaining:"}),s.jsxs("p",{className:"font-bold text-blue-600",children:[r.data.remainingBoxes||0," "]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Status:"}),s.jsx("p",{className:"font-bold",children:r.data.status})]})]}),(r.data.status==="PENDING"||r.data.remainingBoxes>0)&&s.jsx("div",{className:"mt-6 pt-6 border-t-2 border-purple-300",children:s.jsxs("button",{onClick:()=>{p(r.data),x(r.data.remainingBoxes||0),n(null),le()},className:"w-full py-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-bold text-lg",children:[" Scan Rack to Assign (",r.data.remainingBoxes," boxes left)"]})})]}),r.type==="unknown"&&s.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6 text-center",children:[s.jsx(xo,{className:"h-12 w-12 text-yellow-600 mx-auto mb-3"}),s.jsx("p",{className:"text-yellow-900 font-semibold text-lg",children:"QR code not found in system"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{onClick:be,className:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold",children:"Clear"}),s.jsxs("button",{onClick:()=>{n(null),le()},className:"flex-1 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold flex items-center justify-center gap-2",children:[s.jsx(r0,{className:"h-5 w-5"}),"Scan Again"]})]})]})]}),!1,P==="list"&&s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-gray-200",children:[s.jsxs("div",{className:"p-6 border-b-2 border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" Pending Shipments"}),s.jsx("p",{className:"text-gray-600",children:"   "})]}),o?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Loading shipments..."})]}):$.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(zu,{className:"h-24 w-24 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 text-xl font-semibold",children:"No Pending Shipments"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"    "}),s.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"Create a new shipment from Dashboard to see it here"})]}):s.jsx("div",{className:"divide-y-2 divide-gray-200",children:$.map(ae=>s.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl font-bold text-primary-600",children:ae.referenceId}),s.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${ae.status==="PARTIAL"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:ae.status==="PARTIAL"?" PARTIAL":" PENDING"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Client:"}),s.jsx("p",{className:"font-semibold text-gray-900",children:ae.clientName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Boxes:"}),s.jsxs("p",{className:"font-semibold text-gray-900",children:[ae.remainingBoxes||0," / ",ae.totalBoxes||ae.currentBoxCount||0," ",ae.status==="PARTIAL"&&s.jsxs("span",{className:"text-sm text-orange-600 ml-2",children:["(",ae.remainingBoxes," remaining)"]})]})]})]}),ae.notes&&s.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",ae.notes]})]}),s.jsxs("button",{onClick:()=>Oe(ae),className:"px-8 py-4 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg hover:shadow-xl text-lg whitespace-nowrap",children:[" Choose Rack",s.jsx("br",{}),s.jsx("span",{className:"text-sm font-normal",children:" "})]})]}),W&&(z==null?void 0:z.id)===ae.id&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-300 rounded-xl",children:[s.jsx("h4",{className:"text-lg font-bold text-blue-900 mb-3",children:" Select Rack |  "}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:U&&U.length>0?U.map(Fe=>s.jsxs("button",{onClick:()=>Ve(ae,Fe),disabled:Fe.status==="FULL",className:`
                                  p-3 rounded-lg font-bold text-xs transition-all text-left
                                  ${Fe.status==="AVAILABLE"?"bg-green-500 hover:bg-green-600 text-white":Fe.status==="FULL"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-600 text-white"}
                                `,children:[s.jsx("div",{className:"font-bold text-sm",children:Fe.code}),s.jsxs("div",{className:"text-xs opacity-90 mt-1",children:[" ",Fe.capacityUsed||0,"/",Fe.capacityTotal||0]})]},Fe.id)):s.jsx("p",{className:"col-span-full text-gray-500 text-center py-4",children:"No racks available"})}),s.jsx("button",{onClick:()=>J(!1),className:"mt-3 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel | "})]})]},ae.id))}),s.jsx("div",{className:"p-6 bg-gray-50 border-t-2 border-gray-200 text-center",children:s.jsx("button",{onClick:Te,disabled:o,className:"px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 disabled:bg-gray-300 transition-colors",children:" Refresh List |  "})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Ad,{className:"h-5 w-5"}),"Recent Scans"]}),s.jsx("div",{className:"space-y-2",children:d.length===0?s.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No scans yet"}):d.map((ae,Fe)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[ae.type==="rack"?s.jsx(Wo,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}):ae.type==="shipment"?s.jsx(zu,{className:"h-5 w-5 text-purple-500 flex-shrink-0"}):s.jsx(Mi,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),s.jsx("span",{className:"font-mono text-sm flex-1 truncate",children:ae.rawCode})]},Fe))})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:" Tips"}),s.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[s.jsx("li",{children:" Scan shipment first"}),s.jsx("li",{children:" Then scan rack to assign"}),s.jsx("li",{children:" Keep QR code steady"}),s.jsx("li",{children:" Good lighting helps"})]})]})]})]}),K&&z&&me&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-5",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Gn,{className:"h-8 w-8"}),s.jsx("h2",{className:"text-2xl font-bold",children:"Scan Successful! "})]}),s.jsx("p",{className:"text-lg font-semibold",children:me.code})]}),s.jsxs("div",{className:"p-6 bg-blue-50 border-b-2 border-blue-200",children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-4 flex items-center gap-2",children:" Rack Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Code:"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:me.code})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Location:"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:me.location||"Section B, Row 2"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Section:"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:me.section||"-"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Capacity:"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[me.capacityUsed||0," / ",me.capacityTotal||100]})]})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-purple-900 mb-2 flex items-center gap-2",children:[' Assign "',z.referenceId,'" to this rack?']}),s.jsxs("p",{className:"text-gray-600",children:["Client: ",s.jsx("strong",{children:z.clientName})]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 mb-6",children:[s.jsx("h4",{className:"text-lg font-bold text-purple-900 mb-4",children:" How Many to Assign?"}),s.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4 border-2 border-purple-300",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Available for assignment:"}),s.jsxs("div",{className:"flex items-center gap-6 text-lg",children:[z.totalPallets>0&&s.jsxs("div",{children:[s.jsxs("span",{className:"font-bold text-purple-700",children:[z.totalPallets," Pallets"]}),s.jsxs("span",{className:"text-gray-500 text-sm ml-2",children:["(",z.boxesPerPallet," boxes each)"]})]}),s.jsx("div",{children:s.jsxs("span",{className:"font-bold text-blue-700",children:[z.looseBoxes," Loose Boxes"]})})]})]}),z.totalPallets>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:" Pallets to Assign:"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>ye(Math.max(0,oe-1)),className:"w-12 h-12 bg-red-500 text-white rounded-lg font-bold text-xl hover:bg-red-600",children:""}),s.jsx("input",{type:"number",min:"0",max:z.totalPallets,value:oe,onChange:ae=>ye(Math.min(z.totalPallets,Math.max(0,parseInt(ae.target.value)||0))),className:"flex-1 text-center text-2xl font-bold border-2 border-purple-300 rounded-lg px-4 py-3"}),s.jsx("button",{onClick:()=>ye(Math.min(z.totalPallets,oe+1)),className:"w-12 h-12 bg-green-500 text-white rounded-lg font-bold text-xl hover:bg-green-600",children:"+"}),s.jsx("button",{onClick:()=>ye(z.totalPallets),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700",children:" All"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[" Max: ",z.totalPallets," pallets | Remaining: ",z.totalPallets-oe," pallets"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:" Loose Boxes to Assign:"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>te(Math.max(0,we-1)),className:"w-12 h-12 bg-red-500 text-white rounded-lg font-bold text-xl hover:bg-red-600",children:""}),s.jsx("input",{type:"number",min:"0",max:z.looseBoxes,value:we,onChange:ae=>te(Math.min(z.looseBoxes,Math.max(0,parseInt(ae.target.value)||0))),className:"flex-1 text-center text-2xl font-bold border-2 border-blue-300 rounded-lg px-4 py-3"}),s.jsx("button",{onClick:()=>te(Math.min(z.looseBoxes,we+1)),className:"w-12 h-12 bg-green-500 text-white rounded-lg font-bold text-xl hover:bg-green-600",children:"+"}),s.jsx("button",{onClick:()=>te(z.looseBoxes),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700",children:" All"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[" Max: ",z.looseBoxes," boxes | Remaining: ",z.looseBoxes-we," boxes"]})]}),s.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 rounded-lg p-4 border-2 border-green-400",children:[s.jsx("p",{className:"text-gray-700 font-semibold mb-2",children:"Total to assign:"}),s.jsxs("div",{className:"flex items-center gap-4 text-xl font-bold",children:[oe>0&&s.jsxs("span",{className:"text-purple-700",children:[oe," Pallet",oe>1?"s":"",s.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",oe*(z.boxesPerPallet||0)," boxes)"]})]}),we>0&&s.jsxs("span",{className:"text-blue-700",children:["+ ",we," Box",we>1?"es":""]})]}),s.jsxs("p",{className:"text-lg font-bold text-green-700 mt-2",children:["= ",oe*(z.boxesPerPallet||0)+we," Total Boxes"]})]}),s.jsxs("div",{className:"bg-purple-50 rounded-xl p-6 border-2 border-purple-300",children:[s.jsx("h4",{className:"text-lg font-bold text-purple-900 mb-3 flex items-center gap-2",children:" Upload Photos (Optional - Max 10)"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Take photos of pallets/boxes for reference"}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:ae=>{const Fe=Array.from(ae.target.files||[]);if(Fe.length+G.length>10){alert("Maximum 10 photos allowed");return}Q([...G,...Fe])},className:"hidden",id:"photo-upload"}),s.jsxs("label",{htmlFor:"photo-upload",className:"block w-full px-6 py-4 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-700 cursor-pointer text-center transition-all",children:[" Take/Select Photos (",G.length,"/10)"]}),G.length>0&&s.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2",children:G.map((ae,Fe)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(ae),alt:`Photo ${Fe+1}`,className:"w-full h-24 object-cover rounded-lg border-2 border-purple-300"}),s.jsx("button",{onClick:()=>Q(G.filter((ot,at)=>at!==Fe)),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},Fe))})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>{V(!1),ye(0),te(0)},className:"flex-1 px-6 py-4 bg-gray-500 text-white font-bold rounded-xl hover:bg-gray-600 transition-all text-lg",children:"Cancel"}),s.jsx("button",{onClick:Se,disabled:o||oe===0&&we===0,className:"flex-1 px-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white font-bold rounded-xl hover:from-green-700 hover:to-emerald-700 disabled:from-gray-300 disabled:to-gray-400 transition-all text-lg shadow-lg",children:" Confirm Assignment"})]})]})]})})]})},Nie=()=>{const[e,t]=A.useState(""),[r,n]=A.useState(""),[a,i]=A.useState(!1),[o,c]=A.useState(!1),[d,u]=A.useState(""),[f,p]=A.useState(!1),[b,x]=A.useState({primaryColor:"#4F46E5",secondaryColor:"#7C3AED",showCompanyName:!0,logoSize:"medium"});A.useEffect(()=>{(async()=>{try{const w=await fetch("/api/company/branding");if(w.ok){const C=await w.json();console.log(" Loaded branding:",C.branding),x({name:C.branding.name,logo:C.branding.logoUrl||C.branding.logo,primaryColor:C.branding.primaryColor,secondaryColor:C.branding.secondaryColor,showCompanyName:C.branding.showCompanyName,logoSize:C.branding.logoSize||"medium"})}else console.log(" Failed to load branding, using defaults")}catch(w){console.log(" Error loading branding, using defaults:",w)}})()},[]);const N=async j=>{j.preventDefault(),c(!0),u("");try{const w=await one.login(e,r);console.log(" Login successful:",w.user),console.log(" Token saved:",w.token?"Yes":"No"),console.log(" User saved:",localStorage.getItem("user")?"Yes":"No"),console.log(" Auth token:",localStorage.getItem("authToken")?"Yes":"No"),await new Promise(C=>setTimeout(C,100)),console.log(" Navigating to dashboard..."),window.location.href="/dashboard"}catch(w){u(w.message||"Invalid email or password"),console.error(" Login error:",w),c(!1)}};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden transition-colors duration-500",style:{background:`linear-gradient(135deg, ${b.primaryColor}15 0%, ${b.secondaryColor}15 100%)`},children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-0 -left-4 w-72 h-72 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob",style:{backgroundColor:`${b.primaryColor}30`}}),s.jsx("div",{className:"absolute top-0 -right-4 w-72 h-72 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000",style:{backgroundColor:`${b.secondaryColor}30`}}),s.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000",style:{backgroundColor:`${b.primaryColor}20`}})]}),s.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[s.jsxs("div",{className:"text-center animate-fade-in-down",children:[b.logo?s.jsx("div",{className:`mx-auto mb-4 flex items-center justify-center ${b.logoSize==="small"?"h-12":b.logoSize==="large"?"h-32":"h-20"}`,children:s.jsx("img",{src:b.logo,alt:"Company Logo",className:`object-contain ${b.logoSize==="small"?"max-h-12":b.logoSize==="large"?"max-h-32":"max-h-20"}`})}):s.jsx("div",{className:"mx-auto h-16 w-16 rounded-xl flex items-center justify-center mb-4 shadow-lg transition-all duration-300",style:{background:`linear-gradient(135deg, ${b.primaryColor} 0%, ${b.secondaryColor} 100%)`},children:s.jsx("svg",{className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:b.showCompanyName&&b.name?b.name:"Warehouse Management"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6 bg-white/80 backdrop-blur-xl p-8 rounded-2xl shadow-2xl border border-white/20 animate-fade-in-up",onSubmit:N,children:[d&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg animate-shake",children:d}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(S1,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:j=>t(j.target.value),className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(OF,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:j=>n(j.target.value),className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:""}),s.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:f?s.jsx(AF,{className:"h-5 w-5"}):s.jsx(E0,{className:"h-5 w-5"})})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:a,onChange:j=>i(j.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),s.jsx("div",{className:"text-sm",children:s.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot password?"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl hover:scale-[1.02] active:scale-[0.98]",style:{background:o?`linear-gradient(135deg, ${b.primaryColor} 0%, ${b.secondaryColor} 100%)`:`linear-gradient(135deg, ${b.primaryColor} 0%, ${b.secondaryColor} 100%)`,opacity:o?.7:1},children:o?"Signing in...":"Sign in"})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",s.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Contact your administrator"})]})})]}),s.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("p",{className:"text-sm font-bold text-blue-900",children:" Demo Login Credentials"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"bg-white rounded-md p-3 border border-blue-100",children:[s.jsx("p",{className:"text-xs font-semibold text-blue-800 mb-1",children:" Admin Account"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Email:"})," admin@demo.com"]}),s.jsxs("p",{className:"text-xs text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Password:"})," demo123"]})]}),s.jsx("button",{type:"button",onClick:()=>{t("admin@demo.com"),n("demo123")},className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Use"})]})]}),s.jsxs("div",{className:"bg-white rounded-md p-3 border border-blue-100",children:[s.jsx("p",{className:"text-xs font-semibold text-blue-800 mb-1",children:" Manager Account"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Email:"})," manager@demo.com"]}),s.jsxs("p",{className:"text-xs text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Password:"})," demo123"]})]}),s.jsx("button",{type:"button",onClick:()=>{t("manager@demo.com"),n("demo123")},className:"px-3 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Use"})]})]})]}),s.jsx("p",{className:"text-xs text-blue-600 italic text-center",children:'Click "Use" to auto-fill credentials'})]})]})]})},jie=()=>{const e=S0(),[t,r]=A.useState([]),[n,a]=A.useState(!0),[i,o]=A.useState(""),[c,d]=A.useState("all"),[u,f]=A.useState("all"),[p,b]=A.useState({total:0,totalAmount:0,paid:0,outstanding:0});A.useEffect(()=>{x()},[c,u,i]);const x=async()=>{try{a(!0);const w={};c!=="all"&&(w.status=c.toUpperCase()),u==="regular"?w.isWarehouseInvoice=!1:u==="warehouse"&&(w.isWarehouseInvoice=!0),i&&(w.search=i);const C=await zo.getInvoices(w),P=Array.isArray(C)?C:C.invoices||[];r(P),N(P)}catch(w){console.error("Load invoices error:",w)}finally{a(!1)}},N=w=>{const C=w.length,P=w.reduce((O,$)=>O+parseFloat($.totalAmount||0),0),k=w.filter(O=>(O.paymentStatus||O.status)==="PAID").length,_=w.filter(O=>(O.paymentStatus||O.status)!=="PAID").reduce((O,$)=>O+parseFloat($.totalAmount||0)-parseFloat($.paidAmount||0),0);b({total:C,totalAmount:P,paid:k,outstanding:_})},j=w=>{const C={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",PAID:"bg-green-100 text-green-800 border-green-300",PARTIAL:"bg-blue-100 text-blue-800 border-blue-300",OVERDUE:"bg-red-100 text-red-800 border-red-300",CANCELLED:"bg-gray-100 text-gray-800 border-gray-300"},P={PENDING:s.jsx(Ad,{className:"h-4 w-4"}),PAID:s.jsx(Gn,{className:"h-4 w-4"}),PARTIAL:s.jsx(Uo,{className:"h-4 w-4"}),OVERDUE:s.jsx(xo,{className:"h-4 w-4"}),CANCELLED:s.jsx(xo,{className:"h-4 w-4"})};return s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold border ${C[w]||C.PENDING}`,children:[P[w],w]})};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Invoices"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage billing and payment tracking"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Invoices"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.total})]}),s.jsx(Oa,{className:"h-10 w-10 text-blue-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:p.totalAmount.toFixed(3)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"KWD"})]}),s.jsx(Uo,{className:"h-10 w-10 text-green-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Paid"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:p.paid}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Invoices"})]}),s.jsx(Gn,{className:"h-10 w-10 text-green-500"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Outstanding"}),s.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:p.outstanding.toFixed(3)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"KWD"})]}),s.jsx(Ad,{className:"h-10 w-10 text-red-500"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(E1,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search by invoice number, client name...",value:i,onChange:w=>o(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a0,{className:"h-5 w-5 text-gray-400"}),s.jsxs("select",{value:c,onChange:w=>d(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"partial",children:"Partial"}),s.jsx("option",{value:"overdue",children:"Overdue"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J7,{className:"h-5 w-5 text-gray-400"}),s.jsxs("select",{value:u,onChange:w=>f(w.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"regular",children:"Regular Invoices"}),s.jsx("option",{value:"warehouse",children:"Warehouse Invoices"})]})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shipment"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Loading invoices..."})]})}):t.length>0?t.map(w=>{var P;const C=parseFloat(w.totalAmount)-parseFloat(w.paidAmount||0);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Oa,{className:"h-5 w-5 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-primary-600",children:w.invoiceNumber})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(w.invoiceDate).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.clientName}),s.jsx("div",{className:"text-xs text-gray-500",children:w.clientPhone})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:((P=w.shipment)==null?void 0:P.referenceId)||"N/A"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:[parseFloat(w.totalAmount).toFixed(3)," KWD"]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:[parseFloat(w.paidAmount||0).toFixed(3)," KWD"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold",children:s.jsxs("span",{className:C>0?"text-red-600":"text-green-600",children:[C.toFixed(3)," KWD"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j(w.paymentStatus||w.status)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{onClick:()=>e(`/invoices/${w.id}`),className:"text-primary-600 hover:text-primary-900",children:"View Details "})})]},w.id)}):s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:"No invoices found"})})})]})})})]})},Cie=({isOpen:e,onClose:t,invoice:r,onSuccess:n})=>{const a=parseFloat(r.totalAmount)-parseFloat(r.paidAmount||0),[i,o]=A.useState({amount:a.toFixed(3),paymentMethod:"CASH",transactionReference:"",receiptNumber:"",paymentDate:new Date().toISOString().split("T")[0],notes:""}),[c,d]=A.useState(!1),[u,f]=A.useState(""),p=async x=>{x.preventDefault();const N=parseFloat(i.amount);if(isNaN(N)||N<=0){f("Please enter a valid amount");return}if(N>a){f(`Amount cannot exceed balance due (${a.toFixed(3)} KWD)`);return}try{d(!0),f(""),await zo.recordPayment(r.id,{...i,amount:parseFloat(i.amount)});const j=parseFloat(i.amount),w=a-j;alert(` PAYMENT RECORDED!

 Amount: ${j.toFixed(3)} KWD
 Method: ${i.paymentMethod}
 Invoice: ${r.invoiceNumber}

${w<=0?" Invoice FULLY PAID!":` Remaining Balance: ${w.toFixed(3)} KWD`}`),n(),t()}catch(j){f(j.message||"Failed to record payment")}finally{d(!1)}},b=a-parseFloat(i.amount||"0");return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Record Payment"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Invoice: ",r.invoiceNumber]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 bg-blue-50 border-b",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance Due"}),s.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[a.toFixed(3)," KWD"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"New Balance (After Payment)"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[b>=0?b.toFixed(3):"0.000"," KWD"]})]})]})}),s.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[u&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Amount ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.001",value:i.amount,onChange:x=>o({...i,amount:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.000",required:!0,max:a,min:"0.001"}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"KWD"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",a.toFixed(3)," KWD"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Method ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:i.paymentMethod,onChange:x=>o({...i,paymentMethod:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"CASH",children:"Cash"}),s.jsx("option",{value:"CARD",children:"Card"}),s.jsx("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),s.jsx("option",{value:"CHEQUE",children:"Cheque"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Reference"}),s.jsx("input",{type:"text",value:i.transactionReference,onChange:x=>o({...i,transactionReference:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Bank ref, card last 4 digits, etc."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Number"}),s.jsx("input",{type:"text",value:i.receiptNumber,onChange:x=>o({...i,receiptNumber:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"RCP-001"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:i.paymentDate,onChange:x=>o({...i,paymentDate:x.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:i.notes,onChange:x=>o({...i,notes:x.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Additional payment details..."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Payment Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Invoice Total"}),s.jsxs("span",{className:"font-medium",children:[parseFloat(r.totalAmount).toFixed(3)," KWD"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Already Paid"}),s.jsxs("span",{className:"font-medium",children:[parseFloat(r.paidAmount||0).toFixed(3)," KWD"]})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[s.jsx("span",{className:"text-gray-600",children:"Current Payment"}),s.jsxs("span",{className:"font-bold text-green-600",children:[parseFloat(i.amount||"0").toFixed(3)," KWD"]})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[s.jsx("span",{className:"text-gray-900 font-semibold",children:"Remaining Balance"}),s.jsxs("span",{className:"font-bold text-red-600",children:[b>=0?b.toFixed(3):"0.000"," KWD"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",disabled:c,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Recording...":"Record Payment"})]})]})]})}):null},Aie="modulepreload",Sie=function(e){return"/"+e},qA={},l2=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(d=>{if(d=Sie(d),d in qA)return;qA[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Aie,u||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((b,x)=>{p.addEventListener("load",b),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};function Fr(e){"@babel/helpers - typeof";return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(e)}var bo=Uint8Array,oi=Uint16Array,S3=Int32Array,E3=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k3=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),HA=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ZO=function(e,t){for(var r=new oi(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new S3(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},JO=ZO(E3,2),Eie=JO.b,Hv=JO.r;Eie[28]=258,Hv[258]=28;var kie=ZO(k3,0),VA=kie.r,Vv=new oi(32768);for(var un=0;un<32768;++un){var cc=(un&43690)>>1|(un&21845)<<1;cc=(cc&52428)>>2|(cc&13107)<<2,cc=(cc&61680)>>4|(cc&3855)<<4,Vv[un]=((cc&65280)>>8|(cc&255)<<8)>>1}var Rf=function(e,t,r){for(var n=e.length,a=0,i=new oi(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new oi(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var c;if(r){c=new oi(1<<t);var d=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],f=t-e[a],p=o[e[a]-1]++<<f,b=p|(1<<f)-1;p<=b;++p)c[Vv[p]>>d]=u}else for(c=new oi(n),a=0;a<n;++a)e[a]&&(c[a]=Vv[o[e[a]-1]++]>>15-e[a]);return c},Kd=new bo(288);for(var un=0;un<144;++un)Kd[un]=8;for(var un=144;un<256;++un)Kd[un]=9;for(var un=256;un<280;++un)Kd[un]=7;for(var un=280;un<288;++un)Kd[un]=8;var r1=new bo(32);for(var un=0;un<32;++un)r1[un]=5;var Pie=Rf(Kd,9,0),Tie=Rf(r1,5,0),QO=function(e){return(e+7)/8|0},Iie=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new bo(e.subarray(t,r))},xl=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},hf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},c2=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:tR,l:0};if(a==1){var o=new bo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(O,$){return O.f-$.f}),r.push({s:-1,f:25001});var c=r[0],d=r[1],u=0,f=1,p=2;for(r[0]={s:-1,f:c.f+d.f,l:c,r:d};f!=a-1;)c=r[r[u].f<r[p].f?u++:p++],d=r[u!=f&&r[u].f<r[p].f?u++:p++],r[f++]={s:-1,f:c.f+d.f,l:c,r:d};for(var b=i[0].s,n=1;n<a;++n)i[n].s>b&&(b=i[n].s);var x=new oi(b+1),N=Gv(r[f-1],x,0);if(N>t){var n=0,j=0,w=N-t,C=1<<w;for(i.sort(function($,F){return x[F.s]-x[$.s]||$.f-F.f});n<a;++n){var P=i[n].s;if(x[P]>t)j+=C-(1<<N-x[P]),x[P]=t;else break}for(j>>=w;j>0;){var k=i[n].s;x[k]<t?j-=1<<t-x[k]++-1:++n}for(;n>=0&&j;--n){var _=i[n].s;x[_]==t&&(--x[_],++j)}N=t}return{t:new bo(x),l:N}},Gv=function(e,t,r){return e.s==-1?Math.max(Gv(e.l,t,r+1),Gv(e.r,t,r+1)):t[e.s]=r},GA=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new oi(++t),n=0,a=e[0],i=1,o=function(d){r[n++]=d},c=1;c<=t;++c)if(e[c]==a&&c!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[c]}return{c:r.subarray(0,n),n:t}},ff=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},eR=function(e,t,r){var n=r.length,a=QO(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},KA=function(e,t,r,n,a,i,o,c,d,u,f){xl(t,f++,r),++a[256];for(var p=c2(a,15),b=p.t,x=p.l,N=c2(i,15),j=N.t,w=N.l,C=GA(b),P=C.c,k=C.n,_=GA(j),O=_.c,$=_.n,F=new oi(19),U=0;U<P.length;++U)++F[P[U]&31];for(var U=0;U<O.length;++U)++F[O[U]&31];for(var R=c2(F,7),z=R.t,M=R.l,W=19;W>4&&!z[HA[W-1]];--W);var J=u+5<<3,K=ff(a,Kd)+ff(i,r1)+o,V=ff(a,b)+ff(i,j)+o+14+3*W+ff(F,z)+2*F[16]+3*F[17]+7*F[18];if(d>=0&&J<=K&&J<=V)return eR(t,f,e.subarray(d,d+u));var me,se,oe,ye;if(xl(t,f,1+(V<K)),f+=2,V<K){me=Rf(b,x,0),se=b,oe=Rf(j,w,0),ye=j;var we=Rf(z,M,0);xl(t,f,k-257),xl(t,f+5,$-1),xl(t,f+10,W-4),f+=14;for(var U=0;U<W;++U)xl(t,f+3*U,z[HA[U]]);f+=3*W;for(var te=[P,O],G=0;G<2;++G)for(var Q=te[G],U=0;U<Q.length;++U){var le=Q[U]&31;xl(t,f,we[le]),f+=z[le],le>15&&(xl(t,f,Q[U]>>5&127),f+=Q[U]>>12)}}else me=Pie,se=Kd,oe=Tie,ye=r1;for(var U=0;U<c;++U){var ve=n[U];if(ve>255){var le=ve>>18&31;hf(t,f,me[le+257]),f+=se[le+257],le>7&&(xl(t,f,ve>>23&31),f+=E3[le]);var xe=ve&31;hf(t,f,oe[xe]),f+=ye[xe],xe>3&&(hf(t,f,ve>>5&8191),f+=k3[xe])}else hf(t,f,me[ve]),f+=se[ve]}return hf(t,f,me[256]),f+se[256]},_ie=new S3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tR=new bo(0),Oie=function(e,t,r,n,a,i){var o=i.z||e.length,c=new bo(n+o+5*(1+Math.ceil(o/7e3))+a),d=c.subarray(n,c.length-a),u=i.l,f=(i.r||0)&7;if(t){f&&(d[0]=i.r>>3);for(var p=_ie[t-1],b=p>>13,x=p&8191,N=(1<<r)-1,j=i.p||new oi(32768),w=i.h||new oi(N+1),C=Math.ceil(r/3),P=2*C,k=function(Se){return(e[Se]^e[Se+1]<<C^e[Se+2]<<P)&N},_=new S3(25e3),O=new oi(288),$=new oi(32),F=0,U=0,R=i.i||0,z=0,M=i.w||0,W=0;R+2<o;++R){var J=k(R),K=R&32767,V=w[J];if(j[K]=V,w[J]=K,M<=R){var me=o-R;if((F>7e3||z>24576)&&(me>423||!u)){f=KA(e,d,0,_,O,$,U,z,W,R-W,f),z=F=U=0,W=R;for(var se=0;se<286;++se)O[se]=0;for(var se=0;se<30;++se)$[se]=0}var oe=2,ye=0,we=x,te=K-V&32767;if(me>2&&J==k(R-te))for(var G=Math.min(b,me)-1,Q=Math.min(32767,R),le=Math.min(258,me);te<=Q&&--we&&K!=V;){if(e[R+oe]==e[R+oe-te]){for(var ve=0;ve<le&&e[R+ve]==e[R+ve-te];++ve);if(ve>oe){if(oe=ve,ye=te,ve>G)break;for(var xe=Math.min(te,ve-2),ke=0,se=0;se<xe;++se){var Re=R-te+se&32767,be=j[Re],Te=Re-be&32767;Te>ke&&(ke=Te,V=Re)}}}K=V,V=j[K],te+=K-V&32767}if(ye){_[z++]=268435456|Hv[oe]<<18|VA[ye];var Ve=Hv[oe]&31,Oe=VA[ye]&31;U+=E3[Ve]+k3[Oe],++O[257+Ve],++$[Oe],M=R+oe,++F}else _[z++]=e[R],++O[e[R]]}}for(R=Math.max(R,M);R<o;++R)_[z++]=e[R],++O[e[R]];f=KA(e,d,u,_,O,$,U,z,W,R-W,f),u||(i.r=f&7|d[f/8|0]<<3,f-=7,i.h=w,i.p=j,i.i=R,i.w=M)}else{for(var R=i.w||0;R<o+u;R+=65535){var Ye=R+65535;Ye>=o&&(d[f/8|0]=u,Ye=o),f=eR(d,f+1,e.subarray(R,Ye))}i.i=o}return Iie(c,0,n+QO(f)+a)},rR=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var c=Math.min(o+2655,i);o<c;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Rie=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new bo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return Oie(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},nR=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Die=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=rR();a.p(t.dictionary),nR(e,2,a.d())}};function Kv(e,t){t||(t={});var r=rR();r.p(e);var n=Rie(e,t,t.dictionary?6:2,4);return Die(n,t),nR(n,n.length-4,r.d()),n}var Lie=typeof TextDecoder<"u"&&new TextDecoder,Mie=0;try{Lie.decode(tR,{stream:!0}),Mie=1}catch{}function Bie(e){if(Array.isArray(e))return e}function Fie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);d=!0);}catch(f){u=!0,a=f}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function XA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Uie(e,t){if(e){if(typeof e=="string")return XA(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XA(e,t):void 0}}function $ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YA(e,t){return Bie(e)||Fie(e,t)||Uie(e,t)||$ie()}function ZA(e,t="utf8"){return new TextDecoder(t).decode(e)}const zie=new TextEncoder;function Wie(e){return zie.encode(e)}const qie=1024*8,Hie=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),d2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class P3{constructor(t=qie,r={}){_r(this,"buffer");_r(this,"byteLength");_r(this,"byteOffset");_r(this,"length");_r(this,"offset");_r(this,"lastWrittenByte");_r(this,"littleEndian");_r(this,"_data");_r(this,"_mark");_r(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof P3)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=d2[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===Hie&&r!=="uint8"&&r!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+n));c.reverse();const d=new d2[r](c.buffer);return this.offset+=n,d.reverse(),d}const o=new d2[r](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return ZA(this.readBytes(t))}decodeText(t=1,r="utf8"){return ZA(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(Wie(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Bh(e){let t=e.length;for(;--t>=0;)e[t]=0}const Vie=3,Gie=258,sR=29,Kie=256,Xie=Kie+1+sR,aR=30,Yie=512,Zie=new Array((Xie+2)*2);Bh(Zie);const Jie=new Array(aR*2);Bh(Jie);const Qie=new Array(Yie);Bh(Qie);const eoe=new Array(Gie-Vie+1);Bh(eoe);const toe=new Array(sR);Bh(toe);const roe=new Array(aR);Bh(roe);const noe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var Xv=noe;const soe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},aoe=new Uint32Array(soe()),ioe=(e,t,r,n)=>{const a=aoe,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var Io=ioe,Yv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},iR={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const ooe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var loe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)ooe(r,n)&&(e[n]=r[n])}}return e},coe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let o=e[n];r.set(o,a),a+=o.length}return r},oR={assign:loe,flattenChunks:coe};let lR=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{lR=!1}const b0=new Uint8Array(256);for(let e=0;e<256;e++)b0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;b0[254]=b0[254]=1;var doe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,o=e.length,c=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(c),i=0,a=0;i<c;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const uoe=(e,t)=>{if(t<65534&&e.subarray&&lR)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var hoe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){i[a++]=o;continue}let c=b0[o];if(c>4){i[a++]=65533,n+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&n<r;)o=o<<6|e[n++]&63,c--;if(c>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return uoe(i,a)},foe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+b0[e[r]]>t?r:t},Zv={string2buf:doe,buf2string:hoe,utf8border:foe};function moe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var poe=moe;const Zm=16209,goe=16191;var xoe=function(t,r){let n,a,i,o,c,d,u,f,p,b,x,N,j,w,C,P,k,_,O,$,F,U,R,z;const M=t.state;n=t.next_in,R=t.input,a=n+(t.avail_in-5),i=t.next_out,z=t.output,o=i-(r-t.avail_out),c=i+(t.avail_out-257),d=M.dmax,u=M.wsize,f=M.whave,p=M.wnext,b=M.window,x=M.hold,N=M.bits,j=M.lencode,w=M.distcode,C=(1<<M.lenbits)-1,P=(1<<M.distbits)-1;e:do{N<15&&(x+=R[n++]<<N,N+=8,x+=R[n++]<<N,N+=8),k=j[x&C];t:for(;;){if(_=k>>>24,x>>>=_,N-=_,_=k>>>16&255,_===0)z[i++]=k&65535;else if(_&16){O=k&65535,_&=15,_&&(N<_&&(x+=R[n++]<<N,N+=8),O+=x&(1<<_)-1,x>>>=_,N-=_),N<15&&(x+=R[n++]<<N,N+=8,x+=R[n++]<<N,N+=8),k=w[x&P];r:for(;;){if(_=k>>>24,x>>>=_,N-=_,_=k>>>16&255,_&16){if($=k&65535,_&=15,N<_&&(x+=R[n++]<<N,N+=8,N<_&&(x+=R[n++]<<N,N+=8)),$+=x&(1<<_)-1,$>d){t.msg="invalid distance too far back",M.mode=Zm;break e}if(x>>>=_,N-=_,_=i-o,$>_){if(_=$-_,_>f&&M.sane){t.msg="invalid distance too far back",M.mode=Zm;break e}if(F=0,U=b,p===0){if(F+=u-_,_<O){O-=_;do z[i++]=b[F++];while(--_);F=i-$,U=z}}else if(p<_){if(F+=u+p-_,_-=p,_<O){O-=_;do z[i++]=b[F++];while(--_);if(F=0,p<O){_=p,O-=_;do z[i++]=b[F++];while(--_);F=i-$,U=z}}}else if(F+=p-_,_<O){O-=_;do z[i++]=b[F++];while(--_);F=i-$,U=z}for(;O>2;)z[i++]=U[F++],z[i++]=U[F++],z[i++]=U[F++],O-=3;O&&(z[i++]=U[F++],O>1&&(z[i++]=U[F++]))}else{F=i-$;do z[i++]=z[F++],z[i++]=z[F++],z[i++]=z[F++],O-=3;while(O>2);O&&(z[i++]=z[F++],O>1&&(z[i++]=z[F++]))}}else if(_&64){t.msg="invalid distance code",M.mode=Zm;break e}else{k=w[(k&65535)+(x&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){M.mode=goe;break e}else{t.msg="invalid literal/length code",M.mode=Zm;break e}else{k=j[(k&65535)+(x&(1<<_)-1)];continue t}break}}while(n<a&&i<c);O=N>>3,n-=O,N-=O<<3,x&=(1<<N)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<c?257+(c-i):257-(i-c),M.hold=x,M.bits=N};const fu=15,JA=852,QA=592,eS=0,u2=1,tS=2,yoe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),boe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),voe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),woe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Noe=(e,t,r,n,a,i,o,c)=>{const d=c.bits;let u=0,f=0,p=0,b=0,x=0,N=0,j=0,w=0,C=0,P=0,k,_,O,$,F,U=null,R;const z=new Uint16Array(fu+1),M=new Uint16Array(fu+1);let W=null,J,K,V;for(u=0;u<=fu;u++)z[u]=0;for(f=0;f<n;f++)z[t[r+f]]++;for(x=d,b=fu;b>=1&&z[b]===0;b--);if(x>b&&(x=b),b===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,c.bits=1,0;for(p=1;p<b&&z[p]===0;p++);for(x<p&&(x=p),w=1,u=1;u<=fu;u++)if(w<<=1,w-=z[u],w<0)return-1;if(w>0&&(e===eS||b!==1))return-1;for(M[1]=0,u=1;u<fu;u++)M[u+1]=M[u]+z[u];for(f=0;f<n;f++)t[r+f]!==0&&(o[M[t[r+f]]++]=f);if(e===eS?(U=W=o,R=20):e===u2?(U=yoe,W=boe,R=257):(U=voe,W=woe,R=0),P=0,f=0,u=p,F=i,N=x,j=0,O=-1,C=1<<x,$=C-1,e===u2&&C>JA||e===tS&&C>QA)return 1;for(;;){J=u-j,o[f]+1<R?(K=0,V=o[f]):o[f]>=R?(K=W[o[f]-R],V=U[o[f]-R]):(K=96,V=0),k=1<<u-j,_=1<<N,p=_;do _-=k,a[F+(P>>j)+_]=J<<24|K<<16|V|0;while(_!==0);for(k=1<<u-1;P&k;)k>>=1;if(k!==0?(P&=k-1,P+=k):P=0,f++,--z[u]===0){if(u===b)break;u=t[r+o[f]]}if(u>x&&(P&$)!==O){for(j===0&&(j=x),F+=p,N=u-j,w=1<<N;N+j<b&&(w-=z[N+j],!(w<=0));)N++,w<<=1;if(C+=1<<N,e===u2&&C>JA||e===tS&&C>QA)return 1;O=P&$,a[O]=x<<24|N<<16|F-i|0}}return P!==0&&(a[F+P]=u-j<<24|64<<16|0),c.bits=x,0};var Df=Noe;const joe=0,cR=1,dR=2,{Z_FINISH:rS,Z_BLOCK:Coe,Z_TREES:Jm,Z_OK:Xd,Z_STREAM_END:Aoe,Z_NEED_DICT:Soe,Z_STREAM_ERROR:Vi,Z_DATA_ERROR:uR,Z_MEM_ERROR:hR,Z_BUF_ERROR:Eoe,Z_DEFLATED:nS}=iR,Dx=16180,sS=16181,aS=16182,iS=16183,oS=16184,lS=16185,cS=16186,dS=16187,uS=16188,hS=16189,n1=16190,yl=16191,h2=16192,fS=16193,f2=16194,mS=16195,pS=16196,gS=16197,xS=16198,Qm=16199,ep=16200,yS=16201,bS=16202,vS=16203,wS=16204,NS=16205,m2=16206,jS=16207,CS=16208,pn=16209,fR=16210,mR=16211,koe=852,Poe=592,Toe=15,Ioe=Toe,AS=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function _oe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const su=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Dx||t.mode>mR?1:0},pR=e=>{if(su(e))return Vi;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Dx,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(koe),t.distcode=t.distdyn=new Int32Array(Poe),t.sane=1,t.back=-1,Xd},gR=e=>{if(su(e))return Vi;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,pR(e)},xR=(e,t)=>{let r;if(su(e))return Vi;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Vi:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,gR(e))},yR=(e,t)=>{if(!e)return Vi;const r=new _oe;e.state=r,r.strm=e,r.window=null,r.mode=Dx;const n=xR(e,t);return n!==Xd&&(e.state=null),n},Ooe=e=>yR(e,Ioe);let SS=!0,p2,g2;const Roe=e=>{if(SS){p2=new Int32Array(512),g2=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Df(cR,e.lens,0,288,p2,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Df(dR,e.lens,0,32,g2,0,e.work,{bits:5}),SS=!1}e.lencode=p2,e.lenbits=9,e.distcode=g2,e.distbits=5},bR=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},Doe=(e,t)=>{let r,n,a,i,o,c,d,u,f,p,b,x,N,j,w=0,C,P,k,_,O,$,F,U;const R=new Uint8Array(4);let z,M;const W=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(su(e)||!e.output||!e.input&&e.avail_in!==0)return Vi;r=e.state,r.mode===yl&&(r.mode=h2),o=e.next_out,a=e.output,d=e.avail_out,i=e.next_in,n=e.input,c=e.avail_in,u=r.hold,f=r.bits,p=c,b=d,U=Xd;e:for(;;)switch(r.mode){case Dx:if(r.wrap===0){r.mode=h2;break}for(;f<16;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,R[0]=u&255,R[1]=u>>>8&255,r.check=Io(r.check,R,2,0),u=0,f=0,r.mode=sS;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=pn;break}if((u&15)!==nS){e.msg="unknown compression method",r.mode=pn;break}if(u>>>=4,f-=4,F=(u&15)+8,r.wbits===0&&(r.wbits=F),F>15||F>r.wbits){e.msg="invalid window size",r.mode=pn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?hS:yl,u=0,f=0;break;case sS:for(;f<16;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(r.flags=u,(r.flags&255)!==nS){e.msg="unknown compression method",r.mode=pn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=pn;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,r.check=Io(r.check,R,2,0)),u=0,f=0,r.mode=aS;case aS:for(;f<32;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,R[2]=u>>>16&255,R[3]=u>>>24&255,r.check=Io(r.check,R,4,0)),u=0,f=0,r.mode=iS;case iS:for(;f<16;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,r.check=Io(r.check,R,2,0)),u=0,f=0,r.mode=oS;case oS:if(r.flags&1024){for(;f<16;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(R[0]=u&255,R[1]=u>>>8&255,r.check=Io(r.check,R,2,0)),u=0,f=0}else r.head&&(r.head.extra=null);r.mode=lS;case lS:if(r.flags&1024&&(x=r.length,x>c&&(x=c),x&&(r.head&&(F=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+x),F)),r.flags&512&&r.wrap&4&&(r.check=Io(r.check,n,x,i)),c-=x,i+=x,r.length-=x),r.length))break e;r.length=0,r.mode=cS;case cS:if(r.flags&2048){if(c===0)break e;x=0;do F=n[i+x++],r.head&&F&&r.length<65536&&(r.head.name+=String.fromCharCode(F));while(F&&x<c);if(r.flags&512&&r.wrap&4&&(r.check=Io(r.check,n,x,i)),c-=x,i+=x,F)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=dS;case dS:if(r.flags&4096){if(c===0)break e;x=0;do F=n[i+x++],r.head&&F&&r.length<65536&&(r.head.comment+=String.fromCharCode(F));while(F&&x<c);if(r.flags&512&&r.wrap&4&&(r.check=Io(r.check,n,x,i)),c-=x,i+=x,F)break e}else r.head&&(r.head.comment=null);r.mode=uS;case uS:if(r.flags&512){for(;f<16;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=pn;break}u=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=yl;break;case hS:for(;f<32;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}e.adler=r.check=AS(u),u=0,f=0,r.mode=n1;case n1:if(r.havedict===0)return e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=c,r.hold=u,r.bits=f,Soe;e.adler=r.check=1,r.mode=yl;case yl:if(t===Coe||t===Jm)break e;case h2:if(r.last){u>>>=f&7,f-=f&7,r.mode=m2;break}for(;f<3;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}switch(r.last=u&1,u>>>=1,f-=1,u&3){case 0:r.mode=fS;break;case 1:if(Roe(r),r.mode=Qm,t===Jm){u>>>=2,f-=2;break e}break;case 2:r.mode=pS;break;case 3:e.msg="invalid block type",r.mode=pn}u>>>=2,f-=2;break;case fS:for(u>>>=f&7,f-=f&7;f<32;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=pn;break}if(r.length=u&65535,u=0,f=0,r.mode=f2,t===Jm)break e;case f2:r.mode=mS;case mS:if(x=r.length,x){if(x>c&&(x=c),x>d&&(x=d),x===0)break e;a.set(n.subarray(i,i+x),o),c-=x,i+=x,d-=x,o+=x,r.length-=x;break}r.mode=yl;break;case pS:for(;f<14;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(r.nlen=(u&31)+257,u>>>=5,f-=5,r.ndist=(u&31)+1,u>>>=5,f-=5,r.ncode=(u&15)+4,u>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=pn;break}r.have=0,r.mode=gS;case gS:for(;r.have<r.ncode;){for(;f<3;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}r.lens[W[r.have++]]=u&7,u>>>=3,f-=3}for(;r.have<19;)r.lens[W[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},U=Df(joe,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,U){e.msg="invalid code lengths set",r.mode=pn;break}r.have=0,r.mode=xS;case xS:for(;r.have<r.nlen+r.ndist;){for(;w=r.lencode[u&(1<<r.lenbits)-1],C=w>>>24,P=w>>>16&255,k=w&65535,!(C<=f);){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(k<16)u>>>=C,f-=C,r.lens[r.have++]=k;else{if(k===16){for(M=C+2;f<M;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(u>>>=C,f-=C,r.have===0){e.msg="invalid bit length repeat",r.mode=pn;break}F=r.lens[r.have-1],x=3+(u&3),u>>>=2,f-=2}else if(k===17){for(M=C+3;f<M;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}u>>>=C,f-=C,F=0,x=3+(u&7),u>>>=3,f-=3}else{for(M=C+7;f<M;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}u>>>=C,f-=C,F=0,x=11+(u&127),u>>>=7,f-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=pn;break}for(;x--;)r.lens[r.have++]=F}}if(r.mode===pn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=pn;break}if(r.lenbits=9,z={bits:r.lenbits},U=Df(cR,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,U){e.msg="invalid literal/lengths set",r.mode=pn;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},U=Df(dR,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,U){e.msg="invalid distances set",r.mode=pn;break}if(r.mode=Qm,t===Jm)break e;case Qm:r.mode=ep;case ep:if(c>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=c,r.hold=u,r.bits=f,xoe(e,b),o=e.next_out,a=e.output,d=e.avail_out,i=e.next_in,n=e.input,c=e.avail_in,u=r.hold,f=r.bits,r.mode===yl&&(r.back=-1);break}for(r.back=0;w=r.lencode[u&(1<<r.lenbits)-1],C=w>>>24,P=w>>>16&255,k=w&65535,!(C<=f);){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(P&&!(P&240)){for(_=C,O=P,$=k;w=r.lencode[$+((u&(1<<_+O)-1)>>_)],C=w>>>24,P=w>>>16&255,k=w&65535,!(_+C<=f);){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}u>>>=_,f-=_,r.back+=_}if(u>>>=C,f-=C,r.back+=C,r.length=k,P===0){r.mode=NS;break}if(P&32){r.back=-1,r.mode=yl;break}if(P&64){e.msg="invalid literal/length code",r.mode=pn;break}r.extra=P&15,r.mode=yS;case yS:if(r.extra){for(M=r.extra;f<M;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=bS;case bS:for(;w=r.distcode[u&(1<<r.distbits)-1],C=w>>>24,P=w>>>16&255,k=w&65535,!(C<=f);){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(!(P&240)){for(_=C,O=P,$=k;w=r.distcode[$+((u&(1<<_+O)-1)>>_)],C=w>>>24,P=w>>>16&255,k=w&65535,!(_+C<=f);){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}u>>>=_,f-=_,r.back+=_}if(u>>>=C,f-=C,r.back+=C,P&64){e.msg="invalid distance code",r.mode=pn;break}r.offset=k,r.extra=P&15,r.mode=vS;case vS:if(r.extra){for(M=r.extra;f<M;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=pn;break}r.mode=wS;case wS:if(d===0)break e;if(x=b-d,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=pn;break}x>r.wnext?(x-=r.wnext,N=r.wsize-x):N=r.wnext-x,x>r.length&&(x=r.length),j=r.window}else j=a,N=o-r.offset,x=r.length;x>d&&(x=d),d-=x,r.length-=x;do a[o++]=j[N++];while(--x);r.length===0&&(r.mode=ep);break;case NS:if(d===0)break e;a[o++]=r.length,d--,r.mode=ep;break;case m2:if(r.wrap){for(;f<32;){if(c===0)break e;c--,u|=n[i++]<<f,f+=8}if(b-=d,e.total_out+=b,r.total+=b,r.wrap&4&&b&&(e.adler=r.check=r.flags?Io(r.check,a,b,o-b):Xv(r.check,a,b,o-b)),b=d,r.wrap&4&&(r.flags?u:AS(u))!==r.check){e.msg="incorrect data check",r.mode=pn;break}u=0,f=0}r.mode=jS;case jS:if(r.wrap&&r.flags){for(;f<32;){if(c===0)break e;c--,u+=n[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=pn;break}u=0,f=0}r.mode=CS;case CS:U=Aoe;break e;case pn:U=uR;break e;case fR:return hR;case mR:default:return Vi}return e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=c,r.hold=u,r.bits=f,(r.wsize||b!==e.avail_out&&r.mode<pn&&(r.mode<m2||t!==rS))&&bR(e,e.output,e.next_out,b-e.avail_out),p-=e.avail_in,b-=e.avail_out,e.total_in+=p,e.total_out+=b,r.total+=b,r.wrap&4&&b&&(e.adler=r.check=r.flags?Io(r.check,a,b,e.next_out-b):Xv(r.check,a,b,e.next_out-b)),e.data_type=r.bits+(r.last?64:0)+(r.mode===yl?128:0)+(r.mode===Qm||r.mode===f2?256:0),(p===0&&b===0||t===rS)&&U===Xd&&(U=Eoe),U},Loe=e=>{if(su(e))return Vi;let t=e.state;return t.window&&(t.window=null),e.state=null,Xd},Moe=(e,t)=>{if(su(e))return Vi;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Xd):Vi},Boe=(e,t)=>{const r=t.length;let n,a,i;return su(e)||(n=e.state,n.wrap!==0&&n.mode!==n1)?Vi:n.mode===n1&&(a=1,a=Xv(a,t,r,0),a!==n.check)?uR:(i=bR(e,t,r,r),i?(n.mode=fR,hR):(n.havedict=1,Xd))};var Foe=gR,Uoe=xR,$oe=pR,zoe=Ooe,Woe=yR,qoe=Doe,Hoe=Loe,Voe=Moe,Goe=Boe,Koe="pako inflate (from Nodeca project)",Nl={inflateReset:Foe,inflateReset2:Uoe,inflateResetKeep:$oe,inflateInit:zoe,inflateInit2:Woe,inflate:qoe,inflateEnd:Hoe,inflateGetHeader:Voe,inflateSetDictionary:Goe,inflateInfo:Koe};function Xoe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Yoe=Xoe;const vR=Object.prototype.toString,{Z_NO_FLUSH:Zoe,Z_FINISH:Joe,Z_OK:v0,Z_STREAM_END:x2,Z_NEED_DICT:y2,Z_STREAM_ERROR:Qoe,Z_DATA_ERROR:ES,Z_MEM_ERROR:ele}=iR;function G0(e){this.options=oR.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new poe,this.strm.avail_out=0;let r=Nl.inflateInit2(this.strm,t.windowBits);if(r!==v0)throw new Error(Yv[r]);if(this.header=new Yoe,Nl.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Zv.string2buf(t.dictionary):vR.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Nl.inflateSetDictionary(this.strm,t.dictionary),r!==v0)))throw new Error(Yv[r])}G0.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,c;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Joe:Zoe,vR.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Nl.inflate(r,o),i===y2&&a&&(i=Nl.inflateSetDictionary(r,a),i===v0?i=Nl.inflate(r,o):i===ES&&(i=y2));r.avail_in>0&&i===x2&&r.state.wrap>0&&e[r.next_in]!==0;)Nl.inflateReset(r),i=Nl.inflate(r,o);switch(i){case Qoe:case ES:case y2:case ele:return this.onEnd(i),this.ended=!0,!1}if(c=r.avail_out,r.next_out&&(r.avail_out===0||i===x2))if(this.options.to==="string"){let d=Zv.utf8border(r.output,r.next_out),u=r.next_out-d,f=Zv.buf2string(r.output,d);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(d,d+u),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===v0&&c===0)){if(i===x2)return i=Nl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};G0.prototype.onData=function(e){this.chunks.push(e)};G0.prototype.onEnd=function(e){e===v0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function tle(e,t){const r=new G0(t);if(r.push(e),r.err)throw r.msg||Yv[r.err];return r.result}var rle=G0,nle=tle,sle={Inflate:rle,inflate:nle};const{Inflate:ale,inflate:ile}=sle;var kS=ale,ole=ile;const wR=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;wR[e]=t}const PS=4294967295;function lle(e,t,r){let n=e;for(let a=0;a<r;a++)n=wR[(n^t[a])&255]^n>>>8;return n}function cle(e,t){return(lle(PS,e,t)^PS)>>>0}function TS(e,t,r){const n=e.readUint32(),a=cle(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function NR(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function jR(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function CR(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function AR(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function SR(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+dle(t[i-a],r[i],r[i-a])&255}}function dle(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),o=Math.abs(n-r);return a<=i&&a<=o?e:i<=o?t:r}function ule(e,t,r,n,a,i){switch(e){case 0:NR(t,r,a);break;case 1:jR(t,r,a,i);break;case 2:CR(t,r,n,a);break;case 3:AR(t,r,n,a,i);break;case 4:SR(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const hle=new Uint16Array([255]),fle=new Uint8Array(hle.buffer),mle=fle[0]===255;function ple(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(i/8)*a,d=new Uint8Array(n*r*c);let u=0;for(let f=0;f<7;f++){const p=o[f],b=Math.ceil((r-p.x)/p.xStep),x=Math.ceil((n-p.y)/p.yStep);if(b<=0||x<=0)continue;const N=b*c,j=new Uint8Array(N);for(let w=0;w<x;w++){const C=t[u++],P=t.subarray(u,u+N);u+=N;const k=new Uint8Array(N);ule(C,P,k,j,N,c),j.set(k);for(let _=0;_<b;_++){const O=p.x+_*p.xStep,$=p.y+w*p.yStep;if(!(O>=r||$>=n))for(let F=0;F<c;F++)d[($*r+O)*c+F]=k[_*c+F]}}}if(i===16){const f=new Uint16Array(d.buffer);if(mle)for(let p=0;p<f.length;p++)f[p]=gle(f[p]);return f}else return d}function gle(e){return(e&255)<<8|e>>8&255}const xle=new Uint16Array([255]),yle=new Uint8Array(xle.buffer),ble=yle[0]===255,vle=new Uint8Array(0);function IS(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,c=Math.ceil(i/8*a*r),d=new Uint8Array(n*c);let u=vle,f=0,p,b;for(let x=0;x<n;x++){switch(p=t.subarray(f+1,f+1+c),b=d.subarray(x*c,(x+1)*c),t[f]){case 0:NR(p,b,c);break;case 1:jR(p,b,c,o);break;case 2:CR(p,b,u,c);break;case 3:AR(p,b,u,c,o);break;case 4:SR(p,b,u,c,o);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}u=b,f+=c+1}if(i===16){const x=new Uint16Array(d.buffer);if(ble)for(let N=0;N<x.length;N++)x[N]=wle(x[N]);return x}else return d}function wle(e){return(e&255)<<8|e>>8&255}const jp=Uint8Array.of(137,80,78,71,13,10,26,10);function _S(e){if(!Nle(e.readBytes(jp.length)))throw new Error("wrong PNG signature")}function Nle(e){if(e.length<jp.length)return!1;for(let t=0;t<jp.length;t++)if(e[t]!==jp[t])return!1;return!0}const jle="tEXt",Cle=0,ER=new TextDecoder("latin1");function Ale(e){if(Ele(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Sle=/^[\u0000-\u00FF]*$/;function Ele(e){if(!Sle.test(e))throw new Error("invalid latin1 text")}function kle(e,t,r){const n=kR(t);e[n]=Ple(t,r-n.length-1)}function kR(e){for(e.mark();e.readByte()!==Cle;);const t=e.offset;e.reset();const r=ER.decode(e.readBytes(t-e.offset-1));return e.skip(1),Ale(r),r}function Ple(e,t){return ER.decode(e.readBytes(t))}const Qa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},b2={UNKNOWN:-1,DEFLATE:0},OS={UNKNOWN:-1,ADAPTIVE:0},v2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},tp={NONE:0,BACKGROUND:1,PREVIOUS:2},w2={SOURCE:0,OVER:1};class Tle extends P3{constructor(r,n={}){super(r);_r(this,"_checkCrc");_r(this,"_inflator");_r(this,"_png");_r(this,"_apng");_r(this,"_end");_r(this,"_hasPalette");_r(this,"_palette");_r(this,"_hasTransparency");_r(this,"_transparency");_r(this,"_compressionMethod");_r(this,"_filterMethod");_r(this,"_interlaceMethod");_r(this,"_colorType");_r(this,"_isAnimated");_r(this,"_numberOfFrames");_r(this,"_numberOfPlays");_r(this,"_frames");_r(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new kS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=b2.UNKNOWN,this._filterMethod=OS.UNKNOWN,this._interlaceMethod=v2.UNKNOWN,this._colorType=Qa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(_S(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(_S(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case jle:kle(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?TS(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?TS(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=Ile(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Qa.GREYSCALE:a=1;break;case Qa.TRUECOLOUR:a=3;break;case Qa.INDEXED_COLOUR:a=1;break;case Qa.GREYSCALE_ALPHA:a=2;break;case Qa.TRUECOLOUR_ALPHA:a=4;break;case Qa.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==b2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Qa.GREYSCALE:case Qa.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Qa.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Qa.UNKNOWN:case Qa.GREYSCALE_ALPHA:case Qa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=kR(this),a=this.readUint8();if(a!==b2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:ole(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=IS({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case tp.NONE:break;case tp.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const c=(i*r.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)a.data[c+d]=0}break;case tp.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(o,c)=>{const d=((o+n.yOffset)*this._png.width+n.xOffset+c)*this._png.channels,u=(o*n.width+c)*this._png.channels;return{index:d,frameIndex:u}};switch(n.blendOp){case w2.SOURCE:for(let o=0;o<n.height;o++)for(let c=0;c<n.width;c++){const{index:d,frameIndex:u}=i(o,c);for(let f=0;f<this._png.channels;f++)r.data[d+f]=n.data[u+f]}break;case w2.OVER:for(let o=0;o<n.height;o++)for(let c=0;c<n.width;c++){const{index:d,frameIndex:u}=i(o,c);for(let f=0;f<this._png.channels;f++){const p=n.data[u+this._png.channels-1]/a,b=f%(this._png.channels-1)===0?1:n.data[u+f],x=Math.floor(p*b+(1-p)*r.data[d+f]);r.data[d+f]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==OS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===v2.NO_INTERLACE)this._png.data=IS({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===v2.ADAM7)this._png.data=ple({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:tp.NONE,blendOp:w2.SOURCE,data:r}),this._inflator=new kS,this._writingDataChunks=!1}}function Ile(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var RS;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(RS||(RS={}));function _le(e,t){return new Tle(e,t).decode()}var rr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function N2(){rr.console&&typeof rr.console.log=="function"&&rr.console.log.apply(rr.console,arguments)}var Yr={log:N2,warn:function(e){rr.console&&(typeof rr.console.warn=="function"?rr.console.warn.apply(rr.console,arguments):N2.call(null,arguments))},error:function(e){rr.console&&(typeof rr.console.error=="function"?rr.console.error.apply(rr.console,arguments):N2(e))}};function j2(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){hd(n.response,t,r)},n.onerror=function(){Yr.error("could not download file")},n.send()}function DS(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function rp(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var hd=rr.saveAs||((typeof window>"u"?"undefined":Fr(window))!=="object"||window!==rr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=rr.URL||rr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?DS(a.href)?j2(e,t,r):rp(a,a.target="_blank"):rp(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){rp(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(DS(e))j2(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){rp(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Fr(i)!=="object"&&(Yr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return j2(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(rr.HTMLElement)||rr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Fr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var f=c.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},c.readAsDataURL(e)}else{var d=rr.URL||rr.webkitURL,u=d.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function PR(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),d=this.g.toString(16),u=this.b.toString(16);return c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),"#"+c+d+u}}var Cp=rr.atob.bind(rr),LS=rr.btoa.bind(rr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function C2(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=Js(r,n,a,i,t[0],7,-680876936),i=Js(i,r,n,a,t[1],12,-389564586),a=Js(a,i,r,n,t[2],17,606105819),n=Js(n,a,i,r,t[3],22,-1044525330),r=Js(r,n,a,i,t[4],7,-176418897),i=Js(i,r,n,a,t[5],12,1200080426),a=Js(a,i,r,n,t[6],17,-1473231341),n=Js(n,a,i,r,t[7],22,-45705983),r=Js(r,n,a,i,t[8],7,1770035416),i=Js(i,r,n,a,t[9],12,-1958414417),a=Js(a,i,r,n,t[10],17,-42063),n=Js(n,a,i,r,t[11],22,-1990404162),r=Js(r,n,a,i,t[12],7,1804603682),i=Js(i,r,n,a,t[13],12,-40341101),a=Js(a,i,r,n,t[14],17,-1502002290),r=Qs(r,n=Js(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Qs(i,r,n,a,t[6],9,-1069501632),a=Qs(a,i,r,n,t[11],14,643717713),n=Qs(n,a,i,r,t[0],20,-373897302),r=Qs(r,n,a,i,t[5],5,-701558691),i=Qs(i,r,n,a,t[10],9,38016083),a=Qs(a,i,r,n,t[15],14,-660478335),n=Qs(n,a,i,r,t[4],20,-405537848),r=Qs(r,n,a,i,t[9],5,568446438),i=Qs(i,r,n,a,t[14],9,-1019803690),a=Qs(a,i,r,n,t[3],14,-187363961),n=Qs(n,a,i,r,t[8],20,1163531501),r=Qs(r,n,a,i,t[13],5,-1444681467),i=Qs(i,r,n,a,t[2],9,-51403784),a=Qs(a,i,r,n,t[7],14,1735328473),r=ea(r,n=Qs(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=ea(i,r,n,a,t[8],11,-2022574463),a=ea(a,i,r,n,t[11],16,1839030562),n=ea(n,a,i,r,t[14],23,-35309556),r=ea(r,n,a,i,t[1],4,-1530992060),i=ea(i,r,n,a,t[4],11,1272893353),a=ea(a,i,r,n,t[7],16,-155497632),n=ea(n,a,i,r,t[10],23,-1094730640),r=ea(r,n,a,i,t[13],4,681279174),i=ea(i,r,n,a,t[0],11,-358537222),a=ea(a,i,r,n,t[3],16,-722521979),n=ea(n,a,i,r,t[6],23,76029189),r=ea(r,n,a,i,t[9],4,-640364487),i=ea(i,r,n,a,t[12],11,-421815835),a=ea(a,i,r,n,t[15],16,530742520),r=ta(r,n=ea(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=ta(i,r,n,a,t[7],10,1126891415),a=ta(a,i,r,n,t[14],15,-1416354905),n=ta(n,a,i,r,t[5],21,-57434055),r=ta(r,n,a,i,t[12],6,1700485571),i=ta(i,r,n,a,t[3],10,-1894986606),a=ta(a,i,r,n,t[10],15,-1051523),n=ta(n,a,i,r,t[1],21,-2054922799),r=ta(r,n,a,i,t[8],6,1873313359),i=ta(i,r,n,a,t[15],10,-30611744),a=ta(a,i,r,n,t[6],15,-1560198380),n=ta(n,a,i,r,t[13],21,1309151649),r=ta(r,n,a,i,t[4],6,-145523070),i=ta(i,r,n,a,t[11],10,-1120210379),a=ta(a,i,r,n,t[2],15,718787259),n=ta(n,a,i,r,t[9],21,-343485551),e[0]=Nc(r,e[0]),e[1]=Nc(n,e[1]),e[2]=Nc(a,e[2]),e[3]=Nc(i,e[3])}function Lx(e,t,r,n,a,i){return t=Nc(Nc(t,e),Nc(n,i)),Nc(t<<a|t>>>32-a,r)}function Js(e,t,r,n,a,i,o){return Lx(t&r|~t&n,e,t,a,i,o)}function Qs(e,t,r,n,a,i,o){return Lx(t&n|r&~n,e,t,a,i,o)}function ea(e,t,r,n,a,i,o){return Lx(t^r^n,e,t,a,i,o)}function ta(e,t,r,n,a,i,o){return Lx(r^(t|~n),e,t,a,i,o)}function TR(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)C2(n,Ole(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(C2(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,C2(n,a),n}function Ole(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var MS="0123456789abcdef".split("");function Rle(e){for(var t="",r=0;r<4;r++)t+=MS[e>>8*r+4&15]+MS[e>>8*r&15];return t}function Dle(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Jv(e){return TR(e).map(Dle).join("")}var Lle=function(e){for(var t=0;t<e.length;t++)e[t]=Rle(e[t]);return e.join("")}(TR("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nc(e,t){if(Lle){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Qv(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),c=[],d=0;d<256;d++)c[d]=d;var u=0;for(d=0;d<256;d++){var f=c[d];u=(u+f+o.charCodeAt(d))%256,c[d]=c[u],c[u]=f}r=e,n=c}else c=n;var p=t.length,b=0,x=0,N="";for(d=0;d<p;d++)x=(x+(f=c[b=(b+1)%256]))%256,c[b]=c[x],c[x]=f,o=c[(c[b]+c[x])%256],N+=String.fromCharCode(t.charCodeAt(d)^o);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var BS={print:4,modify:8,copy:16,"annot-forms":32};function gu(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(c){if(BS.perm!==void 0)throw new Error("Invalid permission: "+c);a+=BS[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=Jv(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Qv(this.encryptionKey,this.padding)}function xu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function FS(e){if(Fr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(c){rr.console&&Yr.error("jsPDF PubSub Error",c.message,c)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function s1(e){if(!(this instanceof s1))return new s1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function IR(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function fd(e,t,r,n,a){if(!(this instanceof fd))return new fd(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,IR.call(this,n,a)}function Ru(e,t,r,n,a){if(!(this instanceof Ru))return new Ru(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,IR.call(this,n,a)}function $t(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],c=1,d=16,u="S",f=null;Fr(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),c=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,b={},x={internal:{},__private__:{}};x.__private__.PubSub=FS;var N="1.3",j=x.__private__.getPdfVersion=function(){return N};x.__private__.setPdfVersion=function(D){N=D};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return w};var C=x.__private__.getPageFormat=function(D){return w[D]};a=a||"a4";var P="compat",k="advanced",_=P;function O(){this.saveGraphicsState(),ae(new Vt(Ce,0,0,-Ce,0,ol()*Ce).toString()+" cm"),this.setFontSize(this.getFontSize()/Ce),u="n",_=k}function $(){this.restoreGraphicsState(),u="S",_=P}var F=x.__private__.combineFontStyleAndFontWeight=function(D,Z){if(D=="bold"&&Z=="normal"||D=="bold"&&Z==400||D=="normal"&&Z=="italic"||D=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(D=Z==400||Z==="normal"?D==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||D!=="normal"?(Z==700?"bold":Z)+""+D:"bold"),D};x.advancedAPI=function(D){var Z=_===P;return Z&&O.call(this),typeof D!="function"||(D(this),Z&&$.call(this)),this},x.compatAPI=function(D){var Z=_===k;return Z&&$.call(this),typeof D!="function"||(D(this),Z&&O.call(this)),this},x.isAdvancedAPI=function(){return _===k};var U,R=function(D){if(_!==k)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=x.roundToPrecision=x.__private__.roundToPrecision=function(D,Z){var fe=t||Z;if(isNaN(D)||isNaN(fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(fe).replace(/0+$/,"")};U=x.hpf=x.__private__.hpf=typeof d=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return z(D,d)}:d==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return z(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return z(D,16)};var M=x.f2=x.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return z(D,2)},W=x.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return z(D,3)},J=x.scale=x.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return _===P?D*Ce:_===k?D:void 0},K=function(D){return J(function(Z){return _===P?ol()-Z:_===k?Z:void 0}(D))};x.__private__.setPrecision=x.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(t=parseInt(D,10))};var V,me="00000000000000000000000000000000",se=x.__private__.getFileId=function(){return me},oe=x.__private__.setFileId=function(D){return me=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Hr=new gu(f.userPermissions,f.userPassword,f.ownerPassword,me)),me};x.setFileId=function(D){return oe(D),this},x.getFileId=function(){return se()};var ye=x.__private__.convertDateToPDFDate=function(D){var Z=D.getTimezoneOffset(),fe=Z<0?"+":"-",je=Math.floor(Math.abs(Z/60)),Ie=Math.abs(Z%60),Je=[fe,le(je),"'",le(Ie),"'"].join("");return["D:",D.getFullYear(),le(D.getMonth()+1),le(D.getDate()),le(D.getHours()),le(D.getMinutes()),le(D.getSeconds()),Je].join("")},we=x.__private__.convertPDFDateToDate=function(D){var Z=parseInt(D.substr(2,4),10),fe=parseInt(D.substr(6,2),10)-1,je=parseInt(D.substr(8,2),10),Ie=parseInt(D.substr(10,2),10),Je=parseInt(D.substr(12,2),10),ct=parseInt(D.substr(14,2),10);return new Date(Z,fe,je,Ie,Je,ct,0)},te=x.__private__.setCreationDate=function(D){var Z;if(D===void 0&&(D=new Date),D instanceof Date)Z=ye(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=D}return V=Z},G=x.__private__.getCreationDate=function(D){var Z=V;return D==="jsDate"&&(Z=we(V)),Z};x.setCreationDate=function(D){return te(D),this},x.getCreationDate=function(D){return G(D)};var Q,le=x.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},ve=x.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},xe=0,ke=[],Re=[],be=0,Te=[],Ve=[],Oe=!1,Ye=Re;x.__private__.setCustomOutputDestination=function(D){Oe=!0,Ye=D};var Se=function(D){Oe||(Ye=D)};x.__private__.resetCustomOutputDestination=function(){Oe=!1,Ye=Re};var ae=x.__private__.out=function(D){return D=D.toString(),be+=D.length+1,Ye.push(D),Ye},Fe=x.__private__.write=function(D){return ae(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},ot=x.__private__.getArrayBuffer=function(D){for(var Z=D.length,fe=new ArrayBuffer(Z),je=new Uint8Array(fe);Z--;)je[Z]=D.charCodeAt(Z);return fe},at=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return at};var qe=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(D){return qe=_===k?D/Ce:D,this};var pt,Ue=x.__private__.getFontSize=x.getFontSize=function(){return _===P?qe:qe*Ce},jt=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(D){return jt=D,this},x.__private__.getR2L=x.getR2L=function(){return jt};var vt,Gt=x.__private__.setZoomMode=function(D){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))pt=D;else if(isNaN(D)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');pt=D}else pt=parseInt(D,10)};x.__private__.getZoomMode=function(){return pt};var Kt,_t=x.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');vt=D};x.__private__.getPageMode=function(){return vt};var mr=x.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');Kt=D};x.__private__.getLayoutMode=function(){return Kt},x.__private__.setDisplayMode=x.setDisplayMode=function(D,Z,fe){return Gt(D),mr(Z),_t(fe),this};var Ht={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(D){if(Object.keys(Ht).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ht[D]},x.__private__.getDocumentProperties=function(){return Ht},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(D){for(var Z in Ht)Ht.hasOwnProperty(Z)&&D[Z]&&(Ht[Z]=D[Z]);return this},x.__private__.setDocumentProperty=function(D,Z){if(Object.keys(Ht).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ht[D]=Z};var lt,Ce,Be,et,Xe,Le={},mt={},yt=[],ht={},Lt={},Ct={},or={},wt=null,er=0,Zt=[],jr=new FS(x),ss=e.hotfixes||[],Kn={},Jr={},Ts=[],Vt=function D(Z,fe,je,Ie,Je,ct){if(!(this instanceof D))return new D(Z,fe,je,Ie,Je,ct);isNaN(Z)&&(Z=1),isNaN(fe)&&(fe=0),isNaN(je)&&(je=0),isNaN(Ie)&&(Ie=1),isNaN(Je)&&(Je=0),isNaN(ct)&&(ct=0),this._matrix=[Z,fe,je,Ie,Je,ct]};Object.defineProperty(Vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(Vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(Vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(Vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(Vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(Vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(Vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vt.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(D)},Vt.prototype.multiply=function(D){var Z=D.sx*this.sx+D.shy*this.shx,fe=D.sx*this.shy+D.shy*this.sy,je=D.shx*this.sx+D.sy*this.shx,Ie=D.shx*this.shy+D.sy*this.sy,Je=D.tx*this.sx+D.ty*this.shx+this.tx,ct=D.tx*this.shy+D.ty*this.sy+this.ty;return new Vt(Z,fe,je,Ie,Je,ct)},Vt.prototype.decompose=function(){var D=this.sx,Z=this.shy,fe=this.shx,je=this.sy,Ie=this.tx,Je=this.ty,ct=Math.sqrt(D*D+Z*Z),St=(D/=ct)*fe+(Z/=ct)*je;fe-=D*St,je-=Z*St;var gt=Math.sqrt(fe*fe+je*je);return St/=gt,D*(je/=gt)<Z*(fe/=gt)&&(D=-D,Z=-Z,St=-St,ct=-ct),{scale:new Vt(ct,0,0,gt,0,0),translate:new Vt(1,0,0,1,Ie,Je),rotate:new Vt(D,Z,-Z,D,0,0),skew:new Vt(1,0,St,1,0,0)}},Vt.prototype.toString=function(D){return this.join(" ")},Vt.prototype.inversed=function(){var D=this.sx,Z=this.shy,fe=this.shx,je=this.sy,Ie=this.tx,Je=this.ty,ct=1/(D*je-Z*fe),St=je*ct,gt=-Z*ct,Qt=-fe*ct,Et=D*ct;return new Vt(St,gt,Qt,Et,-St*Ie-Qt*Je,-gt*Ie-Et*Je)},Vt.prototype.applyToPoint=function(D){var Z=D.x*this.sx+D.y*this.shx+this.tx,fe=D.x*this.shy+D.y*this.sy+this.ty;return new Tn(Z,fe)},Vt.prototype.applyToRectangle=function(D){var Z=this.applyToPoint(D),fe=this.applyToPoint(new Tn(D.x+D.w,D.y+D.h));return new ec(Z.x,Z.y,fe.x-Z.x,fe.y-Z.y)},Vt.prototype.clone=function(){var D=this.sx,Z=this.shy,fe=this.shx,je=this.sy,Ie=this.tx,Je=this.ty;return new Vt(D,Z,fe,je,Ie,Je)},x.Matrix=Vt;var Xn=x.matrixMult=function(D,Z){return Z.multiply(D)},Xi=new Vt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Xi;var Yn=function(D,Z){if(!Lt[D]){var fe=(Z instanceof fd?"Sh":"P")+(Object.keys(ht).length+1).toString(10);Z.id=fe,Lt[D]=fe,ht[fe]=Z,jr.publish("addPattern",Z)}};x.ShadingPattern=fd,x.TilingPattern=Ru,x.addShadingPattern=function(D,Z){return R("addShadingPattern()"),Yn(D,Z),this},x.beginTilingPattern=function(D){R("beginTilingPattern()"),tc(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},x.endTilingPattern=function(D,Z){R("endTilingPattern()"),Z.stream=Ve[Q].join(`
`),Yn(D,Z),jr.publish("endTilingPattern",Z),Ts.pop().restore()};var qs,pr=x.__private__.newObject=function(){var D=Qr();return Or(D,!0),D},Qr=x.__private__.newObjectDeferred=function(){return xe++,ke[xe]=function(){return be},xe},Or=function(D,Z){return Z=typeof Z=="boolean"&&Z,ke[D]=be,Z&&ae(D+" 0 obj"),D},Nt=x.__private__.newAdditionalObject=function(){var D={objId:Qr(),content:""};return Te.push(D),D},ca=Qr(),da=Qr(),nn=x.__private__.decodeColorString=function(D){var Z=D.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length!==5||Z[4]!=="k"&&Z[4]!=="K"||(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var fe=parseFloat(Z[0]);Z=[fe,fe,fe,"r"]}for(var je="#",Ie=0;Ie<3;Ie++)je+=("0"+Math.floor(255*parseFloat(Z[Ie])).toString(16)).slice(-2);return je},bs=x.__private__.encodeColorString=function(D){var Z;typeof D=="string"&&(D={ch1:D});var fe=D.ch1,je=D.ch2,Ie=D.ch3,Je=D.ch4,ct=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof fe=="string"&&fe.charAt(0)!=="#"){var St=new PR(fe);if(St.ok)fe=St.toHex();else if(!/^\d*\.?\d*$/.test(fe))throw new Error('Invalid color "'+fe+'" passed to jsPDF.encodeColorString.')}if(typeof fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(fe)&&(fe="#"+fe[1]+fe[1]+fe[2]+fe[2]+fe[3]+fe[3]),typeof fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(fe)){var gt=parseInt(fe.substr(1),16);fe=gt>>16&255,je=gt>>8&255,Ie=255&gt}if(je===void 0||Je===void 0&&fe===je&&je===Ie)Z=typeof fe=="string"?fe+" "+ct[0]:D.precision===2?M(fe/255)+" "+ct[0]:W(fe/255)+" "+ct[0];else if(Je===void 0||Fr(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return["1.","1.","1.",ct[1]].join(" ");Z=typeof fe=="string"?[fe,je,Ie,ct[1]].join(" "):D.precision===2?[M(fe/255),M(je/255),M(Ie/255),ct[1]].join(" "):[W(fe/255),W(je/255),W(Ie/255),ct[1]].join(" ")}else Z=typeof fe=="string"?[fe,je,Ie,Je,ct[2]].join(" "):D.precision===2?[M(fe),M(je),M(Ie),M(Je),ct[2]].join(" "):[W(fe),W(je),W(Ie),W(Je),ct[2]].join(" ");return Z},Hs=x.__private__.getFilters=function(){return o},Is=x.__private__.putStream=function(D){var Z=(D=D||{}).data||"",fe=D.filters||Hs(),je=D.alreadyAppliedFilters||[],Ie=D.addLength1||!1,Je=Z.length,ct=D.objectId,St=function(Mn){return Mn};if(f!==null&&ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(St=Hr.encryptor(ct,0));var gt={};fe===!0&&(fe=["FlateEncode"]);var Qt=D.additionalKeyValues||[],Et=(gt=$t.API.processDataByFilters!==void 0?$t.API.processDataByFilters(Z,fe):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(je)?je.join(" "):je.toString());if(gt.data.length!==0&&(Qt.push({key:"Length",value:gt.data.length}),Ie===!0&&Qt.push({key:"Length1",value:Je})),Et.length!=0)if(Et.split("/").length-1==1)Qt.push({key:"Filter",value:Et});else{Qt.push({key:"Filter",value:"["+Et+"]"});for(var br=0;br<Qt.length;br+=1)if(Qt[br].key==="DecodeParms"){for(var Tr=[],tr=0;tr<gt.reverseChain.split("/").length-1;tr+=1)Tr.push("null");Tr.push(Qt[br].value),Qt[br].value="["+Tr.join(" ")+"]"}}ae("<<");for(var bt=0;bt<Qt.length;bt++)ae("/"+Qt[bt].key+" "+Qt[bt].value);ae(">>"),gt.data.length!==0&&(ae("stream"),ae(St(gt.data)),ae("endstream"))},vs=x.__private__.putPage=function(D){var Z=D.number,fe=D.data,je=D.objId,Ie=D.contentsObjId;Or(je,!0),ae("<</Type /Page"),ae("/Parent "+D.rootDictionaryObjId+" 0 R"),ae("/Resources "+D.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(U(D.mediaBox.bottomLeftX))+" "+parseFloat(U(D.mediaBox.bottomLeftY))+" "+U(D.mediaBox.topRightX)+" "+U(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&ae("/CropBox ["+U(D.cropBox.bottomLeftX)+" "+U(D.cropBox.bottomLeftY)+" "+U(D.cropBox.topRightX)+" "+U(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&ae("/BleedBox ["+U(D.bleedBox.bottomLeftX)+" "+U(D.bleedBox.bottomLeftY)+" "+U(D.bleedBox.topRightX)+" "+U(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&ae("/TrimBox ["+U(D.trimBox.bottomLeftX)+" "+U(D.trimBox.bottomLeftY)+" "+U(D.trimBox.topRightX)+" "+U(D.trimBox.topRightY)+"]"),D.artBox!==null&&ae("/ArtBox ["+U(D.artBox.bottomLeftX)+" "+U(D.artBox.bottomLeftY)+" "+U(D.artBox.topRightX)+" "+U(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&ae("/UserUnit "+D.userUnit),jr.publish("putPage",{objId:je,pageContext:Zt[Z],pageNumber:Z,page:fe}),ae("/Contents "+Ie+" 0 R"),ae(">>"),ae("endobj");var Je=fe.join(`
`);return _===k&&(Je+=`
Q`),Or(Ie,!0),Is({data:Je,filters:Hs(),objectId:Ie}),ae("endobj"),je},yi=x.__private__.putPages=function(){var D,Z,fe=[];for(D=1;D<=er;D++)Zt[D].objId=Qr(),Zt[D].contentsObjId=Qr();for(D=1;D<=er;D++)fe.push(vs({number:D,data:Ve[D],objId:Zt[D].objId,contentsObjId:Zt[D].contentsObjId,mediaBox:Zt[D].mediaBox,cropBox:Zt[D].cropBox,bleedBox:Zt[D].bleedBox,trimBox:Zt[D].trimBox,artBox:Zt[D].artBox,userUnit:Zt[D].userUnit,rootDictionaryObjId:ca,resourceDictionaryObjId:da}));Or(ca,!0),ae("<</Type /Pages");var je="/Kids [";for(Z=0;Z<er;Z++)je+=fe[Z]+" 0 R ";ae(je+"]"),ae("/Count "+er),ae(">>"),ae("endobj"),jr.publish("postPutPages")},Yo=function(D){jr.publish("putFont",{font:D,out:ae,newObject:pr,putStream:Is}),D.isAlreadyPutted!==!0&&(D.objectNumber=pr(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+xu(D.postScriptName)),ae("/Subtype /Type1"),typeof D.encoding=="string"&&ae("/Encoding /"+D.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},_s=function(D){D.objectNumber=pr();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[U(D.x),U(D.y),U(D.x+D.width),U(D.y+D.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var fe=D.pages[1].join(`
`);Is({data:fe,additionalKeyValues:Z,objectId:D.objectNumber}),ae("endobj")},Pn=function(D,Z){Z||(Z=21);var fe=pr(),je=function(ct,St){var gt,Qt=[],Et=1/(St-1);for(gt=0;gt<1;gt+=Et)Qt.push(gt);if(Qt.push(1),ct[0].offset!=0){var br={offset:0,color:ct[0].color};ct.unshift(br)}if(ct[ct.length-1].offset!=1){var Tr={offset:1,color:ct[ct.length-1].color};ct.push(Tr)}for(var tr="",bt=0,Mn=0;Mn<Qt.length;Mn++){for(gt=Qt[Mn];gt>ct[bt+1].offset;)bt++;var nr=ct[bt].offset,sn=(gt-nr)/(ct[bt+1].offset-nr),as=ct[bt].color,Gs=ct[bt+1].color;tr+=ve(Math.round((1-sn)*as[0]+sn*Gs[0]).toString(16))+ve(Math.round((1-sn)*as[1]+sn*Gs[1]).toString(16))+ve(Math.round((1-sn)*as[2]+sn*Gs[2]).toString(16))}return tr.trim()}(D.colors,Z),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+Z+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Is({data:je,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:fe}),ae("endobj"),D.objectNumber=pr(),ae("<< /ShadingType "+D.type),ae("/ColorSpace /DeviceRGB");var Je="/Coords ["+U(parseFloat(D.coords[0]))+" "+U(parseFloat(D.coords[1]))+" ";D.type===2?Je+=U(parseFloat(D.coords[2]))+" "+U(parseFloat(D.coords[3])):Je+=U(parseFloat(D.coords[2]))+" "+U(parseFloat(D.coords[3]))+" "+U(parseFloat(D.coords[4]))+" "+U(parseFloat(D.coords[5])),ae(Je+="]"),D.matrix&&ae("/Matrix ["+D.matrix.toString()+"]"),ae("/Function "+fe+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},Pr=function(D,Z){var fe=Qr(),je=pr();Z.push({resourcesOid:fe,objectOid:je}),D.objectNumber=je;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+D.boundingBox.map(U).join(" ")+"]"}),Ie.push({key:"XStep",value:U(D.xStep)}),Ie.push({key:"YStep",value:U(D.yStep)}),Ie.push({key:"Resources",value:fe+" 0 R"}),D.matrix&&Ie.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),Is({data:D.stream,additionalKeyValues:Ie,objectId:D.objectNumber}),ae("endobj")},iu=function(D){for(var Z in D.objectNumber=pr(),ae("<<"),D)switch(Z){case"opacity":ae("/ca "+M(D[Z]));break;case"stroke-opacity":ae("/CA "+M(D[Z]))}ae(">>"),ae("endobj")},Ca=function(D){Or(D.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Z in ae("/Font <<"),Le)Le.hasOwnProperty(Z)&&(p===!1||p===!0&&b.hasOwnProperty(Z))&&ae("/"+Z+" "+Le[Z].objectNumber+" 0 R");ae(">>")}(),function(){if(Object.keys(ht).length>0){for(var Z in ae("/Shading <<"),ht)ht.hasOwnProperty(Z)&&ht[Z]instanceof fd&&ht[Z].objectNumber>=0&&ae("/"+Z+" "+ht[Z].objectNumber+" 0 R");jr.publish("putShadingPatternDict"),ae(">>")}}(),function(Z){if(Object.keys(ht).length>0){for(var fe in ae("/Pattern <<"),ht)ht.hasOwnProperty(fe)&&ht[fe]instanceof x.TilingPattern&&ht[fe].objectNumber>=0&&ht[fe].objectNumber<Z&&ae("/"+fe+" "+ht[fe].objectNumber+" 0 R");jr.publish("putTilingPatternDict"),ae(">>")}}(D.objectOid),function(){if(Object.keys(Ct).length>0){var Z;for(Z in ae("/ExtGState <<"),Ct)Ct.hasOwnProperty(Z)&&Ct[Z].objectNumber>=0&&ae("/"+Z+" "+Ct[Z].objectNumber+" 0 R");jr.publish("putGStateDict"),ae(">>")}}(),function(){for(var Z in ae("/XObject <<"),Kn)Kn.hasOwnProperty(Z)&&Kn[Z].objectNumber>=0&&ae("/"+Z+" "+Kn[Z].objectNumber+" 0 R");jr.publish("putXobjectDict"),ae(">>")}(),ae(">>"),ae("endobj")},Yl=function(D){mt[D.fontName]=mt[D.fontName]||{},mt[D.fontName][D.fontStyle]=D.id},it=function(D,Z,fe,je,Ie){var Je={id:"F"+(Object.keys(Le).length+1).toString(10),postScriptName:D,fontName:Z,fontStyle:fe,encoding:je,isStandardFont:Ie||!1,metadata:{}};return jr.publish("addFont",{font:Je,instance:this}),Le[Je.id]=Je,Yl(Je),Je.id},Aa=x.__private__.pdfEscape=x.pdfEscape=function(D,Z){return function(fe,je){var Ie,Je,ct,St,gt,Qt,Et,br,Tr;if(ct=(je=je||{}).sourceEncoding||"Unicode",gt=je.outputEncoding,(je.autoencode||gt)&&Le[lt].metadata&&Le[lt].metadata[ct]&&Le[lt].metadata[ct].encoding&&(St=Le[lt].metadata[ct].encoding,!gt&&Le[lt].encoding&&(gt=Le[lt].encoding),!gt&&St.codePages&&(gt=St.codePages[0]),typeof gt=="string"&&(gt=St[gt]),gt)){for(Et=!1,Qt=[],Ie=0,Je=fe.length;Ie<Je;Ie++)(br=gt[fe.charCodeAt(Ie)])?Qt.push(String.fromCharCode(br)):Qt.push(fe[Ie]),Qt[Ie].charCodeAt(0)>>8&&(Et=!0);fe=Qt.join("")}for(Ie=fe.length;Et===void 0&&Ie!==0;)fe.charCodeAt(Ie-1)>>8&&(Et=!0),Ie--;if(!Et)return fe;for(Qt=je.noBOM?[]:[254,255],Ie=0,Je=fe.length;Ie<Je;Ie++){if((Tr=(br=fe.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qt.push(Tr),Qt.push(br-(Tr<<8))}return String.fromCharCode.apply(void 0,Qt)}(D,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qr=x.__private__.beginPage=function(D){Ve[++er]=[],Zt[er]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},vr(er),Se(Ve[Q])},Yi=function(D,Z){var fe,je,Ie;switch(r=Z||r,typeof D=="string"&&(fe=C(D.toLowerCase()),Array.isArray(fe)&&(je=fe[0],Ie=fe[1])),Array.isArray(D)&&(je=D[0]*Ce,Ie=D[1]*Ce),isNaN(je)&&(je=a[0],Ie=a[1]),(je>14400||Ie>14400)&&(Yr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),je=Math.min(14400,je),Ie=Math.min(14400,Ie)),a=[je,Ie],r.substr(0,1)){case"l":Ie>je&&(a=[Ie,je]);break;case"p":je>Ie&&(a=[Ie,je])}qr(a),el(ed),ae(tl),Ql!==0&&ae(Ql+" J"),Qi!==0&&ae(Qi+" j"),jr.publish("addPage",{pageNumber:er})},Jc=function(D){D>0&&D<=er&&(Ve.splice(D,1),Zt.splice(D,1),er--,Q>er&&(Q=er),this.setPage(Q))},vr=function(D){D>0&&D<=er&&(Q=D)},yr=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ve.length-1},ur=function(D,Z,fe){var je,Ie=void 0;return fe=fe||{},D=D!==void 0?D:Le[lt].fontName,Z=Z!==void 0?Z:Le[lt].fontStyle,je=D.toLowerCase(),mt[je]!==void 0&&mt[je][Z]!==void 0?Ie=mt[je][Z]:mt[D]!==void 0&&mt[D][Z]!==void 0?Ie=mt[D][Z]:fe.disableWarning===!1&&Yr.warn("Unable to look up font label for font '"+D+"', '"+Z+"'. Refer to getFontList() for available fonts."),Ie||fe.noFallback||(Ie=mt.times[Z])==null&&(Ie=mt.times.normal),Ie},Co=x.__private__.putInfo=function(){var D=pr(),Z=function(je){return je};for(var fe in f!==null&&(Z=Hr.encryptor(D,0)),ae("<<"),ae("/Producer ("+Aa(Z("jsPDF "+$t.version))+")"),Ht)Ht.hasOwnProperty(fe)&&Ht[fe]&&ae("/"+fe.substr(0,1).toUpperCase()+fe.substr(1)+" ("+Aa(Z(Ht[fe]))+")");ae("/CreationDate ("+Aa(Z(V))+")"),ae(">>"),ae("endobj")},Qc=x.__private__.putCatalog=function(D){var Z=(D=D||{}).rootDictionaryObjId||ca;switch(pr(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+Z+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var fe=""+pt;fe.substr(fe.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+M(pt)+"]")}switch(Kt||(Kt="continuous"),Kt){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}vt&&ae("/PageMode /"+vt),jr.publish("putCatalog"),ae(">>"),ae("endobj")},fn=x.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(xe+1)),ae("/Root "+xe+" 0 R"),ae("/Info "+(xe-1)+" 0 R"),f!==null&&ae("/Encrypt "+Hr.oid+" 0 R"),ae("/ID [ <"+me+"> <"+me+"> ]"),ae(">>")},mn=x.__private__.putHeader=function(){ae("%PDF-"+N),ae("%")},za=x.__private__.putXRef=function(){var D="0000000000";ae("xref"),ae("0 "+(xe+1)),ae("0000000000 65535 f ");for(var Z=1;Z<=xe;Z++)typeof ke[Z]=="function"?ae((D+ke[Z]()).slice(-10)+" 00000 n "):ke[Z]!==void 0?ae((D+ke[Z]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},Zi=x.__private__.buildDocument=function(){var D;xe=0,be=0,Re=[],ke=[],Te=[],ca=Qr(),da=Qr(),Se(Re),jr.publish("buildDocument"),mn(),yi(),function(){jr.publish("putAdditionalObjects");for(var fe=0;fe<Te.length;fe++){var je=Te[fe];Or(je.objId,!0),ae(je.content),ae("endobj")}jr.publish("postPutAdditionalObjects")}(),D=[],function(){for(var fe in Le)Le.hasOwnProperty(fe)&&(p===!1||p===!0&&b.hasOwnProperty(fe))&&Yo(Le[fe])}(),function(){var fe;for(fe in Ct)Ct.hasOwnProperty(fe)&&iu(Ct[fe])}(),function(){for(var fe in Kn)Kn.hasOwnProperty(fe)&&_s(Kn[fe])}(),function(fe){var je;for(je in ht)ht.hasOwnProperty(je)&&(ht[je]instanceof fd?Pn(ht[je]):ht[je]instanceof Ru&&Pr(ht[je],fe))}(D),jr.publish("putResources"),D.forEach(Ca),Ca({resourcesOid:da,objectOid:Number.MAX_SAFE_INTEGER}),jr.publish("postPutResources"),f!==null&&(Hr.oid=pr(),ae("<<"),ae("/Filter /Standard"),ae("/V "+Hr.v),ae("/R "+Hr.r),ae("/U <"+Hr.toHexString(Hr.U)+">"),ae("/O <"+Hr.toHexString(Hr.O)+">"),ae("/P "+Hr.P),ae(">>"),ae("endobj")),Co(),Qc();var Z=be;return za(),fn(),ae("startxref"),ae(""+Z),ae("%%EOF"),Se(Ve[Q]),Re.join(`
`)},Dr=x.__private__.getBlob=function(D){return new Blob([ot(D)],{type:"application/pdf"})},Zn=x.output=x.__private__.output=(qs=function(D,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",D){case void 0:return Zi();case"save":x.save(Z.filename);break;case"arraybuffer":return ot(Zi());case"blob":return Dr(Zi());case"bloburi":case"bloburl":if(rr.URL!==void 0&&typeof rr.URL.createObjectURL=="function")return rr.URL&&rr.URL.createObjectURL(Dr(Zi()))||void 0;Yr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var fe="",je=Zi();try{fe=LS(je)}catch{fe=LS(unescape(encodeURIComponent(je)))}return"data:application/pdf;filename="+Z.filename+";base64,"+fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(rr)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(Ie=Z.pdfObjectUrl,Je="");var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",St=rr.open();return St!==null&&St.document.write(ct),St}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(rr)==="[object Window]"){var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',Qt=rr.open();if(Qt!==null){Qt.document.write(gt);var Et=this;Qt.document.documentElement.querySelector("#pdfViewer").onload=function(){Qt.document.title=Z.filename,Qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Et.output("bloburl"))}}return Qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(rr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',Tr=rr.open();if(Tr!==null&&(Tr.document.write(br),Tr.document.title=Z.filename),Tr||typeof safari>"u")return Tr;break;case"datauri":case"dataurl":return rr.document.location.href=this.output("datauristring",Z);default:return null}},qs.foo=function(){try{return qs.apply(this,arguments)}catch(fe){var D=fe.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var Z="Error in function "+D.split(`
`)[0].split("<")[0]+": "+fe.message;if(!rr.console)throw new Error(Z);rr.console.error(Z,fe),rr.alert&&alert(Z)}},qs.foo.bar=qs,qs.foo),Zo=function(D){return Array.isArray(ss)===!0&&ss.indexOf(D)>-1};switch(n){case"pt":Ce=1;break;case"mm":Ce=72/25.4;break;case"cm":Ce=72/2.54;break;case"in":Ce=72;break;case"px":Ce=Zo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ce=12;break;case"ex":Ce=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ce=n}var Hr=null;te(),oe();var Sr=x.__private__.getPageInfo=x.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Zt[D].objId,pageNumber:D,pageContext:Zt[D]}},Jn=x.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in Zt)if(Zt[Z].objId===D)break;return Sr(Z)},Me=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Zt[Q].objId,pageNumber:Q,pageContext:Zt[Q]}};x.addPage=function(){return Yi.apply(this,arguments),this},x.setPage=function(){return vr.apply(this,arguments),Se.call(this,Ve[Q]),this},x.insertPage=function(D){return this.addPage(),this.movePage(Q,D),this},x.movePage=function(D,Z){var fe,je;if(D>Z){fe=Ve[D],je=Zt[D];for(var Ie=D;Ie>Z;Ie--)Ve[Ie]=Ve[Ie-1],Zt[Ie]=Zt[Ie-1];Ve[Z]=fe,Zt[Z]=je,this.setPage(Z)}else if(D<Z){fe=Ve[D],je=Zt[D];for(var Je=D;Je<Z;Je++)Ve[Je]=Ve[Je+1],Zt[Je]=Zt[Je+1];Ve[Z]=fe,Zt[Z]=je,this.setPage(Z)}return this},x.deletePage=function(){return Jc.apply(this,arguments),this},x.__private__.text=x.text=function(D,Z,fe,je,Ie){var Je,ct,St,gt,Qt,Et,br,Tr,tr,bt=(je=je||{}).scope||this;if(typeof D=="number"&&typeof Z=="number"&&(typeof fe=="string"||Array.isArray(fe))){var Mn=fe;fe=Z,Z=D,D=Mn}if(arguments[3]instanceof Vt==0?(St=arguments[4],gt=arguments[5],Fr(br=arguments[3])==="object"&&br!==null||(typeof St=="string"&&(gt=St,St=null),typeof br=="string"&&(gt=br,br=null),typeof br=="number"&&(St=br,br=null),je={flags:br,angle:St,align:gt})):(R("The transform parameter of text() with a Matrix value"),tr=Ie),isNaN(Z)||isNaN(fe)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return bt;var nr,sn="",as=typeof je.lineHeightFactor=="number"?je.lineHeightFactor:Ji,Gs=bt.internal.scaleFactor;function ua(tt){return tt=tt.split("	").join(Array(je.TabLen||9).join(" ")),Aa(tt,br)}function So(tt){for(var st,rt=tt.concat(),qt=[],Yt=rt.length;Yt--;)typeof(st=rt.shift())=="string"?qt.push(st):Array.isArray(tt)&&(st.length===1||st[1]===void 0&&st[2]===void 0)?qt.push(st[0]):qt.push([st[0],st[1],st[2]]);return qt}function Eo(tt,st){var rt;if(typeof tt=="string")rt=st(tt)[0];else if(Array.isArray(tt)){for(var qt,Yt,Qn=tt.concat(),Ns=[],os=Qn.length;os--;)typeof(qt=Qn.shift())=="string"?Ns.push(st(qt)[0]):Array.isArray(qt)&&typeof qt[0]=="string"&&(Yt=st(qt[0],qt[1],qt[2]),Ns.push([Yt[0],Yt[1],Yt[2]]));rt=Ns}return rt}var Ci=!1,ko=!0;if(typeof D=="string")Ci=!0;else if(Array.isArray(D)){var Po=D.concat();ct=[];for(var ll,Nn=Po.length;Nn--;)(typeof(ll=Po.shift())!="string"||Array.isArray(ll)&&typeof ll[0]!="string")&&(ko=!1);Ci=ko}if(Ci===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var eo=qe/bt.internal.scaleFactor,cl=eo*(as-1);switch(je.baseline){case"bottom":fe-=cl;break;case"top":fe+=eo-cl;break;case"hanging":fe+=eo-2*cl;break;case"middle":fe+=eo/2-cl}if((Et=je.maxWidth||0)>0&&(typeof D=="string"?D=bt.splitTextToSize(D,Et):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(tt,st){return tt.concat(bt.splitTextToSize(st,Et))},[]))),Je={text:D,x:Z,y:fe,options:je,mutex:{pdfEscape:Aa,activeFontKey:lt,fonts:Le,activeFontSize:qe}},jr.publish("preProcessText",Je),D=Je.text,St=(je=Je.options).angle,tr instanceof Vt==0&&St&&typeof St=="number"){St*=Math.PI/180,je.rotationDirection===0&&(St=-St),_===k&&(St=-St);var to=Math.cos(St),rd=Math.sin(St);tr=new Vt(to,rd,-rd,to,0,0)}else St&&St instanceof Vt&&(tr=St);_!==k||tr||(tr=Xi),(Qt=je.charSpace||Ni)!==void 0&&(sn+=U(J(Qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Tr=je.horizontalScale)!==void 0&&(sn+=U(100*Tr)+` Tz
`),je.lang;var Ir=-1,Sa=je.renderingMode!==void 0?je.renderingMode:je.stroke,is=bt.internal.getCurrentPageInfo().pageContext;switch(Sa){case 0:case!1:case"fill":Ir=0;break;case 1:case!0:case"stroke":Ir=1;break;case 2:case"fillThenStroke":Ir=2;break;case 3:case"invisible":Ir=3;break;case 4:case"fillAndAddForClipping":Ir=4;break;case 5:case"strokeAndAddPathForClipping":Ir=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ir=6;break;case 7:case"addToPathForClipping":Ir=7}var nd=is.usedRenderingMode!==void 0?is.usedRenderingMode:-1;Ir!==-1?sn+=Ir+` Tr
`:nd!==-1&&(sn+=`0 Tr
`),Ir!==-1&&(is.usedRenderingMode=Ir),gt=je.align||"left";var jn,dl=qe*as,ul=bt.internal.pageSize.getWidth(),sd=Le[lt];Qt=je.charSpace||Ni,Et=je.maxWidth||0,br=Object.assign({autoencode:!0,noBOM:!0},je.flags);var ro=[],ws=function(tt){return bt.getStringUnitWidth(tt,{font:sd,charSpace:Qt,fontSize:qe,doKerning:!1})*qe/Gs};if(Object.prototype.toString.call(D)==="[object Array]"){var ha;ct=So(D),gt!=="left"&&(jn=ct.map(ws));var Rs,Ea=0;if(gt==="right"){Z-=jn[0],D=[],Nn=ct.length;for(var ar=0;ar<Nn;ar++)ar===0?(Rs=Jt(Z),ha=Kr(fe)):(Rs=J(Ea-jn[ar]),ha=-dl),D.push([ct[ar],Rs,ha]),Ea=jn[ar]}else if(gt==="center"){Z-=jn[0]/2,D=[],Nn=ct.length;for(var Va=0;Va<Nn;Va++)Va===0?(Rs=Jt(Z),ha=Kr(fe)):(Rs=J((Ea-jn[Va])/2),ha=-dl),D.push([ct[Va],Rs,ha]),Ea=jn[Va]}else if(gt==="left"){D=[],Nn=ct.length;for(var X=0;X<Nn;X++)D.push(ct[X])}else if(gt==="justify"&&sd.encoding==="Identity-H"){D=[],Nn=ct.length,Et=Et!==0?Et:ul;for(var l=0,h=0;h<Nn;h++)if(ha=h===0?Kr(fe):-dl,Rs=h===0?Jt(Z):l,h<Nn-1){var m=J((Et-jn[h])/(ct[h].split(" ").length-1)),g=ct[h].split(" ");D.push([g[0]+" ",Rs,ha]),l=0;for(var y=1;y<g.length;y++){var v=(ws(g[y-1]+" "+g[y])-ws(g[y]))*Gs+m;y==g.length-1?D.push([g[y],v,0]):D.push([g[y]+" ",v,0]),l-=v}}else D.push([ct[h],Rs,ha]);D.push(["",l,0])}else{if(gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],Nn=ct.length,Et=Et!==0?Et:ul,h=0;h<Nn;h++){ha=h===0?Kr(fe):-dl,Rs=h===0?Jt(Z):0;var E=ct[h].split(" ").length-1,I=E>0?(Et-jn[h])/E:0;h<Nn-1?ro.push(U(J(I))):ro.push(0),D.push([ct[h],Rs,ha])}}}(typeof je.R2L=="boolean"?je.R2L:jt)===!0&&(D=Eo(D,function(tt,st,rt){return[tt.split("").reverse().join(""),st,rt]})),Je={text:D,x:Z,y:fe,options:je,mutex:{pdfEscape:Aa,activeFontKey:lt,fonts:Le,activeFontSize:qe}},jr.publish("postProcessText",Je),D=Je.text,nr=Je.mutex.isHex||!1;var L=Le[lt].encoding;L!=="WinAnsiEncoding"&&L!=="StandardEncoding"||(D=Eo(D,function(tt,st,rt){return[ua(tt),st,rt]})),ct=So(D),D=[];for(var q,Y,re,he=Array.isArray(ct[0])?1:0,Ne="",Ae=function(tt,st,rt){var qt="";return rt instanceof Vt?(rt=typeof je.angle=="number"?Xn(rt,new Vt(1,0,0,1,tt,st)):Xn(new Vt(1,0,0,1,tt,st),rt),_===k&&(rt=Xn(new Vt(1,0,0,-1,0,0),rt)),qt=rt.join(" ")+` Tm
`):qt=U(tt)+" "+U(st)+` Td
`,qt},_e=0;_e<ct.length;_e++){switch(Ne="",he){case 1:re=(nr?"<":"(")+ct[_e][0]+(nr?">":")"),q=parseFloat(ct[_e][1]),Y=parseFloat(ct[_e][2]);break;case 0:re=(nr?"<":"(")+ct[_e]+(nr?">":")"),q=Jt(Z),Y=Kr(fe)}ro!==void 0&&ro[_e]!==void 0&&(Ne=ro[_e]+` Tw
`),_e===0?D.push(Ne+Ae(q,Y,tr)+re):he===0?D.push(Ne+re):he===1&&D.push(Ne+Ae(q,Y,tr)+re)}D=he===0?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var We=`BT
/`;return We+=lt+" "+qe+` Tf
`,We+=U(qe*as)+` TL
`,We+=rl+`
`,We+=sn,We+=D,ae(We+="ET"),b[lt]=!0,bt};var ue=x.__private__.clip=x.clip=function(D){return ae(D==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ue("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ae("n"),this};var At=x.__private__.isValidStyle=function(D){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(Z=!0),Z};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(D){return At(D)&&(u=D),this};var wn=x.__private__.getStyle=x.getStyle=function(D){var Z=u;switch(D){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=D}return Z},Os=x.close=function(){return ae("h"),this};x.stroke=function(){return ae("S"),this},x.fill=function(D){return Ao("f",D),this},x.fillEvenOdd=function(D){return Ao("f*",D),this},x.fillStroke=function(D){return Ao("B",D),this},x.fillStrokeEvenOdd=function(D){return Ao("B*",D),this};var Ao=function(D,Z){Fr(Z)==="object"?Wt(Z,D):ae(D)},Jo=function(D){D===null||_===k&&D===void 0||(D=wn(D),ae(D))};function Vs(D,Z,fe,je,Ie){var Je=new Ru(Z||this.boundingBox,fe||this.xStep,je||this.yStep,this.gState,Ie||this.matrix);Je.stream=this.stream;var ct=D+"$$"+this.cloneIndex+++"$$";return Yn(ct,Je),Je}var Wt=function(D,Z){var fe=Lt[D.key],je=ht[fe];if(je instanceof fd)ae("q"),ae(Gr(Z)),je.gState&&x.setGState(je.gState),ae(D.matrix.toString()+" cm"),ae("/"+fe+" sh"),ae("Q");else if(je instanceof Ru){var Ie=new Vt(1,0,0,-1,0,ol());D.matrix&&(Ie=Ie.multiply(D.matrix||Xi),fe=Vs.call(je,D.key,D.boundingBox,D.xStep,D.yStep,Ie).id),ae("q"),ae("/Pattern cs"),ae("/"+fe+" scn"),je.gState&&x.setGState(je.gState),ae(Z),ae("Q")}},Gr=function(D){switch(D){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Zl=x.moveTo=function(D,Z){return ae(U(J(D))+" "+U(K(Z))+" m"),this},Qo=x.lineTo=function(D,Z){return ae(U(J(D))+" "+U(K(Z))+" l"),this},bi=x.curveTo=function(D,Z,fe,je,Ie,Je){return ae([U(J(D)),U(K(Z)),U(J(fe)),U(K(je)),U(J(Ie)),U(K(Je)),"c"].join(" ")),this};x.__private__.line=x.line=function(D,Z,fe,je,Ie){if(isNaN(D)||isNaN(Z)||isNaN(fe)||isNaN(je)||!At(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return _===P?this.lines([[fe-D,je-Z]],D,Z,[1,1],Ie||"S"):this.lines([[fe-D,je-Z]],D,Z,[1,1]).stroke()},x.__private__.lines=x.lines=function(D,Z,fe,je,Ie,Je){var ct,St,gt,Qt,Et,br,Tr,tr,bt,Mn,nr,sn;if(typeof D=="number"&&(sn=fe,fe=Z,Z=D,D=sn),je=je||[1,1],Je=Je||!1,isNaN(Z)||isNaN(fe)||!Array.isArray(D)||!Array.isArray(je)||!At(Ie)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zl(Z,fe),ct=je[0],St=je[1],Qt=D.length,Mn=Z,nr=fe,gt=0;gt<Qt;gt++)(Et=D[gt]).length===2?(Mn=Et[0]*ct+Mn,nr=Et[1]*St+nr,Qo(Mn,nr)):(br=Et[0]*ct+Mn,Tr=Et[1]*St+nr,tr=Et[2]*ct+Mn,bt=Et[3]*St+nr,Mn=Et[4]*ct+Mn,nr=Et[5]*St+nr,bi(br,Tr,tr,bt,Mn,nr));return Je&&Os(),Jo(Ie),this},x.path=function(D){for(var Z=0;Z<D.length;Z++){var fe=D[Z],je=fe.c;switch(fe.op){case"m":Zl(je[0],je[1]);break;case"l":Qo(je[0],je[1]);break;case"c":bi.apply(this,je);break;case"h":Os()}}return this},x.__private__.rect=x.rect=function(D,Z,fe,je,Ie){if(isNaN(D)||isNaN(Z)||isNaN(fe)||isNaN(je)||!At(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return _===P&&(je=-je),ae([U(J(D)),U(K(Z)),U(J(fe)),U(J(je)),"re"].join(" ")),Jo(Ie),this},x.__private__.triangle=x.triangle=function(D,Z,fe,je,Ie,Je,ct){if(isNaN(D)||isNaN(Z)||isNaN(fe)||isNaN(je)||isNaN(Ie)||isNaN(Je)||!At(ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[fe-D,je-Z],[Ie-fe,Je-je],[D-Ie,Z-Je]],D,Z,[1,1],ct,!0),this},x.__private__.roundedRect=x.roundedRect=function(D,Z,fe,je,Ie,Je,ct){if(isNaN(D)||isNaN(Z)||isNaN(fe)||isNaN(je)||isNaN(Ie)||isNaN(Je)||!At(ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var St=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*fe),Je=Math.min(Je,.5*je),this.lines([[fe-2*Ie,0],[Ie*St,0,Ie,Je-Je*St,Ie,Je],[0,je-2*Je],[0,Je*St,-Ie*St,Je,-Ie,Je],[2*Ie-fe,0],[-Ie*St,0,-Ie,-Je*St,-Ie,-Je],[0,2*Je-je],[0,-Je*St,Ie*St,-Je,Ie,-Je]],D+Ie,Z,[1,1],ct,!0),this},x.__private__.ellipse=x.ellipse=function(D,Z,fe,je,Ie){if(isNaN(D)||isNaN(Z)||isNaN(fe)||isNaN(je)||!At(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*fe,ct=4/3*(Math.SQRT2-1)*je;return Zl(D+fe,Z),bi(D+fe,Z-ct,D+Je,Z-je,D,Z-je),bi(D-Je,Z-je,D-fe,Z-ct,D-fe,Z),bi(D-fe,Z+ct,D-Je,Z+je,D,Z+je),bi(D+Je,Z+je,D+fe,Z+ct,D+fe,Z),Jo(Ie),this},x.__private__.circle=x.circle=function(D,Z,fe,je){if(isNaN(D)||isNaN(Z)||isNaN(fe)||!At(je))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,Z,fe,fe,je)},x.setFont=function(D,Z,fe){return fe&&(Z=F(Z,fe)),lt=ur(D,Z,{disableWarning:!1}),this};var Jl=x.__private__.getFont=x.getFont=function(){return Le[ur.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var D,Z,fe={};for(D in mt)if(mt.hasOwnProperty(D))for(Z in fe[D]=[],mt[D])mt[D].hasOwnProperty(Z)&&fe[D].push(Z);return fe},x.addFont=function(D,Z,fe,je,Ie){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(fe=F(fe,je)),it.call(this,D,Z,fe,Ie=Ie||"Identity-H")};var Ji,ed=e.lineWidth||.200025,Ot=x.__private__.getLineWidth=x.getLineWidth=function(){return ed},el=x.__private__.setLineWidth=x.setLineWidth=function(D){return ed=D,ae(U(J(D))+" w"),this};x.__private__.setLineDash=$t.API.setLineDash=$t.API.setLineDashPattern=function(D,Z){if(D=D||[],Z=Z||0,isNaN(Z)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(fe){return U(J(fe))}).join(" "),Z=U(J(Z)),ae("["+D+"] "+Z+" d"),this};var vi=x.__private__.getLineHeight=x.getLineHeight=function(){return qe*Ji};x.__private__.getLineHeight=x.getLineHeight=function(){return qe*Ji};var Xt=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(Ji=D),this},$h=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Ji};Xt(e.lineHeight);var Jt=x.__private__.getHorizontalCoordinate=function(D){return J(D)},Kr=x.__private__.getVerticalCoordinate=function(D){return _===k?D:Zt[Q].mediaBox.topRightY-Zt[Q].mediaBox.bottomLeftY-J(D)},zh=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(D){return U(Jt(D))},td=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(D){return U(Kr(D))},tl=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return nn(tl)},x.__private__.setStrokeColor=x.setDrawColor=function(D,Z,fe,je){return tl=bs({ch1:D,ch2:Z,ch3:fe,ch4:je,pdfColorType:"draw",precision:2}),ae(tl),this};var Wa=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return nn(Wa)},x.__private__.setFillColor=x.setFillColor=function(D,Z,fe,je){return Wa=bs({ch1:D,ch2:Z,ch3:fe,ch4:je,pdfColorType:"fill",precision:2}),ae(Wa),this};var rl=e.textColor||"0 g",wi=x.__private__.getTextColor=x.getTextColor=function(){return nn(rl)};x.__private__.setTextColor=x.setTextColor=function(D,Z,fe,je){return rl=bs({ch1:D,ch2:Z,ch3:fe,ch4:je,pdfColorType:"text",precision:3}),this};var Ni=e.charSpace,nl=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Ni||0)};x.__private__.setCharSpace=x.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ni=D,this};var Ql=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(D){var Z=x.CapJoinStyles[D];if(Z===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ql=Z,ae(Z+" J"),this};var Qi=0;x.__private__.setLineJoin=x.setLineJoin=function(D){var Z=x.CapJoinStyles[D];if(Z===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qi=Z,ae(Z+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(U(J(D))+" M"),this},x.GState=s1,x.setGState=function(D){(D=typeof D=="string"?Ct[or[D]]:qa(null,D)).equals(wt)||(ae("/"+D.id+" gs"),wt=D)};var qa=function(D,Z){if(!D||!or[D]){var fe=!1;for(var je in Ct)if(Ct.hasOwnProperty(je)&&Ct[je].equals(Z)){fe=!0;break}if(fe)Z=Ct[je];else{var Ie="GS"+(Object.keys(Ct).length+1).toString(10);Ct[Ie]=Z,Z.id=Ie}return D&&(or[D]=Z.id),jr.publish("addGState",Z),Z}};x.addGState=function(D,Z){return qa(D,Z),this},x.saveGraphicsState=function(){return ae("q"),yt.push({key:lt,size:qe,color:rl}),this},x.restoreGraphicsState=function(){ae("Q");var D=yt.pop();return lt=D.key,qe=D.size,rl=D.color,wt=null,this},x.setCurrentTransformationMatrix=function(D){return ae(D.toString()+" cm"),this},x.comment=function(D){return ae("#"+D),this};var Tn=function(D,Z){var fe=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return fe},set:function(Je){isNaN(Je)||(fe=parseFloat(Je))}});var je=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return je},set:function(Je){isNaN(Je)||(je=parseFloat(Je))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(Je){Ie=Je.toString()}}),this},ec=function(D,Z,fe,je){Tn.call(this,D,Z),this.type="rect";var Ie=fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(ct){isNaN(ct)||(Ie=parseFloat(ct))}});var Je=je||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(ct){isNaN(ct)||(Je=parseFloat(ct))}}),this},sl=function(){this.page=er,this.currentPage=Q,this.pages=Ve.slice(0),this.pagesContext=Zt.slice(0),this.x=Be,this.y=et,this.matrix=Xe,this.width=ou(Q),this.height=hr(Q),this.outputDestination=Ye,this.id="",this.objectNumber=-1};sl.prototype.restore=function(){er=this.page,Q=this.currentPage,Zt=this.pagesContext,Ve=this.pages,Be=this.x,et=this.y,Xe=this.matrix,lu(Q,this.width),ji(Q,this.height),Ye=this.outputDestination};var tc=function(D,Z,fe,je,Ie){Ts.push(new sl),er=Q=0,Ve=[],Be=D,et=Z,Xe=Ie,qr([fe,je])};for(var al in x.beginFormObject=function(D,Z,fe,je,Ie){return tc(D,Z,fe,je,Ie),this},x.endFormObject=function(D){return function(Z){if(Jr[Z])Ts.pop().restore();else{var fe=new sl,je="Xo"+(Object.keys(Kn).length+1).toString(10);fe.id=je,Jr[Z]=je,Kn[je]=fe,jr.publish("addFormObject",fe),Ts.pop().restore()}}(D),this},x.doFormObject=function(D,Z){var fe=Kn[Jr[D]];return ae("q"),ae(Z.toString()+" cm"),ae("/"+fe.id+" Do"),ae("Q"),this},x.getFormObject=function(D){var Z=Kn[Jr[D]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},x.save=function(D,Z){return D=D||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(hd(Dr(Zi()),D),typeof hd.unload=="function"&&rr.setTimeout&&setTimeout(hd.unload,911),this):new Promise(function(fe,je){try{var Ie=hd(Dr(Zi()),D);typeof hd.unload=="function"&&rr.setTimeout&&setTimeout(hd.unload,911),fe(Ie)}catch(Je){je(Je.message)}})},$t.API)$t.API.hasOwnProperty(al)&&(al==="events"&&$t.API.events.length?function(D,Z){var fe,je,Ie;for(Ie=Z.length-1;Ie!==-1;Ie--)fe=Z[Ie][0],je=Z[Ie][1],D.subscribe.apply(D,[fe].concat(typeof je=="function"?[je]:je))}(jr,$t.API.events):x[al]=$t.API[al]);function ou(D){return Zt[D].mediaBox.topRightX-Zt[D].mediaBox.bottomLeftX}function lu(D,Z){Zt[D].mediaBox.topRightX=Z+Zt[D].mediaBox.bottomLeftX}function hr(D){return Zt[D].mediaBox.topRightY-Zt[D].mediaBox.bottomLeftY}function ji(D,Z){Zt[D].mediaBox.topRightY=Z+Zt[D].mediaBox.bottomLeftY}var il=x.getPageWidth=function(D){return ou(D=D||Q)/Ce},Ha=x.setPageWidth=function(D,Z){lu(D,Z*Ce)},ol=x.getPageHeight=function(D){return hr(D=D||Q)/Ce},Ge=x.setPageHeight=function(D,Z){ji(D,Z*Ce)};return x.internal={pdfEscape:Aa,getStyle:wn,getFont:Jl,getFontSize:Ue,getCharSpace:nl,getTextColor:wi,getLineHeight:vi,getLineHeightFactor:$h,getLineWidth:Ot,write:Fe,getHorizontalCoordinate:Jt,getVerticalCoordinate:Kr,getCoordinateString:zh,getVerticalCoordinateString:td,collections:{},newObject:pr,newAdditionalObject:Nt,newObjectDeferred:Qr,newObjectDeferredBegin:Or,getFilters:Hs,putStream:Is,events:jr,scaleFactor:Ce,pageSize:{getWidth:function(){return il(Q)},setWidth:function(D){Ha(Q,D)},getHeight:function(){return ol(Q)},setHeight:function(D){Ge(Q,D)}},encryptionOptions:f,encryption:Hr,getEncryptor:function(D){return f!==null?Hr.encryptor(D,0):function(Z){return Z}},output:Zn,getNumberOfPages:yr,pages:Ve,out:ae,f2:M,f3:W,getPageInfo:Sr,getPageInfoByObjId:Jn,getCurrentPageInfo:Me,getPDFVersion:j,Point:Tn,Rectangle:ec,Matrix:Vt,hasHotfix:Zo},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return il(Q)},set:function(D){Ha(Q,D)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ol(Q)},set:function(D){Ge(Q,D)},enumerable:!0,configurable:!0}),(function(D){for(var Z=0,fe=at.length;Z<fe;Z++){var je=it.call(this,D[Z][0],D[Z][1],D[Z][2],at[Z][3],!0);p===!1&&(b[je]=!0);var Ie=D[Z][0].split("-");Yl({id:je,fontName:Ie[0],fontStyle:Ie[1]||""})}jr.publish("addFonts",{fonts:Le,dictionary:mt})}).call(x,at),lt="F1",Yi(a,r),jr.publish("initialized"),x}gu.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},gu.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gu.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},gu.prototype.processOwnerPassword=function(e,t){return Qv(Jv(t).substr(0,5),e)},gu.prototype.encryptor=function(e,t){var r=Jv(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Qv(r,n)}},s1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Fr(e)!==Fr(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},$t.API={events:[]},$t.version="3.0.3";var Dn=$t.API,T3=1,au=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mu=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sr=function(e){return e.toFixed(2)},dc=function(e){return e.toFixed(5)};Dn.__acroform__={};var $a=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},US=function(e){return e*T3},Oo=function(e){var t=new OR,r=Rt.internal.getHeight(e)||0,n=Rt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(sr(n)),Number(sr(r))],t},Mle=Dn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Ble=Dn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Fle=Dn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Wn=Dn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Fle(e,t-1)},qn=Dn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Mle(e,t-1)},Hn=Dn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ble(e,t-1)},Ule=Dn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],c=e[3],d={};return d.lowerLeft_X=r(a)||0,d.lowerLeft_Y=n(i+c)||0,d.upperRight_X=r(a+o)||0,d.upperRight_Y=n(i)||0,[Number(sr(d.lowerLeft_X)),Number(sr(d.lowerLeft_Y)),Number(sr(d.upperRight_X)),Number(sr(d.upperRight_Y))]},$le=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=ew(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+sr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Oo(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},ew=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(M){return M.split(`
`)}):a.map(function(M){return[M]});var i=r,o=Rt.internal.getHeight(e)||0;o=o<0?-o:o;var c=Rt.internal.getWidth(e)||0;c=c<0?-c:c;var d=function(M,W,J){if(M+1<a.length){var K=W+" "+a[M+1][0];return np(K,e,J).width<=c-4}return!1};i++;e:for(;i>0;){t="",i--;var u,f,p=np("3",e,i).height,b=e.multiline?o-i:(o-p)/2,x=b+=2,N=0,j=0,w=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+np(t,e,i=12).width+", FieldWidth:"+c+`
`;break}for(var C="",P=0,k=0;k<a.length;k++)if(a.hasOwnProperty(k)){var _=!1;if(a[k].length!==1&&w!==a[k].length-1){if((p+2)*(P+2)+2>o)continue e;C+=a[k][w],_=!0,j=k,k--}else{C=(C+=a[k][w]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var O=parseInt(k),$=d(O,C,i),F=k>=a.length-1;if($&&!F){C+=" ",w=0;continue}if($||F){if(F)j=O;else if(e.multiline&&(p+2)*(P+2)+2>o)continue e}else{if(!e.multiline||(p+2)*(P+2)+2>o)continue e;j=O}}for(var U="",R=N;R<=j;R++){var z=a[R];if(e.multiline){if(R===j){U+=z[w]+" ",w=(w+1)%z.length;continue}if(R===N){U+=z[z.length-1]+" ";continue}}U+=z[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,f=np(U,e,i).width,e.textAlign){case"right":u=c-f-2;break;case"center":u=(c-f)/2;break;default:u=2}t+=sr(u)+" "+sr(x)+` Td
`,t+="("+au(U)+`) Tj
`,t+=-sr(u)+` 0 Td
`,x=-(i+2),f=0,N=_?j:j+1,P++,C=""}break}return n.text=t,n.fontSize=i,n},np=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},zle={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Wle=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},qle=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(wo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(zle)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T3=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new RR,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&Wle(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var c=n[o],d=[],u=c.Rect;if(c.Rect&&(c.Rect=Ule(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Rt.createDefaultAppearanceStream(c),Fr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(d=c.getKeyValueListForStream()),c.Rect=u,c.hasAppearanceStream&&!c.appearanceStreamContent){var f=$le(c);d.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(c.appearanceStreamContent){var p="";for(var b in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(b)){var x=c.appearanceStreamContent[b];if(p+="/"+b+" ",p+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var o in x)if(x.hasOwnProperty(o)){var N=x[o];typeof N=="function"&&(N=N.call(a,c)),p+="/"+o+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=x)=="function"&&(N=N.call(a,c)),p+="/"+o+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);p+=">>"}d.push({key:"AP",value:`<<
`+p+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:c.objId}),a.internal.out("endobj")}i&&function(j,w){for(var C in j)if(j.hasOwnProperty(C)){var P=C,k=j[C];w.internal.newObjectDeferredBegin(k.objId,!0),Fr(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete j[P]}}(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},_R=Dn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Fr(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+au(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},A2=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+au(n(e))+")"},Mo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Mo.prototype.toString=function(){return this.objId+" 0 R"},Mo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Mo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:_R(a,this.objId,this.scope)}):a instanceof Mo?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var OR=function(){Mo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};$a(OR,Mo);var RR=function(){Mo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+au(r(e))+")"}},set:function(r){e=r}})};$a(RR,Mo);var wo=function e(){Mo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');t=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Wn(t,3)},set:function(C){C?this.F=qn(t,3):this.F=Hn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');r=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof a1)return;i="FieldObject"+e.FieldNum++}var C=function(P){return P};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+au(C(i))+")"},set:function(C){i=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(C){i=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/T3:u},set:function(C){u=C}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(C){f=C}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof a1||this instanceof Id))return A2(p,this.objId,this.scope)},set:function(C){C=C.toString(),p=C}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof As==0?A2(b,this.objId,this.scope):b},set:function(C){C=C.toString(),b=this instanceof As==0?C.substr(0,1)==="("?mu(C.substr(1,C.length-2)):mu(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof As==1?mu(b.substr(1,b.length-1)):b},set:function(C){C=C.toString(),b=this instanceof As==1?"/"+C:C}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof As==0?A2(x,this.objId,this.scope):x},set:function(C){C=C.toString(),x=this instanceof As==0?C.substr(0,1)==="("?mu(C.substr(1,C.length-2)):mu(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof As==1?mu(x.substr(1,x.length-1)):x},set:function(C){C=C.toString(),x=this instanceof As==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(C){C=!!C,j=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(C){N=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,1)},set:function(C){C?this.Ff=qn(this.Ff,1):this.Ff=Hn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,2)},set:function(C){C?this.Ff=qn(this.Ff,2):this.Ff=Hn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,3)},set:function(C){C?this.Ff=qn(this.Ff,3):this.Ff=Hn(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');w=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(w){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:w=2;break;case"center":case 1:w=1;break;default:w=0}}})};$a(wo,Mo);var Hu=function(){wo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _R(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(i,o,c){c||(c=1);for(var d,u=[];d=o.exec(i);)u.push(d[c]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,18)},set:function(r){r?this.Ff=qn(this.Ff,18):this.Ff=Hn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=qn(this.Ff,19):this.Ff=Hn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,20)},set:function(r){r?(this.Ff=qn(this.Ff,20),t.sort()):this.Ff=Hn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,22)},set:function(r){r?this.Ff=qn(this.Ff,22):this.Ff=Hn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(r){r?this.Ff=qn(this.Ff,23):this.Ff=Hn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,27)},set:function(r){r?this.Ff=qn(this.Ff,27):this.Ff=Hn(this.Ff,27)}}),this.hasAppearanceStream=!1};$a(Hu,wo);var Vu=function(){Hu.call(this),this.fontName="helvetica",this.combo=!1};$a(Vu,Hu);var Gu=function(){Vu.call(this),this.combo=!0};$a(Gu,Vu);var Ap=function(){Gu.call(this),this.edit=!0};$a(Ap,Gu);var As=function(){wo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,15)},set:function(r){r?this.Ff=qn(this.Ff,15):this.Ff=Hn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,16)},set:function(r){r?this.Ff=qn(this.Ff,16):this.Ff=Hn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,17)},set:function(r){r?this.Ff=qn(this.Ff,17):this.Ff=Hn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(r){r?this.Ff=qn(this.Ff,26):this.Ff=Hn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+au(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Fr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};$a(As,wo);var Sp=function(){As.call(this),this.pushButton=!0};$a(Sp,As);var Ku=function(){As.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};$a(Ku,As);var a1=function(){var e,t;wo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+au(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Fr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$a(a1,wo),Ku.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ku.prototype.createOption=function(e){var t=new a1;return t.Parent=this,t.optionName=e,this.Kids.push(t),Hle.call(this.scope,t),t};var Ep=function(){As.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};$a(Ep,As);var Id=function(){wo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,13)},set:function(t){t?this.Ff=qn(this.Ff,13):this.Ff=Hn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,21)},set:function(t){t?this.Ff=qn(this.Ff,21):this.Ff=Hn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,23)},set:function(t){t?this.Ff=qn(this.Ff,23):this.Ff=Hn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,24)},set:function(t){t?this.Ff=qn(this.Ff,24):this.Ff=Hn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,25)},set:function(t){t?this.Ff=qn(this.Ff,25):this.Ff=Hn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,26)},set:function(t){t?this.Ff=qn(this.Ff,26):this.Ff=Hn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$a(Id,wo);var kp=function(){Id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Wn(this.Ff,14)},set:function(e){e?this.Ff=qn(this.Ff,14):this.Ff=Hn(this.Ff,14)}}),this.password=!0};$a(kp,Id);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Oo(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=ew(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+sr(Rt.internal.getWidth(e))+" "+sr(Rt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+sr(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Oo(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Rt.internal.getHeight(e),o=Rt.internal.getWidth(e),c=ew(e,e.caption);return a.push("1 g"),a.push("0 0 "+sr(o)+" "+sr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+sr(o-1)+" "+sr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+sr(c.fontSize)+" Tf "+n),a.push(c.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Oo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sr(Rt.internal.getWidth(e))+" "+sr(Rt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Rt.RadioButton.Circle.YesNormal,t.D[e]=Rt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Oo(e);t.scope=e.scope;var r=[],n=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Rt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+dc(Rt.internal.getWidth(e)/2)+" "+dc(Rt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Oo(e);t.scope=e.scope;var r=[],n=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Rt.internal.Bezier_C).toFixed(5)),o=Number((n*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+dc(Rt.internal.getWidth(e)/2)+" "+dc(Rt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+dc(Rt.internal.getWidth(e)/2)+" "+dc(Rt.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Oo(e);t.scope=e.scope;var r=[],n=Rt.internal.getWidth(e)<=Rt.internal.getHeight(e)?Rt.internal.getWidth(e)/4:Rt.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Rt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+dc(Rt.internal.getWidth(e)/2)+" "+dc(Rt.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Rt.RadioButton.Cross.YesNormal,t.D[e]=Rt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Oo(e);t.scope=e.scope;var r=[],n=Rt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+sr(Rt.internal.getWidth(e)-2)+" "+sr(Rt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(sr(n.x1.x)+" "+sr(n.x1.y)+" m"),r.push(sr(n.x2.x)+" "+sr(n.x2.y)+" l"),r.push(sr(n.x4.x)+" "+sr(n.x4.y)+" m"),r.push(sr(n.x3.x)+" "+sr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Oo(e);t.scope=e.scope;var r=Rt.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+sr(Rt.internal.getWidth(e))+" "+sr(Rt.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+sr(Rt.internal.getWidth(e)-2)+" "+sr(Rt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(sr(r.x1.x)+" "+sr(r.x1.y)+" m"),n.push(sr(r.x2.x)+" "+sr(r.x2.y)+" l"),n.push(sr(r.x4.x)+" "+sr(r.x4.y)+" m"),n.push(sr(r.x3.x)+" "+sr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Oo(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sr(Rt.internal.getWidth(e))+" "+sr(Rt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Rt.internal.getWidth(e),r=Rt.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Rt.internal.getWidth=function(e){var t=0;return Fr(e)==="object"&&(t=US(e.Rect[2])),t},Rt.internal.getHeight=function(e){var t=0;return Fr(e)==="object"&&(t=US(e.Rect[3])),t};var Hle=Dn.addField=function(e){if(qle(this,e),!(e instanceof wo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dn.AcroFormChoiceField=Hu,Dn.AcroFormListBox=Vu,Dn.AcroFormComboBox=Gu,Dn.AcroFormEditBox=Ap,Dn.AcroFormButton=As,Dn.AcroFormPushButton=Sp,Dn.AcroFormRadioButton=Ku,Dn.AcroFormCheckBox=Ep,Dn.AcroFormTextField=Id,Dn.AcroFormPasswordField=kp,Dn.AcroFormAppearance=Rt,Dn.AcroForm={ChoiceField:Hu,ListBox:Vu,ComboBox:Gu,EditBox:Ap,Button:As,PushButton:Sp,RadioButton:Ku,CheckBox:Ep,TextField:Id,PasswordField:kp,Appearance:Rt},$t.AcroForm={ChoiceField:Hu,ListBox:Vu,ComboBox:Gu,EditBox:Ap,Button:As,PushButton:Sp,RadioButton:Ku,CheckBox:Ep,TextField:Id,PasswordField:kp,Appearance:Rt};$t.AcroForm;function DR(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(M,W){var J,K,V,me,se,oe=r;if((W=W||r)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if($(M))for(se in n)for(V=n[se],J=0;J<V.length;J+=1){for(me=!0,K=0;K<V[J].length;K+=1)if(V[J][K]!==void 0&&V[J][K]!==M[K]){me=!1;break}if(me===!0){oe=se;break}}else for(se in n)for(V=n[se],J=0;J<V.length;J+=1){for(me=!0,K=0;K<V[J].length;K+=1)if(V[J][K]!==void 0&&V[J][K]!==M.charCodeAt(K)){me=!1;break}if(me===!0){oe=se;break}}return oe===r&&W!==r&&(oe=W),oe},i=function M(W){for(var J=this.internal.write,K=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);W.objectId=this.internal.newObject();var me=[];if(me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Image"}),me.push({key:"Width",value:W.width}),me.push({key:"Height",value:W.height}),W.colorSpace===C.INDEXED?me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(W.palette.length/3-1)+" "+("sMask"in W&&W.sMask!==void 0?W.objectId+2:W.objectId+1)+" 0 R]"}):(me.push({key:"ColorSpace",value:"/"+W.colorSpace}),W.colorSpace===C.DEVICE_CMYK&&me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),me.push({key:"BitsPerComponent",value:W.bitsPerComponent}),"decodeParameters"in W&&W.decodeParameters!==void 0&&me.push({key:"DecodeParms",value:"<<"+W.decodeParameters+">>"}),"transparency"in W&&Array.isArray(W.transparency)&&W.transparency.length>0){for(var se="",oe=0,ye=W.transparency.length;oe<ye;oe++)se+=W.transparency[oe]+" "+W.transparency[oe]+" ";me.push({key:"Mask",value:"["+se+"]"})}W.sMask!==void 0&&me.push({key:"SMask",value:W.objectId+1+" 0 R"});var we=W.filter!==void 0?["/"+W.filter]:void 0;if(K({data:W.data,additionalKeyValues:me,alreadyAppliedFilters:we,objectId:W.objectId}),J("endobj"),"sMask"in W&&W.sMask!==void 0){var te,G=(te=W.sMaskBitsPerComponent)!==null&&te!==void 0?te:W.bitsPerComponent,Q={width:W.width,height:W.height,colorSpace:"DeviceGray",bitsPerComponent:G,data:W.sMask};"filter"in W&&(Q.decodeParameters="/Predictor ".concat(W.predictor," /Colors 1 /BitsPerComponent ").concat(G," /Columns ").concat(W.width),Q.filter=W.filter),M.call(this,Q)}if(W.colorSpace===C.INDEXED){var le=this.internal.newObject();K({data:U(new Uint8Array(W.palette)),objectId:le}),J("endobj")}},o=function(){var M=this.internal.collections[t+"images"];for(var W in M)i.call(this,M[W])},c=function(){var M,W=this.internal.collections[t+"images"],J=this.internal.write;for(var K in W)J("/I"+(M=W[K]).index,M.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},u=function(){var M=this.internal.collections[t+"images"];return d.call(this),M},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(M){return typeof e["process"+M.toUpperCase()]=="function"},b=function(M){return Fr(M)==="object"&&M.nodeType===1},x=function(M,W){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var J=""+M.getAttribute("src");if(J.indexOf("data:image/")===0)return Cp(unescape(J).split("base64,").pop());var K=e.loadFile(J,!0);if(K!==void 0)return K}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var V;switch(W){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;default:V="image/jpeg"}return Cp(M.toDataURL(V,1).split("base64,").pop())}},N=function(M){var W=this.internal.collections[t+"images"];if(W){for(var J in W)if(M===W[J].alias)return W[J]}},j=function(M,W,J){return M||W||(M=-96,W=-96),M<0&&(M=-1*J.width*72/M/this.internal.scaleFactor),W<0&&(W=-1*J.height*72/W/this.internal.scaleFactor),M===0&&(M=W*J.width/J.height),W===0&&(W=M*J.height/J.width),[M,W]},w=function(M,W,J,K,V,me){var se=j.call(this,J,K,V),oe=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,we=u.call(this);if(J=se[0],K=se[1],we[V.index]=V,me){me*=Math.PI/180;var te=Math.cos(me),G=Math.sin(me),Q=function(ve){return ve.toFixed(4)},le=[Q(te),Q(G),Q(-1*G),Q(te),0,0,"cm"]}this.internal.write("q"),me?(this.internal.write([1,"0","0",1,oe(M),ye(W+K),"cm"].join(" ")),this.internal.write(le.join(" ")),this.internal.write([oe(J),"0","0",oe(K),"0","0","cm"].join(" "))):this.internal.write([oe(J),"0","0",oe(K),oe(M),ye(W+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},C=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=e.__addimage__.sHashCode=function(M){var W,J,K=0;if(typeof M=="string")for(J=M.length,W=0;W<J;W++)K=(K<<5)-K+M.charCodeAt(W),K|=0;else if($(M))for(J=M.byteLength/2,W=0;W<J;W++)K=(K<<5)-K+M[W],K|=0;return K},_=e.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var W=!0;return M.length===0&&(W=!1),M.length%4!=0&&(W=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(W=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(W=!1),W},O=e.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var W=M.indexOf(",");return W<0?null:M.substring(0,W).trim().endsWith("base64")?M.substring(W+1):null};e.__addimage__.isArrayBuffer=function(M){return M instanceof ArrayBuffer};var $=e.__addimage__.isArrayBufferView=function(M){return M instanceof Int8Array||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array},F=e.__addimage__.binaryStringToUint8Array=function(M){for(var W=M.length,J=new Uint8Array(W),K=0;K<W;K++)J[K]=M.charCodeAt(K);return J},U=e.__addimage__.arrayBufferToBinaryString=function(M){for(var W="",J=$(M)?M:new Uint8Array(M),K=0;K<J.length;K+=8192)W+=String.fromCharCode.apply(null,J.subarray(K,K+8192));return W};e.addImage=function(){var M,W,J,K,V,me,se,oe,ye;if(typeof arguments[1]=="number"?(W=r,J=arguments[1],K=arguments[2],V=arguments[3],me=arguments[4],se=arguments[5],oe=arguments[6],ye=arguments[7]):(W=arguments[1],J=arguments[2],K=arguments[3],V=arguments[4],me=arguments[5],se=arguments[6],oe=arguments[7],ye=arguments[8]),Fr(M=arguments[0])==="object"&&!b(M)&&"imageData"in M){var we=M;M=we.imageData,W=we.format||W||r,J=we.x||J||0,K=we.y||K||0,V=we.w||we.width||V,me=we.h||we.height||me,se=we.alias||se,oe=we.compression||oe,ye=we.rotation||we.angle||ye}var te=this.internal.getFilters();if(oe===void 0&&te.indexOf("FlateEncode")!==-1&&(oe="SLOW"),isNaN(J)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var G=R.call(this,M,W,se,oe);return w.call(this,J,K,V,me,G,ye),this};var R=function(M,W,J,K){var V,me,se;if(typeof M=="string"&&a(M)===r){M=unescape(M);var oe=z(M,!1);(oe!==""||(oe=e.loadFile(M,!0))!==void 0)&&(M=oe)}if(b(M)&&(M=x(M,W)),W=a(M,W),!p(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(((se=J)==null||se.length===0)&&(J=function(ye){return typeof ye=="string"||$(ye)?k(ye):$(ye.data)?k(ye.data):null}(M)),(V=N.call(this,J))||(M instanceof Uint8Array||W==="RGBA"||(me=M,M=F(M)),V=this["process"+W.toUpperCase()](M,f.call(this),J,function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in e.image_compression?ye:P.NONE}(K),me)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},z=e.__addimage__.convertBase64ToBinaryString=function(M,W){W=typeof W!="boolean"||W;var J,K="";if(typeof M=="string"){var V;J=(V=O(M))!==null&&V!==void 0?V:M;try{K=Cp(J)}catch(me){if(W)throw _(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(M){var W,J,K="";if(b(M)&&(M=x(M)),typeof M=="string"&&a(M)===r&&((K=z(M,!1))===""&&(K=e.loadFile(M)||""),M=K),J=a(M),!p(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(M instanceof Uint8Array||(M=F(M)),!(W=this["process"+J.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return W.fileType=J,W}})($t.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};$t.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,p=0;p<u.length&&!f;p++)switch((n=u[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var b=0;b<u.length;b++){n=u[b];var x=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(j.objId),P=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+x(C(n.contents))+")",i+=" /Popup "+w.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+x(C(P))+") >>",j.content=i;var k=j.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(i+=" /Open true"),i+=" >>",w.content=i,this.internal.write(j.objId,"0 R",w.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+c(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+x(N(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var O=this.annotations._nameMap[n.options.name];n.options.pageNumber=O.page,n.options.top=O.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+x(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var $=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+$+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var c=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:d(r),y:u(n),w:d(r+a),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,c,d=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var f=this.splitTextToSize(r,c).length;o=Math.ceil(u*f)}else c=d,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=d/2),i.align==="right"&&(n-=d),this.link(n,a-u,c,o,i),d},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}($t.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(j){return t[j.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},c=e.__arabicParser__.isArabicEndLetter=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(j){return o(j)&&a.indexOf(j.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(j){return o(j)&&i(j)&&t[j.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(j){var w=0,C=r,P="",k=0;for(w=0;w<j.length;w+=1)C[j.charCodeAt(w)]!==void 0?(k++,typeof(C=C[j.charCodeAt(w)])=="number"&&(P+=String.fromCharCode(C),C=r,k=0),w===j.length-1&&(C=r,P+=j.charAt(w-(k-1)),w-=k-1,k=0)):(C=r,P+=j.charAt(w-k),w-=k,k=0);return P};e.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var b=e.__arabicParser__.getCorrectForm=function(j,w,C){return o(j)?i(j)===!1?-1:!u(j)||!o(w)&&!o(C)||!o(C)&&c(w)||c(j)&&!o(w)||c(j)&&d(w)||c(j)&&c(w)?0:f(j)&&o(w)&&!c(w)&&o(C)&&u(C)?3:c(j)||!o(C)?1:2:-1},x=function(j){var w=0,C=0,P=0,k="",_="",O="",$=(j=j||"").split("\\s+"),F=[];for(w=0;w<$.length;w+=1){for(F.push(""),C=0;C<$[w].length;C+=1)k=$[w][C],_=$[w][C-1],O=$[w][C+1],o(k)?(P=b(k,_,O),F[w]+=P!==-1?String.fromCharCode(t[k.charCodeAt(0)][P]):k):F[w]+=k;F[w]=p(F[w])}return F.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var j,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(w)){var P=0;for(C=[],P=0;P<w.length;P+=1)Array.isArray(w[P])?C.push([x(w[P][0]),w[P][1],w[P][2]]):C.push([x(w[P])]);j=C}else j=x(w);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};e.events.push(["preProcessText",N])}($t.API),$t.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(c){o=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}($t.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(j){p=j}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(j){b=j}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(j){x=j}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(j){N=j}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return n.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,u){n.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),b=u.scaleFactor||this.internal.scaleFactor,x=0,N=0,j=0,w=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var C=u.maxWidth;C>0?typeof d=="string"?d=this.splitTextToSize(d,C):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(k,_){return k.concat(w.splitTextToSize(_,C))},[])):d=Array.isArray(d)?d:[d];for(var P=0;P<d.length;P++)x<(j=this.getStringUnitWidth(d[P],{font:p})*f)&&(x=j);return x!==0&&(N=d.length),{w:x/=b,h:Math.max((N*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/b,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,b=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===d.lineNumber?(d.x=(u.x||0)+(u.width||0),d.y=u.y||0):u.y+u.height+d.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=p.top,x&&b&&(this.printHeaderRow(d.lineNumber,!0),d.y+=b[0].height)):d.y=u.y+u.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-f,d.y+f,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+f,{align:"center",baseline:"top",maxWidth:d.width-f-f}):this.text(d.text,d.x+f,d.y+f,{align:"left",baseline:"top",maxWidth:d.width-f-f})),this.internal.__cell__.lastCell=d,this};e.table=function(d,u,f,p,b){if(n.call(this),!f)throw new Error("No data for PDF table.");var x,N,j,w,C=[],P=[],k=[],_={},O={},$=[],F=[],U=(b=b||{}).autoSize||!1,R=b.printHeaders!==!1,z=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,M=b.margins||Object.assign({width:this.getPageWidth()},t),W=typeof b.padding=="number"?b.padding:3,J=b.headerBackgroundColor||"#c8c8c8",K=b.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=W,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=K,this.setFontSize(z),p==null)P=C=Object.keys(f[0]),k=C.map(function(){return"left"});else if(Array.isArray(p)&&Fr(p[0])==="object")for(C=p.map(function(we){return we.name}),P=p.map(function(we){return we.prompt||we.name||""}),k=p.map(function(we){return we.align||"left"}),x=0;x<p.length;x+=1)O[p[x].name]=.7499990551181103*p[x].width;else Array.isArray(p)&&typeof p[0]=="string"&&(P=C=p,k=C.map(function(){return"left"}));if(U||Array.isArray(p)&&typeof p[0]=="string")for(x=0;x<C.length;x+=1){for(_[w=C[x]]=f.map(function(we){return we[w]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(P[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=_[w],this.setFont(void 0,"normal"),j=0;j<N.length;j+=1)$.push(this.getTextDimensions(N[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[w]=Math.max.apply(null,$)+W+W,$=[]}if(R){var V={};for(x=0;x<C.length;x+=1)V[C[x]]={},V[C[x]].text=P[x],V[C[x]].align=k[x];var me=c.call(this,V,O);F=C.map(function(we){return new i(d,u,O[we],me,V[we].text,void 0,V[we].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var se=p.reduce(function(we,te){return we[te.name]=te.align,we},{});for(x=0;x<f.length;x+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:x,data:f[x]},this);var oe=c.call(this,f[x],O);for(j=0;j<C.length;j+=1){var ye=f[x][C[j]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:x,col:j,data:ye},this),o.call(this,new i(d,u,O[C[j]],oe,ye,x+2,se[C[j]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=u,this};var c=function(d,u){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(d).map(function(x){var N=d[x];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,u[x]-f-f)},this).map(function(x){return this.getLineHeightFactor()*x.length*p/b+f+f},this).reduce(function(x,N){return Math.max(x,N)},0)};e.setTableHeaderRow=function(d){n.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){f=this.internal.__cell__.tableHeaderRow[x].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,b.push(f)),f.lineNumber=d;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(N)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),r=!1}}($t.API);var LR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},MR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tw=DR(MR),BR=[100,200,300,400,500,600,700,800,900],Vle=DR(BR);function S2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return LR[i=i||"normal"]?i:"normal"}(e.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(e.weight),a=function(i){return typeof tw[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function $S(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Gle={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},zS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function WS(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qS(e){return e.trimLeft()}function Kle(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Xle(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var sp,HS,VS,pu,ap,GS,KS,XS,E2=["times"];function YS(e,t,r,n,a){var i=4,o=JS;switch(a){case $t.API.image_compression.FAST:i=1,o=ZS;break;case $t.API.image_compression.MEDIUM:i=6,o=QS;break;case $t.API.image_compression.SLOW:i=9,o=eE}e=function(d,u,f,p){for(var b,x=d.length/u,N=new Uint8Array(d.length+x),j=[Yle,ZS,JS,QS,eE],w=0;w<x;w+=1){var C=w*u,P=d.subarray(C,C+u);if(p)N.set(p(P,f,b),C+w);else{for(var k=j.length,_=[],O=0;O<k;O+=1)_[O]=j[O](P,f,b);var $=Jle(_.concat());N.set(_[$],C+w)}b=P}return N}(e,t,Math.ceil(r*n/8),o);var c=Kv(e,{level:i});return $t.API.__addimage__.arrayBufferToBinaryString(c)}function Yle(e){var t=Array.apply([],e);return t.unshift(0),t}function ZS(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function JS(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=e[i]-o+256&255}return a}function QS(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=e[i-t]||0,c=r&&r[i]||0;a[i+1]=e[i]+256-(o+c>>>1)&255}return a}function eE(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=Zle(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function Zle(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function Jle(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function k2(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return FR(e,a)>>i&o}function tE(e,t,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),c=(1<<n)-1,d=(t&c)<<o;(function(u,f,p){if(f+1<u.byteLength)u.setUint16(f,p,!1);else{var b=p>>8&255;u.setUint8(f,b)}})(e,i,FR(e,i)&~(c<<o)&65535|d)}function FR(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Qle(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var c=null,d=null;i&&(c=t,d=o,t+=3*o);var u=!0,f=[],p=0,b=null,x=0,N=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((M=e[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var j=e[t++];p=e[t++]|e[t++]<<8,b=e[t++],1&j||(b=null),x=j>>2&7,t++;break;case 254:for(;;){if(!((M=e[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var w=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,P=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,_=e[t++],O=_>>6&1,$=1<<1+(7&_),F=c,U=d,R=!1;_>>7&&(R=!0,F=t,U=$,t+=3*$);var z=t;for(t++;;){var M;if(!((M=e[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}f.push({x:w,y:C,width:P,height:k,has_local_palette:R,palette_offset:F,palette_size:U,data_offset:z,data_length:t-z,transparent_index:b,interlaced:!!O,delay:p,disposal:x});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return N},this.frameInfo=function(W){if(W<0||W>=f.length)throw new Error("Frame index out of range.");return f[W]},this.decodeAndBlitFrameBGRA=function(W,J){var K=this.frameInfo(W),V=K.width*K.height,me=new Uint8Array(V);rE(e,K.data_offset,me,V);var se=K.palette_offset,oe=K.transparent_index;oe===null&&(oe=256);var ye=K.width,we=r-ye,te=ye,G=4*(K.y*r+K.x),Q=4*((K.y+K.height)*r+K.x),le=G,ve=4*we;K.interlaced===!0&&(ve+=4*r*7);for(var xe=8,ke=0,Re=me.length;ke<Re;++ke){var be=me[ke];if(te===0&&(te=ye,(le+=ve)>=Q&&(ve=4*we+4*r*(xe-1),le=G+(ye+we)*(xe<<1),xe>>=1)),be===oe)le+=4;else{var Te=e[se+3*be],Ve=e[se+3*be+1],Oe=e[se+3*be+2];J[le++]=Oe,J[le++]=Ve,J[le++]=Te,J[le++]=255}--te}},this.decodeAndBlitFrameRGBA=function(W,J){var K=this.frameInfo(W),V=K.width*K.height,me=new Uint8Array(V);rE(e,K.data_offset,me,V);var se=K.palette_offset,oe=K.transparent_index;oe===null&&(oe=256);var ye=K.width,we=r-ye,te=ye,G=4*(K.y*r+K.x),Q=4*((K.y+K.height)*r+K.x),le=G,ve=4*we;K.interlaced===!0&&(ve+=4*r*7);for(var xe=8,ke=0,Re=me.length;ke<Re;++ke){var be=me[ke];if(te===0&&(te=ye,(le+=ve)>=Q&&(ve=4*we+4*r*(xe-1),le=G+(ye+we)*(xe<<1),xe>>=1)),be===oe)le+=4;else{var Te=e[se+3*be],Ve=e[se+3*be+1],Oe=e[se+3*be+2];J[le++]=Te,J[le++]=Ve,J[le++]=Oe,J[le++]=255}--te}}}function rE(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,c=o+1,d=a+1,u=(1<<d)-1,f=0,p=0,b=0,x=e[t++],N=new Int32Array(4096),j=null;;){for(;f<16&&x!==0;)p|=e[t++]<<f,f+=8,x===1?x=e[t++]:--x;if(f<d)break;var w=p&u;if(p>>=d,f-=d,w!==i){if(w===o)break;for(var C=w<c?w:j,P=0,k=C;k>i;)k=N[k]>>8,++P;var _=k;if(b+P+(C!==w?1:0)>n)return void Yr.log("Warning, gif stream longer than expected.");r[b++]=_;var O=b+=P;for(C!==w&&(r[b++]=_),k=C;P--;)k=N[k],r[--O]=255&k,k>>=8;j!==null&&c<4096&&(N[c++]=j<<8|_,c>=u+1&&d<12&&(++d,u=u<<1|1)),j=w}else c=o+1,u=(1<<(d=a+1))-1,j=null}return b!==n&&Yr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function P2(e){var t,r,n,a,i,o=Math.floor,c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(64),p=new Array(65535),b=new Array(65535),x=new Array(64),N=new Array(64),j=[],w=0,C=7,P=new Array(64),k=new Array(64),_=new Array(64),O=new Array(256),$=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function me(G,Q){for(var le=0,ve=0,xe=new Array,ke=1;ke<=16;ke++){for(var Re=1;Re<=G[ke];Re++)xe[Q[ve]]=[],xe[Q[ve]][0]=le,xe[Q[ve]][1]=ke,ve++,le++;le*=2}return xe}function se(G){for(var Q=G[0],le=G[1]-1;le>=0;)Q&1<<le&&(w|=1<<C),le--,--C<0&&(w==255?(oe(255),oe(0)):oe(w),C=7,w=0)}function oe(G){j.push(G)}function ye(G){oe(G>>8&255),oe(255&G)}function we(G,Q,le,ve,xe){for(var ke,Re=xe[0],be=xe[240],Te=function(qe,pt){var Ue,jt,vt,Gt,Kt,_t,mr,Ht,lt,Ce,Be=0;for(lt=0;lt<8;++lt){Ue=qe[Be],jt=qe[Be+1],vt=qe[Be+2],Gt=qe[Be+3],Kt=qe[Be+4],_t=qe[Be+5],mr=qe[Be+6];var et=Ue+(Ht=qe[Be+7]),Xe=Ue-Ht,Le=jt+mr,mt=jt-mr,yt=vt+_t,ht=vt-_t,Lt=Gt+Kt,Ct=Gt-Kt,or=et+Lt,wt=et-Lt,er=Le+yt,Zt=Le-yt;qe[Be]=or+er,qe[Be+4]=or-er;var jr=.707106781*(Zt+wt);qe[Be+2]=wt+jr,qe[Be+6]=wt-jr;var ss=.382683433*((or=Ct+ht)-(Zt=mt+Xe)),Kn=.5411961*or+ss,Jr=1.306562965*Zt+ss,Ts=.707106781*(er=ht+mt),Vt=Xe+Ts,Xn=Xe-Ts;qe[Be+5]=Xn+Kn,qe[Be+3]=Xn-Kn,qe[Be+1]=Vt+Jr,qe[Be+7]=Vt-Jr,Be+=8}for(Be=0,lt=0;lt<8;++lt){Ue=qe[Be],jt=qe[Be+8],vt=qe[Be+16],Gt=qe[Be+24],Kt=qe[Be+32],_t=qe[Be+40],mr=qe[Be+48];var Xi=Ue+(Ht=qe[Be+56]),Yn=Ue-Ht,qs=jt+mr,pr=jt-mr,Qr=vt+_t,Or=vt-_t,Nt=Gt+Kt,ca=Gt-Kt,da=Xi+Nt,nn=Xi-Nt,bs=qs+Qr,Hs=qs-Qr;qe[Be]=da+bs,qe[Be+32]=da-bs;var Is=.707106781*(Hs+nn);qe[Be+16]=nn+Is,qe[Be+48]=nn-Is;var vs=.382683433*((da=ca+Or)-(Hs=pr+Yn)),yi=.5411961*da+vs,Yo=1.306562965*Hs+vs,_s=.707106781*(bs=Or+pr),Pn=Yn+_s,Pr=Yn-_s;qe[Be+40]=Pr+yi,qe[Be+24]=Pr-yi,qe[Be+8]=Pn+Yo,qe[Be+56]=Pn-Yo,Be++}for(lt=0;lt<64;++lt)Ce=qe[lt]*pt[lt],x[lt]=Ce>0?Ce+.5|0:Ce-.5|0;return x}(G,Q),Ve=0;Ve<64;++Ve)N[F[Ve]]=Te[Ve];var Oe=N[0]-le;le=N[0],Oe==0?se(ve[0]):(se(ve[b[ke=32767+Oe]]),se(p[ke]));for(var Ye=63;Ye>0&&N[Ye]==0;)Ye--;if(Ye==0)return se(Re),le;for(var Se,ae=1;ae<=Ye;){for(var Fe=ae;N[ae]==0&&ae<=Ye;)++ae;var ot=ae-Fe;if(ot>=16){Se=ot>>4;for(var at=1;at<=Se;++at)se(be);ot&=15}ke=32767+N[ae],se(xe[(ot<<4)+b[ke]]),se(p[ke]),ae++}return Ye!=63&&se(Re),le}function te(G){G=Math.min(Math.max(G,1),100),i!=G&&(function(Q){for(var le=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ve=0;ve<64;ve++){var xe=o((le[ve]*Q+50)/100);xe=Math.min(Math.max(xe,1),255),c[F[ve]]=xe}for(var ke=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Re=0;Re<64;Re++){var be=o((ke[Re]*Q+50)/100);be=Math.min(Math.max(be,1),255),d[F[Re]]=be}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,Oe=0;Oe<8;Oe++)for(var Ye=0;Ye<8;Ye++)u[Ve]=1/(c[F[Ve]]*Te[Oe]*Te[Ye]*8),f[Ve]=1/(d[F[Ve]]*Te[Oe]*Te[Ye]*8),Ve++}(G<50?Math.floor(5e3/G):Math.floor(200-2*G)),i=G)}this.encode=function(G,Q){Q&&te(Q),j=new Array,w=0,C=7,ye(65496),ye(65504),ye(16),oe(74),oe(70),oe(73),oe(70),oe(0),oe(1),oe(1),oe(0),ye(1),ye(1),oe(0),oe(0),function(){ye(65499),ye(132),oe(0);for(var jt=0;jt<64;jt++)oe(c[jt]);oe(1);for(var vt=0;vt<64;vt++)oe(d[vt])}(),function(jt,vt){ye(65472),ye(17),oe(8),ye(vt),ye(jt),oe(3),oe(1),oe(17),oe(0),oe(2),oe(17),oe(1),oe(3),oe(17),oe(1)}(G.width,G.height),function(){ye(65476),ye(418),oe(0);for(var jt=0;jt<16;jt++)oe(U[jt+1]);for(var vt=0;vt<=11;vt++)oe(R[vt]);oe(16);for(var Gt=0;Gt<16;Gt++)oe(z[Gt+1]);for(var Kt=0;Kt<=161;Kt++)oe(M[Kt]);oe(1);for(var _t=0;_t<16;_t++)oe(W[_t+1]);for(var mr=0;mr<=11;mr++)oe(J[mr]);oe(17);for(var Ht=0;Ht<16;Ht++)oe(K[Ht+1]);for(var lt=0;lt<=161;lt++)oe(V[lt])}(),ye(65498),ye(12),oe(3),oe(1),oe(0),oe(2),oe(17),oe(3),oe(17),oe(0),oe(63),oe(0);var le=0,ve=0,xe=0;w=0,C=7,this.encode.displayName="_encode_";for(var ke,Re,be,Te,Ve,Oe,Ye,Se,ae,Fe=G.data,ot=G.width,at=G.height,qe=4*ot,pt=0;pt<at;){for(ke=0;ke<qe;){for(Ve=qe*pt+ke,Ye=-1,Se=0,ae=0;ae<64;ae++)Oe=Ve+(Se=ae>>3)*qe+(Ye=4*(7&ae)),pt+Se>=at&&(Oe-=qe*(pt+1+Se-at)),ke+Ye>=qe&&(Oe-=ke+Ye-qe+4),Re=Fe[Oe++],be=Fe[Oe++],Te=Fe[Oe++],P[ae]=($[Re]+$[be+256|0]+$[Te+512|0]>>16)-128,k[ae]=($[Re+768|0]+$[be+1024|0]+$[Te+1280|0]>>16)-128,_[ae]=($[Re+1280|0]+$[be+1536|0]+$[Te+1792|0]>>16)-128;le=we(P,u,le,t,n),ve=we(k,f,ve,r,a),xe=we(_,f,xe,r,a),ke+=32}pt+=8}if(C>=0){var Ue=[];Ue[1]=C+1,Ue[0]=(1<<C+1)-1,se(Ue)}return ye(65497),new Uint8Array(j)},e=e||50,function(){for(var G=String.fromCharCode,Q=0;Q<256;Q++)O[Q]=G(Q)}(),t=me(U,R),r=me(W,J),n=me(z,M),a=me(K,V),function(){for(var G=1,Q=2,le=1;le<=15;le++){for(var ve=G;ve<Q;ve++)b[32767+ve]=le,p[32767+ve]=[],p[32767+ve][1]=le,p[32767+ve][0]=ve;for(var xe=-(Q-1);xe<=-G;xe++)b[32767+xe]=le,p[32767+xe]=[],p[32767+xe][1]=le,p[32767+xe][0]=Q-1+xe;G<<=1,Q<<=1}}(),function(){for(var G=0;G<256;G++)$[G]=19595*G,$[G+256|0]=38470*G,$[G+512|0]=7471*G+32768,$[G+768|0]=-11059*G,$[G+1024|0]=-21709*G,$[G+1280|0]=32768*G+8421375,$[G+1536|0]=-27439*G,$[G+1792|0]=-5329*G}(),te(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function oo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function nE(e){function t(R){if(!R)throw Error("assert :P")}function r(R,z,M){for(var W=0;4>W;W++)if(R[z+W]!=M.charCodeAt(W))return!0;return!1}function n(R,z,M,W,J){for(var K=0;K<J;K++)R[z+K]=M[W+K]}function a(R,z,M,W){for(var J=0;J<W;J++)R[z+J]=M}function i(R){return new Int32Array(R)}function o(R,z){for(var M=[],W=0;W<R;W++)M.push(new z);return M}function c(R,z){var M=[];return function W(J,K,V){for(var me=V[K],se=0;se<me&&(J.push(V.length>K+1?[]:new z),!(V.length<K+1));se++)W(J[se],K+1,V)}(M,0,R),M}var d=function(){var R=this;function z(S,T){for(var B=1<<T-1>>>0;S&B;)B>>>=1;return B?(S&B-1)+B:S}function M(S,T,B,H,ee){t(!(H%B));do S[T+(H-=B)]=ee;while(0<H)}function W(S,T,B,H,ee){if(t(2328>=ee),512>=ee)var ne=i(512);else if((ne=i(ee))==null)return 0;return function(ie,ce,de,pe,Ee,ze){var ge,Pe,De=ce,Ze=1<<de,$e=i(16),Qe=i(16);for(t(Ee!=0),t(pe!=null),t(ie!=null),t(0<de),Pe=0;Pe<Ee;++Pe){if(15<pe[Pe])return 0;++$e[pe[Pe]]}if($e[0]==Ee)return 0;for(Qe[1]=0,ge=1;15>ge;++ge){if($e[ge]>1<<ge)return 0;Qe[ge+1]=Qe[ge]+$e[ge]}for(Pe=0;Pe<Ee;++Pe)ge=pe[Pe],0<pe[Pe]&&(ze[Qe[ge]++]=Pe);if(Qe[15]==1)return(pe=new J).g=0,pe.value=ze[0],M(ie,De,1,Ze,pe),Ze;var nt,ut=-1,dt=Ze-1,Ut=0,It=1,cr=1,Mt=1<<de;for(Pe=0,ge=1,Ee=2;ge<=de;++ge,Ee<<=1){if(It+=cr<<=1,0>(cr-=$e[ge]))return 0;for(;0<$e[ge];--$e[ge])(pe=new J).g=ge,pe.value=ze[Pe++],M(ie,De+Ut,Ee,Mt,pe),Ut=z(Ut,ge)}for(ge=de+1,Ee=2;15>=ge;++ge,Ee<<=1){if(It+=cr<<=1,0>(cr-=$e[ge]))return 0;for(;0<$e[ge];--$e[ge]){if(pe=new J,(Ut&dt)!=ut){for(De+=Mt,nt=1<<(ut=ge)-de;15>ut&&!(0>=(nt-=$e[ut]));)++ut,nt<<=1;Ze+=Mt=1<<(nt=ut-de),ie[ce+(ut=Ut&dt)].g=nt+de,ie[ce+ut].value=De-ce-ut}pe.g=ge-de,pe.value=ze[Pe++],M(ie,De+(Ut>>de),Ee,Mt,pe),Ut=z(Ut,ge)}}return It!=2*Qe[15]-1?0:Ze}(S,T,B,H,ee,ne)}function J(){this.value=this.g=0}function K(){this.value=this.g=0}function V(){this.G=o(5,J),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ws,K)}function me(S,T,B,H){t(S!=null),t(T!=null),t(2147483648>H),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=T,S.pa=B,S.Jd=T,S.Yc=B+H,S.Zc=4<=H?B+H-4+1:B,Re(S)}function se(S,T){for(var B=0;0<T--;)B|=Te(S,128)<<T;return B}function oe(S,T){var B=se(S,T);return be(S)?-B:B}function ye(S,T,B,H){var ee,ne=0;for(t(S!=null),t(T!=null),t(4294967288>H),S.Sb=H,S.Ra=0,S.u=0,S.h=0,4<H&&(H=4),ee=0;ee<H;++ee)ne+=T[B+ee]<<8*ee;S.Ra=ne,S.bb=H,S.oa=T,S.pa=B}function we(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<Ea-8>>>0,++S.bb,S.u-=8;ve(S)&&(S.h=1,S.u=0)}function te(S,T){if(t(0<=T),!S.h&&T<=Rs){var B=le(S)&ha[T];return S.u+=T,we(S),B}return S.h=1,S.u=0}function G(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function le(S){return S.Ra>>>(S.u&Ea-1)>>>0}function ve(S){return t(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>Ea}function xe(S,T){S.u=T,S.h=ve(S)}function ke(S){S.u>=ar&&(t(S.u>=ar),we(S))}function Re(S){t(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(t(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function be(S){return se(S,1)}function Te(S,T){var B=S.Ca;0>S.b&&Re(S);var H=S.b,ee=B*T>>>8,ne=(S.I>>>H>ee)+0;for(ne?(B-=ee,S.I-=ee+1<<H>>>0):B=ee+1,H=B,ee=0;256<=H;)ee+=8,H>>=8;return H=7^ee+Va[H],S.b-=H,S.Ca=(B<<H)-1,ne}function Ve(S,T,B){S[T+0]=B>>24&255,S[T+1]=B>>16&255,S[T+2]=B>>8&255,S[T+3]=255&B}function Oe(S,T){return S[T+0]|S[T+1]<<8}function Ye(S,T){return Oe(S,T)|S[T+2]<<16}function Se(S,T){return Oe(S,T)|Oe(S,T+2)<<16}function ae(S,T){var B=1<<T;return t(S!=null),t(0<T),S.X=i(B),S.X==null?0:(S.Mb=32-T,S.Xa=T,1)}function Fe(S,T){t(S!=null),t(T!=null),t(S.Xa==T.Xa),n(T.X,0,S.X,0,1<<T.Xa)}function ot(){this.X=[],this.Xa=this.Mb=0}function at(S,T,B,H){t(B!=null),t(H!=null);var ee=B[0],ne=H[0];return ee==0&&(ee=(S*ne+T/2)/T),ne==0&&(ne=(T*ee+S/2)/S),0>=ee||0>=ne?0:(B[0]=ee,H[0]=ne,1)}function qe(S,T){return S+(1<<T)-1>>>T}function pt(S,T){return((4278255360&S)+(4278255360&T)>>>0&4278255360)+((16711935&S)+(16711935&T)>>>0&16711935)>>>0}function Ue(S,T){R[T]=function(B,H,ee,ne,ie,ce,de){var pe;for(pe=0;pe<ie;++pe){var Ee=R[S](ce[de+pe-1],ee,ne+pe);ce[de+pe]=pt(B[H+pe],Ee)}}}function jt(){this.ud=this.hd=this.jd=0}function vt(S,T){return((4278124286&(S^T))>>>1)+(S&T)>>>0}function Gt(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function Kt(S,T){return Gt(S+(S-T+.5>>1))}function _t(S,T,B){return Math.abs(T-B)-Math.abs(S-B)}function mr(S,T,B,H,ee,ne,ie){for(H=ne[ie-1],B=0;B<ee;++B)ne[ie+B]=H=pt(S[T+B],H)}function Ht(S,T,B,H,ee){var ne;for(ne=0;ne<B;++ne){var ie=S[T+ne],ce=ie>>8&255,de=16711935&(de=(de=16711935&ie)+((ce<<16)+ce));H[ee+ne]=(4278255360&ie)+de>>>0}}function lt(S,T){T.jd=255&S,T.hd=S>>8&255,T.ud=S>>16&255}function Ce(S,T,B,H,ee,ne){var ie;for(ie=0;ie<H;++ie){var ce=T[B+ie],de=ce>>>8,pe=ce,Ee=255&(Ee=(Ee=ce>>>16)+((S.jd<<24>>24)*(de<<24>>24)>>>5));pe=255&(pe=(pe+=(S.hd<<24>>24)*(de<<24>>24)>>>5)+((S.ud<<24>>24)*(Ee<<24>>24)>>>5)),ee[ne+ie]=(4278255360&ce)+(Ee<<16)+pe}}function Be(S,T,B,H,ee){R[T]=function(ne,ie,ce,de,pe,Ee,ze,ge,Pe){for(de=ze;de<ge;++de)for(ze=0;ze<Pe;++ze)pe[Ee++]=ee(ce[H(ne[ie++])])},R[S]=function(ne,ie,ce,de,pe,Ee,ze){var ge=8>>ne.b,Pe=ne.Ea,De=ne.K[0],Ze=ne.w;if(8>ge)for(ne=(1<<ne.b)-1,Ze=(1<<ge)-1;ie<ce;++ie){var $e,Qe=0;for($e=0;$e<Pe;++$e)$e&ne||(Qe=H(de[pe++])),Ee[ze++]=ee(De[Qe&Ze]),Qe>>=ge}else R["VP8LMapColor"+B](de,pe,De,Ze,Ee,ze,ie,ce,Pe)}}function et(S,T,B,H,ee){for(B=T+B;T<B;){var ne=S[T++];H[ee++]=ne>>16&255,H[ee++]=ne>>8&255,H[ee++]=255&ne}}function Xe(S,T,B,H,ee){for(B=T+B;T<B;){var ne=S[T++];H[ee++]=ne>>16&255,H[ee++]=ne>>8&255,H[ee++]=255&ne,H[ee++]=ne>>24&255}}function Le(S,T,B,H,ee){for(B=T+B;T<B;){var ne=(ie=S[T++])>>16&240|ie>>12&15,ie=240&ie|ie>>28&15;H[ee++]=ne,H[ee++]=ie}}function mt(S,T,B,H,ee){for(B=T+B;T<B;){var ne=(ie=S[T++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;H[ee++]=ne,H[ee++]=ie}}function yt(S,T,B,H,ee){for(B=T+B;T<B;){var ne=S[T++];H[ee++]=255&ne,H[ee++]=ne>>8&255,H[ee++]=ne>>16&255}}function ht(S,T,B,H,ee,ne){if(ne==0)for(B=T+B;T<B;)Ve(H,((ne=S[T++])[0]>>24|ne[1]>>8&65280|ne[2]<<8&16711680|ne[3]<<24)>>>0),ee+=32;else n(H,ee,S,T,B)}function Lt(S,T){R[T][0]=R[S+"0"],R[T][1]=R[S+"1"],R[T][2]=R[S+"2"],R[T][3]=R[S+"3"],R[T][4]=R[S+"4"],R[T][5]=R[S+"5"],R[T][6]=R[S+"6"],R[T][7]=R[S+"7"],R[T][8]=R[S+"8"],R[T][9]=R[S+"9"],R[T][10]=R[S+"10"],R[T][11]=R[S+"11"],R[T][12]=R[S+"12"],R[T][13]=R[S+"13"],R[T][14]=R[S+"0"],R[T][15]=R[S+"0"]}function Ct(S){return S==Hx||S==Vx||S==sm||S==Gx}function or(){this.eb=[],this.size=this.A=this.fb=0}function wt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new or,this.f.kb=new wt,this.sd=null}function Zt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ss(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Kn(S,T){var B=S.T,H=T.ba.f.RGBA,ee=H.eb,ne=H.fb+S.ka*H.A,ie=Si[T.ba.S],ce=S.y,de=S.O,pe=S.f,Ee=S.N,ze=S.ea,ge=S.W,Pe=T.cc,De=T.dc,Ze=T.Mc,$e=T.Nc,Qe=S.ka,nt=S.ka+S.T,ut=S.U,dt=ut+1>>1;for(Qe==0?ie(ce,de,null,null,pe,Ee,ze,ge,pe,Ee,ze,ge,ee,ne,null,null,ut):(ie(T.ec,T.fc,ce,de,Pe,De,Ze,$e,pe,Ee,ze,ge,ee,ne-H.A,ee,ne,ut),++B);Qe+2<nt;Qe+=2)Pe=pe,De=Ee,Ze=ze,$e=ge,Ee+=S.Rc,ge+=S.Rc,ne+=2*H.A,ie(ce,(de+=2*S.fa)-S.fa,ce,de,Pe,De,Ze,$e,pe,Ee,ze,ge,ee,ne-H.A,ee,ne,ut);return de+=S.fa,S.j+nt<S.o?(n(T.ec,T.fc,ce,de,ut),n(T.cc,T.dc,pe,Ee,dt),n(T.Mc,T.Nc,ze,ge,dt),B--):1&nt||ie(ce,de,null,null,pe,Ee,ze,ge,pe,Ee,ze,ge,ee,ne+H.A,null,null,ut),B}function Jr(S,T,B){var H=S.F,ee=[S.J];if(H!=null){var ne=S.U,ie=T.ba.S,ce=ie==nm||ie==sm;T=T.ba.f.RGBA;var de=[0],pe=S.ka;de[0]=S.T,S.Kb&&(pe==0?--de[0]:(--pe,ee[0]-=S.width),S.j+S.ka+S.T==S.o&&(de[0]=S.o-S.j-pe));var Ee=T.eb;pe=T.fb+pe*T.A,S=D3(H,ee[0],S.width,ne,de,Ee,pe+(ce?0:3),T.A),t(B==de),S&&Ct(ie)&&ad(Ee,pe,ce,ne,de,T.A)}return 0}function Ts(S){var T=S.ma,B=T.ba.S,H=11>B,ee=B==tm||B==rm||B==nm||B==qx||B==12||Ct(B);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!ul(T.Oa,S,ee?11:12))return 0;if(ee&&Ct(B)&&ua(),S.da)alert("todo:use_scaling");else{if(H){if(T.Ib=ss,S.Kb){if(B=S.U+1>>1,T.memory=i(S.U+2*B),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+S.U,T.Mc=T.cc,T.Nc=T.dc+B,T.Ib=Kn,ua()}}else alert("todo:EmitYUV");ee&&(T.Jb=Jr,H&&as())}if(H&&!Z3){for(S=0;256>S;++S)zD[S]=89858*(S-128)+im>>am,HD[S]=-22014*(S-128)+im,qD[S]=-45773*(S-128),WD[S]=113618*(S-128)+im>>am;for(S=qh;S<Yx;++S)T=76283*(S-16)+im>>am,VD[S-qh]=Ir(T,255),GD[S-qh]=Ir(T+8>>4,15);Z3=1}return 1}function Vt(S){var T=S.ma,B=S.U,H=S.T;return t(!(1&S.ka)),0>=B||0>=H?0:(B=T.Ib(S,T),T.Jb!=null&&T.Jb(S,T,B),T.Dc+=B,1)}function Xn(S){S.ma.memory=null}function Xi(S,T,B,H){return te(S,8)!=47?0:(T[0]=te(S,14)+1,B[0]=te(S,14)+1,H[0]=te(S,1),te(S,3)!=0?0:!S.h)}function Yn(S,T){if(4>S)return S+1;var B=S-2>>1;return(2+(1&S)<<B)+te(T,B)+1}function qs(S,T){return 120<T?T-120:1<=(B=((B=kD[T-1])>>4)*S+(8-(15&B)))?B:1;var B}function pr(S,T,B){var H=le(B),ee=S[T+=255&H].g-8;return 0<ee&&(xe(B,B.u+8),H=le(B),T+=S[T].value,T+=H&(1<<ee)-1),xe(B,B.u+S[T].g),S[T].value}function Qr(S,T,B){return B.g+=S.g,B.value+=S.value<<T>>>0,t(8>=B.g),S.g}function Or(S,T,B){var H=S.xc;return t((T=H==0?0:S.vc[S.md*(B>>H)+(T>>H)])<S.Wb),S.Ya[T]}function Nt(S,T,B,H){var ee=S.ab,ne=S.c*T,ie=S.C;T=ie+T;var ce=B,de=H;for(H=S.Ta,B=S.Ua;0<ee--;){var pe=S.gc[ee],Ee=ie,ze=T,ge=ce,Pe=de,De=(de=H,ce=B,pe.Ea);switch(t(Ee<ze),t(ze<=pe.nc),pe.hc){case 2:h(ge,Pe,(ze-Ee)*De,de,ce);break;case 0:var Ze=Ee,$e=ze,Qe=de,nt=ce,ut=(Mt=pe).Ea;Ze==0&&(X(ge,Pe,null,null,1,Qe,nt),mr(ge,Pe+1,0,0,ut-1,Qe,nt+1),Pe+=ut,nt+=ut,++Ze);for(var dt=1<<Mt.b,Ut=dt-1,It=qe(ut,Mt.b),cr=Mt.K,Mt=Mt.w+(Ze>>Mt.b)*It;Ze<$e;){var wr=cr,ls=Mt,dr=1;for(l(ge,Pe,Qe,nt-ut,1,Qe,nt);dr<ut;){var Bt=(dr&~Ut)+dt;Bt>ut&&(Bt=ut),(0,E[wr[ls++]>>8&15])(ge,Pe+ +dr,Qe,nt+dr-ut,Bt-dr,Qe,nt+dr),dr=Bt}Pe+=ut,nt+=ut,++Ze&Ut||(Mt+=It)}ze!=pe.nc&&n(de,ce-De,de,ce+(ze-Ee-1)*De,De);break;case 1:for(De=ge,$e=Pe,ut=(ge=pe.Ea)-(nt=ge&~(Qe=(Pe=1<<pe.b)-1)),Ze=qe(ge,pe.b),dt=pe.K,pe=pe.w+(Ee>>pe.b)*Ze;Ee<ze;){for(Ut=dt,It=pe,cr=new jt,Mt=$e+nt,wr=$e+ge;$e<Mt;)lt(Ut[It++],cr),I(cr,De,$e,Pe,de,ce),$e+=Pe,ce+=Pe;$e<wr&&(lt(Ut[It++],cr),I(cr,De,$e,ut,de,ce),$e+=ut,ce+=ut),++Ee&Qe||(pe+=Ze)}break;case 3:if(ge==de&&Pe==ce&&0<pe.b){for($e=de,ge=De=ce+(ze-Ee)*De-(nt=(ze-Ee)*qe(pe.Ea,pe.b)),Pe=de,Qe=ce,Ze=[],nt=(ut=nt)-1;0<=nt;--nt)Ze[nt]=Pe[Qe+nt];for(nt=ut-1;0<=nt;--nt)$e[ge+nt]=Ze[nt];m(pe,Ee,ze,de,De,de,ce)}else m(pe,Ee,ze,ge,Pe,de,ce)}ce=H,de=B}de!=B&&n(H,B,ce,de,ne)}function ca(S,T){var B=S.V,H=S.Ba+S.c*S.C,ee=T-S.C;if(t(T<=S.l.o),t(16>=ee),0<ee){var ne=S.l,ie=S.Ta,ce=S.Ua,de=ne.width;if(Nt(S,ee,B,H),ee=ce=[ce],t((B=S.C)<(H=T)),t(ne.v<ne.va),H>ne.o&&(H=ne.o),B<ne.j){var pe=ne.j-B;B=ne.j,ee[0]+=pe*de}if(B>=H?B=0:(ee[0]+=4*ne.v,ne.ka=B-ne.j,ne.U=ne.va-ne.v,ne.T=H-B,B=1),B){if(ce=ce[0],11>(B=S.ca).S){var Ee=B.f.RGBA,ze=(H=B.S,ee=ne.U,ne=ne.T,pe=Ee.eb,Ee.A),ge=ne;for(Ee=Ee.fb+S.Ma*Ee.A;0<ge--;){var Pe=ie,De=ce,Ze=ee,$e=pe,Qe=Ee;switch(H){case em:L(Pe,De,Ze,$e,Qe);break;case tm:q(Pe,De,Ze,$e,Qe);break;case Hx:q(Pe,De,Ze,$e,Qe),ad($e,Qe,0,Ze,1,0);break;case z3:he(Pe,De,Ze,$e,Qe);break;case rm:ht(Pe,De,Ze,$e,Qe,1);break;case Vx:ht(Pe,De,Ze,$e,Qe,1),ad($e,Qe,0,Ze,1,0);break;case nm:ht(Pe,De,Ze,$e,Qe,0);break;case sm:ht(Pe,De,Ze,$e,Qe,0),ad($e,Qe,1,Ze,1,0);break;case qx:Y(Pe,De,Ze,$e,Qe);break;case Gx:Y(Pe,De,Ze,$e,Qe),R3($e,Qe,Ze,1,0);break;case W3:re(Pe,De,Ze,$e,Qe);break;default:t(0)}ce+=de,Ee+=ze}S.Ma+=ne}else alert("todo:EmitRescaledRowsYUVA");t(S.Ma<=B.height)}}S.C=T,t(S.C<=S.i)}function da(S){var T;if(0<S.ua)return 0;for(T=0;T<S.Wb;++T){var B=S.Ya[T].G,H=S.Ya[T].H;if(0<B[1][H[1]+0].g||0<B[2][H[2]+0].g||0<B[3][H[3]+0].g)return 0}return 1}function nn(S,T,B,H,ee,ne){if(S.Z!=0){var ie=S.qd,ce=S.rd;for(t(nc[S.Z]!=null);T<B;++T)nc[S.Z](ie,ce,H,ee,H,ee,ne),ie=H,ce=ee,ee+=ne;S.qd=ie,S.rd=ce}}function bs(S,T){var B=S.l.ma,H=B.Z==0||B.Z==1?S.l.j:S.C;if(H=S.C<H?H:S.C,t(T<=S.l.o),T>H){var ee=S.l.width,ne=B.ca,ie=B.tb+ee*H,ce=S.V,de=S.Ba+S.c*H,pe=S.gc;t(S.ab==1),t(pe[0].hc==3),y(pe[0],H,T,ce,de,ne,ie),nn(B,H,T,ne,ie,ee)}S.C=S.Ma=T}function Hs(S,T,B,H,ee,ne,ie){var ce=S.$/H,de=S.$%H,pe=S.m,Ee=S.s,ze=B+S.$,ge=ze;ee=B+H*ee;var Pe=B+H*ne,De=280+Ee.ua,Ze=S.Pb?ce:16777216,$e=0<Ee.ua?Ee.Wa:null,Qe=Ee.wc,nt=ze<Pe?Or(Ee,de,ce):null;t(S.C<ne),t(Pe<=ee);var ut=!1;e:for(;;){for(;ut||ze<Pe;){var dt=0;if(ce>=Ze){var Ut=ze-B;t((Ze=S).Pb),Ze.wd=Ze.m,Ze.xd=Ut,0<Ze.s.ua&&Fe(Ze.s.Wa,Ze.s.vb),Ze=ce+TD}if(de&Qe||(nt=Or(Ee,de,ce)),t(nt!=null),nt.Qb&&(T[ze]=nt.qb,ut=!0),!ut)if(ke(pe),nt.jc){dt=pe,Ut=T;var It=ze,cr=nt.pd[le(dt)&ws-1];t(nt.jc),256>cr.g?(xe(dt,dt.u+cr.g),Ut[It]=cr.value,dt=0):(xe(dt,dt.u+cr.g-256),t(256<=cr.value),dt=cr.value),dt==0&&(ut=!0)}else dt=pr(nt.G[0],nt.H[0],pe);if(pe.h)break;if(ut||256>dt){if(!ut)if(nt.nd)T[ze]=(nt.qb|dt<<8)>>>0;else{if(ke(pe),ut=pr(nt.G[1],nt.H[1],pe),ke(pe),Ut=pr(nt.G[2],nt.H[2],pe),It=pr(nt.G[3],nt.H[3],pe),pe.h)break;T[ze]=(It<<24|ut<<16|dt<<8|Ut)>>>0}if(ut=!1,++ze,++de>=H&&(de=0,++ce,ie!=null&&ce<=ne&&!(ce%16)&&ie(S,ce),$e!=null))for(;ge<ze;)dt=T[ge++],$e.X[(506832829*dt&4294967295)>>>$e.Mb]=dt}else if(280>dt){if(dt=Yn(dt-256,pe),Ut=pr(nt.G[4],nt.H[4],pe),ke(pe),Ut=qs(H,Ut=Yn(Ut,pe)),pe.h)break;if(ze-B<Ut||ee-ze<dt)break e;for(It=0;It<dt;++It)T[ze+It]=T[ze+It-Ut];for(ze+=dt,de+=dt;de>=H;)de-=H,++ce,ie!=null&&ce<=ne&&!(ce%16)&&ie(S,ce);if(t(ze<=ee),de&Qe&&(nt=Or(Ee,de,ce)),$e!=null)for(;ge<ze;)dt=T[ge++],$e.X[(506832829*dt&4294967295)>>>$e.Mb]=dt}else{if(!(dt<De))break e;for(ut=dt-280,t($e!=null);ge<ze;)dt=T[ge++],$e.X[(506832829*dt&4294967295)>>>$e.Mb]=dt;dt=ze,t(!(ut>>>(Ut=$e).Xa)),T[dt]=Ut.X[ut],ut=!0}ut||t(pe.h==ve(pe))}if(S.Pb&&pe.h&&ze<ee)t(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Fe(S.s.vb,S.s.Wa);else{if(pe.h)break e;ie!=null&&ie(S,ce>ne?ne:ce),S.a=0,S.$=ze-B}return 1}return S.a=3,0}function Is(S){t(S!=null),S.vc=null,S.yc=null,S.Ya=null;var T=S.Wa;T!=null&&(T.X=null),S.vb=null,t(S!=null)}function vs(){var S=new gt;return S==null?null:(S.a=0,S.xb=V3,Lt("Predictor","VP8LPredictors"),Lt("Predictor","VP8LPredictors_C"),Lt("PredictorAdd","VP8LPredictorsAdd"),Lt("PredictorAdd","VP8LPredictorsAdd_C"),h=Ht,I=Ce,L=et,q=Xe,Y=Le,re=mt,he=yt,R.VP8LMapColor32b=g,R.VP8LMapColor8b=v,S)}function yi(S,T,B,H,ee){var ne=1,ie=[S],ce=[T],de=H.m,pe=H.s,Ee=null,ze=0;e:for(;;){if(B)for(;ne&&te(de,1);){var ge=ie,Pe=ce,De=H,Ze=1,$e=De.m,Qe=De.gc[De.ab],nt=te($e,2);if(De.Oc&1<<nt)ne=0;else{switch(De.Oc|=1<<nt,Qe.hc=nt,Qe.Ea=ge[0],Qe.nc=Pe[0],Qe.K=[null],++De.ab,t(4>=De.ab),nt){case 0:case 1:Qe.b=te($e,3)+2,Ze=yi(qe(Qe.Ea,Qe.b),qe(Qe.nc,Qe.b),0,De,Qe.K),Qe.K=Qe.K[0];break;case 3:var ut,dt=te($e,8)+1,Ut=16<dt?0:4<dt?1:2<dt?2:3;if(ge[0]=qe(Qe.Ea,Ut),Qe.b=Ut,ut=Ze=yi(dt,1,0,De,Qe.K)){var It,cr=dt,Mt=Qe,wr=1<<(8>>Mt.b),ls=i(wr);if(ls==null)ut=0;else{var dr=Mt.K[0],Bt=Mt.w;for(ls[0]=Mt.K[0][0],It=1;It<1*cr;++It)ls[It]=pt(dr[Bt+It],ls[It-1]);for(;It<4*wr;++It)ls[It]=0;Mt.K[0]=null,Mt.K[0]=ls,ut=1}}Ze=ut;break;case 2:break;default:t(0)}ne=Ze}}if(ie=ie[0],ce=ce[0],ne&&te(de,1)&&!(ne=1<=(ze=te(de,4))&&11>=ze)){H.a=3;break e}var xt;if(xt=ne)t:{var Bn,ir,Nr,an=H,Ds=ie,fa=ce,In=ze,Xs=B,ma=an.m,cs=an.s,Cr=[null],Lr=1,_n=0,Mr=PD[In];r:for(;;){if(Xs&&te(ma,1)){var Ls=te(ma,3)+2,so=qe(Ds,Ls),Fn=qe(fa,Ls),ka=so*Fn;if(!yi(so,Fn,0,an,Cr))break r;for(Cr=Cr[0],cs.xc=Ls,Bn=0;Bn<ka;++Bn){var Xr=Cr[Bn]>>8&65535;Cr[Bn]=Xr,Xr>=Lr&&(Lr=Xr+1)}}if(ma.h)break r;for(ir=0;5>ir;++ir){var ds=q3[ir];!ir&&0<In&&(ds+=1<<In),_n<ds&&(_n=ds)}var Ka=o(Lr*Mr,J),pa=Lr,Xa=o(pa,V);if(Xa==null)var Ya=null;else t(65536>=pa),Ya=Xa;var Pa=i(_n);if(Ya==null||Pa==null||Ka==null){an.a=1;break r}var Za=Ka;for(Bn=Nr=0;Bn<Lr;++Bn){var en=Ya[Bn],Ja=en.G,ao=en.H,id=0,pl=1,Ms=0;for(ir=0;5>ir;++ir){ds=q3[ir],Ja[ir]=Za,ao[ir]=Nr,!ir&&0<In&&(ds+=1<<In);s:{var lm,Zx=ds,cm=an,Hh=Pa,YD=Za,ZD=Nr,Jx=0,sc=cm.m,JD=te(sc,1);if(a(Hh,0,0,Zx),JD){var QD=te(sc,1)+1,eL=te(sc,1),ej=te(sc,eL==0?1:8);Hh[ej]=1,QD==2&&(Hh[ej=te(sc,8)]=1);var dm=1}else{var tj=i(19),rj=te(sc,4)+4;if(19<rj){cm.a=3;var um=0;break s}for(lm=0;lm<rj;++lm)tj[ED[lm]]=te(sc,3);var Qx=void 0,Vh=void 0,nj=cm,tL=tj,hm=Zx,sj=Hh,ey=0,ac=nj.m,aj=8,ij=o(128,J);n:for(;W(ij,0,7,tL,19);){if(te(ac,1)){var rL=2+2*te(ac,3);if((Qx=2+te(ac,rL))>hm)break n}else Qx=hm;for(Vh=0;Vh<hm&&Qx--;){ke(ac);var oj=ij[0+(127&le(ac))];xe(ac,ac.u+oj.g);var cu=oj.value;if(16>cu)sj[Vh++]=cu,cu!=0&&(aj=cu);else{var nL=cu==16,lj=cu-16,sL=AD[lj],cj=te(ac,CD[lj])+sL;if(Vh+cj>hm)break n;for(var aL=nL?aj:0;0<cj--;)sj[Vh++]=aL}}ey=1;break n}ey||(nj.a=3),dm=ey}(dm=dm&&!sc.h)&&(Jx=W(YD,ZD,8,Hh,Zx)),dm&&Jx!=0?um=Jx:(cm.a=3,um=0)}if(um==0)break r;if(pl&&SD[ir]==1&&(pl=Za[Nr].g==0),id+=Za[Nr].g,Nr+=um,3>=ir){var Gh,ty=Pa[0];for(Gh=1;Gh<ds;++Gh)Pa[Gh]>ty&&(ty=Pa[Gh]);Ms+=ty}}if(en.nd=pl,en.Qb=0,pl&&(en.qb=(Ja[3][ao[3]+0].value<<24|Ja[1][ao[1]+0].value<<16|Ja[2][ao[2]+0].value)>>>0,id==0&&256>Ja[0][ao[0]+0].value&&(en.Qb=1,en.qb+=Ja[0][ao[0]+0].value<<8)),en.jc=!en.Qb&&6>Ms,en.jc){var fm,gl=en;for(fm=0;fm<ws;++fm){var ic=fm,oc=gl.pd[ic],mm=gl.G[0][gl.H[0]+ic];256<=mm.value?(oc.g=mm.g+256,oc.value=mm.value):(oc.g=0,oc.value=0,ic>>=Qr(mm,8,oc),ic>>=Qr(gl.G[1][gl.H[1]+ic],16,oc),ic>>=Qr(gl.G[2][gl.H[2]+ic],0,oc),Qr(gl.G[3][gl.H[3]+ic],24,oc))}}}cs.vc=Cr,cs.Wb=Lr,cs.Ya=Ya,cs.yc=Ka,xt=1;break t}xt=0}if(!(ne=xt)){H.a=3;break e}if(0<ze){if(pe.ua=1<<ze,!ae(pe.Wa,ze)){H.a=1,ne=0;break e}}else pe.ua=0;var ry=H,dj=ie,iL=ce,ny=ry.s,sy=ny.xc;if(ry.c=dj,ry.i=iL,ny.md=qe(dj,sy),ny.wc=sy==0?-1:(1<<sy)-1,B){H.xb=MD;break e}if((Ee=i(ie*ce))==null){H.a=1,ne=0;break e}ne=(ne=Hs(H,Ee,0,ie,ce,ce,null))&&!de.h;break e}return ne?(ee!=null?ee[0]=Ee:(t(Ee==null),t(B)),H.$=0,B||Is(pe)):Is(pe),ne}function Yo(S,T){var B=S.c*S.i,H=B+T+16*T;return t(S.c<=T),S.V=i(H),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+B+T,1)}function _s(S,T){var B=S.C,H=T-B,ee=S.V,ne=S.Ba+S.c*B;for(t(T<=S.l.o);0<H;){var ie=16<H?16:H,ce=S.l.ma,de=S.l.width,pe=de*ie,Ee=ce.ca,ze=ce.tb+de*B,ge=S.Ta,Pe=S.Ua;Nt(S,ie,ee,ne),L3(ge,Pe,Ee,ze,pe),nn(ce,B,B+ie,Ee,ze,de),H-=ie,ee+=ie*S.c,B+=ie}t(B==T),S.C=S.Ma=T}function Pn(){this.ub=this.yd=this.td=this.Rb=0}function Pr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function iu(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ca(){this.Yb=function(){var S=[];return function T(B,H,ee){for(var ne=ee[H],ie=0;ie<ne&&(B.push(ee.length>H+1?[]:0),!(ee.length<H+1));ie++)T(B[ie],H+1,ee)}(S,0,[3,11]),S}()}function Yl(){this.jb=i(3),this.Wc=c([4,8],Ca),this.Xc=c([4,17],Ca)}function it(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Aa(){this.ld=this.La=this.dd=this.tc=0}function qr(){this.Na=this.la=0}function Yi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Jc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Aa),this.Y=0,this.ya=Array(new Jc),this.aa=0,this.l=new Co}function yr(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ur(){this.cb=this.a=0,this.sc="",this.m=new G,this.Od=new Pn,this.Kc=new Pr,this.ed=new it,this.Qa=new iu,this.Ic=this.$c=this.Aa=0,this.D=new vr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,G),this.ia=0,this.pb=o(4,Yi),this.Pa=new Yl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new yr),this.Hd=0,this.rb=Array(new qr),this.sb=0,this.wa=Array(new Aa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Jc),this.L=this.aa=0,this.gd=c([4,2],Aa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Co(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qc(){var S=new ur;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Wh||(Wh=Zi)),S}function fn(S,T,B){return S.a==0&&(S.a=T,S.sc=B,S.cb=0),0}function mn(S,T,B){return 3<=B&&S[T+0]==157&&S[T+1]==1&&S[T+2]==42}function za(S,T){if(S==null)return 0;if(S.a=0,S.sc="OK",T==null)return fn(S,2,"null VP8Io passed to VP8GetHeaders()");var B=T.data,H=T.w,ee=T.ha;if(4>ee)return fn(S,7,"Truncated header.");var ne=B[H+0]|B[H+1]<<8|B[H+2]<<16,ie=S.Od;if(ie.Rb=!(1&ne),ie.td=ne>>1&7,ie.yd=ne>>4&1,ie.ub=ne>>5,3<ie.td)return fn(S,3,"Incorrect keyframe parameters.");if(!ie.yd)return fn(S,4,"Frame not displayable.");H+=3,ee-=3;var ce=S.Kc;if(ie.Rb){if(7>ee)return fn(S,7,"cannot parse picture header");if(!mn(B,H,ee))return fn(S,3,"Bad code word");ce.c=16383&(B[H+4]<<8|B[H+3]),ce.Td=B[H+4]>>6,ce.i=16383&(B[H+6]<<8|B[H+5]),ce.Ud=B[H+6]>>6,H+=7,ee-=7,S.za=ce.c+15>>4,S.Ub=ce.i+15>>4,T.width=ce.c,T.height=ce.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((ne=S.Pa).jb,0,255,ne.jb.length),t((ne=S.Qa)!=null),ne.Cb=0,ne.Bb=0,ne.Fb=1,a(ne.Zb,0,0,ne.Zb.length),a(ne.Lb,0,0,ne.Lb)}if(ie.ub>ee)return fn(S,7,"bad partition length");me(ne=S.m,B,H,ie.ub),H+=ie.ub,ee-=ie.ub,ie.Rb&&(ce.Ld=be(ne),ce.Kd=be(ne)),ce=S.Qa;var de,pe=S.Pa;if(t(ne!=null),t(ce!=null),ce.Cb=be(ne),ce.Cb){if(ce.Bb=be(ne),be(ne)){for(ce.Fb=be(ne),de=0;4>de;++de)ce.Zb[de]=be(ne)?oe(ne,7):0;for(de=0;4>de;++de)ce.Lb[de]=be(ne)?oe(ne,6):0}if(ce.Bb)for(de=0;3>de;++de)pe.jb[de]=be(ne)?se(ne,8):255}else ce.Bb=0;if(ne.Ka)return fn(S,3,"cannot parse segment header");if((ce=S.ed).zd=be(ne),ce.Tb=se(ne,6),ce.wb=se(ne,3),ce.Pc=be(ne),ce.Pc&&be(ne)){for(pe=0;4>pe;++pe)be(ne)&&(ce.vd[pe]=oe(ne,6));for(pe=0;4>pe;++pe)be(ne)&&(ce.od[pe]=oe(ne,6))}if(S.L=ce.Tb==0?0:ce.zd?1:2,ne.Ka)return fn(S,3,"cannot parse filter header");var Ee=ee;if(ee=de=H,H=de+Ee,ce=Ee,S.Xb=(1<<se(S.m,2))-1,Ee<3*(pe=S.Xb))B=7;else{for(de+=3*pe,ce-=3*pe,Ee=0;Ee<pe;++Ee){var ze=B[ee+0]|B[ee+1]<<8|B[ee+2]<<16;ze>ce&&(ze=ce),me(S.Jc[+Ee],B,de,ze),de+=ze,ce-=ze,ee+=3}me(S.Jc[+pe],B,de,ce),B=de<H?0:5}if(B!=0)return fn(S,B,"cannot parse partitions");for(B=se(de=S.m,7),ee=be(de)?oe(de,4):0,H=be(de)?oe(de,4):0,ce=be(de)?oe(de,4):0,pe=be(de)?oe(de,4):0,de=be(de)?oe(de,4):0,Ee=S.Qa,ze=0;4>ze;++ze){if(Ee.Cb){var ge=Ee.Zb[ze];Ee.Fb||(ge+=B)}else{if(0<ze){S.pb[ze]=S.pb[0];continue}ge=B}var Pe=S.pb[ze];Pe.Sc[0]=Kx[Ir(ge+ee,127)],Pe.Sc[1]=Xx[Ir(ge+0,127)],Pe.Eb[0]=2*Kx[Ir(ge+H,127)],Pe.Eb[1]=101581*Xx[Ir(ge+ce,127)]>>16,8>Pe.Eb[1]&&(Pe.Eb[1]=8),Pe.Qc[0]=Kx[Ir(ge+pe,117)],Pe.Qc[1]=Xx[Ir(ge+de,127)],Pe.lc=ge+de}if(!ie.Rb)return fn(S,4,"Not a key frame.");for(be(ne),ie=S.Pa,B=0;4>B;++B){for(ee=0;8>ee;++ee)for(H=0;3>H;++H)for(ce=0;11>ce;++ce)pe=Te(ne,DD[B][ee][H][ce])?se(ne,8):OD[B][ee][H][ce],ie.Wc[B][ee].Yb[H][ce]=pe;for(ee=0;17>ee;++ee)ie.Xc[B][ee]=ie.Wc[B][LD[ee]]}return S.kc=be(ne),S.kc&&(S.Bd=se(ne,8)),S.cb=1}function Zi(S,T,B,H,ee,ne,ie){var ce=T[ee].Yb[B];for(B=0;16>ee;++ee){if(!Te(S,ce[B+0]))return ee;for(;!Te(S,ce[B+1]);)if(ce=T[++ee].Yb[0],B=0,ee==16)return 16;var de=T[ee+1].Yb;if(Te(S,ce[B+2])){var pe=S,Ee=0;if(Te(pe,(ge=ce)[(ze=B)+3]))if(Te(pe,ge[ze+6])){for(ce=0,ze=2*(Ee=Te(pe,ge[ze+8]))+(ge=Te(pe,ge[ze+9+Ee])),Ee=0,ge=ID[ze];ge[ce];++ce)Ee+=Ee+Te(pe,ge[ce]);Ee+=3+(8<<ze)}else Te(pe,ge[ze+7])?(Ee=7+2*Te(pe,165),Ee+=Te(pe,145)):Ee=5+Te(pe,159);else Ee=Te(pe,ge[ze+4])?3+Te(pe,ge[ze+5]):2;ce=de[2]}else Ee=1,ce=de[1];de=ie+_D[ee],0>(pe=S).b&&Re(pe);var ze,ge=pe.b,Pe=(ze=pe.Ca>>1)-(pe.I>>ge)>>31;--pe.b,pe.Ca+=Pe,pe.Ca|=1,pe.I-=(ze+1&Pe)<<ge,ne[de]=((Ee^Pe)-Pe)*H[(0<ee)+0]}return 16}function Dr(S){var T=S.rb[S.sb-1];T.la=0,T.Na=0,a(S.zc,0,0,S.zc.length),S.ja=0}function Zn(S,T,B,H,ee){ee=S[T+B+32*H]+(ee>>3),S[T+B+32*H]=-256&ee?0>ee?0:255:ee}function Zo(S,T,B,H,ee,ne){Zn(S,T,0,B,H+ee),Zn(S,T,1,B,H+ne),Zn(S,T,2,B,H-ne),Zn(S,T,3,B,H-ee)}function Hr(S){return(20091*S>>16)+S}function Sr(S,T,B,H){var ee,ne=0,ie=i(16);for(ee=0;4>ee;++ee){var ce=S[T+0]+S[T+8],de=S[T+0]-S[T+8],pe=(35468*S[T+4]>>16)-Hr(S[T+12]),Ee=Hr(S[T+4])+(35468*S[T+12]>>16);ie[ne+0]=ce+Ee,ie[ne+1]=de+pe,ie[ne+2]=de-pe,ie[ne+3]=ce-Ee,ne+=4,T++}for(ee=ne=0;4>ee;++ee)ce=(S=ie[ne+0]+4)+ie[ne+8],de=S-ie[ne+8],pe=(35468*ie[ne+4]>>16)-Hr(ie[ne+12]),Zn(B,H,0,0,ce+(Ee=Hr(ie[ne+4])+(35468*ie[ne+12]>>16))),Zn(B,H,1,0,de+pe),Zn(B,H,2,0,de-pe),Zn(B,H,3,0,ce-Ee),ne++,H+=32}function Jn(S,T,B,H){var ee=S[T+0]+4,ne=35468*S[T+4]>>16,ie=Hr(S[T+4]),ce=35468*S[T+1]>>16;Zo(B,H,0,ee+ie,S=Hr(S[T+1]),ce),Zo(B,H,1,ee+ne,S,ce),Zo(B,H,2,ee-ne,S,ce),Zo(B,H,3,ee-ie,S,ce)}function Me(S,T,B,H,ee){Sr(S,T,B,H),ee&&Sr(S,T+16,B,H+4)}function ue(S,T,B,H){Ae(S,T+0,B,H,1),Ae(S,T+32,B,H+128,1)}function At(S,T,B,H){var ee;for(S=S[T+0]+4,ee=0;4>ee;++ee)for(T=0;4>T;++T)Zn(B,H,T,ee,S)}function wn(S,T,B,H){S[T+0]&&tt(S,T+0,B,H),S[T+16]&&tt(S,T+16,B,H+4),S[T+32]&&tt(S,T+32,B,H+128),S[T+48]&&tt(S,T+48,B,H+128+4)}function Os(S,T,B,H){var ee,ne=i(16);for(ee=0;4>ee;++ee){var ie=S[T+0+ee]+S[T+12+ee],ce=S[T+4+ee]+S[T+8+ee],de=S[T+4+ee]-S[T+8+ee],pe=S[T+0+ee]-S[T+12+ee];ne[0+ee]=ie+ce,ne[8+ee]=ie-ce,ne[4+ee]=pe+de,ne[12+ee]=pe-de}for(ee=0;4>ee;++ee)ie=(S=ne[0+4*ee]+3)+ne[3+4*ee],ce=ne[1+4*ee]+ne[2+4*ee],de=ne[1+4*ee]-ne[2+4*ee],pe=S-ne[3+4*ee],B[H+0]=ie+ce>>3,B[H+16]=pe+de>>3,B[H+32]=ie-ce>>3,B[H+48]=pe-de>>3,H+=64}function Ao(S,T,B){var H,ee=T-32,ne=Ga,ie=255-S[ee-1];for(H=0;H<B;++H){var ce,de=ne,pe=ie+S[T-1];for(ce=0;ce<B;++ce)S[T+ce]=de[pe+S[ee+ce]];T+=32}}function Jo(S,T){Ao(S,T,4)}function Vs(S,T){Ao(S,T,8)}function Wt(S,T){Ao(S,T,16)}function Gr(S,T){var B;for(B=0;16>B;++B)n(S,T+32*B,S,T-32,16)}function Zl(S,T){var B;for(B=16;0<B;--B)a(S,T,S[T-1],16),T+=32}function Qo(S,T,B){var H;for(H=0;16>H;++H)a(T,B+32*H,S,16)}function bi(S,T){var B,H=16;for(B=0;16>B;++B)H+=S[T-1+32*B]+S[T+B-32];Qo(H>>5,S,T)}function Jl(S,T){var B,H=8;for(B=0;16>B;++B)H+=S[T-1+32*B];Qo(H>>4,S,T)}function Ji(S,T){var B,H=8;for(B=0;16>B;++B)H+=S[T+B-32];Qo(H>>4,S,T)}function ed(S,T){Qo(128,S,T)}function Ot(S,T,B){return S+2*T+B+2>>2}function el(S,T){var B,H=T-32;for(H=new Uint8Array([Ot(S[H-1],S[H+0],S[H+1]),Ot(S[H+0],S[H+1],S[H+2]),Ot(S[H+1],S[H+2],S[H+3]),Ot(S[H+2],S[H+3],S[H+4])]),B=0;4>B;++B)n(S,T+32*B,H,0,H.length)}function vi(S,T){var B=S[T-1],H=S[T-1+32],ee=S[T-1+64],ne=S[T-1+96];Ve(S,T+0,16843009*Ot(S[T-1-32],B,H)),Ve(S,T+32,16843009*Ot(B,H,ee)),Ve(S,T+64,16843009*Ot(H,ee,ne)),Ve(S,T+96,16843009*Ot(ee,ne,ne))}function Xt(S,T){var B,H=4;for(B=0;4>B;++B)H+=S[T+B-32]+S[T-1+32*B];for(H>>=3,B=0;4>B;++B)a(S,T+32*B,H,4)}function $h(S,T){var B=S[T-1+0],H=S[T-1+32],ee=S[T-1+64],ne=S[T-1-32],ie=S[T+0-32],ce=S[T+1-32],de=S[T+2-32],pe=S[T+3-32];S[T+0+96]=Ot(H,ee,S[T-1+96]),S[T+1+96]=S[T+0+64]=Ot(B,H,ee),S[T+2+96]=S[T+1+64]=S[T+0+32]=Ot(ne,B,H),S[T+3+96]=S[T+2+64]=S[T+1+32]=S[T+0+0]=Ot(ie,ne,B),S[T+3+64]=S[T+2+32]=S[T+1+0]=Ot(ce,ie,ne),S[T+3+32]=S[T+2+0]=Ot(de,ce,ie),S[T+3+0]=Ot(pe,de,ce)}function Jt(S,T){var B=S[T+1-32],H=S[T+2-32],ee=S[T+3-32],ne=S[T+4-32],ie=S[T+5-32],ce=S[T+6-32],de=S[T+7-32];S[T+0+0]=Ot(S[T+0-32],B,H),S[T+1+0]=S[T+0+32]=Ot(B,H,ee),S[T+2+0]=S[T+1+32]=S[T+0+64]=Ot(H,ee,ne),S[T+3+0]=S[T+2+32]=S[T+1+64]=S[T+0+96]=Ot(ee,ne,ie),S[T+3+32]=S[T+2+64]=S[T+1+96]=Ot(ne,ie,ce),S[T+3+64]=S[T+2+96]=Ot(ie,ce,de),S[T+3+96]=Ot(ce,de,de)}function Kr(S,T){var B=S[T-1+0],H=S[T-1+32],ee=S[T-1+64],ne=S[T-1-32],ie=S[T+0-32],ce=S[T+1-32],de=S[T+2-32],pe=S[T+3-32];S[T+0+0]=S[T+1+64]=ne+ie+1>>1,S[T+1+0]=S[T+2+64]=ie+ce+1>>1,S[T+2+0]=S[T+3+64]=ce+de+1>>1,S[T+3+0]=de+pe+1>>1,S[T+0+96]=Ot(ee,H,B),S[T+0+64]=Ot(H,B,ne),S[T+0+32]=S[T+1+96]=Ot(B,ne,ie),S[T+1+32]=S[T+2+96]=Ot(ne,ie,ce),S[T+2+32]=S[T+3+96]=Ot(ie,ce,de),S[T+3+32]=Ot(ce,de,pe)}function zh(S,T){var B=S[T+0-32],H=S[T+1-32],ee=S[T+2-32],ne=S[T+3-32],ie=S[T+4-32],ce=S[T+5-32],de=S[T+6-32],pe=S[T+7-32];S[T+0+0]=B+H+1>>1,S[T+1+0]=S[T+0+64]=H+ee+1>>1,S[T+2+0]=S[T+1+64]=ee+ne+1>>1,S[T+3+0]=S[T+2+64]=ne+ie+1>>1,S[T+0+32]=Ot(B,H,ee),S[T+1+32]=S[T+0+96]=Ot(H,ee,ne),S[T+2+32]=S[T+1+96]=Ot(ee,ne,ie),S[T+3+32]=S[T+2+96]=Ot(ne,ie,ce),S[T+3+64]=Ot(ie,ce,de),S[T+3+96]=Ot(ce,de,pe)}function td(S,T){var B=S[T-1+0],H=S[T-1+32],ee=S[T-1+64],ne=S[T-1+96];S[T+0+0]=B+H+1>>1,S[T+2+0]=S[T+0+32]=H+ee+1>>1,S[T+2+32]=S[T+0+64]=ee+ne+1>>1,S[T+1+0]=Ot(B,H,ee),S[T+3+0]=S[T+1+32]=Ot(H,ee,ne),S[T+3+32]=S[T+1+64]=Ot(ee,ne,ne),S[T+3+64]=S[T+2+64]=S[T+0+96]=S[T+1+96]=S[T+2+96]=S[T+3+96]=ne}function tl(S,T){var B=S[T-1+0],H=S[T-1+32],ee=S[T-1+64],ne=S[T-1+96],ie=S[T-1-32],ce=S[T+0-32],de=S[T+1-32],pe=S[T+2-32];S[T+0+0]=S[T+2+32]=B+ie+1>>1,S[T+0+32]=S[T+2+64]=H+B+1>>1,S[T+0+64]=S[T+2+96]=ee+H+1>>1,S[T+0+96]=ne+ee+1>>1,S[T+3+0]=Ot(ce,de,pe),S[T+2+0]=Ot(ie,ce,de),S[T+1+0]=S[T+3+32]=Ot(B,ie,ce),S[T+1+32]=S[T+3+64]=Ot(H,B,ie),S[T+1+64]=S[T+3+96]=Ot(ee,H,B),S[T+1+96]=Ot(ne,ee,H)}function Wa(S,T){var B;for(B=0;8>B;++B)n(S,T+32*B,S,T-32,8)}function rl(S,T){var B;for(B=0;8>B;++B)a(S,T,S[T-1],8),T+=32}function wi(S,T,B){var H;for(H=0;8>H;++H)a(T,B+32*H,S,8)}function Ni(S,T){var B,H=8;for(B=0;8>B;++B)H+=S[T+B-32]+S[T-1+32*B];wi(H>>4,S,T)}function nl(S,T){var B,H=4;for(B=0;8>B;++B)H+=S[T+B-32];wi(H>>3,S,T)}function Ql(S,T){var B,H=4;for(B=0;8>B;++B)H+=S[T-1+32*B];wi(H>>3,S,T)}function Qi(S,T){wi(128,S,T)}function qa(S,T,B){var H=S[T-B],ee=S[T+0],ne=3*(ee-H)+Wx[1020+S[T-2*B]-S[T+B]],ie=Q0[112+(ne+4>>3)];S[T-B]=Ga[255+H+Q0[112+(ne+3>>3)]],S[T+0]=Ga[255+ee-ie]}function Tn(S,T,B,H){var ee=S[T+0],ne=S[T+B];return Ai[255+S[T-2*B]-S[T-B]]>H||Ai[255+ne-ee]>H}function ec(S,T,B,H){return 4*Ai[255+S[T-B]-S[T+0]]+Ai[255+S[T-2*B]-S[T+B]]<=H}function sl(S,T,B,H,ee){var ne=S[T-3*B],ie=S[T-2*B],ce=S[T-B],de=S[T+0],pe=S[T+B],Ee=S[T+2*B],ze=S[T+3*B];return 4*Ai[255+ce-de]+Ai[255+ie-pe]>H?0:Ai[255+S[T-4*B]-ne]<=ee&&Ai[255+ne-ie]<=ee&&Ai[255+ie-ce]<=ee&&Ai[255+ze-Ee]<=ee&&Ai[255+Ee-pe]<=ee&&Ai[255+pe-de]<=ee}function tc(S,T,B,H){var ee=2*H+1;for(H=0;16>H;++H)ec(S,T+H,B,ee)&&qa(S,T+H,B)}function al(S,T,B,H){var ee=2*H+1;for(H=0;16>H;++H)ec(S,T+H*B,1,ee)&&qa(S,T+H*B,1)}function ou(S,T,B,H){var ee;for(ee=3;0<ee;--ee)tc(S,T+=4*B,B,H)}function lu(S,T,B,H){var ee;for(ee=3;0<ee;--ee)al(S,T+=4,B,H)}function hr(S,T,B,H,ee,ne,ie,ce){for(ne=2*ne+1;0<ee--;){if(sl(S,T,B,ne,ie))if(Tn(S,T,B,ce))qa(S,T,B);else{var de=S,pe=T,Ee=B,ze=de[pe-2*Ee],ge=de[pe-Ee],Pe=de[pe+0],De=de[pe+Ee],Ze=de[pe+2*Ee],$e=27*(nt=Wx[1020+3*(Pe-ge)+Wx[1020+ze-De]])+63>>7,Qe=18*nt+63>>7,nt=9*nt+63>>7;de[pe-3*Ee]=Ga[255+de[pe-3*Ee]+nt],de[pe-2*Ee]=Ga[255+ze+Qe],de[pe-Ee]=Ga[255+ge+$e],de[pe+0]=Ga[255+Pe-$e],de[pe+Ee]=Ga[255+De-Qe],de[pe+2*Ee]=Ga[255+Ze-nt]}T+=H}}function ji(S,T,B,H,ee,ne,ie,ce){for(ne=2*ne+1;0<ee--;){if(sl(S,T,B,ne,ie))if(Tn(S,T,B,ce))qa(S,T,B);else{var de=S,pe=T,Ee=B,ze=de[pe-Ee],ge=de[pe+0],Pe=de[pe+Ee],De=Q0[112+(4+(Ze=3*(ge-ze))>>3)],Ze=Q0[112+(Ze+3>>3)],$e=De+1>>1;de[pe-2*Ee]=Ga[255+de[pe-2*Ee]+$e],de[pe-Ee]=Ga[255+ze+Ze],de[pe+0]=Ga[255+ge-De],de[pe+Ee]=Ga[255+Pe-$e]}T+=H}}function il(S,T,B,H,ee,ne){hr(S,T,B,1,16,H,ee,ne)}function Ha(S,T,B,H,ee,ne){hr(S,T,1,B,16,H,ee,ne)}function ol(S,T,B,H,ee,ne){var ie;for(ie=3;0<ie;--ie)ji(S,T+=4*B,B,1,16,H,ee,ne)}function Ge(S,T,B,H,ee,ne){var ie;for(ie=3;0<ie;--ie)ji(S,T+=4,1,B,16,H,ee,ne)}function D(S,T,B,H,ee,ne,ie,ce){hr(S,T,ee,1,8,ne,ie,ce),hr(B,H,ee,1,8,ne,ie,ce)}function Z(S,T,B,H,ee,ne,ie,ce){hr(S,T,1,ee,8,ne,ie,ce),hr(B,H,1,ee,8,ne,ie,ce)}function fe(S,T,B,H,ee,ne,ie,ce){ji(S,T+4*ee,ee,1,8,ne,ie,ce),ji(B,H+4*ee,ee,1,8,ne,ie,ce)}function je(S,T,B,H,ee,ne,ie,ce){ji(S,T+4,1,ee,8,ne,ie,ce),ji(B,H+4,1,ee,8,ne,ie,ce)}function Ie(){this.ba=new er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Je(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ct(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function St(){this.ua=0,this.Wa=new ot,this.vb=new ot,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new J}function gt(){this.xb=this.a=0,this.l=new Co,this.ca=new er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Q,this.Pb=0,this.wd=new Q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new St,this.ab=0,this.gc=o(4,ct),this.Oc=0}function Qt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Co,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Et(S,T,B,H,ee,ne,ie){for(S=S==null?0:S[T+0],T=0;T<ie;++T)ee[ne+T]=S+B[H+T]&255,S=ee[ne+T]}function br(S,T,B,H,ee,ne,ie){var ce;if(S==null)Et(null,null,B,H,ee,ne,ie);else for(ce=0;ce<ie;++ce)ee[ne+ce]=S[T+ce]+B[H+ce]&255}function Tr(S,T,B,H,ee,ne,ie){if(S==null)Et(null,null,B,H,ee,ne,ie);else{var ce,de=S[T+0],pe=de,Ee=de;for(ce=0;ce<ie;++ce)pe=Ee+(de=S[T+ce])-pe,Ee=B[H+ce]+(-256&pe?0>pe?0:255:pe)&255,pe=de,ee[ne+ce]=Ee}}function tr(S,T,B,H){var ee=T.width,ne=T.o;if(t(S!=null&&T!=null),0>B||0>=H||B+H>ne)return null;if(!S.Cc){if(S.ga==null){var ie;if(S.ga=new Qt,(ie=S.ga==null)||(ie=T.width*T.o,t(S.Gb.length==0),S.Gb=i(ie),S.Uc=0,S.Gb==null?ie=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,ie=1),ie=!ie),!ie){ie=S.ga;var ce=S.Fa,de=S.P,pe=S.qc,Ee=S.mb,ze=S.nb,ge=de+1,Pe=pe-1,De=ie.l;if(t(ce!=null&&Ee!=null&&T!=null),nc[0]=null,nc[1]=Et,nc[2]=br,nc[3]=Tr,ie.ca=Ee,ie.tb=ze,ie.c=T.width,ie.i=T.height,t(0<ie.c&&0<ie.i),1>=pe)T=0;else if(ie.$a=3&ce[de+0],ie.Z=ce[de+0]>>2&3,ie.Lc=ce[de+0]>>4&3,de=ce[de+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||de)T=0;else if(De.put=Vt,De.ac=Ts,De.bc=Xn,De.ma=ie,De.width=T.width,De.height=T.height,De.Da=T.Da,De.v=T.v,De.va=T.va,De.j=T.j,De.o=T.o,ie.$a)e:{t(ie.$a==1),T=vs();t:for(;;){if(T==null){T=0;break e}if(t(ie!=null),ie.mc=T,T.c=ie.c,T.i=ie.i,T.l=ie.l,T.l.ma=ie,T.l.width=ie.c,T.l.height=ie.i,T.a=0,ye(T.m,ce,ge,Pe),!yi(ie.c,ie.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&da(T.s)?(ie.ic=1,ce=T.c*T.i,T.Ta=null,T.Ua=0,T.V=i(ce),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(ie.ic=0,T=Yo(T,ie.c)),!T))break t;T=1;break e}ie.mc=null,T=0}else T=Pe>=ie.c*ie.i;ie=!T}if(ie)return null;S.ga.Lc!=1?S.Ga=0:H=ne-B}t(S.ga!=null),t(B+H<=ne);e:{if(T=(ce=S.ga).c,ne=ce.l.o,ce.$a==0){if(ge=S.rc,Pe=S.Vc,De=S.Fa,de=S.P+1+B*T,pe=S.mb,Ee=S.nb+B*T,t(de<=S.P+S.qc),ce.Z!=0)for(t(nc[ce.Z]!=null),ie=0;ie<H;++ie)nc[ce.Z](ge,Pe,De,de,pe,Ee,T),ge=pe,Pe=Ee,Ee+=T,de+=T;else for(ie=0;ie<H;++ie)n(pe,Ee,De,de,T),ge=pe,Pe=Ee,Ee+=T,de+=T;S.rc=ge,S.Vc=Pe}else{if(t(ce.mc!=null),T=B+H,t((ie=ce.mc)!=null),t(T<=ie.i),ie.C>=T)T=1;else if(ce.ic||as(),ce.ic){ce=ie.V,ge=ie.Ba,Pe=ie.c;var Ze=ie.i,$e=(De=1,de=ie.$/Pe,pe=ie.$%Pe,Ee=ie.m,ze=ie.s,ie.$),Qe=Pe*Ze,nt=Pe*T,ut=ze.wc,dt=$e<nt?Or(ze,pe,de):null;t($e<=Qe),t(T<=Ze),t(da(ze));t:for(;;){for(;!Ee.h&&$e<nt;){if(pe&ut||(dt=Or(ze,pe,de)),t(dt!=null),ke(Ee),256>(Ze=pr(dt.G[0],dt.H[0],Ee)))ce[ge+$e]=Ze,++$e,++pe>=Pe&&(pe=0,++de<=T&&!(de%16)&&bs(ie,de));else{if(!(280>Ze)){De=0;break t}Ze=Yn(Ze-256,Ee);var Ut,It=pr(dt.G[4],dt.H[4],Ee);if(ke(Ee),!($e>=(It=qs(Pe,It=Yn(It,Ee)))&&Qe-$e>=Ze)){De=0;break t}for(Ut=0;Ut<Ze;++Ut)ce[ge+$e+Ut]=ce[ge+$e+Ut-It];for($e+=Ze,pe+=Ze;pe>=Pe;)pe-=Pe,++de<=T&&!(de%16)&&bs(ie,de);$e<nt&&pe&ut&&(dt=Or(ze,pe,de))}t(Ee.h==ve(Ee))}bs(ie,de>T?T:de);break t}!De||Ee.h&&$e<Qe?(De=0,ie.a=Ee.h?5:3):ie.$=$e,T=De}else T=Hs(ie,ie.V,ie.Ba,ie.c,ie.i,T,_s);if(!T){H=0;break e}}B+H>=ne&&(S.Cc=1),H=1}if(!H)return null;if(S.Cc&&((H=S.ga)!=null&&(H.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+B*ee}function bt(S,T,B,H,ee,ne){for(;0<ee--;){var ie,ce=S,de=T+(B?1:0),pe=S,Ee=T+(B?0:3);for(ie=0;ie<H;++ie){var ze=pe[Ee+4*ie];ze!=255&&(ze*=32897,ce[de+4*ie+0]=ce[de+4*ie+0]*ze>>23,ce[de+4*ie+1]=ce[de+4*ie+1]*ze>>23,ce[de+4*ie+2]=ce[de+4*ie+2]*ze>>23)}T+=ne}}function Mn(S,T,B,H,ee){for(;0<H--;){var ne;for(ne=0;ne<B;++ne){var ie=S[T+2*ne+0],ce=15&(pe=S[T+2*ne+1]),de=4369*ce,pe=(240&pe|pe>>4)*de>>16;S[T+2*ne+0]=(240&ie|ie>>4)*de>>16&240|(15&ie|ie<<4)*de>>16>>4&15,S[T+2*ne+1]=240&pe|ce}T+=ee}}function nr(S,T,B,H,ee,ne,ie,ce){var de,pe,Ee=255;for(pe=0;pe<ee;++pe){for(de=0;de<H;++de){var ze=S[T+de];ne[ie+4*de]=ze,Ee&=ze}T+=B,ie+=ce}return Ee!=255}function sn(S,T,B,H,ee){var ne;for(ne=0;ne<ee;++ne)B[H+ne]=S[T+ne]>>8}function as(){ad=bt,R3=Mn,D3=nr,L3=sn}function Gs(S,T,B){R[S]=function(H,ee,ne,ie,ce,de,pe,Ee,ze,ge,Pe,De,Ze,$e,Qe,nt,ut){var dt,Ut=ut-1>>1,It=ce[de+0]|pe[Ee+0]<<16,cr=ze[ge+0]|Pe[De+0]<<16;t(H!=null);var Mt=3*It+cr+131074>>2;for(T(H[ee+0],255&Mt,Mt>>16,Ze,$e),ne!=null&&(Mt=3*cr+It+131074>>2,T(ne[ie+0],255&Mt,Mt>>16,Qe,nt)),dt=1;dt<=Ut;++dt){var wr=ce[de+dt]|pe[Ee+dt]<<16,ls=ze[ge+dt]|Pe[De+dt]<<16,dr=It+wr+cr+ls+524296,Bt=dr+2*(wr+cr)>>3;Mt=Bt+It>>1,It=(dr=dr+2*(It+ls)>>3)+wr>>1,T(H[ee+2*dt-1],255&Mt,Mt>>16,Ze,$e+(2*dt-1)*B),T(H[ee+2*dt-0],255&It,It>>16,Ze,$e+(2*dt-0)*B),ne!=null&&(Mt=dr+cr>>1,It=Bt+ls>>1,T(ne[ie+2*dt-1],255&Mt,Mt>>16,Qe,nt+(2*dt-1)*B),T(ne[ie+2*dt+0],255&It,It>>16,Qe,nt+(2*dt+0)*B)),It=wr,cr=ls}1&ut||(Mt=3*It+cr+131074>>2,T(H[ee+ut-1],255&Mt,Mt>>16,Ze,$e+(ut-1)*B),ne!=null&&(Mt=3*cr+It+131074>>2,T(ne[ie+ut-1],255&Mt,Mt>>16,Qe,nt+(ut-1)*B)))}}function ua(){Si[em]=BD,Si[tm]=G3,Si[z3]=FD,Si[rm]=K3,Si[nm]=X3,Si[qx]=Y3,Si[W3]=UD,Si[Hx]=G3,Si[Vx]=K3,Si[sm]=X3,Si[Gx]=Y3}function So(S){return S&-16384?0>S?0:255:S>>$D}function Eo(S,T){return So((19077*S>>8)+(26149*T>>8)-14234)}function Ci(S,T,B){return So((19077*S>>8)-(6419*T>>8)-(13320*B>>8)+8708)}function ko(S,T){return So((19077*S>>8)+(33050*T>>8)-17685)}function Po(S,T,B,H,ee){H[ee+0]=Eo(S,B),H[ee+1]=Ci(S,T,B),H[ee+2]=ko(S,T)}function ll(S,T,B,H,ee){H[ee+0]=ko(S,T),H[ee+1]=Ci(S,T,B),H[ee+2]=Eo(S,B)}function Nn(S,T,B,H,ee){var ne=Ci(S,T,B);T=ne<<3&224|ko(S,T)>>3,H[ee+0]=248&Eo(S,B)|ne>>5,H[ee+1]=T}function eo(S,T,B,H,ee){var ne=240&ko(S,T)|15;H[ee+0]=240&Eo(S,B)|Ci(S,T,B)>>4,H[ee+1]=ne}function cl(S,T,B,H,ee){H[ee+0]=255,Po(S,T,B,H,ee+1)}function to(S,T,B,H,ee){ll(S,T,B,H,ee),H[ee+3]=255}function rd(S,T,B,H,ee){Po(S,T,B,H,ee),H[ee+3]=255}function Ir(S,T){return 0>S?0:S>T?T:S}function Sa(S,T,B){R[S]=function(H,ee,ne,ie,ce,de,pe,Ee,ze){for(var ge=Ee+(-2&ze)*B;Ee!=ge;)T(H[ee+0],ne[ie+0],ce[de+0],pe,Ee),T(H[ee+1],ne[ie+0],ce[de+0],pe,Ee+B),ee+=2,++ie,++de,Ee+=2*B;1&ze&&T(H[ee+0],ne[ie+0],ce[de+0],pe,Ee)}}function is(S,T,B){return B==0?S==0?T==0?6:5:T==0?4:0:B}function nd(S,T,B,H,ee){switch(S>>>30){case 3:Ae(T,B,H,ee,0);break;case 2:_e(T,B,H,ee);break;case 1:tt(T,B,H,ee)}}function jn(S,T){var B,H,ee=T.M,ne=T.Nb,ie=S.oc,ce=S.pc+40,de=S.oc,pe=S.pc+584,Ee=S.oc,ze=S.pc+600;for(B=0;16>B;++B)ie[ce+32*B-1]=129;for(B=0;8>B;++B)de[pe+32*B-1]=129,Ee[ze+32*B-1]=129;for(0<ee?ie[ce-1-32]=de[pe-1-32]=Ee[ze-1-32]=129:(a(ie,ce-32-1,127,21),a(de,pe-32-1,127,9),a(Ee,ze-32-1,127,9)),H=0;H<S.za;++H){var ge=T.ya[T.aa+H];if(0<H){for(B=-1;16>B;++B)n(ie,ce+32*B-4,ie,ce+32*B+12,4);for(B=-1;8>B;++B)n(de,pe+32*B-4,de,pe+32*B+4,4),n(Ee,ze+32*B-4,Ee,ze+32*B+4,4)}var Pe=S.Gd,De=S.Hd+H,Ze=ge.ad,$e=ge.Hc;if(0<ee&&(n(ie,ce-32,Pe[De].y,0,16),n(de,pe-32,Pe[De].f,0,8),n(Ee,ze-32,Pe[De].ea,0,8)),ge.Za){var Qe=ie,nt=ce-32+16;for(0<ee&&(H>=S.za-1?a(Qe,nt,Pe[De].y[15],4):n(Qe,nt,Pe[De+1].y,0,4)),B=0;4>B;B++)Qe[nt+128+B]=Qe[nt+256+B]=Qe[nt+384+B]=Qe[nt+0+B];for(B=0;16>B;++B,$e<<=2)Qe=ie,nt=ce+J3[B],no[ge.Ob[B]](Qe,nt),nd($e,Ze,16*+B,Qe,nt)}else if(Qe=is(H,ee,ge.Ob[0]),rc[Qe](ie,ce),$e!=0)for(B=0;16>B;++B,$e<<=2)nd($e,Ze,16*+B,ie,ce+J3[B]);for(B=ge.Gc,Qe=is(H,ee,ge.Dd),ml[Qe](de,pe),ml[Qe](Ee,ze),$e=Ze,Qe=de,nt=pe,255&(ge=0|B)&&(170&ge?We($e,256,Qe,nt):st($e,256,Qe,nt)),ge=Ee,$e=ze,255&(B>>=8)&&(170&B?We(Ze,320,ge,$e):st(Ze,320,ge,$e)),ee<S.Ub-1&&(n(Pe[De].y,0,ie,ce+480,16),n(Pe[De].f,0,de,pe+224,8),n(Pe[De].ea,0,Ee,ze+224,8)),B=8*ne*S.B,Pe=S.sa,De=S.ta+16*H+16*ne*S.R,Ze=S.qa,ge=S.ra+8*H+B,$e=S.Ha,Qe=S.Ia+8*H+B,B=0;16>B;++B)n(Pe,De+B*S.R,ie,ce+32*B,16);for(B=0;8>B;++B)n(Ze,ge+B*S.B,de,pe+32*B,8),n($e,Qe+B*S.B,Ee,ze+32*B,8)}}function dl(S,T,B,H,ee,ne,ie,ce,de){var pe=[0],Ee=[0],ze=0,ge=de!=null?de.kd:0,Pe=de??new Je;if(S==null||12>B)return 7;Pe.data=S,Pe.w=T,Pe.ha=B,T=[T],B=[B],Pe.gb=[Pe.gb];e:{var De=T,Ze=B,$e=Pe.gb;if(t(S!=null),t(Ze!=null),t($e!=null),$e[0]=0,12<=Ze[0]&&!r(S,De[0],"RIFF")){if(r(S,De[0]+8,"WEBP")){$e=3;break e}var Qe=Se(S,De[0]+4);if(12>Qe||4294967286<Qe){$e=3;break e}if(ge&&Qe>Ze[0]-8){$e=7;break e}$e[0]=Qe,De[0]+=12,Ze[0]-=12}$e=0}if($e!=0)return $e;for(Qe=0<Pe.gb[0],B=B[0];;){e:{var nt=S;Ze=T,$e=B;var ut=pe,dt=Ee,Ut=De=[0];if((Mt=ze=[ze])[0]=0,8>$e[0])$e=7;else{if(!r(nt,Ze[0],"VP8X")){if(Se(nt,Ze[0]+4)!=10){$e=3;break e}if(18>$e[0]){$e=7;break e}var It=Se(nt,Ze[0]+8),cr=1+Ye(nt,Ze[0]+12);if(2147483648<=cr*(nt=1+Ye(nt,Ze[0]+15))){$e=3;break e}Ut!=null&&(Ut[0]=It),ut!=null&&(ut[0]=cr),dt!=null&&(dt[0]=nt),Ze[0]+=18,$e[0]-=18,Mt[0]=1}$e=0}}if(ze=ze[0],De=De[0],$e!=0)return $e;if(Ze=!!(2&De),!Qe&&ze)return 3;if(ne!=null&&(ne[0]=!!(16&De)),ie!=null&&(ie[0]=Ze),ce!=null&&(ce[0]=0),ie=pe[0],De=Ee[0],ze&&Ze&&de==null){$e=0;break}if(4>B){$e=7;break}if(Qe&&ze||!Qe&&!ze&&!r(S,T[0],"ALPH")){B=[B],Pe.na=[Pe.na],Pe.P=[Pe.P],Pe.Sa=[Pe.Sa];e:{It=S,$e=T,Qe=B;var Mt=Pe.gb;ut=Pe.na,dt=Pe.P,Ut=Pe.Sa,cr=22,t(It!=null),t(Qe!=null),nt=$e[0];var wr=Qe[0];for(t(ut!=null),t(Ut!=null),ut[0]=null,dt[0]=null,Ut[0]=0;;){if($e[0]=nt,Qe[0]=wr,8>wr){$e=7;break e}var ls=Se(It,nt+4);if(4294967286<ls){$e=3;break e}var dr=8+ls+1&-2;if(cr+=dr,0<Mt&&cr>Mt){$e=3;break e}if(!r(It,nt,"VP8 ")||!r(It,nt,"VP8L")){$e=0;break e}if(wr[0]<dr){$e=7;break e}r(It,nt,"ALPH")||(ut[0]=It,dt[0]=nt+8,Ut[0]=ls),nt+=dr,wr-=dr}}if(B=B[0],Pe.na=Pe.na[0],Pe.P=Pe.P[0],Pe.Sa=Pe.Sa[0],$e!=0)break}B=[B],Pe.Ja=[Pe.Ja],Pe.xa=[Pe.xa];e:if(Mt=S,$e=T,Qe=B,ut=Pe.gb[0],dt=Pe.Ja,Ut=Pe.xa,It=$e[0],nt=!r(Mt,It,"VP8 "),cr=!r(Mt,It,"VP8L"),t(Mt!=null),t(Qe!=null),t(dt!=null),t(Ut!=null),8>Qe[0])$e=7;else{if(nt||cr){if(Mt=Se(Mt,It+4),12<=ut&&Mt>ut-12){$e=3;break e}if(ge&&Mt>Qe[0]-8){$e=7;break e}dt[0]=Mt,$e[0]+=8,Qe[0]-=8,Ut[0]=cr}else Ut[0]=5<=Qe[0]&&Mt[It+0]==47&&!(Mt[It+4]>>5),dt[0]=Qe[0];$e=0}if(B=B[0],Pe.Ja=Pe.Ja[0],Pe.xa=Pe.xa[0],T=T[0],$e!=0)break;if(4294967286<Pe.Ja)return 3;if(ce==null||Ze||(ce[0]=Pe.xa?2:1),ie=[ie],De=[De],Pe.xa){if(5>B){$e=7;break}ce=ie,ge=De,Ze=ne,S==null||5>B?S=0:5<=B&&S[T+0]==47&&!(S[T+4]>>5)?(Qe=[0],Mt=[0],ut=[0],ye(dt=new Q,S,T,B),Xi(dt,Qe,Mt,ut)?(ce!=null&&(ce[0]=Qe[0]),ge!=null&&(ge[0]=Mt[0]),Ze!=null&&(Ze[0]=ut[0]),S=1):S=0):S=0}else{if(10>B){$e=7;break}ce=De,S==null||10>B||!mn(S,T+3,B-3)?S=0:(ge=S[T+0]|S[T+1]<<8|S[T+2]<<16,Ze=16383&(S[T+7]<<8|S[T+6]),S=16383&(S[T+9]<<8|S[T+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=Pe.Ja||!Ze||!S?S=0:(ie&&(ie[0]=Ze),ce&&(ce[0]=S),S=1))}if(!S||(ie=ie[0],De=De[0],ze&&(pe[0]!=ie||Ee[0]!=De)))return 3;de!=null&&(de[0]=Pe,de.offset=T-de.w,t(4294967286>T-de.w),t(de.offset==de.ha-B));break}return $e==0||$e==7&&ze&&de==null?(ne!=null&&(ne[0]|=Pe.na!=null&&0<Pe.na.length),H!=null&&(H[0]=ie),ee!=null&&(ee[0]=De),0):$e}function ul(S,T,B){var H=T.width,ee=T.height,ne=0,ie=0,ce=H,de=ee;if(T.Da=S!=null&&0<S.Da,T.Da&&(ce=S.cd,de=S.bd,ne=S.v,ie=S.j,11>B||(ne&=-2,ie&=-2),0>ne||0>ie||0>=ce||0>=de||ne+ce>H||ie+de>ee))return 0;if(T.v=ne,T.j=ie,T.va=ne+ce,T.o=ie+de,T.U=ce,T.T=de,T.da=S!=null&&0<S.da,T.da){if(!at(ce,de,B=[S.ib],ne=[S.hb]))return 0;T.ib=B[0],T.hb=ne[0]}return T.ob=S!=null&&S.ob,T.Kb=S==null||!S.Sd,T.da&&(T.ob=T.ib<3*H/4&&T.hb<3*ee/4,T.Kb=0),1}function sd(S){if(S==null)return 2;if(11>S.S){var T=S.f.RGBA;T.fb+=(S.height-1)*T.A,T.A=-T.A}else T=S.f.kb,S=S.height,T.O+=(S-1)*T.fa,T.fa=-T.fa,T.N+=(S-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(S-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(S-1)*T.lb,T.lb=-T.lb);return 0}function ro(S,T,B,H){if(H==null||0>=S||0>=T)return 2;if(B!=null){if(B.Da){var ee=B.cd,ne=B.bd,ie=-2&B.v,ce=-2&B.j;if(0>ie||0>ce||0>=ee||0>=ne||ie+ee>S||ce+ne>T)return 2;S=ee,T=ne}if(B.da){if(!at(S,T,ee=[B.ib],ne=[B.hb]))return 2;S=ee[0],T=ne[0]}}H.width=S,H.height=T;e:{var de=H.width,pe=H.height;if(S=H.S,0>=de||0>=pe||!(S>=em&&13>S))S=2;else{if(0>=H.Rd&&H.sd==null){ie=ne=ee=T=0;var Ee=(ce=de*Q3[S])*pe;if(11>S||(ne=(pe+1)/2*(T=(de+1)/2),S==12&&(ie=(ee=de)*pe)),(pe=i(Ee+2*ne+ie))==null){S=1;break e}H.sd=pe,11>S?((de=H.f.RGBA).eb=pe,de.fb=0,de.A=ce,de.size=Ee):((de=H.f.kb).y=pe,de.O=0,de.fa=ce,de.Fd=Ee,de.f=pe,de.N=0+Ee,de.Ab=T,de.Cd=ne,de.ea=pe,de.W=0+Ee+ne,de.Db=T,de.Ed=ne,S==12&&(de.F=pe,de.J=0+Ee+2*ne),de.Tc=ie,de.lb=ee)}if(T=1,ee=H.S,ne=H.width,ie=H.height,ee>=em&&13>ee)if(11>ee)S=H.f.RGBA,T&=(ce=Math.abs(S.A))*(ie-1)+ne<=S.size,T&=ce>=ne*Q3[ee],T&=S.eb!=null;else{S=H.f.kb,ce=(ne+1)/2,Ee=(ie+1)/2,de=Math.abs(S.fa),pe=Math.abs(S.Ab);var ze=Math.abs(S.Db),ge=Math.abs(S.lb),Pe=ge*(ie-1)+ne;T&=de*(ie-1)+ne<=S.Fd,T&=pe*(Ee-1)+ce<=S.Cd,T=(T&=ze*(Ee-1)+ce<=S.Ed)&de>=ne&pe>=ce&ze>=ce,T&=S.y!=null,T&=S.f!=null,T&=S.ea!=null,ee==12&&(T&=ge>=ne,T&=Pe<=S.Tc,T&=S.F!=null)}else T=0;S=T?0:2}}return S!=0||B!=null&&B.fd&&(S=sd(H)),S}var ws=64,ha=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Rs=24,Ea=32,ar=8,Va=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(S){return S},R.Predictor2=function(S,T,B){return T[B+0]},R.Predictor3=function(S,T,B){return T[B+1]},R.Predictor4=function(S,T,B){return T[B-1]},R.Predictor5=function(S,T,B){return vt(vt(S,T[B+1]),T[B+0])},R.Predictor6=function(S,T,B){return vt(S,T[B-1])},R.Predictor7=function(S,T,B){return vt(S,T[B+0])},R.Predictor8=function(S,T,B){return vt(T[B-1],T[B+0])},R.Predictor9=function(S,T,B){return vt(T[B+0],T[B+1])},R.Predictor10=function(S,T,B){return vt(vt(S,T[B-1]),vt(T[B+0],T[B+1]))},R.Predictor11=function(S,T,B){var H=T[B+0];return 0>=_t(H>>24&255,S>>24&255,(T=T[B-1])>>24&255)+_t(H>>16&255,S>>16&255,T>>16&255)+_t(H>>8&255,S>>8&255,T>>8&255)+_t(255&H,255&S,255&T)?H:S},R.Predictor12=function(S,T,B){var H=T[B+0];return(Gt((S>>24&255)+(H>>24&255)-((T=T[B-1])>>24&255))<<24|Gt((S>>16&255)+(H>>16&255)-(T>>16&255))<<16|Gt((S>>8&255)+(H>>8&255)-(T>>8&255))<<8|Gt((255&S)+(255&H)-(255&T)))>>>0},R.Predictor13=function(S,T,B){var H=T[B-1];return(Kt((S=vt(S,T[B+0]))>>24&255,H>>24&255)<<24|Kt(S>>16&255,H>>16&255)<<16|Kt(S>>8&255,H>>8&255)<<8|Kt(255&S,255&H))>>>0};var X=R.PredictorAdd0;R.PredictorAdd1=mr,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var l=R.PredictorAdd2;Be("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),Be("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var h,m=R.ColorIndexInverseTransform,g=R.MapARGB,y=R.VP8LColorIndexInverseTransformAlpha,v=R.MapAlpha,E=R.VP8LPredictorsAdd=[];E.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var I,L,q,Y,re,he,Ne,Ae,_e,We,tt,st,rt,qt,Yt,Qn,Ns,os,Rr,es,Ks,hl,fl,J0,ad,R3,D3,L3,M3=i(511),B3=i(2041),F3=i(225),U3=i(767),$3=0,Wx=B3,Q0=F3,Ga=U3,Ai=M3,em=0,tm=1,z3=2,rm=3,nm=4,qx=5,W3=6,Hx=7,Vx=8,sm=9,Gx=10,CD=[2,3,7],AD=[3,3,11],q3=[280,256,256,256,40],SD=[0,1,1,1,0],ED=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],kD=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],PD=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],TD=8,Kx=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xx=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wh=null,ID=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_D=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],H3=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],OD=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],RD=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],DD=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],LD=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rc=[],no=[],ml=[],MD=1,V3=2,nc=[],Si=[];Gs("UpsampleRgbLinePair",Po,3),Gs("UpsampleBgrLinePair",ll,3),Gs("UpsampleRgbaLinePair",rd,4),Gs("UpsampleBgraLinePair",to,4),Gs("UpsampleArgbLinePair",cl,4),Gs("UpsampleRgba4444LinePair",eo,2),Gs("UpsampleRgb565LinePair",Nn,2);var BD=R.UpsampleRgbLinePair,FD=R.UpsampleBgrLinePair,G3=R.UpsampleRgbaLinePair,K3=R.UpsampleBgraLinePair,X3=R.UpsampleArgbLinePair,Y3=R.UpsampleRgba4444LinePair,UD=R.UpsampleRgb565LinePair,am=16,im=1<<am-1,qh=-227,Yx=482,$D=6,Z3=0,zD=i(256),WD=i(256),qD=i(256),HD=i(256),VD=i(Yx-qh),GD=i(Yx-qh);Sa("YuvToRgbRow",Po,3),Sa("YuvToBgrRow",ll,3),Sa("YuvToRgbaRow",rd,4),Sa("YuvToBgraRow",to,4),Sa("YuvToArgbRow",cl,4),Sa("YuvToRgba4444Row",eo,2),Sa("YuvToRgb565Row",Nn,2);var J3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],om=[0,2,8],KD=[8,7,6,4,4,2,2,2,1,1,1,1],XD=1;this.WebPDecodeRGBA=function(S,T,B,H,ee){var ne=tm,ie=new Ie,ce=new er;ie.ba=ce,ce.S=ne,ce.width=[ce.width],ce.height=[ce.height];var de=ce.width,pe=ce.height,Ee=new Zt;if(Ee==null||S==null)var ze=2;else t(Ee!=null),ze=dl(S,T,B,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(ze!=0?de=0:(de!=null&&(de[0]=Ee.width[0]),pe!=null&&(pe[0]=Ee.height[0]),de=1),de){ce.width=ce.width[0],ce.height=ce.height[0],H!=null&&(H[0]=ce.width),ee!=null&&(ee[0]=ce.height);e:{if(H=new Co,(ee=new Je).data=S,ee.w=T,ee.ha=B,ee.kd=1,T=[0],t(ee!=null),((S=dl(ee.data,ee.w,ee.ha,null,null,null,T,null,ee))==0||S==7)&&T[0]&&(S=4),(T=S)==0){if(t(ie!=null),H.data=ee.data,H.w=ee.w+ee.offset,H.ha=ee.ha-ee.offset,H.put=Vt,H.ac=Ts,H.bc=Xn,H.ma=ie,ee.xa){if((S=vs())==null){ie=1;break e}if(function(ge,Pe){var De=[0],Ze=[0],$e=[0];t:for(;;){if(ge==null)return 0;if(Pe==null)return ge.a=2,0;if(ge.l=Pe,ge.a=0,ye(ge.m,Pe.data,Pe.w,Pe.ha),!Xi(ge.m,De,Ze,$e)){ge.a=3;break t}if(ge.xb=V3,Pe.width=De[0],Pe.height=Ze[0],!yi(De[0],Ze[0],1,ge,null))break t;return 1}return t(ge.a!=0),0}(S,H)){if(H=(T=ro(H.width,H.height,ie.Oa,ie.ba))==0){t:{H=S;r:for(;;){if(H==null){H=0;break t}if(t(H.s.yc!=null),t(H.s.Ya!=null),t(0<H.s.Wb),t((B=H.l)!=null),t((ee=B.ma)!=null),H.xb!=0){if(H.ca=ee.ba,H.tb=ee.tb,t(H.ca!=null),!ul(ee.Oa,B,rm)){H.a=2;break r}if(!Yo(H,B.width)||B.da)break r;if((B.da||Ct(H.ca.S))&&as(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&as()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!ae(H.s.vb,H.s.Wa.Xa)){H.a=1;break r}H.xb=0}if(!Hs(H,H.V,H.Ba,H.c,H.i,B.o,ca))break r;ee.Dc=H.Ma,H=1;break t}t(H.a!=0),H=0}H=!H}H&&(T=S.a)}else T=S.a}else{if((S=new Qc)==null){ie=1;break e}if(S.Fa=ee.na,S.P=ee.P,S.qc=ee.Sa,za(S,H)){if((T=ro(H.width,H.height,ie.Oa,ie.ba))==0){if(S.Aa=0,B=ie.Oa,t((ee=S)!=null),B!=null){if(0<(de=0>(de=B.Md)?0:100<de?255:255*de/100)){for(pe=Ee=0;4>pe;++pe)12>(ze=ee.pb[pe]).lc&&(ze.ia=de*KD[0>ze.lc?0:ze.lc]>>3),Ee|=ze.ia;Ee&&(alert("todo:VP8InitRandom"),ee.ia=1)}ee.Ga=B.Id,100<ee.Ga?ee.Ga=100:0>ee.Ga&&(ee.Ga=0)}(function(ge,Pe){if(ge==null)return 0;if(Pe==null)return fn(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!za(ge,Pe))return 0;if(t(ge.cb),Pe.ac==null||Pe.ac(Pe)){Pe.ob&&(ge.L=0);var De=om[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=Pe.v-De>>4,ge.zb=Pe.j-De>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=Pe.o+15+De>>4,ge.Hb=Pe.va+15+De>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var Ze=ge.ed;for(De=0;4>De;++De){var $e;if(ge.Qa.Cb){var Qe=ge.Qa.Lb[De];ge.Qa.Fb||(Qe+=Ze.Tb)}else Qe=Ze.Tb;for($e=0;1>=$e;++$e){var nt=ge.gd[De][$e],ut=Qe;if(Ze.Pc&&(ut+=Ze.vd[0],$e&&(ut+=Ze.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var dt=ut;0<Ze.wb&&(dt=4<Ze.wb?dt>>2:dt>>1)>9-Ze.wb&&(dt=9-Ze.wb),1>dt&&(dt=1),nt.dd=dt,nt.tc=2*ut+dt,nt.ld=40<=ut?2:15<=ut?1:0}else nt.tc=0;nt.La=$e}}}De=0}else fn(ge,6,"Frame setup failed"),De=ge.a;if(De=De==0){if(De){ge.$c=0,0<ge.Aa||(ge.Ic=XD);t:{De=ge.Ic,Ze=4*(dt=ge.za);var Ut=32*dt,It=dt+1,cr=0<ge.L?dt*(0<ge.Aa?2:1):0,Mt=(ge.Aa==2?2:1)*dt;if((nt=Ze+832+($e=3*(16*De+om[ge.L])/2*Ut)+(Qe=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=nt)De=0;else{if(nt>ge.Vb){if(ge.Vb=0,ge.Ec=i(nt),ge.Fc=0,ge.Ec==null){De=fn(ge,1,"no memory during frame initialization.");break t}ge.Vb=nt}nt=ge.Ec,ut=ge.Fc,ge.Ac=nt,ge.Bc=ut,ut+=Ze,ge.Gd=o(Ut,yr),ge.Hd=0,ge.rb=o(It+1,qr),ge.sb=1,ge.wa=cr?o(cr,Aa):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=dt),t(!0),ge.oc=nt,ge.pc=ut,ut+=832,ge.ya=o(Mt,Jc),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=dt),ge.R=16*dt,ge.B=8*dt,dt=(Ut=om[ge.L])*ge.R,Ut=Ut/2*ge.B,ge.sa=nt,ge.ta=ut+dt,ge.qa=ge.sa,ge.ra=ge.ta+16*De*ge.R+Ut,ge.Ha=ge.qa,ge.Ia=ge.ra+8*De*ge.B+Ut,ge.$c=0,ut+=$e,ge.mb=Qe?nt:null,ge.nb=Qe?ut:null,t(ut+Qe<=ge.Fc+ge.Vb),Dr(ge),a(ge.Ac,ge.Bc,0,Ze),De=1}}if(De){if(Pe.ka=0,Pe.y=ge.sa,Pe.O=ge.ta,Pe.f=ge.qa,Pe.N=ge.ra,Pe.ea=ge.Ha,Pe.Vd=ge.Ia,Pe.fa=ge.R,Pe.Rc=ge.B,Pe.F=null,Pe.J=0,!$3){for(De=-255;255>=De;++De)M3[255+De]=0>De?-De:De;for(De=-1020;1020>=De;++De)B3[1020+De]=-128>De?-128:127<De?127:De;for(De=-112;112>=De;++De)F3[112+De]=-16>De?-16:15<De?15:De;for(De=-255;510>=De;++De)U3[255+De]=0>De?0:255<De?255:De;$3=1}Ne=Os,Ae=Me,We=ue,tt=At,st=wn,_e=Jn,rt=il,qt=Ha,Yt=D,Qn=Z,Ns=ol,os=Ge,Rr=fe,es=je,Ks=tc,hl=al,fl=ou,J0=lu,no[0]=Xt,no[1]=Jo,no[2]=el,no[3]=vi,no[4]=$h,no[5]=Kr,no[6]=Jt,no[7]=zh,no[8]=tl,no[9]=td,rc[0]=bi,rc[1]=Wt,rc[2]=Gr,rc[3]=Zl,rc[4]=Jl,rc[5]=Ji,rc[6]=ed,ml[0]=Ni,ml[1]=Vs,ml[2]=Wa,ml[3]=rl,ml[4]=Ql,ml[5]=nl,ml[6]=Qi,De=1}else De=0}De&&(De=function(wr,ls){for(wr.M=0;wr.M<wr.Va;++wr.M){var dr,Bt=wr.Jc[wr.M&wr.Xb],xt=wr.m,Bn=wr;for(dr=0;dr<Bn.za;++dr){var ir=xt,Nr=Bn,an=Nr.Ac,Ds=Nr.Bc+4*dr,fa=Nr.zc,In=Nr.ya[Nr.aa+dr];if(Nr.Qa.Bb?In.$b=Te(ir,Nr.Pa.jb[0])?2+Te(ir,Nr.Pa.jb[2]):Te(ir,Nr.Pa.jb[1]):In.$b=0,Nr.kc&&(In.Ad=Te(ir,Nr.Bd)),In.Za=!Te(ir,145)+0,In.Za){var Xs=In.Ob,ma=0;for(Nr=0;4>Nr;++Nr){var cs,Cr=fa[0+Nr];for(cs=0;4>cs;++cs){Cr=RD[an[Ds+cs]][Cr];for(var Lr=H3[Te(ir,Cr[0])];0<Lr;)Lr=H3[2*Lr+Te(ir,Cr[Lr])];Cr=-Lr,an[Ds+cs]=Cr}n(Xs,ma,an,Ds,4),ma+=4,fa[0+Nr]=Cr}}else Cr=Te(ir,156)?Te(ir,128)?1:3:Te(ir,163)?2:0,In.Ob[0]=Cr,a(an,Ds,Cr,4),a(fa,0,Cr,4);In.Dd=Te(ir,142)?Te(ir,114)?Te(ir,183)?1:3:2:0}if(Bn.m.Ka)return fn(wr,7,"Premature end-of-partition0 encountered.");for(;wr.ja<wr.za;++wr.ja){if(Bn=Bt,ir=(xt=wr).rb[xt.sb-1],an=xt.rb[xt.sb+xt.ja],dr=xt.ya[xt.aa+xt.ja],Ds=xt.kc?dr.Ad:0)ir.la=an.la=0,dr.Za||(ir.Na=an.Na=0),dr.Hc=0,dr.Gc=0,dr.ia=0;else{var _n,Mr;if(ir=an,an=Bn,Ds=xt.Pa.Xc,fa=xt.ya[xt.aa+xt.ja],In=xt.pb[fa.$b],Nr=fa.ad,Xs=0,ma=xt.rb[xt.sb-1],Cr=cs=0,a(Nr,Xs,0,384),fa.Za)var Ls=0,so=Ds[3];else{Lr=i(16);var Fn=ir.Na+ma.Na;if(Fn=Wh(an,Ds[1],Fn,In.Eb,0,Lr,0),ir.Na=ma.Na=(0<Fn)+0,1<Fn)Ne(Lr,0,Nr,Xs);else{var ka=Lr[0]+3>>3;for(Lr=0;256>Lr;Lr+=16)Nr[Xs+Lr]=ka}Ls=1,so=Ds[0]}var Xr=15&ir.la,ds=15&ma.la;for(Lr=0;4>Lr;++Lr){var Ka=1&ds;for(ka=Mr=0;4>ka;++ka)Xr=Xr>>1|(Ka=(Fn=Wh(an,so,Fn=Ka+(1&Xr),In.Sc,Ls,Nr,Xs))>Ls)<<7,Mr=Mr<<2|(3<Fn?3:1<Fn?2:Nr[Xs+0]!=0),Xs+=16;Xr>>=4,ds=ds>>1|Ka<<7,cs=(cs<<8|Mr)>>>0}for(so=Xr,Ls=ds>>4,_n=0;4>_n;_n+=2){for(Mr=0,Xr=ir.la>>4+_n,ds=ma.la>>4+_n,Lr=0;2>Lr;++Lr){for(Ka=1&ds,ka=0;2>ka;++ka)Fn=Ka+(1&Xr),Xr=Xr>>1|(Ka=0<(Fn=Wh(an,Ds[2],Fn,In.Qc,0,Nr,Xs)))<<3,Mr=Mr<<2|(3<Fn?3:1<Fn?2:Nr[Xs+0]!=0),Xs+=16;Xr>>=2,ds=ds>>1|Ka<<5}Cr|=Mr<<4*_n,so|=Xr<<4<<_n,Ls|=(240&ds)<<_n}ir.la=so,ma.la=Ls,fa.Hc=cs,fa.Gc=Cr,fa.ia=43690&Cr?0:In.ia,Ds=!(cs|Cr)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[dr.$b][dr.Za],xt.wa[xt.Y+xt.ja].La|=!Ds),Bn.Ka)return fn(wr,7,"Premature end-of-file encountered.")}if(Dr(wr),xt=ls,Bn=1,dr=(Bt=wr).D,ir=0<Bt.L&&Bt.M>=Bt.zb&&Bt.M<=Bt.Va,Bt.Aa==0)t:{if(dr.M=Bt.M,dr.uc=ir,jn(Bt,dr),Bn=1,dr=(Mr=Bt.D).Nb,ir=(Cr=om[Bt.L])*Bt.R,an=Cr/2*Bt.B,Lr=16*dr*Bt.R,ka=8*dr*Bt.B,Ds=Bt.sa,fa=Bt.ta-ir+Lr,In=Bt.qa,Nr=Bt.ra-an+ka,Xs=Bt.Ha,ma=Bt.Ia-an+ka,ds=(Xr=Mr.M)==0,cs=Xr>=Bt.Va-1,Bt.Aa==2&&jn(Bt,Mr),Mr.uc)for(Ka=(Fn=Bt).D.M,t(Fn.D.uc),Mr=Fn.yb;Mr<Fn.Hb;++Mr){Ls=Mr,so=Ka;var pa=(Xa=(Ms=Fn).D).Nb;_n=Ms.R;var Xa=Xa.wa[Xa.Y+Ls],Ya=Ms.sa,Pa=Ms.ta+16*pa*_n+16*Ls,Za=Xa.dd,en=Xa.tc;if(en!=0)if(t(3<=en),Ms.L==1)0<Ls&&hl(Ya,Pa,_n,en+4),Xa.La&&J0(Ya,Pa,_n,en),0<so&&Ks(Ya,Pa,_n,en+4),Xa.La&&fl(Ya,Pa,_n,en);else{var Ja=Ms.B,ao=Ms.qa,id=Ms.ra+8*pa*Ja+8*Ls,pl=Ms.Ha,Ms=Ms.Ia+8*pa*Ja+8*Ls;pa=Xa.ld,0<Ls&&(qt(Ya,Pa,_n,en+4,Za,pa),Qn(ao,id,pl,Ms,Ja,en+4,Za,pa)),Xa.La&&(os(Ya,Pa,_n,en,Za,pa),es(ao,id,pl,Ms,Ja,en,Za,pa)),0<so&&(rt(Ya,Pa,_n,en+4,Za,pa),Yt(ao,id,pl,Ms,Ja,en+4,Za,pa)),Xa.La&&(Ns(Ya,Pa,_n,en,Za,pa),Rr(ao,id,pl,Ms,Ja,en,Za,pa))}}if(Bt.ia&&alert("todo:DitherRow"),xt.put!=null){if(Mr=16*Xr,Xr=16*(Xr+1),ds?(xt.y=Bt.sa,xt.O=Bt.ta+Lr,xt.f=Bt.qa,xt.N=Bt.ra+ka,xt.ea=Bt.Ha,xt.W=Bt.Ia+ka):(Mr-=Cr,xt.y=Ds,xt.O=fa,xt.f=In,xt.N=Nr,xt.ea=Xs,xt.W=ma),cs||(Xr-=Cr),Xr>xt.o&&(Xr=xt.o),xt.F=null,xt.J=null,Bt.Fa!=null&&0<Bt.Fa.length&&Mr<Xr&&(xt.J=tr(Bt,xt,Mr,Xr-Mr),xt.F=Bt.mb,xt.F==null&&xt.F.length==0)){Bn=fn(Bt,3,"Could not decode alpha data.");break t}Mr<xt.j&&(Cr=xt.j-Mr,Mr=xt.j,t(!(1&Cr)),xt.O+=Bt.R*Cr,xt.N+=Bt.B*(Cr>>1),xt.W+=Bt.B*(Cr>>1),xt.F!=null&&(xt.J+=xt.width*Cr)),Mr<Xr&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=Mr-xt.j,xt.U=xt.va-xt.v,xt.T=Xr-Mr,Bn=xt.put(xt))}dr+1!=Bt.Ic||cs||(n(Bt.sa,Bt.ta-ir,Ds,fa+16*Bt.R,ir),n(Bt.qa,Bt.ra-an,In,Nr+8*Bt.B,an),n(Bt.Ha,Bt.Ia-an,Xs,ma+8*Bt.B,an))}if(!Bn)return fn(wr,6,"Output aborted.")}return 1}(ge,Pe)),Pe.bc!=null&&Pe.bc(Pe),De&=1}return De?(ge.cb=0,De):0})(S,H)||(T=S.a)}}else T=S.a}T==0&&ie.Oa!=null&&ie.Oa.fd&&(T=sd(ie.ba))}ie=T}ne=ie!=0?null:11>ne?ce.f.RGBA.eb:ce.f.kb.y}else ne=null;return ne};var Q3=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(R,z){for(var M="",W=0;W<4;W++)M+=String.fromCharCode(R[z++]);return M}function f(R,z){return R[z+0]|R[z+1]<<8}function p(R,z){return(R[z+0]|R[z+1]<<8|R[z+2]<<16)>>>0}function b(R,z){return(R[z+0]|R[z+1]<<8|R[z+2]<<16|R[z+3]<<24)>>>0}new d;var x=[0],N=[0],j=[],w=new d,C=e,P=function(R,z){var M={},W=0,J=!1,K=0,V=0;if(M.frames=[],!function(G,Q){for(var le=0;le<4;le++)if(G[Q+le]!="RIFF".charCodeAt(le))return!0;return!1}(R,z)){for(b(R,z+=4),z+=8;z<R.length;){var me=u(R,z),se=b(R,z+=4);z+=4;var oe=se+(1&se);switch(me){case"VP8 ":case"VP8L":M.frames[W]===void 0&&(M.frames[W]={}),(te=M.frames[W]).src_off=J?V:z-8,te.src_size=K+se+8,W++,J&&(J=!1,K=0,V=0);break;case"VP8X":(te=M.header={}).feature_flags=R[z];var ye=z+4;te.canvas_width=1+p(R,ye),ye+=3,te.canvas_height=1+p(R,ye),ye+=3;break;case"ALPH":J=!0,K=oe+8,V=z-8;break;case"ANIM":(te=M.header).bgcolor=b(R,z),ye=z+4,te.loop_count=f(R,ye),ye+=2;break;case"ANMF":var we,te;(te=M.frames[W]={}).offset_x=2*p(R,z),z+=3,te.offset_y=2*p(R,z),z+=3,te.width=1+p(R,z),z+=3,te.height=1+p(R,z),z+=3,te.duration=p(R,z),z+=3,we=R[z++],te.dispose=1&we,te.blend=we>>1&1}me!="ANMF"&&(z+=oe)}return M}}(C,0);P.response=C,P.rgbaoutput=!0,P.dataurl=!1;var k=P.header?P.header:null,_=P.frames?P.frames:null;if(k){k.loop_counter=k.loop_count,x=[k.canvas_height],N=[k.canvas_width];for(var O=0;O<_.length&&_[O].blend!=0;O++);}var $=_[0],F=w.WebPDecodeRGBA(C,$.src_off,$.src_size,N,x);$.rgba=F,$.imgwidth=N[0],$.imgheight=x[0];for(var U=0;U<N[0]*x[0]*4;U++)j[U]=F[U];return this.width=N,this.height=x,this.data=j,this}(function(e){var t,r,n,a,i,o,c,d,u,f=function(G){return G=G||{},this.isStrokeTransparent=G.isStrokeTransparent||!1,this.strokeOpacity=G.strokeOpacity||1,this.strokeStyle=G.strokeStyle||"#000000",this.fillStyle=G.fillStyle||"#000000",this.isFillTransparent=G.isFillTransparent||!1,this.fillOpacity=G.fillOpacity||1,this.font=G.font||"10px sans-serif",this.textBaseline=G.textBaseline||"alphabetic",this.textAlign=G.textAlign||"left",this.lineWidth=G.lineWidth||1,this.lineJoin=G.lineJoin||"miter",this.lineCap=G.lineCap||"butt",this.path=G.path||[],this.transform=G.transform!==void 0?G.transform.clone():new d,this.globalCompositeOperation=G.globalCompositeOperation||"normal",this.globalAlpha=G.globalAlpha||1,this.clip_path=G.clip_path||[],this.currentPoint=G.currentPoint||new o,this.miterLimit=G.miterLimit||10,this.lastPoint=G.lastPoint||new o,this.lineDashOffset=G.lineDashOffset||0,this.lineDash=G.lineDash||[],this.margin=G.margin||[0,0,0,0],this.prevPageLastElemOffset=G.prevPageLastElemOffset||0,this.ignoreClearRect=typeof G.ignoreClearRect!="boolean"||G.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,c=this.internal.Rectangle,d=this.internal.Matrix,u=new f}]);var p=function(G){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Q=G;Object.defineProperty(this,"pdf",{get:function(){return Q}});var le=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return le},set:function(Se){le=!!Se}});var ve=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ve},set:function(Se){ve=!!Se}});var xe=0;Object.defineProperty(this,"posX",{get:function(){return xe},set:function(Se){isNaN(Se)||(xe=Se)}});var ke=0;Object.defineProperty(this,"posY",{get:function(){return ke},set:function(Se){isNaN(Se)||(ke=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var ae;typeof Se=="number"?ae=[Se,Se,Se,Se]:((ae=new Array(4))[0]=Se[0],ae[1]=Se.length>=2?Se[1]:ae[0],ae[2]=Se.length>=3?Se[2]:ae[0],ae[3]=Se.length>=4?Se[3]:ae[1]),u.margin=ae}});var Re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Re},set:function(Se){Re=Se}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Se){be=Se}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(Se){Te=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof f&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(Se){Ve=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var ae;ae=b(Se),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var ae=b(Se);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var Oe=null,Ye=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ye},set:function(Se){Oe=null,Ye=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var ae;if(this.ctx.font=Se,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Fe=ae[1];ae[2];var ot=ae[3],at=ae[4];ae[5];var qe=ae[6],pt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(at)[2];at=Math.floor(pt==="px"?parseFloat(at)*this.pdf.internal.scaleFactor:pt==="em"?parseFloat(at)*this.pdf.getFontSize():parseFloat(at)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(at);var Ue=function(Ce){var Be,et,Xe=[],Le=Ce.trim();if(Le==="")return E2;if(Le in zS)return[zS[Le]];for(;Le!=="";){switch(et=null,Be=(Le=qS(Le)).charAt(0)){case'"':case"'":et=Kle(Le.substring(1),Be);break;default:et=Xle(Le)}if(et===null||(Xe.push(et[0]),(Le=qS(et[1]))!==""&&Le.charAt(0)!==","))return E2;Le=Le.replace(/^,/,"")}return Xe}(qe);if(this.fontFaces){var jt=function(Ce,Be){if(Oe===null){var et=function(Xe){var Le=[];return Object.keys(Xe).forEach(function(mt){Xe[mt].forEach(function(yt){var ht=null;switch(yt){case"bold":ht={family:mt,weight:"bold"};break;case"italic":ht={family:mt,style:"italic"};break;case"bolditalic":ht={family:mt,weight:"bold",style:"italic"};break;case"":case"normal":ht={family:mt}}ht!==null&&(ht.ref={name:mt,style:yt},Le.push(ht))})}),Le}(Ce.getFontList());Oe=function(Xe){for(var Le={},mt=0;mt<Xe.length;++mt){var yt=S2(Xe[mt]),ht=yt.family,Lt=yt.stretch,Ct=yt.style,or=yt.weight;Le[ht]=Le[ht]||{},Le[ht][Lt]=Le[ht][Lt]||{},Le[ht][Lt][Ct]=Le[ht][Lt][Ct]||{},Le[ht][Lt][Ct][or]=yt}return Le}(et.concat(Be))}return Oe}(this.pdf,this.fontFaces),vt=Ue.map(function(Ce){return{family:Ce,stretch:"normal",weight:ot,style:Fe}}),Gt=function(Ce,Be,et){for(var Xe=(et=et||{}).defaultFontFamily||"times",Le=Object.assign({},Gle,et.genericFontFamilies||{}),mt=null,yt=null,ht=0;ht<Be.length;++ht)if(Le[(mt=S2(Be[ht])).family]&&(mt.family=Le[mt.family]),Ce.hasOwnProperty(mt.family)){yt=Ce[mt.family];break}if(!(yt=yt||Ce[Xe]))throw new Error("Could not find a font-family for the rule '"+WS(mt)+"' and default family '"+Xe+"'.");if(yt=function(Lt,Ct){if(Ct[Lt])return Ct[Lt];var or=tw[Lt],wt=or<=tw.normal?-1:1,er=$S(Ct,MR,or,wt);if(!er)throw new Error("Could not find a matching font-stretch value for "+Lt);return er}(mt.stretch,yt),yt=function(Lt,Ct){if(Ct[Lt])return Ct[Lt];for(var or=LR[Lt],wt=0;wt<or.length;++wt)if(Ct[or[wt]])return Ct[or[wt]];throw new Error("Could not find a matching font-style for "+Lt)}(mt.style,yt),!(yt=function(Lt,Ct){if(Ct[Lt])return Ct[Lt];if(Lt===400&&Ct[500])return Ct[500];if(Lt===500&&Ct[400])return Ct[400];var or=Vle[Lt],wt=$S(Ct,BR,or,Lt<400?-1:1);if(!wt)throw new Error("Could not find a matching font-weight for value "+Lt);return wt}(mt.weight,yt)))throw new Error("Failed to resolve a font for the rule '"+WS(mt)+"'.");return yt}(jt,vt);this.pdf.setFont(Gt.ref.name,Gt.ref.style)}else{var Kt="";(ot==="bold"||parseInt(ot,10)>=700||Fe==="bold")&&(Kt="bold"),Fe==="italic"&&(Kt+="italic"),Kt.length===0&&(Kt="normal");for(var _t="",mr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ht=0;Ht<Ue.length;Ht++){if(this.pdf.internal.getFont(Ue[Ht],Kt,{noFallback:!0,disableWarning:!0})!==void 0){_t=Ue[Ht];break}if(Kt==="bolditalic"&&this.pdf.internal.getFont(Ue[Ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_t=Ue[Ht],Kt="bold";else if(this.pdf.internal.getFont(Ue[Ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_t=Ue[Ht],Kt="normal";break}}if(_t===""){for(var lt=0;lt<Ue.length;lt++)if(mr[Ue[lt]]){_t=mr[Ue[lt]];break}}_t=_t===""?"Times":_t,this.pdf.setFont(_t,Kt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};p.prototype.setLineDash=function(G){this.lineDash=G},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){_.call(this,"fill",!1)},p.prototype.stroke=function(){_.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(G,Q){if(isNaN(G)||isNaN(Q))throw Yr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var le=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"mt",x:le.x,y:le.y}),this.ctx.lastPoint=new o(G,Q)},p.prototype.closePath=function(){var G=new o(0,0),Q=0;for(Q=this.path.length-1;Q!==-1;Q--)if(this.path[Q].type==="begin"&&Fr(this.path[Q+1])==="object"&&typeof this.path[Q+1].x=="number"){G=new o(this.path[Q+1].x,this.path[Q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(G.x,G.y)},p.prototype.lineTo=function(G,Q){if(isNaN(G)||isNaN(Q))throw Yr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var le=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"lt",x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},p.prototype.quadraticCurveTo=function(G,Q,le,ve){if(isNaN(le)||isNaN(ve)||isNaN(G)||isNaN(Q))throw Yr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xe=this.ctx.transform.applyToPoint(new o(le,ve)),ke=this.ctx.transform.applyToPoint(new o(G,Q));this.path.push({type:"qct",x1:ke.x,y1:ke.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},p.prototype.bezierCurveTo=function(G,Q,le,ve,xe,ke){if(isNaN(xe)||isNaN(ke)||isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve))throw Yr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Re=this.ctx.transform.applyToPoint(new o(xe,ke)),be=this.ctx.transform.applyToPoint(new o(G,Q)),Te=this.ctx.transform.applyToPoint(new o(le,ve));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Te.x,y2:Te.y,x:Re.x,y:Re.y}),this.ctx.lastPoint=new o(Re.x,Re.y)},p.prototype.arc=function(G,Q,le,ve,xe,ke){if(isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve)||isNaN(xe))throw Yr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ke=!!ke,!this.ctx.transform.isIdentity){var Re=this.ctx.transform.applyToPoint(new o(G,Q));G=Re.x,Q=Re.y;var be=this.ctx.transform.applyToPoint(new o(0,le)),Te=this.ctx.transform.applyToPoint(new o(0,0));le=Math.sqrt(Math.pow(be.x-Te.x,2)+Math.pow(be.y-Te.y,2))}Math.abs(xe-ve)>=2*Math.PI&&(ve=0,xe=2*Math.PI),this.path.push({type:"arc",x:G,y:Q,radius:le,startAngle:ve,endAngle:xe,counterclockwise:ke})},p.prototype.arcTo=function(G,Q,le,ve,xe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(G,Q,le,ve){if(isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve))throw Yr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(G,Q),this.lineTo(G+le,Q),this.lineTo(G+le,Q+ve),this.lineTo(G,Q+ve),this.lineTo(G,Q),this.lineTo(G+le,Q),this.lineTo(G,Q)},p.prototype.fillRect=function(G,Q,le,ve){if(isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve))throw Yr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var xe={};this.lineCap!=="butt"&&(xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(G,Q,le,ve),this.fill(),xe.hasOwnProperty("lineCap")&&(this.lineCap=xe.lineCap),xe.hasOwnProperty("lineJoin")&&(this.lineJoin=xe.lineJoin)}},p.prototype.strokeRect=function(G,Q,le,ve){if(isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve))throw Yr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(G,Q,le,ve),this.stroke())},p.prototype.clearRect=function(G,Q,le,ve){if(isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve))throw Yr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(G,Q,le,ve))},p.prototype.save=function(G){G=typeof G!="boolean"||G;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,le=0;le<this.pdf.internal.getNumberOfPages();le++)this.pdf.setPage(le+1),this.pdf.internal.out("q");if(this.pdf.setPage(Q),G){this.ctx.fontSize=this.pdf.internal.getFontSize();var ve=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ve}},p.prototype.restore=function(G){G=typeof G!="boolean"||G;for(var Q=this.pdf.internal.getCurrentPageInfo().pageNumber,le=0;le<this.pdf.internal.getNumberOfPages();le++)this.pdf.setPage(le+1),this.pdf.internal.out("Q");this.pdf.setPage(Q),G&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(G){var Q,le,ve,xe;if(G.isCanvasGradient===!0&&(G=G.getColor()),!G)return{r:0,g:0,b:0,a:0,style:G};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(G))Q=0,le=0,ve=0,xe=0;else{var ke=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(G);if(ke!==null)Q=parseInt(ke[1]),le=parseInt(ke[2]),ve=parseInt(ke[3]),xe=1;else if((ke=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(G))!==null)Q=parseInt(ke[1]),le=parseInt(ke[2]),ve=parseInt(ke[3]),xe=parseFloat(ke[4]);else{if(xe=1,typeof G=="string"&&G.charAt(0)!=="#"){var Re=new PR(G);G=Re.ok?Re.toHex():"#000000"}G.length===4?(Q=G.substring(1,2),Q+=Q,le=G.substring(2,3),le+=le,ve=G.substring(3,4),ve+=ve):(Q=G.substring(1,3),le=G.substring(3,5),ve=G.substring(5,7)),Q=parseInt(Q,16),le=parseInt(le,16),ve=parseInt(ve,16)}}return{r:Q,g:le,b:ve,a:xe,style:G}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(G,Q,le,ve){if(isNaN(Q)||isNaN(le)||typeof G!="string")throw Yr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ve=isNaN(ve)?void 0:ve,!x.call(this)){var xe=oe(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;W.call(this,{text:G,x:Q,y:le,scale:ke,angle:xe,align:this.textAlign,maxWidth:ve})}},p.prototype.strokeText=function(G,Q,le,ve){if(isNaN(Q)||isNaN(le)||typeof G!="string")throw Yr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ve=isNaN(ve)?void 0:ve;var xe=oe(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;W.call(this,{text:G,x:Q,y:le,scale:ke,renderingMode:"stroke",angle:xe,align:this.textAlign,maxWidth:ve})}},p.prototype.measureText=function(G){if(typeof G!="string")throw Yr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Q=this.pdf,le=this.pdf.internal.scaleFactor,ve=Q.internal.getFontSize(),xe=Q.getStringUnitWidth(G)*ve/Q.internal.scaleFactor;return new function(ke){var Re=(ke=ke||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Re}}),this}({width:xe*=Math.round(96*le/72*1e4)/1e4})},p.prototype.scale=function(G,Q){if(isNaN(G)||isNaN(Q))throw Yr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var le=new d(G,0,0,Q,0,0);this.ctx.transform=this.ctx.transform.multiply(le)},p.prototype.rotate=function(G){if(isNaN(G))throw Yr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Q=new d(Math.cos(G),Math.sin(G),-Math.sin(G),Math.cos(G),0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.translate=function(G,Q){if(isNaN(G)||isNaN(Q))throw Yr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var le=new d(1,0,0,1,G,Q);this.ctx.transform=this.ctx.transform.multiply(le)},p.prototype.transform=function(G,Q,le,ve,xe,ke){if(isNaN(G)||isNaN(Q)||isNaN(le)||isNaN(ve)||isNaN(xe)||isNaN(ke))throw Yr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Re=new d(G,Q,le,ve,xe,ke);this.ctx.transform=this.ctx.transform.multiply(Re)},p.prototype.setTransform=function(G,Q,le,ve,xe,ke){G=isNaN(G)?1:G,Q=isNaN(Q)?0:Q,le=isNaN(le)?0:le,ve=isNaN(ve)?1:ve,xe=isNaN(xe)?0:xe,ke=isNaN(ke)?0:ke,this.ctx.transform=new d(G,Q,le,ve,xe,ke)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(G,Q,le,ve,xe,ke,Re,be,Te){var Ve=this.pdf.getImageProperties(G),Oe=1,Ye=1,Se=1,ae=1;ve!==void 0&&be!==void 0&&(Se=be/ve,ae=Te/xe,Oe=Ve.width/ve*be/ve,Ye=Ve.height/xe*Te/xe),ke===void 0&&(ke=Q,Re=le,Q=0,le=0),ve!==void 0&&be===void 0&&(be=ve,Te=xe),ve===void 0&&be===void 0&&(be=Ve.width,Te=Ve.height);for(var Fe,ot=this.ctx.transform.decompose(),at=oe(ot.rotate.shx),qe=new d,pt=(qe=(qe=(qe=qe.multiply(ot.translate)).multiply(ot.skew)).multiply(ot.scale)).applyToRectangle(new c(ke-Q*Se,Re-le*ae,ve*Oe,xe*Ye)),Ue=w.call(this,pt),jt=[],vt=0;vt<Ue.length;vt+=1)jt.indexOf(Ue[vt])===-1&&jt.push(Ue[vt]);if(k(jt),this.autoPaging)for(var Gt=jt[0],Kt=jt[jt.length-1],_t=Gt;_t<Kt+1;_t++){this.pdf.setPage(_t);var mr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=_t===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=_t===1?0:lt+(_t-2)*Ce;if(this.ctx.clip_path.length!==0){var et=this.path;Fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Fe,this.posX+this.margin[3],-Be+Ht+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=et}var Xe=JSON.parse(JSON.stringify(pt));Xe=P([Xe],this.posX+this.margin[3],-Be+Ht+this.ctx.prevPageLastElemOffset)[0];var Le=(_t>Gt||_t<Kt)&&j.call(this);Le&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mr,Ce,null).clip().discardPath()),this.pdf.addImage(G,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,at),Le&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(G,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,at)};var w=function(G,Q,le){var ve=[];Q=Q||this.pdf.internal.pageSize.width,le=le||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xe=this.posY+this.ctx.prevPageLastElemOffset;switch(G.type){default:case"mt":case"lt":ve.push(Math.floor((G.y+xe)/le)+1);break;case"arc":ve.push(Math.floor((G.y+xe-G.radius)/le)+1),ve.push(Math.floor((G.y+xe+G.radius)/le)+1);break;case"qct":var ke=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x,G.y);ve.push(Math.floor((ke.y+xe)/le)+1),ve.push(Math.floor((ke.y+ke.h+xe)/le)+1);break;case"bct":var Re=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,G.x1,G.y1,G.x2,G.y2,G.x,G.y);ve.push(Math.floor((Re.y+xe)/le)+1),ve.push(Math.floor((Re.y+Re.h+xe)/le)+1);break;case"rect":ve.push(Math.floor((G.y+xe)/le)+1),ve.push(Math.floor((G.y+G.h+xe)/le)+1)}for(var be=0;be<ve.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<ve[be];)C.call(this);return ve},C=function(){var G=this.fillStyle,Q=this.strokeStyle,le=this.font,ve=this.lineCap,xe=this.lineWidth,ke=this.lineJoin;this.pdf.addPage(),this.fillStyle=G,this.strokeStyle=Q,this.font=le,this.lineCap=ve,this.lineWidth=xe,this.lineJoin=ke},P=function(G,Q,le){for(var ve=0;ve<G.length;ve++)switch(G[ve].type){case"bct":G[ve].x2+=Q,G[ve].y2+=le;case"qct":G[ve].x1+=Q,G[ve].y1+=le;default:G[ve].x+=Q,G[ve].y+=le}return G},k=function(G){return G.sort(function(Q,le){return Q-le})},_=function(G,Q){for(var le,ve,xe=this.fillStyle,ke=this.strokeStyle,Re=this.lineCap,be=this.lineWidth,Te=Math.abs(be*this.ctx.transform.scaleX),Ve=this.lineJoin,Oe=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),Se=[],ae=0;ae<Ye.length;ae++)if(Ye[ae].x!==void 0)for(var Fe=w.call(this,Ye[ae]),ot=0;ot<Fe.length;ot+=1)Se.indexOf(Fe[ot])===-1&&Se.push(Fe[ot]);for(var at=0;at<Se.length;at++)for(;this.pdf.internal.getNumberOfPages()<Se[at];)C.call(this);if(k(Se),this.autoPaging)for(var qe=Se[0],pt=Se[Se.length-1],Ue=qe;Ue<pt+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=xe,this.strokeStyle=ke,this.lineCap=Re,this.lineWidth=Te,this.lineJoin=Ve;var jt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=Ue===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=Ue===1?0:Gt+(Ue-2)*Kt;if(this.ctx.clip_path.length!==0){var mr=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(le,this.posX+this.margin[3],-_t+vt+this.ctx.prevPageLastElemOffset),O.call(this,G,!0),this.path=mr}if(ve=JSON.parse(JSON.stringify(Oe)),this.path=P(ve,this.posX+this.margin[3],-_t+vt+this.ctx.prevPageLastElemOffset),Q===!1||Ue===0){var Ht=(Ue>qe||Ue<pt)&&j.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,Kt,null).clip().discardPath()),O.call(this,G,Q),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Te,O.call(this,G,Q),this.lineWidth=be;this.path=Oe},O=function(G,Q){if((G!=="stroke"||Q||!N.call(this))&&(G==="stroke"||Q||!x.call(this))){for(var le,ve,xe=[],ke=this.path,Re=0;Re<ke.length;Re++){var be=ke[Re];switch(be.type){case"begin":xe.push({begin:!0});break;case"close":xe.push({close:!0});break;case"mt":xe.push({start:be,deltas:[],abs:[]});break;case"lt":var Te=xe.length;if(ke[Re-1]&&!isNaN(ke[Re-1].x)&&(le=[be.x-ke[Re-1].x,be.y-ke[Re-1].y],Te>0)){for(;Te>=0;Te--)if(xe[Te-1].close!==!0&&xe[Te-1].begin!==!0){xe[Te-1].deltas.push(le),xe[Te-1].abs.push(be);break}}break;case"bct":le=[be.x1-ke[Re-1].x,be.y1-ke[Re-1].y,be.x2-ke[Re-1].x,be.y2-ke[Re-1].y,be.x-ke[Re-1].x,be.y-ke[Re-1].y],xe[xe.length-1].deltas.push(le);break;case"qct":var Ve=ke[Re-1].x+2/3*(be.x1-ke[Re-1].x),Oe=ke[Re-1].y+2/3*(be.y1-ke[Re-1].y),Ye=be.x+2/3*(be.x1-be.x),Se=be.y+2/3*(be.y1-be.y),ae=be.x,Fe=be.y;le=[Ve-ke[Re-1].x,Oe-ke[Re-1].y,Ye-ke[Re-1].x,Se-ke[Re-1].y,ae-ke[Re-1].x,Fe-ke[Re-1].y],xe[xe.length-1].deltas.push(le);break;case"arc":xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(xe[xe.length-1].abs)&&xe[xe.length-1].abs.push(be)}}ve=Q?null:G==="stroke"?"stroke":"fill";for(var ot=!1,at=0;at<xe.length;at++)if(xe[at].arc)for(var qe=xe[at].abs,pt=0;pt<qe.length;pt++){var Ue=qe[pt];Ue.type==="arc"?U.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,Q,!ot):J.call(this,Ue.x,Ue.y),ot=!0}else if(xe[at].close===!0)this.pdf.internal.out("h"),ot=!1;else if(xe[at].begin!==!0){var jt=xe[at].start.x,vt=xe[at].start.y;K.call(this,xe[at].deltas,jt,vt),ot=!0}ve&&R.call(this,ve),Q&&z.call(this)}},$=function(G){var Q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,le=Q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return G-le;case"top":return G+Q-le;case"hanging":return G+Q-2*le;case"middle":return G+Q/2-le;default:return G}},F=function(G){return G+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var G=function(){};return G.colorStops=[],G.addColorStop=function(Q,le){this.colorStops.push([Q,le])},G.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},G.isCanvasGradient=!0,G},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(G,Q,le,ve,xe,ke,Re,be,Te){for(var Ve=me.call(this,le,ve,xe,ke),Oe=0;Oe<Ve.length;Oe++){var Ye=Ve[Oe];Oe===0&&(Te?M.call(this,Ye.x1+G,Ye.y1+Q):J.call(this,Ye.x1+G,Ye.y1+Q)),V.call(this,G,Q,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}be?z.call(this):R.call(this,Re)},R=function(G){switch(G){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(G,Q){this.pdf.internal.out(r(G)+" "+n(Q)+" m")},W=function(G){var Q;switch(G.align){case"right":case"end":Q="right";break;case"center":Q="center";break;default:Q="left"}var le=this.pdf.getTextDimensions(G.text),ve=$.call(this,G.y),xe=F.call(this,ve)-le.h,ke=this.ctx.transform.applyToPoint(new o(G.x,ve)),Re=this.ctx.transform.decompose(),be=new d;be=(be=(be=be.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale);for(var Te,Ve,Oe,Ye=this.ctx.transform.applyToRectangle(new c(G.x,ve,le.w,le.h)),Se=be.applyToRectangle(new c(G.x,xe,le.w,le.h)),ae=w.call(this,Se),Fe=[],ot=0;ot<ae.length;ot+=1)Fe.indexOf(ae[ot])===-1&&Fe.push(ae[ot]);if(k(Fe),this.autoPaging)for(var at=Fe[0],qe=Fe[Fe.length-1],pt=at;pt<qe+1;pt++){this.pdf.setPage(pt);var Ue=pt===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[2],Gt=vt-this.margin[0],Kt=this.pdf.internal.pageSize.width-this.margin[1],_t=Kt-this.margin[3],mr=pt===1?0:jt+(pt-2)*Gt;if(this.ctx.clip_path.length!==0){var Ht=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Te,this.posX+this.margin[3],-1*mr+Ue),O.call(this,"fill",!0),this.path=Ht}var lt=P([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-mr+Ue+this.ctx.prevPageLastElemOffset)[0];G.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*G.scale),Oe=this.lineWidth,this.lineWidth=Oe*G.scale);var Ce=this.autoPaging!=="text";if(Ce||lt.y+lt.h<=vt){if(Ce||lt.y>=Ue&&lt.x<=Kt){var Be=Ce?G.text:this.pdf.splitTextToSize(G.text,G.maxWidth||Kt-lt.x)[0],et=P([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-mr+Ue+this.ctx.prevPageLastElemOffset)[0],Xe=Ce&&(pt>at||pt<qe)&&j.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Gt,null).clip().discardPath()),this.pdf.text(Be,et.x,et.y,{angle:G.angle,align:Q,renderingMode:G.renderingMode}),Xe&&this.pdf.restoreGraphicsState()}}else lt.y<vt&&(this.ctx.prevPageLastElemOffset+=vt-lt.y);G.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=Oe)}else G.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*G.scale),Oe=this.lineWidth,this.lineWidth=Oe*G.scale),this.pdf.text(G.text,ke.x+this.posX,ke.y+this.posY,{angle:G.angle,align:Q,renderingMode:G.renderingMode,maxWidth:G.maxWidth}),G.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=Oe)},J=function(G,Q,le,ve){le=le||0,ve=ve||0,this.pdf.internal.out(r(G+le)+" "+n(Q+ve)+" l")},K=function(G,Q,le){return this.pdf.lines(G,Q,le,null,null)},V=function(G,Q,le,ve,xe,ke,Re,be){this.pdf.internal.out([t(a(le+G)),t(i(ve+Q)),t(a(xe+G)),t(i(ke+Q)),t(a(Re+G)),t(i(be+Q)),"c"].join(" "))},me=function(G,Q,le,ve){for(var xe=2*Math.PI,ke=Math.PI/2;Q>le;)Q-=xe;var Re=Math.abs(le-Q);Re<xe&&ve&&(Re=xe-Re);for(var be=[],Te=ve?-1:1,Ve=Q;Re>1e-5;){var Oe=Ve+Te*Math.min(Re,ke);be.push(se.call(this,G,Ve,Oe)),Re-=Math.abs(Oe-Ve),Ve=Oe}return be},se=function(G,Q,le){var ve=(le-Q)/2,xe=G*Math.cos(ve),ke=G*Math.sin(ve),Re=xe,be=-ke,Te=Re*Re+be*be,Ve=Te+Re*xe+be*ke,Oe=4/3*(Math.sqrt(2*Te*Ve)-Ve)/(Re*ke-be*xe),Ye=Re-Oe*be,Se=be+Oe*Re,ae=Ye,Fe=-Se,ot=ve+Q,at=Math.cos(ot),qe=Math.sin(ot);return{x1:G*Math.cos(Q),y1:G*Math.sin(Q),x2:Ye*at-Se*qe,y2:Ye*qe+Se*at,x3:ae*at-Fe*qe,y3:ae*qe+Fe*at,x4:G*Math.cos(le),y4:G*Math.sin(le)}},oe=function(G){return 180*G/Math.PI},ye=function(G,Q,le,ve,xe,ke){var Re=G+.5*(le-G),be=Q+.5*(ve-Q),Te=xe+.5*(le-xe),Ve=ke+.5*(ve-ke),Oe=Math.min(G,xe,Re,Te),Ye=Math.max(G,xe,Re,Te),Se=Math.min(Q,ke,be,Ve),ae=Math.max(Q,ke,be,Ve);return new c(Oe,Se,Ye-Oe,ae-Se)},we=function(G,Q,le,ve,xe,ke,Re,be){var Te,Ve,Oe,Ye,Se,ae,Fe,ot,at,qe,pt,Ue,jt,vt,Gt=le-G,Kt=ve-Q,_t=xe-le,mr=ke-ve,Ht=Re-xe,lt=be-ke;for(Ve=0;Ve<41;Ve++)at=(Fe=(Oe=G+(Te=Ve/40)*Gt)+Te*((Se=le+Te*_t)-Oe))+Te*(Se+Te*(xe+Te*Ht-Se)-Fe),qe=(ot=(Ye=Q+Te*Kt)+Te*((ae=ve+Te*mr)-Ye))+Te*(ae+Te*(ke+Te*lt-ae)-ot),Ve==0?(pt=at,Ue=qe,jt=at,vt=qe):(pt=Math.min(pt,at),Ue=Math.min(Ue,qe),jt=Math.max(jt,at),vt=Math.max(vt,qe));return new c(Math.round(pt),Math.round(Ue),Math.round(jt-pt),Math.round(vt-Ue))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var G,Q,le=(G=this.ctx.lineDash,Q=this.ctx.lineDashOffset,JSON.stringify({lineDash:G,lineDashOffset:Q}));this.prevLineDash!==le&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=le)}}})($t.API),function(e){var t=function(o){var c,d,u,f,p,b,x,N,j,w;for(d=[],u=0,f=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;f>u;u+=4)(p=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(b=(p=((p=((p=((p=(p-(w=p%85))/85)-(j=p%85))/85)-(N=p%85))/85)-(x=p%85))/85)%85,d.push(b+33,x+33,N+33,j+33,w+33)):d.push(122);return function(C,P){for(var k=P;k>0;k--)C.pop()}(d,c.length),String.fromCharCode.apply(String,d)+"~>"},r=function(o){var c,d,u,f,p,b=String,x="length",N=255,j="charCodeAt",w="slice",C="replace";for(o[w](-2),o=o[w](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),u=[],f=0,p=(o+=c="uuuuu"[w](o[x]%5||5))[x];p>f;f+=5)d=52200625*(o[j](f)-33)+614125*(o[j](f+1)-33)+7225*(o[j](f+2)-33)+85*(o[j](f+3)-33)+(o[j](f+4)-33),u.push(N&d>>24,N&d>>16,N&d>>8,N&d);return function(P,k){for(var _=k;_>0;_--)P.pop()}(u,c[x]),b.fromCharCode.apply(b,u)},n=function(o){return o.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var d="",u=0;u<o.length;u+=2)d+=String.fromCharCode("0x"+(o[u]+o[u+1]));return d},i=function(o){for(var c=new Uint8Array(o.length),d=o.length;d--;)c[d]=o.charCodeAt(d);return(c=Kv(c)).reduce(function(u,f){return u+String.fromCharCode(f)},"")};e.processDataByFilters=function(o,c){var d=0,u=o||"",f=[];for(typeof(c=c||[])=="string"&&(c=[c]),d=0;d<c.length;d+=1)switch(c[d]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[d]+'" is not implemented')}return{data:u,reverseChain:f.reverse().join(" ")}}}($t.API),function(e){e.loadFile=function(t,r,n){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var c=void 0;try{c=function(d,u,f){var p=new XMLHttpRequest,b=0,x=function(N){var j=N.length,w=[],C=String.fromCharCode;for(b=0;b<j;b+=1)w.push(C(255&N.charCodeAt(b)));return w.join("")};if(p.open("GET",d,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?f(x(this.responseText)):f(void 0)}),p.send(null),u&&p.status===200)return x(p.responseText)}(a,i,o)}catch{}return c}(t,r,n)},e.loadImageFile=e.loadFile}($t.API),function(e){function t(){return(rr.html2canvas?Promise.resolve(rr.html2canvas):l2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(rr.DOMPurify?Promise.resolve(rr.DOMPurify):l2(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var d=Fr(c);return d==="undefined"?"undefined":d==="string"||c instanceof String?"string":d==="number"||c instanceof Number?"number":d==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":d==="object"?"object":"unknown"},a=function(c,d){var u=document.createElement(c);for(var f in d.className&&(u.className=d.className),d.innerHTML&&d.dompurify&&(u.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)u.style[f]=d.style[f];return u},i=function c(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft},!0)),f},o=function c(d){var u=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),f=c.convert(Promise.resolve(),u);return(f=f.setProgress(1,c,1,[c])).set(d)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,d){return c.__proto__=d||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,d){return this.then(function(){switch(d=d||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c),d){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:c,dompurify:u})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(d){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,d(this.prop.container,u)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(d){var u=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=f,f)for(var x=0;x<f.length;++x){var N=f[x],j=N.src.find(function(w){return w.format==="truetype"});j&&u.addFont(j.url,N.ref.name,N.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,u.context2d.save(!0),d(this.prop.container,b)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,d,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(c,d):this.outputPdf(c,d)},o.prototype.outputPdf=function(c,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,d)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var d=Object.keys(c||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=c[u]};switch(u){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[u]=c[u]}}},this);return this.then(function(){return this.thenList(d)})},o.prototype.get=function(c,d){return this.then(function(){var u=c in o.template.prop?this.prop[c]:this.opt[c];return d?d(u):u})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function d(u,f){return Math.floor(u*f/72*96)}return this.then(function(){(c=c||$t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:d(c.inner.width,c.k),height:d(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,d,u,f){return c!=null&&(this.progress.val=c),d!=null&&(this.progress.state=d),u!=null&&(this.progress.n=u),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,d,u,f){return this.setProgress(c?this.progress.val+c:null,d||null,u?this.progress.n+u:null,f?this.progress.stack.concat(f):null)},o.prototype.then=function(c,d){var u=this;return this.thenCore(c,d,function(f,p){return u.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(b){return u.updateProgress(null,f),b}).then(f,p).then(function(b){return u.updateProgress(1),b})})},o.prototype.thenCore=function(c,d,u){u=u||Promise.prototype.then;var f=this;c&&(c=c.bind(f)),d&&(d=d.bind(f));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:o.convert(Object.assign({},f),Promise.prototype),b=u.call(p,c,d);return o.convert(b,f.__proto__)},o.prototype.thenExternal=function(c,d){return Promise.prototype.then.call(this,c,d)},o.prototype.thenList=function(c){var d=this;return c.forEach(function(u){d=d.thenCore(u)}),d},o.prototype.catch=function(c){c&&(c=c.bind(this));var d=Promise.prototype.catch.call(this,c);return o.convert(d,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,$t.getPageSize=function(c,d,u){if(Fr(c)==="object"){var f=c;c=f.orientation,d=f.unit||d,u=f.format||u}d=d||"mm",u=u||"a4",c=(""+(c||"P")).toLowerCase();var p,b=(""+u).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+d}var N,j=0,w=0;if(x.hasOwnProperty(b))j=x[b][1]/p,w=x[b][0]/p;else try{j=u[1],w=u[0]}catch{throw new Error("Invalid format: "+u)}if(c==="p"||c==="portrait")c="p",w>j&&(N=w,w=j,j=N);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",j>w&&(N=w,w=j,j=N)}return{width:w,height:j,unit:d,k:p,orientation:c}},e.html=function(c,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(S2):null;var u=new o(d);return d.worker?u:u.from(c).doCallback()}}($t.API),$t.API.addJS=function(e){return VS=e,this.internal.events.subscribe("postPutResources",function(){sp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),HS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+VS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sp!==void 0&&HS!==void 0&&this.internal.out("/Names <</JavaScript "+sp+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],c=n.exec(o);if(c!=null){var d=c[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var p=r.internal.newObject();f.push(p);var b=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var c=this.count=this.count_r({count:0},o);if(c>0&&this.line("/Count "+c),o.options&&o.options.pageNumber){var d=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}($t.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,c){var d,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=function(p){for(var b,x=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,j={width:0,height:0,numcomponents:1},w=4;w<N;w+=2){if(w+=x,t.indexOf(p.charCodeAt(w+1))!==-1){b=256*p.charCodeAt(w+5)+p.charCodeAt(w+6),j={width:256*p.charCodeAt(w+7)+p.charCodeAt(w+8),height:b,numcomponents:p.charCodeAt(w+9)};break}x=256*p.charCodeAt(w+2)+p.charCodeAt(w+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}f={data:r,width:d.width,height:d.height,colorSpace:c,bitsPerComponent:8,filter:u,index:n,alias:a}}return f}}($t.API),$t.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=_le(e,{checkCrc:!0}),o=i.width,c=i.height,d=i.channels,u=i.palette,f=i.depth;a=u&&d===1?function(U){for(var R=U.width,z=U.height,M=U.data,W=U.palette,J=U.depth,K=!1,V=[],me=[],se=void 0,oe=!1,ye=0,we=0;we<W.length;we++){var te=YA(W[we],4),G=te[0],Q=te[1],le=te[2],ve=te[3];V.push(G,Q,le),ve!=null&&(ve===0?(ye++,me.length<1&&me.push(we)):ve<255&&(oe=!0))}if(oe||ye>1){K=!0,me=void 0;var xe=R*z;se=new Uint8Array(xe);for(var ke=new DataView(M.buffer),Re=0;Re<xe;Re++){var be=k2(ke,Re,J),Te=YA(W[be],4)[3];se[Re]=Te}}else ye===0&&(me=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:K?8:void 0,colorBytes:M,alphaBytes:se,needSMask:K,palette:V,mask:me}}(i):d===2||d===4?function(U){for(var R=U.data,z=U.width,M=U.height,W=U.channels,J=U.depth,K=W===2?"DeviceGray":"DeviceRGB",V=W-1,me=z*M,se=V,oe=me*se,ye=1*me,we=Math.ceil(oe*J/8),te=Math.ceil(ye*J/8),G=new Uint8Array(we),Q=new Uint8Array(te),le=new DataView(R.buffer),ve=new DataView(G.buffer),xe=new DataView(Q.buffer),ke=!1,Re=0;Re<me;Re++){for(var be=Re*W,Te=0;Te<se;Te++)tE(ve,k2(le,be+Te,J),Re*se+Te,J);var Ve=k2(le,be+se,J);Ve<(1<<J)-1&&(ke=!0),tE(xe,Ve,1*Re,J)}return{colorSpace:K,colorsPerPixel:V,sMaskBitsPerComponent:ke?J:void 0,colorBytes:G,alphaBytes:Q,needSMask:ke}}(i):function(U){var R=U.data,z=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:z,colorsPerPixel:z==="DeviceGray"?1:3,colorBytes:R instanceof Uint16Array?function(M){for(var W=M.length,J=new Uint8Array(2*W),K=new DataView(J.buffer,J.byteOffset,J.byteLength),V=0;V<W;V++)K.setUint16(2*V,M[V],!1);return J}(R):R,needSMask:!1}}(i);var p,b,x,N=a,j=N.colorSpace,w=N.colorsPerPixel,C=N.sMaskBitsPerComponent,P=N.colorBytes,k=N.alphaBytes,_=N.needSMask,O=N.palette,$=N.mask,F=null;return n!==$t.API.image_compression.NONE&&typeof Kv=="function"?(F=function(U){var R;switch(U){case $t.API.image_compression.FAST:R=11;break;case $t.API.image_compression.MEDIUM:R=13;break;case $t.API.image_compression.SLOW:R=14;break;default:R=12}return R}(n),p=this.decode.FLATE_DECODE,b="/Predictor ".concat(F," /Colors ").concat(w," /BitsPerComponent ").concat(f," /Columns ").concat(o),e=YS(P,Math.ceil(o*w*f/8),w,f,n),_&&(x=YS(k,Math.ceil(o*C/8),1,C,n))):(p=void 0,b=void 0,e=P,_&&(x=k)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:p,decodeParameters:b,transparency:$,palette:O,sMask:x,predictor:F,width:o,height:c,bitsPerComponent:f,sMaskBitsPerComponent:C,colorSpace:j}}},function(e){e.processGIF89A=function(t,r,n,a){var i=new Qle(t),o=i.width,c=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var u={data:d,width:o,height:c},f=new P2(100).encode(u,100);return e.processJPEG.call(this,f,r,n,a)},e.processGIF87A=e.processGIF89A}($t.API),oo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},oo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Yr.log("bit decode error:"+r)}},oo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var d=this.palette[i>>7-c&1];this.data[o+4*c]=d.blue,this.data[o+4*c+1]=d.green,this.data[o+4*c+2]=d.red,this.data[o+4*c+3]=255}r!==0&&(this.pos+=4-r)}},oo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,c=i>>4,d=15&i,u=this.palette[c];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[d],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},oo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},oo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,u=i>>15?255:0,f=n*this.width*4+4*a;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=u}this.pos+=e}},oo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&t)/t*255|0,d=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,f=a*this.width*4+4*i;this.data[f]=u,this.data[f+1]=d,this.data[f+2]=c,this.data[f+3]=255}this.pos+=e}},oo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},oo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=i,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=o}},oo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var i=new oo(t,!1),o=i.width,c=i.height,d={data:i.getData(),width:o,height:c},u=new P2(100).encode(d,100);return e.processJPEG.call(this,u,r,n,a)}}($t.API),nE.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var i=new nE(t),o=i.width,c=i.height,d={data:i.getData(),width:o,height:c},u=new P2(100).encode(d,100);return e.processJPEG.call(this,u,r,n,a)}}($t.API),$t.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),c=0,d=0,u=0;u<a;u+=4){var f=n[u],p=n[u+1],b=n[u+2],x=n[u+3];i[c++]=f,i[c++]=p,i[c++]=b,o[d++]=x}var N=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},$t.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pu=$t.API,ap=pu.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:a.metadata.Unicode.widths,d=c.fof?c.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,f=u.fof?u.fof:1,p=t.doKerning!==!1,b=0,x=e.length,N=0,j=c[0]||d,w=[];for(r=0;r<x;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?w.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(b=p&&Fr(u[n])==="object"&&!isNaN(parseInt(u[n][N],10))?u[n][N]/f:0,w.push((c[n]||j)/d+b)),N=n;return w},GS=pu.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return pu.processArabic&&(e=pu.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:ap.apply(this,arguments).reduce(function(i,o){return i+o},0)},KS=function(e,t,r,n){for(var a=[],i=0,o=e.length,c=0;i!==o&&c+t[i]<r;)c+=t[i],i++;a.push(e.slice(0,i));var d=i;for(c=0;i!==o;)c+t[i]>n&&(a.push(e.slice(d,i)),c=0,d=i),c+=t[i],i++;return d!==i&&a.push(e.slice(d,i)),a},XS=function(e,t,r){r||(r={});var n,a,i,o,c,d,u,f=[],p=[f],b=r.textIndent||0,x=0,N=0,j=e.split(" "),w=ap.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var C=Array(d).join(" "),P=[];j.map(function(_){(_=_.split(/\s*\n/)).length>1?P=P.concat(_.map(function(O,$){return($&&O.length?`
`:"")+O})):P.push(_[0])}),j=P,d=GS.apply(this,[C,r])}for(i=0,o=j.length;i<o;i++){var k=0;if(n=j[i],d&&n[0]==`
`&&(n=n.substr(1),k=1),b+x+(N=(a=ap.apply(this,[n,r])).reduce(function(_,O){return _+O},0))>t||k){if(N>t){for(c=KS.apply(this,[n,a,t-(b+x),t]),f.push(c.shift()),f=[c.pop()];c.length;)p.push([c.shift()]);N=a.slice(n.length-(f[0]?f[0].length:0)).reduce(function(_,O){return _+O},0)}else f=[n];p.push(f),b=N+d,x=w}else f.push(n),b+=x+N,x=w}return u=d?function(_,O){return(O?C:"")+_.join(" ")}:function(_){return _.join(" ")},p.map(u)},pu.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle),b="Unicode";return p.metadata[b]?{widths:p.metadata[b].widths||{0:1},kerning:p.metadata[b].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var c,d,u=[];for(c=0,d=n.length;c<d;c++)u=u.concat(XS.apply(this,[n[c],o,i]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var o=function(b){return"0x"+parseInt(b,10).toString(16)},c=e.__fontmetrics__.compress=function(b){var x,N,j,w,C=["{"];for(var P in b){if(x=b[P],isNaN(parseInt(P,10))?N="'"+P+"'":(P=parseInt(P,10),N=(N=o(P).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof x=="number")x<0?(j=o(x).slice(3),w="-"):(j=o(x).slice(2),w=""),j=w+j.slice(0,-1)+a[j.slice(-1)];else{if(Fr(x)!=="object")throw new Error("Don't know what to do with value type "+Fr(x)+".");j=c(x)}C.push(N+j)}return C.push("}"),C.join("")},d=e.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,N,j,w,C={},P=1,k=C,_=[],O="",$="",F=b.length-1,U=1;U<F;U+=1)(w=b[U])=="'"?x?(j=x.join(""),x=void 0):x=[]:x?x.push(w):w=="{"?(_.push([k,j]),k={},j=void 0):w=="}"?((N=_.pop())[0][N[1]]=k,j=void 0,k=N[0]):w=="-"?P=-1:j===void 0?n.hasOwnProperty(w)?(O+=n[w],j=parseInt(O,16)*P,P=1,O=""):O+=w:n.hasOwnProperty(w)?($+=n[w],k[j]=parseInt($,16)*P,P=1,j=void 0,$=""):$+=w;return C},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},p={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(b){var x=b.font,N=p.Unicode[x.postScriptName];N&&(x.metadata.Unicode={},x.metadata.Unicode.widths=N.widths,x.metadata.Unicode.kerning=N.kerning);var j=f.Unicode[x.postScriptName];j&&(x.metadata.Unicode.encoding=j,x.encoding=j.codePages[0])}])}($t.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(Cp(c)),o.metadata=e.API.TTFFont.open(c),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}($t),$t.API.addSvgAsImage=function(e,t,r,n,a,i,o,c){if(isNaN(t)||isNaN(r))throw Yr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Yr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=n,d.height=a;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(rr.canvg?Promise.resolve(rr.canvg):l2(()=>import("./index.es-Ezr05e3o.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(u,e,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(f)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),t,r,n,a,o,c)})},$t.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},$t.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(o),d=[],u=0,f=0,p=0;function b(N,j){var w,C=!1;for(w=0;w<N.length;w+=1)N[w]===j&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=c.length;for(p=0;p<x;p+=1)r[c[p]].value=r[c[p]].defaultValue,r[c[p]].explicitSet=!1}if(Fr(e)==="object"){for(a in e)if(i=e[a],b(c,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&b(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")d.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(n=!1);n===!0&&d.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+d.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,j=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?j.push("/"+N+" /"+r[N].value):j.push("/"+N+" "+r[N].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+c.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+c+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}($t.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var c,d=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],p=0,b=i.length;p<b;++p){if(c=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(c),o.metadata.toUnicode[c]=i.charCodeAt(p),d.indexOf(c)==-1&&(d.push(c),d.push([parseInt(o.metadata.widthOfGlyph(c),10)])),c=="0")return f.join("");c=c.toString(16),f.push(u[4-c.length],c)}return f.join("")},n=function(i){var o,c,d,u,f,p,b;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],p=0,b=(c=Object.keys(i).sort(function(x,N){return x-N})).length;p<b;p++)o=c[p],d.length>=100&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+u+">"));return d.length&&(f+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var c=o.font,d=o.out,u=o.newObject,f=o.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="Identity-H"){for(var p=c.metadata.Unicode.widths,b=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",N=0;N<b.length;N++)x+=String.fromCharCode(b[N]);var j=u();f({data:x,addLength1:!0,objectId:j}),d("endobj");var w=u();f({data:n(c.metadata.toUnicode),addLength1:!0,objectId:w}),d("endobj");var C=u();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+xu(c.fontName)),d("/FontFile2 "+j+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),d("/Flags "+c.metadata.flags),d("/StemV "+c.metadata.stemV),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d(">>"),d("endobj");var P=u();d("<<"),d("/Type /Font"),d("/BaseFont /"+xu(c.fontName)),d("/FontDescriptor "+C+" 0 R"),d("/W "+e.API.PDFObject.convert(p)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+c.encoding+")"),d(">>"),d(">>"),d("endobj"),c.objectNumber=u(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+w+" 0 R"),d("/BaseFont /"+xu(c.fontName)),d("/Encoding /"+c.encoding),d("/DescendantFonts ["+P+" 0 R]"),d(">>"),d("endobj"),c.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var c=o.font,d=o.out,u=o.newObject,f=o.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var p=c.metadata.rawData,b="",x=0;x<p.length;x++)b+=String.fromCharCode(p[x]);var N=u();f({data:b,addLength1:!0,objectId:N}),d("endobj");var j=u();f({data:n(c.metadata.toUnicode),addLength1:!0,objectId:j}),d("endobj");var w=u();d("<<"),d("/Descent "+c.metadata.decender),d("/CapHeight "+c.metadata.capHeight),d("/StemV "+c.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+N+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),d("/FontName /"+xu(c.fontName)),d("/ItalicAngle "+c.metadata.italicAngle),d("/Ascent "+c.metadata.ascender),d(">>"),d("endobj"),c.objectNumber=u();for(var C=0;C<c.metadata.hmtx.widths.length;C++)c.metadata.hmtx.widths[C]=parseInt(c.metadata.hmtx.widths[C]*(1e3/c.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+xu(c.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),d("endobj"),c.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,c=i.text||"",d=i.x,u=i.y,f=i.options||{},p=i.mutex||{},b=p.pdfEscape,x=p.activeFontKey,N=p.fonts,j=x,w="",C=0,P="",k=N[j].encoding;if(N[j].encoding!=="Identity-H")return{text:c,x:d,y:u,options:f,mutex:p};for(P=c,j=x,Array.isArray(c)&&(P=c[0]),C=0;C<P.length;C+=1)N[j].metadata.hasOwnProperty("cmap")&&(o=N[j].metadata.cmap.unicode.codeMap[P[C].charCodeAt(0)]),o||P[C].charCodeAt(0)<256&&N[j].metadata.hasOwnProperty("Unicode")?w+=P[C]:w+="";var _="";return parseInt(j.slice(1))<14||k==="WinAnsiEncoding"?_=b(w,j).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(_=r(w,N[j])),p.isHex=!0,{text:_,x:d,y:u,options:f,mutex:p}};t.events.push(["postProcessText",function(i){var o=i.text||"",c=[],d={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?c.push([a(Object.assign({},d,{text:o[u][0]})).text,o[u][1],o[u][2]]):c.push(a(Object.assign({},d,{text:o[u]})).text);i.text=c}else i.text=a(Object.assign({},d,{text:o})).text}])}($t),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}($t.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,c,d,u,f,p=t,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,k=0;this.__bidiEngine__={};var _=function(M){var W=M.charCodeAt(),J=W>>8,K=j[J];return K!==void 0?p[256*K+(255&W)]:J===252||J===253?"AL":C.test(J)?"L":J===8?"R":"N"},O=function(M){for(var W,J=0;J<M.length;J++){if((W=_(M.charAt(J)))==="L")return!1;if(W==="R")return!0}return!1},$=function(M,W,J,K){var V,me,se,oe,ye=W[K];switch(ye){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(ye="AN");break;case"AL":P=!0,ye="R";break;case"WS":case"BN":ye="N";break;case"CS":K<1||K+1>=W.length||(V=J[K-1])!=="EN"&&V!=="AN"||(me=W[K+1])!=="EN"&&me!=="AN"?ye="N":P&&(me="AN"),ye=me===V?me:"N";break;case"ES":ye=(V=K>0?J[K-1]:"B")==="EN"&&K+1<W.length&&W[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&J[K-1]==="EN"){ye="EN";break}if(P){ye="N";break}for(se=K+1,oe=W.length;se<oe&&W[se]==="ET";)se++;ye=se<oe&&W[se]==="EN"?"EN":"N";break;case"NSM":if(o&&!c){for(oe=W.length,se=K+1;se<oe&&W[se]==="NSM";)se++;if(se<oe){var we=M[K],te=we>=1425&&we<=2303||we===64286;if(V=W[se],te&&(V==="R"||V==="AL")){ye="R";break}}}ye=K<1||(V=W[K-1])==="B"?"N":J[K-1];break;case"B":P=!1,a=!0,ye=k;break;case"S":i=!0,ye="N"}return ye},F=function(M,W,J){var K=M.split("");return J&&U(K,J,{hiLevel:k}),K.reverse(),W&&W.reverse(),K.join("")},U=function(M,W,J){var K,V,me,se,oe,ye=-1,we=M.length,te=0,G=[],Q=k?x:b,le=[];for(P=!1,a=!1,i=!1,V=0;V<we;V++)le[V]=_(M[V]);for(me=0;me<we;me++){if(oe=te,G[me]=$(M,le,G,me),K=240&(te=Q[oe][N[G[me]]]),te&=15,W[me]=se=Q[te][5],K>0)if(K===16){for(V=ye;V<me;V++)W[V]=1;ye=-1}else ye=-1;if(Q[te][6])ye===-1&&(ye=me);else if(ye>-1){for(V=ye;V<me;V++)W[V]=se;ye=-1}le[me]==="B"&&(W[me]=0),J.hiLevel|=se}i&&function(ve,xe,ke){for(var Re=0;Re<ke;Re++)if(ve[Re]==="S"){xe[Re]=k;for(var be=Re-1;be>=0&&ve[be]==="WS";be--)xe[be]=k}}(le,W,we)},R=function(M,W,J,K,V){if(!(V.hiLevel<M)){if(M===1&&k===1&&!a)return W.reverse(),void(J&&J.reverse());for(var me,se,oe,ye,we=W.length,te=0;te<we;){if(K[te]>=M){for(oe=te+1;oe<we&&K[oe]>=M;)oe++;for(ye=te,se=oe-1;ye<se;ye++,se--)me=W[ye],W[ye]=W[se],W[se]=me,J&&(me=J[ye],J[ye]=J[se],J[se]=me);te=oe}te++}}},z=function(M,W,J){var K=M.split(""),V={hiLevel:k};return J||(J=[]),U(K,J,V),function(me,se,oe){if(oe.hiLevel!==0&&f)for(var ye,we=0;we<me.length;we++)se[we]===1&&(ye=w.indexOf(me[we]))>=0&&(me[we]=w[ye+1])}(K,J,V),R(2,K,W,J,V),R(1,K,W,J,V),K.join("")};return this.__bidiEngine__.doBidiReorder=function(M,W,J){if(function(V,me){if(me)for(var se=0;se<V.length;se++)me[se]=se;c===void 0&&(c=O(V)),u===void 0&&(u=O(V))}(M,W),o||!d||u)if(o&&d&&c^u)k=c?1:0,M=F(M,W,J);else if(!o&&d&&u)k=c?1:0,M=z(M,W,J),M=F(M,W);else if(!o||c||d||u){if(o&&!d&&c^u)M=F(M,W),c?(k=0,M=z(M,W,J)):(k=1,M=z(M,W,J),M=F(M,W));else if(o&&c&&!d&&u)k=1,M=z(M,W,J),M=F(M,W);else if(!o&&!d&&c^u){var K=f;c?(k=1,M=z(M,W,J),k=0,f=!1,M=z(M,W,J),f=K):(k=0,M=z(M,W,J),M=F(M,W),k=1,f=!1,M=z(M,W,J),f=K,M=F(M,W))}}else k=0,M=z(M,W,J);else k=c?1:0,M=z(M,W,J);return M},this.__bidiEngine__.setOptions=function(M){M&&(o=M.isInputVisual,d=M.isOutputVisual,c=M.isInputRtl,u=M.isOutputRtl,f=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(o=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?o.push([r.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):o.push([r.doBidiReorder(a[c])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}($t),$t.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new zc(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new mce(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ece(this.contents),this.head=new rce(this),this.name=new oce(this),this.cmap=new UR(this),this.toUnicode={},this.hhea=new nce(this),this.maxp=new lce(this),this.hmtx=new cce(this),this.post=new ace(this),this.os2=new sce(this),this.loca=new fce(this),this.glyf=new dce(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,c,d,u;for(u=[],o=0,c=(d=this.bbox).length;o<c;o++)t=d[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,c;for(o=0,i=0,c=(t=""+t).length;0<=c?i<c:i>c;i=0<=c?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var No,zc=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,c,d;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^c)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*c+d},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),ece=function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,c,d,u,f,p,b,x,N,j;for(j in x=Object.keys(r).length,d=Math.log(2),p=16*Math.floor(Math.log(x)/d),o=Math.floor(p/d),f=16*x-p,(a=new zc).writeInt(this.scalarType),a.writeShort(x),a.writeShort(p),a.writeShort(o),a.writeShort(f),i=16*x,u=a.pos+i,c=null,N=[],r)for(b=r[j],a.writeString(j),a.writeInt(e(b)),a.writeInt(u),a.writeInt(b.length),N=N.concat(b),j==="head"&&(c=u),u+=b.length;u%4;)N.push(0),u++;return a.write(N),n=2981146554-e(a.data),a.pos=c+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=$R.call(r);r.length%4;)r.push(0);for(i=new zc(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t}(),tce={}.hasOwnProperty,Xo=function(e,t){for(var r in t)tce.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};No=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new zc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),sE=function(){function e(t,r){var n,a,i,o,c,d,u,f,p,b,x,N,j,w,C,P,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),b=x/2,t.pos+=6,i=function(){var _,O;for(O=[],d=_=0;0<=b?_<b:_>b;d=0<=b?++_:--_)O.push(t.readUInt16());return O}(),t.pos+=2,j=function(){var _,O;for(O=[],d=_=0;0<=b?_<b:_>b;d=0<=b?++_:--_)O.push(t.readUInt16());return O}(),u=function(){var _,O;for(O=[],d=_=0;0<=b?_<b:_>b;d=0<=b?++_:--_)O.push(t.readUInt16());return O}(),f=function(){var _,O;for(O=[],d=_=0;0<=b?_<b:_>b;d=0<=b?++_:--_)O.push(t.readUInt16());return O}(),a=(this.length-t.pos+this.offset)/2,c=function(){var _,O;for(O=[],d=_=0;0<=a?_<a:_>a;d=0<=a?++_:--_)O.push(t.readUInt16());return O}(),d=C=0,k=i.length;C<k;d=++C)for(w=i[d],n=P=N=j[d];N<=w?P<=w:P>=w;n=N<=w?++P:--P)f[d]===0?o=n+u[d]:(o=c[f[d]/2+(n-N)-(b-d)]||0)!==0&&(o+=u[d]),this.codeMap[n]=65535&o}t.pos=p}return e.encode=function(t,r){var n,a,i,o,c,d,u,f,p,b,x,N,j,w,C,P,k,_,O,$,F,U,R,z,M,W,J,K,V,me,se,oe,ye,we,te,G,Q,le,ve,xe,ke,Re,be,Te,Ve,Oe;switch(K=new zc,o=Object.keys(t).sort(function(Ye,Se){return Ye-Se}),r){case"macroman":for(j=0,w=function(){var Ye=[];for(N=0;N<256;++N)Ye.push(0);return Ye}(),P={0:0},i={},V=0,ye=o.length;V<ye;V++)P[be=t[a=o[V]]]==null&&(P[be]=++j),i[a]={old:t[a],new:P[t[a]]},w[a]=P[t[a]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(w),{charMap:i,subtable:K.data,maxGlyphID:j+1};case"unicode":for(W=[],p=[],k=0,P={},n={},C=u=null,me=0,we=o.length;me<we;me++)P[O=t[a=o[me]]]==null&&(P[O]=++k),n[a]={old:O,new:P[O]},c=P[O]-a,C!=null&&c===u||(C&&p.push(C),W.push(a),u=c),C=a;for(C&&p.push(C),p.push(65535),W.push(65535),z=2*(R=W.length),U=2*Math.pow(Math.log(R)/Math.LN2,2),b=Math.log(U/2)/Math.LN2,F=2*R-U,d=[],$=[],x=[],N=se=0,te=W.length;se<te;N=++se){if(M=W[N],f=p[N],M===65535){d.push(0),$.push(0);break}if(M-(J=n[M].new)>=32768)for(d.push(0),$.push(2*(x.length+R-N)),a=oe=M;M<=f?oe<=f:oe>=f;a=M<=f?++oe:--oe)x.push(n[a].new);else d.push(J-M),$.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*R+2*x.length),K.writeUInt16(0),K.writeUInt16(z),K.writeUInt16(U),K.writeUInt16(b),K.writeUInt16(F),ke=0,G=p.length;ke<G;ke++)a=p[ke],K.writeUInt16(a);for(K.writeUInt16(0),Re=0,Q=W.length;Re<Q;Re++)a=W[Re],K.writeUInt16(a);for(Te=0,le=d.length;Te<le;Te++)c=d[Te],K.writeUInt16(c);for(Ve=0,ve=$.length;Ve<ve;Ve++)_=$[Ve],K.writeUInt16(_);for(Oe=0,xe=x.length;Oe<xe;Oe++)j=x[Oe],K.writeUInt16(j);return{charMap:n,subtable:K.data,maxGlyphID:k+1}}},e}(),UR=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new sE(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=sE.encode(t,r),(a=new zc).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),nce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),sce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),ace=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,c,d;for(d=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)d.push(t.readUInt32());return d}).call(this)}},e}(),ice=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},oce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,o,c,d,u,f,p,b;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(d={},i=f=0,p=n.length;f<p;i=++f)a=n[i],t.pos=a.offset,u=t.readString(a.length),o=new ice(u,a),d[b=a.nameID]==null&&(d[b]=[]),d[a.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),lce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),cce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,o,c,d;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,f;for(f=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)f.push(t.readInt16());return f}(),this.widths=(function(){var u,f,p,b;for(b=[],u=0,f=(p=this.metrics).length;u<f;u++)i=p[u],b.push(i.advance);return b}).call(this),n=this.widths[this.widths.length-1],d=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)d.push(this.widths.push(n));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),$R=[].slice,dce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,o,c,d,u,f,p;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(c=new zc(r.read(a))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),f=c.readShort(),this.cache[t]=o===-1?new hce(c,u,p,d,f):new uce(c,o,u,p,d,f),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,o,c,d;for(o=[],i=[],c=0,d=r.length;c<d;c++)a=t[r[c]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},e}(),uce=function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),hce=function(){function e(t,r,n,a,i){var o,c;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;c=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&c;)o.pos+=1&c?4:2,128&c?o.pos+=8:64&c?o.pos+=4:8&c&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new zc($R.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),fce=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xo(e,No),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var c=this.offsets[o],d=this.offsets[o+1]-c;d>0&&(a+=d)}for(var u=new Array(4*n.length),f=0;f<n.length;++f)u[4*f+3]=255&n[f],u[4*f+2]=(65280&n[f])>>8,u[4*f+1]=(16711680&n[f])>>16,u[4*f]=(4278190080&n[f])>>24;return u},e}(),mce=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,c,d;for(a={},o=0,c=t.length;o<c;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))n=d[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,c,d,u,f,p,b,x,N,j,w,C;for(a in n=UR.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),x={0:0},C=n.charMap)x[(d=C[a]).old]=d.new;for(N in b=n.maxGlyphID,o)N in x||(x[N]=b++);return f=function(P){var k,_;for(k in _={},P)_[P[k]]=k;return _}(x),p=Object.keys(f).sort(function(P,k){return P-k}),j=function(){var P,k,_;for(_=[],P=0,k=p.length;P<k;P++)c=p[P],_.push(f[c]);return _}(),i=this.font.glyf.encode(o,j,x),u=this.font.loca.encode(i.offsets,j),w={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},e}();$t.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+function(){var c,d,u;for(u=[],c=0,d=r.length;c<d;c++)n=r[c],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function zR(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,c=a.internal.getFontSize()/o,d=a.getLineHeightFactor?a.getLineHeightFactor():i,u=c*d,f=/\r\n|\r|\n/g,p="",b=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof e=="string"?e.split(f):e,b=p.length||1),r+=c*(2-i),n.valign==="middle"?r-=b/2*u:n.valign==="bottom"&&(r-=b*u),n.halign==="center"||n.halign==="right"){var x=c;if(n.halign==="center"&&(x*=.5),p&&b>=1){for(var N=0;N<p.length;N++)a.text(p[N],t-a.getStringUnitWidth(p[N])*x,r),r+=u;return a}t-=a.getStringUnitWidth(e)*x}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var aE={},Xu=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:aE=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),c=o.fontStyle,d=o.fontName;if(t.font&&(d=t.font),t.fontStyle){c=t.fontStyle;var u=this.getFontList()[d];u&&u.indexOf(c)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),c=u[0])}if(this.jsPDFDocument.setFont(d,c),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var f=e.unifyColor(t.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=e.unifyColor(t.textColor),f&&(a=this.jsPDFDocument).setTextColor.apply(a,f),f=e.unifyColor(t.lineColor),f&&(i=this.jsPDFDocument).setDrawColor.apply(i,f),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return aE||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),rw=function(e,t){return rw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},rw(e,t)};function WR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");rw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var qR=function(e){WR(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function pce(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function gce(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function i1(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function HR(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=VR(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function VR(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Mx(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function GR(e,t){var r=Mx(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function xce(e,t,r,n,a){var i={},o=1.3333333333333333,c=T2(t,function(k){return a.getComputedStyle(k).backgroundColor});c!=null&&(i.fillColor=c);var d=T2(t,function(k){return a.getComputedStyle(k).color});d!=null&&(i.textColor=d);var u=bce(n,r);u&&(i.cellPadding=u);var f="borderTopColor",p=o*r,b=n.borderTopWidth;if(n.borderBottomWidth===b&&n.borderRightWidth===b&&n.borderLeftWidth===b){var x=(parseFloat(b)||0)/p;x&&(i.lineWidth=x)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},i.lineWidth.top||(i.lineWidth.right?f="borderRightColor":i.lineWidth.bottom?f="borderBottomColor":i.lineWidth.left&&(f="borderLeftColor"));var N=T2(t,function(k){return a.getComputedStyle(k)[f]});N!=null&&(i.lineColor=N);var j=["left","right","center","justify"];j.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),j=["middle","bottom","top"],j.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var w=parseInt(n.fontSize||"");isNaN(w)||(i.fontSize=w/o);var C=yce(n);C&&(i.fontStyle=C);var P=(n.fontFamily||"").toLowerCase();return e.indexOf(P)!==-1&&(i.font=P),i}function yce(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function T2(e,t){var r=KR(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function KR(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:KR(e.parentElement,t):r}function bce(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(c){return parseInt(c||"0")/n}),o=Mx(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function XR(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var c;typeof t=="string"?c=r.document.querySelector(t):c=t;var d=Object.keys(e.getFontList()),u=e.scaleFactor(),f=[],p=[],b=[];if(!c)return console.error("Html table could not be found with input: ",t),{head:f,body:p,foot:b};for(var x=0;x<c.rows.length;x++){var N=c.rows[x],j=(o=(i=N==null?void 0:N.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),w=vce(d,u,r,N,n,a);w&&(j==="thead"?f.push(w):j==="tfoot"?b.push(w):p.push(w))}return{head:f,body:p,foot:b}}function vce(e,t,r,n,a,i){for(var o=new qR(n),c=0;c<n.cells.length;c++){var d=n.cells[c],u=r.getComputedStyle(d);if(a||u.display!=="none"){var f=void 0;i&&(f=xce(e,d,t,u,r)),o.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:f,_element:d,content:wce(d)})}}var p=r.getComputedStyle(n);if(o.length>0&&(a||p.display!=="none"))return o}function wce(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Nce(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Pl(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var c=arguments[o];if(c!=null)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(i[d]=c[d])}return i}function jce(e,t){var r=new Xu(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();Nce(a,n,t);var i=Pl({},a,n,t),o;typeof window<"u"&&(o=window);var c=Cce(a,n,t),d=Ace(a,n,t),u=Sce(r,i),f=kce(r,i,o);return{id:t.tableId,content:f,hooks:d,styles:c,settings:u}}function Cce(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(d){if(d==="columnStyles"){var u=e[d],f=t[d],p=r[d];n.columnStyles=Pl({},u,f,p)}else{var b=[e,t,r],x=b.map(function(N){return N[d]||{}});n[d]=Pl({},x[0],x[1],x[2])}},i=0,o=Object.keys(n);i<o.length;i++){var c=o[i];a(c)}return n}function Ace(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var c=o[i];c.didParseCell&&a.didParseCell.push(c.didParseCell),c.willDrawCell&&a.willDrawCell.push(c.willDrawCell),c.didDrawCell&&a.didDrawCell.push(c.didDrawCell),c.willDrawPage&&a.willDrawPage.push(c.willDrawPage),c.didDrawPage&&a.didDrawPage.push(c.didDrawPage)}return a}function Sce(e,t){var r,n,a,i,o,c,d,u,f,p,b,x,N=Mx(t.margin,40/e.scaleFactor()),j=(r=Ece(e,t.startY))!==null&&r!==void 0?r:N.top,w;t.showFoot===!0?w="everyPage":t.showFoot===!1?w="never":w=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var C;t.showHead===!0?C="everyPage":t.showHead===!1?C="never":C=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var P=(i=t.useCss)!==null&&i!==void 0?i:!1,k=t.theme||(P?"plain":"striped"),_=!!t.horizontalPageBreak,O=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(c=t.includeHiddenHtml)!==null&&c!==void 0?c:!1,useCss:P,theme:k,startY:j,margin:N,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(f=t.tableWidth)!==null&&f!==void 0?f:"auto",showHead:C,showFoot:w,tableLineWidth:(p=t.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(b=t.tableLineColor)!==null&&b!==void 0?b:200,horizontalPageBreak:_,horizontalPageBreakRepeat:O,horizontalPageBreakBehaviour:(x=t.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function Ece(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function kce(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var c=XR(e,t.html,r,o,t.useCss)||{};n=c.head||n,a=c.body||n,i=c.foot||n}else console.error("Cannot parse html in non browser environment")}var d=t.columns||Pce(n,a,i);return{columns:d,head:n,body:a,foot:i}}function Pce(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,c;Array.isArray(n)?c=n[parseInt(i)]:c=n[i],typeof c=="object"&&!Array.isArray(c)&&(o=(c==null?void 0:c.colSpan)||1);for(var d=0;d<o;d++){var u=void 0;Array.isArray(n)?u=a.length:u=i+(d>0?"_".concat(d):"");var f={dataKey:u};a.push(f)}}),a}var nw=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),Tce=function(e){WR(t,e);function t(r,n,a,i,o,c){var d=e.call(this,r,n,c)||this;return d.cell=a,d.row=i,d.column=o,d.section=i.section,d}return t}(nw),Ice=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var c=0,d=r;c<d.length;c++){var u=d[c],f=new Tce(t,this,n,a,i,o),p=u(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new nw(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new nw(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),YR=function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof qR&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var c=r.getLineHeight(o.styles.fontSize),d=o.padding("vertical"),u=d+c;return u>a?u:a},0)},e}(),ZR=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",c=/\r\n|\r|\n/g;this.text=o.split(c)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Mx(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),_ce=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e}();function Oce(e,t){Rce(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=sw(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=sw(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),Lce(t),Mce(t,e),Dce(t)}function Rce(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=GR(e,t);t.allRows().forEach(function(i){for(var o=0,c=t.columns;o<c.length;o++){var d=c[o],u=i.cells[d.index];if(u){var f=t.hooks.didParseCell;t.callCellHooks(e,f,u,i,d,null);var p=u.padding("horizontal");u.contentWidth=i1(u.text,u.styles,e)+p;var b=i1(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=b+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var x=10/r;u.minWidth=u.styles.minCellWidth||x,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,c=t.columns;o<c.length;o++){var d=c[o],u=i.cells[d.index];if(u&&u.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,u.wrappedWidth),d.minWidth=Math.max(d.minWidth,u.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,u.minReadableWidth);else{var f=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},p=f.cellWidth||f.minCellWidth;p&&typeof p=="number"&&(d.minWidth=p,d.wrappedWidth=p)}u&&(u.colSpan>1&&!d.minWidth&&(d.minWidth=u.minWidth),u.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=u.minWidth))}})}function sw(e,t,r){for(var n=t,a=e.reduce(function(x,N){return x+N.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],c=o.wrappedWidth/a,d=n*c,u=o.width+d,f=r(o),p=u<f?f:u;t-=p-o.width,o.width=p}if(t=Math.round(t*1e10)/1e10,t){var b=e.filter(function(x){return t<0?x.width>r(x):!0});b.length&&(t=sw(b,t,r))}return t}function Dce(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,c=e.columns;o<c.length;o++){var d=c[o],u=t[d.index];if(r>1)r--,delete i.cells[d.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[d.index],u.left--,u.left<=1&&delete t[d.index];else{var f=i.cells[d.index];if(!f)continue;if(f.height=i.height,f.rowSpan>1){var p=n.length-a,b=f.rowSpan>p?p:f.rowSpan;t[d.index]={cell:f,left:b,row:i}}}}}function Lce(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,c=0;c<e.columns.length;c++){var d=e.columns[c];if(o-=1,o>1&&e.columns[c+1])i+=d.width,delete n.cells[d.index];else if(a){var u=a;delete n.cells[d.index],a=null,u.width=d.width+i}else{var u=n.cells[d.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){a=u,i+=d.width;continue}u.width=d.width+i}}}function Mce(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,c=e.columns;o<c.length;o++){var d=c[o],u=i.cells[d.index];if(u){t.applyStyles(u.styles,!0);var f=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,f+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=iE(u.text,f,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=iE(u.text,f,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var p=u.styles.overflow(u.text,f);typeof p=="string"?u.text=[p]:u.text=p}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var b=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<b*u.rowSpan?r={height:b,count:u.rowSpan}:r&&r.count>0&&r.height>b&&(b=r.height),b>i.height&&(i.height=b)}}r.count--}}function iE(e,t,r,n,a){return e.map(function(i){return Bce(i,t,r,n,a)})}function Bce(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=i1(e,r,n))return e;for(;t<i1(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Fce(e,t){var r=new Xu(e),n=Uce(t,r.scaleFactor()),a=new Ice(t,n);return Oce(r,a),r.applyStyles(r.userStyles),a}function Uce(e,t){var r=e.content,n=zce(r.columns);if(r.head.length===0){var a=oE(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=oE(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:I2("head",r.head,n,o,i,t),body:I2("body",r.body,n,o,i,t),foot:I2("foot",r.foot,n,o,i,t)}}function I2(e,t,r,n,a,i){var o={},c=t.map(function(d,u){for(var f=0,p={},b=0,x=0,N=0,j=r;N<j.length;N++){var w=j[N];if(o[w.index]==null||o[w.index].left===0)if(x===0){var C=void 0;Array.isArray(d)?C=d[w.index-b-f]:C=d[w.dataKey];var P={};typeof C=="object"&&!Array.isArray(C)&&(P=(C==null?void 0:C.styles)||{});var k=Wce(e,w,u,a,n,i,P),_=new ZR(C,k,e);p[w.dataKey]=_,p[w.index]=_,x=_.colSpan-1,o[w.index]={left:_.rowSpan-1,times:x}}else x--,b++;else o[w.index].left--,x=o[w.index].times,f++}return new YR(d,u,e,p)});return c}function oE(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=$ce(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function $ce(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function zce(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new _ce(a,t,r)})}function Wce(e,t,r,n,a,i,o){var c=gce(n),d;e==="head"?d=a.headStyles:e==="body"?d=a.bodyStyles:e==="foot"&&(d=a.footStyles);var u=Pl({},c.table,c[e],a.styles,d),f=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},p=e==="body"?f:{},b=e==="body"&&r%2===0?Pl({},c.alternateRow,a.alternateRowStyles):{},x=pce(i),N=Pl({},x,u,b,p);return Pl(N,o)}function qce(e,t,r){var n;r===void 0&&(r={});var a=GR(e,t),i=new Map,o=[],c=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(b){var x=t.columns.find(function(N){return N.dataKey===b||N.index===b});x&&!i.has(x.index)&&(i.set(x.index,!0),o.push(x.index),c.push(t.columns[x.index]),a-=x.wrappedWidth)});for(var u=!0,f=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;f<t.columns.length;){if(i.has(f)){f++;continue}var p=t.columns[f].wrappedWidth;if(u||a>=p)u=!1,o.push(f),c.push(t.columns[f]),a-=p;else break;f++}return{colIndexes:o,columns:c,lastIndex:f-1}}function Hce(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=qce(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Vce(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),c=n+a.bottom+o;if(r.pageBreak==="avoid"){var d=t.body,u=d.reduce(function(b,x){return b+x.height},0);c+=u}var f=new Xu(e);(r.pageBreak==="always"||r.startY!=null&&c>f.pageSize().height)&&(QR(f),i.y=a.top),t.callWillDrawPageHooks(f,i);var p=Pl({},i);t.startPageNumber=f.pageNumber(),r.horizontalPageBreak?Gce(f,t,p,i):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(b){return zl(f,t,b,i,t.columns)}),f.applyStyles(f.userStyles),t.body.forEach(function(b,x){var N=x===t.body.length-1;o1(f,t,b,N,p,i,t.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(b){return zl(f,t,b,i,t.columns)})),HR(f,t,p,i),t.callEndPageHooks(f,i),t.finalY=i.y,e.lastAutoTable=t,f.applyStyles(f.userStyles)}function Gce(e,t,r,n){var a=Hce(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,f){e.applyStyles(e.userStyles),f>0?Lf(e,t,r,n,u.columns,!0):lE(e,t,n,u.columns),Kce(e,t,r,n,u.columns),_2(e,t,n,u.columns)});else for(var o=-1,c=a[0],d=function(){var u=o;if(c){e.applyStyles(e.userStyles);var f=c.columns;o>=0?Lf(e,t,r,n,f,!0):lE(e,t,n,f),u=cE(e,t,o+1,n,f),_2(e,t,n,f)}var p=u-o;a.slice(1).forEach(function(b){e.applyStyles(e.userStyles),Lf(e,t,r,n,b.columns,!0),cE(e,t,o+1,n,b.columns,p),_2(e,t,n,b.columns)}),o=u};o<t.body.length-1;)d()}function lE(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return zl(e,t,i,r,n)})}function Kce(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var c=o===t.body.length-1;o1(e,t,i,c,r,n,a)})}function cE(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),c=-1;return t.body.slice(r,o).forEach(function(d,u){var f=r+u===t.body.length-1,p=JR(e,t,f,n);d.canEntireRowFit(p,a)&&(zl(e,t,d,n,a),c=r+u)}),c}function _2(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return zl(e,t,i,r,n)})}function Xce(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function Yce(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,c=r.columns;o<c.length;o++){var d=c[o],u=e.cells[d.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var f=new ZR(u.raw,u.styles,u.section);f=Pl(f,u),f.text=[];var p=Xce(u,t,n);u.text.length>p&&(f.text=u.text.splice(p,u.text.length));var b=n.scaleFactor(),x=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(b,x),u.contentHeight>=t&&(u.contentHeight=t,f.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),f.contentHeight=f.getContentHeight(b,x),f.contentHeight>i&&(i=f.contentHeight),a[d.index]=f}}var N=new YR(e.raw,-1,e.section,a,!0);N.height=i;for(var j=0,w=r.columns;j<w.length;j++){var d=w[j],f=N.cells[d.index];f&&(f.height=N.height);var u=e.cells[d.index];u&&(u.height=e.height)}return N}function Zce(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,c=a-o;t.section==="body"&&(c-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var d=t.getMinimumRowHeight(n.columns,e),u=d<r;if(d>c)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var f=t.hasRowSpan(n.columns),p=t.getMaxCellHeight(n.columns)>c;return p?(f&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function o1(e,t,r,n,a,i,o){var c=JR(e,t,n,i);if(r.canEntireRowFit(c,o))zl(e,t,r,i,o);else if(Zce(e,r,c,t)){var d=Yce(r,c,t,e);zl(e,t,r,i,o),Lf(e,t,a,i,o),o1(e,t,d,n,a,i,o)}else Lf(e,t,a,i,o),o1(e,t,r,n,a,i,o)}function zl(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var c=o[i],d=r.cells[c.index];if(!d){n.x+=c.width;continue}e.applyStyles(d.styles),d.x=n.x,d.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,d,r,c,n);if(u===!1){n.x+=c.width;continue}Jce(e,d,n);var f=d.getTextPos();zR(d.text,f.x,f.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,d,r,c,n),n.x+=c.width}n.y+=r.height}function Jce(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=VR(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),Qce(e,t,r,n.lineWidth))}function Qce(e,t,r,n){var a,i,o,c;n.top&&(a=r.x,i=r.y,o=r.x+t.width,c=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),d(n.top,a,i,o,c)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,c=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),d(n.bottom,a,i,o,c)),n.left&&(a=r.x,i=r.y,o=r.x,c=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(c+=.5*n.bottom),d(n.left,a,i,o,c)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,c=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(c+=.5*n.bottom),d(n.right,a,i,o,c));function d(u,f,p,b,x){e.getDocument().setLineWidth(u),e.getDocument().line(f,p,b,x,"S")}}function JR(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Lf(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(c){return zl(e,t,c,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;HR(e,t,r,n),QR(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(c){return zl(e,t,c,n,a)}),e.applyStyles(e.userStyles))}function QR(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function ede(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=jce(this,n),i=Fce(this,a);return Vce(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){zR(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Xu.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Xu.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Xu(this),i=XR(a,t,window,r,!1),o=i.head,c=i.body,d=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:d,rows:c,data:c}}}var O2;try{if(typeof window<"u"&&window){var dE=window,uE=dE.jsPDF||((O2=dE.jspdf)===null||O2===void 0?void 0:O2.jsPDF);uE&&ede(uE)}}catch(e){console.error("Could not apply autoTable plugin",e)}const tde=(e,t)=>{const r=new $t,n=t.primaryColor||"#2563eb",a=r.internal.pageSize.getWidth(),i=r.internal.pageSize.getHeight();let o=20;const d=(N=>{const j=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(N);return j?{r:parseInt(j[1],16),g:parseInt(j[2],16),b:parseInt(j[3],16)}:{r:37,g:99,b:235}})(n);r.setFillColor(d.r,d.g,d.b),r.rect(0,0,a,40,"F"),t.logoUrl,r.setTextColor(255,255,255),r.setFontSize(28),r.setFont("helvetica","bold"),r.text("INVOICE",a-15,25,{align:"right"}),r.setFontSize(12),r.setFont("helvetica","normal"),r.text(e.invoiceNumber,a-15,33,{align:"right"}),r.setTextColor(0,0,0),o=50,r.setFontSize(10),r.setFont("helvetica","bold"),r.text("FROM:",15,o),r.setFont("helvetica","normal"),o+=6,r.text(t.companyName||"Company Name",15,o),o+=5,t.address&&(r.setFontSize(9),r.text(t.address,15,o),o+=5),t.phone&&(r.text(`Tel: ${t.phone}`,15,o),o+=5),t.email&&r.text(`Email: ${t.email}`,15,o),o=50,r.setFontSize(10),r.setFont("helvetica","bold"),r.text("BILL TO:",a-80,o),r.setFont("helvetica","normal"),o+=6,r.text(e.clientName,a-80,o),o+=5,r.setFontSize(9),r.text(`Tel: ${e.clientPhone}`,a-80,o),o+=5,e.clientEmail&&(r.text(`Email: ${e.clientEmail}`,a-80,o),o+=5),e.shipment&&r.text(`Shipment: ${e.shipment.referenceId}`,a-80,o),o=90,r.setFillColor(240,240,240),r.rect(15,o,a-30,20,"F"),r.setFontSize(9),r.setFont("helvetica","bold"),r.text("Invoice Date:",20,o+8),r.text("Due Date:",70,o+8),r.text("Status:",120,o+8),r.setFont("helvetica","normal"),r.text(new Date(e.invoiceDate).toLocaleDateString(),20,o+15),r.text(new Date(e.dueDate).toLocaleDateString(),70,o+15);const u=e.status==="PAID"?[34,197,94]:e.status==="PARTIAL"?[59,130,246]:e.status==="OVERDUE"?[239,68,68]:[234,179,8];r.setFillColor(u[0],u[1],u[2]),r.setTextColor(255,255,255),r.roundedRect(120,o+10,25,6,2,2,"F"),r.text(e.status,132.5,o+14,{align:"center"}),r.setTextColor(0,0,0),o=120;const f=e.lineItems.map(N=>[N.description+(N.notes?`
${N.notes}`:""),N.quantity.toString(),`${parseFloat(N.unitPrice).toFixed(3)} KWD`,`${parseFloat(N.taxAmount||"0").toFixed(3)} KWD`,`${parseFloat(N.amount).toFixed(3)} KWD`]);r.autoTable({startY:o,head:[["Description","Qty","Unit Price","Tax","Amount"]],body:f,theme:"striped",headStyles:{fillColor:[d.r,d.g,d.b],textColor:[255,255,255],fontStyle:"bold",fontSize:10},styles:{fontSize:9,cellPadding:5},columnStyles:{0:{cellWidth:80},1:{halign:"center",cellWidth:20},2:{halign:"right",cellWidth:30},3:{halign:"right",cellWidth:25},4:{halign:"right",cellWidth:30}}}),o=r.lastAutoTable.finalY+10;const p=a-70;r.setFontSize(10),r.text("Subtotal:",p,o,{align:"right"}),r.text(`${parseFloat(e.subtotal).toFixed(3)} KWD`,a-15,o,{align:"right"}),o+=7,r.text("Tax:",p,o,{align:"right"}),r.text(`${parseFloat(e.taxAmount||"0").toFixed(3)} KWD`,a-15,o,{align:"right"}),o+=10,r.setDrawColor(d.r,d.g,d.b),r.setLineWidth(.5),r.line(p-10,o-3,a-15,o-3),r.setFont("helvetica","bold"),r.setFontSize(12),r.text("Total:",p,o,{align:"right"}),r.text(`${parseFloat(e.totalAmount).toFixed(3)} KWD`,a-15,o,{align:"right"});const b=parseFloat(e.totalAmount)-parseFloat(e.paidAmount||"0");if(o+=7,r.setFontSize(10),r.setFont("helvetica","normal"),r.text("Paid:",p,o,{align:"right"}),r.setTextColor(34,197,94),r.text(`${parseFloat(e.paidAmount||"0").toFixed(3)} KWD`,a-15,o,{align:"right"}),o+=7,r.setTextColor(0,0,0),r.text("Balance Due:",p,o,{align:"right"}),r.setTextColor(b>0?239:34,b>0?68:197,b>0?68:94),r.text(`${b.toFixed(3)} KWD`,a-15,o,{align:"right"}),r.setTextColor(0,0,0),e.payments&&e.payments.length>0){o+=15,r.setFont("helvetica","bold"),r.setFontSize(11),r.text("Payment History",15,o),o+=5;const N=e.payments.map(j=>[new Date(j.paymentDate).toLocaleDateString(),j.paymentMethod,j.transactionReference||"N/A",`${parseFloat(j.amount).toFixed(3)} KWD`]);r.autoTable({startY:o,head:[["Date","Method","Reference","Amount"]],body:N,theme:"plain",headStyles:{fillColor:[240,240,240],textColor:[0,0,0],fontStyle:"bold",fontSize:9},styles:{fontSize:9,cellPadding:4}}),o=r.lastAutoTable.finalY+10}t.bankDetails&&o<i-60&&(o+=10,r.setFillColor(240,248,255),r.rect(15,o,a-30,30,"F"),o+=7,r.setFontSize(10),r.setFont("helvetica","bold"),r.text("Bank Details",20,o),o+=6,r.setFont("helvetica","normal"),r.setFontSize(8),t.bankDetails.split(`
`).forEach(j=>{r.text(j,20,o),o+=4})),t.termsAndConditions&&o<i-40&&(o+=10,r.setFontSize(9),r.setFont("helvetica","bold"),r.text("Terms & Conditions",15,o),o+=5,r.setFont("helvetica","normal"),r.setFontSize(7),t.termsAndConditions.split(`
`).slice(0,3).forEach(j=>{r.text(j,15,o),o+=4})),r.setFontSize(8),r.setTextColor(128,128,128),r.text("Thank you for your business!",a/2,i-15,{align:"center"}),r.text(`Generated on ${new Date().toLocaleDateString()}`,a/2,i-10,{align:"center"});const x=`Invoice-${e.invoiceNumber}-${new Date().toISOString().split("T")[0]}.pdf`;r.save(x)},rde=()=>{var O,$;const{id:e}=uB(),t=S0(),[r,n]=A.useState(null),[a,i]=A.useState(null),[o,c]=A.useState(null),[d,u]=A.useState(!0),[f,p]=A.useState(!1),[b,x]=A.useState(!1);A.useEffect(()=>{N()},[e]);const N=async()=>{try{u(!0);const[F,U,R]=await Promise.all([zo.getInvoice(e),zo.getSettings(),fetch("/api/template-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then(z=>z.json()).catch(()=>({settings:null}))]);n(F.invoice||F),i(U.settings||U),c(R.settings)}catch(F){console.error("Load invoice error:",F)}finally{u(!1)}},j=F=>{const U={PENDING:"bg-yellow-100 text-yellow-800 border-yellow-300",PAID:"bg-green-100 text-green-800 border-green-300",PARTIAL:"bg-blue-100 text-blue-800 border-blue-300",OVERDUE:"bg-red-100 text-red-800 border-red-300",CANCELLED:"bg-gray-100 text-gray-800 border-gray-300"},R={PENDING:s.jsx(Ad,{className:"h-5 w-5"}),PAID:s.jsx(Gn,{className:"h-5 w-5"}),PARTIAL:s.jsx(Uo,{className:"h-5 w-5"}),OVERDUE:s.jsx(Ad,{className:"h-5 w-5"}),CANCELLED:s.jsx(Ad,{className:"h-5 w-5"})};return s.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold border ${U[F]||U.PENDING}`,children:[R[F],F]})},w=()=>{window.print()},C=async()=>{if(!(!r||!a))try{x(!0),await new Promise(F=>setTimeout(F,500)),tde(r,a)}catch(F){console.error("PDF generation error:",F),alert("Failed to generate PDF. Please try again.")}finally{x(!1)}},P=()=>{const F=(o==null?void 0:o.qrCodePosition)||"TOP_RIGHT",U={TOP_RIGHT:"top-4 right-4",TOP_LEFT:"top-4 left-4",BOTTOM_RIGHT:"bottom-4 right-4",BOTTOM_LEFT:"bottom-4 left-4"};return U[F]||U.TOP_RIGHT};if(d)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!r)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("p",{className:"text-gray-600",children:"Invoice not found"})});const k=parseFloat(r.totalAmount)-parseFloat(r.paidAmount||0),_=parseFloat(r.paidAmount||0)/parseFloat(r.totalAmount)*100;return s.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[s.jsx("div",{className:"max-w-5xl mx-auto mb-6 print:hidden",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>t("/invoices"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[s.jsx(WB,{className:"h-5 w-5"}),"Back to Invoices"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[k>0&&s.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[s.jsx(Uo,{className:"h-5 w-5"}),"Record Payment"]}),s.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[s.jsx(Bc,{className:"h-5 w-5"}),"Print"]}),s.jsx("button",{onClick:C,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:b?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-700"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx($B,{className:"h-5 w-5"}),"Download PDF"]})}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:[s.jsx(S1,{className:"h-5 w-5"}),"Send Email"]})]})]})}),s.jsxs("div",{className:"max-w-5xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden relative",children:[(o==null?void 0:o.showQRCode)&&r&&s.jsx("div",{className:`absolute ${P()} z-10 bg-white p-2 rounded-lg shadow-md print:block`,children:s.jsx(y3,{value:`INV-${r.invoiceNumber||r.id}`,size:(o==null?void 0:o.qrCodeSize)||100,level:"M",includeMargin:!0})}),s.jsxs("div",{className:"p-8 border-b-4",style:{borderColor:(o==null?void 0:o.invoicePrimaryColor)||(a==null?void 0:a.primaryColor)||"#2563eb",backgroundColor:`${(o==null?void 0:o.invoicePrimaryColor)||(a==null?void 0:a.primaryColor)||"#2563eb"}08`},children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[(o==null?void 0:o.invoiceShowLogo)!==!1&&((o==null?void 0:o.companyLogo)||(a==null?void 0:a.logoUrl))&&s.jsx("img",{src:(o==null?void 0:o.companyLogo)||a.logoUrl,alt:"Company Logo",className:"h-16 mb-4"}),s.jsx("h1",{className:"text-3xl font-bold",style:{color:(o==null?void 0:o.invoicePrimaryColor)||(a==null?void 0:a.primaryColor)||"#2563eb"},children:(o==null?void 0:o.invoiceTitle)||"INVOICE"}),s.jsx("p",{className:"text-gray-600 mt-1",children:r.invoiceNumber}),(o==null?void 0:o.companyName)&&s.jsx("p",{className:"text-gray-700 font-semibold mt-2",children:o.companyName}),(o==null?void 0:o.invoiceShowAddress)!==!1&&(o==null?void 0:o.companyAddress)&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.companyAddress}),(o==null?void 0:o.invoiceShowPhone)!==!1&&(o==null?void 0:o.companyPhone)&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",o.companyPhone]}),(o==null?void 0:o.invoiceShowEmail)!==!1&&(o==null?void 0:o.companyEmail)&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Email: ",o.companyEmail]})]}),s.jsx("div",{children:j(r.status)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mt-8",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Invoice Date"}),s.jsx("p",{className:"text-gray-900 font-semibold",children:new Date(r.invoiceDate).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Due Date"}),s.jsx("p",{className:"text-gray-900 font-semibold",children:new Date(r.dueDate).toLocaleDateString()})]})]})]}),s.jsxs("div",{className:"p-8 grid grid-cols-2 gap-8 border-b",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"From"}),s.jsx("p",{className:"text-gray-900 font-semibold",children:(a==null?void 0:a.companyName)||"Company Name"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:(a==null?void 0:a.address)||""}),s.jsx("p",{className:"text-gray-600 text-sm",children:(a==null?void 0:a.phone)||""}),s.jsx("p",{className:"text-gray-600 text-sm",children:(a==null?void 0:a.email)||""})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Bill To"}),s.jsx("p",{className:"text-gray-900 font-semibold",children:r.clientName}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:r.clientPhone}),r.clientEmail&&s.jsx("p",{className:"text-gray-600 text-sm",children:r.clientEmail}),r.shipment&&s.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Shipment Reference"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.shipment.referenceId}),r.shipment.rackLocations&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Rack Locations"}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.shipment.rackLocations})]})]})]})]}),r.shipment&&s.jsxs("div",{className:"p-8 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",style:{color:(o==null?void 0:o.invoicePrimaryColor)||(a==null?void 0:a.primaryColor)||"#2563eb"},children:[s.jsx("span",{children:""})," Shipment Details & Box Distribution"]}),s.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Shipment ID"}),s.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.shipment.qrCode||r.shipment.id})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Boxes"}),s.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.shipment.originalBoxCount||((O=r.shipment.boxes)==null?void 0:O.length)||0})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Arrival Date"}),s.jsx("p",{className:"text-sm font-bold text-gray-900",children:r.shipment.arrivalDate?new Date(r.shipment.arrivalDate).toLocaleDateString():r.shipment.receivedDate?new Date(r.shipment.receivedDate).toLocaleDateString():"N/A"})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Days Stored"}),s.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:[r.shipment.arrivalDate||r.shipment.receivedDate?Math.ceil((new Date().getTime()-new Date(r.shipment.arrivalDate||r.shipment.receivedDate).getTime())/(1e3*3600*24)):0," days"]})]})]}),r.shipment.boxes&&r.shipment.boxes.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Box Distribution by Rack Location:"}),(()=>{const F={};return r.shipment.boxes.forEach(U=>{if(U.rackId&&U.rack){const R=U.rack.code;F[R]||(F[R]=[]),F[R].push(U)}else F.Unassigned||(F.Unassigned=[]),F.Unassigned.push(U)}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(F).map(([U,R])=>{var W;const z=U==="Unassigned",M=(W=R[0])==null?void 0:W.rack;return s.jsxs("div",{className:`border-2 rounded-lg p-3 bg-white ${z?"border-yellow-300":"border-green-300"}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[z?"":""," ",z?"Unassigned":`Rack ${U}`]}),s.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${z?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[R.length," box",R.length!==1?"es":""]})]})}),!z&&(M==null?void 0:M.location)&&s.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[" ",M.location]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:R.map(J=>s.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 border border-gray-300 rounded text-xs font-mono font-semibold text-gray-700",title:`Box #${J.boxNumber} - ${J.status}`,children:["#",J.boxNumber]},J.id))})]},U)})})})(),s.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Racks"}),s.jsx("p",{className:"text-base font-bold text-gray-800",children:Object.keys(r.shipment.boxes.reduce((F,U)=>(U.rackId&&(F[U.rackId]=!0),F),{})).length})]}),s.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Assigned"}),s.jsx("p",{className:"text-base font-bold text-green-600",children:r.shipment.boxes.filter(F=>F.rackId).length})]}),s.jsxs("div",{className:"bg-white border border-gray-300 rounded p-2 text-center",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Unassigned"}),s.jsx("p",{className:"text-base font-bold text-yellow-600",children:r.shipment.boxes.filter(F=>!F.rackId).length})]})]})]})]}),s.jsxs("div",{className:"p-8 border-b",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-gray-200",children:[s.jsx("th",{className:"text-left py-3 text-sm font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Qty"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Unit Price"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Tax"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-gray-700",children:"Amount"})]})}),s.jsx("tbody",{children:($=r.lineItems)==null?void 0:$.map((F,U)=>s.jsxs("tr",{className:"border-b border-gray-100",children:[s.jsxs("td",{className:"py-4 text-gray-900",children:[s.jsx("div",{className:"font-medium",children:F.description}),F.notes&&s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:F.notes})]}),s.jsx("td",{className:"py-4 text-right text-gray-900",children:F.quantity}),s.jsx("td",{className:"py-4 text-right text-gray-900",children:parseFloat(F.unitPrice).toFixed(3)}),s.jsx("td",{className:"py-4 text-right text-gray-900",children:parseFloat(F.taxAmount||0).toFixed(3)}),s.jsx("td",{className:"py-4 text-right text-gray-900 font-semibold",children:parseFloat(F.amount).toFixed(3)})]},U))})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsxs("div",{className:"w-80",children:[s.jsxs("div",{className:"flex justify-between py-2 border-b",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal"}),s.jsxs("span",{className:"text-gray-900 font-semibold",children:[parseFloat(r.subtotal).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),s.jsxs("div",{className:"flex justify-between py-2 border-b",children:[s.jsx("span",{className:"text-gray-600",children:"Tax"}),s.jsxs("span",{className:"text-gray-900 font-semibold",children:[parseFloat(r.taxAmount||0).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),s.jsxs("div",{className:"flex justify-between py-3 border-b-2 border-gray-300",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total"}),s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[parseFloat(r.totalAmount).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]})]})})]}),s.jsxs("div",{className:"p-8 bg-gray-50 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Status"}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),s.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[parseFloat(r.totalAmount).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Paid Amount"}),s.jsxs("p",{className:"text-xl font-bold text-green-600",children:[parseFloat(r.paidAmount||0).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Balance Due"}),s.jsxs("p",{className:"text-xl font-bold text-red-600",children:[k.toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${_}%`}})}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[_.toFixed(1),"% Paid"]})]}),r.payments&&r.payments.length>0&&s.jsxs("div",{className:"p-8 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment History"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Date"}),s.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Method"}),s.jsx("th",{className:"text-left px-4 py-3 text-sm font-semibold text-gray-700",children:"Reference"}),s.jsx("th",{className:"text-right px-4 py-3 text-sm font-semibold text-gray-700",children:"Amount"})]})}),s.jsx("tbody",{children:r.payments.map(F=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"px-4 py-3 text-gray-900",children:new Date(F.paymentDate).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3 text-gray-900",children:F.paymentMethod}),s.jsx("td",{className:"px-4 py-3 text-gray-600 text-sm",children:F.transactionReference||"N/A"}),s.jsxs("td",{className:"px-4 py-3 text-right text-green-600 font-semibold",children:[parseFloat(F.amount).toFixed(3)," ",(o==null?void 0:o.currencySymbol)||"KWD"]})]},F.id))})]})})]}),(a==null?void 0:a.bankDetails)&&s.jsxs("div",{className:"p-8 border-b bg-blue-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bank Details"}),s.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-line",children:a.bankDetails})]}),((o==null?void 0:o.invoiceTerms)||(a==null?void 0:a.termsAndConditions))&&s.jsxs("div",{className:"p-8 bg-gray-50",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:(o==null?void 0:o.invoicePrimaryColor)||(a==null?void 0:a.primaryColor)||"#2563eb"},children:"Terms & Conditions"}),s.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-line",children:(o==null?void 0:o.invoiceTerms)||a.termsAndConditions})]}),(o==null?void 0:o.invoiceShowFooter)!==!1&&s.jsxs("div",{className:"p-8 text-center border-t",children:[s.jsx("p",{className:"text-sm text-gray-700 font-semibold mb-2",children:(o==null?void 0:o.invoiceFooterText)||"Thank you for your business!"}),(o==null?void 0:o.companyWebsite)&&s.jsx("p",{className:"text-xs text-gray-500",children:o.companyWebsite})]})]}),s.jsx(Cie,{isOpen:f,onClose:()=>p(!1),invoice:r,onSuccess:N})]})},nde=({isOpen:e,onClose:t,onSuccess:r})=>{const[n,a]=A.useState({title:"",category:"MAINTENANCE",amount:"",currency:"KWD",description:"",expenseDate:new Date().toISOString().split("T")[0]}),[i,o]=A.useState([]),[c,d]=A.useState({}),[u,f]=A.useState(!1),[p,b]=A.useState("");A.useEffect(()=>{e&&x()},[e]);const x=async()=>{try{const w=await fetch("/api/custom-fields?section=EXPENSE",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(w.ok){const C=await w.json(),P=C.customFields||C,k=Array.isArray(P)?P.filter(O=>O.isActive):[];o(k);const _={};k.forEach(O=>{_[O.id]=""}),d(_)}}catch(w){console.error("Failed to load custom fields:",w)}},N=async w=>{var C;if(w.preventDefault(),b(""),!n.title.trim()){b("Title is required");return}if(!n.amount||parseFloat(n.amount)<=0){b("Valid amount is required");return}try{f(!0);const P=await Iu.create({...n,amount:parseFloat(n.amount)}),k=((C=P.expense)==null?void 0:C.id)||P.id;if(i.length>0){const _=Object.entries(c).filter(([O,$])=>$!=="").map(([O,$])=>({customFieldId:O,fieldValue:$}));if(_.length>0)try{await fetch(`/api/custom-field-values/EXPENSE/${k}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:_})})}catch(O){console.error("Failed to save custom field values:",O)}}r(),j()}catch(P){b(P.message||"Failed to create expense")}finally{f(!1)}},j=()=>{a({title:"",category:"MAINTENANCE",amount:"",currency:"KWD",description:"",expenseDate:new Date().toISOString().split("T")[0]}),b(""),t()};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:j}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[s.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Add New Expense"}),s.jsx("button",{onClick:j,className:"text-white hover:text-gray-200 transition-colors",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:N,className:"px-6 py-4",children:[p&&s.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:n.title,onChange:w=>a({...n,title:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Warehouse Rent - October",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:n.category,onChange:w=>a({...n,category:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[s.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),s.jsx("option",{value:"FUEL",children:"Fuel"}),s.jsx("option",{value:"MATERIALS",children:"Materials"}),s.jsx("option",{value:"SALARIES",children:"Salaries"}),s.jsx("option",{value:"RENT",children:"Rent"}),s.jsx("option",{value:"UTILITIES",children:"Utilities"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",value:n.amount,onChange:w=>a({...n,amount:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter amount",required:!0}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"KWD"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Expense Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:n.expenseDate,onChange:w=>a({...n,expenseDate:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:n.description,onChange:w=>a({...n,description:w.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional details about this expense..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Receipt / Attachment"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("div",{className:"text-gray-400 mb-2",children:s.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Photo upload coming soon"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, JPG, PNG up to 10MB"})]})]})]}),i.length>0&&s.jsxs("div",{className:"mt-4 border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:" Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(w=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[w.fieldName,w.isRequired&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),w.fieldType==="TEXT"&&s.jsx("input",{type:"text",value:c[w.id]||"",onChange:C=>d(P=>({...P,[w.id]:C.target.value})),required:w.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${w.fieldName.toLowerCase()}`}),w.fieldType==="NUMBER"&&s.jsx("input",{type:"number",value:c[w.id]||"",onChange:C=>d(P=>({...P,[w.id]:C.target.value})),required:w.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${w.fieldName.toLowerCase()}`}),w.fieldType==="DATE"&&s.jsx("input",{type:"date",value:c[w.id]||"",onChange:C=>d(P=>({...P,[w.id]:C.target.value})),required:w.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),w.fieldType==="DROPDOWN"&&w.fieldOptions&&s.jsxs("select",{value:c[w.id]||"",onChange:C=>d(P=>({...P,[w.id]:C.target.value})),required:w.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"-- Select --"}),(()=>{if(!w.fieldOptions)return[];try{const C=JSON.parse(w.fieldOptions);return Array.isArray(C)?C.map(P=>s.jsx("option",{value:P,children:P},P)):[]}catch{return typeof w.fieldOptions=="string"?w.fieldOptions.split(",").map(C=>s.jsx("option",{value:C.trim(),children:C.trim()},C.trim())):[]}})()]}),w.fieldType==="CHECKBOX"&&s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:c[w.id]==="true",onChange:C=>d(P=>({...P,[w.id]:C.target.checked?"true":"false"})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},w.id))})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:u,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:u?"Creating...":"Create Expense"})]})]})]})]})}):null},sde=({isOpen:e,onClose:t,onSuccess:r,expense:n})=>{const[a,i]=A.useState({title:"",category:"MAINTENANCE",amount:"",currency:"KWD",description:"",expenseDate:"",status:"PENDING"}),[o,c]=A.useState([]),[d,u]=A.useState({}),[f,p]=A.useState(!1),[b,x]=A.useState("");A.useEffect(()=>{var C;n&&(i({title:n.title||"",category:n.category||"MAINTENANCE",amount:((C=n.amount)==null?void 0:C.toString())||"",currency:n.currency||"KWD",description:n.description||"",expenseDate:n.expenseDate?new Date(n.expenseDate).toISOString().split("T")[0]:"",status:n.status||"PENDING"}),N())},[n]);const N=async()=>{if(n!=null&&n.id)try{const C=await fetch("/api/custom-fields?section=EXPENSE",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(C.ok){const P=await C.json(),k=P.customFields||P,_=Array.isArray(k)?k.filter($=>$.isActive):[];c(_);const O=await fetch(`/api/custom-field-values/EXPENSE/${n.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(O.ok){const $=await O.json(),F=$.customFieldValues||$,U={};Array.isArray(F)&&F.forEach(R=>{U[R.customFieldId]=R.fieldValue}),u(U)}}}catch(C){console.error("Failed to load custom fields:",C)}},j=async C=>{if(C.preventDefault(),x(""),!a.title.trim()){x("Title is required");return}if(!a.amount||parseFloat(a.amount)<=0){x("Valid amount is required");return}try{if(p(!0),await Iu.update(n.id,{...a,amount:parseFloat(a.amount)}),o.length>0){const P=Object.entries(d).filter(([k,_])=>_!=="").map(([k,_])=>({customFieldId:k,fieldValue:_}));if(P.length>0)try{await fetch(`/api/custom-field-values/EXPENSE/${n.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({values:P})})}catch(k){console.error("Failed to save custom field values:",k)}}r(),w()}catch(P){x(P.message||"Failed to update expense")}finally{p(!1)}},w=()=>{x(""),t()};return!e||!n?null:s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:w}),s.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[s.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Edit Expense"}),s.jsx("button",{onClick:w,className:"text-white hover:text-gray-200 transition-colors",children:s.jsx($i,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:j,className:"px-6 py-4",children:[b&&s.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:b}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:a.title,onChange:C=>i({...a,title:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Warehouse Rent - October",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:a.category,onChange:C=>i({...a,category:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[s.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),s.jsx("option",{value:"FUEL",children:"Fuel"}),s.jsx("option",{value:"MATERIALS",children:"Materials"}),s.jsx("option",{value:"SALARIES",children:"Salaries"}),s.jsx("option",{value:"RENT",children:"Rent"}),s.jsx("option",{value:"UTILITIES",children:"Utilities"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",min:"0",value:a.amount,onChange:C=>i({...a,amount:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"0.00",required:!0}),s.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"KWD"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Expense Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:a.expenseDate,onChange:C=>i({...a,expenseDate:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:a.status,onChange:C=>i({...a,status:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"APPROVED",children:"Approved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:C=>i({...a,description:C.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Additional details about this expense..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Receipt / Attachment"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("div",{className:"text-gray-400 mb-2",children:s.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Photo upload coming soon"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, JPG, PNG up to 10MB"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsxs("p",{className:"text-sm text-blue-700",children:["Created on ",new Date(n.createdAt).toLocaleDateString(),n.approvedBy&&s.jsxs(s.Fragment,{children:["  Approved by user ",n.approvedBy]})]})})]})})]}),o.length>0&&s.jsxs("div",{className:"mt-4 border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:" Custom Fields"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(C=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[C.fieldName,C.isRequired&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),C.fieldType==="TEXT"&&s.jsx("input",{type:"text",value:d[C.id]||"",onChange:P=>u(k=>({...k,[C.id]:P.target.value})),required:C.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${C.fieldName.toLowerCase()}`}),C.fieldType==="NUMBER"&&s.jsx("input",{type:"number",value:d[C.id]||"",onChange:P=>u(k=>({...k,[C.id]:P.target.value})),required:C.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:`Enter ${C.fieldName.toLowerCase()}`}),C.fieldType==="DATE"&&s.jsx("input",{type:"date",value:d[C.id]||"",onChange:P=>u(k=>({...k,[C.id]:P.target.value})),required:C.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),C.fieldType==="DROPDOWN"&&C.fieldOptions&&s.jsxs("select",{value:d[C.id]||"",onChange:P=>u(k=>({...k,[C.id]:P.target.value})),required:C.isRequired,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"-- Select --"}),(()=>{try{const P=JSON.parse(C.fieldOptions);return Array.isArray(P)?P.map(k=>s.jsx("option",{value:k,children:k},k)):[]}catch{return typeof C.fieldOptions=="string"?C.fieldOptions.split(",").map(P=>s.jsx("option",{value:P.trim(),children:P.trim()},P.trim())):[]}})()]}),C.fieldType==="CHECKBOX"&&s.jsxs("div",{className:"flex items-center h-10",children:[s.jsx("input",{type:"checkbox",checked:d[C.id]==="true",onChange:P=>u(k=>({...k,[C.id]:P.target.checked?"true":"false"})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Yes"})]})]},C.id))})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Updating...":"Update Expense"})]})]})]})]})})},ade=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(null),[a,i]=A.useState(!0),[o,c]=A.useState(""),[d,u]=A.useState(""),[f,p]=A.useState(""),[b,x]=A.useState(""),[N,j]=A.useState(!1),[w,C]=A.useState(null);A.useEffect(()=>{P()},[f,b,d]);const P=async()=>{try{i(!0);const U={};f&&(U.category=f),b&&(U.status=b),d&&(U.search=d);const R=await Iu.getAll(U);t(R.expenses),n(R.summary)}catch(U){c(U.message)}finally{i(!1)}},k=async U=>{if(window.confirm("Are you sure you want to delete this expense?"))try{await Iu.delete(U),P()}catch(R){alert("Failed to delete expense: "+R.message)}},_=async U=>{try{await Iu.updateStatus(U,"APPROVED"),P()}catch(R){alert("Failed to approve expense: "+R.message)}},O=async U=>{try{await Iu.updateStatus(U,"REJECTED"),P()}catch(R){alert("Failed to reject expense: "+R.message)}},$=U=>{const R={PENDING:{bg:"bg-yellow-100",text:"text-yellow-800",icon:Ad},APPROVED:{bg:"bg-green-100",text:"text-green-800",icon:Gn},REJECTED:{bg:"bg-red-100",text:"text-red-800",icon:xo}},z=R[U]||R.PENDING,M=z.icon;return s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z.bg} ${z.text}`,children:[s.jsx(M,{className:"w-4 h-4 mr-1"}),U]})},F=U=>{const R={MAINTENANCE:"bg-blue-100 text-blue-800",FUEL:"bg-green-100 text-green-800",MATERIALS:"bg-purple-100 text-purple-800",SALARIES:"bg-yellow-100 text-yellow-800",RENT:"bg-red-100 text-red-800",UTILITIES:"bg-indigo-100 text-indigo-800",OTHER:"bg-gray-100 text-gray-800"};return R[U]||R.OTHER};return a?s.jsx("div",{className:"p-6 flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading expenses..."})]})}):o?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:["Error loading expenses: ",o]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Expenses"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage company expenses"})]}),s.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[s.jsx(Mc,{className:"h-5 w-5 mr-2"}),"Add Expense"]})]}),r&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Total Expenses"}),s.jsxs("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:[r.total.toFixed(2)," ",r.currency]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.count," expenses"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Pending"}),s.jsxs("div",{className:"text-2xl font-bold text-yellow-600 mt-1",children:[r.pending.toFixed(2)," ",r.currency]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Awaiting approval"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Approved"}),s.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-1",children:[r.approved.toFixed(2)," ",r.currency]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Verified expenses"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"This Month"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:[r.total.toFixed(2)," ",r.currency]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Current period"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(E1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search expenses...",value:d,onChange:U=>u(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(a0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{value:f,onChange:U=>p(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"",children:"All Categories"}),s.jsx("option",{value:"MAINTENANCE",children:"Maintenance"}),s.jsx("option",{value:"FUEL",children:"Fuel"}),s.jsx("option",{value:"MATERIALS",children:"Materials"}),s.jsx("option",{value:"SALARIES",children:"Salaries"}),s.jsx("option",{value:"RENT",children:"Rent"}),s.jsx("option",{value:"UTILITIES",children:"Utilities"}),s.jsx("option",{value:"OTHER",children:"Other"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(a0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsxs("select",{value:b,onChange:U=>x(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"APPROVED",children:"Approved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expense"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg font-medium",children:"No expenses found"}),s.jsx("p",{className:"text-sm mt-1",children:"Create your first expense to get started"})]})})}):e.map(U=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.title}),U.description&&s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:U.description})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium ${F(U.category)}`,children:U.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[U.amount.toFixed(2)," ",U.currency]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(U.expenseDate).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$(U.status)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[U.status==="PENDING"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>_(U.id),className:"text-green-600 hover:text-green-900",title:"Approve",children:s.jsx(Gn,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>O(U.id),className:"text-red-600 hover:text-red-900",title:"Reject",children:s.jsx(xo,{className:"h-5 w-5"})})]}),s.jsx("button",{onClick:()=>C(U),className:"text-blue-600 hover:text-blue-900",title:"Edit",children:s.jsx(Qd,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>k(U.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx(Fc,{className:"h-5 w-5"})})]})})]},U.id))})]})}),s.jsx(nde,{isOpen:N,onClose:()=>j(!1),onSuccess:()=>{j(!1),P()}}),s.jsx(sde,{isOpen:!!w,onClose:()=>C(null),onSuccess:()=>{C(null),P()},expense:w})]})},ide=()=>{const[e,t]=A.useState(null),[r,n]=A.useState(!0),[a,i]=A.useState(!1),[o,c]=A.useState("company"),[d,u]=A.useState(null),[f,p]=A.useState(!1);A.useEffect(()=>{b()},[]);const b=async()=>{try{const k=await(await fetch("/api/template-settings",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();t(k.settings||x())}catch(P){console.error("Failed to load settings:",P),t(x())}finally{n(!1)}},x=()=>({companyName:"QGO Cargo",companyAddress:"Kuwait",companyPhone:"+965 XXXX XXXX",companyEmail:"info@qgocargo.com",companyWebsite:"www.qgocargo.com",invoiceTitle:"TAX INVOICE",releaseNoteTitle:"SHIPMENT RELEASE NOTE",invoicePrimaryColor:"#2563eb",releasePrimaryColor:"#1e40af",currencySymbol:"KD"}),N=async()=>{i(!0);try{await fetch("/api/template-settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)}),alert("Settings saved successfully!")}catch(P){console.error("Failed to save settings:",P),alert("Failed to save settings")}finally{i(!1)}},j=(P,k)=>{t(_=>({..._,[P]:k}))},w=async()=>{if(d){p(!0);try{const P=new FormData;P.append("logo",d);const _=await(await fetch("/api/upload/logo",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:P})).json();_.success&&_.fullUrl?(j("companyLogo",_.fullUrl),u(null),alert("Logo uploaded successfully!")):alert("Failed to upload logo: "+(_.error||"Unknown error"))}catch(P){console.error("Upload error:",P),alert("Failed to upload logo")}finally{p(!1)}}};if(r)return s.jsx("div",{className:"p-8",children:"Loading..."});const C=[{id:"company",name:"Company Info",icon:Rb},{id:"invoice",name:"Invoice Template",icon:Oa},{id:"release",name:"Release Note",icon:Oa},{id:"colors",name:"Colors & Styling",icon:k1},{id:"advanced",name:"Advanced",icon:Rb}];return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Settings"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Customize invoice and release note templates"})]}),s.jsx("div",{className:"border-b border-gray-200 mb-6",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:C.map(P=>s.jsxs("button",{onClick:()=>c(P.id),className:`
                flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm
                ${o===P.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:[s.jsx(P.icon,{className:"h-5 w-5"}),P.name]},P.id))})}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o==="company"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Company Information"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo"}),e.companyLogo&&s.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsx("img",{src:e.companyLogo,alt:"Logo",className:"h-20 w-auto",onError:P=>{P.currentTarget.src="https://via.placeholder.com/150x60?text=Invalid+Image"}})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:P=>{var k;return u(((k=P.target.files)==null?void 0:k[0])||null)},className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),s.jsx("button",{onClick:w,disabled:!d||f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:f?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block animate-spin mr-2",children:""}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(i0,{className:"h-5 w-5 inline mr-2"}),"Upload"]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OR"})})]}),s.jsx("input",{type:"url",value:e.companyLogo||"",onChange:P=>j("companyLogo",P.target.value),placeholder:"Paste logo URL (e.g., https://example.com/logo.png)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Accepted formats: JPG, PNG, GIF, SVG, WebP  Max size: 5MB"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),s.jsx("input",{type:"text",value:e.companyName||"",onChange:P=>j("companyName",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("textarea",{value:e.companyAddress||"",onChange:P=>j("companyAddress",P.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),s.jsx("input",{type:"text",value:e.companyPhone||"",onChange:P=>j("companyPhone",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:e.companyEmail||"",onChange:P=>j("companyEmail",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),s.jsx("input",{type:"text",value:e.companyWebsite||"",onChange:P=>j("companyWebsite",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License/Registration No."}),s.jsx("input",{type:"text",value:e.companyLicense||"",onChange:P=>j("companyLicense",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),o==="invoice"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Invoice Template"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Title"}),s.jsx("input",{type:"text",value:e.invoiceTitle||"TAX INVOICE",onChange:P=>j("invoiceTitle",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Style"}),s.jsxs("select",{value:e.invoiceTemplateType||"STANDARD",onChange:P=>j("invoiceTemplateType",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"STANDARD",children:"Standard"}),s.jsx("option",{value:"MODERN",children:"Modern"}),s.jsx("option",{value:"MINIMAL",children:"Minimal"}),s.jsx("option",{value:"CLASSIC",children:"Classic"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Display Elements"}),s.jsx("div",{className:"space-y-2",children:[{key:"invoiceShowLogo",label:"Show Company Logo"},{key:"invoiceShowAddress",label:"Show Address"},{key:"invoiceShowPhone",label:"Show Phone"},{key:"invoiceShowEmail",label:"Show Email"},{key:"invoiceShowWebsite",label:"Show Website"},{key:"invoiceShowLicense",label:"Show License Number"},{key:"invoiceShowFooter",label:"Show Footer"}].map(P=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e[P.key]!==!1,onChange:k=>j(P.key,k.target.checked),className:"rounded border-gray-300 text-primary-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:P.label})]},P.key))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Terms & Conditions"}),s.jsx("textarea",{value:e.invoiceTerms||"",onChange:P=>j("invoiceTerms",P.target.value),rows:6,placeholder:"Enter default terms and conditions for invoices...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),s.jsx("input",{type:"text",value:e.invoiceFooterText||"",onChange:P=>j("invoiceFooterText",P.target.value),placeholder:"Thank you for your business!",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),o==="release"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Release Note Template"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Release Note Title"}),s.jsx("input",{type:"text",value:e.releaseNoteTitle||"SHIPMENT RELEASE NOTE",onChange:P=>j("releaseNoteTitle",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Style"}),s.jsxs("select",{value:e.releaseNoteTemplate||"PROFESSIONAL",onChange:P=>j("releaseNoteTemplate",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"PROFESSIONAL",children:"Professional"}),s.jsx("option",{value:"COMPACT",children:"Compact"}),s.jsx("option",{value:"DETAILED",children:"Detailed"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Display Sections"}),s.jsx("div",{className:"space-y-2",children:[{key:"releaseNoteShowLogo",label:"Show Company Logo"},{key:"releaseShowShipment",label:"Show Shipment Details"},{key:"releaseShowStorage",label:"Show Storage Information"},{key:"releaseShowItems",label:"Show Items Released"},{key:"releaseShowCollector",label:"Show Collector Information"},{key:"releaseShowCharges",label:"Show Charges & Payment"},{key:"releaseShowPhotos",label:"Show Release Photos"},{key:"releaseShowTerms",label:"Show Terms & Conditions"},{key:"releaseShowSignatures",label:"Show Signature Spaces"}].map(P=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e[P.key]!==!1,onChange:k=>j(P.key,k.target.checked),className:"rounded border-gray-300 text-primary-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:P.label})]},P.key))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms & Conditions"}),s.jsx("textarea",{value:e.releaseTerms||"",onChange:P=>j("releaseTerms",P.target.value),rows:6,placeholder:"Enter terms and conditions for release notes...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Footer Text"}),s.jsx("input",{type:"text",value:e.releaseFooterText||"",onChange:P=>j("releaseFooterText",P.target.value),placeholder:"Thank you for choosing our services!",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),o==="colors"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Colors & Styling"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Invoice Colors"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:e.invoicePrimaryColor||"#2563eb",onChange:P=>j("invoicePrimaryColor",P.target.value),className:"h-10 w-20"}),s.jsx("input",{type:"text",value:e.invoicePrimaryColor||"#2563eb",onChange:P=>j("invoicePrimaryColor",P.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Header Background"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:e.invoiceHeaderBg||"#2563eb",onChange:P=>j("invoiceHeaderBg",P.target.value),className:"h-10 w-20"}),s.jsx("input",{type:"text",value:e.invoiceHeaderBg||"#2563eb",onChange:P=>j("invoiceHeaderBg",P.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Release Note Colors"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:e.releasePrimaryColor||"#1e40af",onChange:P=>j("releasePrimaryColor",P.target.value),className:"h-10 w-20"}),s.jsx("input",{type:"text",value:e.releasePrimaryColor||"#1e40af",onChange:P=>j("releasePrimaryColor",P.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Header Background"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:e.releaseNoteHeaderBg||"#1e40af",onChange:P=>j("releaseNoteHeaderBg",P.target.value),className:"h-10 w-20"}),s.jsx("input",{type:"text",value:e.releaseNoteHeaderBg||"#1e40af",onChange:P=>j("releaseNoteHeaderBg",P.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Font Size"}),s.jsxs("select",{value:e.invoiceFontSize||"MEDIUM",onChange:P=>j("invoiceFontSize",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"SMALL",children:"Small"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"LARGE",children:"Large"})]})]})]}),o==="advanced"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Advanced Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Symbol"}),s.jsx("input",{type:"text",value:e.currencySymbol||"KD",onChange:P=>j("currencySymbol",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency Position"}),s.jsxs("select",{value:e.currencyPosition||"AFTER",onChange:P=>j("currencyPosition",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"BEFORE",children:"Before ($ 100)"}),s.jsx("option",{value:"AFTER",children:"After (100 KD)"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),s.jsxs("select",{value:e.dateFormat||"MMM dd, yyyy",onChange:P=>j("dateFormat",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"MMM dd, yyyy",children:"Oct 13, 2025"}),s.jsx("option",{value:"dd/MM/yyyy",children:"13/10/2025"}),s.jsx("option",{value:"yyyy-MM-dd",children:"2025-10-13"}),s.jsx("option",{value:"dd MMMM yyyy",children:"13 October 2025"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),s.jsxs("select",{value:e.timeFormat||"hh:mm a",onChange:P=>j("timeFormat",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"hh:mm a",children:"03:30 PM"}),s.jsx("option",{value:"HH:mm",children:"15:30"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paper Size"}),s.jsxs("select",{value:e.invoicePaperSize||"A4",onChange:P=>j("invoicePaperSize",P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"A4",children:"A4 (210  297 mm)"}),s.jsx("option",{value:"LETTER",children:"Letter (8.5  11 in)"}),s.jsx("option",{value:"A5",children:"A5 (148  210 mm)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Print Margins (mm)"}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:["Top","Bottom","Left","Right"].map(P=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:P}),s.jsx("input",{type:"number",value:e[`printMargin${P}`]||10,onChange:k=>j(`printMargin${P}`,parseInt(k.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]},P))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Signature Settings"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e.requireStaffSignature!==!1,onChange:P=>j("requireStaffSignature",P.target.checked),className:"rounded border-gray-300 text-primary-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Require Staff Signature"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e.requireClientSignature!==!1,onChange:P=>j("requireClientSignature",P.target.checked),className:"rounded border-gray-300 text-primary-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Require Client Signature"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center mb-3",children:[s.jsx("input",{type:"checkbox",checked:e.showQRCode===!0,onChange:P=>j("showQRCode",P.target.checked),className:"rounded border-gray-300 text-primary-600"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Show QR Code on Documents"})]}),e.showQRCode&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Position"}),s.jsxs("select",{value:e.qrCodePosition||"TOP_RIGHT",onChange:P=>j("qrCodePosition",P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"TOP_RIGHT",children:"Top Right"}),s.jsx("option",{value:"TOP_LEFT",children:"Top Left"}),s.jsx("option",{value:"BOTTOM_RIGHT",children:"Bottom Right"}),s.jsx("option",{value:"BOTTOM_LEFT",children:"Bottom Left"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Size (px)"}),s.jsx("input",{type:"number",value:e.qrCodeSize||100,onChange:P=>j("qrCodeSize",parseInt(P.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]})]})]}),s.jsxs("div",{className:"mt-8 flex items-center justify-between pt-6 border-t",children:[s.jsxs("button",{className:"flex items-center gap-2 text-primary-600 hover:text-primary-700",children:[s.jsx(E0,{className:"h-5 w-5"}),"Preview Templates"]}),s.jsx("button",{onClick:N,disabled:a,className:"flex items-center gap-2 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Gn,{className:"h-5 w-5"}),"Save Settings"]})})]})]})]})};function eD(e,t){return function(){return e.apply(t,arguments)}}const{toString:ode}=Object.prototype,{getPrototypeOf:I3}=Object,{iterator:Bx,toStringTag:tD}=Symbol,Fx=(e=>t=>{const r=ode.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),jo=e=>(e=e.toLowerCase(),t=>Fx(t)===e),Ux=e=>t=>typeof t===e,{isArray:Fh}=Array,vh=Ux("undefined");function K0(e){return e!==null&&!vh(e)&&e.constructor!==null&&!vh(e.constructor)&&Ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rD=jo("ArrayBuffer");function lde(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rD(e.buffer),t}const cde=Ux("string"),Ba=Ux("function"),nD=Ux("number"),X0=e=>e!==null&&typeof e=="object",dde=e=>e===!0||e===!1,Pp=e=>{if(Fx(e)!=="object")return!1;const t=I3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(tD in e)&&!(Bx in e)},ude=e=>{if(!X0(e)||K0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},hde=jo("Date"),fde=jo("File"),mde=jo("Blob"),pde=jo("FileList"),gde=e=>X0(e)&&Ba(e.pipe),xde=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ba(e.append)&&((t=Fx(e))==="formdata"||t==="object"&&Ba(e.toString)&&e.toString()==="[object FormData]"))},yde=jo("URLSearchParams"),[bde,vde,wde,Nde]=["ReadableStream","Request","Response","Headers"].map(jo),jde=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Y0(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Fh(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(K0(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(n=0;n<o;n++)c=i[n],t.call(null,e[c],c,e)}}function sD(e,t){if(K0(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const wd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aD=e=>!vh(e)&&e!==wd;function aw(){const{caseless:e,skipUndefined:t}=aD(this)&&this||{},r={},n=(a,i)=>{const o=e&&sD(r,i)||i;Pp(r[o])&&Pp(a)?r[o]=aw(r[o],a):Pp(a)?r[o]=aw({},a):Fh(a)?r[o]=a.slice():(!t||!vh(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Y0(arguments[a],n);return r}const Cde=(e,t,r,{allOwnKeys:n}={})=>(Y0(t,(a,i)=>{r&&Ba(a)?e[i]=eD(a,r):e[i]=a},{allOwnKeys:n}),e),Ade=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Sde=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Ede=(e,t,r,n)=>{let a,i,o;const c={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=r!==!1&&I3(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kde=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Pde=e=>{if(!e)return null;if(Fh(e))return e;let t=e.length;if(!nD(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Tde=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&I3(Uint8Array)),Ide=(e,t)=>{const n=(e&&e[Bx]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},_de=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Ode=jo("HTMLFormElement"),Rde=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),hE=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Dde=jo("RegExp"),iD=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Y0(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},Lde=e=>{iD(e,(t,r)=>{if(Ba(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ba(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Mde=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Fh(e)?n(e):n(String(e).split(t)),r},Bde=()=>{},Fde=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ude(e){return!!(e&&Ba(e.append)&&e[tD]==="FormData"&&e[Bx])}const $de=e=>{const t=new Array(10),r=(n,a)=>{if(X0(n)){if(t.indexOf(n)>=0)return;if(K0(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Fh(n)?[]:{};return Y0(n,(o,c)=>{const d=r(o,a+1);!vh(d)&&(i[c]=d)}),t[a]=void 0,i}}return n};return r(e,0)},zde=jo("AsyncFunction"),Wde=e=>e&&(X0(e)||Ba(e))&&Ba(e.then)&&Ba(e.catch),oD=((e,t)=>e?setImmediate:t?((r,n)=>(wd.addEventListener("message",({source:a,data:i})=>{a===wd&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),wd.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ba(wd.postMessage)),qde=typeof queueMicrotask<"u"?queueMicrotask.bind(wd):typeof process<"u"&&process.nextTick||oD,Hde=e=>e!=null&&Ba(e[Bx]),Ke={isArray:Fh,isArrayBuffer:rD,isBuffer:K0,isFormData:xde,isArrayBufferView:lde,isString:cde,isNumber:nD,isBoolean:dde,isObject:X0,isPlainObject:Pp,isEmptyObject:ude,isReadableStream:bde,isRequest:vde,isResponse:wde,isHeaders:Nde,isUndefined:vh,isDate:hde,isFile:fde,isBlob:mde,isRegExp:Dde,isFunction:Ba,isStream:gde,isURLSearchParams:yde,isTypedArray:Tde,isFileList:pde,forEach:Y0,merge:aw,extend:Cde,trim:jde,stripBOM:Ade,inherits:Sde,toFlatObject:Ede,kindOf:Fx,kindOfTest:jo,endsWith:kde,toArray:Pde,forEachEntry:Ide,matchAll:_de,isHTMLForm:Ode,hasOwnProperty:hE,hasOwnProp:hE,reduceDescriptors:iD,freezeMethods:Lde,toObjectSet:Mde,toCamelCase:Rde,noop:Bde,toFiniteNumber:Fde,findKey:sD,global:wd,isContextDefined:aD,isSpecCompliantForm:Ude,toJSONObject:$de,isAsyncFn:zde,isThenable:Wde,setImmediate:oD,asap:qde,isIterable:Hde};function lr(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Ke.inherits(lr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ke.toJSONObject(this.config),code:this.code,status:this.status}}});const lD=lr.prototype,cD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cD[e]={value:e}});Object.defineProperties(lr,cD);Object.defineProperty(lD,"isAxiosError",{value:!0});lr.from=(e,t,r,n,a,i)=>{const o=Object.create(lD);Ke.toFlatObject(e,o,function(f){return f!==Error.prototype},u=>u!=="isAxiosError");const c=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return lr.call(o,c,d,r,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Vde=null;function iw(e){return Ke.isPlainObject(e)||Ke.isArray(e)}function dD(e){return Ke.endsWith(e,"[]")?e.slice(0,-2):e}function fE(e,t,r){return e?e.concat(t).map(function(a,i){return a=dD(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function Gde(e){return Ke.isArray(e)&&!e.some(iw)}const Kde=Ke.toFlatObject(Ke,{},null,function(t){return/^is[A-Z]/.test(t)});function $x(e,t,r){if(!Ke.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ke.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,w){return!Ke.isUndefined(w[j])});const n=r.metaTokens,a=r.visitor||f,i=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&Ke.isSpecCompliantForm(t);if(!Ke.isFunction(a))throw new TypeError("visitor must be a function");function u(N){if(N===null)return"";if(Ke.isDate(N))return N.toISOString();if(Ke.isBoolean(N))return N.toString();if(!d&&Ke.isBlob(N))throw new lr("Blob is not supported. Use a Buffer instead.");return Ke.isArrayBuffer(N)||Ke.isTypedArray(N)?d&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function f(N,j,w){let C=N;if(N&&!w&&typeof N=="object"){if(Ke.endsWith(j,"{}"))j=n?j:j.slice(0,-2),N=JSON.stringify(N);else if(Ke.isArray(N)&&Gde(N)||(Ke.isFileList(N)||Ke.endsWith(j,"[]"))&&(C=Ke.toArray(N)))return j=dD(j),C.forEach(function(k,_){!(Ke.isUndefined(k)||k===null)&&t.append(o===!0?fE([j],_,i):o===null?j:j+"[]",u(k))}),!1}return iw(N)?!0:(t.append(fE(w,j,i),u(N)),!1)}const p=[],b=Object.assign(Kde,{defaultVisitor:f,convertValue:u,isVisitable:iw});function x(N,j){if(!Ke.isUndefined(N)){if(p.indexOf(N)!==-1)throw Error("Circular reference detected in "+j.join("."));p.push(N),Ke.forEach(N,function(C,P){(!(Ke.isUndefined(C)||C===null)&&a.call(t,C,Ke.isString(P)?P.trim():P,j,b))===!0&&x(C,j?j.concat(P):[P])}),p.pop()}}if(!Ke.isObject(e))throw new TypeError("data must be an object");return x(e),t}function mE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function _3(e,t){this._pairs=[],e&&$x(e,this,t)}const uD=_3.prototype;uD.append=function(t,r){this._pairs.push([t,r])};uD.toString=function(t){const r=t?function(n){return t.call(this,n,mE)}:mE;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Xde(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hD(e,t,r){if(!t)return e;const n=r&&r.encode||Xde;Ke.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=Ke.isURLSearchParams(t)?t.toString():new _3(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class pE{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ke.forEach(this.handlers,function(n){n!==null&&t(n)})}}const fD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yde=typeof URLSearchParams<"u"?URLSearchParams:_3,Zde=typeof FormData<"u"?FormData:null,Jde=typeof Blob<"u"?Blob:null,Qde={isBrowser:!0,classes:{URLSearchParams:Yde,FormData:Zde,Blob:Jde},protocols:["http","https","file","blob","url","data"]},O3=typeof window<"u"&&typeof document<"u",ow=typeof navigator=="object"&&navigator||void 0,eue=O3&&(!ow||["ReactNative","NativeScript","NS"].indexOf(ow.product)<0),tue=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rue=O3&&window.location.href||"http://localhost",nue=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:O3,hasStandardBrowserEnv:eue,hasStandardBrowserWebWorkerEnv:tue,navigator:ow,origin:rue},Symbol.toStringTag,{value:"Module"})),aa={...nue,...Qde};function sue(e,t){return $x(e,new aa.classes.URLSearchParams,{visitor:function(r,n,a,i){return aa.isNode&&Ke.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function aue(e){return Ke.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function iue(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function mD(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),d=i>=r.length;return o=!o&&Ke.isArray(a)?a.length:o,d?(Ke.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!c):((!a[o]||!Ke.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&Ke.isArray(a[o])&&(a[o]=iue(a[o])),!c)}if(Ke.isFormData(e)&&Ke.isFunction(e.entries)){const r={};return Ke.forEachEntry(e,(n,a)=>{t(aue(n),a,r,0)}),r}return null}function oue(e,t,r){if(Ke.isString(e))try{return(t||JSON.parse)(e),Ke.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Z0={transitional:fD,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=Ke.isObject(t);if(i&&Ke.isHTMLForm(t)&&(t=new FormData(t)),Ke.isFormData(t))return a?JSON.stringify(mD(t)):t;if(Ke.isArrayBuffer(t)||Ke.isBuffer(t)||Ke.isStream(t)||Ke.isFile(t)||Ke.isBlob(t)||Ke.isReadableStream(t))return t;if(Ke.isArrayBufferView(t))return t.buffer;if(Ke.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return sue(t,this.formSerializer).toString();if((c=Ke.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return $x(c?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),oue(t)):t}],transformResponse:[function(t){const r=this.transitional||Z0.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Ke.isResponse(t)||Ke.isReadableStream(t))return t;if(t&&Ke.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?lr.from(c,lr.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:aa.classes.FormData,Blob:aa.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ke.forEach(["delete","get","head","post","put","patch"],e=>{Z0.headers[e]={}});const lue=Ke.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cue=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&lue[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},gE=Symbol("internals");function mf(e){return e&&String(e).trim().toLowerCase()}function Tp(e){return e===!1||e==null?e:Ke.isArray(e)?e.map(Tp):String(e)}function due(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const uue=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function R2(e,t,r,n,a){if(Ke.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!Ke.isString(t)){if(Ke.isString(n))return t.indexOf(n)!==-1;if(Ke.isRegExp(n))return n.test(t)}}function hue(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function fue(e,t){const r=Ke.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Fa=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(c,d,u){const f=mf(d);if(!f)throw new Error("header name must be a non-empty string");const p=Ke.findKey(a,f);(!p||a[p]===void 0||u===!0||u===void 0&&a[p]!==!1)&&(a[p||d]=Tp(c))}const o=(c,d)=>Ke.forEach(c,(u,f)=>i(u,f,d));if(Ke.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Ke.isString(t)&&(t=t.trim())&&!uue(t))o(cue(t),r);else if(Ke.isObject(t)&&Ke.isIterable(t)){let c={},d,u;for(const f of t){if(!Ke.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[u=f[0]]=(d=c[u])?Ke.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}o(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=mf(t),t){const n=Ke.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return due(a);if(Ke.isFunction(r))return r.call(this,a,n);if(Ke.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=mf(t),t){const n=Ke.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||R2(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=mf(o),o){const c=Ke.findKey(n,o);c&&(!r||R2(n,n[c],c,r))&&(delete n[c],a=!0)}}return Ke.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||R2(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return Ke.forEach(this,(a,i)=>{const o=Ke.findKey(n,i);if(o){r[o]=Tp(a),delete r[i];return}const c=t?hue(i):String(i).trim();c!==i&&delete r[i],r[c]=Tp(a),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ke.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&Ke.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[gE]=this[gE]={accessors:{}}).accessors,a=this.prototype;function i(o){const c=mf(o);n[c]||(fue(a,o),n[c]=!0)}return Ke.isArray(t)?t.forEach(i):i(t),this}};Fa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ke.reduceDescriptors(Fa.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Ke.freezeMethods(Fa);function D2(e,t){const r=this||Z0,n=t||r,a=Fa.from(n.headers);let i=n.data;return Ke.forEach(e,function(c){i=c.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function pD(e){return!!(e&&e.__CANCEL__)}function Uh(e,t,r){lr.call(this,e??"canceled",lr.ERR_CANCELED,t,r),this.name="CanceledError"}Ke.inherits(Uh,lr,{__CANCEL__:!0});function gD(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new lr("Request failed with status code "+r.status,[lr.ERR_BAD_REQUEST,lr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function mue(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function pue(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(d){const u=Date.now(),f=n[i];o||(o=u),r[a]=d,n[a]=u;let p=i,b=0;for(;p!==a;)b+=r[p++],p=p%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),u-o<t)return;const x=f&&u-f;return x?Math.round(b*1e3/x):void 0}}function gue(e,t){let r=0,n=1e3/t,a,i;const o=(u,f=Date.now())=>{r=f,a=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const f=Date.now(),p=f-r;p>=n?o(u,f):(a=u,i||(i=setTimeout(()=>{i=null,o(a)},n-p)))},()=>a&&o(a)]}const l1=(e,t,r=3)=>{let n=0;const a=pue(50,250);return gue(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,d=o-n,u=a(d),f=o<=c;n=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:d,rate:u||void 0,estimated:u&&c&&f?(c-o)/u:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(p)},r)},xE=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},yE=e=>(...t)=>Ke.asap(()=>e(...t)),xue=aa.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,aa.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(aa.origin),aa.navigator&&/(msie|trident)/i.test(aa.navigator.userAgent)):()=>!0,yue=aa.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];Ke.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Ke.isString(n)&&o.push("path="+n),Ke.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bue(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vue(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xD(e,t,r){let n=!bue(t);return e&&(n||r==!1)?vue(e,t):t}const bE=e=>e instanceof Fa?{...e}:e;function Yd(e,t){t=t||{};const r={};function n(u,f,p,b){return Ke.isPlainObject(u)&&Ke.isPlainObject(f)?Ke.merge.call({caseless:b},u,f):Ke.isPlainObject(f)?Ke.merge({},f):Ke.isArray(f)?f.slice():f}function a(u,f,p,b){if(Ke.isUndefined(f)){if(!Ke.isUndefined(u))return n(void 0,u,p,b)}else return n(u,f,p,b)}function i(u,f){if(!Ke.isUndefined(f))return n(void 0,f)}function o(u,f){if(Ke.isUndefined(f)){if(!Ke.isUndefined(u))return n(void 0,u)}else return n(void 0,f)}function c(u,f,p){if(p in t)return n(u,f);if(p in e)return n(void 0,u)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(u,f,p)=>a(bE(u),bE(f),p,!0)};return Ke.forEach(Object.keys({...e,...t}),function(f){const p=d[f]||a,b=p(e[f],t[f],f);Ke.isUndefined(b)&&p!==c||(r[f]=b)}),r}const yD=e=>{const t=Yd({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:c}=t;if(t.headers=o=Fa.from(o),t.url=hD(xD(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Ke.isFormData(r)){if(aa.hasStandardBrowserEnv||aa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ke.isFunction(r.getHeaders)){const d=r.getHeaders(),u=["content-type","content-length"];Object.entries(d).forEach(([f,p])=>{u.includes(f.toLowerCase())&&o.set(f,p)})}}if(aa.hasStandardBrowserEnv&&(n&&Ke.isFunction(n)&&(n=n(t)),n||n!==!1&&xue(t.url))){const d=a&&i&&yue.read(i);d&&o.set(a,d)}return t},wue=typeof XMLHttpRequest<"u",Nue=wue&&function(e){return new Promise(function(r,n){const a=yD(e);let i=a.data;const o=Fa.from(a.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:u}=a,f,p,b,x,N;function j(){x&&x(),N&&N(),a.cancelToken&&a.cancelToken.unsubscribe(f),a.signal&&a.signal.removeEventListener("abort",f)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function C(){if(!w)return;const k=Fa.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),O={data:!c||c==="text"||c==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:k,config:e,request:w};gD(function(F){r(F),j()},function(F){n(F),j()},O),w=null}"onloadend"in w?w.onloadend=C:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(C)},w.onabort=function(){w&&(n(new lr("Request aborted",lr.ECONNABORTED,e,w)),w=null)},w.onerror=function(_){const O=_&&_.message?_.message:"Network Error",$=new lr(O,lr.ERR_NETWORK,e,w);$.event=_||null,n($),w=null},w.ontimeout=function(){let _=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const O=a.transitional||fD;a.timeoutErrorMessage&&(_=a.timeoutErrorMessage),n(new lr(_,O.clarifyTimeoutError?lr.ETIMEDOUT:lr.ECONNABORTED,e,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&Ke.forEach(o.toJSON(),function(_,O){w.setRequestHeader(O,_)}),Ke.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),c&&c!=="json"&&(w.responseType=a.responseType),u&&([b,N]=l1(u,!0),w.addEventListener("progress",b)),d&&w.upload&&([p,x]=l1(d),w.upload.addEventListener("progress",p),w.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(f=k=>{w&&(n(!k||k.type?new Uh(null,e,w):k),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(f),a.signal&&(a.signal.aborted?f():a.signal.addEventListener("abort",f)));const P=mue(a.url);if(P&&aa.protocols.indexOf(P)===-1){n(new lr("Unsupported protocol "+P+":",lr.ERR_BAD_REQUEST,e));return}w.send(i||null)})},jue=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(u){if(!a){a=!0,c();const f=u instanceof Error?u:this.reason;n.abort(f instanceof lr?f:new Uh(f instanceof Error?f.message:f))}};let o=t&&setTimeout(()=>{o=null,i(new lr(`timeout ${t} of ms exceeded`,lr.ETIMEDOUT))},t);const c=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>Ke.asap(c),d}},Cue=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},Aue=async function*(e,t){for await(const r of Sue(e))yield*Cue(r,t)},Sue=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},vE=(e,t,r,n)=>{const a=Aue(e,t);let i=0,o,c=d=>{o||(o=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:u,value:f}=await a.next();if(u){c(),d.close();return}let p=f.byteLength;if(r){let b=i+=p;r(b)}d.enqueue(new Uint8Array(f))}catch(u){throw c(u),u}},cancel(d){return c(d),a.return()}},{highWaterMark:2})},wE=64*1024,{isFunction:ip}=Ke,Eue=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ke.global),{ReadableStream:NE,TextEncoder:jE}=Ke.global,CE=(e,...t)=>{try{return!!e(...t)}catch{return!1}},kue=e=>{e=Ke.merge.call({skipUndefined:!0},Eue,e);const{fetch:t,Request:r,Response:n}=e,a=t?ip(t):typeof fetch=="function",i=ip(r),o=ip(n);if(!a)return!1;const c=a&&ip(NE),d=a&&(typeof jE=="function"?(N=>j=>N.encode(j))(new jE):async N=>new Uint8Array(await new r(N).arrayBuffer())),u=i&&c&&CE(()=>{let N=!1;const j=new r(aa.origin,{body:new NE,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!j}),f=o&&c&&CE(()=>Ke.isReadableStream(new n("").body)),p={stream:f&&(N=>N.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!p[N]&&(p[N]=(j,w)=>{let C=j&&j[N];if(C)return C.call(j);throw new lr(`Response type '${N}' is not supported`,lr.ERR_NOT_SUPPORT,w)})});const b=async N=>{if(N==null)return 0;if(Ke.isBlob(N))return N.size;if(Ke.isSpecCompliantForm(N))return(await new r(aa.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Ke.isArrayBufferView(N)||Ke.isArrayBuffer(N))return N.byteLength;if(Ke.isURLSearchParams(N)&&(N=N+""),Ke.isString(N))return(await d(N)).byteLength},x=async(N,j)=>{const w=Ke.toFiniteNumber(N.getContentLength());return w??b(j)};return async N=>{let{url:j,method:w,data:C,signal:P,cancelToken:k,timeout:_,onDownloadProgress:O,onUploadProgress:$,responseType:F,headers:U,withCredentials:R="same-origin",fetchOptions:z}=yD(N),M=t||fetch;F=F?(F+"").toLowerCase():"text";let W=jue([P,k&&k.toAbortSignal()],_),J=null;const K=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let V;try{if($&&u&&w!=="get"&&w!=="head"&&(V=await x(U,C))!==0){let te=new r(j,{method:"POST",body:C,duplex:"half"}),G;if(Ke.isFormData(C)&&(G=te.headers.get("content-type"))&&U.setContentType(G),te.body){const[Q,le]=xE(V,l1(yE($)));C=vE(te.body,wE,Q,le)}}Ke.isString(R)||(R=R?"include":"omit");const me=i&&"credentials"in r.prototype,se={...z,signal:W,method:w.toUpperCase(),headers:U.normalize().toJSON(),body:C,duplex:"half",credentials:me?R:void 0};J=i&&new r(j,se);let oe=await(i?M(J,z):M(j,se));const ye=f&&(F==="stream"||F==="response");if(f&&(O||ye&&K)){const te={};["status","statusText","headers"].forEach(ve=>{te[ve]=oe[ve]});const G=Ke.toFiniteNumber(oe.headers.get("content-length")),[Q,le]=O&&xE(G,l1(yE(O),!0))||[];oe=new n(vE(oe.body,wE,Q,()=>{le&&le(),K&&K()}),te)}F=F||"text";let we=await p[Ke.findKey(p,F)||"text"](oe,N);return!ye&&K&&K(),await new Promise((te,G)=>{gD(te,G,{data:we,headers:Fa.from(oe.headers),status:oe.status,statusText:oe.statusText,config:N,request:J})})}catch(me){throw K&&K(),me&&me.name==="TypeError"&&/Load failed|fetch/i.test(me.message)?Object.assign(new lr("Network Error",lr.ERR_NETWORK,N,J),{cause:me.cause||me}):lr.from(me,me&&me.code,N,J)}}},Pue=new Map,bD=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o=i.length,c=o,d,u,f=Pue;for(;c--;)d=i[c],u=f.get(d),u===void 0&&f.set(d,u=c?new Map:kue(t)),f=u;return u};bD();const lw={http:Vde,xhr:Nue,fetch:{get:bD}};Ke.forEach(lw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const AE=e=>`- ${e}`,Tue=e=>Ke.isFunction(e)||e===null||e===!1,vD={getAdapter:(e,t)=>{e=Ke.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){n=e[o];let c;if(a=n,!Tue(n)&&(a=lw[(c=String(n)).toLowerCase()],a===void 0))throw new lr(`Unknown adapter '${c}'`);if(a&&(Ke.isFunction(a)||(a=a.get(t))))break;i[c||"#"+o]=a}if(!a){const o=Object.entries(i).map(([d,u])=>`adapter ${d} `+(u===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map(AE).join(`
`):" "+AE(o[0]):"as no adapter specified";throw new lr("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:lw};function L2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Uh(null,e)}function SE(e){return L2(e),e.headers=Fa.from(e.headers),e.data=D2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vD.getAdapter(e.adapter||Z0.adapter,e)(e).then(function(n){return L2(e),n.data=D2.call(e,e.transformResponse,n),n.headers=Fa.from(n.headers),n},function(n){return pD(n)||(L2(e),n&&n.response&&(n.response.data=D2.call(e,e.transformResponse,n.response),n.response.headers=Fa.from(n.response.headers))),Promise.reject(n)})}const wD="1.12.2",zx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const EE={};zx.transitional=function(t,r,n){function a(i,o){return"[Axios v"+wD+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(t===!1)throw new lr(a(o," has been removed"+(r?" in "+r:"")),lr.ERR_DEPRECATED);return r&&!EE[o]&&(EE[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};zx.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Iue(e,t,r){if(typeof e!="object")throw new lr("options must be an object",lr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const c=e[i],d=c===void 0||o(c,i,e);if(d!==!0)throw new lr("option "+i+" must be "+d,lr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new lr("Unknown option "+i,lr.ERR_BAD_OPTION)}}const Ip={assertOptions:Iue,validators:zx},_o=Ip.validators;let _d=class{constructor(t){this.defaults=t||{},this.interceptors={request:new pE,response:new pE}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Yd(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Ip.assertOptions(n,{silentJSONParsing:_o.transitional(_o.boolean),forcedJSONParsing:_o.transitional(_o.boolean),clarifyTimeoutError:_o.transitional(_o.boolean)},!1),a!=null&&(Ke.isFunction(a)?r.paramsSerializer={serialize:a}:Ip.assertOptions(a,{encode:_o.function,serialize:_o.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ip.assertOptions(r,{baseUrl:_o.spelling("baseURL"),withXsrfToken:_o.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Ke.merge(i.common,i[r.method]);i&&Ke.forEach(["delete","get","head","post","put","patch","common"],N=>{delete i[N]}),r.headers=Fa.concat(o,i);const c=[];let d=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(d=d&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let f,p=0,b;if(!d){const N=[SE.bind(this),void 0];for(N.unshift(...c),N.push(...u),b=N.length,f=Promise.resolve(r);p<b;)f=f.then(N[p++],N[p++]);return f}b=c.length;let x=r;for(;p<b;){const N=c[p++],j=c[p++];try{x=N(x)}catch(w){j.call(this,w);break}}try{f=SE.call(this,x)}catch(N){return Promise.reject(N)}for(p=0,b=u.length;p<b;)f=f.then(u[p++],u[p++]);return f}getUri(t){t=Yd(this.defaults,t);const r=xD(t.baseURL,t.url,t.allowAbsoluteUrls);return hD(r,t.params,t.paramsSerializer)}};Ke.forEach(["delete","get","head","options"],function(t){_d.prototype[t]=function(r,n){return this.request(Yd(n||{},{method:t,url:r,data:(n||{}).data}))}});Ke.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,c){return this.request(Yd(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}_d.prototype[t]=r(),_d.prototype[t+"Form"]=r(!0)});let _ue=class ND{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,c){n.reason||(n.reason=new Uh(i,o,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new ND(function(a){t=a}),cancel:t}}};function Oue(e){return function(r){return e.apply(null,r)}}function Rue(e){return Ke.isObject(e)&&e.isAxiosError===!0}const cw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cw).forEach(([e,t])=>{cw[t]=e});function jD(e){const t=new _d(e),r=eD(_d.prototype.request,t);return Ke.extend(r,_d.prototype,t,{allOwnKeys:!0}),Ke.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return jD(Yd(e,a))},r}const Ur=jD(Z0);Ur.Axios=_d;Ur.CanceledError=Uh;Ur.CancelToken=_ue;Ur.isCancel=pD;Ur.VERSION=wD;Ur.toFormData=$x;Ur.AxiosError=lr;Ur.Cancel=Ur.CanceledError;Ur.all=function(t){return Promise.all(t)};Ur.spread=Oue;Ur.isAxiosError=Rue;Ur.mergeConfig=Yd;Ur.AxiosHeaders=Fa;Ur.formToJSON=e=>mD(Ke.isHTMLForm(e)?new FormData(e):e);Ur.getAdapter=vD.getAdapter;Ur.HttpStatusCode=cw;Ur.default=Ur;const{Axios:vhe,AxiosError:whe,CanceledError:Nhe,isCancel:jhe,CancelToken:Che,VERSION:Ahe,all:She,Cancel:Ehe,isAxiosError:khe,spread:Phe,toFormData:The,AxiosHeaders:Ihe,HttpStatusCode:_he,formToJSON:Ohe,getAdapter:Rhe,mergeConfig:Dhe}=Ur,Due=()=>{const[e,t]=A.useState("personal"),[r,n]=A.useState(null),[a,i]=A.useState(null),[o,c]=A.useState(!0),[d,u]=A.useState(!1),[f,p]=A.useState(null),[b,x]=A.useState({name:"",phone:"",skills:"",position:"",department:""}),[N,j]=A.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,C]=A.useState("");A.useEffect(()=>{P(),k()},[]);const P=async()=>{try{const R=localStorage.getItem("authToken"),z=await Ur.get("/api/users/profile/me",{headers:{Authorization:`Bearer ${R}`}});if(z.data.success){const M=z.data.data;n(M),x({name:M.name||"",phone:M.phone||"",skills:M.skills||"",position:M.position||"",department:M.department||""}),C(M.avatar||"")}}catch(R){console.error("Failed to fetch profile:",R),_("error","Failed to load profile")}finally{c(!1)}},k=async()=>{try{const R=localStorage.getItem("authToken"),z=await Ur.get("/api/users/profile/stats",{headers:{Authorization:`Bearer ${R}`}});z.data.success&&i(z.data.data.stats)}catch(R){console.error("Failed to fetch stats:",R)}},_=(R,z)=>{p({type:R,text:z}),setTimeout(()=>p(null),5e3)},O=async R=>{var z,M;R.preventDefault(),u(!0);try{const W=localStorage.getItem("authToken"),J=await Ur.put("/api/users/profile/me",b,{headers:{Authorization:`Bearer ${W}`}});J.data.success&&(n(J.data.data),_("success","Profile updated successfully!"))}catch(W){console.error("Failed to update profile:",W),_("error",((M=(z=W.response)==null?void 0:z.data)==null?void 0:M.error)||"Failed to update profile")}finally{u(!1)}},$=async R=>{var z,M;if(R.preventDefault(),N.newPassword!==N.confirmPassword){_("error","New passwords do not match");return}if(N.newPassword.length<6){_("error","Password must be at least 6 characters long");return}u(!0);try{const W=localStorage.getItem("authToken");(await Ur.put("/api/users/profile/password",{currentPassword:N.currentPassword,newPassword:N.newPassword},{headers:{Authorization:`Bearer ${W}`}})).data.success&&(j({currentPassword:"",newPassword:"",confirmPassword:""}),_("success","Password changed successfully!"))}catch(W){console.error("Failed to change password:",W),_("error",((M=(z=W.response)==null?void 0:z.data)==null?void 0:M.error)||"Failed to change password")}finally{u(!1)}},F=async()=>{var R,z;if(!w.trim()){_("error","Please enter an avatar URL");return}u(!0);try{const M=localStorage.getItem("authToken");(await Ur.put("/api/users/profile/avatar",{avatar:w},{headers:{Authorization:`Bearer ${M}`}})).data.success&&(r&&n({...r,avatar:w}),_("success","Avatar updated successfully!"))}catch(M){console.error("Failed to update avatar:",M),_("error",((z=(R=M.response)==null?void 0:R.data)==null?void 0:z.error)||"Failed to update avatar")}finally{u(!1)}},U=R=>{switch(R){case"ADMIN":return"bg-red-100 text-red-800";case"MANAGER":return"bg-green-100 text-green-800";case"WORKER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 h-32"}),s.jsxs("div",{className:"px-6 pb-6",children:[s.jsxs("div",{className:"flex items-end -mt-16 mb-4",children:[s.jsxs("div",{className:"relative",children:[r.avatar?s.jsx("img",{src:r.avatar,alt:r.name,className:"w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover"}):s.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white shadow-lg bg-gray-200 flex items-center justify-center",children:s.jsx(o2,{className:"w-16 h-16 text-gray-400"})}),s.jsx("button",{onClick:()=>t("personal"),className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:s.jsx(_x,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"ml-6 flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r.name}),s.jsx("p",{className:"text-gray-600",children:r.email}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${U(r.role)}`,children:r.role}),r.position&&s.jsxs("span",{className:"text-gray-600 text-sm",children:[" ",r.position]}),r.department&&s.jsxs("span",{className:"text-gray-600 text-sm",children:[" ",r.department]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center gap-4",children:[r.company.logo?s.jsx("img",{src:r.company.logo,alt:r.company.name,className:"w-12 h-12 object-contain"}):s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center",children:s.jsx(EA,{className:"w-6 h-6 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900",children:r.company.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Plan: ",r.company.plan]})]})]})]})]}),f&&s.jsx("div",{className:`px-4 py-3 rounded-lg border ${f.type==="success"?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:f.text}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{onClick:()=>t("personal"),className:`px-6 py-3 border-b-2 font-medium text-sm ${e==="personal"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(o2,{className:"w-4 h-4 inline mr-2"}),"Personal Info"]}),s.jsxs("button",{onClick:()=>t("security"),className:`px-6 py-3 border-b-2 font-medium text-sm ${e==="security"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(TA,{className:"w-4 h-4 inline mr-2"}),"Security"]}),s.jsxs("button",{onClick:()=>t("activity"),className:`px-6 py-3 border-b-2 font-medium text-sm ${e==="activity"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Uv,{className:"w-4 h-4 inline mr-2"}),"Activity"]})]})}),s.jsxs("div",{className:"p-6",children:[e==="personal"&&s.jsxs("form",{onSubmit:O,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(o2,{className:"w-4 h-4 inline mr-1"}),"Full Name"]}),s.jsx("input",{type:"text",value:b.name,onChange:R=>x({...b,name:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(tae,{className:"w-4 h-4 inline mr-1"}),"Email"]}),s.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(aae,{className:"w-4 h-4 inline mr-1"}),"Phone"]}),s.jsx("input",{type:"tel",value:b.phone,onChange:R=>x({...b,phone:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(SA,{className:"w-4 h-4 inline mr-1"}),"Position"]}),s.jsx("input",{type:"text",value:b.position,onChange:R=>x({...b,position:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Warehouse Manager"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(EA,{className:"w-4 h-4 inline mr-1"}),"Department"]}),s.jsx("input",{type:"text",value:b.department,onChange:R=>x({...b,department:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Operations"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx($v,{className:"w-4 h-4 inline mr-1"}),"Role"]}),s.jsx("input",{type:"text",value:r.role,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Role can only be changed by admins"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),s.jsx("textarea",{value:b.skills,onChange:R=>x({...b,skills:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"e.g., Forklift, Inventory Management, Safety Certified"})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Avatar"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("input",{type:"url",value:w,onChange:R=>C(R.target.value),placeholder:"Enter avatar URL",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("button",{type:"button",onClick:F,disabled:d,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Update Avatar"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[s.jsxs("button",{type:"button",onClick:()=>P(),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(di,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),s.jsxs("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(Td,{className:"w-4 h-4 inline mr-2"}),d?"Saving...":"Save Changes"]})]})]}),e==="security"&&s.jsxs("form",{onSubmit:$,className:"space-y-6 max-w-2xl",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Change Password"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsx("input",{type:"password",value:N.currentPassword,onChange:R=>j({...N,currentPassword:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsx("input",{type:"password",value:N.newPassword,onChange:R=>j({...N,newPassword:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:6})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsx("input",{type:"password",value:N.confirmPassword,onChange:R=>j({...N,confirmPassword:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,minLength:6})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-800 font-semibold mb-2",children:"Password Requirements:"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[s.jsx("li",{children:"At least 6 characters long"}),s.jsx("li",{children:"Use a mix of letters and numbers"}),s.jsx("li",{children:"Avoid common passwords"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 border-t pt-6",children:[s.jsxs("button",{type:"button",onClick:()=>j({currentPassword:"",newPassword:"",confirmPassword:""}),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(di,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),s.jsxs("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[s.jsx(TA,{className:"w-4 h-4 inline mr-2"}),d?"Changing...":"Change Password"]})]})]}),e==="activity"&&a&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Rack Activities"}),s.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:a.rackActivities})]}),s.jsx(Uv,{className:"w-12 h-12 text-blue-400"})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Job Assignments"}),s.jsx("p",{className:"text-3xl font-bold text-green-900 mt-2",children:a.jobAssignments})]}),s.jsx(SA,{className:"w-12 h-12 text-green-400"})]})}),s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Days Active"}),s.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:a.daysSinceJoined})]}),s.jsx(C3,{className:"w-12 h-12 text-purple-400"})]})})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Account Created:"}),s.jsx("span",{className:"font-medium",children:new Date(r.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Last Updated:"}),s.jsx("span",{className:"font-medium",children:new Date(r.updatedAt).toLocaleDateString()})]}),a.lastLoginAt&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Last Login:"}),s.jsx("span",{className:"font-medium",children:new Date(a.lastLoginAt).toLocaleString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Account Status:"}),s.jsx("span",{className:`font-medium ${r.isActive?"text-green-600":"text-red-600"}`,children:r.isActive?"Active":"Inactive"})]})]})]})]})]})]})]}):s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"Failed to load profile"})},Lue=["ADMIN","MANAGER","WORKER"],Mue={ADMIN:"bg-red-100 text-red-800 border-red-200",MANAGER:"bg-green-100 text-green-800 border-green-200",WORKER:"bg-blue-100 text-blue-800 border-blue-200"},Bue=()=>{const[e,t]=A.useState("MANAGER"),[r,n]=A.useState([]),[a,i]=A.useState({}),[o,c]=A.useState([]),[d,u]=A.useState(new Set),[f,p]=A.useState(!0),[b,x]=A.useState(!1),[N,j]=A.useState(null);A.useEffect(()=>{w()},[]),A.useEffect(()=>{e&&C(e)},[e]);const w=async()=>{try{const U=localStorage.getItem("authToken"),R=await Ur.get("/api/permissions",{headers:{Authorization:`Bearer ${U}`}});R.data.success&&(n(R.data.data.permissions),i(R.data.data.grouped))}catch(U){console.error("Failed to fetch permissions:",U),$("error","Failed to load permissions")}finally{p(!1)}},C=async U=>{try{const R=localStorage.getItem("authToken"),z=await Ur.get(`/api/permissions/role/${U}`,{headers:{Authorization:`Bearer ${R}`}});if(z.data.success){c(z.data.data.permissions);const M=new Set(z.data.data.permissions.map(W=>W.permissionId));u(M)}}catch(R){console.error("Failed to fetch role permissions:",R),$("error","Failed to load role permissions")}},P=U=>{if(e==="ADMIN"){$("error","ADMIN role has full access and cannot be modified");return}const R=new Set(d);R.has(U)?R.delete(U):R.add(U),u(R)},k=U=>{if(e==="ADMIN"){$("error","ADMIN role has full access and cannot be modified");return}const R=a[U]||[],z=R.every(W=>d.has(W.id)),M=new Set(d);R.forEach(W=>{z?M.delete(W.id):M.add(W.id)}),u(M)},_=async()=>{var U,R;if(e==="ADMIN"){$("error","ADMIN role has full access and cannot be modified");return}x(!0);try{const z=localStorage.getItem("authToken");(await Ur.put(`/api/permissions/role/${e}/bulk`,{permissionIds:Array.from(d)},{headers:{Authorization:`Bearer ${z}`}})).data.success&&($("success",`Permissions updated for ${e}!`),await C(e))}catch(z){console.error("Failed to update permissions:",z),$("error",((R=(U=z.response)==null?void 0:U.data)==null?void 0:R.message)||"Failed to update permissions")}finally{x(!1)}},O=()=>{C(e),$("success","Changes discarded")},$=(U,R)=>{j({type:U,text:R}),setTimeout(()=>j(null),5e3)},F=()=>d.size;return f?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx($v,{className:"w-6 h-6 mr-2 text-blue-600"}),"Role & Permission Management"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure what each role can see and do in the system"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Permissions:"}),s.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[F(),"/",r.length]})]})]})}),N&&s.jsx("div",{className:`px-4 py-3 rounded-lg border ${N.type==="success"?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:N.text}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex",children:Lue.map(U=>s.jsx("button",{onClick:()=>t(U),className:`flex-1 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${e===U?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx($v,{className:"w-4 h-4"}),s.jsx("span",{children:U})]})},U))})}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:`border-2 rounded-lg p-4 mb-6 ${Mue[e]}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:["Configuring: ",e]}),s.jsxs("p",{className:"text-sm mt-1",children:[e==="ADMIN"&&"Full system access - cannot be modified",e==="MANAGER"&&"Operational control - can manage daily tasks",e==="WORKER"&&"Limited access - basic operational tasks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Jg,{className:"w-4 h-4"}),s.jsxs("span",{className:"font-medium",children:[o.length," permissions assigned"]})]})]})}),s.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([U,R])=>{const z=R.every(W=>d.has(W.id)),M=R.some(W=>d.has(W.id));return s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>k(U),disabled:e==="ADMIN",className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${e==="ADMIN"?"bg-gray-200 border-gray-300 cursor-not-allowed":z?"bg-blue-600 border-blue-600":M?"bg-blue-300 border-blue-300":"border-gray-300 hover:border-blue-400"}`,children:[z&&s.jsx(kA,{className:"w-3 h-3 text-white"}),!z&&M&&s.jsx("div",{className:"w-2 h-0.5 bg-white"})]}),s.jsx("h4",{className:"font-semibold text-gray-900",children:U.replace(/_/g," ")})]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[R.filter(W=>d.has(W.id)).length," / ",R.length]})]}),s.jsx("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:R.map(W=>s.jsx("button",{onClick:()=>P(W.id),disabled:e==="ADMIN",className:`px-4 py-2 rounded-lg border-2 font-medium text-sm transition-all ${e==="ADMIN"?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":d.has(W.id)?"bg-blue-600 border-blue-600 text-white hover:bg-blue-700":"bg-white border-gray-300 text-gray-700 hover:border-blue-400"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.has(W.id)&&s.jsx(kA,{className:"w-4 h-4"}),W.action]})},W.id))})]},U)})}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t",children:[s.jsxs("button",{onClick:O,disabled:e==="ADMIN"||b,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(cae,{className:"w-4 h-4 inline mr-2"}),"Reset Changes"]}),s.jsxs("button",{onClick:_,disabled:e==="ADMIN"||b,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Td,{className:"w-4 h-4 inline mr-2"}),b?"Saving...":"Save Changes"]})]}),e==="ADMIN"&&s.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg",children:s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:"Note:"})," ADMIN role has full system access by default and cannot be modified. To restrict admin permissions, consider creating a custom MANAGER role instead."]})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Permission Actions"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"VIEW"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Read and view data"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"CREATE"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Create new records"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"EDIT"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Modify existing data"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"DELETE"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Remove records"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"APPROVE"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Approve requests"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"EXPORT"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Export data files"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"MANAGE"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Full control"})]})]})]})]})},Fue=()=>{const[e,t]=A.useState([]),[r,n]=A.useState([]),[a,i]=A.useState("materials"),[o,c]=A.useState(!1),[d,u]=A.useState({sku:"",name:"",category:"",unit:"PCS",minStockLevel:0});A.useEffect(()=>{f(),p()},[]);const f=async()=>{try{const x=await fetch("/api/materials",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(x.ok){const N=await x.json();t(N)}}catch(x){console.error("Failed to fetch materials:",x)}},p=async()=>{try{const x=await fetch("/api/materials/issues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(x.ok){const N=await x.json();n(N)}}catch(x){console.error("Failed to fetch issues:",x)}},b=async x=>{x.preventDefault();try{(await fetch("/api/materials",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(d)})).ok&&(c(!1),u({sku:"",name:"",category:"",unit:"PCS",minStockLevel:0}),f())}catch(N){console.error("Failed to add material:",N)}};return s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"mb-4",children:"Materials Management"}),s.jsxs("div",{className:"mb-4",style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("button",{onClick:()=>i("materials"),style:{padding:"10px 20px",backgroundColor:a==="materials"?"#007bff":"transparent",color:a==="materials"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Materials Catalog"}),s.jsx("button",{onClick:()=>i("issues"),style:{padding:"10px 20px",backgroundColor:a==="issues"?"#007bff":"transparent",color:a==="issues"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Material Issues"}),s.jsx("button",{onClick:()=>i("returns"),style:{padding:"10px 20px",backgroundColor:a==="returns"?"#007bff":"transparent",color:a==="returns"?"white":"black",border:"none",cursor:"pointer"},children:"Material Returns & Damage"})]}),a==="materials"&&s.jsxs("div",{children:[s.jsx("button",{onClick:()=>c(!o),style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"20px"},children:o?"Cancel":"Add Material"}),o&&s.jsx("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"4px",marginBottom:"20px"},children:s.jsxs("form",{onSubmit:b,children:[s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"SKU"}),s.jsx("input",{type:"text",required:!0,value:d.sku,onChange:x=>u({...d,sku:x.target.value}),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Name"}),s.jsx("input",{type:"text",required:!0,value:d.name,onChange:x=>u({...d,name:x.target.value}),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px"},children:"Category"}),s.jsx("input",{type:"text",required:!0,value:d.category,onChange:x=>u({...d,category:x.target.value}),style:{width:"100%",padding:"8px",boxSizing:"border-box"}})]}),s.jsx("button",{type:"submit",style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Create Material"})]})}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"SKU"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Name"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Category"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Unit"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Min Stock"})]})}),s.jsx("tbody",{children:e.map(x=>s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:x.sku}),s.jsx("td",{style:{padding:"12px"},children:x.name}),s.jsx("td",{style:{padding:"12px"},children:x.category}),s.jsx("td",{style:{padding:"12px"},children:x.unit}),s.jsx("td",{style:{padding:"12px"},children:x.minStockLevel})]},x.id))})]}),e.length===0&&s.jsx("p",{style:{textAlign:"center",color:"#6c757d",marginTop:"20px"},children:"No materials found. Create one to get started!"})]}),a==="issues"&&s.jsxs("div",{children:[s.jsx("h5",{style:{marginBottom:"20px"},children:"Material Issues (Allocations to Jobs)"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Material"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Quantity"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Total Cost"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job ID"})]})}),s.jsx("tbody",{children:r.map(x=>{var N;return s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:(N=x.material)==null?void 0:N.name}),s.jsx("td",{style:{padding:"12px"},children:x.quantity}),s.jsxs("td",{style:{padding:"12px"},children:[x.totalCost.toFixed(2)," KWD"]}),s.jsx("td",{style:{padding:"12px"},children:x.jobId})]},x.id)})})]}),r.length===0&&s.jsx("p",{style:{textAlign:"center",color:"#6c757d",marginTop:"20px"},children:"No material issues recorded yet."})]}),a==="returns"&&s.jsxs("div",{children:[s.jsx("h5",{style:{marginBottom:"20px"},children:"Material Returns & Damage Tracking"}),s.jsx("p",{style:{color:"#6c757d"},children:"Track material returns after job completion and record damage."}),s.jsx("div",{style:{padding:"20px",backgroundColor:"#e7f3ff",borderRadius:"4px",marginTop:"20px"},children:s.jsx("p",{children:" Coming soon: Return request form and damage photo upload"})})]})]})},Uue=()=>{const[e,t]=A.useState(null),[r,n]=A.useState([]),[a,i]=A.useState("summary"),[o,c]=A.useState(!1);A.useEffect(()=>{d()},[]);const d=async()=>{c(!0);try{const[f,p]=await Promise.all([fetch("/api/reports/profitability",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),fetch("/api/reports/material-costs",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})]);if(f.ok){const b=await f.json();t(b)}if(p.ok){const b=await p.json();n(b)}}catch(f){console.error("Failed to fetch reports:",f)}finally{c(!1)}},u=f=>`${f.toFixed(2)} KWD`;return s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"mb-4",children:"Job Reports & Financial Analytics"}),s.jsxs("div",{className:"mb-4",style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("button",{onClick:()=>i("summary"),style:{padding:"10px 20px",backgroundColor:a==="summary"?"#007bff":"transparent",color:a==="summary"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Profitability Summary"}),s.jsx("button",{onClick:()=>i("details"),style:{padding:"10px 20px",backgroundColor:a==="details"?"#007bff":"transparent",color:a==="details"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Cost Breakdown"}),s.jsx("button",{onClick:()=>i("costs"),style:{padding:"10px 20px",backgroundColor:a==="costs"?"#007bff":"transparent",color:a==="costs"?"white":"black",border:"none",cursor:"pointer"},children:"Material Costs"})]}),o?s.jsx("p",{children:"Loading reports..."}):s.jsxs(s.Fragment,{children:[a==="summary"&&e&&s.jsx("div",{children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #28a745"},children:[s.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Total Revenue"}),s.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#28a745"},children:u(e.totalRevenue)})]}),s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #dc3545"},children:[s.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Total Costs"}),s.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3545"},children:u(e.totalCosts)})]}),s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:`4px solid ${e.totalProfit>=0?"#28a745":"#dc3545"}`},children:[s.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Total Profit"}),s.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:e.totalProfit>=0?"#28a745":"#dc3545"},children:u(e.totalProfit)})]}),s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #007bff"},children:[s.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Avg Profit Margin"}),s.jsxs("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#007bff"},children:[e.avgProfitMargin.toFixed(1),"%"]})]}),s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",borderLeft:"4px solid #17a2b8"},children:[s.jsx("h6",{style:{color:"#6c757d",marginBottom:"10px"},children:"Jobs Tracked"}),s.jsx("h3",{style:{fontSize:"24px",fontWeight:"bold",color:"#17a2b8"},children:e.jobCount})]})]})}),a==="details"&&e&&s.jsxs("div",{children:[s.jsx("h5",{style:{marginBottom:"20px"},children:"Cost Breakdown"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Cost Category"}),s.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Amount"}),s.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"% of Total"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:"Materials"}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:u(e.breakdown.materials)}),s.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.materials/e.totalCosts*100).toFixed(1):0,"%"]})]}),s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:"Labor"}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:u(e.breakdown.labor)}),s.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.labor/e.totalCosts*100).toFixed(1):0,"%"]})]}),s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:"Damage Loss"}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:u(e.breakdown.damage)}),s.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.damage/e.totalCosts*100).toFixed(1):0,"%"]})]}),s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:"Other"}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:u(e.breakdown.other)}),s.jsxs("td",{style:{padding:"12px",textAlign:"right"},children:[e.totalCosts>0?(e.breakdown.other/e.totalCosts*100).toFixed(1):0,"%"]})]}),s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",fontWeight:"bold"},children:[s.jsx("td",{style:{padding:"12px"},children:"Total Costs"}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:u(e.totalCosts)}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:"100%"})]})]})]})]}),a==="costs"&&s.jsxs("div",{children:[s.jsx("h5",{style:{marginBottom:"20px"},children:"Material Cost Details"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Material"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"SKU"}),s.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Quantity"}),s.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Total Cost"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Job"})]})}),s.jsx("tbody",{children:r.map((f,p)=>s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:f.materialName}),s.jsx("td",{style:{padding:"12px"},children:f.materialSku}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:f.quantity}),s.jsx("td",{style:{padding:"12px",textAlign:"right"},children:u(f.totalCost)}),s.jsx("td",{style:{padding:"12px"},children:f.jobCode})]},p))})]}),r.length===0&&s.jsx("p",{style:{textAlign:"center",color:"#6c757d",marginTop:"20px"},children:"No material costs recorded yet."})]})]})]})},$ue=()=>{var P;const[e,t]=A.useState([]),[r,n]=A.useState([]),[a,i]=A.useState("plugins"),[o,c]=A.useState(!1),[d,u]=A.useState(null),[f,p]=A.useState({name:"",version:"1.0.0",description:""});A.useEffect(()=>{b()},[]);const b=async()=>{c(!0);try{const k=await fetch("/api/plugins",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(k.ok){const _=await k.json();t(_)}}catch(k){console.error("Failed to fetch plugins:",k)}finally{c(!1)}},x=async k=>{try{const _=await fetch(`/api/plugins/${k}/logs`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(_.ok){const O=await _.json();n(O)}}catch(_){console.error("Failed to fetch plugin logs:",_)}},N=async k=>{k.preventDefault(),c(!0);try{(await fetch("/api/plugins",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(f)})).ok?(alert("Plugin installed successfully"),p({name:"",version:"1.0.0",description:""}),i("plugins"),b()):alert("Failed to install plugin")}catch(_){console.error("Installation error:",_),alert("Error installing plugin")}finally{c(!1)}},j=async(k,_)=>{try{(await fetch(`/api/plugins/${k}/${_?"activate":"deactivate"}`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?b():alert("Failed to update plugin")}catch(O){console.error("Error:",O)}},w=async k=>{if(window.confirm("Are you sure you want to uninstall this plugin?"))try{(await fetch(`/api/plugins/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?(alert("Plugin uninstalled successfully"),b()):alert("Failed to uninstall plugin")}catch(_){console.error("Error:",_)}},C=k=>{switch(k){case"ACTIVE":return"#28a745";case"DISABLED":return"#ffc107";case"ERROR":return"#dc3545";default:return"#6c757d"}};return s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"mb-4",children:"Plugin System Management"}),s.jsxs("div",{className:"mb-4",style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("button",{onClick:()=>i("plugins"),style:{padding:"10px 20px",backgroundColor:a==="plugins"?"#007bff":"transparent",color:a==="plugins"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Installed Plugins"}),s.jsx("button",{onClick:()=>i("install"),style:{padding:"10px 20px",backgroundColor:a==="install"?"#007bff":"transparent",color:a==="install"?"white":"black",border:"none",cursor:"pointer",marginRight:"10px"},children:"Install Plugin"}),s.jsx("button",{onClick:()=>{i("logs"),d&&x(d)},style:{padding:"10px 20px",backgroundColor:a==="logs"?"#007bff":"transparent",color:a==="logs"?"white":"black",border:"none",cursor:"pointer"},children:"Audit Logs"})]}),o&&s.jsx("p",{children:"Loading..."}),a==="plugins"&&!o&&s.jsx("div",{children:e.length===0?s.jsx("p",{style:{color:"#6c757d"},children:"No plugins installed yet."}):s.jsx("div",{style:{display:"grid",gap:"15px"},children:e.map(k=>s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",borderLeft:`4px solid ${C(k.status)}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[s.jsxs("div",{children:[s.jsx("h5",{style:{marginBottom:"5px"},children:k.name}),s.jsxs("small",{style:{color:"#6c757d"},children:["Version ",k.version,"  Installed: ",new Date(k.installDate).toLocaleDateString()]})]}),s.jsx("span",{style:{backgroundColor:C(k.status),color:"white",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:k.status})]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("button",{onClick:()=>j(k.id,k.status!=="ACTIVE"),style:{padding:"8px 12px",backgroundColor:k.status==="ACTIVE"?"#ffc107":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:k.status==="ACTIVE"?"Disable":"Enable"}),s.jsx("button",{onClick:()=>{u(k.id),i("logs"),x(k.id)},style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View Logs"}),s.jsx("button",{onClick:()=>w(k.id),style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Uninstall"})]})]},k.id))})}),a==="install"&&s.jsxs("form",{onSubmit:N,style:{maxWidth:"500px"},children:[s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Plugin Name *"}),s.jsx("input",{type:"text",required:!0,value:f.name,onChange:k=>p({...f,name:k.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"},placeholder:"e.g., Advanced Reporting"})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Version"}),s.jsx("input",{type:"text",value:f.version,onChange:k=>p({...f,version:k.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box"},placeholder:"1.0.0"})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Description"}),s.jsx("textarea",{value:f.description,onChange:k=>p({...f,description:k.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box",minHeight:"100px"},placeholder:"Plugin description and features..."})]}),s.jsx("button",{type:"submit",disabled:o,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:o?"not-allowed":"pointer",fontWeight:"bold",opacity:o?.6:1},children:o?"Installing...":"Install Plugin"})]}),a==="logs"&&s.jsx("div",{children:d&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{marginBottom:"20px"},children:s.jsxs("h5",{children:["Plugin: ",(P=e.find(k=>k.id===d))==null?void 0:P.name]})}),r.length===0?s.jsx("p",{style:{color:"#6c757d"},children:"No logs available for this plugin."}):s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Timestamp"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Action"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Performed By"}),s.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Details"})]})}),s.jsx("tbody",{children:r.map(k=>s.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6"},children:[s.jsx("td",{style:{padding:"12px"},children:new Date(k.timestamp).toLocaleString()}),s.jsx("td",{style:{padding:"12px"},children:s.jsx("span",{style:{backgroundColor:k.action==="INSTALLED"?"#28a745":k.action==="ACTIVATED"?"#17a2b8":k.action==="DEACTIVATED"?"#ffc107":k.action==="UNINSTALLED"?"#dc3545":"#6c757d",color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:k.action})}),s.jsx("td",{style:{padding:"12px"},children:k.performedBy}),s.jsx("td",{style:{padding:"12px",color:"#6c757d"},children:k.details||"-"})]},k.id))})]})]})})]})},zue=()=>{const[e,t]=A.useState([]),[r,n]=A.useState([]),[a,i]=A.useState("PENDING"),[o,c]=A.useState("ALL"),[d,u]=A.useState(null),[f,p]=A.useState(""),[b,x]=A.useState(!1);A.useEffect(()=>{N()},[]),A.useEffect(()=>{j()},[e,a,o]);const N=async()=>{x(!0);try{const _=await fetch("/api/materials/approvals",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(_.ok){const O=await _.json();t(O)}}catch(_){console.error("Failed to fetch approvals:",_)}finally{x(!1)}},j=()=>{let _=e;a!=="ALL"&&(_=_.filter(O=>O.status===a)),o!=="ALL"&&(_=_.filter(O=>O.approvalType===o)),n(_)},w=async _=>{try{(await fetch(`/api/materials/approvals/${_}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({decision:"APPROVED",notes:f})})).ok?(alert("Approval recorded successfully"),u(null),p(""),N()):alert("Failed to record approval")}catch(O){console.error("Error:",O)}},C=async _=>{try{(await fetch(`/api/materials/approvals/${_}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({decision:"REJECTED",notes:f})})).ok?(alert("Rejection recorded successfully"),u(null),p(""),N()):alert("Failed to record rejection")}catch(O){console.error("Error:",O)}},P=_=>({DAMAGE:"#dc3545",PREMIUM_MATERIAL:"#007bff",QUANTITY_VARIATION:"#ffc107"})[_]||"#6c757d",k=_=>({PENDING:"#ffc107",APPROVED:"#28a745",REJECTED:"#dc3545"})[_]||"#6c757d";return s.jsxs("div",{className:"p-4",children:[s.jsx("h2",{className:"mb-4",children:"Approval Workflow Management"}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Status"}),s.jsxs("select",{value:a,onChange:_=>i(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px"},children:[s.jsx("option",{value:"ALL",children:"All Statuses"}),s.jsx("option",{value:"PENDING",children:"Pending"}),s.jsx("option",{value:"APPROVED",children:"Approved"}),s.jsx("option",{value:"REJECTED",children:"Rejected"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Type"}),s.jsxs("select",{value:o,onChange:_=>c(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px"},children:[s.jsx("option",{value:"ALL",children:"All Types"}),s.jsx("option",{value:"DAMAGE",children:"Damage Claims"}),s.jsx("option",{value:"PREMIUM_MATERIAL",children:"Premium Materials"}),s.jsx("option",{value:"QUANTITY_VARIATION",children:"Quantity Variations"})]})]}),s.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:s.jsx("button",{onClick:N,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Refresh"})})]}),b?s.jsx("p",{children:"Loading approvals..."}):r.length===0?s.jsx("p",{style:{color:"#6c757d"},children:"No approvals found."}):s.jsx("div",{style:{display:"grid",gap:"15px"},children:r.map(_=>s.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",borderLeft:`4px solid ${k(_.status)}`},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"10px"},children:[s.jsxs("div",{children:[s.jsx("h5",{style:{marginBottom:"5px"},children:_.materialName}),s.jsxs("small",{style:{color:"#6c757d"},children:["SKU: ",_.materialSku,"  Category: ",_.category,_.jobCode&&`  Job: ${_.jobCode}`]})]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("span",{style:{backgroundColor:P(_.approvalType),color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:_.approvalType.replace(/_/g," ")}),s.jsx("span",{style:{backgroundColor:k(_.status),color:"white",padding:"4px 8px",borderRadius:"3px",fontSize:"12px",fontWeight:"bold"},children:_.status})]})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"15px"},children:[s.jsxs("div",{children:[s.jsx("small",{style:{color:"#6c757d"},children:"Quantity"}),s.jsxs("p",{style:{fontWeight:"bold",margin:"3px 0"},children:[_.quantity," units"]})]}),s.jsxs("div",{children:[s.jsx("small",{style:{color:"#6c757d"},children:"Estimated Cost"}),s.jsxs("p",{style:{fontWeight:"bold",margin:"3px 0"},children:[_.estimatedCost.toFixed(2)," KWD"]})]}),s.jsxs("div",{children:[s.jsx("small",{style:{color:"#6c757d"},children:"Requested By"}),s.jsx("p",{style:{fontWeight:"bold",margin:"3px 0"},children:_.requestedBy})]}),s.jsxs("div",{children:[s.jsx("small",{style:{color:"#6c757d"},children:"Requested At"}),s.jsx("p",{style:{fontWeight:"bold",margin:"3px 0"},children:new Date(_.requestedAt).toLocaleDateString()})]})]}),_.status==="PENDING"&&s.jsx("button",{onClick:()=>u(_),style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Review & Decide"}),_.status!=="PENDING"&&s.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#e9ecef",borderRadius:"4px"},children:[s.jsxs("small",{style:{color:"#6c757d"},children:[s.jsx("strong",{children:"Decision:"})," ",_.status," by ",_.approvedBy," on"," ",_.approvedAt?new Date(_.approvedAt).toLocaleString():"N/A"]}),_.decisionNotes&&s.jsxs("p",{style:{margin:"5px 0",color:"#495057"},children:[s.jsx("strong",{children:"Notes:"})," ",_.decisionNotes]})]})]},_.id))}),d&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>u(null),children:s.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"500px",width:"90%",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:_=>_.stopPropagation(),children:[s.jsx("h4",{style:{marginBottom:"15px"},children:"Review Approval Request"}),s.jsxs("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:[s.jsxs("small",{style:{color:"#6c757d"},children:[s.jsx("strong",{children:d.materialName})," (",d.materialSku,")"]}),s.jsxs("p",{style:{margin:"5px 0",fontWeight:"bold"},children:[d.quantity," units  ",d.estimatedCost.toFixed(2)," KWD"]})]}),s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"Decision Notes"}),s.jsx("textarea",{value:f,onChange:_=>p(_.target.value),style:{width:"100%",padding:"8px",border:"1px solid #dee2e6",borderRadius:"4px",boxSizing:"border-box",minHeight:"80px"},placeholder:"Enter approval or rejection notes..."})]}),s.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[s.jsx("button",{onClick:()=>u(null),style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Cancel"}),s.jsx("button",{onClick:()=>C(d.id),style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Reject"}),s.jsx("button",{onClick:()=>w(d.id),style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Approve"})]})]})})]})},Wue=({isOpen:e,onClose:t,materialId:r,materialName:n})=>{const[a,i]=A.useState([]),[o,c]=A.useState(!1),[d,u]=A.useState({currentStock:0,totalPurchased:0,totalIssued:0,totalReturned:0,totalDamaged:0});A.useEffect(()=>{e&&r&&f()},[e,r]);const f=async()=>{c(!0);try{const b=await(await fetch(`/api/materials/${r}/history`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();i(b.transactions),u(b.summary)}catch(p){console.error("Failed to load transaction history:",p)}finally{c(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(Gd,{className:"w-6 h-6"}),"Transaction History"]}),s.jsx("p",{className:"text-blue-100 mt-1",children:n})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2",children:s.jsx(di,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"grid grid-cols-5 gap-4 p-6 bg-gray-50 border-b",children:[s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Current Stock"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.currentStock})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Purchased"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["+",d.totalPurchased]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Issued"}),s.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["-",d.totalIssued]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Returned"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["+",d.totalReturned]})]}),s.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Damaged"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:d.totalDamaged})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transactions..."})]}):a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gd,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No transactions found"})]}):s.jsx("div",{className:"space-y-4",children:a.map(p=>s.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.type==="PURCHASE"&&s.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:s.jsx(IA,{className:"w-5 h-5 text-green-600"})}),p.type==="ISSUE"&&s.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:s.jsx(zv,{className:"w-5 h-5 text-orange-600"})}),p.type==="RETURN"&&s.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:s.jsx(IA,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:[p.type==="PURCHASE"&&"Stock Purchase",p.type==="ISSUE"&&"Material Issued",p.type==="RETURN"&&"Material Returned",p.type==="ADJUSTMENT"&&"Stock Adjustment"]}),s.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2 mt-1",children:[s.jsx(C3,{className:"w-4 h-4"}),new Date(p.date).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsxs("div",{className:"ml-14 space-y-1",children:[p.details.jobCode&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Job:"})," ",s.jsx("span",{className:"text-blue-600",children:p.details.jobCode}),p.details.jobTitle&&` - ${p.details.jobTitle}`]}),p.details.purchaseOrderNo&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"PO:"})," ",p.details.purchaseOrderNo]}),p.details.supplier&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Supplier:"})," ",p.details.supplier]}),p.details.rack&&s.jsxs("p",{className:"text-sm flex items-center gap-1",children:[s.jsx(HO,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Rack:"})," ",p.details.rack]}),p.details.unitCost&&s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Unit Cost:"})," ",p.details.unitCost.toFixed(2)]}),p.details.notes&&s.jsx("p",{className:"text-sm text-gray-600 italic",children:p.details.notes})]})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsxs("p",{className:`text-2xl font-bold ${p.type==="PURCHASE"||p.type==="RETURN"?"text-green-600":"text-orange-600"}`,children:[p.type==="PURCHASE"||p.type==="RETURN"?"+":"-",p.quantity]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Balance: ",s.jsx("span",{className:"font-semibold text-gray-700",children:p.balanceAfter})]})]})]})},p.id))})}),s.jsx("div",{className:"border-t p-4 bg-gray-50 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})}):null},que=()=>{const[e,t]=A.useState("materials"),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,c]=A.useState([]),[d,u]=A.useState(!1),[f,p]=A.useState(""),[b,x]=A.useState(!1),[N,j]=A.useState(null),[w,C]=A.useState(!1),[P,k]=A.useState({name:"",parentId:"",description:""}),[_,O]=A.useState(!1),[$,F]=A.useState({sku:"",name:"",description:"",categoryId:"",unit:"PCS",minStockLevel:5,unitCost:0,sellingPrice:0}),[U,R]=A.useState(!1),[z,M]=A.useState({materialId:"",batchNumber:"",quantityReceived:0,unitCost:0,sellingPrice:0});A.useEffect(()=>{if(!localStorage.getItem("authToken")){console.warn("No token found, redirecting to login"),window.location.href="/login";return}J(),K()},[]);const W=()=>{const te=localStorage.getItem("authToken");return te?{Authorization:`Bearer ${te}`,"Content-Type":"application/json"}:null},J=async()=>{try{const te=W();if(!te){window.location.href="/login";return}const G=await fetch("/api/materials/categories",{headers:te});if(G.status===401||G.status===403){console.error("Authentication failed - invalid or expired token"),alert("Your session has expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(G.ok){const Q=await G.json();n(Q)}else console.error("Failed to fetch categories:",G.status)}catch(te){console.error("Failed to fetch categories:",te)}},K=async()=>{try{u(!0);const te=W();if(!te){window.location.href="/login";return}const G=await fetch("/api/materials",{headers:te});if(G.status===401||G.status===403){console.error("Authentication failed - invalid or expired token"),alert("Your session has expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(G.ok){const Q=await G.json();i(Q)}else console.error("Failed to fetch materials:",G.status)}catch(te){console.error("Failed to fetch materials:",te)}finally{u(!1)}},V=async te=>{try{const G=te?`/api/materials/${te}/stock`:"/api/materials/stock/all",Q=await fetch(G,{headers:W()});if(Q.ok){const le=await Q.json();c(le)}}catch(G){console.error("Failed to fetch stock:",G)}},me=async te=>{te.preventDefault();try{const G=await fetch("/api/materials/categories",{method:"POST",headers:W(),body:JSON.stringify(P)});if(G.status===401||G.status===403){alert("Session expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(G.ok)alert("Category added successfully!"),C(!1),k({name:"",parentId:"",description:""}),J();else{const Q=await G.json();alert(Q.error||"Failed to add category")}}catch{alert("Failed to add category")}},se=async te=>{te.preventDefault();try{const G=await fetch("/api/materials",{method:"POST",headers:W(),body:JSON.stringify($)});if(G.status===401||G.status===403){alert("Session expired. Please login again."),localStorage.removeItem("authToken"),window.location.href="/login";return}if(G.ok)alert("Material added successfully!"),O(!1),F({sku:"",name:"",description:"",categoryId:"",unit:"PCS",minStockLevel:5,unitCost:0,sellingPrice:0}),K();else{const Q=await G.json();alert(Q.error||"Failed to add material")}}catch{alert("Failed to add material")}},oe=async te=>{te.preventDefault();try{const G=await fetch("/api/materials/stock",{method:"POST",headers:W(),body:JSON.stringify(z)});if(G.ok)alert("Stock added successfully!"),R(!1),M({materialId:"",batchNumber:"",quantityReceived:0,unitCost:0,sellingPrice:0}),K(),V();else{const Q=await G.json();alert(Q.error||"Failed to add stock")}}catch{alert("Failed to add stock")}},ye=(te,G=0)=>te.map(Q=>s.jsxs("div",{style:{marginLeft:`${G*20}px`},className:"border-l-2 border-gray-200 pl-4 my-2",children:[s.jsx("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(i2,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:Q.name}),s.jsx("p",{className:"text-sm text-gray-500",children:Q.description}),Q._count&&s.jsxs("span",{className:"text-xs text-gray-400",children:[Q._count.materials," materials"]})]})]})}),Q.children&&Q.children.length>0&&ye(Q.children,G+1)]},Q.id)),we=a.filter(te=>te.name.toLowerCase().includes(f.toLowerCase())||te.sku.toLowerCase().includes(f.toLowerCase()));return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Material Management"})}),s.jsxs("div",{className:"flex gap-4 mb-6 border-b",children:[s.jsxs("button",{onClick:()=>t("categories"),className:`px-6 py-3 font-semibold transition ${e==="categories"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(i2,{className:"w-5 h-5 inline mr-2"}),"Categories"]}),s.jsxs("button",{onClick:()=>t("materials"),className:`px-6 py-3 font-semibold transition ${e==="materials"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(Gd,{className:"w-5 h-5 inline mr-2"}),"Materials"]}),s.jsxs("button",{onClick:()=>{t("stock"),V()},className:`px-6 py-3 font-semibold transition ${e==="stock"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(Tse,{className:"w-5 h-5 inline mr-2"}),"Stock Batches"]})]}),e==="categories"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Material Categories"}),s.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[s.jsx(Np,{className:"w-5 h-5"}),"Add Category"]})]}),w&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"New Category"}),s.jsx("button",{onClick:()=>C(!1),children:s.jsx(di,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:me,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category Name *"}),s.jsx("input",{type:"text",required:!0,value:P.name,onChange:te=>k({...P,name:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"e.g., Boxes, Tape, Bubble Wrap"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parent Category"}),s.jsxs("select",{value:P.parentId,onChange:te=>k({...P,parentId:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"",children:"-- Root Category --"}),r.map(te=>s.jsx("option",{value:te.id,children:te.name},te.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx("textarea",{value:P.description,onChange:te=>k({...P,description:te.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:3})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[s.jsx(Td,{className:"w-4 h-4 inline mr-2"}),"Save Category"]}),s.jsx("button",{type:"button",onClick:()=>C(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(i2,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{children:"No categories yet. Add your first category to organize materials."})]}):ye(r)})]}),e==="materials"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"flex-1 mr-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(hae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search materials...",value:f,onChange:te=>p(te.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})}),s.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[s.jsx(Np,{className:"w-5 h-5"}),"Add Material"]})]}),_&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"New Material"}),s.jsx("button",{onClick:()=>O(!1),children:s.jsx(di,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:se,className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"SKU *"}),s.jsx("input",{type:"text",required:!0,value:$.sku,onChange:te=>F({...$,sku:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"MAT-001"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material Name *"}),s.jsx("input",{type:"text",required:!0,value:$.name,onChange:te=>F({...$,name:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Large Moving Box"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx("textarea",{value:$.description,onChange:te=>F({...$,description:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Optional description...",rows:2})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category *"}),s.jsxs("select",{required:!0,value:$.categoryId,onChange:te=>F({...$,categoryId:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"",children:"-- Select Category --"}),r.map(te=>s.jsx("option",{value:te.id,children:te.name},te.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit"}),s.jsxs("select",{value:$.unit,onChange:te=>F({...$,unit:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"PCS",children:"Pieces"}),s.jsx("option",{value:"ROLL",children:"Roll"}),s.jsx("option",{value:"BOX",children:"Box"}),s.jsx("option",{value:"KG",children:"Kilogram"}),s.jsx("option",{value:"METER",children:"Meter"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Min Stock Level *"}),s.jsx("input",{type:"number",required:!0,value:$.minStockLevel===0?"":$.minStockLevel,onChange:te=>F({...$,minStockLevel:te.target.value===""?0:parseInt(te.target.value)}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Enter minimum stock"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit Cost (KWD)"}),s.jsx("input",{type:"number",step:"0.01",value:$.unitCost===0?"":$.unitCost,onChange:te=>F({...$,unitCost:te.target.value===""?0:parseFloat(te.target.value)}),className:"w-full border rounded-lg px-3 py-2",placeholder:"Enter unit cost"})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 w-full",children:[s.jsx(Td,{className:"w-4 h-4 inline mr-2"}),"Save Material"]})})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):we.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"No materials found. Add your first material to get started."})}):we.map(te=>{var G;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:te.sku}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:te.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:((G=te.materialCategory)==null?void 0:G.name)||"Uncategorized"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[s.jsx("span",{className:`font-bold ${te.totalQuantity<te.minStockLevel?"text-red-600":"text-green-600"}`,children:te.totalQuantity}),te.totalQuantity<te.minStockLevel&&s.jsx(Fse,{className:"w-4 h-4 inline ml-2 text-red-600"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:te.unit}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${te.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:te.isActive?"Active":"Inactive"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsxs("button",{onClick:()=>{j(te),x(!0)},className:"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-1",children:[s.jsx(Jse,{className:"w-4 h-4"}),"History"]})})]},te.id)})})]})})]}),e==="stock"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Stock Management"}),s.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[s.jsx(Np,{className:"w-5 h-5"}),"Add Stock"]})]}),U&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Add Stock Batch"}),s.jsx("button",{onClick:()=>R(!1),children:s.jsx(di,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:oe,className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Material *"}),s.jsxs("select",{required:!0,value:z.materialId,onChange:te=>M({...z,materialId:te.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[s.jsx("option",{value:"",children:"-- Select Material --"}),a.map(te=>s.jsxs("option",{value:te.id,children:[te.sku," - ",te.name]},te.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Batch Number *"}),s.jsx("input",{type:"text",required:!0,value:z.batchNumber,onChange:te=>M({...z,batchNumber:te.target.value}),className:"w-full border rounded-lg px-3 py-2",placeholder:"BATCH-001"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity *"}),s.jsx("input",{type:"number",required:!0,min:"1",value:z.quantityReceived,onChange:te=>M({...z,quantityReceived:te.target.value===""?0:parseInt(te.target.value)||0}),className:"w-full border rounded-lg px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unit Cost (KWD)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:z.unitCost,onChange:te=>M({...z,unitCost:te.target.value===""?0:parseFloat(te.target.value)||0}),className:"w-full border rounded-lg px-3 py-2"})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 w-full",children:[s.jsx(Td,{className:"w-4 h-4 inline mr-2"}),"Add Stock"]})})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Batch #"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Received"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Remaining"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit Cost"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No stock batches found."})}):o.map(te=>{var G,Q;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:te.batchNumber}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:((G=te.material)==null?void 0:G.name)||((Q=a.find(le=>le.id===te.materialId))==null?void 0:Q.name)||"Unknown"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:te.quantityPurchased||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:te.quantityRemaining===0?"text-red-600":"text-green-600",children:te.quantityRemaining})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[te.unitCost.toFixed(2)," KWD"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:new Date(te.purchaseDate).toLocaleDateString()})]},te.id)})})]})})]}),s.jsx(Wue,{isOpen:b,onClose:()=>x(!1),materialId:(N==null?void 0:N.id)||"",materialName:(N==null?void 0:N.name)||""})]})},Hue=()=>{const[e,t]=A.useState("overview"),[r,n]=A.useState(!1),[a,i]=A.useState({start:"",end:""}),[o,c]=A.useState(null),[d,u]=A.useState([]),[f,p]=A.useState(null),[b,x]=A.useState(null),[N,j]=A.useState([]),[w,C]=A.useState(null);A.useEffect(()=>{P()},[e,a]);const P=async()=>{n(!0);const $={Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"};try{switch(e){case"overview":case"stock":const U=await(await fetch("/api/materials/reports/stock-summary",{headers:$})).json();c(U);break;case"low-stock":const z=await(await fetch("/api/materials/reports/low-stock",{headers:$})).json();u(z.lowStockAlerts||[]);break;case"consumption":const M=`/api/materials/reports/consumption?startDate=${a.start}&endDate=${a.end}`,J=await(await fetch(M,{headers:$})).json();p(J);break;case"purchases":const K=`/api/materials/reports/purchase-history?startDate=${a.start}&endDate=${a.end}`,me=await(await fetch(K,{headers:$})).json();x(me);break;case"vendors":const oe=await(await fetch("/api/materials/reports/vendor-performance",{headers:$})).json();j(oe.vendors||[]);break;case"valuation":const we=await(await fetch("/api/materials/reports/valuation",{headers:$})).json();C(we);break}}catch(F){console.error("Failed to load report:",F)}finally{n(!1)}},k=(O,$)=>{const F=[Object.keys(O[0]).join(","),...O.map(M=>Object.values(M).join(","))].join(`
`),U=new Blob([F],{type:"text/csv"}),R=window.URL.createObjectURL(U),z=document.createElement("a");z.href=R,z.download=`${$}-${new Date().toISOString().split("T")[0]}.csv`,z.click()},_=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6"];return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Material Reports & Analytics"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:a.start,onChange:O=>i({...a,start:O.target.value}),className:"border rounded px-3 py-2"}),s.jsx("input",{type:"date",value:a.end,onChange:O=>i({...a,end:O.target.value}),className:"border rounded px-3 py-2"}),s.jsxs("button",{onClick:P,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(Yse,{className:"w-4 h-4"}),"Apply Filter"]})]})]}),s.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:Uv},{id:"stock",label:"Stock Summary",icon:Gd},{id:"low-stock",label:"Low Stock Alerts",icon:Zg},{id:"consumption",label:"Consumption",icon:zv},{id:"purchases",label:"Purchase History",icon:pae},{id:"vendors",label:"Vendor Performance",icon:Jg},{id:"valuation",label:"Stock Valuation",icon:PA}].map(O=>s.jsxs("button",{onClick:()=>t(O.id),className:`flex items-center gap-2 px-4 py-2 rounded whitespace-nowrap ${e===O.id?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[s.jsx(O.icon,{className:"w-4 h-4"}),O.label]},O.id))}),r?s.jsx("div",{className:"text-center py-12",children:"Loading report data..."}):s.jsxs(s.Fragment,{children:[e==="overview"&&o&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Total Materials"}),s.jsx("p",{className:"text-2xl font-bold",children:o.totals.totalMaterials})]}),s.jsx(Gd,{className:"w-10 h-10 text-blue-600"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Low Stock Items"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.totals.lowStockItems})]}),s.jsx(Zg,{className:"w-10 h-10 text-orange-600"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Out of Stock"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.totals.outOfStockItems})]}),s.jsx(zv,{className:"w-10 h-10 text-red-600"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Total Value"}),s.jsxs("p",{className:"text-2xl font-bold",children:[o.totals.totalValue.toFixed(2)," KWD"]})]}),s.jsx(PA,{className:"w-10 h-10 text-green-600"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stock by Category"}),s.jsx(tv,{width:"100%",height:300,children:s.jsxs(mO,{children:[s.jsx(c3,{data:o.summary.reduce((O,$)=>{const F=O.find(U=>U.category===$.category);return F?F.value+=$.totalQuantity:O.push({category:$.category,value:$.totalQuantity}),O},[]),dataKey:"value",nameKey:"category",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:o.summary.map((O,$)=>s.jsx(Mh,{fill:_[$%_.length]},`cell-${$}`))}),s.jsx(Cv,{}),s.jsx(ch,{})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Stock Value by Material"}),s.jsx(tv,{width:"100%",height:300,children:s.jsxs(Xre,{data:o.summary.slice(0,10),children:[s.jsx(Z_,{strokeDasharray:"3 3"}),s.jsx(J_,{dataKey:"sku"}),s.jsx(Q_,{}),s.jsx(Cv,{}),s.jsx(ch,{}),s.jsx(q_,{dataKey:"totalValue",fill:"#4F46E5"})]})})]})]})]}),e==="stock"&&o&&s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsxs("div",{className:"p-4 flex justify-between items-center border-b",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Stock Summary Report"}),s.jsxs("button",{onClick:()=>k(o.summary,"stock-summary"),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:[s.jsx(Ox,{className:"w-4 h-4"}),"Export CSV"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Min Level"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Value (KWD)"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.summary.map(O=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.sku}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.category}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.totalQuantity," ",O.unit]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.minStockLevel}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${O.stockStatus==="ADEQUATE"?"bg-green-100 text-green-800":O.stockStatus==="LOW"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:O.stockStatus})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.totalValue.toFixed(2)," KWD"]})]},O.id))})]})})]}),e==="low-stock"&&s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("h2",{className:"text-xl font-bold text-red-600",children:["Low Stock Alerts (",d.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Material"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Current Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Min Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shortfall"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Suggested Reorder"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(O=>s.jsxs("tr",{className:"bg-red-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.sku}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-bold",children:[O.currentStock," ",O.unit]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.minStock}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:O.shortfall}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:[O.suggestedReorderQty," ",O.unit]})]},O.id))})]})})]}),e==="consumption"&&f&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Material Consumption Report"}),s.jsxs("p",{className:"text-gray-600",children:["Total Usage Records: ",f.totalRecords]})]}),e==="purchases"&&b&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Purchase History"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"border p-4 rounded",children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Total Purchases"}),s.jsx("p",{className:"text-2xl font-bold",children:b.summary.totalPurchases})]}),s.jsxs("div",{className:"border p-4 rounded",children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Total Quantity"}),s.jsx("p",{className:"text-2xl font-bold",children:b.summary.totalQuantity})]}),s.jsxs("div",{className:"border p-4 rounded",children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Total Amount"}),s.jsxs("p",{className:"text-2xl font-bold",children:[b.summary.totalAmount.toFixed(2)," KWD"]})]})]})]}),e==="vendors"&&N.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h2",{className:"text-xl font-bold",children:"Vendor Performance Report"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vendor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rating"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Purchases"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg Cost"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(O=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:O.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[" ",O.rating.toFixed(1)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:O.totalPurchases}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.totalAmount.toFixed(2)," KWD"]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[O.avgUnitCost.toFixed(2)," KWD"]})]},O.id))})]})})]}),e==="valuation"&&w&&s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Stock Valuation Report (",w.valuationMethod,")"]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"Total Inventory Value"}),s.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[w.totalValue.toFixed(2)," KWD"]})]})]})})]})]})},Vue=()=>{const[e,t]=A.useState([]),[r,n]=A.useState(null),[a,i]=A.useState(!1),[o,c]=A.useState(null),[d,u]=A.useState({startDate:"",endDate:"",materialId:""});A.useEffect(()=>{f()},[]);const f=async()=>{i(!0);try{const x=new URLSearchParams;d.startDate&&x.append("startDate",d.startDate),d.endDate&&x.append("endDate",d.endDate),d.materialId&&x.append("materialId",d.materialId);const j=await(await fetch(`/api/reports/damages?${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();t(j.damages),n(j.summary)}catch(x){console.error("Failed to load damage report:",x)}finally{i(!1)}},p=()=>{window.print()},b=()=>{const x=["Date","Job Code","Material","SKU","Quantity","Reason","Value","Recorded By"],N=e.map(k=>[new Date(k.recordedAt).toLocaleDateString(),k.job.jobCode,k.material.name,k.material.sku,k.quantity,k.reason,k.estimatedValue.toFixed(2),k.recordedBy.name]),j=[x,...N].map(k=>k.join(",")).join(`
`),w=new Blob([j],{type:"text/csv"}),C=window.URL.createObjectURL(w),P=document.createElement("a");P.href=C,P.download=`damage-report-${new Date().toISOString().split("T")[0]}.csv`,P.click()};return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 print:mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(Zg,{className:"w-8 h-8 text-red-600"}),"Damage Report"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Complete record of damaged materials with photos and job details"})]}),s.jsxs("div",{className:"flex gap-2 print:hidden",children:[s.jsxs("button",{onClick:p,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[s.jsx(VO,{className:"w-4 h-4"}),"Print"]}),s.jsxs("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[s.jsx(Ox,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),r&&s.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6 print:mb-4",children:[s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-red-700 font-medium mb-1",children:"Total Damaged Items"}),s.jsx("p",{className:"text-3xl font-bold text-red-600",children:r.totalItems})]}),s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-orange-700 font-medium mb-1",children:"Estimated Value Loss"}),s.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[r.totalValue.toFixed(2)," KWD"]})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-yellow-700 font-medium mb-1",children:"Most Damaged"}),s.jsx("p",{className:"text-lg font-bold text-yellow-600",children:r.mostDamagedMaterial})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"Recent Damage"}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:new Date(r.recentDamageDate).toLocaleDateString()})]})]}),s.jsx("div",{className:"bg-white border rounded-lg p-4 mb-6 print:hidden",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:d.startDate,onChange:x=>u({...d,startDate:x.target.value}),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:d.endDate,onChange:x=>u({...d,endDate:x.target.value}),className:"w-full border rounded px-3 py-2"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Apply Filters"})})]})}),s.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:a?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading damage records..."})]}):e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zg,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No damage records found"})]}):s.jsx("div",{className:"divide-y",children:e.map(x=>s.jsx("div",{className:"p-6 hover:bg-gray-50",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Gd,{className:"w-5 h-5 text-red-600"}),x.material.name]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",x.material.sku]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[x.quantity," ",x.material.unit]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[x.estimatedValue.toFixed(2)," KWD"]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-3",children:[s.jsx("p",{className:"font-semibold text-blue-900 mb-1",children:"Job Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Job Code:"}),s.jsx("span",{className:"ml-2 font-medium text-blue-700",children:x.job.jobCode})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Title:"}),s.jsx("span",{className:"ml-2 font-medium",children:x.job.jobTitle})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(HO,{className:"w-3 h-3 inline mr-1"}),s.jsx("span",{className:"text-gray-700",children:x.job.jobAddress})]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:"Damage Reason:"}),s.jsx("p",{className:"text-gray-800 bg-yellow-50 border border-yellow-200 rounded p-2",children:x.reason})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(C3,{className:"w-4 h-4"}),new Date(x.recordedAt).toLocaleString()]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Hse,{className:"w-4 h-4"}),"Recorded by: ",x.recordedBy.name]})]})]}),s.jsxs("div",{className:"w-64",children:[s.jsxs("p",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx(_x,{className:"w-4 h-4"}),"Damage Photos (",x.photoUrls.length,")"]}),x.photoUrls.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.photoUrls.map((N,j)=>s.jsx("div",{className:"aspect-square border rounded overflow-hidden cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>c(N),children:s.jsx("img",{src:N,alt:`Damage ${j+1}`,className:"w-full h-full object-cover"})},j))}):s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No photos available"})]})]})},x.id))})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 print:hidden",onClick:()=>c(null),children:s.jsx("div",{className:"max-w-4xl max-h-[90vh] p-4",children:s.jsx("img",{src:o,alt:"Damage",className:"max-w-full max-h-full object-contain"})})}),s.jsx("style",{children:`
        @media print {
          .print\\:hidden {
            display: none !important;
          }
          .print\\:mb-4 {
            margin-bottom: 1rem !important;
          }
        }
      `})]})},Gue=()=>{const[e,t]=A.useState([]),[r,n]=A.useState("test@example.com"),[a,i]=A.useState("Test123!"),[o,c]=A.useState({hasToken:!1,hasUser:!1,userData:null}),d=(b,x="info")=>{const N={time:new Date().toLocaleTimeString(),message:b,type:x};t(j=>[N,...j])},u=()=>{const b=localStorage.getItem("authToken"),x=localStorage.getItem("user");let N=null;if(x)try{N=JSON.parse(x)}catch{d("Invalid user data in localStorage","error")}c({hasToken:!!b,hasUser:!!x,userData:N}),b?d(`Token found: ${b.substring(0,20)}...`,"success"):d("No token in localStorage","warning"),N&&d(`User data: ${N.email||N.id}`,"success")},f=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),d(" Cleared all auth data","warning"),u()},p=async()=>{d(`Attempting login with: ${r}`,"info");try{const b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:a})}),x=await b.json();b.ok&&x.success?(localStorage.setItem("authToken",x.token),localStorage.setItem("user",JSON.stringify(x.user)),d(` Login successful for ${x.user.email}`,"success"),d(`Token saved: ${x.token.substring(0,20)}...`,"success"),u()):d(` Login failed: ${x.message||"Unknown error"}`,"error")}catch(b){d(` Error during login: ${b.message}`,"error")}};return A.useEffect(()=>{u(),d(" Debug tool loaded","info")},[]),s.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-indigo-600 mb-2",children:" Login Debug Tool"}),s.jsx("p",{className:"text-gray-600",children:"Test Parse authentication without redirects"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[" Current Auth Status",s.jsx("button",{onClick:u,className:"ml-auto px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:" Refresh"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:`p-4 border-l-4 rounded ${o.hasToken?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:o.hasToken?" Token exists in localStorage":" No token found"}),s.jsx("div",{className:`p-4 border-l-4 rounded ${o.hasUser?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:o.hasUser?" User data exists":" No user data found"}),o.userData&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded",children:[s.jsx("strong",{children:"User Data:"}),s.jsx("pre",{className:"mt-2 text-sm overflow-auto",children:JSON.stringify(o.userData,null,2)})]}),s.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:" Clear Auth Data"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:" Test Login"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:r,onChange:b=>n(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",value:a,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),s.jsx("button",{onClick:p,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:" Test Login"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:" Response Logs"}),s.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded h-96 overflow-auto font-mono text-sm",children:e.length===0?s.jsx("div",{children:"Waiting for actions..."}):e.map((b,x)=>s.jsxs("div",{className:"mb-1",children:["[",b.time,"] ",b.message]},x))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:" Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("button",{onClick:()=>window.location.href="/login",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:" Go to Login Page"}),s.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:" Go to Dashboard"})]})]})]})})},Kue=A.createContext(void 0),Xue=({children:e})=>{const[t,r]=A.useState([]),[n,a]=A.useState(!0),i=async()=>{try{const j=localStorage.getItem("authToken");if(!j){r([]),a(!1);return}const w=await Ur.get("/api/permissions/my-permissions",{headers:{Authorization:`Bearer ${j}`}});w.data.success&&r(w.data.data.permissions)}catch(j){console.error("Failed to fetch permissions:",j),r([])}finally{a(!1)}};A.useEffect(()=>{i()},[]);const o=(j,w)=>t.some(C=>C.resource===j&&C.action===w),c=j=>o(j,"VIEW"),d=j=>o(j,"CREATE"),u=j=>o(j,"EDIT"),f=j=>o(j,"DELETE"),p=j=>o(j,"APPROVE"),b=j=>o(j,"EXPORT"),x=j=>o(j,"MANAGE"),N=async()=>{a(!0),await i()};return s.jsx(Kue.Provider,{value:{permissions:t,loading:n,hasPermission:o,canView:c,canCreate:d,canEdit:u,canDelete:f,canApprove:p,canExport:b,canManage:x,refreshPermissions:N},children:e})},us=({children:e,allowedRoles:t=[],redirectTo:r="/scanner"})=>{const n=localStorage.getItem("user");if(!n)return s.jsx($u,{to:"/login",replace:!0});try{const i=JSON.parse(n).role;return t.length===0?s.jsx(s.Fragment,{children:e}):t.includes(i)?s.jsx(s.Fragment,{children:e}):s.jsx($u,{to:r,replace:!0})}catch{return localStorage.removeItem("authToken"),localStorage.removeItem("user"),s.jsx($u,{to:"/login",replace:!0})}};function Yue(){const[e,t]=A.useState(!1),[r,n]=A.useState(!0);return A.useEffect(()=>{(()=>{const i=Gg(),o=localStorage.getItem("user");if(i&&o)try{JSON.parse(o),t(!0)}catch{localStorage.removeItem("authToken"),localStorage.removeItem("user"),t(!1)}else t(!1);n(!1)})()},[]),r?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s.jsx(Xue,{children:s.jsx(DB,{children:s.jsxs(kB,{children:[s.jsx(Vr,{path:"/login",element:s.jsx(Nie,{})}),s.jsx(Vr,{path:"/debug-login",element:s.jsx(Gue,{})}),s.jsxs(Vr,{path:"/",element:e?s.jsx(lU,{}):s.jsx($u,{to:"/login",replace:!0}),children:[s.jsx(Vr,{index:!0,element:s.jsx($u,{to:"/dashboard",replace:!0})}),s.jsx(Vr,{path:"dashboard",element:s.jsx(une,{})}),s.jsx(Vr,{path:"shipments",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(xse,{})})}),s.jsx(Vr,{path:"racks",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(wse,{})})}),s.jsx(Vr,{path:"materials",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(que,{})})}),s.jsx(Vr,{path:"material-reports",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(Hue,{})})}),s.jsx(Vr,{path:"damage-report",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(Vue,{})})}),s.jsx(Vr,{path:"moving-jobs",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(Oae,{})})}),s.jsx(Vr,{path:"jobs-management",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(pO,{})})}),s.jsx(Vr,{path:"materials-management",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(Fue,{})})}),s.jsx(Vr,{path:"job-reports",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(Uue,{})})}),s.jsx(Vr,{path:"plugin-system",element:s.jsx(us,{allowedRoles:["ADMIN"],children:s.jsx($ue,{})})}),s.jsx(Vr,{path:"approvals",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(zue,{})})}),s.jsx(Vr,{path:"invoices",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(jie,{})})}),s.jsx(Vr,{path:"invoices/:id",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(rde,{})})}),s.jsx(Vr,{path:"expenses",element:s.jsx(us,{allowedRoles:["ADMIN","MANAGER"],children:s.jsx(ade,{})})}),s.jsx(Vr,{path:"settings",element:s.jsx(us,{allowedRoles:["ADMIN"],children:s.jsx(Xae,{})})}),s.jsx(Vr,{path:"settings/templates",element:s.jsx(us,{allowedRoles:["ADMIN"],children:s.jsx(ide,{})})}),s.jsx(Vr,{path:"admin/roles",element:s.jsx(us,{allowedRoles:["ADMIN"],children:s.jsx(Bue,{})})}),s.jsx(Vr,{path:"scanner",element:s.jsx(wie,{})}),s.jsx(Vr,{path:"profile",element:s.jsx(Due,{})}),s.jsx(Vr,{path:"my-jobs",element:s.jsx(us,{allowedRoles:["WORKER"],children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Jobs"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Your assigned moving jobs will appear here"})]})})}),s.jsx(Vr,{path:"my-tasks",element:s.jsx(us,{allowedRoles:["WORKER"],children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"My Tasks"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Your current tasks and assignments"})]})})})]}),s.jsx(Vr,{path:"*",element:s.jsx($u,{to:"/scanner",replace:!0})})]})})})}const Zue=M2.createRoot(document.getElementById("root"));Zue.render(s.jsx($n.StrictMode,{children:s.jsx(Yue,{})}));export{Fr as _,Kh as c,Vo as g};
